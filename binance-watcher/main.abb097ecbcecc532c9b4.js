(self.webpackChunkbinance_future_watcher_githubio=self.webpackChunkbinance_future_watcher_githubio||[]).push([[179],{8255:Ve=>{function me(O){return Promise.resolve().then(()=>{var a=new Error("Cannot find module '"+O+"'");throw a.code="MODULE_NOT_FOUND",a})}me.keys=()=>[],me.resolve=me,me.id=8255,Ve.exports=me},7716:(Ve,me,O)=>{"use strict";O.d(me,{deG:()=>Mh,tb:()=>Qf,AFp:()=>tm,ip1:()=>Yf,CZH:()=>sc,hGG:()=>fm,z2F:()=>Jf,sBO:()=>mM,Sil:()=>om,_Vd:()=>Sf,EJc:()=>KT,SBq:()=>ol,qLn:()=>qh,vpe:()=>io,gxx:()=>sf,tBr:()=>ja,XFs:()=>pt,OlP:()=>nr,zs3:()=>Sr,ZZ4:()=>V1,aQg:()=>B1,soG:()=>nm,YKP:()=>BD,v3s:()=>Ty,h0i:()=>uu,PXZ:()=>cm,R0b:()=>xs,FiY:()=>Ga,Lbi:()=>zT,g9A:()=>ZT,Qsj:()=>Ui,FYo:()=>pa,JOm:()=>Ya,Tiy:()=>k1,q3G:()=>wn,tp0:()=>Kr,EAV:()=>OR,Rgc:()=>Fg,dDg:()=>tI,DyG:()=>zs,q4F:()=>O1,GfV:()=>P1,s_b:()=>Nf,ifc:()=>it,eFA:()=>Kw,G48:()=>sI,Gpc:()=>N,X6Q:()=>ma,_c5:()=>on,VLi:()=>iI,c2e:()=>YT,zSh:()=>hg,wAp:()=>At,vHH:()=>J,EiD:()=>Tt,mCW:()=>Za,qzn:()=>Hc,JVY:()=>l0,pB0:()=>ld,eBb:()=>Kp,L6k:()=>Yp,LAX:()=>ta,cg1:()=>S_,Tjo:()=>BR,kL8:()=>iD,yhl:()=>Lh,dqk:()=>Nt,sIi:()=>wg,CqO:()=>vf,QGY:()=>Wb,F4k:()=>qb,RDi:()=>Ri,AaK:()=>L,z3N:()=>ea,qOj:()=>Cd,TTD:()=>ur,_Bn:()=>MD,xp6:()=>Yc,uIk:()=>Nb,Tol:()=>Wx,DjV:()=>c1,ekj:()=>Md,Suo:()=>cy,Xpm:()=>ae,lG2:()=>Et,Yz7:()=>vt,cJS:()=>Xt,oAB:()=>se,Yjl:()=>kt,Y36:()=>Nd,_UZ:()=>Mx,BQk:()=>Gb,ynx:()=>Dg,qZA:()=>d_,TgZ:()=>u_,EpF:()=>kx,n5z:()=>Va,Ikx:()=>I_,SDv:()=>TD,QtT:()=>ID,pQV:()=>to,LFG:()=>hr,$8M:()=>Rc,NdJ:()=>Tg,CRH:()=>uy,oxw:()=>Px,ALo:()=>gw,lcZ:()=>sy,xi3:()=>CT,Hsn:()=>Fx,F$t:()=>Ox,Q6J:()=>yf,s9C:()=>Kb,MGl:()=>f_,VKq:()=>yT,WLB:()=>cw,kEZ:()=>uw,iGM:()=>Yg,MAs:()=>bx,CHM:()=>Aa,LSH:()=>dd,kYT:()=>Ne,Udp:()=>nl,YNc:()=>kb,W1O:()=>Ew,_uU:()=>Kx,Oqu:()=>Ng,hij:()=>wf,AsE:()=>s1,Gf:()=>ly});var a=O(9765),R=O(5319),k=O(7574),Q=O(6682),ie=O(8819);function q(s){for(let o in s)if(s[o]===q)return o;throw Error("Could not find renamed property on target object.")}function ee(s,o){for(const c in o)o.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&(s[c]=o[c])}function L(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(L).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const c=o.indexOf("\n");return-1===c?o:o.substring(0,c)}function U(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const P=q({__forward_ref__:q});function N(s){return s.__forward_ref__=N,s.toString=function(){return L(this())},s}function A(s){return B(s)?s():s}function B(s){return"function"==typeof s&&s.hasOwnProperty(P)&&s.__forward_ref__===N}class J extends Error{constructor(o,c){super(function(s,o){return`${s?`NG0${s}: `:""}${o}`}(o,c)),this.code=o}}function H(s){return"string"==typeof s?s:null==s?"":String(s)}function Z(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():H(s)}function ve(s,o){const c=o?` in ${o}`:"";throw new J("201",`No provider for ${Z(s)} found${c}`)}function ke(s,o,c,u){throw new Error(`ASSERTION ERROR: ${s}`+(null==u?"":` [Expected=> ${c} ${u} ${o} <=Actual]`))}function vt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Xt(s){return{providers:s.providers||[],imports:s.imports||[]}}function Wt(s){return an(s,Qn)||an(s,Jn)}function an(s,o){return s.hasOwnProperty(o)?s[o]:null}function Rn(s){return s&&(s.hasOwnProperty(Ke)||s.hasOwnProperty($n))?s[Ke]:null}const Qn=q({\u0275prov:q}),Ke=q({\u0275inj:q}),Jn=q({ngInjectableDef:q}),$n=q({ngInjectorDef:q});var pt=(()=>((pt=pt||{})[pt.Default=0]="Default",pt[pt.Host=1]="Host",pt[pt.Self=2]="Self",pt[pt.SkipSelf=4]="SkipSelf",pt[pt.Optional=8]="Optional",pt))();let hn;function ln(s){const o=hn;return hn=s,o}function ir(s,o,c){const u=Wt(s);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:c&pt.Optional?null:void 0!==o?o:void ve(L(s),"Injector")}function cr(s){return{toString:s}.toString()}var Dn=(()=>((Dn=Dn||{})[Dn.OnPush=0]="OnPush",Dn[Dn.Default=1]="Default",Dn))(),it=(()=>((it=it||{})[it.Emulated=0]="Emulated",it[it.None=2]="None",it[it.ShadowDom=3]="ShadowDom",it))();const Dt="undefined"!=typeof globalThis&&globalThis,Nr="undefined"!=typeof window&&window,Zr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Nt=Dt||"undefined"!=typeof global&&global||Nr||Zr,cn={},St=[],qt=q({\u0275cmp:q}),rt=q({\u0275dir:q}),qe=q({\u0275pipe:q}),mt=q({\u0275mod:q}),Mt=q({\u0275loc:q}),Lt=q({\u0275fac:q}),en=q({__NG_ELEMENT_ID__:q});let he=0;function ae(s){return cr(()=>{const c={},u={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Dn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||St,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||it.Emulated,id:"c",styles:s.styles||St,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,p=s.features,_=s.pipes;return u.id+=he++,u.inputs=Xe(s.inputs,c),u.outputs=Xe(s.outputs),p&&p.forEach(v=>v(u)),u.directiveDefs=h?()=>("function"==typeof h?h():h).map(Le):null,u.pipeDefs=_?()=>("function"==typeof _?_():_).map(X):null,u})}function Le(s){return at(s)||function(s){return s[rt]||null}(s)}function X(s){return function(s){return s[qe]||null}(s)}const te={};function se(s){return cr(()=>{const o={type:s.type,bootstrap:s.bootstrap||St,declarations:s.declarations||St,imports:s.imports||St,exports:s.exports||St,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(te[s.id]=s.type),o})}function Ne(s,o){return cr(()=>{const c=Fn(s,!0);c.declarations=o.declarations||St,c.imports=o.imports||St,c.exports=o.exports||St})}function Xe(s,o){if(null==s)return cn;const c={};for(const u in s)if(s.hasOwnProperty(u)){let h=s[u],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),c[h]=u,o&&(o[h]=p)}return c}const Et=ae;function kt(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function at(s){return s[qt]||null}function Fn(s,o){const c=s[mt]||null;if(!c&&!0===o)throw new Error(`Type ${L(s)} does not have '\u0275mod' property.`);return c}function Wn(s){return Array.isArray(s)&&"object"==typeof s[1]}function Ki(s){return Array.isArray(s)&&!0===s[1]}function Tu(s){return 0!=(8&s.flags)}function gl(s){return 2==(2&s.flags)}function mi(s){return 1==(1&s.flags)}function fs(s){return null!==s.template}function ps(s){return 0!=(512&s[2])}function js(s,o){return s.hasOwnProperty(Lt)?s[Lt]:null}class yl{constructor(o,c,u){this.previousValue=o,this.currentValue=c,this.firstChange=u}isFirstChange(){return this.firstChange}}function ur(){return yc}function yc(s){return s.type.prototype.ngOnChanges&&(s.setInput=Lr),Da}function Da(){const s=Ta(this),o=null==s?void 0:s.current;if(o){const c=s.previous;if(c===cn)s.previous=o;else for(let u in o)c[u]=o[u];s.current=null,this.ngOnChanges(o)}}function Lr(s,o,c,u){const h=Ta(s)||function(s,o){return s[bh]=o}(s,{previous:cn,current:null}),p=h.current||(h.current={}),_=h.previous,v=this.declaredInputs[c],C=_[v];p[v]=new yl(C&&C.currentValue,o,_===cn),s[u]=o}ur.ngInherit=!0;const bh="__ngSimpleChanges__";function Ta(s){return s[bh]||null}let Ia;function Ri(s){Ia=s}function vc(){return void 0!==Ia?Ia:"undefined"!=typeof document?document:void 0}function qn(s){return!!s.listen}const As={createRenderer:(s,o)=>vc()};function Ln(s){for(;Array.isArray(s);)s=s[0];return s}function bc(s,o){return Ln(o[s])}function Vn(s,o){return Ln(o[s.index])}function Ns(s,o){return s.data[o]}function Sa(s,o){return s[o]}function Vr(s,o){const c=o[s];return Wn(c)?c:c[0]}function Eh(s){return 4==(4&s[2])}function bl(s){return 128==(128&s[2])}function xr(s,o){return null==o?null:s[o]}function wl(s){s[18]=0}function wc(s,o){s[5]+=o;let c=s,u=s[3];for(;null!==u&&(1===o&&1===c[5]||-1===o&&0===c[5]);)u[5]+=o,c=u,u=u[3]}const Ft={lFrame:ju(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Lu(){return Ft.bindingsEnabled}function Ze(){return Ft.lFrame.lView}function sn(){return Ft.lFrame.tView}function Aa(s){return Ft.lFrame.contextLView=s,s[8]}function er(){let s=El();for(;null!==s&&64===s.type;)s=s.parent;return s}function El(){return Ft.lFrame.currentTNode}function Gs(){const s=Ft.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}function ci(s,o){const c=Ft.lFrame;c.currentTNode=s,c.isParent=o}function Na(){return Ft.lFrame.isParent}function xl(){Ft.lFrame.isParent=!1}function yo(){return Ft.isInCheckNoChangesMode}function xc(s){Ft.isInCheckNoChangesMode=s}function _r(){const s=Ft.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function ki(){return Ft.lFrame.bindingIndex}function Pi(){return Ft.lFrame.bindingIndex++}function Oi(s){const o=Ft.lFrame,c=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,c}function Uu(s){Ft.lFrame.inI18n=s}function Ma(s,o){const c=Ft.lFrame;c.bindingIndex=c.bindingRootIndex=s,Wo(o)}function Wo(s){Ft.lFrame.currentDirectiveIndex=s}function Dc(){return Ft.lFrame.currentQueryIndex}function vo(s){Ft.lFrame.currentQueryIndex=s}function Tl(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function $u(s,o,c){if(c&pt.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||c&pt.Host||(h=Tl(p),null===h||(p=p[15],10&h.type))););if(null===h)return!1;o=h,s=p}const u=Ft.lFrame=Dh();return u.currentTNode=o,u.lView=s,!0}function Ra(s){const o=Dh(),c=s[1];Ft.lFrame=o,o.currentTNode=c.firstChild,o.lView=s,o.tView=c,o.contextLView=s,o.bindingIndex=c.bindingStartIndex,o.inI18n=!1}function Dh(){const s=Ft.lFrame,o=null===s?null:s.child;return null===o?ju(s):o}function ju(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Gu(){const s=Ft.lFrame;return Ft.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Wu=Gu;function qo(){const s=Gu();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Yr(){return Ft.lFrame.selectedIndex}function ka(s){Ft.lFrame.selectedIndex=s}function tr(){const s=Ft.lFrame;return Ns(s.tView,s.selectedIndex)}function Ic(s,o){for(let c=o.directiveStart,u=o.directiveEnd;c<u;c++){const p=s.data[c].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:v,ngAfterViewInit:C,ngAfterViewChecked:T,ngOnDestroy:M}=p;_&&(s.contentHooks||(s.contentHooks=[])).push(-c,_),v&&((s.contentHooks||(s.contentHooks=[])).push(c,v),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(c,v)),C&&(s.viewHooks||(s.viewHooks=[])).push(-c,C),T&&((s.viewHooks||(s.viewHooks=[])).push(c,T),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(c,T)),null!=M&&(s.destroyHooks||(s.destroyHooks=[])).push(c,M)}}function Ws(s,o,c){Th(s,o,3,c)}function Dr(s,o,c,u){(3&s[2])===c&&Th(s,o,c,u)}function Pa(s,o){let c=s[2];(3&c)===o&&(c&=2047,c+=1,s[2]=c)}function Th(s,o,c,u){const p=null!=u?u:-1,_=o.length-1;let v=0;for(let C=void 0!==u?65535&s[18]:0;C<_;C++)if("number"==typeof o[C+1]){if(v=o[C],null!=u&&v>=u)break}else o[C]<0&&(s[18]+=65536),(v<p||-1==p)&&(Pp(s,c,o,C),s[18]=(4294901760&s[18])+C+2),C++}function Pp(s,o,c,u){const h=c[u]<0,p=c[u+1],v=s[h?-c[u]:c[u]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(v)}finally{}}}else try{p.call(v)}finally{}}class bo{constructor(o,c,u){this.factory=o,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=u}}function Ih(s,o,c){const u=qn(s);let h=0;for(;h<c.length;){const p=c[h];if("number"==typeof p){if(0!==p)break;h++;const _=c[h++],v=c[h++],C=c[h++];u?s.setAttribute(o,v,C,_):o.setAttributeNS(_,v,C)}else{const _=p,v=c[++h];Ms(_)?u&&s.setProperty(o,_,v):u?s.setAttribute(o,_,v):o.setAttribute(_,v),h++}}return h}function Fp(s){return 3===s||4===s||6===s}function Ms(s){return 64===s.charCodeAt(0)}function Yu(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let c=-1;for(let u=0;u<o.length;u++){const h=o[u];"number"==typeof h?c=h:0===c||Lp(s,c,h,null,-1===c||2===c?o[++u]:null)}}return s}function Lp(s,o,c,u,h){let p=0,_=s.length;if(-1===o)_=-1;else for(;p<s.length;){const v=s[p++];if("number"==typeof v){if(v===o){_=-1;break}if(v>o){_=p-1;break}}}for(;p<s.length;){const v=s[p];if("number"==typeof v)break;if(v===c){if(null===u)return void(null!==h&&(s[p+1]=h));if(u===s[p+1])return void(s[p+2]=h)}p++,null!==u&&p++,null!==h&&p++}-1!==_&&(s.splice(_,0,o),p=_+1),s.splice(p++,0,c),null!==u&&s.splice(p++,0,u),null!==h&&s.splice(p++,0,h)}function Sl(s){return-1!==s}function Fa(s){return 32767&s}function Ji(s,o){let c=function(s){return s>>16}(s),u=o;for(;c>0;)u=u[15],c--;return u}let La=!0;function Ac(s){const o=La;return La=s,o}let Nc=0;function Zo(s,o){const c=un(s,o);if(-1!==c)return c;const u=o[1];u.firstCreatePass&&(s.injectorIndex=o.length,Al(u.data,s),Al(o,null),Al(u.blueprint,null));const h=xt(s,o),p=s.injectorIndex;if(Sl(h)){const _=Fa(h),v=Ji(h,o),C=v[1].data;for(let T=0;T<8;T++)o[p+T]=v[_+T]|C[_+T]}return o[p+8]=h,p}function Al(s,o){s.push(0,0,0,0,0,0,0,0,o)}function un(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function xt(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let c=0,u=null,h=o;for(;null!==h;){const p=h[1],_=p.type;if(u=2===_?p.declTNode:1===_?h[6]:null,null===u)return-1;if(c++,h=h[15],-1!==u.injectorIndex)return u.injectorIndex|c<<16}return-1}function Tn(s,o,c){!function(s,o,c){let u;"string"==typeof c?u=c.charCodeAt(0)||0:c.hasOwnProperty(en)&&(u=c[en]),null==u&&(u=c[en]=Nc++);const h=255&u;o.data[s+(h>>5)]|=1<<h}(s,o,c)}function Tr(s,o,c){if(c&pt.Optional)return s;ve(o,"NodeInjector")}function zo(s,o,c,u){if(c&pt.Optional&&void 0===u&&(u=null),0==(c&(pt.Self|pt.Host))){const h=s[9],p=ln(void 0);try{return h?h.get(o,u,c&pt.Optional):ir(o,u,c&pt.Optional)}finally{ln(p)}}return Tr(u,o,c)}function Rs(s,o,c,u=pt.Default,h){if(null!==s){const p=function(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(en)?s[en]:void 0;return"number"==typeof o?o>=0?255&o:Nh:o}(c);if("function"==typeof p){if(!$u(o,s,u))return u&pt.Host?Tr(h,c,u):zo(o,c,u,h);try{const _=p(u);if(null!=_||u&pt.Optional)return _;ve(c)}finally{Wu()}}else if("number"==typeof p){let _=null,v=un(s,o),C=-1,T=u&pt.Host?o[16][6]:null;for((-1===v||u&pt.SkipSelf)&&(C=-1===v?xt(s,o):o[v+8],-1!==C&&Yo(u,!1)?(_=o[1],v=Fa(C),o=Ji(C,o)):v=-1);-1!==v;){const M=o[1];if(Mc(p,v,M.data)){const $=Bp(v,o,c,_,u,T);if($!==gr)return $}C=o[v+8],-1!==C&&Yo(u,o[1].data[v+8]===T)&&Mc(p,v,o)?(_=M,v=Fa(C),o=Ji(C,o)):v=-1}}}return zo(o,c,u,h)}const gr={};function Nh(){return new Eo(er(),Ze())}function Bp(s,o,c,u,h,p){const _=o[1],v=_.data[s+8],M=Co(v,_,c,null==u?gl(v)&&La:u!=_&&0!=(3&v.type),h&pt.Host&&p===v);return null!==M?zn(o,_,M,v):gr}function Co(s,o,c,u,h){const p=s.providerIndexes,_=o.data,v=1048575&p,C=s.directiveStart,M=p>>20,K=h?v+M:s.directiveEnd;for(let ue=u?v:v+M;ue<K;ue++){const pe=_[ue];if(ue<C&&c===pe||ue>=C&&pe.type===c)return ue}if(h){const ue=_[C];if(ue&&fs(ue)&&ue.type===c)return C}return null}function zn(s,o,c,u){let h=s[c];const p=o.data;if(function(s){return s instanceof bo}(h)){const _=h;_.resolving&&function(s,o){throw new J("200",`Circular dependency in DI detected for ${s}`)}(Z(p[c]));const v=Ac(_.canSeeViewProviders);_.resolving=!0;const C=_.injectImpl?ln(_.injectImpl):null;$u(s,u,pt.Default);try{h=s[c]=_.factory(void 0,p,s,u),o.firstCreatePass&&c>=u.directiveStart&&function(s,o,c){const{ngOnChanges:u,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(u){const _=yc(o);(c.preOrderHooks||(c.preOrderHooks=[])).push(s,_),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(s,_)}h&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-s,h),p&&((c.preOrderHooks||(c.preOrderHooks=[])).push(s,p),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(s,p))}(c,p[c],o)}finally{null!==C&&ln(C),Ac(v),_.resolving=!1,Wu()}}return h}function Mc(s,o,c){return!!(c[o+(s>>5)]&1<<s)}function Yo(s,o){return!(s&pt.Self||s&pt.Host&&o)}class Eo{constructor(o,c){this._tNode=o,this._lView=c}get(o,c,u){return Rs(this._tNode,this._lView,o,u,c)}}function Va(s){return cr(()=>{const o=s.prototype.constructor,c=o[Lt]||Ku(o),u=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==u;){const p=h[Lt]||Ku(h);if(p&&p!==c)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function Ku(s){return B(s)?()=>{const o=Ku(A(s));return o&&o()}:js(s)}function Rc(s){return function(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const c=s.attrs;if(c){const u=c.length;let h=0;for(;h<u;){const p=c[h];if(Fp(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<u&&"string"==typeof c[h];)h++;else{if(p===o)return c[h+1];h+=2}}}return null}(er(),s)}const ms="__parameters__";function Fi(s,o,c){return cr(()=>{const u=function(s){return function(...c){if(s){const u=s(...c);for(const h in u)this[h]=u[h]}}}(o);function h(...p){if(this instanceof h)return u.apply(this,p),this;const _=new h(...p);return v.annotation=_,v;function v(C,T,M){const $=C.hasOwnProperty(ms)?C[ms]:Object.defineProperty(C,ms,{value:[]})[ms];for(;$.length<=M;)$.push(null);return($[M]=$[M]||[]).push(_),C}}return c&&(h.prototype=Object.create(c.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class nr{constructor(o,c){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=vt({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Mh=new nr("AnalyzeForEntryComponents"),zs=Function;function yi(s,o){void 0===o&&(o=s);for(let c=0;c<s.length;c++){let u=s[c];Array.isArray(u)?(o===s&&(o=s.slice(0,c)),yi(u,o)):o!==s&&o.push(u)}return o}function Ps(s,o){s.forEach(c=>Array.isArray(c)?Ps(c,o):o(c))}function Os(s,o,c){o>=s.length?s.push(c):s.splice(o,0,c)}function Io(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function So(s,o){const c=[];for(let u=0;u<s;u++)c.push(o);return c}function Ir(s,o,c){let u=Ha(s,o);return u>=0?s[1|u]=c:(u=~u,function(s,o,c,u){let h=s.length;if(h==o)s.push(c,u);else if(1===h)s.push(u,s[0]),s[0]=c;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=c,s[o+1]=u}}(s,u,o,c)),u}function vr(s,o){const c=Ha(s,o);if(c>=0)return s[1|c]}function Ha(s,o){return function(s,o,c){let u=0,h=s.length>>c;for(;h!==u;){const p=u+(h-u>>1),_=s[p<<c];if(o===_)return p<<c;_>o?h=p:u=p+1}return~(h<<c)}(s,o,1)}const fn={},Ht="__NG_DI_FLAG__",Mr="ngTempTokenPath",Ml=/\n/gm,Ks="__source",Fs=q({provide:String,useValue:q});let Qo;function Gt(s){const o=Qo;return Qo=s,o}function Gp(s,o=pt.Default){if(void 0===Qo)throw new Error("inject() must be called from an injection context");return null===Qo?ir(s,void 0,o):Qo.get(s,o&pt.Optional?null:void 0,o)}function hr(s,o=pt.Default){return(hn||Gp)(A(s),o)}function Rl(s){const o=[];for(let c=0;c<s.length;c++){const u=A(s[c]);if(Array.isArray(u)){if(0===u.length)throw new Error("Arguments array must have arguments.");let h,p=pt.Default;for(let _=0;_<u.length;_++){const v=u[_],C=Wp(v);"number"==typeof C?-1===C?h=v.token:p|=C:h=v}o.push(hr(h,p))}else o.push(hr(u))}return o}function kl(s,o){return s[Ht]=o,s.prototype[Ht]=o,s}function Wp(s){return s[Ht]}function _s(s,o,c,u){const h=s[Mr];throw o[Ks]&&h.unshift(o[Ks]),s.message=function(s,o,c,u=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=L(o);if(Array.isArray(o))h=o.map(L).join(" -> ");else if("object"==typeof o){let p=[];for(let _ in o)if(o.hasOwnProperty(_)){let v=o[_];p.push(_+":"+("string"==typeof v?JSON.stringify(v):L(v)))}h=`{${p.join(", ")}}`}return`${c}${u?"("+u+")":""}[${h}]: ${s.replace(Ml,"\n  ")}`}("\n"+s.message,h,c,u),s.ngTokenPath=h,s[Mr]=null,s}const ja=kl(Fi("Inject",s=>({token:s})),-1),Ga=kl(Fi("Optional"),8),Kr=kl(Fi("SkipSelf"),4);let Vc;function Xo(s){var o;return(null===(o=function(){if(void 0===Vc&&(Vc=null,Nt.trustedTypes))try{Vc=Nt.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return Vc}())||void 0===o?void 0:o.createHTML(s))||s}class Ol{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Iv extends Ol{getTypeName(){return"HTML"}}class Sv extends Ol{getTypeName(){return"Style"}}class Fh extends Ol{getTypeName(){return"Script"}}class Av extends Ol{getTypeName(){return"URL"}}class Nv extends Ol{getTypeName(){return"ResourceURL"}}function ea(s){return s instanceof Ol?s.changingThisBreaksApplicationSecurity:s}function Hc(s,o){const c=Lh(s);if(null!=c&&c!==o){if("ResourceURL"===c&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${c} (see https://g.co/ng/security#xss)`)}return c===o}function Lh(s){return s instanceof Ol&&s.getTypeName()||null}function l0(s){return new Iv(s)}function Yp(s){return new Sv(s)}function Kp(s){return new Fh(s)}function ta(s){return new Av(s)}function ld(s){return new Nv(s)}function Vh(s){const o=new Mv(s);return function(){try{return!!(new window.DOMParser).parseFromString(Xo(""),"text/html")}catch(s){return!1}}()?new c0(o):o}class c0{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const c=(new window.DOMParser).parseFromString(Xo(o),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(o):(c.removeChild(c.firstChild),c)}catch(c){return null}}}class Mv{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const c=this.inertDocument.createElement("html");this.inertDocument.appendChild(c);const u=this.inertDocument.createElement("body");c.appendChild(u)}}getInertBodyElement(o){const c=this.inertDocument.createElement("template");if("content"in c)return c.innerHTML=Xo(o),c;const u=this.inertDocument.createElement("body");return u.innerHTML=Xo(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(o){const c=o.attributes;for(let h=c.length-1;0<h;h--){const _=c.item(h).name;("xmlns:ns1"===_||0===_.indexOf("ns1:"))&&o.removeAttribute(_)}let u=o.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const u0=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Bh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Za(s){return(s=String(s)).match(u0)||s.match(Bh)?s:"unsafe:"+s}function Uh(s){return(s=String(s)).split(",").map(o=>Za(o.trim())).join(", ")}function Ls(s){const o={};for(const c of s.split(","))o[c]=!0;return o}function Fl(...s){const o={};for(const c of s)for(const u in c)c.hasOwnProperty(u)&&(o[u]=!0);return o}const jc=Ls("area,br,col,hr,img,wbr"),h0=Ls("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Gc=Ls("rp,rt"),Qp=Fl(jc,Fl(h0,Ls("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Fl(Gc,Ls("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Fl(Gc,h0)),cd=Ls("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),w=Ls("srcset"),E=Fl(cd,w,Ls("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ls("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),F=Ls("script,style,template");class j{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let c=o.firstChild,u=!0;for(;c;)if(c.nodeType===Node.ELEMENT_NODE?u=this.startElement(c):c.nodeType===Node.TEXT_NODE?this.chars(c.nodeValue):this.sanitizedSomething=!0,u&&c.firstChild)c=c.firstChild;else for(;c;){c.nodeType===Node.ELEMENT_NODE&&this.endElement(c);let h=this.checkClobberedElement(c,c.nextSibling);if(h){c=h;break}c=this.checkClobberedElement(c,c.parentNode)}return this.buf.join("")}startElement(o){const c=o.nodeName.toLowerCase();if(!Qp.hasOwnProperty(c))return this.sanitizedSomething=!0,!F.hasOwnProperty(c);this.buf.push("<"),this.buf.push(c);const u=o.attributes;for(let h=0;h<u.length;h++){const p=u.item(h),_=p.name,v=_.toLowerCase();if(!E.hasOwnProperty(v)){this.sanitizedSomething=!0;continue}let C=p.value;cd[v]&&(C=Za(C)),w[v]&&(C=Uh(C)),this.buf.push(" ",_,'="',ft(C),'"')}return this.buf.push(">"),!0}endElement(o){const c=o.nodeName.toLowerCase();Qp.hasOwnProperty(c)&&!jc.hasOwnProperty(c)&&(this.buf.push("</"),this.buf.push(c),this.buf.push(">"))}chars(o){this.buf.push(ft(o))}checkClobberedElement(o,c){if(c&&(o.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return c}}const ye=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ge=/([^\#-~ |!])/g;function ft(s){return s.replace(/&/g,"&amp;").replace(ye,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(Ge,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let nt;function Tt(s,o){let c=null;try{nt=nt||Vh(s);let u=o?String(o):"";c=nt.getInertBodyElement(u);let h=5,p=u;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,u=p,p=c.innerHTML,c=nt.getInertBodyElement(u)}while(u!==p);return Xo((new j).sanitizeChildren(Sn(c)||c))}finally{if(c){const u=Sn(c)||c;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function Sn(s){return"content"in s&&function(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var wn=(()=>((wn=wn||{})[wn.NONE=0]="NONE",wn[wn.HTML=1]="HTML",wn[wn.STYLE=2]="STYLE",wn[wn.SCRIPT=3]="SCRIPT",wn[wn.URL=4]="URL",wn[wn.RESOURCE_URL=5]="RESOURCE_URL",wn))();function dd(s){const o=function(){const s=Ze();return s&&s[12]}();return o?o.sanitize(wn.URL,s)||"":Hc(s,"URL")?ea(s):Za(H(s))}const jh="__ngContext__";function Vi(s,o){s[jh]=o}function kv(s){const o=function(s){return s[jh]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function hd(s){return s.ngOriginalError}function zS(s,...o){s.error(...o)}class qh{constructor(){this._console=console}handleError(o){const c=this._findOriginalError(o),u=this._findContext(o),h=(s=o)&&s.ngErrorLogger||zS;var s;h(this._console,"ERROR",o),c&&h(this._console,"ORIGINAL ERROR",c),u&&h(this._console,"ERROR CONTEXT",u)}_findContext(o){return o?o.ngDebugContext||this._findContext(hd(o)):null}_findOriginalError(o){let c=o&&hd(o);for(;c&&hd(c);)c=hd(c);return c||null}}const QS=/^>|^->|<!--|-->|--!>|<!-$/g,Vv=/(<|>)/;const gE=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Nt))();function za(s){return s instanceof Function?s():s}var Ya=(()=>((Ya=Ya||{})[Ya.Important=1]="Important",Ya[Ya.DashCase=2]="DashCase",Ya))();let Bv;function y0(s,o){return Bv(s,o)}function sg(s){const o=s[3];return Ki(o)?o[3]:o}function v0(s){return Uv(s[13])}function bE(s){return Uv(s[4])}function Uv(s){for(;null!==s&&!Ki(s);)s=s[4];return s}function fd(s,o,c,u,h){if(null!=u){let p,_=!1;Ki(u)?p=u:Wn(u)&&(_=!0,u=u[0]);const v=Ln(u);0===s&&null!==c?null==h?DE(o,c,v):qc(o,c,v,h||null,!0):1===s&&null!==c?qc(o,c,v,h||null,!0):2===s?qv(o,v,_):3===s&&o.destroyNode(v),null!=p&&function(s,o,c,u,h){const p=c[7];p!==Ln(c)&&fd(o,s,u,p,h);for(let v=10;v<c.length;v++){const C=c[v];gd(C[1],C,s,o,u,p)}}(o,s,p,c,h)}}function b0(s,o){return qn(s)?s.createText(o):s.createTextNode(o)}function wE(s,o,c){qn(s)?s.setValue(o,c):o.textContent=c}function iA(s,o){return s.createComment(function(s){return s.replace(QS,o=>o.replace(Vv,"\u200b$1\u200b"))}(o))}function Hv(s,o,c){return qn(s)?s.createElement(o,c):null===c?s.createElement(o):s.createElementNS(c,o)}function w0(s,o){const c=s[9],u=c.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,wc(h,-1)),c.splice(u,1)}function C0(s,o){if(s.length<=10)return;const c=10+o,u=s[c];if(u){const h=u[17];null!==h&&h!==s&&w0(h,u),o>0&&(s[c-1][4]=u[4]);const p=Io(s,10+o);!function(s,o){gd(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(u[1],u);const _=p[19];null!==_&&_.detachView(p[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function CE(s,o){if(!(256&o[2])){const c=o[11];qn(c)&&c.destroyNode&&gd(s,o,c,3,null,null),function(s){let o=s[13];if(!o)return Wc(s[1],s);for(;o;){let c=null;if(Wn(o))c=o[13];else{const u=o[10];u&&(c=u)}if(!c){for(;o&&!o[4]&&o!==s;)Wn(o)&&Wc(o[1],o),o=o[3];null===o&&(o=s),Wn(o)&&Wc(o[1],o),c=o&&o[4]}o=c}}(o)}}function Wc(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function(s,o){let c;if(null!=s&&null!=(c=s.destroyHooks))for(let u=0;u<c.length;u+=2){const h=o[c[u]];if(!(h instanceof bo)){const p=c[u+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const v=h[p[_]],C=p[_+1];try{C.call(v)}finally{}}else try{p.call(h)}finally{}}}}(s,o),function(s,o){const c=s.cleanup,u=o[7];let h=-1;if(null!==c)for(let p=0;p<c.length-1;p+=2)if("string"==typeof c[p]){const _=c[p+1],v="function"==typeof _?_(o):Ln(o[_]),C=u[h=c[p+2]],T=c[p+3];"boolean"==typeof T?v.removeEventListener(c[p],C,T):T>=0?u[h=T]():u[h=-T].unsubscribe(),p+=2}else{const _=u[h=c[p+1]];c[p].call(_)}if(null!==u){for(let p=h+1;p<u.length;p++)u[p]();o[7]=null}}(s,o),1===o[1].type&&qn(o[11])&&o[11].destroy();const c=o[17];if(null!==c&&Ki(o[3])){c!==o[3]&&w0(c,o);const u=o[19];null!==u&&u.detachView(s)}}}function EE(s,o,c){return xE(s,o.parent,c)}function xE(s,o,c){let u=o;for(;null!==u&&40&u.type;)u=(o=u).parent;if(null===u)return c[0];if(2&u.flags){const h=s.data[u.directiveStart].encapsulation;if(h===it.None||h===it.Emulated)return null}return Vn(u,c)}function qc(s,o,c,u,h){qn(s)?s.insertBefore(o,c,u,h):o.insertBefore(c,u,h)}function DE(s,o,c){qn(s)?s.appendChild(o,c):o.appendChild(c)}function TE(s,o,c,u,h){null!==u?qc(s,o,c,u,h):DE(s,o,c)}function E0(s,o){return qn(s)?s.parentNode(o):o.parentNode}function D0(s,o,c){return pd(s,o,c)}function T0(s,o,c){return 40&s.type?Vn(s,c):null}let jv,pd=T0;function IE(s,o){pd=s,jv=o}function og(s,o,c,u){const h=EE(s,u,o),p=o[11],v=D0(u.parent||o[6],u,o);if(null!=h)if(Array.isArray(c))for(let C=0;C<c.length;C++)TE(p,h,c[C],v,!1);else TE(p,h,c,v,!1);void 0!==jv&&jv(p,u,o,c,h)}function I0(s,o){if(null!==o){const c=o.type;if(3&c)return Vn(o,s);if(4&c)return Wv(-1,s[o.index]);if(8&c){const u=o.child;if(null!==u)return I0(s,u);{const h=s[o.index];return Ki(h)?Wv(-1,h):Ln(h)}}if(32&c)return y0(o,s)()||Ln(s[o.index]);{const u=Gv(s,o);return null!==u?Array.isArray(u)?u[0]:I0(sg(s[16]),u):I0(s,o.next)}}return null}function Gv(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Wv(s,o){const c=10+s+1;if(c<o.length){const u=o[c],h=u[1].firstChild;if(null!==h)return I0(u,h)}return o[7]}function qv(s,o,c){const u=E0(s,o);u&&function(s,o,c,u){qn(s)?s.removeChild(o,c,u):o.removeChild(c)}(s,u,o,c)}function S0(s,o,c,u,h,p,_){for(;null!=c;){const v=u[c.index],C=c.type;if(_&&0===o&&(v&&Vi(Ln(v),u),c.flags|=4),64!=(64&c.flags))if(8&C)S0(s,o,c.child,u,h,p,!1),fd(o,s,h,v,p);else if(32&C){const T=y0(c,u);let M;for(;M=T();)fd(o,s,h,M,p);fd(o,s,h,v,p)}else 16&C?Zc(s,o,u,c,h,p):fd(o,s,h,v,p);c=_?c.projectionNext:c.next}}function gd(s,o,c,u,h,p){S0(c,u,s.firstChild,o,h,p,!1)}function Zc(s,o,c,u,h,p){const _=c[16],C=_[6].projection[u.projection];if(Array.isArray(C))for(let T=0;T<C.length;T++)fd(o,s,h,C[T],p);else S0(s,o,C,_[3],h,p,!0)}function AE(s,o,c){qn(s)?s.setAttribute(o,"style",c):o.style.cssText=c}function Zv(s,o,c){qn(s)?""===c?s.removeAttribute(o,"class"):s.setAttribute(o,"class",c):o.className=c}function zv(s,o,c){let u=s.length;for(;;){const h=s.indexOf(o,c);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===u||s.charCodeAt(h+p)<=32)return h}c=h+1}}const NE="ng-template";function fA(s,o,c){let u=0;for(;u<s.length;){let h=s[u++];if(c&&"class"===h){if(h=s[u],-1!==zv(h.toLowerCase(),o,0))return!0}else if(1===h){for(;u<s.length&&"string"==typeof(h=s[u++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function Yv(s){return 4===s.type&&s.value!==NE}function pA(s,o,c){return o===(4!==s.type||c?s.value:NE)}function gA(s,o,c){let u=4;const h=s.attrs||[],p=function(s){for(let o=0;o<s.length;o++)if(Fp(s[o]))return o;return s.length}(h);let _=!1;for(let v=0;v<o.length;v++){const C=o[v];if("number"!=typeof C){if(!_)if(4&u){if(u=2|1&u,""!==C&&!pA(s,C,c)||""===C&&1===o.length){if(ia(u))return!1;_=!0}}else{const T=8&u?C:o[++v];if(8&u&&null!==s.attrs){if(!fA(s.attrs,T,c)){if(ia(u))return!1;_=!0}continue}const $=Kv(8&u?"class":C,h,Yv(s),c);if(-1===$){if(ia(u))return!1;_=!0;continue}if(""!==T){let K;K=$>p?"":h[$+1].toLowerCase();const ue=8&u?K:null;if(ue&&-1!==zv(ue,T,0)||2&u&&T!==K){if(ia(u))return!1;_=!0}}}}else{if(!_&&!ia(u)&&!ia(C))return!1;if(_&&ia(C))continue;_=!1,u=C|1&u}}return ia(u)||_}function ia(s){return 0==(1&s)}function Kv(s,o,c,u){if(null===o)return-1;let h=0;if(u||!c){let p=!1;for(;h<o.length;){const _=o[h];if(_===s)return h;if(3===_||6===_)p=!0;else{if(1===_||2===_){let v=o[++h];for(;"string"==typeof v;)v=o[++h];continue}if(4===_)break;if(0===_){h+=4;continue}}h+=p?1:2}return-1}return function(s,o){let c=s.indexOf(4);if(c>-1)for(c++;c<s.length;){const u=s[c];if("number"==typeof u)return-1;if(u===o)return c;c++}return-1}(o,s)}function ME(s,o,c=!1){for(let u=0;u<o.length;u++)if(gA(s,o[u],c))return!0;return!1}function c2(s,o){e:for(let c=0;c<o.length;c++){const u=o[c];if(s.length===u.length){for(let h=0;h<s.length;h++)if(s[h]!==u[h])continue e;return!0}}return!1}function kE(s,o){return s?":not("+o.trim()+")":o}function yA(s){let o=s[0],c=1,u=2,h="",p=!1;for(;c<s.length;){let _=s[c];if("string"==typeof _)if(2&u){const v=s[++c];h+="["+_+(v.length>0?'="'+v+'"':"")+"]"}else 8&u?h+="."+_:4&u&&(h+=" "+_);else""!==h&&!ia(_)&&(o+=kE(p,h),h=""),u=_,p=p||!ia(u);c++}return""!==h&&(o+=kE(p,h)),o}const Kt={};function Yc(s){A0(sn(),Ze(),Yr()+s,yo())}function A0(s,o,c,u){if(!u)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&Ws(o,p,c)}else{const p=s.preOrderHooks;null!==p&&Dr(o,p,0,c)}ka(c)}function N0(s,o){return s<<17|o<<2}function sa(s){return s>>17&32767}function md(s){return 2|s}function Bl(s){return(131068&s)>>2}function zh(s,o){return-131069&s|o<<2}function Qv(s){return 1|s}function Kh(s,o){const c=s.contentQueries;if(null!==c)for(let u=0;u<c.length;u+=2){const h=c[u],p=c[u+1];if(-1!==p){const _=s.data[p];vo(h),_.contentQueries(2,o[p],p)}}}function di(s,o,c,u,h,p,_,v,C,T){const M=o.blueprint.slice();return M[0]=h,M[2]=140|u,wl(M),M[3]=M[15]=s,M[8]=c,M[10]=_||s&&s[10],M[11]=v||s&&s[11],M[12]=C||s&&s[12]||null,M[9]=T||s&&s[9]||null,M[6]=p,M[16]=2==o.type?s[16]:M,M}function Qh(s,o,c,u,h){let p=s.data[o];if(null===p)p=Jh(s,o,c,u,h),Ft.lFrame.inI18n&&(p.flags|=64);else if(64&p.type){p.type=c,p.value=u,p.attrs=h;const _=Gs();p.injectorIndex=null===_?-1:_.injectorIndex}return ci(p,!0),p}function Jh(s,o,c,u,h){const p=El(),_=Na(),C=s.data[o]=function(s,o,c,u,h,p){return{type:c,index:u,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,c,o,u,h);return null===s.firstChild&&(s.firstChild=C),null!==p&&(_?null==p.child&&null!==C.parent&&(p.child=C):null===p.next&&(p.next=C)),C}function Xh(s,o,c,u){if(0===c)return-1;const h=o.length;for(let p=0;p<c;p++)o.push(u),s.blueprint.push(u),s.data.push(null);return h}function Js(s,o,c){Ra(o);try{const u=s.viewQuery;null!==u&&Qc(1,u,c);const h=s.template;null!==h&&$E(s,o,h,1,c),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Kh(s,o),s.staticViewQueries&&Qc(2,s.viewQuery,c);const p=s.components;null!==p&&function(s,o){for(let c=0;c<o.length;c++)FA(s,o[c])}(o,p)}catch(u){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),u}finally{o[2]&=-5,qo()}}function bs(s,o,c,u){const h=o[2];if(256==(256&h))return;Ra(o);const p=yo();try{wl(o),function(s){Ft.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==c&&$E(s,o,c,2,u);const _=3==(3&h);if(!p)if(_){const T=s.preOrderCheckHooks;null!==T&&Ws(o,T,null)}else{const T=s.preOrderHooks;null!==T&&Dr(o,T,0,null),Pa(o,0)}if(function(s){for(let o=v0(s);null!==o;o=bE(o)){if(!o[2])continue;const c=o[9];for(let u=0;u<c.length;u++){const h=c[u],p=h[3];0==(1024&h[2])&&wc(p,1),h[2]|=1024}}}(o),function(s){for(let o=v0(s);null!==o;o=bE(o))for(let c=10;c<o.length;c++){const u=o[c],h=u[1];bl(u)&&bs(h,u,h.template,u[8])}}(o),null!==s.contentQueries&&Kh(s,o),!p)if(_){const T=s.contentCheckHooks;null!==T&&Ws(o,T)}else{const T=s.contentHooks;null!==T&&Dr(o,T,1),Pa(o,1)}!function(s,o){const c=s.hostBindingOpCodes;if(null!==c)try{for(let u=0;u<c.length;u++){const h=c[u];if(h<0)ka(~h);else{const p=h,_=c[++u],v=c[++u];Ma(_,p),v(2,o[p])}}}finally{ka(-1)}}(s,o);const v=s.components;null!==v&&function(s,o){for(let c=0;c<o.length;c++)XE(s,o[c])}(o,v);const C=s.viewQuery;if(null!==C&&Qc(2,C,u),!p)if(_){const T=s.viewCheckHooks;null!==T&&Ws(o,T)}else{const T=s.viewHooks;null!==T&&Dr(o,T,2),Pa(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),p||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,wc(o[3],-1))}finally{qo()}}function vd(s,o,c,u){const h=o[10],p=!yo(),_=Eh(o);try{p&&!_&&h.begin&&h.begin(),_&&Js(s,o,u),bs(s,o,c,u)}finally{p&&!_&&h.end&&h.end()}}function $E(s,o,c,u,h){const p=Yr(),_=2&u;try{ka(-1),_&&o.length>20&&A0(s,o,20,yo()),c(u,h)}finally{ka(p)}}function ef(s,o,c){if(Tu(o)){const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const _=s.data[p];_.contentQueries&&_.contentQueries(1,c[p],p)}}}function cg(s,o,c){!Lu()||(function(s,o,c,u){const h=c.directiveStart,p=c.directiveEnd;s.firstCreatePass||Zo(c,o),Vi(u,o);const _=c.initialInputs;for(let v=h;v<p;v++){const C=s.data[v],T=fs(C);T&&cb(o,c,C);const M=zn(o,s,v,c);Vi(M,o),null!==_&&PA(0,v-h,M,C,0,_),T&&(Vr(c.index,o)[8]=M)}}(s,o,c,Vn(c,o)),128==(128&c.flags)&&function(s,o,c){const u=c.directiveStart,h=c.directiveEnd,_=c.index,v=Ft.lFrame.currentDirectiveIndex;try{ka(_);for(let C=u;C<h;C++){const T=s.data[C],M=o[C];Wo(C),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&lb(T,M)}}finally{ka(-1),Wo(v)}}(s,o,c))}function F0(s,o,c=Vn){const u=o.localNames;if(null!==u){let h=o.index+1;for(let p=0;p<u.length;p+=2){const _=u[p+1],v=-1===_?c(o,s):s[_];s[h++]=v}}}function hi(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=ug(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function ug(s,o,c,u,h,p,_,v,C,T){const M=20+u,$=M+h,K=function(s,o){const c=[];for(let u=0;u<o;u++)c.push(u<s?null:Kt);return c}(M,$),ue="function"==typeof T?T():T;return K[1]={type:s,blueprint:K,template:c,queries:null,viewQuery:v,declTNode:o,data:K.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:$,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:C,consts:ue,incompleteFirstPass:!1}}function nb(s,o,c,u){const h=nx(o);null===c?h.push(u):(h.push(c),s.firstCreatePass&&nf(s).push(u,h.length-1))}function dg(s,o,c){for(let u in s)if(s.hasOwnProperty(u)){const h=s[u];(c=null===c?{}:c).hasOwnProperty(u)?c[u].push(o,h):c[u]=[o,h]}return c}function Bi(s,o,c,u,h,p,_,v){const C=Vn(o,c);let M,T=o.inputs;!v&&null!=T&&(M=T[u])?(rx(s,c,M,u,h),gl(o)&&function(s,o){const c=Vr(o,s);16&c[2]||(c[2]|=64)}(c,o.index)):3&o.type&&(u=function(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(u),h=null!=_?_(h,o.value||"",u):h,qn(p)?p.setProperty(C,u,h):Ms(u)||(C.setProperty?C.setProperty(u,h):C[u]=h))}function V0(s,o,c,u){let h=!1;if(Lu()){const p=function(s,o,c){const u=s.directiveRegistry;let h=null;if(u)for(let p=0;p<u.length;p++){const _=u[p];ME(c,_.selectors,!1)&&(h||(h=[]),Tn(Zo(c,o),s,_.type),fs(_)?(B0(s,c),h.unshift(_)):h.push(_))}return h}(s,o,c),_=null===u?null:{"":-1};if(null!==p){h=!0,YE(c,s.data.length,p.length);for(let M=0;M<p.length;M++){const $=p[M];$.providersResolver&&$.providersResolver($)}let v=!1,C=!1,T=Xh(s,o,p.length,null);for(let M=0;M<p.length;M++){const $=p[M];c.mergedAttrs=Yu(c.mergedAttrs,$.hostAttrs),U0(s,c,o,T,$),zE(T,$,_),null!==$.contentQueries&&(c.flags|=8),(null!==$.hostBindings||null!==$.hostAttrs||0!==$.hostVars)&&(c.flags|=128);const K=$.type.prototype;!v&&(K.ngOnChanges||K.ngOnInit||K.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(c.index),v=!0),!C&&(K.ngOnChanges||K.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(c.index),C=!0),T++}!function(s,o){const u=o.directiveEnd,h=s.data,p=o.attrs,_=[];let v=null,C=null;for(let T=o.directiveStart;T<u;T++){const M=h[T],$=M.inputs,K=null===p||Yv(o)?null:KE($,p);_.push(K),v=dg($,T,v),C=dg(M.outputs,T,C)}null!==v&&(v.hasOwnProperty("class")&&(o.flags|=16),v.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=_,o.inputs=v,o.outputs=C}(s,c)}_&&function(s,o,c){if(o){const u=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=c[o[h+1]];if(null==p)throw new J("301",`Export of name '${o[h+1]}' not found!`);u.push(o[h],p)}}}(c,u,_)}return c.mergedAttrs=Yu(c.mergedAttrs,c.attrs),h}function ob(s,o,c,u,h,p){const _=p.hostBindings;if(_){let v=s.hostBindingOpCodes;null===v&&(v=s.hostBindingOpCodes=[]);const C=~o.index;(function(s){let o=s.length;for(;o>0;){const c=s[--o];if("number"==typeof c&&c<0)return c}return 0})(v)!=C&&v.push(C),v.push(u,h,_)}}function lb(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function B0(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function zE(s,o,c){if(c){if(o.exportAs)for(let u=0;u<o.exportAs.length;u++)c[o.exportAs[u]]=s;fs(o)&&(c[""]=s)}}function YE(s,o,c){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+c,s.providerIndexes=o}function U0(s,o,c,u,h){s.data[u]=h;const p=h.factory||(h.factory=js(h.type)),_=new bo(p,fs(h),null);s.blueprint[u]=_,c[u]=_,ob(s,o,0,u,Xh(s,c,h.hostVars,Kt),h)}function cb(s,o,c){const u=Vn(o,s),h=hi(c),p=s[10],_=$0(s,di(s,h,null,c.onPush?64:16,u,o,p,p.createRenderer(u,c),null,null));s[o.index]=_}function ub(s,o,c,u,h,p,_){if(null==p)qn(s)?s.removeAttribute(o,h,c):o.removeAttribute(h);else{const v=null==_?H(p):_(p,u||"",h);qn(s)?s.setAttribute(o,h,v,c):c?o.setAttributeNS(c,h,v):o.setAttribute(h,v)}}function PA(s,o,c,u,h,p){const _=p[o];if(null!==_){const v=u.setInput;for(let C=0;C<_.length;){const T=_[C++],M=_[C++],$=_[C++];null!==v?u.setInput(c,$,T,M):c[M]=$}}}function KE(s,o){let c=null,u=0;for(;u<o.length;){const h=o[u];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===c&&(c=[]),c.push(h,s[h],o[u+1])),u+=2}else u+=2;else u+=4}return c}function QE(s,o,c,u){return new Array(s,!0,!1,o,null,0,u,c,null,null)}function XE(s,o){const c=Vr(o,s);if(bl(c)){const u=c[1];80&c[2]?bs(u,c,u.template,c[8]):c[5]>0&&H0(c)}}function H0(s){for(let u=v0(s);null!==u;u=bE(u))for(let h=10;h<u.length;h++){const p=u[h];if(1024&p[2]){const _=p[1];bs(_,p,_.template,p[8])}else p[5]>0&&H0(p)}const c=s[1].components;if(null!==c)for(let u=0;u<c.length;u++){const h=Vr(c[u],s);bl(h)&&h[5]>0&&H0(h)}}function FA(s,o){const c=Vr(o,s),u=c[1];(function(s,o){for(let c=o.length;c<s.blueprint.length;c++)o.push(s.blueprint[c])})(u,c),Js(u,c,c[8])}function $0(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function db(s){for(;s;){s[2]|=64;const o=sg(s);if(ps(s)&&!o)return s;s=o}return null}function G0(s,o,c){const u=o[10];u.begin&&u.begin();try{bs(s,o,s.template,c)}catch(h){throw W0(o,h),h}finally{u.end&&u.end()}}function ex(s){!function(s){for(let o=0;o<s.components.length;o++){const c=s.components[o],u=kv(c),h=u[1];vd(h,u,h.template,c)}}(s[8])}function Qc(s,o,c){vo(0),o(s,c)}const HA=(()=>Promise.resolve(null))();function nx(s){return s[7]||(s[7]=[])}function nf(s){return s.cleanup||(s.cleanup=[])}function W0(s,o){const c=s[9],u=c?c.get(qh,null):null;u&&u.handleError(o)}function rx(s,o,c,u,h){for(let p=0;p<c.length;){const _=c[p++],v=c[p++],C=o[_],T=s.data[_];null!==T.setInput?T.setInput(C,h,u,v):C[v]=h}}function Gl(s,o,c){const u=bc(o,s);wE(s[11],u,c)}function q0(s,o,c){let u=c?s.styles:null,h=c?s.classes:null,p=0;if(null!==o)for(let _=0;_<o.length;_++){const v=o[_];"number"==typeof v?p=v:1==p?h=U(h,v):2==p&&(u=U(u,v+": "+o[++_]+";"))}c?s.styles=u:s.stylesWithoutHost=u,c?s.classes=h:s.classesWithoutHost=h}const sf=new nr("INJECTOR",-1);class fb{get(o,c=fn){if(c===fn){const u=new Error(`NullInjectorError: No provider for ${L(o)}!`);throw u.name="NullInjectorError",u}return c}}const hg=new nr("Set Injector scope."),af={},ix={};let Z0;function pb(){return void 0===Z0&&(Z0=new fb),Z0}function gb(s,o=null,c=null,u){return new sx(s,c,o||pb(),u)}class sx{constructor(o,c,u,h=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];c&&Ps(c,v=>this.processProvider(v,o,c)),Ps([o],v=>this.processInjectorType(v,[],p)),this.records.set(sf,An(void 0,this));const _=this.records.get(hg);this.scope=null!=_?_.value:null,this.source=h||("object"==typeof o?null:L(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,c=fn,u=pt.Default){this.assertNotDestroyed();const h=Gt(this),p=ln(void 0);try{if(!(u&pt.SkipSelf)){let v=this.records.get(o);if(void 0===v){const C=("function"==typeof(s=o)||"object"==typeof s&&s instanceof nr)&&Wt(o);v=C&&this.injectableDefInScope(C)?An(z0(o),af):null,this.records.set(o,v)}if(null!=v)return this.hydrate(o,v)}return(u&pt.Self?pb():this.parent).get(o,c=u&pt.Optional&&c===fn?null:c)}catch(_){if("NullInjectorError"===_.name){if((_[Mr]=_[Mr]||[]).unshift(L(o)),h)throw _;return _s(_,o,"R3InjectorError",this.source)}throw _}finally{ln(p),Gt(h)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((u,h)=>o.push(L(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(o,c,u){if(!(o=A(o)))return!1;let h=Rn(o);const p=null==h&&o.ngModule||void 0,_=void 0===p?o:p,v=-1!==u.indexOf(_);if(void 0!==p&&(h=Rn(p)),null==h)return!1;if(null!=h.imports&&!v){let M;u.push(_);try{Ps(h.imports,$=>{this.processInjectorType($,c,u)&&(void 0===M&&(M=[]),M.push($))})}finally{}if(void 0!==M)for(let $=0;$<M.length;$++){const{ngModule:K,providers:ue}=M[$];Ps(ue,pe=>this.processProvider(pe,K,ue||St))}}this.injectorDefTypes.add(_);const C=js(_)||(()=>new _);this.records.set(_,An(C,af));const T=h.providers;if(null!=T&&!v){const M=o;Ps(T,$=>this.processProvider($,M,T))}return void 0!==p&&void 0!==o.providers}processProvider(o,c,u){let h=Bn(o=A(o))?o:A(o&&o.provide);const p=kn(s=o)?An(void 0,s.useValue):An(mb(s),af);var s;if(Bn(o)||!0!==o.multi)this.records.get(h);else{let _=this.records.get(h);_||(_=An(void 0,af,!0),_.factory=()=>Rl(_.multi),this.records.set(h,_)),h=o,_.multi.push(o)}this.records.set(h,p)}hydrate(o,c){return c.value===af&&(c.value=ix,c.value=c.factory()),"object"==typeof c.value&&c.value&&null!==(s=c.value)&&"object"==typeof s&&"function"==typeof s.ngOnDestroy&&this.onDestroy.add(c.value),c.value;var s}injectableDefInScope(o){if(!o.providedIn)return!1;const c=A(o.providedIn);return"string"==typeof c?"any"===c||c===this.scope:this.injectorDefTypes.has(c)}}function z0(s){const o=Wt(s),c=null!==o?o.factory:js(s);if(null!==c)return c;if(s instanceof nr)throw new Error(`Token ${L(s)} is missing a \u0275prov definition.`);if(s instanceof Function)return function(s){const o=s.length;if(o>0){const u=So(o,"?");throw new Error(`Can't resolve all parameters for ${L(s)}: (${u.join(", ")}).`)}const c=function(s){const o=s&&(s[Qn]||s[Jn]);if(o){const c=function(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${c}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${c}" class.`),o}return null}(s);return null!==c?()=>c.factory(s):()=>new s}(s);throw new Error("unreachable")}function mb(s,o,c){let u;if(Bn(s)){const h=A(s);return js(h)||z0(h)}if(kn(s))u=()=>A(s.useValue);else if(function(s){return!(!s||!s.useFactory)}(s))u=()=>s.useFactory(...Rl(s.deps||[]));else if(function(s){return!(!s||!s.useExisting)}(s))u=()=>hr(A(s.useExisting));else{const h=A(s&&(s.useClass||s.provide));if(!function(s){return!!s.deps}(s))return js(h)||z0(h);u=()=>new h(...Rl(s.deps))}return u}function An(s,o,c=!1){return{factory:s,value:o,multi:c?[]:void 0}}function kn(s){return null!==s&&"object"==typeof s&&Fs in s}function Bn(s){return"function"==typeof s}const es=function(s,o,c){return function(s,o=null,c=null,u){const h=gb(s,o,c,u);return h._resolveInjectorDefTypes(),h}({name:c},o,s,c)};let Sr=(()=>{class s{static create(c,u){return Array.isArray(c)?es(c,u,""):es(c.providers,c.parent,c.name||"")}}return s.THROW_IF_NOT_FOUND=fn,s.NULL=new fb,s.\u0275prov=vt({token:s,providedIn:"any",factory:()=>hr(sf)}),s.__NG_ELEMENT_ID__=-1,s})();function Db(s,o){Ic(kv(s)[1],er())}function Cd(s){let o=function(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),c=!0;const u=[s];for(;o;){let h;if(fs(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Error("Directives cannot inherit Components");h=o.\u0275dir}if(h){if(c){u.push(h);const _=s;_.inputs=Tb(s.inputs),_.declaredInputs=Tb(s.declaredInputs),_.outputs=Tb(s.outputs);const v=h.hostBindings;v&&Pr(s,v);const C=h.viewQuery,T=h.contentQueries;if(C&&bg(s,C),T&&QA(s,T),ee(s.inputs,h.inputs),ee(s.declaredInputs,h.declaredInputs),ee(s.outputs,h.outputs),fs(h)&&h.data.animation){const M=s.data;M.animation=(M.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let _=0;_<p.length;_++){const v=p[_];v&&v.ngInherit&&v(s),v===Cd&&(c=!1)}}o=Object.getPrototypeOf(o)}!function(s){let o=0,c=null;for(let u=s.length-1;u>=0;u--){const h=s[u];h.hostVars=o+=h.hostVars,h.hostAttrs=Yu(h.hostAttrs,c=Yu(c,h.hostAttrs))}}(u)}function Tb(s){return s===cn?{}:s===St?[]:s}function bg(s,o){const c=s.viewQuery;s.viewQuery=c?(u,h)=>{o(u,h),c(u,h)}:o}function QA(s,o){const c=s.contentQueries;s.contentQueries=c?(u,h,p)=>{o(u,h,p),c(u,h,p)}:o}function Pr(s,o){const c=s.hostBindings;s.hostBindings=c?(u,h)=>{o(u,h),c(u,h)}:o}let ql=null;function eu(){if(!ql){const s=Nt.Symbol;if(s&&s.iterator)ql=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let c=0;c<o.length;++c){const u=o[c];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(ql=u)}}}return ql}class No{constructor(o){this.wrapped=o}static wrap(o){return new No(o)}static unwrap(o){return No.isWrapped(o)?o.wrapped:o}static isWrapped(o){return o instanceof No}}function wg(s){return!!X0(s)&&(Array.isArray(s)||!(s instanceof Map)&&eu()in s)}function X0(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ws(s,o,c){return s[o]=c}function ti(s,o,c){return!Object.is(s[o],c)&&(s[o]=c,!0)}function Ed(s,o,c,u){const h=ti(s,o,c);return ti(s,o+1,u)||h}function Nb(s,o,c,u){const h=Ze();return ti(h,Pi(),o)&&(sn(),function(s,o,c,u,h,p){const _=Vn(s,o);ub(o[11],_,p,s.value,c,u,h)}(tr(),h,s,o,c,u)),Nb}function uf(s,o,c,u){return ti(s,Pi(),c)?o+H(c)+u:Kt}function tu(s,o,c,u,h,p,_,v,C,T){const $=function(s,o,c,u,h,p){const _=Ed(s,o,c,u);return Ed(s,o+2,h,p)||_}(s,ki(),c,h,_,C);return Oi(4),$?o+H(c)+u+H(h)+p+H(_)+v+H(C)+T:Kt}function kb(s,o,c,u,h,p,_,v){const C=Ze(),T=sn(),M=s+20,$=T.firstCreatePass?function(s,o,c,u,h,p,_,v,C){const T=o.consts,M=Qh(o,s,4,_||null,xr(T,v));V0(o,c,M,xr(T,C)),Ic(o,M);const $=M.tViews=ug(2,M,u,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,T);return null!==o.queries&&(o.queries.template(o,M),$.queries=o.queries.embeddedTView(M)),M}(M,T,C,o,c,u,h,p,_):T.data[M];ci($,!1);const K=C[11].createComment("");og(T,C,K,$),Vi(K,C),$0(C,C[M]=QE(K,C,K,$)),mi($)&&cg(T,C,$),null!=_&&F0(C,$,v)}function bx(s){return Sa(Ft.lFrame.contextLView,20+s)}function Nd(s,o=pt.Default){const c=Ze();return null===c?hr(s,o):Rs(er(),c,A(s),o)}function yf(s,o,c){const u=Ze();return ti(u,Pi(),o)&&Bi(sn(),tr(),u,s,o,u[11],c,!1),yf}function $b(s,o,c,u,h){const _=h?"class":"style";rx(s,c,o.inputs[_],_,u)}function u_(s,o,c,u){const h=Ze(),p=sn(),_=20+s,v=h[11],C=h[_]=Hv(v,o,Ft.lFrame.currentNamespace),T=p.firstCreatePass?function(s,o,c,u,h,p,_){const v=o.consts,T=Qh(o,s,2,h,xr(v,p));return V0(o,c,T,xr(v,_)),null!==T.attrs&&q0(T,T.attrs,!1),null!==T.mergedAttrs&&q0(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(_,p,h,0,o,c,u):p.data[_];ci(T,!0);const M=T.mergedAttrs;null!==M&&Ih(v,C,M);const $=T.classes;null!==$&&Zv(v,C,$);const K=T.styles;null!==K&&AE(v,C,K),64!=(64&T.flags)&&og(p,h,C,T),0===Ft.lFrame.elementDepthCount&&Vi(C,h),Ft.lFrame.elementDepthCount++,mi(T)&&(cg(p,h,T),ef(p,T,h)),null!==u&&F0(h,T)}function d_(){let s=er();Na()?xl():(s=s.parent,ci(s,!1));const o=s;Ft.lFrame.elementDepthCount--;const c=sn();c.firstCreatePass&&(Ic(c,s),Tu(s)&&c.queries.elementEnd(s)),null!=o.classesWithoutHost&&function(s){return 0!=(16&s.flags)}(o)&&$b(c,o,Ze(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function(s){return 0!=(32&s.flags)}(o)&&$b(c,o,Ze(),o.stylesWithoutHost,!1)}function Mx(s,o,c,u){u_(s,o,c,u),d_()}function Dg(s,o,c){const u=Ze(),h=sn(),p=s+20,_=h.firstCreatePass?function(s,o,c,u,h){const p=o.consts,_=xr(p,u),v=Qh(o,s,8,"ng-container",_);return null!==_&&q0(v,_,!0),V0(o,c,v,xr(p,h)),null!==o.queries&&o.queries.elementStart(o,v),v}(p,h,u,o,c):h.data[p];ci(_,!0);const v=u[p]=u[11].createComment("");og(h,u,v,_),Vi(v,u),mi(_)&&(cg(h,u,_),ef(h,_,u)),null!=c&&F0(u,_)}function Gb(){let s=er();const o=sn();Na()?xl():(s=s.parent,ci(s,!1)),o.firstCreatePass&&(Ic(o,s),Tu(s)&&o.queries.elementEnd(s))}function kx(){return Ze()}function Wb(s){return!!s&&"function"==typeof s.then}function qb(s){return!!s&&"function"==typeof s.subscribe}const vf=qb;function Tg(s,o,c,u){const h=Ze(),p=sn(),_=er();return function(s,o,c,u,h,p,_,v){const C=mi(u),M=s.firstCreatePass&&nf(s),$=o[8],K=nx(o);let ue=!0;if(3&u.type||v){const Te=Vn(u,o),ze=v?v(Te):Te,Pe=K.length,It=v?Pt=>v(Ln(Pt[u.index])):u.index;if(qn(c)){let Pt=null;if(!v&&C&&(Pt=function(s,o,c,u){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const _=h[p];if(_===c&&h[p+1]===u){const v=o[7],C=h[p+2];return v.length>C?v[C]:null}"string"==typeof _&&(p+=2)}return null}(s,o,h,u.index)),null!==Pt)(Pt.__ngLastListenerFn__||Pt).__ngNextListenerFn__=p,Pt.__ngLastListenerFn__=p,ue=!1;else{p=Yb(u,o,$,p,!1);const En=c.listen(ze,h,p);K.push(p,En),M&&M.push(h,It,Pe,Pe+1)}}else p=Yb(u,o,$,p,!0),ze.addEventListener(h,p,_),K.push(p),M&&M.push(h,It,Pe,_)}else p=Yb(u,o,$,p,!1);const pe=u.outputs;let Se;if(ue&&null!==pe&&(Se=pe[h])){const Te=Se.length;if(Te)for(let ze=0;ze<Te;ze+=2){const Kn=o[Se[ze]][Se[ze+1]].subscribe(p),Bo=K.length;K.push(p,Kn),M&&M.push(h,u.index,Bo,-(Bo+1))}}}(p,h,h[11],_,s,o,!!c,u),Tg}function h_(s,o,c,u){try{return!1!==c(u)}catch(h){return W0(s,h),!1}}function Yb(s,o,c,u,h){return function p(_){if(_===Function)return u;const v=2&s.flags?Vr(s.index,o):o;0==(32&o[2])&&db(v);let C=h_(o,0,u,_),T=p.__ngNextListenerFn__;for(;T;)C=h_(o,0,T,_)&&C,T=T.__ngNextListenerFn__;return h&&!1===C&&(_.preventDefault(),_.returnValue=!1),C}}function Px(s=1){return function(s){return(Ft.lFrame.contextLView=function(s,o){for(;s>0;)o=o[15],s--;return o}(s,Ft.lFrame.contextLView))[8]}(s)}function hN(s,o){let c=null;const u=function(s){const o=s.attrs;if(null!=o){const c=o.indexOf(5);if(0==(1&c))return o[c+1]}return null}(s);for(let h=0;h<o.length;h++){const p=o[h];if("*"!==p){if(null===u?ME(s,p,!0):c2(u,p))return h}else c=h}return c}function Ox(s){const o=Ze()[16][6];if(!o.projection){const u=o.projection=So(s?s.length:1,null),h=u.slice();let p=o.child;for(;null!==p;){const _=s?hN(p,s):0;null!==_&&(h[_]?h[_].projectionNext=p:u[_]=p,h[_]=p),p=p.next}}}function Fx(s,o=0,c){const u=Ze(),h=sn(),p=Qh(h,20+s,16,null,c||null);null===p.projection&&(p.projection=o),xl(),64!=(64&p.flags)&&function(s,o,c){Zc(o[11],0,o,c,EE(s,c,o),D0(c.parent||o[6],c,o))}(h,u,p)}function Kb(s,o,c){return f_(s,"",o,"",c),Kb}function f_(s,o,c,u,h){const p=Ze(),_=uf(p,o,c,u);return _!==Kt&&Bi(sn(),tr(),p,s,_,p[11],h,!1),f_}function p_(s,o,c,u,h){const p=s[c+1],_=null===o;let v=u?sa(p):Bl(p),C=!1;for(;0!==v&&(!1===C||_);){const M=s[v+1];Bx(s[v],o)&&(C=!0,s[v+1]=u?Qv(M):md(M)),v=u?sa(M):Bl(M)}C&&(s[c+1]=u?md(p):Qv(p))}function Bx(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Ha(s,o)>=0}const fi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Ux(s){return s.substring(fi.key,fi.keyEnd)}function n1(s,o){const c=fi.textEnd;return c===o?-1:(o=fi.keyEnd=function(s,o,c){for(;o<c&&s.charCodeAt(o)>32;)o++;return o}(s,fi.key=o,c),Jl(s,o,c))}function Jl(s,o,c){for(;o<c&&s.charCodeAt(o)<=32;)o++;return o}function nl(s,o,c){return ca(s,o,c,!1),nl}function Md(s,o){return ca(s,o,null,!0),Md}function Wx(s){ua(Ir,Ro,s,!0)}function Ro(s,o){for(let c=function(s){return function(s){fi.key=0,fi.keyEnd=0,fi.value=0,fi.valueEnd=0,fi.textEnd=s.length}(s),n1(s,Jl(s,0,fi.textEnd))}(o);c>=0;c=n1(o,c))Ir(s,Ux(o),!0)}function ca(s,o,c,u){const h=Ze(),p=sn(),_=Oi(2);p.firstUpdatePass&&Ag(p,s,_,u),o!==Kt&&ti(h,_,o)&&v_(p,p.data[Yr()],h,h[11],s,h[_+1]=function(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=L(ea(s)))),s}(o,c),u,_)}function ua(s,o,c,u){const h=sn(),p=Oi(2);h.firstUpdatePass&&Ag(h,null,p,u);const _=Ze();if(c!==Kt&&ti(_,p,c)){const v=h.data[Yr()];if(Yx(v,u)&&!r1(h,p)){let C=u?v.classesWithoutHost:v.stylesWithoutHost;null!==C&&(c=U(C,c||"")),$b(h,v,_,c,u)}else!function(s,o,c,u,h,p,_,v){h===Kt&&(h=St);let C=0,T=0,M=0<h.length?h[0]:null,$=0<p.length?p[0]:null;for(;null!==M||null!==$;){const K=C<h.length?h[C+1]:void 0,ue=T<p.length?p[T+1]:void 0;let Se,pe=null;M===$?(C+=2,T+=2,K!==ue&&(pe=$,Se=ue)):null===$||null!==M&&M<$?(C+=2,pe=M):(T+=2,pe=$,Se=ue),null!==pe&&v_(s,o,c,u,pe,Se,_,v),M=C<h.length?h[C]:null,$=T<p.length?p[T]:null}}(h,v,_,_[11],_[p+1],_[p+1]=function(s,o,c){if(null==c||""===c)return St;const u=[],h=ea(c);if(Array.isArray(h))for(let p=0;p<h.length;p++)s(u,h[p],!0);else if("object"==typeof h)for(const p in h)h.hasOwnProperty(p)&&s(u,p,h[p]);else"string"==typeof h&&o(u,h);return u}(s,o,c),u,p)}}function r1(s,o){return o>=s.expandoStartIndex}function Ag(s,o,c,u){const h=s.data;if(null===h[c+1]){const p=h[Yr()],_=r1(s,c);Yx(p,u)&&null===o&&!_&&(o=!1),o=function(s,o,c,u){const h=function(s){const o=Ft.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=u?o.residualClasses:o.residualStyles;if(null===h)0===(u?o.classBindings:o.styleBindings)&&(c=su(c=m_(null,s,o,c,u),o.attrs,u),p=null);else{const _=o.directiveStylingLast;if(-1===_||s[_]!==h)if(c=m_(h,s,o,c,u),null===p){let C=function(s,o,c){const u=c?o.classBindings:o.styleBindings;if(0!==Bl(u))return s[sa(u)]}(s,o,u);void 0!==C&&Array.isArray(C)&&(C=m_(null,s,o,C[1],u),C=su(C,o.attrs,u),function(s,o,c,u){s[sa(c?o.classBindings:o.styleBindings)]=u}(s,o,u,C))}else p=function(s,o,c){let u;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)u=su(u,s[p].hostAttrs,c);return su(u,o.attrs,c)}(s,o,u)}return void 0!==p&&(u?o.residualClasses=p:o.residualStyles=p),c}(h,p,o,u),function(s,o,c,u,h,p){let _=p?o.classBindings:o.styleBindings,v=sa(_),C=Bl(_);s[u]=c;let M,T=!1;if(Array.isArray(c)){const $=c;M=$[1],(null===M||Ha($,M)>0)&&(T=!0)}else M=c;if(h)if(0!==C){const K=sa(s[v+1]);s[u+1]=N0(K,v),0!==K&&(s[K+1]=zh(s[K+1],u)),s[v+1]=function(s,o){return 131071&s|o<<17}(s[v+1],u)}else s[u+1]=N0(v,0),0!==v&&(s[v+1]=zh(s[v+1],u)),v=u;else s[u+1]=N0(C,0),0===v?v=u:s[C+1]=zh(s[C+1],u),C=u;T&&(s[u+1]=md(s[u+1])),p_(s,M,u,!0),p_(s,M,u,!1),function(s,o,c,u,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&Ha(p,o)>=0&&(c[u+1]=Qv(c[u+1]))}(o,M,s,u,p),_=N0(v,C),p?o.classBindings=_:o.styleBindings=_}(h,p,o,c,_,u)}}function m_(s,o,c,u,h){let p=null;const _=c.directiveEnd;let v=c.directiveStylingLast;for(-1===v?v=c.directiveStart:v++;v<_&&(p=o[v],u=su(u,p.hostAttrs,h),p!==s);)v++;return null!==s&&(c.directiveStylingLast=v),u}function su(s,o,c){const u=c?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const _=o[p];"number"==typeof _?h=_:h===u&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Ir(s,_,!!c||o[++p]))}return void 0===s?null:s}function v_(s,o,c,u,h,p,_,v){if(!(3&o.type))return;const C=s.data,T=C[v+1];ou(function(s){return 1==(1&s)}(T)?zx(C,o,c,h,Bl(T),_):void 0)||(ou(p)||function(s){return 2==(2&s)}(T)&&(p=zx(C,null,c,h,v,_)),function(s,o,c,u,h){const p=qn(s);if(o)h?p?s.addClass(c,u):c.classList.add(u):p?s.removeClass(c,u):c.classList.remove(u);else{let _=-1===u.indexOf("-")?void 0:Ya.DashCase;if(null==h)p?s.removeStyle(c,u,_):c.style.removeProperty(u);else{const v="string"==typeof h&&h.endsWith("!important");v&&(h=h.slice(0,-10),_|=Ya.Important),p?s.setStyle(c,u,h,_):c.style.setProperty(u,h,v?"important":"")}}}(u,_,bc(Yr(),c),h,p))}function zx(s,o,c,u,h,p){const _=null===o;let v;for(;h>0;){const C=s[h],T=Array.isArray(C),M=T?C[1]:C,$=null===M;let K=c[h+1];K===Kt&&(K=$?St:void 0);let ue=$?vr(K,u):M===u?K:void 0;if(T&&!ou(ue)&&(ue=vr(C,u)),ou(ue)&&(v=ue,_))return v;const pe=s[h+1];h=_?sa(pe):Bl(pe)}if(null!==o){let C=p?o.residualClasses:o.residualStyles;null!=C&&(v=vr(C,u))}return v}function ou(s){return void 0!==s}function Yx(s,o){return 0!=(s.flags&(o?16:32))}function Kx(s,o=""){const c=Ze(),u=sn(),h=s+20,p=u.firstCreatePass?Qh(u,h,1,o,null):u.data[h],_=c[h]=b0(c[11],o);og(u,c,_,p),ci(p,!1)}function Ng(s){return wf("",s,""),Ng}function wf(s,o,c){const u=Ze(),h=uf(u,s,o,c);return h!==Kt&&Gl(u,Yr(),h),wf}function s1(s,o,c,u,h){const p=Ze(),_=function(s,o,c,u,h,p){const v=Ed(s,ki(),c,h);return Oi(2),v?o+H(c)+u+H(h)+p:Kt}(p,s,o,c,u,h);return _!==Kt&&Gl(p,Yr(),_),s1}function c1(s,o,c,u,h,p,_,v,C){ua(Ir,Ro,tu(Ze(),s,o,c,u,h,p,_,v,C),!0)}function I_(s,o,c){const u=Ze();return ti(u,Pi(),o)&&Bi(sn(),tr(),u,s,o,u[11],c,!0),I_}const il=void 0;var ko=["en",[["a","p"],["AM","PM"],il],[["AM","PM"],il,il],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],il,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],il,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",il,"{1} 'at' {0}",il],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(s){const o=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===c?1:5}];let kd={};function S_(s){const o=function(s){return s.toLowerCase().replace(/_/g,"-")}(s);let c=sD(o);if(c)return c;const u=o.split("-")[0];if(c=sD(u),c)return c;if("en"===u)return ko;throw new Error(`Missing locale data for the locale "${s}".`)}function iD(s){return S_(s)[At.PluralCase]}function sD(s){return s in kd||(kd[s]=Nt.ng&&Nt.ng.common&&Nt.ng.common.locales&&Nt.ng.common.locales[s]),kd[s]}var At=(()=>((At=At||{})[At.LocaleId=0]="LocaleId",At[At.DayPeriodsFormat=1]="DayPeriodsFormat",At[At.DayPeriodsStandalone=2]="DayPeriodsStandalone",At[At.DaysFormat=3]="DaysFormat",At[At.DaysStandalone=4]="DaysStandalone",At[At.MonthsFormat=5]="MonthsFormat",At[At.MonthsStandalone=6]="MonthsStandalone",At[At.Eras=7]="Eras",At[At.FirstDayOfWeek=8]="FirstDayOfWeek",At[At.WeekendRange=9]="WeekendRange",At[At.DateFormat=10]="DateFormat",At[At.TimeFormat=11]="TimeFormat",At[At.DateTimeFormat=12]="DateTimeFormat",At[At.NumberSymbols=13]="NumberSymbols",At[At.NumberFormats=14]="NumberFormats",At[At.CurrencyCode=15]="CurrencyCode",At[At.CurrencySymbol=16]="CurrencySymbol",At[At.CurrencyName=17]="CurrencyName",At[At.Currencies=18]="Currencies",At[At.Directionality=19]="Directionality",At[At.PluralCase=20]="PluralCase",At[At.ExtraData=21]="ExtraData",At))();const aD=["zero","one","two","few","many"],Df="en-US",N_={marker:"element"},Tf={marker:"ICU"};var Hr=(()=>((Hr=Hr||{})[Hr.SHIFT=2]="SHIFT",Hr[Hr.APPEND_EAGERLY=1]="APPEND_EAGERLY",Hr[Hr.COMMENT=2]="COMMENT",Hr))();let lD=Df;function M_(s){(function(s,o){null==s&&ke(o,s,null,"!=")})(s,"Expected localeId to be defined"),"string"==typeof s&&(lD=s.toLowerCase().replace(/_/g,"-"))}function cD(s,o,c){const u=o.insertBeforeIndex,h=Array.isArray(u)?u[0]:u;return null===h?T0(s,0,c):Ln(c[h])}function uD(s,o,c,u,h){const p=o.insertBeforeIndex;if(Array.isArray(p)){let _=u,v=null;if(3&o.type||(v=_,_=h),null!==_&&0==(2&o.flags))for(let C=1;C<p.length;C++)qc(s,_,c[p[C]],v,!1)}}function R_(s,o){if(s.push(o),s.length>1)for(let c=s.length-2;c>=0;c--){const u=s[c];p1(u)||AN(u,o)&&null===If(u)&&au(u,o.index)}}function p1(s){return!(64&s.type)}function AN(s,o){return p1(o)||s.index>o.index}function If(s){const o=s.insertBeforeIndex;return Array.isArray(o)?o[0]:o}function au(s,o){const c=s.insertBeforeIndex;Array.isArray(c)?c[0]=o:(IE(cD,uD),s.insertBeforeIndex=o)}function kg(s,o){const c=s.data[o];return null===c||"string"==typeof c?null:c.hasOwnProperty("currentCaseLViewIndex")?c:c.value}function NN(s,o,c){const u=Jh(s,c,64,null,null);return R_(o,u),u}function Xl(s,o){const c=o[s.currentCaseLViewIndex];return null===c?c:c<0?~c:c}function dD(s){return s>>>17}function m1(s){return(131070&s)>>>1}let lu=0,Pd=0;function P_(s,o,c,u){const h=c[11];let _,p=null;for(let v=0;v<o.length;v++){const C=o[v];if("string"==typeof C){const T=o[++v];null===c[T]&&(c[T]=b0(h,C))}else if("number"==typeof C)switch(1&C){case 0:const T=dD(C);let M,$;if(null===p&&(p=T,_=E0(h,u)),T===p?(M=u,$=_):(M=null,$=Ln(c[T])),null!==$){const Se=m1(C);qc(h,$,c[Se],M,!1);const ze=kg(s,Se);if(null!==ze&&"object"==typeof ze){const Pe=Xl(ze,c);null!==Pe&&P_(s,ze.create[Pe],c,c[ze.anchorIdx])}}break;case 1:const ue=o[++v],pe=o[++v];ub(h,bc(C>>>1,c),null,null,ue,pe,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${C}"`)}else switch(C){case Tf:const T=o[++v],M=o[++v];null===c[M]&&Vi(c[M]=iA(h,T),c);break;case N_:const $=o[++v],K=o[++v];null===c[K]&&Vi(c[K]=Hv(h,$,null),c)}}}function fD(s,o,c,u,h){for(let p=0;p<c.length;p++){const _=c[p],v=c[++p];if(_&h){let C="";for(let T=p+1;T<=p+v;T++){const M=c[T];if("string"==typeof M)C+=M;else if("number"==typeof M)if(M<0)C+=H(o[u-M]);else{const $=M>>>2;switch(3&M){case 1:const K=c[++T],ue=c[++T],pe=s.data[$];"string"==typeof pe?ub(o[11],o[$],null,pe,K,C,ue):Bi(s,pe,o,K,C,o[11],ue,!1);break;case 0:const Se=o[$];null!==Se&&wE(o[11],Se,C);break;case 2:pD(s,kg(s,$),o,C);break;case 3:v1(s,kg(s,$),u,o)}}}}else{const C=c[p+1];if(C>0&&3==(3&C)){const M=kg(s,C>>>2);o[M.currentCaseLViewIndex]<0&&v1(s,M,u,o)}}p+=v}}function v1(s,o,c,u){let h=u[o.currentCaseLViewIndex];if(null!==h){let p=lu;h<0&&(h=u[o.currentCaseLViewIndex]=~h,p=-1),fD(s,u,o.update[h],c,p)}}function pD(s,o,c,u){const h=function(s,o){let c=s.cases.indexOf(o);if(-1===c)switch(s.type){case 1:{const u=function(s,o){const c=iD(o)(parseInt(s,10)),u=aD[c];return void 0!==u?u:"other"}(o,lD);c=s.cases.indexOf(u),-1===c&&"other"!==u&&(c=s.cases.indexOf("other"));break}case 0:c=s.cases.indexOf("other")}return-1===c?null:c}(o,u);if(Xl(o,c)!==h&&(b1(s,o,c),c[o.currentCaseLViewIndex]=null===h?null:~h,null!==h)){const _=c[o.anchorIdx];_&&P_(s,o.create[h],c,_)}}function b1(s,o,c){let u=Xl(o,c);if(null!==u){const h=o.remove[u];for(let p=0;p<h.length;p++){const _=h[p];if(_>0){const v=bc(_,c);null!==v&&qv(c[11],v)}else b1(s,kg(s,~_),c)}}}function Bs(){const s=[];let c,u,o=-1;function p(v,C){o=0;const T=Xl(v,C);u=null!==T?v.remove[T]:St}function _(){if(o<u.length){const v=u[o++];return v>0?c[v]:(s.push(o,u),p(c[1].data[~v],c),_())}return 0===s.length?null:(u=s.pop(),o=s.pop(),_())}return function(v,C){for(c=C;s.length;)s.pop();return p(v.value,C),_}}const Pg=/\ufffd(\d+):?\d*\ufffd/gi,Fd=/\ufffd(\d+)\ufffd/,kN=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,PN=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,E1=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,ON=/\uE500/g;function _D(s,o,c,u,h,p,_){const v=Xh(s,u,1,null);let C=v<<Hr.SHIFT,T=Gs();o===T&&(T=null),null===T&&(C|=Hr.APPEND_EAGERLY),_&&(C|=Hr.COMMENT,function(s){void 0===Bv&&(Bv=s())}(Bs)),h.push(C,null===p?"":p);const M=Jh(s,v,_?32:1,null===p?"":p,null);R_(c,M);const $=M.index;return ci(M,!1),null!==T&&o!==T&&function(s,o){let c=s.insertBeforeIndex;null===c?(IE(cD,uD),c=s.insertBeforeIndex=[null,o]):(function(s,o,c){s!=o&&ke(c,s,o,"==")}(Array.isArray(c),!0,"Expecting array here"),c.push(o))}(T,$),M}function O_(s,o,c,u,h,p,_){const v=_.match(Pg),C=_D(s,o,c,p,u,v?null:_,!1);v&&sl(h,_,C.index,null,0,null)}function sl(s,o,c,u,h,p){const _=s.length,v=_+1;s.push(null,null);const C=_+2,T=o.split(Pg);let M=0;for(let $=0;$<T.length;$++){const K=T[$];if(1&$){const ue=h+parseInt(K,10);s.push(-1-ue),M|=D1(ue)}else""!==K&&s.push(K)}return s.push(c<<2|(u?1:0)),u&&s.push(u,p),s[_]=M,s[v]=s.length-C,M}function D1(s){return 1<<Math.min(s,31)}function T1(s){let o,p,c="",u=0,h=!1;for(;null!==(o=PN.exec(s));)h?o[0]===`\ufffd/*${p}\ufffd`&&(u=o.index,h=!1):(c+=s.substring(u,o.index+o[0].length),p=o[1],h=!0);return c+=s.substr(u),c}function I1(s,o,c,u,h,p){let _=0;const v={type:h.type,currentCaseLViewIndex:Xh(s,o,1,null),anchorIdx:p,cases:[],create:[],remove:[],update:[]};(function(s,o,c){s.push(D1(o.mainBinding),2,-1-o.mainBinding,c<<2|2)})(c,h,p),function(s,o,c){const u=s.data[o];null===u?s.data[o]=c:u.value=c}(s,p,v);const C=h.values;for(let T=0;T<C.length;T++){const M=C[T],$=[];for(let K=0;K<M.length;K++){const ue=M[K];if("string"!=typeof ue){const pe=$.push(ue)-1;M[K]=`\x3c!--\ufffd${pe}\ufffd--\x3e`}}_=VN(s,v,o,c,u,h.cases[T],M.join(""),$)|_}_&&function(s,o,c){s.push(o,1,c<<2|3)}(c,_,p)}function fa(s){const o=[],c=[];let u=1,h=0;const p=L_(s=s.replace(kN,function(_,v,C){return u="select"===C?0:1,h=parseInt(v.substr(1),10),""}));for(let _=0;_<p.length;){let v=p[_++].trim();1===u&&(v=v.replace(/\s*(?:=)?(\w+)\s*/,"$1")),v.length&&o.push(v);const C=L_(p[_++]);o.length>c.length&&c.push(C)}return{type:u,mainBinding:h,cases:o,values:c}}function L_(s){if(!s)return[];let o=0;const c=[],u=[],h=/[{}]/g;let p;for(h.lastIndex=0;p=h.exec(s);){const v=p.index;if("}"==p[0]){if(c.pop(),0==c.length){const C=s.substring(o,v);kN.test(C)?u.push(fa(C)):u.push(C),o=v+1}}else{if(0==c.length){const C=s.substring(o,v);u.push(C),o=v+1}c.push("{")}}const _=s.substring(o);return u.push(_),u}function VN(s,o,c,u,h,p,_,v){const C=[],T=[],M=[];o.cases.push(p),o.create.push(C),o.remove.push(T),o.update.push(M);const K=Vh(vc()).getInertBodyElement(_),ue=Sn(K)||K;return ue?bD(s,o,c,u,C,T,M,ue,h,v,0):0}function bD(s,o,c,u,h,p,_,v,C,T,M){let $=0,K=v.firstChild;for(;K;){const ue=Xh(s,c,1,null);switch(K.nodeType){case Node.ELEMENT_NODE:const pe=K,Se=pe.tagName.toLowerCase();if(Qp.hasOwnProperty(Se)){S1(h,N_,Se,C,ue),s.data[ue]=Se;const It=pe.attributes;for(let Pt=0;Pt<It.length;Pt++){const En=It.item(Pt),Kn=En.name.toLowerCase();En.value.match(Pg)?E.hasOwnProperty(Kn)&&sl(_,En.value,ue,En.name,0,cd[Kn]?Za:w[Kn]?Uh:null):HN(h,ue,En)}$=bD(s,o,c,u,h,p,_,K,ue,T,M+1)|$,wD(p,ue,M)}break;case Node.TEXT_NODE:const Te=K.textContent||"",ze=Te.match(Pg);S1(h,null,ze?"":Te,C,ue),wD(p,ue,M),ze&&($=sl(_,Te,ue,null,0,null)|$);break;case Node.COMMENT_NODE:const Pe=Fd.exec(K.textContent||"");if(Pe){const Pt=T[parseInt(Pe[1],10)];S1(h,Tf,"",C,ue),I1(s,c,u,C,Pt,ue),CD(p,ue,M)}}K=K.nextSibling}return $}function wD(s,o,c){0===c&&s.push(o)}function CD(s,o,c){0===c&&(s.push(~o),s.push(o))}function S1(s,o,c,u,h){null!==o&&s.push(o),s.push(c,h,function(s,o,c){return 0|o<<17|c<<1}(0,u,h))}function HN(s,o,c){s.push(o<<1|1,c.name,c.value)}function xD(s,o,c=-1){const u=sn(),h=Ze(),p=20+s,_=xr(u.consts,o),v=Gs();u.firstCreatePass&&function(s,o,c,u,h,p){const _=Gs(),v=[],C=[],T=[[]],M=function(s){return s.replace(ON," ")}(h=function(s,o){if(function(s){return-1===s}(o))return T1(s);{const c=s.indexOf(`:${o}\ufffd`)+2+o.toString().length,u=s.search(new RegExp(`\ufffd\\/\\*\\d+:${o}\ufffd`));return T1(s.substring(c,u))}}(h,p)).split(E1);for(let $=0;$<M.length;$++){let K=M[$];if(0==(1&$)){const ue=L_(K);for(let pe=0;pe<ue.length;pe++){let Se=ue[pe];if(0==(1&pe)){const Te=Se;""!==Te&&O_(s,_,T[0],v,C,c,Te)}else{const Te=Se;if("object"!=typeof Te)throw new Error(`Unable to parse ICU expression in "${h}" message.`);I1(s,c,C,o,Te,_D(s,_,T[0],c,v,"",!0).index)}}}else{const ue=47===K.charCodeAt(0),Se=(K.charCodeAt(ue?1:0),20+Number.parseInt(K.substring(ue?2:1)));if(ue)T.shift(),ci(Gs(),!1);else{const Te=NN(s,T[0],Se);T.unshift([]),ci(Te,!0)}}}s.data[u]={create:v,update:C}}(u,null===v?0:v.index,h,p,_,c);const C=u.data[p],M=xE(u,v===h[6]?null:v,h);(function(s,o,c,u){const h=s[11];for(let p=0;p<o.length;p++){const _=o[p++],v=o[p],C=(_&Hr.COMMENT)===Hr.COMMENT,T=(_&Hr.APPEND_EAGERLY)===Hr.APPEND_EAGERLY,M=_>>>Hr.SHIFT;let $=s[M];null===$&&($=s[M]=C?h.createComment(v):b0(h,v)),T&&null!==c&&qc(h,c,$,u,!1)}})(h,C.create,M,v&&8&v.type?h[v.index]:null),Uu(!0)}function TD(s,o,c){xD(s,o,c),Uu(!1)}function to(s){return function(s){s&&(lu|=1<<Math.min(Pd,31)),Pd++}(ti(Ze(),Pi(),s)),to}function ID(s){!function(s,o,c){if(Pd>0){const u=s.data[c];fD(s,o,Array.isArray(u)?u:u.update,ki()-Pd-1,lu)}lu=0,Pd=0}(sn(),Ze(),s+20)}function N1(s,o,c,u,h){if(s=A(s),Array.isArray(s))for(let p=0;p<s.length;p++)N1(s[p],o,c,u,h);else{const p=sn(),_=Ze();let v=Bn(s)?s:A(s.provide),C=mb(s);const T=er(),M=1048575&T.providerIndexes,$=T.directiveStart,K=T.providerIndexes>>20;if(Bn(s)||!s.multi){const ue=new bo(C,h,Nd),pe=M1(v,o,h?M:M+K,$);-1===pe?(Tn(Zo(T,_),p,v),V_(p,s,o.length),o.push(v),T.directiveStart++,T.directiveEnd++,h&&(T.providerIndexes+=1048576),c.push(ue),_.push(ue)):(c[pe]=ue,_[pe]=ue)}else{const ue=M1(v,o,M+K,$),pe=M1(v,o,M,M+K),Se=ue>=0&&c[ue],Te=pe>=0&&c[pe];if(h&&!Te||!h&&!Se){Tn(Zo(T,_),p,v);const ze=function(s,o,c,u,h){const p=new bo(s,c,Nd);return p.multi=[],p.index=o,p.componentProviders=0,AD(p,h,u&&!c),p}(h?JN:QN,c.length,h,u,C);!h&&Te&&(c[pe].providerFactory=ze),V_(p,s,o.length,0),o.push(v),T.directiveStart++,T.directiveEnd++,h&&(T.providerIndexes+=1048576),c.push(ze),_.push(ze)}else V_(p,s,ue>-1?ue:pe,AD(c[h?pe:ue],C,!h&&u));!h&&u&&Te&&c[pe].componentProviders++}}}function V_(s,o,c,u){const h=Bn(o);if(h||function(s){return!!s.useClass}(o)){const _=(o.useClass||o).prototype.ngOnDestroy;if(_){const v=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const C=v.indexOf(c);-1===C?v.push(c,[u,_]):v[C+1].push(u,_)}else v.push(c,_)}}}function AD(s,o,c){return c&&s.componentProviders++,s.multi.push(o)-1}function M1(s,o,c,u){for(let h=c;h<u;h++)if(o[h]===s)return h;return-1}function QN(s,o,c,u){return ND(this.multi,[])}function JN(s,o,c,u){const h=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,v=zn(c,c[1],this.providerFactory.index,u);p=v.slice(0,_),ND(h,p);for(let C=_;C<v.length;C++)p.push(v[C])}else p=[],ND(h,p);return p}function ND(s,o){for(let c=0;c<s.length;c++)o.push((0,s[c])());return o}function MD(s,o=[]){return c=>{c.providersResolver=(u,h)=>function(s,o,c){const u=sn();if(u.firstCreatePass){const h=fs(s);N1(c,u.data,u.blueprint,h,!0),N1(o,u.data,u.blueprint,h,!1)}}(u,h?h(s):s,o)}}class RD{}const PD="ngComponent";class tM{resolveComponentFactory(o){throw function(s){const o=Error(`No component factory found for ${L(s)}. Did you add it to @NgModule.entryComponents?`);return o[PD]=s,o}(o)}}let Sf=(()=>{class s{}return s.NULL=new tM,s})();function R1(...s){}function Af(s,o){return new ol(Vn(s,o))}const sM=function(){return Af(er(),Ze())};let ol=(()=>{class s{constructor(c){this.nativeElement=c}}return s.__NG_ELEMENT_ID__=sM,s})();function FD(s){return s instanceof ol?s.nativeElement:s}class pa{}let Ui=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>oM(),s})();const oM=function(){const s=Ze(),c=Vr(er().index,s);return function(s){return s[11]}(Wn(c)?c:s)};let k1=(()=>{class s{}return s.\u0275prov=vt({token:s,providedIn:"root",factory:()=>null}),s})();class P1{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const O1=new P1("12.2.16");class F1{constructor(){}supports(o){return wg(o)}create(o){return new U_(o)}}const L1=(s,o)=>o;class U_{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||L1}forEachItem(o){let c;for(c=this._itHead;null!==c;c=c._next)o(c)}forEachOperation(o){let c=this._itHead,u=this._removalsHead,h=0,p=null;for(;c||u;){const _=!u||c&&c.currentIndex<H_(u,h,p)?c:u,v=H_(_,h,p),C=_.currentIndex;if(_===u)h--,u=u._nextRemoved;else if(c=c._next,null==_.previousIndex)h++;else{p||(p=[]);const T=v-h,M=C-h;if(T!=M){for(let K=0;K<T;K++){const ue=K<p.length?p[K]:p[K]=0,pe=ue+K;M<=pe&&pe<T&&(p[K]=ue+1)}p[_.previousIndex]=M-T}}v!==C&&o(_,v,C)}}forEachPreviousItem(o){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachMovedItem(o){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}forEachIdentityChange(o){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)o(c)}diff(o){if(null==o&&(o=[]),!wg(o))throw new Error(`Error trying to diff '${L(o)}'. Only arrays and iterables are allowed`);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,_,c=this._itHead,u=!1;if(Array.isArray(o)){this.length=o.length;for(let v=0;v<this.length;v++)p=o[v],_=this._trackByFn(v,p),null!==c&&Object.is(c.trackById,_)?(u&&(c=this._verifyReinsertion(c,p,_,v)),Object.is(c.item,p)||this._addIdentityChange(c,p)):(c=this._mismatch(c,p,_,v),u=!0),c=c._next}else h=0,function(s,o){if(Array.isArray(s))for(let c=0;c<s.length;c++)o(s[c]);else{const c=s[eu()]();let u;for(;!(u=c.next()).done;)o(u.value)}}(o,v=>{_=this._trackByFn(h,v),null!==c&&Object.is(c.trackById,_)?(u&&(c=this._verifyReinsertion(c,v,_,h)),Object.is(c.item,v)||this._addIdentityChange(c,v)):(c=this._mismatch(c,v,_,h),u=!0),c=c._next,h++}),this.length=h;return this._truncate(c),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,c,u,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(u,h))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._moveAfter(o,p,h)):o=this._addAfter(new uM(c,u),p,h),o}_verifyReinsertion(o,c,u,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const c=o._next;this._addToRemovals(this._unlink(o)),o=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,c,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,c,u),this._addToMoves(o,u),o}_moveAfter(o,c,u){return this._unlink(o),this._insertAfter(o,c,u),this._addToMoves(o,u),o}_addAfter(o,c,u){return this._insertAfter(o,c,u),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,c,u){const h=null===c?this._itHead:c._next;return o._next=h,o._prev=c,null===h?this._itTail=o:h._prev=o,null===c?this._itHead=o:c._next=o,null===this._linkedRecords&&(this._linkedRecords=new LD),this._linkedRecords.put(o),o.currentIndex=u,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const c=o._prev,u=o._next;return null===c?this._itHead=u:c._next=u,null===u?this._itTail=c:u._prev=c,o}_addToMoves(o,c){return o.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new LD),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,c){return o.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class uM{constructor(o,c){this.item=o,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class N2{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,c){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===c||c<=u.currentIndex)&&Object.is(u.trackById,o))return u;return null}remove(o){const c=o._prevDup,u=o._nextDup;return null===c?this._head=u:c._nextDup=u,null===u?this._tail=c:u._prevDup=c,null===this._head}}class LD{constructor(){this.map=new Map}put(o){const c=o.trackById;let u=this.map.get(c);u||(u=new N2,this.map.set(c,u)),u.add(o)}get(o,c){const h=this.map.get(o);return h?h.get(o,c):null}remove(o){const c=o.trackById;return this.map.get(c).remove(o)&&this.map.delete(c),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function H_(s,o,c){const u=s.previousIndex;if(null===u)return u;let h=0;return c&&u<c.length&&(h=c[u]),u+o+h}class dM{constructor(){}supports(o){return o instanceof Map||X0(o)}create(){return new M2}}class M2{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let c;for(c=this._mapHead;null!==c;c=c._next)o(c)}forEachPreviousItem(o){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)o(c)}forEachChangedItem(o){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}diff(o){if(o){if(!(o instanceof Map||X0(o)))throw new Error(`Error trying to diff '${L(o)}'. Only maps and objects are allowed`)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(o,(u,h)=>{if(c&&c.key===h)this._maybeAddToChanges(c,u),this._appendAfter=c,c=c._next;else{const p=this._getOrCreateRecordForKey(h,u);c=this._insertBeforeOrAppend(c,p)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let u=c;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,c){if(o){const u=o._prev;return c._next=o,c._prev=u,o._prev=c,u&&(u._next=c),o===this._mapHead&&(this._mapHead=c),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(o,c){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,c);const p=h._prev,_=h._next;return p&&(p._next=_),_&&(_._prev=p),h._next=null,h._prev=null,h}const u=new hM(o);return this._records.set(o,u),u.currentValue=c,this._addToAdditions(u),u}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,c){Object.is(c,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=c,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,c){o instanceof Map?o.forEach(c):Object.keys(o).forEach(u=>c(o[u],u))}}class hM{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function VD(){return new V1([new F1])}let V1=(()=>{class s{constructor(c){this.factories=c}static create(c,u){if(null!=u){const h=u.factories.slice();c=c.concat(h)}return new s(c)}static extend(c){return{provide:s,useFactory:u=>s.create(c,u||VD()),deps:[[s,new Kr,new Ga]]}}find(c){const u=this.factories.find(h=>h.supports(c));if(null!=u)return u;throw new Error(`Cannot find a differ supporting object '${c}' of type '${function(s){return s.name||typeof s}(c)}'`)}}return s.\u0275prov=vt({token:s,providedIn:"root",factory:VD}),s})();function fM(){return new B1([new dM])}let B1=(()=>{class s{constructor(c){this.factories=c}static create(c,u){if(u){const h=u.factories.slice();c=c.concat(h)}return new s(c)}static extend(c){return{provide:s,useFactory:u=>s.create(c,u||fM()),deps:[[s,new Kr,new Ga]]}}find(c){const u=this.factories.find(h=>h.supports(c));if(u)return u;throw new Error(`Cannot find a differ supporting object '${c}'`)}}return s.\u0275prov=vt({token:s,providedIn:"root",factory:fM}),s})();function U1(s,o,c,u,h=!1){for(;null!==c;){const p=o[c.index];if(null!==p&&u.push(Ln(p)),Ki(p))for(let v=10;v<p.length;v++){const C=p[v],T=C[1].firstChild;null!==T&&U1(C[1],C,T,u)}const _=c.type;if(8&_)U1(s,o,c.child,u);else if(32&_){const v=y0(c,o);let C;for(;C=v();)u.push(C)}else if(16&_){const v=Gv(o,c);if(Array.isArray(v))u.push(...v);else{const C=sg(o[16]);U1(C[1],C,v,u,!0)}}c=h?c.projectionNext:c.next}return u}class $_{constructor(o,c){this._lView=o,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,c=o[1];return U1(c,o,c.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Ki(o)){const c=o[8],u=c?c.indexOf(this):-1;u>-1&&(C0(o,u),Io(c,u))}this._attachedToViewContainer=!1}CE(this._lView[1],this._lView)}onDestroy(o){nb(this._lView[1],this._lView,null,o)}markForCheck(){db(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){G0(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(s,o,c){xc(!0);try{G0(s,o,c)}finally{xc(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var o;this._appRef=null,gd(this._lView[1],o=this._lView,o[11],2,null,null)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=o}}class k2 extends $_{constructor(o){super(o),this._view=o}detectChanges(){ex(this._view)}checkNoChanges(){!function(s){xc(!0);try{ex(s)}finally{xc(!1)}}(this._view)}get context(){return null}}const gM=function(s){return function(s,o,c){if(gl(s)&&!c){const u=Vr(s.index,o);return new $_(u,u)}return 47&s.type?new $_(o[16],o):null}(er(),Ze(),16==(16&s))};let mM=(()=>{class s{}return s.__NG_ELEMENT_ID__=gM,s})();const j_=[new dM],_M=new V1([new F1]),yM=new B1(j_),wM=function(){return Ld(er(),Ze())};let Fg=(()=>{class s{}return s.__NG_ELEMENT_ID__=wM,s})();const CM=Fg,EM=class extends CM{constructor(o,c,u){super(),this._declarationLView=o,this._declarationTContainer=c,this.elementRef=u}createEmbeddedView(o){const c=this._declarationTContainer.tViews,u=di(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(u[19]=p.createEmbeddedView(c)),Js(c,u,o),new $_(u)}};function Ld(s,o){return 4&s.type?new EM(o,s,Af(s,o)):null}class uu{}class BD{}const G1=function(){return Mf(er(),Ze())};let Nf=(()=>{class s{}return s.__NG_ELEMENT_ID__=G1,s})();const DM=Nf,UD=class extends DM{constructor(o,c,u){super(),this._lContainer=o,this._hostTNode=c,this._hostLView=u}get element(){return Af(this._hostTNode,this._hostLView)}get injector(){return new Eo(this._hostTNode,this._hostLView)}get parentInjector(){const o=xt(this._hostTNode,this._hostLView);if(Sl(o)){const c=Ji(o,this._hostLView),u=Fa(o);return new Eo(c[1].data[u+8],c)}return new Eo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const c=HD(this._lContainer);return null!==c&&c[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,c,u){const h=o.createEmbeddedView(c||{});return this.insert(h,u),h}createComponent(o,c,u,h,p){const _=u||this.parentInjector;if(!p&&null==o.ngModule&&_){const C=_.get(uu,null);C&&(p=C)}const v=o.create(_,h,void 0,p);return this.insert(v.hostView,c),v}insert(o,c){const u=o._lView,h=u[1];if(Ki(u[3])){const M=this.indexOf(o);if(-1!==M)this.detach(M);else{const $=u[3],K=new UD($,$[6],$[3]);K.detach(K.indexOf(o))}}const p=this._adjustIndex(c),_=this._lContainer;!function(s,o,c,u){const h=10+u,p=c.length;u>0&&(c[h-1][4]=o),u<p-10?(o[4]=c[h],Os(c,10+u,o)):(c.push(o),o[4]=null),o[3]=c;const _=o[17];null!==_&&c!==_&&function(s,o){const c=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===c?s[9]=[o]:c.push(o)}(_,o);const v=o[19];null!==v&&v.insertView(s),o[2]|=128}(h,u,_,p);const v=Wv(p,_),C=u[11],T=E0(C,_[7]);return null!==T&&function(s,o,c,u,h,p){u[0]=h,u[6]=o,gd(s,u,c,1,h,p)}(h,_[6],C,u,T,v),o.attachToViewContainerRef(),Os(W1(_),p,o),o}move(o,c){return this.insert(o,c)}indexOf(o){const c=HD(this._lContainer);return null!==c?c.indexOf(o):-1}remove(o){const c=this._adjustIndex(o,-1),u=C0(this._lContainer,c);u&&(Io(W1(this._lContainer),c),CE(u[1],u))}detach(o){const c=this._adjustIndex(o,-1),u=C0(this._lContainer,c);return u&&null!=Io(W1(this._lContainer),c)?new $_(u):null}_adjustIndex(o,c=0){return null==o?this.length+c:o}};function HD(s){return s[8]}function W1(s){return s[8]||(s[8]=[])}function Mf(s,o){let c;const u=o[s.index];if(Ki(u))c=u;else{let h;if(8&s.type)h=Ln(u);else{const p=o[11];h=p.createComment("");const _=Vn(s,o);qc(p,E0(p,_),h,function(s,o){return qn(s)?s.nextSibling(o):o.nextSibling}(p,_),!1)}o[s.index]=c=QE(u,o,h,s),$0(o,c)}return new UD(c,s,o)}const Ff={};class pT extends Sf{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const c=at(o);return new Yt(c,this.ngModule)}}function gT(s){const o=[];for(let c in s)s.hasOwnProperty(c)&&o.push({propName:s[c],templateName:c});return o}const wt=new nr("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>gE});class Yt extends RD{constructor(o,c){super(),this.componentDef=o,this.ngModule=c,this.componentType=o.type,this.selector=o.selectors.map(yA).join(","),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!c}get inputs(){return gT(this.componentDef.inputs)}get outputs(){return gT(this.componentDef.outputs)}create(o,c,u,h){const p=(h=h||this.ngModule)?function(s,o){return{get:(c,u,h)=>{const p=s.get(c,Ff,h);return p!==Ff||u===Ff?p:o.get(c,u,h)}}}(o,h.injector):o,_=p.get(pa,As),v=p.get(k1,null),C=_.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",M=u?function(s,o,c){if(qn(s))return s.selectRootElement(o,c===it.ShadowDom);let u="string"==typeof o?s.querySelector(o):o;return u.textContent="",u}(C,u,this.componentDef.encapsulation):Hv(_.createRenderer(null,this.componentDef),T,function(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(T)),$=this.componentDef.onPush?576:528,K=function(s,o){return{components:[],scheduler:s||gE,clean:HA,playerHandler:o||null,flags:0}}(),ue=ug(0,null,null,1,0,null,null,null,null,null),pe=di(null,ue,K,$,null,null,_,C,v,p);let Se,Te;Ra(pe);try{const ze=function(s,o,c,u,h,p){const _=c[1];c[20]=s;const C=Qh(_,20,2,"#host",null),T=C.mergedAttrs=o.hostAttrs;null!==T&&(q0(C,T,!0),null!==s&&(Ih(h,s,T),null!==C.classes&&Zv(h,s,C.classes),null!==C.styles&&AE(h,s,C.styles)));const M=u.createRenderer(s,o),$=di(c,hi(o),null,o.onPush?64:16,c[20],C,u,M,p||null,null);return _.firstCreatePass&&(Tn(Zo(C,c),_,o.type),B0(_,C),YE(C,c.length,1)),$0(c,$),c[20]=$}(M,this.componentDef,pe,_,C);if(M)if(u)Ih(C,M,["ng-version",O1.full]);else{const{attrs:Pe,classes:It}=function(s){const o=[],c=[];let u=1,h=2;for(;u<s.length;){let p=s[u];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++u]):8===h&&c.push(p);else{if(!ia(h))break;h=p}u++}return{attrs:o,classes:c}}(this.componentDef.selectors[0]);Pe&&Ih(C,M,Pe),It&&It.length>0&&Zv(C,M,It.join(" "))}if(Te=Ns(ue,20),void 0!==c){const Pe=Te.projection=[];for(let It=0;It<this.ngContentSelectors.length;It++){const Pt=c[It];Pe.push(null!=Pt?Array.from(Pt):null)}}Se=function(s,o,c,u,h){const p=c[1],_=function(s,o,c){const u=er();s.firstCreatePass&&(c.providersResolver&&c.providersResolver(c),U0(s,u,o,Xh(s,o,1,null),c));const h=zn(o,s,u.directiveStart,u);Vi(h,o);const p=Vn(u,o);return p&&Vi(p,o),h}(p,c,o);if(u.components.push(_),s[8]=_,h&&h.forEach(C=>C(_,o)),o.contentQueries){const C=er();o.contentQueries(1,_,C.directiveStart)}const v=er();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(ka(v.index),ob(c[1],v,0,v.directiveStart,v.directiveEnd,o),lb(o,_)),_}(ze,this.componentDef,pe,K,[Db]),Js(ue,pe,null)}finally{qo()}return new Gg(this.componentType,Se,Af(Te,pe),pe,Te)}}class Gg extends class{}{constructor(o,c,u,h,p){super(),this.location=u,this._rootLView=h,this._tNode=p,this.instance=c,this.hostView=this.changeDetectorRef=new k2(h),this.componentType=o}get injector(){return new Eo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}const hu=new Map;class $i extends uu{constructor(o,c){super(),this._parent=c,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new pT(this);const u=Fn(o),h=o[Mt]||null;h&&M_(h),this._bootstrapComponents=za(u.bootstrap),this._r3Injector=gb(o,c,[{provide:uu,useValue:this},{provide:Sf,useValue:this.componentFactoryResolver}],L(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,c=Sr.THROW_IF_NOT_FOUND,u=pt.Default){return o===Sr||o===uu||o===sf?this:this._r3Injector.get(o,c,u)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class cl extends BD{constructor(o){super(),this.moduleType=o,null!==Fn(o)&&function(s){const o=new Set;!function c(u){const h=Fn(u,!0),p=h.id;null!==p&&(function(s,o,c){if(o&&o!==c)throw new Error(`Duplicate module registered for ${s} - ${L(o)} vs ${L(o.name)}`)}(p,hu.get(p),u),hu.set(p,u));const _=za(h.imports);for(const v of _)o.has(v)||(o.add(v),c(v))}(s)}(o)}create(o){return new $i(this.moduleType,o)}}function yT(s,o,c,u){return is(Ze(),_r(),s,o,c,u)}function cw(s,o,c,u,h){return hw(Ze(),_r(),s,o,c,u,h)}function uw(s,o,c,u,h,p){return function(s,o,c,u,h,p,_,v){const C=o+c;return function(s,o,c,u,h){const p=Ed(s,o,c,u);return ti(s,o+2,h)||p}(s,C,h,p,_)?ws(s,C+3,v?u.call(v,h,p,_):u(h,p,_)):Ud(s,C+3)}(Ze(),_r(),s,o,c,u,h,p)}function Ud(s,o){const c=s[o];return c===Kt?void 0:c}function is(s,o,c,u,h,p){const _=o+c;return ti(s,_,h)?ws(s,_+1,p?u.call(p,h):u(h)):Ud(s,_+1)}function hw(s,o,c,u,h,p,_){const v=o+c;return Ed(s,v,h,p)?ws(s,v+2,_?u.call(_,h,p):u(h,p)):Ud(s,v+2)}function gw(s,o){const c=sn();let u;const h=s+20;c.firstCreatePass?(u=function(s,o){if(o)for(let c=o.length-1;c>=0;c--){const u=o[c];if(s===u.name)return u}throw new J("302",`The pipe '${s}' could not be found!`)}(o,c.pipeRegistry),c.data[h]=u,u.onDestroy&&(c.destroyHooks||(c.destroyHooks=[])).push(h,u.onDestroy)):u=c.data[h];const p=u.factory||(u.factory=js(u.type)),_=ln(Nd);try{const v=Ac(!1),C=p();return Ac(v),function(s,o,c,u){c>=s.data.length&&(s.data[c]=null,s.blueprint[c]=null),o[c]=u}(c,Ze(),h,C),C}finally{ln(_)}}function sy(s,o,c){const u=s+20,h=Ze(),p=Sa(h,u);return Vf(h,Hd(h,u)?is(h,_r(),o,p.transform,c,p):p.transform(c))}function CT(s,o,c,u){const h=s+20,p=Ze(),_=Sa(p,h);return Vf(p,Hd(p,h)?hw(p,_r(),o,_.transform,c,u,_):_.transform(c,u))}function Hd(s,o){return s[1].data[o].pure}function Vf(s,o){return No.isWrapped(o)&&(o=No.unwrap(o),s[ki()]=Kt),o}function oy(s){return o=>{setTimeout(s,void 0,o)}}const io=class extends a.xQ{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,c,u){var h,p,_;let v=o,C=c||(()=>null),T=u;if(o&&"object"==typeof o){const $=o;v=null===(h=$.next)||void 0===h?void 0:h.bind($),C=null===(p=$.error)||void 0===p?void 0:p.bind($),T=null===(_=$.complete)||void 0===_?void 0:_.bind($)}this.__isAsync&&(C=oy(C),v&&(v=oy(v)),T&&(T=oy(T)));const M=super.subscribe({next:v,error:C,complete:T});return o instanceof R.w&&o.add(M),M}};function mw(){return this._results[eu()]()}class Bf{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=eu(),u=Bf.prototype;u[c]||(u[c]=mw)}get changes(){return this._changes||(this._changes=new io)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,c){return this._results.reduce(o,c)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,c){const u=this;u.dirty=!1;const h=yi(o);(this._changesDetected=!function(s,o,c){if(s.length!==o.length)return!1;for(let u=0;u<s.length;u++){let h=s[u],p=o[u];if(c&&(h=c(h),p=c(p)),p!==h)return!1}return!0}(u._results,h,c))&&(u._results=h,u.length=h.length,u.last=h[this.length-1],u.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class qg{constructor(o){this.queryList=o,this.matches=null}clone(){return new qg(this.queryList)}setDirty(){this.queryList.setDirty()}}class ay{constructor(o=[]){this.queries=o}createEmbeddedView(o){const c=o.queries;if(null!==c){const u=null!==o.contentQueries?o.contentQueries[0]:c.length,h=[];for(let p=0;p<u;p++){const _=c.getByIndex(p);h.push(this.queries[_.indexInDeclarationView].clone())}return new ay(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let c=0;c<this.queries.length;c++)null!==Cw(o,c).matches&&this.queries[c].setDirty()}}class xT{constructor(o,c,u=null){this.predicate=o,this.flags=c,this.read=u}}class yw{constructor(o=[]){this.queries=o}elementStart(o,c){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(o,c)}elementEnd(o){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(o)}embeddedTView(o){let c=null;for(let u=0;u<this.length;u++){const h=null!==c?c.length:0,p=this.getByIndex(u).embeddedTView(o,h);p&&(p.indexInDeclarationView=u,null!==c?c.push(p):c=[p])}return null!==c?new yw(c):null}template(o,c){for(let u=0;u<this.queries.length;u++)this.queries[u].template(o,c)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Ci{constructor(o,c=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(o,c){this.isApplyingToNode(c)&&this.matchTNode(o,c)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,c){this.elementStart(o,c)}embeddedTView(o,c){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,c),new Ci(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let u=o.parent;for(;null!==u&&8&u.type&&u.index!==c;)u=u.parent;return c===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(o,c){const u=this.metadata.predicate;if(Array.isArray(u))for(let h=0;h<u.length;h++){const p=u[h];this.matchTNodeWithReadOption(o,c,Zg(c,p)),this.matchTNodeWithReadOption(o,c,Co(c,o,p,!1,!1))}else u===Fg?4&c.type&&this.matchTNodeWithReadOption(o,c,-1):this.matchTNodeWithReadOption(o,c,Co(c,o,u,!1,!1))}matchTNodeWithReadOption(o,c,u){if(null!==u){const h=this.metadata.read;if(null!==h)if(h===ol||h===Nf||h===Fg&&4&c.type)this.addMatch(c.index,-2);else{const p=Co(c,o,h,!1,!1);null!==p&&this.addMatch(c.index,p)}else this.addMatch(c.index,u)}}addMatch(o,c){null===this.matches?this.matches=[o,c]:this.matches.push(o,c)}}function Zg(s,o){const c=s.localNames;if(null!==c)for(let u=0;u<c.length;u+=2)if(c[u]===o)return c[u+1];return null}function zg(s,o,c,u){return-1===c?function(s,o){return 11&s.type?Af(s,o):4&s.type?Ld(s,o):null}(o,s):-2===c?function(s,o,c){return c===ol?Af(o,s):c===Fg?Ld(o,s):c===Nf?Mf(o,s):void 0}(s,o,u):zn(s,s[1],c,o)}function DT(s,o,c,u){const h=o[19].queries[u];if(null===h.matches){const p=s.data,_=c.matches,v=[];for(let C=0;C<_.length;C+=2){const T=_[C];v.push(T<0?null:zg(o,p[T],_[C+1],c.metadata.read))}h.matches=v}return h.matches}function Uf(s,o,c,u){const h=s.queries.getByIndex(c),p=h.matches;if(null!==p){const _=DT(s,o,h,c);for(let v=0;v<p.length;v+=2){const C=p[v];if(C>0)u.push(_[v/2]);else{const T=p[v+1],M=o[-C];for(let $=10;$<M.length;$++){const K=M[$];K[17]===K[3]&&Uf(K[1],K,T,u)}if(null!==M[9]){const $=M[9];for(let K=0;K<$.length;K++){const ue=$[K];Uf(ue[1],ue,T,u)}}}}}return u}function Yg(s){const o=Ze(),c=sn(),u=Dc();vo(u+1);const h=Cw(c,u);if(s.dirty&&Eh(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?Uf(c,o,u,[]):DT(c,o,h,u);s.reset(p,FD),s.notifyOnChanges()}return!0}return!1}function ly(s,o,c){const u=sn();u.firstCreatePass&&(ww(u,new xT(s,o,c),-1),2==(2&o)&&(u.staticViewQueries=!0)),bw(u,Ze(),o)}function cy(s,o,c,u){const h=sn();if(h.firstCreatePass){const p=er();ww(h,new xT(o,c,u),p.index),function(s,o){const c=s.contentQueries||(s.contentQueries=[]);o!==(c.length?c[c.length-1]:-1)&&c.push(s.queries.length-1,o)}(h,s),2==(2&c)&&(h.staticContentQueries=!0)}bw(h,Ze(),c)}function uy(){return s=Ze(),o=Dc(),s[19].queries[o].queryList;var s,o}function bw(s,o,c){const u=new Bf(4==(4&c));nb(s,o,u,u.destroy),null===o[19]&&(o[19]=new ay),o[19].queries.push(new qg(u))}function ww(s,o,c){null===s.queries&&(s.queries=new yw),s.queries.track(new Ci(o,c))}function Cw(s,o){return s.queries.getByIndex(o)}function Ew(s,o){return Ld(s,o)}const Yf=new nr("Application Initializer");let sc=(()=>{class s{constructor(c){this.appInits=c,this.resolve=R1,this.reject=R1,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,h)=>{this.resolve=u,this.reject=h})}runInitializers(){if(this.initialized)return;const c=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(Wb(p))c.push(p);else if(vf(p)){const _=new Promise((v,C)=>{p.subscribe({complete:v,error:C})});c.push(_)}}Promise.all(c).then(()=>{u()}).catch(h=>{this.reject(h)}),0===c.length&&u(),this.initialized=!0}}return s.\u0275fac=function(c){return new(c||s)(hr(Yf,8))},s.\u0275prov=vt({token:s,factory:s.\u0275fac}),s})();const tm=new nr("AppId"),Ar={provide:tm,useFactory:function(){return`${Kf()}${Kf()}${Kf()}`},deps:[]};function Kf(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ZT=new nr("Platform Initializer"),zT=new nr("Platform ID"),Qf=new nr("appBootstrapListener");let YT=(()=>{class s{log(c){console.log(c)}warn(c){console.warn(c)}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=vt({token:s,factory:s.\u0275fac}),s})();const nm=new nr("LocaleId"),KT=new nr("DefaultCurrencyCode");class QT{constructor(o,c){this.ngModuleFactory=o,this.componentFactories=c}}const Hw=function(s){return new cl(s)},wR=Hw,JT=function(s){return Promise.resolve(Hw(s))},vy=function(s){const o=Hw(s),u=za(Fn(s).declarations).reduce((h,p)=>{const _=at(p);return _&&h.push(new Yt(_)),h},[]);return new QT(o,u)},$w=vy,jw=function(s){return Promise.resolve(vy(s))};let om=(()=>{class s{constructor(){this.compileModuleSync=wR,this.compileModuleAsync=JT,this.compileModuleAndAllComponentsSync=$w,this.compileModuleAndAllComponentsAsync=jw}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=vt({token:s,factory:s.\u0275fac}),s})();const by=(()=>Promise.resolve(0))();function qd(s){"undefined"==typeof Zone?by.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class xs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new io(!1),this.onMicrotaskEmpty=new io(!1),this.onStable=new io(!1),this.onError=new io(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!u&&c,h.shouldCoalesceRunChangeDetection=u,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function(){let s=Nt.requestAnimationFrame,o=Nt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c);const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function(s){const o=()=>{!function(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Nt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,jr(s),s.isCheckStableRunning=!0,Zd(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),jr(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,u,h,p,_,v)=>{try{return Gw(s),c.invokeTask(h,p,_,v)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),eI(s)}},onInvoke:(c,u,h,p,_,v,C)=>{try{return Gw(s),c.invoke(h,p,_,v,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),eI(s)}},onHasTask:(c,u,h,p)=>{c.hasTask(h,p),u===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,jr(s),Zd(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(c,u,h,p)=>(c.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!xs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(xs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,c,u){return this._inner.run(o,c,u)}runTask(o,c,u,h){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+h,o,XT,R1,R1);try{return p.runTask(_,c,u)}finally{p.cancelTask(_)}}runGuarded(o,c,u){return this._inner.runGuarded(o,c,u)}runOutsideAngular(o){return this._outer.run(o)}}const XT={};function Zd(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function jr(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Gw(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function eI(s){s._nesting--,Zd(s)}class AR{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new io,this.onMicrotaskEmpty=new io,this.onStable=new io,this.onError=new io}run(o,c,u){return o.apply(c,u)}runGuarded(o,c,u){return o.apply(c,u)}runOutsideAngular(o){return o()}runTask(o,c,u,h){return o.apply(c,u)}}let tI=(()=>{class s{constructor(c){this._ngZone=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{xs.assertNotInAngularZone(),qd(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())qd(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(c)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,u,h){let p=-1;u&&u>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),c(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:c,timeoutId:p,updateCb:h})}whenStable(c,u,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,u,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(c,u,h){return[]}}return s.\u0275fac=function(c){return new(c||s)(hr(xs))},s.\u0275prov=vt({token:s,factory:s.\u0275fac}),s})(),nI=(()=>{class s{constructor(){this._applications=new Map,Cy.addToWindow(this)}registerApplication(c,u){this._applications.set(c,u)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,u=!0){return Cy.findTestabilityInTree(this,c,u)}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=vt({token:s,factory:s.\u0275fac}),s})();class rI{addToWindow(o){}findTestabilityInTree(o,c,u){return null}}function iI(s){Cy=s}let Cy=new rI,lm=!0,Ww=!1;function ma(){return Ww=!0,lm}function sI(){if(Ww)throw new Error("Cannot enable prod mode after platform setup.");lm=!1}let _a;const Yw=new nr("AllowMultipleToken");class cm{constructor(o,c){this.name=o,this.token=c}}function Kw(s,o,c=[]){const u=`Platform: ${o}`,h=new nr(u);return(p=[])=>{let _=Jw();if(!_||_.injector.get(Yw,!1))if(s)s(c.concat(p).concat({provide:h,useValue:!0}));else{const v=c.concat(p).concat({provide:h,useValue:!0},{provide:hg,useValue:"platform"});!function(s){if(_a&&!_a.destroyed&&!_a.injector.get(Yw,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");_a=s.get(um);const o=s.get(ZT,null);o&&o.forEach(c=>c())}(Sr.create({providers:v,name:u}))}return function(s){const o=Jw();if(!o)throw new Error("No platform exists!");if(!o.injector.get(s,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return o}(h)}}function Jw(){return _a&&!_a.destroyed?_a:null}let um=(()=>{class s{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,u){const v=function(s,o){let c;return c="noop"===s?new AR:("zone.js"===s?void 0:s)||new xs({enableLongStackTrace:ma(),shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),c}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),C=[{provide:xs,useValue:v}];return v.run(()=>{const T=Sr.create({providers:C,parent:this.injector,name:c.moduleType.name}),M=c.create(T),$=M.injector.get(qh,null);if(!$)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return v.runOutsideAngular(()=>{const K=v.onError.subscribe({next:ue=>{$.handleError(ue)}});M.onDestroy(()=>{Dy(this._modules,M),K.unsubscribe()})}),function(s,o,c){try{const u=c();return Wb(u)?u.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):u}catch(u){throw o.runOutsideAngular(()=>s.handleError(u)),u}}($,v,()=>{const K=M.injector.get(sc);return K.runInitializers(),K.donePromise.then(()=>(M_(M.injector.get(nm,Df)||Df),this._moduleDoBootstrap(M),M))})})}bootstrapModule(c,u=[]){const h=fu({},u);return function(s,o,c){const u=new cl(c);return Promise.resolve(u)}(0,0,c).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(c){const u=c.injector.get(Jf);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(h=>u.bootstrap(h));else{if(!c.instance.ngDoBootstrap)throw new Error(`The module ${L(c.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);c.instance.ngDoBootstrap(u)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(c){return new(c||s)(hr(Sr))},s.\u0275prov=vt({token:s,factory:s.\u0275fac}),s})();function fu(s,o){return Array.isArray(o)?o.reduce(fu,s):Object.assign(Object.assign({},s),o)}let Jf=(()=>{class s{constructor(c,u,h,p,_){this._zone=c,this._injector=u,this._exceptionHandler=h,this._componentFactoryResolver=p,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new k.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),C=new k.y(T=>{let M;this._zone.runOutsideAngular(()=>{M=this._zone.onStable.subscribe(()=>{xs.assertNotInAngularZone(),qd(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const $=this._zone.onUnstable.subscribe(()=>{xs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{M.unsubscribe(),$.unsubscribe()}});this.isStable=(0,Q.T)(v,C.pipe((0,ie.B)()))}bootstrap(c,u){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let h;h=c instanceof RD?c:this._componentFactoryResolver.resolveComponentFactory(c),this.componentTypes.push(h.componentType);const p=function(s){return s.isBoundToModule}(h)?void 0:this._injector.get(uu),v=h.create(Sr.NULL,[],u||h.selector,p),C=v.location.nativeElement,T=v.injector.get(tI,null),M=T&&v.injector.get(nI);return T&&M&&M.registerApplication(C,T),v.onDestroy(()=>{this.detachView(v.hostView),Dy(this.components,v),M&&M.unregisterApplication(C)}),this._loadComponent(v),v}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const u=c;this._views.push(u),u.attachToAppRef(this)}detachView(c){const u=c;Dy(this._views,u),u.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c),this._injector.get(Qf,[]).concat(this._bootstrapListeners).forEach(h=>h(c))}ngOnDestroy(){this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(c){return new(c||s)(hr(xs),hr(Sr),hr(qh),hr(Sf),hr(sc))},s.\u0275prov=vt({token:s,factory:s.\u0275fac}),s})();function Dy(s,o){const c=s.indexOf(o);c>-1&&s.splice(c,1)}class Ty{}class eC{}const PR={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let OR=(()=>{class s{constructor(c,u){this._compiler=c,this._config=u||PR}load(c){return this.loadAndCompile(c)}loadAndCompile(c){let[u,h]=c.split("#");return void 0===h&&(h="default"),O(8255)(u).then(p=>p[h]).then(p=>tC(p,u,h)).then(p=>this._compiler.compileModuleAsync(p))}loadFactory(c){let[u,h]=c.split("#"),p="NgFactory";return void 0===h&&(h="default",p=""),O(8255)(this._config.factoryPathPrefix+u+this._config.factoryPathSuffix).then(_=>_[h+p]).then(_=>tC(_,u,h))}}return s.\u0275fac=function(c){return new(c||s)(hr(om),hr(eC,8))},s.\u0275prov=vt({token:s,factory:s.\u0275fac}),s})();function tC(s,o,c){if(!s)throw new Error(`Cannot find '${c}' in '${o}'`);return s}const BR=function(s){return null},on=Kw(null,"core",[{provide:zT,useValue:"unknown"},{provide:um,deps:[Sr]},{provide:nI,deps:[]},{provide:YT,deps:[]}]),Yd=[{provide:Jf,useClass:Jf,deps:[xs,Sr,qh,Sf,sc]},{provide:wt,deps:[xs],useFactory:function(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(c){o.push(c)}}},{provide:sc,useClass:sc,deps:[[new Ga,Yf]]},{provide:om,useClass:om,deps:[]},Ar,{provide:V1,useFactory:function(){return _M},deps:[]},{provide:B1,useFactory:function(){return yM},deps:[]},{provide:nm,useFactory:function(s){return M_(s=s||"undefined"!=typeof $localize&&$localize.locale||Df),s},deps:[[new ja(nm),new Ga,new Kr]]},{provide:KT,useValue:"USD"}];let fm=(()=>{class s{constructor(c){}}return s.\u0275fac=function(c){return new(c||s)(hr(Jf))},s.\u0275mod=se({type:s}),s.\u0275inj=Xt({providers:Yd}),s})()},8939:(Ve,me,O)=>{"use strict";O.d(me,{hO:()=>B,xv:()=>U,Dh:()=>L,GT:()=>q,cc:()=>z,on:()=>P,pX:()=>ie});var a=O(7716),R=O(7841),k=O(8971);Ve=O.hmd(Ve);const Q=["ngOnDestroy"],ie=(H,Z,de,fe={})=>new Proxy(H,{get:(Ce,ve)=>de.runOutsideAngular(()=>{var He;if(H[ve])return(null===(He=null==fe?void 0:fe.spy)||void 0===He?void 0:He.get)&&fe.spy.get(ve,H[ve]),H[ve];if(Q.indexOf(ve)>-1)return()=>{};const Re=Z.toPromise().then(Ae=>{const be=Ae&&Ae[ve];return"function"==typeof be?be.bind(Ae):be&&be.then?be.then(ce=>de.run(()=>ce)):de.run(()=>be)});return new Proxy(()=>{},{get:(Ae,be)=>Re[be],apply:(Ae,be,ce)=>Re.then(Ee=>{var _e;const xe=Ee&&Ee(...ce);return(null===(_e=null==fe?void 0:fe.spy)||void 0===_e?void 0:_e.apply)&&fe.spy.apply(ve,ce,xe),xe})})})}),q=(H,Z)=>{Z.forEach(de=>{Object.getOwnPropertyNames(de.prototype||de).forEach(fe=>{Object.defineProperty(H.prototype,fe,Object.getOwnPropertyDescriptor(de.prototype||de,fe))})})};class ee{constructor(Z){return Z}}const L=new a.OlP("angularfire2.app.options"),U=new a.OlP("angularfire2.app.name");function P(H,Z,de){const Ce="object"==typeof de&&de||{};Ce.name=Ce.name||"string"==typeof de&&de||"[DEFAULT]";const He=R.Z.apps.filter(Re=>Re&&Re.name===Ce.name)[0]||Z.runOutsideAngular(()=>R.Z.initializeApp(H,Ce));try{JSON.stringify(H)!==JSON.stringify(He.options)&&N("error",`${He.name} Firebase App already initialized with different options${Ve.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Re){}return new ee(He)}const N=(H,...Z)=>{(0,a.X6Q)()&&"undefined"!=typeof console&&console[H](...Z)},A={provide:ee,useFactory:P,deps:[L,a.R0b,[new a.FiY,U]]};let B=(()=>{class H{constructor(de){R.Z.registerVersion("angularfire",k.q4.full,"core"),R.Z.registerVersion("angularfire",k.q4.full,"app-compat"),R.Z.registerVersion("angular",a.q4F.full,de.toString())}static initializeApp(de,fe){return{ngModule:H,providers:[{provide:L,useValue:de},{provide:U,useValue:fe}]}}}return H.\u0275fac=function(de){return new(de||H)(a.LFG(a.Lbi))},H.\u0275mod=a.oAB({type:H}),H.\u0275inj=a.cJS({providers:[A]}),H})();function z(H,Z,de,fe,Ce){const[,ve,He]=globalThis.\u0275AngularfireInstanceCache.find(Re=>Re[0]===H)||[];if(ve)return function(H,Z){try{return H.toString()===Z.toString()}catch(de){return H===Z}}(Ce,He)||(le("error",`${Z} was already initialized on the ${de} Firebase App with different settings.${re?" You may need to reload as Firebase is not HMR aware.":""}`),le("warn",{is:Ce,was:He})),ve;{const Re=fe();return globalThis.\u0275AngularfireInstanceCache.push([H,Re,Ce]),Re}}const re=!!Ve.hot,le=(H,...Z)=>{(0,a.X6Q)()&&"undefined"!=typeof console&&console[H](...Z)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8971:(Ve,me,O)=>{"use strict";O.d(me,{q4:()=>e0,iC:()=>Ir,fc:()=>jp,HU:()=>kh,vb:()=>Ps,JM:()=>yi});var a=O(7716),R=O(2329),k=O(8239),Q=O(8026),ie=O(3854),q=O(3910),ee=O(5422);const L="@firebase/installations",U="0.5.8",N=`w:${U}`,A="FIS_v2",H=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Z(D){return D instanceof ie.ZR&&D.code.includes("request-failed")}function de({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function fe(D){return{token:D.token,requestStatus:2,expiresIn:ce(D.expiresIn),creationTime:Date.now()}}function Ce(D,S){return ve.apply(this,arguments)}function ve(){return(ve=(0,k.Z)(function*(D,S){const oe=(yield S.json()).error;return H.create("request-failed",{requestName:D,serverCode:oe.code,serverMessage:oe.message,serverStatus:oe.status})})).apply(this,arguments)}function He({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function Re(D,{refreshToken:S}){const W=He(D);return W.append("Authorization",function(D){return`${A} ${D}`}(S)),W}function Ae(D){return be.apply(this,arguments)}function be(){return(be=(0,k.Z)(function*(D){const S=yield D();return S.status>=500&&S.status<600?D():S})).apply(this,arguments)}function ce(D){return Number(D.replace("s","000"))}function _e(D,S){return xe.apply(this,arguments)}function xe(){return(xe=(0,k.Z)(function*({appConfig:D,heartbeatServiceProvider:S},{fid:W}){const oe=de(D),De=He(D),Me=S.getImmediate({optional:!0});if(Me){const Ut=yield Me.getHeartbeatsHeader();Ut&&De.append("x-firebase-client",Ut)}const dt={method:"POST",headers:De,body:JSON.stringify({fid:W,authVersion:A,appId:D.appId,sdkVersion:N})},Ot=yield Ae(()=>fetch(oe,dt));if(Ot.ok){const Ut=yield Ot.json();return{fid:Ut.fid||W,registrationStatus:2,refreshToken:Ut.refreshToken,authToken:fe(Ut.authToken)}}throw yield Ce("Create Installation",Ot)})).apply(this,arguments)}function Ie(D){return new Promise(S=>{setTimeout(S,D)})}const ht=/^[cdef][\w-]{21}$/;function Oe(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const W=function(D){return function(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return ht.test(W)?W:""}catch(D){return""}}function ke(D){return`${D.appName}!${D.appId}`}const We=new Map;function Jt(D,S){const W=ke(D);Ct(W,S),function(D,S){const W=(!Wt&&"BroadcastChannel"in self&&(Wt=new BroadcastChannel("[Firebase] FID Change"),Wt.onmessage=D=>{Ct(D.data.key,D.data.fid)}),Wt);W&&W.postMessage({key:D,fid:S}),0===We.size&&Wt&&(Wt.close(),Wt=null)}(W,S)}function Ct(D,S){const W=We.get(D);if(W)for(const oe of W)oe(S)}let Wt=null;const Qn="firebase-installations-store";let Ke=null;function Jn(){return Ke||(Ke=(0,ie.X3)("firebase-installations-database",1,(D,S)=>{switch(S){case 0:D.createObjectStore(Qn)}})),Ke}function $n(D,S){return pt.apply(this,arguments)}function pt(){return(pt=(0,k.Z)(function*(D,S){const W=ke(D),De=(yield Jn()).transaction(Qn,"readwrite"),Me=De.objectStore(Qn),Qe=yield Me.get(W);return yield Me.put(S,W),yield De.complete,(!Qe||Qe.fid!==S.fid)&&Jt(D,S.fid),S})).apply(this,arguments)}function hn(D){return pn.apply(this,arguments)}function pn(){return(pn=(0,k.Z)(function*(D){const S=ke(D),oe=(yield Jn()).transaction(Qn,"readwrite");yield oe.objectStore(Qn).delete(S),yield oe.complete})).apply(this,arguments)}function ln(D,S){return ir.apply(this,arguments)}function ir(){return(ir=(0,k.Z)(function*(D,S){const W=ke(D),De=(yield Jn()).transaction(Qn,"readwrite"),Me=De.objectStore(Qn),Qe=yield Me.get(W),dt=S(Qe);return void 0===dt?yield Me.delete(W):yield Me.put(dt,W),yield De.complete,dt&&(!Qe||Qe.fid!==dt.fid)&&Jt(D,dt.fid),dt})).apply(this,arguments)}function fr(D){return cr.apply(this,arguments)}function cr(){return(cr=(0,k.Z)(function*(D){let S;const W=yield ln(D.appConfig,oe=>{const De=Dn(oe),Me=zi(D,De);return S=Me.registrationPromise,Me.installationEntry});return""===W.fid?{installationEntry:yield S}:{installationEntry:W,registrationPromise:S}})).apply(this,arguments)}function Dn(D){return gn(D||{fid:Oe(),registrationStatus:0})}function zi(D,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(H.create("app-offline"))};const W={fid:S.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:W,registrationPromise:function(D,S){return it.apply(this,arguments)}(D,W)}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:Dt(D)}:{installationEntry:S}}function it(){return(it=(0,k.Z)(function*(D,S){try{const W=yield _e(D,S);return $n(D.appConfig,W)}catch(W){throw Z(W)&&409===W.customData.serverCode?yield hn(D.appConfig):yield $n(D.appConfig,{fid:S.fid,registrationStatus:0}),W}})).apply(this,arguments)}function Dt(D){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,k.Z)(function*(D){let S=yield Zr(D.appConfig);for(;1===S.registrationStatus;)yield Ie(100),S=yield Zr(D.appConfig);if(0===S.registrationStatus){const{installationEntry:W,registrationPromise:oe}=yield fr(D);return oe||W}return S})).apply(this,arguments)}function Zr(D){return ln(D,S=>{if(!S)throw H.create("installation-not-found");return gn(S)})}function gn(D){return function(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function pr(D,S){return sr.apply(this,arguments)}function sr(){return(sr=(0,k.Z)(function*({appConfig:D,heartbeatServiceProvider:S},W){const oe=cn(D,W),De=Re(D,W),Me=S.getImmediate({optional:!0});if(Me){const Ut=yield Me.getHeartbeatsHeader();Ut&&De.append("x-firebase-client",Ut)}const dt={method:"POST",headers:De,body:JSON.stringify({installation:{sdkVersion:N,appId:D.appId}})},Ot=yield Ae(()=>fetch(oe,dt));if(Ot.ok)return fe(yield Ot.json());throw yield Ce("Generate Auth Token",Ot)})).apply(this,arguments)}function cn(D,{fid:S}){return`${de(D)}/${S}/authTokens:generate`}function St(D){return qt.apply(this,arguments)}function qt(){return(qt=(0,k.Z)(function*(D,S=!1){let W;const oe=yield ln(D.appConfig,Me=>{if(!en(Me))throw H.create("not-registered");const Qe=Me.authToken;if(!S&&he(Qe))return Me;if(1===Qe.requestStatus)return W=rt(D,S),Me;{if(!navigator.onLine)throw H.create("app-offline");const dt=ge(Me);return W=Mt(D,dt),dt}});return W?yield W:oe.authToken})).apply(this,arguments)}function rt(D,S){return qe.apply(this,arguments)}function qe(){return(qe=(0,k.Z)(function*(D,S){let W=yield mt(D.appConfig);for(;1===W.authToken.requestStatus;)yield Ie(100),W=yield mt(D.appConfig);const oe=W.authToken;return 0===oe.requestStatus?St(D,S):oe})).apply(this,arguments)}function mt(D){return ln(D,S=>{if(!en(S))throw H.create("not-registered");return function(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function Mt(D,S){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,k.Z)(function*(D,S){try{const W=yield pr(D,S),oe=Object.assign(Object.assign({},S),{authToken:W});return yield $n(D.appConfig,oe),W}catch(W){if(!Z(W)||401!==W.customData.serverCode&&404!==W.customData.serverCode){const oe=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield $n(D.appConfig,oe)}else yield hn(D.appConfig);throw W}})).apply(this,arguments)}function en(D){return void 0!==D&&2===D.registrationStatus}function he(D){return 2===D.requestStatus&&!function(D){const S=Date.now();return S<D.creationTime||D.creationTime+D.expiresIn<S+36e5}(D)}function ge(D){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:S})}function te(){return(te=(0,k.Z)(function*(D){const S=D,{installationEntry:W,registrationPromise:oe}=yield fr(S);return oe?oe.catch(console.error):St(S).catch(console.error),W.fid})).apply(this,arguments)}function Ne(){return(Ne=(0,k.Z)(function*(D,S=!1){const W=D;return yield Xe(W),(yield St(W,S)).token})).apply(this,arguments)}function Xe(D){return Et.apply(this,arguments)}function Et(){return(Et=(0,k.Z)(function*(D){const{registrationPromise:S}=yield fr(D);S&&(yield S)})).apply(this,arguments)}function Zt(D){return H.create("missing-app-config-values",{valueName:D})}const Gn="installations";(0,Q._registerComponent)(new q.wA(Gn,D=>{const S=D.getProvider("app").getImmediate();return{app:S,appConfig:function(D){if(!D||!D.options)throw Zt("App Configuration");if(!D.name)throw Zt("App Name");const S=["projectId","apiKey","appId"];for(const W of S)if(!D.options[W])throw Zt(W);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(S),heartbeatServiceProvider:(0,Q._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,Q._registerComponent)(new q.wA("installations-internal",D=>{const S=D.getProvider("app").getImmediate(),W=(0,Q._getProvider)(S,Gn).getImmediate();return{getId:()=>function(D){return te.apply(this,arguments)}(W),getToken:De=>function(D){return Ne.apply(this,arguments)}(W,De)}},"PRIVATE")),(0,Q.registerVersion)(L,U),(0,Q.registerVersion)(L,U,"esm2017");const Nn="@firebase/remote-config",Xn=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class gl{constructor(S,W,oe,De){this.client=S,this.storage=W,this.storageCache=oe,this.logger=De}isCachedDataFresh(S,W){if(!W)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const oe=Date.now()-W,De=oe<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${oe}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${De}.`),De}fetch(S){var W=this;return(0,k.Z)(function*(){const[oe,De]=yield Promise.all([W.storage.getLastSuccessfulFetchTimestampMillis(),W.storage.getLastSuccessfulFetchResponse()]);if(De&&W.isCachedDataFresh(S.cacheMaxAgeMillis,oe))return De;S.eTag=De&&De.eTag;const Me=yield W.client.fetch(S),Qe=[W.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Me.status&&Qe.push(W.storage.setLastSuccessfulFetchResponse(Me)),yield Promise.all(Qe),Me})()}}function mi(D=navigator){return D.languages&&D.languages[0]||D.language}class fs{constructor(S,W,oe,De,Me,Qe){this.firebaseInstallations=S,this.sdkVersion=W,this.namespace=oe,this.projectId=De,this.apiKey=Me,this.appId=Qe}fetch(S){var W=this;return(0,k.Z)(function*(){const[oe,De]=yield Promise.all([W.firebaseInstallations.getId(),W.firebaseInstallations.getToken()]),Qe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${W.projectId}/namespaces/${W.namespace}:fetch?key=${W.apiKey}`,dt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},Ot={sdk_version:W.sdkVersion,app_instance_id:oe,app_instance_id_token:De,app_id:W.appId,language_code:mi()},Ut={method:"POST",headers:dt,body:JSON.stringify(Ot)},fn=fetch(Qe,Ut),Ht=new Promise(($a,Fs)=>{S.signal.addEventListener(()=>{const Qo=new Error("The operation was aborted.");Qo.name="AbortError",Fs(Qo)})});let Mr;try{yield Promise.race([fn,Ht]),Mr=yield fn}catch($a){let Fs="fetch-client-network";throw"AbortError"===$a.name&&(Fs="fetch-timeout"),Xn.create(Fs,{originalErrorMessage:$a.message})}let Rr=Mr.status;const Ml=Mr.headers.get("ETag")||void 0;let td,Ks;if(200===Mr.status){let $a;try{$a=yield Mr.json()}catch(Fs){throw Xn.create("fetch-client-parse",{originalErrorMessage:Fs.message})}td=$a.entries,Ks=$a.state}if("INSTANCE_STATE_UNSPECIFIED"===Ks?Rr=500:"NO_CHANGE"===Ks?Rr=304:("NO_TEMPLATE"===Ks||"EMPTY_CONFIG"===Ks)&&(td={}),304!==Rr&&200!==Rr)throw Xn.create("fetch-status",{httpStatus:Rr});return{status:Rr,eTag:Ml,config:td}})()}}class ph{constructor(S,W){this.client=S,this.storage=W}fetch(S){var W=this;return(0,k.Z)(function*(){const oe=(yield W.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return W.attemptFetch(S,oe)})()}attemptFetch(S,{throttleEndTimeMillis:W,backoffCount:oe}){var De=this;return(0,k.Z)(function*(){yield function(D,S){return new Promise((W,oe)=>{const De=Math.max(S-Date.now(),0),Me=setTimeout(W,De);D.addEventListener(()=>{clearTimeout(Me),oe(Xn.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,W);try{const Me=yield De.client.fetch(S);return yield De.storage.deleteThrottleMetadata(),Me}catch(Me){if(!function(D){if(!(D instanceof ie.ZR&&D.customData))return!1;const S=Number(D.customData.httpStatus);return 429===S||500===S||503===S||504===S}(Me))throw Me;const Qe={throttleEndTimeMillis:Date.now()+(0,ie.$s)(oe),backoffCount:oe+1};return yield De.storage.setThrottleMetadata(Qe),De.attemptFetch(S,Qe)}})()}}class gh{constructor(S,W,oe,De,Me){this.app=S,this._client=W,this._storageCache=oe,this._storage=De,this._logger=Me,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Su(D,S){const W=D.target.error||void 0;return Xn.create(S,{originalErrorMessage:W&&W.message})}const go="app_namespace_store";class _h{constructor(S,W,oe,De=function(){return new Promise((D,S)=>{try{const W=indexedDB.open("firebase_remote_config",1);W.onerror=oe=>{S(Su(oe,"storage-open"))},W.onsuccess=oe=>{D(oe.target.result)},W.onupgradeneeded=oe=>{const De=oe.target.result;switch(oe.oldVersion){case 0:De.createObjectStore(go,{keyPath:"compositeKey"})}}}catch(W){S(Xn.create("storage-open",{originalErrorMessage:W}))}})}()){this.appId=S,this.appName=W,this.namespace=oe,this.openDbPromise=De}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var W=this;return(0,k.Z)(function*(){const oe=yield W.openDbPromise;return new Promise((De,Me)=>{const dt=oe.transaction([go],"readonly").objectStore(go),Ot=W.createCompositeKey(S);try{const Ut=dt.get(Ot);Ut.onerror=fn=>{Me(Su(fn,"storage-get"))},Ut.onsuccess=fn=>{const Ht=fn.target.result;De(Ht?Ht.value:void 0)}}catch(Ut){Me(Xn.create("storage-get",{originalErrorMessage:Ut&&Ut.message}))}})})()}set(S,W){var oe=this;return(0,k.Z)(function*(){const De=yield oe.openDbPromise;return new Promise((Me,Qe)=>{const Ot=De.transaction([go],"readwrite").objectStore(go),Ut=oe.createCompositeKey(S);try{const fn=Ot.put({compositeKey:Ut,value:W});fn.onerror=Ht=>{Qe(Su(Ht,"storage-set"))},fn.onsuccess=()=>{Me()}}catch(fn){Qe(Xn.create("storage-set",{originalErrorMessage:fn&&fn.message}))}})})()}delete(S){var W=this;return(0,k.Z)(function*(){const oe=yield W.openDbPromise;return new Promise((De,Me)=>{const dt=oe.transaction([go],"readwrite").objectStore(go),Ot=W.createCompositeKey(S);try{const Ut=dt.delete(Ot);Ut.onerror=fn=>{Me(Su(fn,"storage-delete"))},Ut.onsuccess=()=>{De()}}catch(Ut){Me(Xn.create("storage-delete",{originalErrorMessage:Ut&&Ut.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class Ym{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,k.Z)(function*(){const W=S.storage.getLastFetchStatus(),oe=S.storage.getLastSuccessfulFetchTimestampMillis(),De=S.storage.getActiveConfig(),Me=yield W;Me&&(S.lastFetchStatus=Me);const Qe=yield oe;Qe&&(S.lastSuccessfulFetchTimestampMillis=Qe);const dt=yield De;dt&&(S.activeConfig=dt)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function Km(){return _l.apply(this,arguments)}function _l(){return(_l=(0,k.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch(D){return!1}})).apply(this,arguments)}(0,Q._registerComponent)(new q.wA("remote-config",function(S,{instanceIdentifier:W}){const oe=S.getProvider("app").getImmediate(),De=S.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Xn.create("registration-window");if(!(0,ie.hl)())throw Xn.create("indexed-db-unavailable");const{projectId:Me,apiKey:Qe,appId:dt}=oe.options;if(!Me)throw Xn.create("registration-project-id");if(!Qe)throw Xn.create("registration-api-key");if(!dt)throw Xn.create("registration-app-id");const Ot=new _h(dt,oe.name,W=W||"firebase"),Ut=new Ym(Ot),fn=new ee.Yd(Nn);fn.logLevel=ee.in.ERROR;const Ht=new fs(De,Q.SDK_VERSION,W,Me,Qe,dt),Mr=new ph(Ht,Ot),Rr=new gl(Mr,Ot,Ut,fn),Ml=new gh(oe,Rr,Ut,Ot,fn);return function(D){const S=(0,ie.m9)(D);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(Ml),Ml},"PUBLIC").setMultipleInstances(!0)),(0,Q.registerVersion)(Nn,"0.3.7"),(0,Q.registerVersion)(Nn,"0.3.7","esm2017");const vh="/firebase-messaging-sw.js",xa="/firebase-cloud-messaging-push-scope",Ap="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Au="google.c.a.c_id",js="google.c.a.c_l",yl="google.c.a.ts",ur="google.c.a.e";var Da=(()=>{return(D=Da||(Da={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Da;var D})();function Lr(D){const S=new Uint8Array(D);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function bh(D){const W=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),oe=atob(W),De=new Uint8Array(oe.length);for(let Me=0;Me<oe.length;++Me)De[Me]=oe.charCodeAt(Me);return De}const Ta="fcm_token_details_db",vl="fcm_token_object_Store";function Qm(D){return li.apply(this,arguments)}function li(){return(li=(0,k.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Me=>Me.name).includes(Ta))return null;let S=null;return(yield(0,ie.X3)(Ta,5,function(){var oe=(0,k.Z)(function*(De,Me,Qe,dt){var Ot;if(Me<2||!De.objectStoreNames.contains(vl))return;const Ut=dt.objectStore(vl),fn=yield Ut.index("fcmSenderId").get(D);if(yield Ut.clear(),fn)if(2===Me){const Ht=fn;if(!Ht.auth||!Ht.p256dh||!Ht.endpoint)return;S={token:Ht.fcmToken,createTime:null!==(Ot=Ht.createTime)&&void 0!==Ot?Ot:Date.now(),subscriptionOptions:{auth:Ht.auth,p256dh:Ht.p256dh,endpoint:Ht.endpoint,swScope:Ht.swScope,vapidKey:"string"==typeof Ht.vapidKey?Ht.vapidKey:Lr(Ht.vapidKey)}}}else if(3===Me){const Ht=fn;S={token:Ht.fcmToken,createTime:Ht.createTime,subscriptionOptions:{auth:Lr(Ht.auth),p256dh:Lr(Ht.p256dh),endpoint:Ht.endpoint,swScope:Ht.swScope,vapidKey:Lr(Ht.vapidKey)}}}else if(4===Me){const Ht=fn;S={token:Ht.fcmToken,createTime:Ht.createTime,subscriptionOptions:{auth:Lr(Ht.auth),p256dh:Lr(Ht.p256dh),endpoint:Ht.endpoint,swScope:Ht.swScope,vapidKey:Lr(Ht.vapidKey)}}}});return function(De,Me,Qe,dt){return oe.apply(this,arguments)}}())).close(),yield(0,ie.Lj)(Ta),yield(0,ie.Lj)("fcm_vapid_details_db"),yield(0,ie.Lj)("undefined"),Nu(S)?S:null})).apply(this,arguments)}function Nu(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:S}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const Ri="firebase-messaging-store";let vc=null;function Mu(){return vc||(vc=(0,ie.X3)("firebase-messaging-database",1,(D,S)=>{switch(S){case 0:D.createObjectStore(Ri)}})),vc}function qn(D){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,k.Z)(function*(D){const S=ku(D),oe=yield(yield Mu()).transaction(Ri).objectStore(Ri).get(S);if(oe)return oe;{const De=yield Qm(D.appConfig.senderId);if(De)return yield As(D,De),De}})).apply(this,arguments)}function As(D,S){return gs.apply(this,arguments)}function gs(){return(gs=(0,k.Z)(function*(D,S){const W=ku(D),De=(yield Mu()).transaction(Ri,"readwrite");return yield De.objectStore(Ri).put(S,W),yield De.complete,S})).apply(this,arguments)}function Ln(D){return Go.apply(this,arguments)}function Go(){return(Go=(0,k.Z)(function*(D){const S=ku(D),oe=(yield Mu()).transaction(Ri,"readwrite");yield oe.objectStore(Ri).delete(S),yield oe.complete})).apply(this,arguments)}function ku({appConfig:D}){return D.appId}const Vn=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Pu(D,S){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,k.Z)(function*(D,S){const W=yield xr(D),oe=wc(S),De={method:"POST",headers:W,body:JSON.stringify(oe)};let Me;try{Me=yield(yield fetch(mo(D.appConfig),De)).json()}catch(Qe){throw Vn.create("token-subscribe-failed",{errorInfo:Qe})}if(Me.error)throw Vn.create("token-subscribe-failed",{errorInfo:Me.error.message});if(!Me.token)throw Vn.create("token-subscribe-no-token");return Me.token})).apply(this,arguments)}function Sa(D,S){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,k.Z)(function*(D,S){const W=yield xr(D),oe=wc(S.subscriptionOptions),De={method:"PATCH",headers:W,body:JSON.stringify(oe)};let Me;try{Me=yield(yield fetch(`${mo(D.appConfig)}/${S.token}`,De)).json()}catch(Qe){throw Vn.create("token-update-failed",{errorInfo:Qe})}if(Me.error)throw Vn.create("token-update-failed",{errorInfo:Me.error.message});if(!Me.token)throw Vn.create("token-update-no-token");return Me.token})).apply(this,arguments)}function Eh(D,S){return bl.apply(this,arguments)}function bl(){return(bl=(0,k.Z)(function*(D,S){const oe={method:"DELETE",headers:yield xr(D)};try{const Me=yield(yield fetch(`${mo(D.appConfig)}/${S}`,oe)).json();if(Me.error)throw Vn.create("token-unsubscribe-failed",{errorInfo:Me.error.message})}catch(De){throw Vn.create("token-unsubscribe-failed",{errorInfo:De})}})).apply(this,arguments)}function mo({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function xr(D){return wl.apply(this,arguments)}function wl(){return(wl=(0,k.Z)(function*({appConfig:D,installations:S}){const W=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${W}`})})).apply(this,arguments)}function wc({p256dh:D,auth:S,endpoint:W,vapidKey:oe}){const De={web:{endpoint:W,auth:S,p256dh:D}};return oe!==Ap&&(De.web.applicationPubKey=oe),De}const Ft=6048e5;function Cc(D){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,k.Z)(function*(D){const S=yield sn(D.swRegistration,D.vapidKey),W={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:S.endpoint,auth:Lr(S.getKey("auth")),p256dh:Lr(S.getKey("p256dh"))},oe=yield qn(D.firebaseDependencies);if(oe){if(er(oe.subscriptionOptions,W))return Date.now()>=oe.createTime+Ft?Lu(D,{token:oe.token,createTime:Date.now(),subscriptionOptions:W}):oe.token;try{yield Eh(D.firebaseDependencies,oe.token)}catch(De){console.warn(De)}return _o(D.firebaseDependencies,W)}return _o(D.firebaseDependencies,W)})).apply(this,arguments)}function Ou(D){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,k.Z)(function*(D){const S=yield qn(D.firebaseDependencies);S&&(yield Eh(D.firebaseDependencies,S.token),yield Ln(D.firebaseDependencies));const W=yield D.swRegistration.pushManager.getSubscription();return!W||W.unsubscribe()})).apply(this,arguments)}function Lu(D,S){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,k.Z)(function*(D,S){try{const W=yield Sa(D.firebaseDependencies,S),oe=Object.assign(Object.assign({},S),{token:W,createTime:Date.now()});return yield As(D.firebaseDependencies,oe),W}catch(W){throw yield Ou(D),W}})).apply(this,arguments)}function _o(D,S){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,k.Z)(function*(D,S){const oe={token:yield Pu(D,S),createTime:Date.now(),subscriptionOptions:S};return yield As(D,oe),oe.token})).apply(this,arguments)}function sn(D,S){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,k.Z)(function*(D,S){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:bh(S)})})).apply(this,arguments)}function er(D,S){return S.vapidKey===D.vapidKey&&S.endpoint===D.endpoint&&S.auth===D.auth&&S.p256dh===D.p256dh}function El(D){const S={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function(D,S){if(!S.notification)return;D.notification={};const W=S.notification.title;W&&(D.notification.title=W);const oe=S.notification.body;oe&&(D.notification.body=oe);const De=S.notification.image;De&&(D.notification.image=De)}(S,D),function(D,S){!S.data||(D.data=S.data)}(S,D),function(D,S){if(!S.fcmOptions)return;D.fcmOptions={};const W=S.fcmOptions.link;W&&(D.fcmOptions.link=W);const oe=S.fcmOptions.analytics_label;oe&&(D.fcmOptions.analyticsLabel=oe)}(S,D),S}function xl(D){return"object"==typeof D&&!!D&&Au in D}function Vu(D,S){const W=[];for(let oe=0;oe<D.length;oe++)W.push(D.charAt(oe)),oe<S.length&&W.push(S.charAt(oe));return W.join("")}function yo(D){return Vn.create("missing-app-config-values",{valueName:D})}Vu("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Vu("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class xc{constructor(S,W,oe){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const De=function(D){if(!D||!D.options)throw yo("App Configuration Object");if(!D.name)throw yo("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:W}=D;for(const oe of S)if(!W[oe])throw yo(oe);return{appName:D.name,projectId:W.projectId,apiKey:W.apiKey,appId:W.appId,senderId:W.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:De,installations:W,analyticsProvider:oe}}_delete(){return Promise.resolve()}}function _r(D){return ki.apply(this,arguments)}function ki(){return(ki=(0,k.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(vh,{scope:xa}),D.swRegistration.update().catch(()=>{})}catch(S){throw Vn.create("failed-service-worker-registration",{browserErrorMessage:S.message})}})).apply(this,arguments)}function Bu(D,S){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,k.Z)(function*(D,S){if(!S&&!D.swRegistration&&(yield _r(D)),S||!D.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw Vn.create("invalid-sw-registration");D.swRegistration=S}})).apply(this,arguments)}function Oi(D,S){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,k.Z)(function*(D,S){S?D.vapidKey=S:D.vapidKey||(D.vapidKey=Ap)})).apply(this,arguments)}function Ma(){return(Ma=(0,k.Z)(function*(D,S){if(!navigator)throw Vn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Vn.create("permission-blocked");return yield Oi(D,null==S?void 0:S.vapidKey),yield Bu(D,null==S?void 0:S.serviceWorkerRegistration),Cc(D)})).apply(this,arguments)}function Np(D,S,W){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,k.Z)(function*(D,S,W){const oe=Hu(S);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(oe,{message_id:W[Au],message_name:W[js],message_time:W[yl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Hu(D){switch(D){case Da.NOTIFICATION_CLICKED:return"notification_open";case Da.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function vo(){return(vo=(0,k.Z)(function*(D,S){const W=S.data;if(!W.isFirebaseMessaging)return;D.onMessageHandler&&W.messageType===Da.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(El(W)):D.onMessageHandler.next(El(W)));const oe=W.data;xl(oe)&&"1"===oe[ur]&&(yield Np(D,W.messageType,oe))})).apply(this,arguments)}const Tl="@firebase/messaging";function Gu(){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,k.Z)(function*(){try{yield(0,ie.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,ie.hl)()&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,Q._registerComponent)(new q.wA("messaging",D=>{const S=new xc(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",W=>function(D,S){return vo.apply(this,arguments)}(S,W)),S},"PUBLIC")),(0,Q._registerComponent)(new q.wA("messaging-internal",D=>{const S=D.getProvider("messaging").getImmediate();return{getToken:oe=>function(D,S){return Ma.apply(this,arguments)}(S,oe)}},"PRIVATE")),(0,Q.registerVersion)(Tl,"0.9.12"),(0,Q.registerVersion)(Tl,"0.9.12","esm2017");const Tc="analytics",Zu="firebase_id",Ic="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ws="https://www.googletagmanager.com/gtag/js",Dr=new ee.Yd("@firebase/analytics");function Pa(D){return Promise.all(D.map(S=>S.catch(W=>W)))}function Th(D,S){const W=document.createElement("script");W.src=`${Ws}?l=${D}&id=${S}`,W.async=!0,document.head.appendChild(W)}function qs(D,S,W,oe,De,Me){return bo.apply(this,arguments)}function bo(){return(bo=(0,k.Z)(function*(D,S,W,oe,De,Me){const Qe=oe[De];try{if(Qe)yield S[Qe];else{const Ot=(yield Pa(W)).find(Ut=>Ut.measurementId===De);Ot&&(yield S[Ot.appId])}}catch(dt){Dr.error(dt)}D("config",De,Me)})).apply(this,arguments)}function Jm(D,S,W,oe,De){return wo.apply(this,arguments)}function wo(){return(wo=(0,k.Z)(function*(D,S,W,oe,De){try{let Me=[];if(De&&De.send_to){let Qe=De.send_to;Array.isArray(Qe)||(Qe=[Qe]);const dt=yield Pa(W);for(const Ot of Qe){const Ut=dt.find(Ht=>Ht.measurementId===Ot),fn=Ut&&S[Ut.appId];if(!fn){Me=[];break}Me.push(fn)}}0===Me.length&&(Me=Object.values(S)),yield Promise.all(Me),D("event",oe,De||{})}catch(Me){Dr.error(Me)}})).apply(this,arguments)}function Op(){const D=window.document.getElementsByTagName("script");for(const S of Object.values(D))if(S.src&&S.src.includes(Ws))return S;return null}const Qi=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ms=new class{constructor(S={},W=1e3){this.throttleMetadata=S,this.intervalMillis=W}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,W){this.throttleMetadata[S]=W}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function Yu(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Lp(D){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,k.Z)(function*(D){var S;const{appId:W,apiKey:oe}=D,De={method:"GET",headers:Yu(oe)},Me=Ic.replace("{app-id}",W),Qe=yield fetch(Me,De);if(200!==Qe.status&&304!==Qe.status){let dt="";try{const Ot=yield Qe.json();(null===(S=Ot.error)||void 0===S?void 0:S.message)&&(dt=Ot.error.message)}catch(Ot){}throw Qi.create("config-fetch-failed",{httpStatus:Qe.status,responseMessage:dt})}return Qe.json()})).apply(this,arguments)}function Fa(D){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,k.Z)(function*(D,S=Ms,W){const{appId:oe,apiKey:De,measurementId:Me}=D.options;if(!oe)throw Qi.create("no-app-id");if(!De){if(Me)return{measurementId:Me,appId:oe};throw Qi.create("no-api-key")}const Qe=S.getThrottleMetadata(oe)||{backoffCount:0,throttleEndTimeMillis:Date.now()},dt=new Sh;return setTimeout((0,k.Z)(function*(){dt.abort()}),void 0!==W?W:6e4),Ji({appId:oe,apiKey:De,measurementId:Me},Qe,dt,S)})).apply(this,arguments)}function Ji(D,S,W){return La.apply(this,arguments)}function La(){return(La=(0,k.Z)(function*(D,{throttleEndTimeMillis:S,backoffCount:W},oe,De=Ms){const{appId:Me,measurementId:Qe}=D;try{yield Ac(oe,S)}catch(dt){if(Qe)return Dr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Qe} provided in the "measurementId" field in the local Firebase config. [${dt.message}]`),{appId:Me,measurementId:Qe};throw dt}try{const dt=yield Lp(D);return De.deleteThrottleMetadata(Me),dt}catch(dt){if(!wv(dt)){if(De.deleteThrottleMetadata(Me),Qe)return Dr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Qe} provided in the "measurementId" field in the local Firebase config. [${dt.message}]`),{appId:Me,measurementId:Qe};throw dt}const Ot=503===Number(dt.customData.httpStatus)?(0,ie.$s)(W,De.intervalMillis,30):(0,ie.$s)(W,De.intervalMillis),Ut={throttleEndTimeMillis:Date.now()+Ot,backoffCount:W+1};return De.setThrottleMetadata(Me,Ut),Dr.debug(`Calling attemptFetch again in ${Ot} millis`),Ji(D,Ut,oe,De)}})).apply(this,arguments)}function Ac(D,S){return new Promise((W,oe)=>{const De=Math.max(S-Date.now(),0),Me=setTimeout(W,De);D.addEventListener(()=>{clearTimeout(Me),oe(Qi.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function wv(D){if(!(D instanceof ie.ZR&&D.customData))return!1;const S=Number(D.customData.httpStatus);return 429===S||500===S||503===S||504===S}class Sh{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}function Vp(){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,k.Z)(function*(){if(!(0,ie.hl)())return Dr.warn(Qi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(D){return Dr.warn(Qi.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function Zo(){return(Zo=(0,k.Z)(function*(D,S,W,oe,De,Me,Qe){var dt;const Ot=Fa(D);Ot.then(Rr=>{W[Rr.measurementId]=Rr.appId,D.options.measurementId&&Rr.measurementId!==D.options.measurementId&&Dr.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Rr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Rr=>Dr.error(Rr)),S.push(Ot);const Ut=Vp().then(Rr=>{if(Rr)return oe.getId()}),[fn,Ht]=yield Promise.all([Ot,Ut]);Op()||Th(Me,fn.measurementId),De("js",new Date);const Mr=null!==(dt=null==Qe?void 0:Qe.config)&&void 0!==dt?dt:{};return Mr.origin="firebase",Mr.update=!0,null!=Ht&&(Mr[Zu]=Ht),De("config",fn.measurementId,Mr),fn.measurementId})).apply(this,arguments)}class Al{constructor(S){this.app=S}_delete(){return delete un[this.app.options.appId],Promise.resolve()}}let un={},xt=[];const Tn={};let zo,Rs,Nl="dataLayer",gr=!1;function Co(D,S,W){!function(){const D=[];if((0,ie.ru)()&&D.push("This is a browser extension environment."),(0,ie.zI)()||D.push("Cookies are not available."),D.length>0){const S=D.map((oe,De)=>`(${De+1}) ${oe}`).join(" "),W=Qi.create("invalid-analytics-context",{errorInfo:S});Dr.warn(W.message)}}();const oe=D.options.appId;if(!oe)throw Qi.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw Qi.create("no-api-key");Dr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=un[oe])throw Qi.create("already-exists",{id:oe});if(!gr){!function(D){let S=[];Array.isArray(window[D])?S=window[D]:window[D]=S}(Nl);const{wrappedGtag:Me,gtagCore:Qe}=function(D,S,W,oe,De){let Me=function(...Qe){window[oe].push(arguments)};return window[De]&&"function"==typeof window[De]&&(Me=window[De]),window[De]=function(D,S,W,oe){function Me(){return(Me=(0,k.Z)(function*(Qe,dt,Ot){try{"event"===Qe?yield Jm(D,S,W,dt,Ot):"config"===Qe?yield qs(D,S,W,oe,dt,Ot):D("set",dt)}catch(Ut){Dr.error(Ut)}})).apply(this,arguments)}return function(Qe,dt,Ot){return Me.apply(this,arguments)}}(Me,D,S,W),{gtagCore:Me,wrappedGtag:window[De]}}(un,xt,Tn,Nl,"gtag");Rs=Me,zo=Qe,gr=!0}return un[oe]=function(D,S,W,oe,De,Me,Qe){return Zo.apply(this,arguments)}(D,xt,Tn,S,zo,Nl,W),new Al(D)}function dr(){return(dr=(0,k.Z)(function*(D,S,W,oe,De){if(De&&De.global)D("event",W,oe);else{const Me=yield S;D("event",W,Object.assign(Object.assign({},oe),{send_to:Me}))}})).apply(this,arguments)}function ui(){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,k.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch(D){return!1}})).apply(this,arguments)}const nr="@firebase/analytics";(0,Q._registerComponent)(new q.wA(Tc,(S,{options:W})=>Co(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),W),"PUBLIC")),(0,Q._registerComponent)(new q.wA("analytics-internal",function(S){try{const W=S.getProvider(Tc).getImmediate();return{logEvent:(oe,De,Me)=>function(D,S,W,oe){D=(0,ie.m9)(D),function(D,S,W,oe,De){return dr.apply(this,arguments)}(Rs,un[D.app.options.appId],S,W,oe).catch(De=>Dr.error(De))}(W,oe,De,Me)}}catch(W){throw Qi.create("interop-component-reg-failed",{reason:W})}},"PRIVATE")),(0,Q.registerVersion)(nr,"0.7.8"),(0,Q.registerVersion)(nr,"0.7.8","esm2017");var _i=O(7771),Ev=O(3637),Hp=O(8307),Ko=O(9746),Ba=O(2639);const e0=new a.GfV("7.3.0"),kc="__angularfire_symbol__analyticsIsSupportedValue",ar="__angularfire_symbol__analyticsIsSupported",Ju="__angularfire_symbol__remoteConfigIsSupportedValue",Do="__angularfire_symbol__remoteConfigIsSupported",To="__angularfire_symbol__messagingIsSupportedValue",yr="__angularfire_symbol__messagingIsSupported";function yi(D,S,W){if(S){if(1===S.length)return S[0];const Me=S.filter(Qe=>Qe.app===W);if(1===Me.length)return Me[0]}return W.container.getProvider(D).getImmediate({optional:!0})}globalThis[ar]||(globalThis[ar]=ui().then(D=>globalThis[kc]=D).catch(()=>globalThis[kc]=!1)),globalThis[yr]||(globalThis[yr]=Gu().then(D=>globalThis[To]=D).catch(()=>globalThis[To]=!1)),globalThis[Do]||(globalThis[Do]=Km().then(D=>globalThis[Ju]=D).catch(()=>globalThis[Ju]=!1));const Ps=(D,S)=>{const W=S?[S]:(0,R.C6)(),oe=[];return W.forEach(De=>{De.container.getProvider(D).instances.forEach(Qe=>{oe.includes(Qe)||oe.push(Qe)})}),oe};function Os(){}class Io{constructor(S,W=_i.N){this.zone=S,this.delegate=W}now(){return this.delegate.now()}schedule(S,W,oe){const De=this.zone;return this.delegate.schedule(function(Qe){De.runGuarded(()=>{S.apply(this,[Qe])})},W,oe)}}class So{constructor(S){this.zone=S,this.task=null}call(S,W){const oe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Os,{},Os,Os)),W.pipe((0,Hp.b)({next:oe,complete:oe,error:oe})).subscribe(S).add(oe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let kh=(()=>{class D{constructor(W){this.ngZone=W,this.outsideAngular=W.runOutsideAngular(()=>new Io(Zone.current)),this.insideAngular=W.run(()=>new Io(Zone.current,Ev.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(W){return new(W||D)(a.LFG(a.R0b))},D.\u0275prov=a.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Ys(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function jp(D){return D.pipe((0,Ko.QV)(Ys().outsideAngular))}function Ir(D){return Ys(),function(D){return function(W){return(W=W.lift(new So(D.ngZone))).pipe((0,Ba.R)(D.outsideAngular),(0,Ko.QV)(D.insideAngular))}}(Ys())(D)}},982:(Ve,me,O)=>{"use strict";O.d(me,{$:()=>Uu,A:()=>Fe,E:()=>Tu,G:()=>ml,I:()=>Lr,K:()=>Vt,L:()=>As,M:()=>ku,N:()=>bc,P:()=>Qe,Q:()=>Vn,R:()=>Ua,T:()=>Go,U:()=>Vr,V:()=>Eh,W:()=>wc,X:()=>ci,Y:()=>xl,Z:()=>xh,_:()=>ki,a:()=>gr,a0:()=>Np,a1:()=>Hu,a2:()=>vo,a3:()=>$u,a4:()=>Dh,a5:()=>Gu,a6:()=>Wu,a7:()=>qu,a8:()=>Mp,a9:()=>vv,aA:()=>Wa,aB:()=>qp,aC:()=>Wn,aG:()=>Co,aJ:()=>Ns,aa:()=>Tc,ab:()=>kp,ae:()=>Dr,af:()=>Th,ag:()=>Pp,aj:()=>Fu,ak:()=>bv,am:()=>Ac,an:()=>Zo,ao:()=>Fr,ap:()=>$n,aq:()=>jo,ar:()=>ai,as:()=>an,at:()=>d0,au:()=>Vc,av:()=>In,aw:()=>Ke,ax:()=>hn,ay:()=>hs,az:()=>Tv,b:()=>zo,c:()=>td,d:()=>Qo,e:()=>$a,f:()=>Ga,g:()=>nd,h:()=>xv,i:()=>Hp,j:()=>Dv,k:()=>Ls,l:()=>Ha,m:()=>h0,o:()=>ht,r:()=>D,s:()=>Ir,u:()=>De,z:()=>Jt});var a=O(8239),R=O(3854),k=O(8026);function ee(w,g){var y={};for(var E in w)Object.prototype.hasOwnProperty.call(w,E)&&g.indexOf(E)<0&&(y[E]=w[E]);if(null!=w&&"function"==typeof Object.getOwnPropertySymbols){var F=0;for(E=Object.getOwnPropertySymbols(w);F<E.length;F++)g.indexOf(E[F])<0&&Object.prototype.propertyIsEnumerable.call(w,E[F])&&(y[E[F]]=w[E[F]])}return y}var xe=O(5422),Ie=O(3910);const ht={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Fe={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Jt=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Rt=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},vt=new R.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Xt=new xe.Yd("@firebase/auth");function Wt(w,...g){Xt.logLevel<=xe.in.ERROR&&Xt.error(`Auth (${k.SDK_VERSION}): ${w}`,...g)}function an(w,...g){throw Qn(w,...g)}function In(w,...g){return Qn(w,...g)}function rr(w,g,y){const E=Object.assign(Object.assign({},Rt()),{[g]:y});return new R.LL("auth","Firebase",E).create(g,{appName:w.name})}function Rn(w,g,y){if(!(g instanceof y))throw y.name!==g.constructor.name&&an(w,"argument-error"),rr(w,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Qn(w,...g){if("string"!=typeof w){const y=g[0],E=[...g.slice(1)];return E[0]&&(E[0].appName=w.name),w._errorFactory.create(y,...E)}return vt.create(w,...g)}function Ke(w,g,...y){if(!w)throw Qn(g,...y)}function Jn(w){const g="INTERNAL ASSERTION FAILED: "+w;throw Wt(g),new Error(g)}function $n(w,g){w||Jn(g)}const pt=new Map;function hn(w){$n(w instanceof Function,"Expected a class definition");let g=pt.get(w);return g?($n(g instanceof w,"Instance stored in cache mismatched with class"),g):(g=new w,pt.set(w,g),g)}function ir(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function fr(){return"http:"===cr()||"https:"===cr()}function cr(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class Cn{constructor(g,y){this.shortDelay=g,this.longDelay=y,$n(y>g,"Short delay should be less than long delay!"),this.isMobile=(0,R.uI)()||(0,R.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(fr()||(0,R.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function it(w,g){$n(w.emulator,"Emulator should always be set here");const{url:y}=w.emulator;return g?`${y}${g.startsWith("/")?g.slice(1):g}`:y}class Dt{static initialize(g,y,E){this.fetchImpl=g,y&&(this.headersImpl=y),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Jn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Jn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Jn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Nr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Zr=new Cn(3e4,6e4);function gn(w,g){return w.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:w.tenantId}):g}function Nt(w,g,y,E){return pr.apply(this,arguments)}function pr(){return(pr=(0,a.Z)(function*(w,g,y,E,F={}){return sr(w,F,(0,a.Z)(function*(){let j={},ye={};E&&("GET"===g?ye=E:j={body:JSON.stringify(E)});const Ge=(0,R.xO)(Object.assign({key:w.config.apiKey},ye)).slice(1),ft=yield w._getAdditionalHeaders();return ft["Content-Type"]="application/json",w.languageCode&&(ft["X-Firebase-Locale"]=w.languageCode),Dt.fetch()(rt(w,w.config.apiHost,y,Ge),Object.assign({method:g,headers:ft,referrerPolicy:"no-referrer"},j))}))})).apply(this,arguments)}function sr(w,g,y){return cn.apply(this,arguments)}function cn(){return(cn=(0,a.Z)(function*(w,g,y){w._canInitEmulator=!1;const E=Object.assign(Object.assign({},Nr),g);try{const F=new qe(w),j=yield Promise.race([y(),F.promise]);F.clearNetworkTimeout();const ye=yield j.json();if("needConfirmation"in ye)throw mt(w,"account-exists-with-different-credential",ye);if(j.ok&&!("errorMessage"in ye))return ye;{const Ge=j.ok?ye.errorMessage:ye.error.message,[ft,nt]=Ge.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ft)throw mt(w,"credential-already-in-use",ye);if("EMAIL_EXISTS"===ft)throw mt(w,"email-already-in-use",ye);const Tt=E[ft]||ft.toLowerCase().replace(/[_\s]+/g,"-");if(nt)throw rr(w,Tt,nt);an(w,Tt)}}catch(F){if(F instanceof R.ZR)throw F;an(w,"network-request-failed")}})).apply(this,arguments)}function St(w,g,y,E){return qt.apply(this,arguments)}function qt(){return(qt=(0,a.Z)(function*(w,g,y,E,F={}){const j=yield Nt(w,g,y,E,F);return"mfaPendingCredential"in j&&an(w,"multi-factor-auth-required",{_serverResponse:j}),j})).apply(this,arguments)}function rt(w,g,y,E){const F=`${g}${y}?${E}`;return w.config.emulator?it(w.config,F):`${w.config.apiScheme}://${F}`}class qe{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((y,E)=>{this.timer=setTimeout(()=>E(In(this.auth,"network-request-failed")),Zr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function mt(w,g,y){const E={appName:w.name};y.email&&(E.email=y.email),y.phoneNumber&&(E.phoneNumber=y.phoneNumber);const F=In(w,g,E);return F.customData._tokenResponse=y,F}function Lt(){return(Lt=(0,a.Z)(function*(w,g){return Nt(w,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function en(w,g){return he.apply(this,arguments)}function he(){return(he=(0,a.Z)(function*(w,g){return Nt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ae(w,g){return ge.apply(this,arguments)}function ge(){return(ge=(0,a.Z)(function*(w,g){return Nt(w,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Le(w){if(w)try{const g=new Date(Number(w));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function se(){return(se=(0,a.Z)(function*(w,g=!1){const y=(0,R.m9)(w),E=yield y.getIdToken(g),F=Xe(E);Ke(F&&F.exp&&F.auth_time&&F.iat,y.auth,"internal-error");const j="object"==typeof F.firebase?F.firebase:void 0,ye=null==j?void 0:j.sign_in_provider;return{claims:F,token:E,authTime:Le(Ne(F.auth_time)),issuedAtTime:Le(Ne(F.iat)),expirationTime:Le(Ne(F.exp)),signInProvider:ye||null,signInSecondFactor:(null==j?void 0:j.sign_in_second_factor)||null}})).apply(this,arguments)}function Ne(w){return 1e3*Number(w)}function Xe(w){const[g,y,E]=w.split(".");if(void 0===g||void 0===y||void 0===E)return Wt("JWT malformed, contained fewer than 3 sections"),null;try{const F=(0,R.tV)(y);return F?JSON.parse(F):(Wt("Failed to decode base64 JWT payload"),null)}catch(F){return Wt("Caught error parsing JWT payload as JSON",F),null}}function kt(w,g){return at.apply(this,arguments)}function at(){return(at=(0,a.Z)(function*(w,g,y=!1){if(y)return g;try{return yield g}catch(E){throw E instanceof R.ZR&&nn(E)&&w.auth.currentUser===w&&(yield w.auth.signOut()),E}})).apply(this,arguments)}function nn({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class jn{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var y;if(g){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const F=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,F)}}schedule(g=!1){var y=this;if(!this.isRunning)return;const E=this.getInterval(g);this.timerId=setTimeout((0,a.Z)(function*(){yield y.iteration()}),E)}iteration(){var g=this;return(0,a.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y.code&&g.schedule(!0))}g.schedule()})()}}class Fn{constructor(g,y){this.createdAt=g,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=Le(this.lastLoginAt),this.creationTime=Le(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function mn(w){return or.apply(this,arguments)}function or(){return(or=(0,a.Z)(function*(w){var g;const y=w.auth,E=yield w.getIdToken(),F=yield kt(w,ae(y,{idToken:E}));Ke(null==F?void 0:F.users.length,y,"internal-error");const j=F.users[0];w._notifyReloadListener(j);const ye=(null===(g=j.providerUserInfo)||void 0===g?void 0:g.length)?Ni(j.providerUserInfo):[],Ge=Gn(w.providerData,ye),Tt=!!w.isAnonymous&&!(w.email&&j.passwordHash||(null==Ge?void 0:Ge.length)),Sn={uid:j.localId,displayName:j.displayName||null,photoURL:j.photoUrl||null,email:j.email||null,emailVerified:j.emailVerified||!1,phoneNumber:j.phoneNumber||null,tenantId:j.tenantId||null,providerData:Ge,metadata:new Fn(j.createdAt,j.lastLoginAt),isAnonymous:Tt};Object.assign(w,Sn)})).apply(this,arguments)}function Zt(){return(Zt=(0,a.Z)(function*(w){const g=(0,R.m9)(w);yield mn(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Gn(w,g){return[...w.filter(E=>!g.some(F=>F.providerId===E.providerId)),...g]}function Ni(w){return w.map(g=>{var{providerId:y}=g,E=ee(g,["providerId"]);return{providerId:y,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Er(){return(Er=(0,a.Z)(function*(w,g){const y=yield sr(w,{},(0,a.Z)(function*(){const E=(0,R.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:F,apiKey:j}=w.config,ye=rt(w,F,"/v1/token",`key=${j}`),Ge=yield w._getAdditionalHeaders();return Ge["Content-Type"]="application/x-www-form-urlencoded",Dt.fetch()(ye,{method:"POST",headers:Ge,body:E})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class Mi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){Ke(g.idToken,"internal-error"),Ke(void 0!==g.idToken,"internal-error"),Ke(void 0!==g.refreshToken,"internal-error");const y="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function(w){const g=Xe(w);return Ke(g,"internal-error"),Ke(void 0!==g.exp,"internal-error"),Ke(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,y)}getToken(g,y=!1){var E=this;return(0,a.Z)(function*(){return Ke(!E.accessToken||E.refreshToken,g,"user-token-expired"),y||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(g,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,y){var E=this;return(0,a.Z)(function*(){const{accessToken:F,refreshToken:j,expiresIn:ye}=yield function(w,g){return Er.apply(this,arguments)}(g,y);E.updateTokensAndExpiration(F,j,Number(ye))})()}updateTokensAndExpiration(g,y,E){this.refreshToken=y||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(g,y){const{refreshToken:E,accessToken:F,expirationTime:j}=y,ye=new Mi;return E&&(Ke("string"==typeof E,"internal-error",{appName:g}),ye.refreshToken=E),F&&(Ke("string"==typeof F,"internal-error",{appName:g}),ye.accessToken=F),j&&(Ke("number"==typeof j,"internal-error",{appName:g}),ye.expirationTime=j),ye}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Mi,this.toJSON())}_performRefresh(){return Jn("not implemented")}}function Nn(w,g){Ke("string"==typeof w||void 0===w,"internal-error",{appName:g})}class Yi{constructor(g){var{uid:y,auth:E,stsTokenManager:F}=g,j=ee(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=E,this.stsTokenManager=F,this.accessToken=F.accessToken,this.displayName=j.displayName||null,this.email=j.email||null,this.emailVerified=j.emailVerified||!1,this.phoneNumber=j.phoneNumber||null,this.photoURL=j.photoURL||null,this.isAnonymous=j.isAnonymous||!1,this.tenantId=j.tenantId||null,this.providerData=j.providerData?[...j.providerData]:[],this.metadata=new Fn(j.createdAt||void 0,j.lastLoginAt||void 0)}getIdToken(g){var y=this;return(0,a.Z)(function*(){const E=yield kt(y,y.stsTokenManager.getToken(y.auth,g));return Ke(E,y.auth,"internal-error"),y.accessToken!==E&&(y.accessToken=E,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),E})()}getIdTokenResult(g){return function(w){return se.apply(this,arguments)}(this,g)}reload(){return function(w){return Zt.apply(this,arguments)}(this)}_assign(g){this!==g&&(Ke(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(y=>Object.assign({},y)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new Yi(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){Ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,y=!1){var E=this;return(0,a.Z)(function*(){let F=!1;g.idToken&&g.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(g),F=!0),y&&(yield mn(E)),yield E.auth._persistUserIfCurrent(E),F&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var g=this;return(0,a.Z)(function*(){const y=yield g.getIdToken();return yield kt(g,function(w,g){return Lt.apply(this,arguments)}(g.auth,{idToken:y})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,y){var E,F,j,ye,Ge,ft,nt,Tt;const Sn=null!==(E=y.displayName)&&void 0!==E?E:void 0,Zn=null!==(F=y.email)&&void 0!==F?F:void 0,wn=null!==(j=y.phoneNumber)&&void 0!==j?j:void 0,na=null!==(ye=y.photoURL)&&void 0!==ye?ye:void 0,ud=null!==(Ge=y.tenantId)&&void 0!==Ge?Ge:void 0,dd=null!==(ft=y._redirectEventId)&&void 0!==ft?ft:void 0,Jp=null!==(nt=y.createdAt)&&void 0!==nt?nt:void 0,Xp=null!==(Tt=y.lastLoginAt)&&void 0!==Tt?Tt:void 0,{uid:eg,emailVerified:Hh,isAnonymous:ra,providerData:tg,stsTokenManager:Ll}=y;Ke(eg&&Ll,g,"internal-error");const lE=Mi.fromJSON(this.name,Ll);Ke("string"==typeof eg,g,"internal-error"),Nn(Sn,g.name),Nn(Zn,g.name),Ke("boolean"==typeof Hh,g,"internal-error"),Ke("boolean"==typeof ra,g,"internal-error"),Nn(wn,g.name),Nn(na,g.name),Nn(ud,g.name),Nn(dd,g.name),Nn(Jp,g.name),Nn(Xp,g.name);const Vl=new Yi({uid:eg,auth:g,email:Zn,emailVerified:Hh,displayName:Sn,isAnonymous:ra,photoURL:na,phoneNumber:wn,tenantId:ud,stsTokenManager:lE,createdAt:Jp,lastLoginAt:Xp});return tg&&Array.isArray(tg)&&(Vl.providerData=tg.map(Li=>Object.assign({},Li))),dd&&(Vl._redirectEventId=dd),Vl}static _fromIdTokenResponse(g,y,E=!1){return(0,a.Z)(function*(){const F=new Mi;F.updateFromServerResponse(y);const j=new Yi({uid:y.localId,auth:g,stsTokenManager:F,isAnonymous:E});return yield mn(j),j})()}}const Vt=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,a.Z)(function*(){return!0})()}_set(y,E){var F=this;return(0,a.Z)(function*(){F.storage[y]=E})()}_get(y){var E=this;return(0,a.Z)(function*(){const F=E.storage[y];return void 0===F?null:F})()}_remove(y){var E=this;return(0,a.Z)(function*(){delete E.storage[y]})()}_addListener(y,E){}_removeListener(y,E){}}return w.type="NONE",w})();function hs(w,g,y){return`firebase:${w}:${g}:${y}`}class Xn{constructor(g,y,E){this.persistence=g,this.auth=y,this.userKey=E;const{config:F,name:j}=this.auth;this.fullUserKey=hs(this.userKey,F.apiKey,j),this.fullPersistenceKey=hs("persistence",F.apiKey,j),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,a.Z)(function*(){const y=yield g.persistence._get(g.fullUserKey);return y?Yi._fromJSON(g.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var y=this;return(0,a.Z)(function*(){if(y.persistence===g)return;const E=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=g,E?y.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,y,E="authUser"){return(0,a.Z)(function*(){if(!y.length)return new Xn(hn(Vt),g,E);const F=(yield Promise.all(y.map(function(){var nt=(0,a.Z)(function*(Tt){if(yield Tt._isAvailable())return Tt});return function(Tt){return nt.apply(this,arguments)}}()))).filter(nt=>nt);let j=F[0]||hn(Vt);const ye=hs(E,g.config.apiKey,g.name);let Ge=null;for(const nt of y)try{const Tt=yield nt._get(ye);if(Tt){const Sn=Yi._fromJSON(g,Tt);nt!==j&&(Ge=Sn),j=nt;break}}catch(Tt){}const ft=F.filter(nt=>nt._shouldAllowMigration);return j._shouldAllowMigration&&ft.length?(j=ft[0],Ge&&(yield j._set(ye,Ge.toJSON())),yield Promise.all(y.map(function(){var nt=(0,a.Z)(function*(Tt){if(Tt!==j)try{yield Tt._remove(ye)}catch(Sn){}});return function(Tt){return nt.apply(this,arguments)}}())),new Xn(j,g,E)):new Xn(j,g,E)})()}}function pc(w){const g=w.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if($o(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Ca(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(rn(g))return"Blackberry";if(xu(g))return"Webos";if(zr(g))return"Safari";if((g.includes("chrome/")||ho(g))&&!g.includes("edge/"))return"Chrome";if(ai(g))return"Android";{const E=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function Ca(w=(0,R.z$)()){return/firefox\//i.test(w)}function zr(w=(0,R.z$)()){const g=w.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function ho(w=(0,R.z$)()){return/crios\//i.test(w)}function $o(w=(0,R.z$)()){return/iemobile/i.test(w)}function ai(w=(0,R.z$)()){return/android/i.test(w)}function rn(w=(0,R.z$)()){return/blackberry/i.test(w)}function xu(w=(0,R.z$)()){return/webos/i.test(w)}function jo(w=(0,R.z$)()){return/iphone|ipad|ipod/i.test(w)}function Fr(w=(0,R.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function Ea(w=(0,R.z$)()){return jo(w)||ai(w)||xu(w)||rn(w)||/windows phone/i.test(w)||$o(w)}function ei(w,g=[]){let y;switch(w){case"Browser":y=pc((0,R.z$)());break;case"Worker":y=`${pc((0,R.z$)())}-${w}`;break;default:y=w}const E=g.length?g.join(","):"FirebaseCore-web";return`${y}/JsCore/${k.SDK_VERSION}/${E}`}class Zm{constructor(g,y,E){this.app=g,this.heartbeatServiceProvider=y,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ki(this),this.idTokenSubscription=new Ki(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(g,y){var E=this;return y&&(this._popupRedirectResolver=hn(y)),this._initializationPromise=this.queue((0,a.Z)(function*(){var F,j;if(!E._deleted&&(E.persistenceManager=yield Xn.create(E,g),!E._deleted)){if(null===(F=E._popupRedirectResolver)||void 0===F?void 0:F._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(ye){}yield E.initializeCurrentUser(y),E.lastNotifiedUid=(null===(j=E.currentUser)||void 0===j?void 0:j.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,a.Z)(function*(){if(g._deleted)return;const y=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||y){if(g.currentUser&&y&&g.currentUser.uid===y.uid)return g._currentUser._assign(y),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(y)}})()}initializeCurrentUser(g){var y=this;return(0,a.Z)(function*(){var E;let F=yield y.assertedPersistence.getCurrentUser();if(g&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const j=null===(E=y.redirectUser)||void 0===E?void 0:E._redirectEventId,ye=null==F?void 0:F._redirectEventId,Ge=yield y.tryRedirectSignIn(g);(!j||j===ye)&&(null==Ge?void 0:Ge.user)&&(F=Ge.user)}return F?F._redirectEventId?(Ke(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===F._redirectEventId?y.directlySetCurrentUser(F):y.reloadAndSetCurrentUserOrClear(F)):y.reloadAndSetCurrentUserOrClear(F):y.directlySetCurrentUser(null)})()}tryRedirectSignIn(g){var y=this;return(0,a.Z)(function*(){let E=null;try{E=yield y._popupRedirectResolver._completeRedirectFn(y,g,!0)}catch(F){yield y._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(g){var y=this;return(0,a.Z)(function*(){try{yield mn(g)}catch(E){if("auth/network-request-failed"!==E.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var g=this;return(0,a.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var y=this;return(0,a.Z)(function*(){const E=g?(0,R.m9)(g):null;return E&&Ke(E.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(E&&E._clone(y))})()}_updateCurrentUser(g){var y=this;return(0,a.Z)(function*(){if(!y._deleted)return g&&Ke(y.tenantId===g.tenantId,y,"tenant-id-mismatch"),y.queue((0,a.Z)(function*(){yield y.directlySetCurrentUser(g),y.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,a.Z)(function*(){return(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null)})()}setPersistence(g){var y=this;return this.queue((0,a.Z)(function*(){yield y.assertedPersistence.setPersistence(hn(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new R.LL("auth","Firebase",g())}onAuthStateChanged(g,y,E){return this.registerStateListener(this.authStateSubscription,g,y,E)}onIdTokenChanged(g,y,E){return this.registerStateListener(this.idTokenSubscription,g,y,E)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,y){var E=this;return(0,a.Z)(function*(){const F=yield E.getOrInitRedirectPersistenceManager(y);return null===g?F.removeCurrentUser():F.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var y=this;return(0,a.Z)(function*(){if(!y.redirectPersistenceManager){const E=g&&hn(g)||y._popupRedirectResolver;Ke(E,y,"argument-error"),y.redirectPersistenceManager=yield Xn.create(y,[hn(E._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(g){var y=this;return(0,a.Z)(function*(){var E,F;return y._isInitialized&&(yield y.queue((0,a.Z)(function*(){}))),(null===(E=y._currentUser)||void 0===E?void 0:E._redirectEventId)===g?y._currentUser:(null===(F=y.redirectUser)||void 0===F?void 0:F._redirectEventId)===g?y.redirectUser:null})()}_persistUserIfCurrent(g){var y=this;return(0,a.Z)(function*(){if(g===y.currentUser)return y.queue((0,a.Z)(function*(){return y.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(y=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,y,E,F){if(this._deleted)return()=>{};const j="function"==typeof y?y:y.next.bind(y),ye=this._isInitialized?Promise.resolve():this._initializationPromise;return Ke(ye,this,"internal-error"),ye.then(()=>j(this.currentUser)),"function"==typeof y?g.addObserver(y,E,F):g.addObserver(y)}directlySetCurrentUser(g){var y=this;return(0,a.Z)(function*(){y.currentUser&&y.currentUser!==g&&(y._currentUser._stopProactiveRefresh(),g&&y.isProactiveRefreshEnabled&&g._startProactiveRefresh()),y.currentUser=g,g?yield y.assertedPersistence.setCurrentUser(g):yield y.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return Ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=ei(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,a.Z)(function*(){var y;const E={"X-Client-Version":g.clientVersion};g.app.options.appId&&(E["X-Firebase-gmpid"]=g.app.options.appId);const F=yield null===(y=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return F&&(E["X-Firebase-Client"]=F),E})()}}function Wn(w){return(0,R.m9)(w)}class Ki{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,R.ne)(y=>this.observer=y)}get next(){return Ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Tu(w,g,y){const E=Wn(w);Ke(E._canInitEmulator,E,"emulator-config-failed"),Ke(/^https?:\/\//.test(g),E,"invalid-emulator-scheme");const F=!!(null==y?void 0:y.disableWarnings),j=gl(g),{host:ye,port:Ge}=function(w){const g=gl(w),y=/(\/\/)?([^?#/]+)/.exec(w.substr(g.length));if(!y)return{host:"",port:null};const E=y[2].split("@").pop()||"",F=/^(\[[^\]]+\])(:|$)/.exec(E);if(F){const j=F[1];return{host:j,port:fs(E.substr(j.length+1))}}{const[j,ye]=E.split(":");return{host:j,port:fs(ye)}}}(g);E.config.emulator={url:`${j}//${ye}${null===Ge?"":`:${Ge}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:ye,port:Ge,protocol:j.replace(":",""),options:Object.freeze({disableWarnings:F})}),F||function(){function w(){const g=document.createElement("p"),y=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function gl(w){const g=w.indexOf(":");return g<0?"":w.substr(0,g+1)}function fs(w){if(!w)return null;const g=Number(w);return isNaN(g)?null:g}class ml{constructor(g,y){this.providerId=g,this.signInMethod=y}toJSON(){return Jn("not implemented")}_getIdTokenResponse(g){return Jn("not implemented")}_linkToIdToken(g,y){return Jn("not implemented")}_getReauthenticationResolver(g){return Jn("not implemented")}}function ph(w,g){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,a.Z)(function*(w,g){return Nt(w,"POST","/v1/accounts:resetPassword",gn(w,g))})).apply(this,arguments)}function Sp(w,g){return gh.apply(this,arguments)}function gh(){return(gh=(0,a.Z)(function*(w,g){return Nt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Su(w,g){return go.apply(this,arguments)}function go(){return(go=(0,a.Z)(function*(w,g){return Nt(w,"POST","/v1/accounts:update",gn(w,g))})).apply(this,arguments)}function mh(){return(mh=(0,a.Z)(function*(w,g){return St(w,"POST","/v1/accounts:signInWithPassword",gn(w,g))})).apply(this,arguments)}function gc(w,g){return _h.apply(this,arguments)}function _h(){return(_h=(0,a.Z)(function*(w,g){return Nt(w,"POST","/v1/accounts:sendOobCode",gn(w,g))})).apply(this,arguments)}function Ym(w,g){return yh.apply(this,arguments)}function yh(){return(yh=(0,a.Z)(function*(w,g){return gc(w,g)})).apply(this,arguments)}function yv(w,g){return mc.apply(this,arguments)}function mc(){return(mc=(0,a.Z)(function*(w,g){return gc(w,g)})).apply(this,arguments)}function Km(w,g){return _l.apply(this,arguments)}function _l(){return(_l=(0,a.Z)(function*(w,g){return gc(w,g)})).apply(this,arguments)}function vh(w,g){return xa.apply(this,arguments)}function xa(){return(xa=(0,a.Z)(function*(w,g){return gc(w,g)})).apply(this,arguments)}function _c(){return(_c=(0,a.Z)(function*(w,g){return St(w,"POST","/v1/accounts:signInWithEmailLink",gn(w,g))})).apply(this,arguments)}function js(){return(js=(0,a.Z)(function*(w,g){return St(w,"POST","/v1/accounts:signInWithEmailLink",gn(w,g))})).apply(this,arguments)}class yl extends ml{constructor(g,y,E,F=null){super("password",E),this._email=g,this._password=y,this._tenantId=F}static _fromEmailAndPassword(g,y){return new yl(g,y,"password")}static _fromEmailAndCode(g,y,E=null){return new yl(g,y,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g;if((null==y?void 0:y.email)&&(null==y?void 0:y.password)){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(g){var y=this;return(0,a.Z)(function*(){switch(y.signInMethod){case"password":return function(w,g){return mh.apply(this,arguments)}(g,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function(w,g){return _c.apply(this,arguments)}(g,{email:y._email,oobCode:y._password});default:an(g,"internal-error")}})()}_linkToIdToken(g,y){var E=this;return(0,a.Z)(function*(){switch(E.signInMethod){case"password":return Sp(g,{idToken:y,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function(w,g){return js.apply(this,arguments)}(g,{idToken:y,email:E._email,oobCode:E._password});default:an(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function ur(w,g){return yc.apply(this,arguments)}function yc(){return(yc=(0,a.Z)(function*(w,g){return St(w,"POST","/v1/accounts:signInWithIdp",gn(w,g))})).apply(this,arguments)}class Lr extends ml{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const y=new Lr(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(y.idToken=g.idToken),g.accessToken&&(y.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(y.nonce=g.nonce),g.pendingToken&&(y.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(y.accessToken=g.oauthToken,y.secret=g.oauthTokenSecret):an("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:F}=y,j=ee(y,["providerId","signInMethod"]);if(!E||!F)return null;const ye=new Lr(E,F);return ye.idToken=j.idToken||void 0,ye.accessToken=j.accessToken||void 0,ye.secret=j.secret,ye.nonce=j.nonce,ye.pendingToken=j.pendingToken||null,ye}_getIdTokenResponse(g){return ur(g,this.buildRequest())}_linkToIdToken(g,y){const E=this.buildRequest();return E.idToken=y,ur(g,E)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,ur(g,y)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),g.postBody=(0,R.xO)(y)}return g}}function bh(w,g){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,a.Z)(function*(w,g){return Nt(w,"POST","/v1/accounts:sendVerificationCode",gn(w,g))})).apply(this,arguments)}function vl(){return(vl=(0,a.Z)(function*(w,g){return St(w,"POST","/v1/accounts:signInWithPhoneNumber",gn(w,g))})).apply(this,arguments)}function li(){return(li=(0,a.Z)(function*(w,g){const y=yield St(w,"POST","/v1/accounts:signInWithPhoneNumber",gn(w,g));if(y.temporaryProof)throw mt(w,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const Nu={USER_NOT_FOUND:"user-not-found"};function Ia(){return(Ia=(0,a.Z)(function*(w,g){return St(w,"POST","/v1/accounts:signInWithPhoneNumber",gn(w,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Nu)})).apply(this,arguments)}class Ri extends ml{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,y){return new Ri({verificationId:g,verificationCode:y})}static _fromTokenResponse(g,y){return new Ri({phoneNumber:g,temporaryProof:y})}_getIdTokenResponse(g){return function(w,g){return vl.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,y){return function(w,g){return li.apply(this,arguments)}(g,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function(w,g){return Ia.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:y,verificationId:E,verificationCode:F}=this.params;return g&&y?{temporaryProof:g,phoneNumber:y}:{sessionInfo:E,code:F}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:y,verificationCode:E,phoneNumber:F,temporaryProof:j}=g;return E||y||F||j?new Ri({verificationId:y,verificationCode:E,phoneNumber:F,temporaryProof:j}):null}}class qn{constructor(g){var y,E,F,j,ye,Ge;const ft=(0,R.zd)((0,R.pd)(g)),nt=null!==(y=ft.apiKey)&&void 0!==y?y:null,Tt=null!==(E=ft.oobCode)&&void 0!==E?E:null,Sn=function(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(F=ft.mode)&&void 0!==F?F:null);Ke(nt&&Tt&&Sn,"argument-error"),this.apiKey=nt,this.operation=Sn,this.code=Tt,this.continueUrl=null!==(j=ft.continueUrl)&&void 0!==j?j:null,this.languageCode=null!==(ye=ft.languageCode)&&void 0!==ye?ye:null,this.tenantId=null!==(Ge=ft.tenantId)&&void 0!==Ge?Ge:null}static parseLink(g){const y=function(w){const g=(0,R.zd)((0,R.pd)(w)).link,y=g?(0,R.zd)((0,R.pd)(g)).deep_link_id:null,E=(0,R.zd)((0,R.pd)(w)).deep_link_id;return(E?(0,R.zd)((0,R.pd)(E)).link:null)||E||y||g||w}(g);try{return new qn(y)}catch(E){return null}}}let As=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(y,E){return yl._fromEmailAndPassword(y,E)}static credentialWithLink(y,E){const F=qn.parseLink(E);return Ke(F,"argument-error"),yl._fromEmailAndCode(y,F.code,F.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class gs{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Ln extends gs{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Go extends Ln{static credentialFromJSON(g){const y="string"==typeof g?JSON.parse(g):g;return Ke("providerId"in y&&"signInMethod"in y,"argument-error"),Lr._fromParams(y)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return Ke(g.idToken||g.accessToken,"argument-error"),Lr._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Go.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Go.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:y,oauthAccessToken:E,oauthTokenSecret:F,pendingToken:j,nonce:ye,providerId:Ge}=g;if(!E&&!F&&!y&&!j||!Ge)return null;try{return new Go(Ge)._credential({idToken:y,accessToken:E,nonce:ye,pendingToken:j})}catch(ft){return null}}}let ku=(()=>{class w extends Ln{constructor(){super("facebook.com")}static credential(y){return Lr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch(E){return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),bc=(()=>{class w extends Ln{constructor(){super("google.com"),this.addScope("profile")}static credential(y,E){return Lr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:E})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:E,oauthAccessToken:F}=y;if(!E&&!F)return null;try{return w.credential(E,F)}catch(j){return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Vn=(()=>{class w extends Ln{constructor(){super("github.com")}static credential(y){return Lr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch(E){return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Ns extends ml{constructor(g,y){super(g,g),this.pendingToken=y}_getIdTokenResponse(g){return ur(g,this.buildRequest())}_linkToIdToken(g,y){const E=this.buildRequest();return E.idToken=y,ur(g,E)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,ur(g,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:F,pendingToken:j}=y;return E&&F&&j&&E===F?new Ns(E,j):null}static _create(g,y){return new Ns(g,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Vr extends gs{constructor(g){Ke(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Vr.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Vr.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const y=Ns.fromJSON(g);return Ke(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:y,providerId:E}=g;if(!y||!E)return null;try{return Ns._create(E,y)}catch(F){return null}}}let Eh=(()=>{class w extends Ln{constructor(){super("twitter.com")}static credential(y,E){return Lr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:E})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:E,oauthTokenSecret:F}=y;if(!E||!F)return null;try{return w.credential(E,F)}catch(j){return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function bl(w,g){return mo.apply(this,arguments)}function mo(){return(mo=(0,a.Z)(function*(w,g){return St(w,"POST","/v1/accounts:signUp",gn(w,g))})).apply(this,arguments)}class xr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,y,E,F=!1){return(0,a.Z)(function*(){const j=yield Yi._fromIdTokenResponse(g,E,F),ye=wl(E);return new xr({user:j,providerId:ye,_tokenResponse:E,operationType:y})})()}static _forOperation(g,y,E){return(0,a.Z)(function*(){yield g._updateTokensIfNecessary(E,!0);const F=wl(E);return new xr({user:g,providerId:F,_tokenResponse:E,operationType:y})})()}}function wl(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function wc(w){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,a.Z)(function*(w){var g;const y=Wn(w);if(yield y._initializationPromise,null===(g=y.currentUser)||void 0===g?void 0:g.isAnonymous)return new xr({user:y.currentUser,providerId:null,operationType:"signIn"});const E=yield bl(y,{returnSecureToken:!0}),F=yield xr._fromIdTokenResponse(y,"signIn",E,!0);return yield y._updateCurrentUser(F.user),F})).apply(this,arguments)}class Cc extends R.ZR{constructor(g,y,E,F){var j;super(y.code,y.message),this.operationType=E,this.user=F,Object.setPrototypeOf(this,Cc.prototype),this.customData={appName:g.name,tenantId:null!==(j=g.tenantId)&&void 0!==j?j:void 0,_serverResponse:y.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(g,y,E,F){return new Cc(g,y,E,F)}}function Ec(w,g,y,E){return("reauthenticate"===g?y._getReauthenticationResolver(w):y._getIdTokenResponse(w)).catch(j=>{throw"auth/multi-factor-auth-required"===j.code?Cc._fromErrorAndOperation(w,j,g,E):j})}function Ou(w){return new Set(w.map(({providerId:g})=>g).filter(g=>!!g))}function Fu(w,g){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,a.Z)(function*(w,g){const y=(0,R.m9)(w);yield Ze(!0,y,g);const{providerUserInfo:E}=yield en(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[g]}),F=Ou(E||[]);return y.providerData=y.providerData.filter(j=>F.has(j.providerId)),F.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function Cl(w,g){return _o.apply(this,arguments)}function _o(){return(_o=(0,a.Z)(function*(w,g,y=!1){const E=yield kt(w,g._linkToIdToken(w.auth,yield w.getIdToken()),y);return xr._forOperation(w,"link",E)})).apply(this,arguments)}function Ze(w,g,y){return sn.apply(this,arguments)}function sn(){return(sn=(0,a.Z)(function*(w,g,y){yield mn(g);const F=!1===w?"provider-already-linked":"no-such-provider";Ke(Ou(g.providerData).has(y)===w,g.auth,F)})).apply(this,arguments)}function Aa(w,g){return er.apply(this,arguments)}function er(){return(er=(0,a.Z)(function*(w,g,y=!1){const{auth:E}=w,F="reauthenticate";try{const j=yield kt(w,Ec(E,F,g,w),y);Ke(j.idToken,E,"internal-error");const ye=Xe(j.idToken);Ke(ye,E,"internal-error");const{sub:Ge}=ye;return Ke(w.uid===Ge,E,"user-mismatch"),xr._forOperation(w,F,j)}catch(j){throw"auth/user-not-found"===(null==j?void 0:j.code)&&an(E,"user-mismatch"),j}})).apply(this,arguments)}function El(w,g){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,a.Z)(function*(w,g,y=!1){const E="signIn",F=yield Ec(w,E,g),j=yield xr._fromIdTokenResponse(w,E,F);return y||(yield w._updateCurrentUser(j.user)),j})).apply(this,arguments)}function ci(w,g){return Na.apply(this,arguments)}function Na(){return(Na=(0,a.Z)(function*(w,g){return El(Wn(w),g)})).apply(this,arguments)}function xl(w,g){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,a.Z)(function*(w,g){const y=(0,R.m9)(w);return yield Ze(!1,y,g.providerId),Cl(y,g)})).apply(this,arguments)}function xh(w,g){return yo.apply(this,arguments)}function yo(){return(yo=(0,a.Z)(function*(w,g){return Aa((0,R.m9)(w),g)})).apply(this,arguments)}function xc(w,g){return _r.apply(this,arguments)}function _r(){return(_r=(0,a.Z)(function*(w,g){return St(w,"POST","/v1/accounts:signInWithCustomToken",gn(w,g))})).apply(this,arguments)}function ki(w,g){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,a.Z)(function*(w,g){const y=Wn(w),E=yield xc(y,{token:g,returnSecureToken:!0}),F=yield xr._fromIdTokenResponse(y,"signIn",E);return yield y._updateCurrentUser(F.user),F})).apply(this,arguments)}class Pi{constructor(g,y){this.factorId=g,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(g,y){return"phoneInfo"in y?Oi._fromServerResponse(g,y):an(g,"internal-error")}}class Oi extends Pi{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,y){return new Oi(y)}}function Dl(w,g,y){var E;Ke((null===(E=y.url)||void 0===E?void 0:E.length)>0,w,"invalid-continue-uri"),Ke(void 0===y.dynamicLinkDomain||y.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),g.continueUrl=y.url,g.dynamicLinkDomain=y.dynamicLinkDomain,g.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(Ke(y.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),g.iOSBundleId=y.iOS.bundleId),y.android&&(Ke(y.android.packageName.length>0,w,"missing-android-pkg-name"),g.androidInstallApp=y.android.installApp,g.androidMinimumVersionCode=y.android.minimumVersion,g.androidPackageName=y.android.packageName)}function Uu(w,g,y){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,a.Z)(function*(w,g,y){const E=(0,R.m9)(w),F={requestType:"PASSWORD_RESET",email:g};y&&Dl(E,F,y),yield yv(E,F)})).apply(this,arguments)}function Np(w,g,y){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,a.Z)(function*(w,g,y){yield ph((0,R.m9)(w),{oobCode:g,newPassword:y})})).apply(this,arguments)}function Hu(w,g){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,a.Z)(function*(w,g){yield Su((0,R.m9)(w),{oobCode:g})})).apply(this,arguments)}function vo(w,g){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,a.Z)(function*(w,g){const y=(0,R.m9)(w),E=yield ph(y,{oobCode:g}),F=E.requestType;switch(Ke(F,y,"internal-error"),F){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ke(E.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ke(E.mfaInfo,y,"internal-error");default:Ke(E.email,y,"internal-error")}let j=null;return E.mfaInfo&&(j=Pi._fromServerResponse(Wn(y),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:j},operation:F}})).apply(this,arguments)}function $u(w,g){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,a.Z)(function*(w,g){const{data:y}=yield vo((0,R.m9)(w),g);return y.email})).apply(this,arguments)}function Dh(w,g,y){return ju.apply(this,arguments)}function ju(){return(ju=(0,a.Z)(function*(w,g,y){const E=Wn(w),F=yield bl(E,{returnSecureToken:!0,email:g,password:y}),j=yield xr._fromIdTokenResponse(E,"signIn",F);return yield E._updateCurrentUser(j.user),j})).apply(this,arguments)}function Gu(w,g,y){return ci((0,R.m9)(w),As.credential(g,y))}function Wu(w,g,y){return qo.apply(this,arguments)}function qo(){return(qo=(0,a.Z)(function*(w,g,y){const E=(0,R.m9)(w),F={requestType:"EMAIL_SIGNIN",email:g};Ke(y.handleCodeInApp,E,"argument-error"),y&&Dl(E,F,y),yield Km(E,F)})).apply(this,arguments)}function qu(w,g){const y=qn.parseLink(g);return"EMAIL_SIGNIN"===(null==y?void 0:y.operation)}function Mp(w,g,y){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,a.Z)(function*(w,g,y){const E=(0,R.m9)(w),F=As.credentialWithLink(g,y||ir());return Ke(F._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),ci(E,F)})).apply(this,arguments)}function ka(w,g){return tr.apply(this,arguments)}function tr(){return(tr=(0,a.Z)(function*(w,g){return Nt(w,"POST","/v1/accounts:createAuthUri",gn(w,g))})).apply(this,arguments)}function vv(w,g){return Rp.apply(this,arguments)}function Rp(){return(Rp=(0,a.Z)(function*(w,g){const E={identifier:g,continueUri:fr()?ir():"http://localhost"},{signinMethods:F}=yield ka((0,R.m9)(w),E);return F||[]})).apply(this,arguments)}function Tc(w,g){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,a.Z)(function*(w,g){const y=(0,R.m9)(w),F={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};g&&Dl(y.auth,F,g);const{email:j}=yield Ym(y.auth,F);j!==w.email&&(yield w.reload())})).apply(this,arguments)}function kp(w,g,y){return Il.apply(this,arguments)}function Il(){return(Il=(0,a.Z)(function*(w,g,y){const E=(0,R.m9)(w),j={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:g};y&&Dl(E.auth,j,y);const{email:ye}=yield vh(E.auth,j);ye!==w.email&&(yield w.reload())})).apply(this,arguments)}function Ic(w,g){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,a.Z)(function*(w,g){return Nt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Dr(w,g){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,a.Z)(function*(w,{displayName:g,photoURL:y}){if(void 0===g&&void 0===y)return;const E=(0,R.m9)(w),j={idToken:yield E.getIdToken(),displayName:g,photoUrl:y,returnSecureToken:!0},ye=yield kt(E,Ic(E.auth,j));E.displayName=ye.displayName||null,E.photoURL=ye.photoUrl||null;const Ge=E.providerData.find(({providerId:ft})=>"password"===ft);Ge&&(Ge.displayName=E.displayName,Ge.photoURL=E.photoURL),yield E._updateTokensIfNecessary(ye)})).apply(this,arguments)}function Th(w,g){return qs((0,R.m9)(w),g,null)}function Pp(w,g){return qs((0,R.m9)(w),null,g)}function qs(w,g,y){return bo.apply(this,arguments)}function bo(){return(bo=(0,a.Z)(function*(w,g,y){const{auth:E}=w,j={idToken:yield w.getIdToken(),returnSecureToken:!0};g&&(j.email=g),y&&(j.password=y);const ye=yield kt(w,Sp(E,j));yield w._updateTokensIfNecessary(ye,!0)})).apply(this,arguments)}class wo{constructor(g,y,E={}){this.isNewUser=g,this.providerId=y,this.profile=E}}class Oa extends wo{constructor(g,y,E,F){super(g,y,E),this.username=F}}class zu extends wo{constructor(g,y){super(g,"facebook.com",y)}}class Op extends Oa{constructor(g,y){super(g,"github.com",y,"string"==typeof(null==y?void 0:y.login)?null==y?void 0:y.login:null)}}class Xm extends wo{constructor(g,y){super(g,"google.com",y)}}class Qi extends Oa{constructor(g,y,E){super(g,"twitter.com",y,E)}}function bv(w){const{user:g,_tokenResponse:y}=w;return g.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function(w){var g,y;if(!w)return null;const{providerId:E}=w,F=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},j=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!E&&(null==w?void 0:w.idToken)){const ye=null===(y=null===(g=Xe(w.idToken))||void 0===g?void 0:g.firebase)||void 0===y?void 0:y.sign_in_provider;if(ye)return new wo(j,"anonymous"!==ye&&"custom"!==ye?ye:null)}if(!E)return null;switch(E){case"facebook.com":return new zu(j,F);case"github.com":return new Op(j,F);case"google.com":return new Xm(j,F);case"twitter.com":return new Qi(j,F,w.screenName||null);case"custom":case"anonymous":return new wo(j,null);default:return new wo(j,E,F)}}(y)}class Ji{constructor(g,y){this.type=g,this.credential=y}static _fromIdtoken(g){return new Ji("enroll",g)}static _fromMfaPendingCredential(g){return new Ji("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var y,E;if(null==g?void 0:g.multiFactorSession){if(null===(y=g.multiFactorSession)||void 0===y?void 0:y.pendingCredential)return Ji._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(E=g.multiFactorSession)||void 0===E?void 0:E.idToken)return Ji._fromIdtoken(g.multiFactorSession.idToken)}return null}}class La{constructor(g,y,E){this.session=g,this.hints=y,this.signInResolver=E}static _fromError(g,y){const E=Wn(g),F=y.customData._serverResponse,j=(F.mfaInfo||[]).map(Ge=>Pi._fromServerResponse(E,Ge));Ke(F.mfaPendingCredential,E,"internal-error");const ye=Ji._fromMfaPendingCredential(F.mfaPendingCredential);return new La(ye,j,function(){var Ge=(0,a.Z)(function*(ft){const nt=yield ft._process(E,ye);delete F.mfaInfo,delete F.mfaPendingCredential;const Tt=Object.assign(Object.assign({},F),{idToken:nt.idToken,refreshToken:nt.refreshToken});switch(y.operationType){case"signIn":const Sn=yield xr._fromIdTokenResponse(E,y.operationType,Tt);return yield E._updateCurrentUser(Sn.user),Sn;case"reauthenticate":return Ke(y.user,E,"internal-error"),xr._forOperation(y.user,y.operationType,Tt);default:an(E,"internal-error")}});return function(ft){return Ge.apply(this,arguments)}}())}resolveSignIn(g){var y=this;return(0,a.Z)(function*(){return y.signInResolver(g)})()}}function Ac(w,g){var y;const E=(0,R.m9)(w),F=g;return Ke(g.customData.operationType,E,"argument-error"),Ke(null===(y=F.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,E,"argument-error"),La._fromError(E,F)}function wv(w,g){return Nt(w,"POST","/v2/accounts/mfaEnrollment:start",gn(w,g))}class Nc{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(E=>Pi._fromServerResponse(g.auth,E)))})}static _fromUser(g){return new Nc(g)}getSession(){var g=this;return(0,a.Z)(function*(){return Ji._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,y){var E=this;return(0,a.Z)(function*(){const F=g,j=yield E.getSession(),ye=yield kt(E.user,F._process(E.user.auth,j,y));return yield E.user._updateTokensIfNecessary(ye),E.user.reload()})()}unenroll(g){var y=this;return(0,a.Z)(function*(){const E="string"==typeof g?g:g.uid,F=yield y.user.getIdToken(),j=yield kt(y.user,function(w,g){return Nt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",gn(w,g))}(y.user.auth,{idToken:F,mfaEnrollmentId:E}));y.enrolledFactors=y.enrolledFactors.filter(({uid:ye})=>ye!==E),yield y.user._updateTokensIfNecessary(j);try{yield y.user.reload()}catch(ye){if("auth/user-token-expired"!==ye.code)throw ye}})()}}const Ah=new WeakMap;function Zo(w){const g=(0,R.m9)(w);return Ah.has(g)||Ah.set(g,Nc._fromUser(g)),Ah.get(g)}const Al="__sak";class un{constructor(g,y){this.storageRetriever=g,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(Al,"1"),this.storage.removeItem(Al),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,y){return this.storage.setItem(g,JSON.stringify(y)),Promise.resolve()}_get(g){const y=this.storage.getItem(g);return Promise.resolve(y?JSON.parse(y):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const zo=(()=>{class w extends un{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,E)=>this.onStorageEvent(y,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const w=(0,R.z$)();return zr(w)||jo(w)}()&&function(){try{return!(!window||window===window.top)}catch(w){return!1}}(),this.fallbackToPolling=Ea(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const E of Object.keys(this.listeners)){const F=this.storage.getItem(E),j=this.localCache[E];F!==j&&y(E,j,F)}}onStorageEvent(y,E=!1){if(!y.key)return void this.forAllChangedKeys((Ge,ft,nt)=>{this.notifyListeners(Ge,nt)});const F=y.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ge=this.storage.getItem(F);if(y.newValue!==Ge)null!==y.newValue?this.storage.setItem(F,y.newValue):this.storage.removeItem(F);else if(this.localCache[F]===y.newValue&&!E)return}const j=()=>{const Ge=this.storage.getItem(F);!E&&this.localCache[F]===Ge||this.notifyListeners(F,Ge)},ye=this.storage.getItem(F);(0,R.w1)()&&10===document.documentMode&&ye!==y.newValue&&y.newValue!==y.oldValue?setTimeout(j,10):j()}notifyListeners(y,E){this.localCache[y]=E;const F=this.listeners[y];if(F)for(const j of Array.from(F))j(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,E,F)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:E,newValue:F}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(E)}_removeListener(y,E){this.listeners[y]&&(this.listeners[y].delete(E),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,E){var F=()=>super._set,j=this;return(0,a.Z)(function*(){yield F().call(j,y,E),j.localCache[y]=JSON.stringify(E)})()}_get(y){var E=()=>super._get,F=this;return(0,a.Z)(function*(){const j=yield E().call(F,y);return F.localCache[y]=JSON.stringify(j),j})()}_remove(y){var E=()=>super._remove,F=this;return(0,a.Z)(function*(){yield E().call(F,y),delete F.localCache[y]})()}}return w.type="LOCAL",w})(),gr=(()=>{class w extends un{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,E){}_removeListener(y,E){}}return w.type="SESSION",w})();let Bp=(()=>{class w{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const E=this.receivers.find(j=>j.isListeningto(y));if(E)return E;const F=new w(y);return this.receivers.push(F),F}isListeningto(y){return this.eventTarget===y}handleEvent(y){var E=this;return(0,a.Z)(function*(){const F=y,{eventId:j,eventType:ye,data:Ge}=F.data,ft=E.handlersMap[ye];if(!(null==ft?void 0:ft.size))return;F.ports[0].postMessage({status:"ack",eventId:j,eventType:ye});const nt=Array.from(ft).map(function(){var Sn=(0,a.Z)(function*(Zn){return Zn(F.origin,Ge)});return function(Zn){return Sn.apply(this,arguments)}}()),Tt=yield function(w){return Promise.all(w.map(function(){var g=(0,a.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(E){return{fulfilled:!1,reason:E}}});return function(y){return g.apply(this,arguments)}}()))}(nt);F.ports[0].postMessage({status:"done",eventId:j,eventType:ye,response:Tt})})()}_subscribe(y,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(E)}_unsubscribe(y,E){this.handlersMap[y]&&E&&this.handlersMap[y].delete(E),(!E||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Co(w="",g=10){let y="";for(let E=0;E<g;E++)y+=Math.floor(10*Math.random());return w+y}class zn{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,y,E=50){var F=this;return(0,a.Z)(function*(){const j="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!j)throw new Error("connection_unavailable");let ye,Ge;return new Promise((ft,nt)=>{const Tt=Co("",20);j.port1.start();const Sn=setTimeout(()=>{nt(new Error("unsupported_event"))},E);Ge={messageChannel:j,onMessage(Zn){const wn=Zn;if(wn.data.eventId===Tt)switch(wn.data.status){case"ack":clearTimeout(Sn),ye=setTimeout(()=>{nt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ye),ft(wn.data.response);break;default:clearTimeout(Sn),clearTimeout(ye),nt(new Error("invalid_response"))}}},F.handlers.add(Ge),j.port1.addEventListener("message",Ge.onMessage),F.target.postMessage({eventType:g,eventId:Tt,data:y},[j.port2])}).finally(()=>{Ge&&F.removeMessageHandler(Ge)})})()}}function dr(){return window}function Yo(){return void 0!==dr().WorkerGlobalScope&&"function"==typeof dr().importScripts}function Va(){return(Va=(0,a.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(w){return null}})).apply(this,arguments)}const ks="firebaseLocalStorageDb",xo="firebaseLocalStorage",Zs="fbase_key";class ui{constructor(g){this.request=g}toPromise(){return new Promise((g,y)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function Fi(w,g){return w.transaction([xo],g?"readwrite":"readonly").objectStore(xo)}function bt(){const w=indexedDB.open(ks,1);return new Promise((g,y)=>{w.addEventListener("error",()=>{y(w.error)}),w.addEventListener("upgradeneeded",()=>{const E=w.result;try{E.createObjectStore(xo,{keyPath:Zs})}catch(F){y(F)}}),w.addEventListener("success",(0,a.Z)(function*(){const E=w.result;E.objectStoreNames.contains(xo)?g(E):(E.close(),yield function(){const w=indexedDB.deleteDatabase(ks);return new ui(w).toPromise()}(),g(yield bt()))}))})}function Xi(w,g,y){return mr.apply(this,arguments)}function mr(){return(mr=(0,a.Z)(function*(w,g,y){const E=Fi(w,!0).put({[Zs]:g,value:y});return new ui(E).toPromise()})).apply(this,arguments)}function nr(){return(nr=(0,a.Z)(function*(w,g){const y=Fi(w,!1).get(g),E=yield new ui(y).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Mh(w,g){const y=Fi(w,!0).delete(g);return new ui(y).toPromise()}const Hp=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,a.Z)(function*(){return y.db||(y.db=yield bt()),y.db})()}_withRetries(y){var E=this;return(0,a.Z)(function*(){let F=0;for(;;)try{const j=yield E._openDb();return yield y(j)}catch(j){if(F++>3)throw j;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,a.Z)(function*(){return Yo()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,a.Z)(function*(){y.receiver=Bp._getInstance(Yo()?self:null),y.receiver._subscribe("keyChanged",function(){var E=(0,a.Z)(function*(F,j){return{keyProcessed:(yield y._poll()).includes(j.key)}});return function(F,j){return E.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var E=(0,a.Z)(function*(F,j){return["keyChanged"]});return function(F,j){return E.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,a.Z)(function*(){var E,F;if(y.activeServiceWorker=yield function(){return Va.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new zn(y.activeServiceWorker);const j=yield y.sender._send("ping",{},800);!j||(null===(E=j[0])||void 0===E?void 0:E.fulfilled)&&(null===(F=j[0])||void 0===F?void 0:F.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var E=this;return(0,a.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function(){var w;return(null===(w=null==navigator?void 0:navigator.serviceWorker)||void 0===w?void 0:w.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:y},E.serviceWorkerReceiverAvailable?800:50)}catch(F){}})()}_isAvailable(){return(0,a.Z)(function*(){try{if(!indexedDB)return!1;const y=yield bt();return yield Xi(y,Al,"1"),yield Mh(y,Al),!0}catch(y){}return!1})()}_withPendingWrite(y){var E=this;return(0,a.Z)(function*(){E.pendingWrites++;try{yield y()}finally{E.pendingWrites--}})()}_set(y,E){var F=this;return(0,a.Z)(function*(){return F._withPendingWrite((0,a.Z)(function*(){return yield F._withRetries(j=>Xi(j,y,E)),F.localCache[y]=E,F.notifyServiceWorker(y)}))})()}_get(y){var E=this;return(0,a.Z)(function*(){const F=yield E._withRetries(j=>function(w,g){return nr.apply(this,arguments)}(j,y));return E.localCache[y]=F,F})()}_remove(y){var E=this;return(0,a.Z)(function*(){return E._withPendingWrite((0,a.Z)(function*(){return yield E._withRetries(F=>Mh(F,y)),delete E.localCache[y],E.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,a.Z)(function*(){const E=yield y._withRetries(ye=>{const Ge=Fi(ye,!1).getAll();return new ui(Ge).toPromise()});if(!E)return[];if(0!==y.pendingWrites)return[];const F=[],j=new Set;for(const{fbase_key:ye,value:Ge}of E)j.add(ye),JSON.stringify(y.localCache[ye])!==JSON.stringify(Ge)&&(y.notifyListeners(ye,Ge),F.push(ye));for(const ye of Object.keys(y.localCache))y.localCache[ye]&&!j.has(ye)&&(y.notifyListeners(ye,null),F.push(ye));return F})()}notifyListeners(y,E){this.localCache[y]=E;const F=this.listeners[y];if(F)for(const j of Array.from(F))j(E)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,a.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(E)}_removeListener(y,E){this.listeners[y]&&(this.listeners[y].delete(E),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Ko(w,g){return Nt(w,"POST","/v2/accounts/mfaSignIn:start",gn(w,g))}function kc(){return(kc=(0,a.Z)(function*(w){return(yield Nt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ju(w){return new Promise((g,y)=>{const E=document.createElement("script");E.setAttribute("src",w),E.onload=g,E.onerror=F=>{const j=In("internal-error");j.customData=F,y(j)},E.type="text/javascript",E.charset="UTF-8",function(){var w,g;return null!==(g=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==g?g:document}().appendChild(E)})}function Do(w){return`__${w}${Math.floor(1e6*Math.random())}`}const zs=1e12;class Br{constructor(g){this.auth=g,this.counter=zs,this._widgets=new Map}render(g,y){const E=this.counter;return this._widgets.set(E,new Pc(g,this.auth.name,y||{})),this.counter++,E}reset(g){var y;const E=g||zs;null===(y=this._widgets.get(E))||void 0===y||y.delete(),this._widgets.delete(E)}getResponse(g){var y;return(null===(y=this._widgets.get(g||zs))||void 0===y?void 0:y.getResponse())||""}execute(g){var y=this;return(0,a.Z)(function*(){var E;return null===(E=y._widgets.get(g||zs))||void 0===E||E.execute(),""})()}}class Pc{constructor(g,y,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const F="string"==typeof g?document.getElementById(g):g;Ke(F,"argument-error",{appName:y}),this.container=F,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(w){const g=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<50;E++)g.push(y.charAt(Math.floor(Math.random()*y.length)));return g.join("")}();const{callback:g,"expired-callback":y}=this.params;if(g)try{g(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const yi=Do("rcb"),Ps=new Cn(3e4,6e4);class Io{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!dr().grecaptcha}load(g,y=""){return Ke((w=y).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w),g,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(dr().grecaptcha):new Promise((E,F)=>{const j=dr().setTimeout(()=>{F(In(g,"network-request-failed"))},Ps.get());dr()[yi]=()=>{dr().clearTimeout(j),delete dr()[yi];const Ge=dr().grecaptcha;if(!Ge)return void F(In(g,"internal-error"));const ft=Ge.render;Ge.render=(nt,Tt)=>{const Sn=ft(nt,Tt);return this.counter++,Sn},this.hostLanguage=y,E(Ge)},Ju(`https://www.google.com/recaptcha/api.js??${(0,R.xO)({onload:yi,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(j),F(In(g,"internal-error"))})});var w}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!dr().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class kh{load(g){return(0,a.Z)(function*(){return new Br(g)})()}clearedOneInstance(){}}const Ys="recaptcha",$p={theme:"light",type:"image"};class Ua{constructor(g,y=Object.assign({},$p),E){this.parameters=y,this.type=Ys,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Wn(E),this.isInvisible="invisible"===this.parameters.size,Ke("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const F="string"==typeof g?document.getElementById(g):g;Ke(F,this.auth,"argument-error"),this.container=F,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new kh:new Io,this.validateStartingState()}verify(){var g=this;return(0,a.Z)(function*(){g.assertNotDestroyed();const y=yield g.render(),E=g.getAssertedRecaptcha();return E.getResponse(y)||new Promise(j=>{const ye=Ge=>{!Ge||(g.tokenChangeListeners.delete(ye),j(Ge))};g.tokenChangeListeners.add(ye),g.isInvisible&&E.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){Ke(!this.parameters.sitekey,this.auth,"argument-error"),Ke(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ke("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return y=>{if(this.tokenChangeListeners.forEach(E=>E(y)),"function"==typeof g)g(y);else if("string"==typeof g){const E=dr()[g];"function"==typeof E&&E(y)}}}assertNotDestroyed(){Ke(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,a.Z)(function*(){if(yield g.init(),!g.widgetId){let y=g.container;if(!g.isInvisible){const E=document.createElement("div");y.appendChild(E),y=E}g.widgetId=g.getAssertedRecaptcha().render(y,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,a.Z)(function*(){Ke(fr()&&!Yo(),g.auth,"internal-error"),yield function(){let w=null;return new Promise(g=>{"complete"!==document.readyState?(w=()=>g(),window.addEventListener("load",w)):g()}).catch(g=>{throw w&&window.removeEventListener("load",w),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const y=yield function(w){return kc.apply(this,arguments)}(g.auth);Ke(y,g.auth,"internal-error"),g.parameters.sitekey=y})()}getAssertedRecaptcha(){return Ke(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Xu{constructor(g,y){this.verificationId=g,this.onConfirmation=y}confirm(g){const y=Ri._fromVerification(this.verificationId,g);return this.onConfirmation(y)}}function Ir(w,g,y){return vr.apply(this,arguments)}function vr(){return(vr=(0,a.Z)(function*(w,g,y){const E=Wn(w),F=yield W(E,g,(0,R.m9)(y));return new Xu(F,j=>ci(E,j))})).apply(this,arguments)}function Ha(w,g,y){return ed.apply(this,arguments)}function ed(){return(ed=(0,a.Z)(function*(w,g,y){const E=(0,R.m9)(w);yield Ze(!1,E,"phone");const F=yield W(E.auth,g,(0,R.m9)(y));return new Xu(F,j=>xl(E,j))})).apply(this,arguments)}function D(w,g,y){return S.apply(this,arguments)}function S(){return(S=(0,a.Z)(function*(w,g,y){const E=(0,R.m9)(w),F=yield W(E.auth,g,(0,R.m9)(y));return new Xu(F,j=>xh(E,j))})).apply(this,arguments)}function W(w,g,y){return oe.apply(this,arguments)}function oe(){return(oe=(0,a.Z)(function*(w,g,y){var E;const F=yield y.verify();try{let j;if(Ke("string"==typeof F,w,"argument-error"),Ke(y.type===Ys,w,"argument-error"),j="string"==typeof g?{phoneNumber:g}:g,"session"in j){const ye=j.session;if("phoneNumber"in j)return Ke("enroll"===ye.type,w,"internal-error"),(yield wv(w,{idToken:ye.credential,phoneEnrollmentInfo:{phoneNumber:j.phoneNumber,recaptchaToken:F}})).phoneSessionInfo.sessionInfo;{Ke("signin"===ye.type,w,"internal-error");const Ge=(null===(E=j.multiFactorHint)||void 0===E?void 0:E.uid)||j.multiFactorUid;return Ke(Ge,w,"missing-multi-factor-info"),(yield Ko(w,{mfaPendingCredential:ye.credential,mfaEnrollmentId:Ge,phoneSignInInfo:{recaptchaToken:F}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ye}=yield bh(w,{phoneNumber:j.phoneNumber,recaptchaToken:F});return ye}}finally{y._reset()}})).apply(this,arguments)}function De(w,g){return Me.apply(this,arguments)}function Me(){return(Me=(0,a.Z)(function*(w,g){yield Cl((0,R.m9)(w),g)})).apply(this,arguments)}let Qe=(()=>{class w{constructor(y){this.providerId=w.PROVIDER_ID,this.auth=Wn(y)}verifyPhoneNumber(y,E){return W(this.auth,y,(0,R.m9)(E))}static credential(y,E){return Ri._fromVerification(y,E)}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:E,temporaryProof:F}=y;return E&&F?Ri._fromTokenResponse(E,F):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function dt(w,g){return g?hn(g):(Ke(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Ot extends ml{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return ur(g,this._buildIdpRequest())}_linkToIdToken(g,y){return ur(g,this._buildIdpRequest(y))}_getReauthenticationResolver(g){return ur(g,this._buildIdpRequest())}_buildIdpRequest(g){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(y.idToken=g),y}}function Ut(w){return El(w.auth,new Ot(w),w.bypassAuthState)}function fn(w){const{auth:g,user:y}=w;return Ke(y,g,"internal-error"),Aa(y,new Ot(w),w.bypassAuthState)}function Ht(w){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,a.Z)(function*(w){const{auth:g,user:y}=w;return Ke(y,g,"internal-error"),Cl(y,new Ot(w),w.bypassAuthState)})).apply(this,arguments)}class Rr{constructor(g,y,E,F,j=!1){this.auth=g,this.resolver=E,this.user=F,this.bypassAuthState=j,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var g=this;return new Promise(function(){var y=(0,a.Z)(function*(E,F){g.pendingPromise={resolve:E,reject:F};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(j){g.reject(j)}});return function(E,F){return y.apply(this,arguments)}}())}onAuthEvent(g){var y=this;return(0,a.Z)(function*(){const{urlResponse:E,sessionId:F,postBody:j,tenantId:ye,error:Ge,type:ft}=g;if(Ge)return void y.reject(Ge);const nt={auth:y.auth,requestUri:E,sessionId:F,tenantId:ye||void 0,postBody:j||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(ft)(nt))}catch(Tt){y.reject(Tt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Ut;case"linkViaPopup":case"linkViaRedirect":return Ht;case"reauthViaPopup":case"reauthViaRedirect":return fn;default:an(this.auth,"internal-error")}}resolve(g){$n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){$n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ml=new Cn(2e3,1e4);function td(w,g,y){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,a.Z)(function*(w,g,y){const E=Wn(w);Rn(w,g,gs);const F=dt(E,y);return new Gp(E,"signInViaPopup",g,F).executeNotNull()})).apply(this,arguments)}function $a(w,g,y){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,a.Z)(function*(w,g,y){const E=(0,R.m9)(w);Rn(E.auth,g,gs);const F=dt(E.auth,y);return new Gp(E.auth,"reauthViaPopup",g,F,E).executeNotNull()})).apply(this,arguments)}function Qo(w,g,y){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,a.Z)(function*(w,g,y){const E=(0,R.m9)(w);Rn(E.auth,g,gs);const F=dt(E.auth,y);return new Gp(E.auth,"linkViaPopup",g,F,E).executeNotNull()})).apply(this,arguments)}let Gp=(()=>{class w extends Rr{constructor(y,E,F,j,ye){super(y,E,j,ye),this.provider=F,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var y=this;return(0,a.Z)(function*(){const E=yield y.execute();return Ke(E,y.auth,"internal-error"),E})()}onExecution(){var y=this;return(0,a.Z)(function*(){$n(1===y.filter.length,"Popup operations only handle one event");const E=Co();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],E),y.authWindow.associatedEvent=E,y.resolver._originValidation(y.auth).catch(F=>{y.reject(F)}),y.resolver._isIframeWebStorageSupported(y.auth,F=>{F||y.reject(In(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(In(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const y=()=>{var E,F;this.pollId=(null===(F=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===F?void 0:F.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(In(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,Ml.get())};y()}}return w.currentPopupAction=null,w})();const Oc=new Map;class t0 extends Rr{constructor(g,y,E=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,E),this.eventId=null}execute(){var g=()=>super.execute,y=this;return(0,a.Z)(function*(){let E=Oc.get(y.auth._key());if(!E){try{const j=(yield function(w,g){return kl.apply(this,arguments)}(y.resolver,y.auth))?yield g().call(y):null;E=()=>Promise.resolve(j)}catch(F){E=()=>Promise.reject(F)}Oc.set(y.auth._key(),E)}return y.bypassAuthState||Oc.set(y.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(g){var y=()=>super.onAuthEvent,E=this;return(0,a.Z)(function*(){if("signInViaRedirect"===g.type)return y().call(E,g);if("unknown"!==g.type){if(g.eventId){const F=yield E.auth._redirectUserForId(g.eventId);if(F)return E.user=F,y().call(E,g);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,a.Z)(function*(){})()}cleanUp(){}}function kl(){return(kl=(0,a.Z)(function*(w,g){const y=ja(g),E=n0(w);if(!(yield E._isAvailable()))return!1;const F="true"===(yield E._get(y));return yield E._remove(y),F})).apply(this,arguments)}function Wp(w,g){return _s.apply(this,arguments)}function _s(){return(_s=(0,a.Z)(function*(w,g){return n0(w)._set(ja(g),"true")})).apply(this,arguments)}function qp(){Oc.clear()}function n0(w){return hn(w._redirectPersistence)}function ja(w){return hs("pendingRedirect",w.config.apiKey,w.name)}function Ga(w,g,y){return function(w,g,y){return Kr.apply(this,arguments)}(w,g,y)}function Kr(){return(Kr=(0,a.Z)(function*(w,g,y){const E=Wn(w);Rn(w,g,gs);const F=dt(E,y);return yield Wp(F,E),F._openRedirect(E,g,"signInViaRedirect")})).apply(this,arguments)}function xv(w,g,y){return function(w,g,y){return Fc.apply(this,arguments)}(w,g,y)}function Fc(){return(Fc=(0,a.Z)(function*(w,g,y){const E=(0,R.m9)(w);Rn(E.auth,g,gs);const F=dt(E.auth,y);yield Wp(F,E.auth);const j=yield Pl(E);return F._openRedirect(E.auth,g,"reauthViaRedirect",j)})).apply(this,arguments)}function nd(w,g,y){return function(w,g,y){return Ph.apply(this,arguments)}(w,g,y)}function Ph(){return(Ph=(0,a.Z)(function*(w,g,y){const E=(0,R.m9)(w);Rn(E.auth,g,gs);const F=dt(E.auth,y);yield Ze(!1,E,g.providerId),yield Wp(F,E.auth);const j=yield Pl(E);return F._openRedirect(E.auth,g,"linkViaRedirect",j)})).apply(this,arguments)}function Dv(w,g){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,a.Z)(function*(w,g){return yield Wn(w)._initializationPromise,Wa(w,g,!1)})).apply(this,arguments)}function Wa(w,g){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,a.Z)(function*(w,g,y=!1){const E=Wn(w),F=dt(E,g),ye=yield new t0(E,F,y).execute();return ye&&!y&&(delete ye.user._redirectEventId,yield E._persistUserIfCurrent(ye.user),yield E._setRedirectUser(null,g)),ye})).apply(this,arguments)}function Pl(w){return dn.apply(this,arguments)}function dn(){return(dn=(0,a.Z)(function*(w){const g=Co(`${w.uid}:::`);return w._redirectEventId=g,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),g})).apply(this,arguments)}class Tv{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let y=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(g,E)&&(y=!0,this.sendToConsumer(g,E),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return o0(w);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=g,y=!0)),y}sendToConsumer(g,y){var E;if(g.error&&!o0(g)){const F=(null===(E=g.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";y.onError(In(this.auth,F))}else y.onAuthEvent(g)}isEventForConsumer(g,y){const E=null===y.eventId||!!g.eventId&&g.eventId===y.eventId;return y.filter.includes(g.type)&&E}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(qa(g))}saveEventToCache(g){this.cachedEventUids.add(qa(g)),this.lastProcessedEventTime=Date.now()}}function qa(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(g=>g).join("-")}function o0({type:w,error:g}){return"unknown"===w&&"auth/no-auth-event"===(null==g?void 0:g.code)}function Vc(w){return id.apply(this,arguments)}function id(){return(id=(0,a.Z)(function*(w,g={}){return Nt(w,"GET","/v1/projects",g)})).apply(this,arguments)}const Xo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sd=/^https?/;function od(){return(od=(0,a.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:g}=yield Vc(w);for(const y of g)try{if(Oh(y))return}catch(E){}an(w,"unauthorized-domain")})).apply(this,arguments)}function Oh(w){const g=ir(),{protocol:y,hostname:E}=new URL(g);if(w.startsWith("chrome-extension://")){const ye=new URL(w);return""===ye.hostname&&""===E?"chrome-extension:"===y&&w.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===y&&ye.hostname===E}if(!sd.test(y))return!1;if(Xo.test(w))return E===w;const F=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+F+"|"+F+")$","i").test(E)}const ad=new Cn(3e4,6e4);function Bc(){const w=dr().___jsl;if(null==w?void 0:w.H)for(const g of Object.keys(w.H))if(w.H[g].r=w.H[g].r||[],w.H[g].L=w.H[g].L||[],w.H[g].r=[...w.H[g].L],w.CP)for(let y=0;y<w.CP.length;y++)w.CP[y]=null}let Uc=null;function Ol(w){return Uc=Uc||function(w){return new Promise((g,y)=>{var E,F,j;function ye(){Bc(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Bc(),y(In(w,"network-request-failed"))},timeout:ad.get()})}if(null===(F=null===(E=dr().gapi)||void 0===E?void 0:E.iframes)||void 0===F?void 0:F.Iframe)g(gapi.iframes.getContext());else{if(!(null===(j=dr().gapi)||void 0===j?void 0:j.load)){const Ge=Do("iframefcb");return dr()[Ge]=()=>{gapi.load?ye():y(In(w,"network-request-failed"))},Ju(`https://apis.google.com/js/api.js?onload=${Ge}`).catch(ft=>y(ft))}ye()}}).catch(g=>{throw Uc=null,g})}(w),Uc}const Iv=new Cn(5e3,15e3),Av={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Nv=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ea(w){const g=w.config;Ke(g.authDomain,w,"auth-domain-config-required");const y=g.emulator?it(g,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,E={apiKey:g.apiKey,appName:w.name,v:k.SDK_VERSION},F=Nv.get(w.config.apiHost);F&&(E.eid=F);const j=w._getFrameworks();return j.length&&(E.fw=j.join(",")),`${y}?${(0,R.xO)(E).slice(1)}`}function Lh(){return(Lh=(0,a.Z)(function*(w){const g=yield Ol(w),y=dr().gapi;return Ke(y,w,"internal-error"),g.open({where:document.body,url:ea(w),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Av,dontclear:!0},E=>new Promise(function(){var F=(0,a.Z)(function*(j,ye){yield E.restyle({setHideOnLeave:!1});const Ge=In(w,"network-request-failed"),ft=dr().setTimeout(()=>{ye(Ge)},Iv.get());function nt(){dr().clearTimeout(ft),j(E)}E.ping(nt).then(nt,()=>{ye(Ge)})});return function(j,ye){return F.apply(this,arguments)}}()))})).apply(this,arguments)}const l0={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Vh{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function d0(w,g,y,E,F,j){Ke(w.config.authDomain,w,"auth-domain-config-required"),Ke(w.config.apiKey,w,"invalid-api-key");const ye={apiKey:w.config.apiKey,appName:w.name,authType:y,redirectUrl:E,v:k.SDK_VERSION,eventId:F};if(g instanceof gs){g.setDefaultLanguage(w.languageCode),ye.providerId=g.providerId||"",(0,R.xb)(g.getCustomParameters())||(ye.customParameters=JSON.stringify(g.getCustomParameters()));for(const[ft,nt]of Object.entries(j||{}))ye[ft]=nt}if(g instanceof Ln){const ft=g.getScopes().filter(nt=>""!==nt);ft.length>0&&(ye.scopes=ft.join(","))}w.tenantId&&(ye.tid=w.tenantId);const Ge=ye;for(const ft of Object.keys(Ge))void 0===Ge[ft]&&delete Ge[ft];return`${function({config:w}){return w.emulator?it(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,R.xO)(Ge).slice(1)}`}const Za="webStorageSupport",Ls=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gr,this._completeRedirectFn=Wa}_openPopup(g,y,E,F){var j=this;return(0,a.Z)(function*(){var ye;$n(null===(ye=j.eventManagers[g._key()])||void 0===ye?void 0:ye.manager,"_initialize() not called before _openPopup()");const Ge=d0(g,y,E,ir(),F);return function(w,g,y,E=500,F=600){const j=Math.max((window.screen.availHeight-F)/2,0).toString(),ye=Math.max((window.screen.availWidth-E)/2,0).toString();let Ge="";const ft=Object.assign(Object.assign({},l0),{width:E.toString(),height:F.toString(),top:j,left:ye}),nt=(0,R.z$)().toLowerCase();y&&(Ge=ho(nt)?"_blank":y),Ca(nt)&&(g=g||"http://localhost",ft.scrollbars="yes");const Tt=Object.entries(ft).reduce((Zn,[wn,na])=>`${Zn}${wn}=${na},`,"");if(function(w=(0,R.z$)()){var g;return jo(w)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(nt)&&"_self"!==Ge)return function(w,g){const y=document.createElement("a");y.href=w,y.target=g;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(E)}(g||"",Ge),new Vh(null);const Sn=window.open(g||"",Ge,Tt);Ke(Sn,w,"popup-blocked");try{Sn.focus()}catch(Zn){}return new Vh(Sn)}(g,Ge,Co())})()}_openRedirect(g,y,E,F){var j=this;return(0,a.Z)(function*(){return yield j._originValidation(g),w=d0(g,y,E,ir(),F),dr().location.href=w,new Promise(()=>{});var w})()}_initialize(g){const y=g._key();if(this.eventManagers[y]){const{manager:F,promise:j}=this.eventManagers[y];return F?Promise.resolve(F):($n(j,"If manager is not set, promise should be"),j)}const E=this.initAndGetManager(g);return this.eventManagers[y]={promise:E},E.catch(()=>{delete this.eventManagers[y]}),E}initAndGetManager(g){var y=this;return(0,a.Z)(function*(){const E=yield function(w){return Lh.apply(this,arguments)}(g),F=new Tv(g);return E.register("authEvent",j=>(Ke(null==j?void 0:j.authEvent,g,"invalid-auth-event"),{status:F.onEvent(j.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[g._key()]={manager:F},y.iframes[g._key()]=E,F})()}_isIframeWebStorageSupported(g,y){this.iframes[g._key()].send(Za,{type:Za},F=>{var j;const ye=null===(j=null==F?void 0:F[0])||void 0===j?void 0:j[Za];void 0!==ye&&y(!!ye),an(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function(w){return od.apply(this,arguments)}(g)),this.originValidationPromises[y]}get _shouldInitProactively(){return Ea()||zr()||jo()}};class jc extends class{constructor(g){this.factorId=g}_process(g,y,E){switch(y.type){case"enroll":return this._finalizeEnroll(g,y.credential,E);case"signin":return this._finalizeSignIn(g,y.credential);default:return Jn("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new jc(g)}_finalizeEnroll(g,y,E){return function(w,g){return Nt(w,"POST","/v2/accounts/mfaEnrollment:finalize",gn(w,g))}(g,{idToken:y,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,y){return function(w,g){return Nt(w,"POST","/v2/accounts/mfaSignIn:finalize",gn(w,g))}(g,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let h0=(()=>{class w{constructor(){}static assertion(y){return jc._fromCredential(y)}}return w.FACTOR_ID="phone",w})();var w,Gc="@firebase/auth",f0="0.19.12";class oE{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var y=this;return(0,a.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const y=this.auth.onIdTokenChanged(E=>{var F;g((null===(F=E)||void 0===F?void 0:F.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,y),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const y=this.internalListeners.get(g);!y||(this.internalListeners.delete(g),y(),this.updateProactiveRefresh())}assertAuthConfigured(){Ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}w="Browser",(0,k._registerComponent)(new Ie.wA("auth",(g,{options:y})=>{const E=g.getProvider("app").getImmediate(),F=g.getProvider("heartbeat"),{apiKey:j,authDomain:ye}=E.options;return((Ge,ft)=>{Ke(j&&!j.includes(":"),"invalid-api-key",{appName:Ge.name}),Ke(!(null==ye?void 0:ye.includes(":")),"argument-error",{appName:Ge.name});const nt={apiKey:j,authDomain:ye,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ei(w)},Tt=new Zm(Ge,ft,nt);return function(w,g){const y=(null==g?void 0:g.persistence)||[],E=(Array.isArray(y)?y:[y]).map(hn);(null==g?void 0:g.errorMap)&&w._updateErrorMap(g.errorMap),w._initializeWithPersistence(E,null==g?void 0:g.popupRedirectResolver)}(Tt,y),Tt})(E,F)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,y,E)=>{g.getProvider("auth-internal").initialize()})),(0,k._registerComponent)(new Ie.wA("auth-internal",g=>{const y=Wn(g.getProvider("auth").getImmediate());return new oE(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,k.registerVersion)(Gc,f0,void 0),(0,k.registerVersion)(Gc,f0,"esm2017")},3854:(Ve,me,O)=>{"use strict";O.d(me,{BH:()=>z,LL:()=>Je,ZR:()=>Ie,gQ:()=>Jn,zI:()=>Ee,hu:()=>k,g5:()=>Q,US:()=>ee,tV:()=>P,h$:()=>L,L:()=>U,$s:()=>Nt,r3:()=>Ct,Sg:()=>J,ne:()=>$n,p$:()=>N,vZ:()=>In,ZB:()=>A,Lj:()=>Lt,gK:()=>fr,pd:()=>Ke,m9:()=>cn,z$:()=>re,GJ:()=>vt,jU:()=>Z,ru:()=>de,d:()=>Ce,xb:()=>Wt,w1:()=>ve,hl:()=>be,uI:()=>le,UG:()=>H,Yr:()=>Re,b$:()=>fe,G6:()=>Ae,Mn:()=>He,w9:()=>Rt,cI:()=>Oe,UI:()=>an,X3:()=>Mt,xO:()=>Rn,zd:()=>Qn,DV:()=>Xt,ug:()=>it,dS:()=>Cn,Pz:()=>Fe,Dv:()=>ir,Wj:()=>Dn,lb:()=>zi,eu:()=>ce});var a=O(8239);const k=function(he,ae){if(!he)throw Q(ae)},Q=function(he){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+he)},ie=function(he){const ae=[];let ge=0;for(let Le=0;Le<he.length;Le++){let X=he.charCodeAt(Le);X<128?ae[ge++]=X:X<2048?(ae[ge++]=X>>6|192,ae[ge++]=63&X|128):55296==(64512&X)&&Le+1<he.length&&56320==(64512&he.charCodeAt(Le+1))?(X=65536+((1023&X)<<10)+(1023&he.charCodeAt(++Le)),ae[ge++]=X>>18|240,ae[ge++]=X>>12&63|128,ae[ge++]=X>>6&63|128,ae[ge++]=63&X|128):(ae[ge++]=X>>12|224,ae[ge++]=X>>6&63|128,ae[ge++]=63&X|128)}return ae},ee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(he,ae){if(!Array.isArray(he))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ge=ae?this.byteToCharMapWebSafe_:this.byteToCharMap_,Le=[];for(let X=0;X<he.length;X+=3){const te=he[X],se=X+1<he.length,Ne=se?he[X+1]:0,Xe=X+2<he.length,Et=Xe?he[X+2]:0;let nn=(15&Ne)<<2|Et>>6,jn=63&Et;Xe||(jn=64,se||(nn=64)),Le.push(ge[te>>2],ge[(3&te)<<4|Ne>>4],ge[nn],ge[jn])}return Le.join("")},encodeString(he,ae){return this.HAS_NATIVE_SUPPORT&&!ae?btoa(he):this.encodeByteArray(ie(he),ae)},decodeString(he,ae){return this.HAS_NATIVE_SUPPORT&&!ae?atob(he):function(he){const ae=[];let ge=0,Le=0;for(;ge<he.length;){const X=he[ge++];if(X<128)ae[Le++]=String.fromCharCode(X);else if(X>191&&X<224){const te=he[ge++];ae[Le++]=String.fromCharCode((31&X)<<6|63&te)}else if(X>239&&X<365){const Xe=((7&X)<<18|(63&he[ge++])<<12|(63&he[ge++])<<6|63&he[ge++])-65536;ae[Le++]=String.fromCharCode(55296+(Xe>>10)),ae[Le++]=String.fromCharCode(56320+(1023&Xe))}else{const te=he[ge++],se=he[ge++];ae[Le++]=String.fromCharCode((15&X)<<12|(63&te)<<6|63&se)}}return ae.join("")}(this.decodeStringToByteArray(he,ae))},decodeStringToByteArray(he,ae){this.init_();const ge=ae?this.charToByteMapWebSafe_:this.charToByteMap_,Le=[];for(let X=0;X<he.length;){const te=ge[he.charAt(X++)],Ne=X<he.length?ge[he.charAt(X)]:0;++X;const Et=X<he.length?ge[he.charAt(X)]:64;++X;const at=X<he.length?ge[he.charAt(X)]:64;if(++X,null==te||null==Ne||null==Et||null==at)throw Error();Le.push(te<<2|Ne>>4),64!==Et&&(Le.push(Ne<<4&240|Et>>2),64!==at&&Le.push(Et<<6&192|at))}return Le},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let he=0;he<this.ENCODED_VALS.length;he++)this.byteToCharMap_[he]=this.ENCODED_VALS.charAt(he),this.charToByteMap_[this.byteToCharMap_[he]]=he,this.byteToCharMapWebSafe_[he]=this.ENCODED_VALS_WEBSAFE.charAt(he),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[he]]=he,he>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(he)]=he,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(he)]=he)}}},L=function(he){const ae=ie(he);return ee.encodeByteArray(ae,!0)},U=function(he){return L(he).replace(/\./g,"")},P=function(he){try{return ee.decodeString(he,!0)}catch(ae){console.error("base64Decode failed: ",ae)}return null};function N(he){return A(void 0,he)}function A(he,ae){if(!(ae instanceof Object))return ae;switch(ae.constructor){case Date:return new Date(ae.getTime());case Object:void 0===he&&(he={});break;case Array:he=[];break;default:return ae}for(const ge in ae)!ae.hasOwnProperty(ge)||!B(ge)||(he[ge]=A(he[ge],ae[ge]));return he}function B(he){return"__proto__"!==he}class z{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ae,ge)=>{this.resolve=ae,this.reject=ge})}wrapCallback(ae){return(ge,Le)=>{ge?this.reject(ge):this.resolve(Le),"function"==typeof ae&&(this.promise.catch(()=>{}),1===ae.length?ae(ge):ae(ge,Le))}}}function J(he,ae){if(he.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Le=ae||"demo-project",X=he.iat||0,te=he.sub||he.user_id;if(!te)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const se=Object.assign({iss:`https://securetoken.google.com/${Le}`,aud:Le,iat:X,exp:X+3600,auth_time:X,sub:te,user_id:te,firebase:{sign_in_provider:"custom",identities:{}}},he);return[U(JSON.stringify({alg:"none",type:"JWT"})),U(JSON.stringify(se)),""].join(".")}function re(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function le(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(re())}function H(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(he){return!1}}function Z(){return"object"==typeof self&&self.self===self}function de(){const he="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof he&&void 0!==he.id}function fe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ce(){return re().indexOf("Electron/")>=0}function ve(){const he=re();return he.indexOf("MSIE ")>=0||he.indexOf("Trident/")>=0}function He(){return re().indexOf("MSAppHost/")>=0}function Re(){return!1}function Ae(){return!H()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function be(){return"object"==typeof indexedDB}function ce(){return new Promise((he,ae)=>{try{let ge=!0;const Le="validate-browser-context-for-indexeddb-analytics-module",X=self.indexedDB.open(Le);X.onsuccess=()=>{X.result.close(),ge||self.indexedDB.deleteDatabase(Le),he(!0)},X.onupgradeneeded=()=>{ge=!1},X.onerror=()=>{var te;ae((null===(te=X.error)||void 0===te?void 0:te.message)||"")}}catch(ge){ae(ge)}})}function Ee(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ie extends Error{constructor(ae,ge,Le){super(ge),this.code=ae,this.customData=Le,this.name="FirebaseError",Object.setPrototypeOf(this,Ie.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Je.prototype.create)}}class Je{constructor(ae,ge,Le){this.service=ae,this.serviceName=ge,this.errors=Le}create(ae,...ge){const Le=ge[0]||{},X=`${this.service}/${ae}`,te=this.errors[ae],se=te?function(he,ae){return he.replace(ct,(ge,Le)=>{const X=ae[Le];return null!=X?String(X):`<${Le}?>`})}(te,Le):"Error";return new Ie(X,`${this.serviceName}: ${se} (${X}).`,Le)}}const ct=/\{\$([^}]+)}/g;function Oe(he){return JSON.parse(he)}function Fe(he){return JSON.stringify(he)}const ke=function(he){let ae={},ge={},Le={},X="";try{const te=he.split(".");ae=Oe(P(te[0])||""),ge=Oe(P(te[1])||""),X=te[2],Le=ge.d||{},delete ge.d}catch(te){}return{header:ae,claims:ge,data:Le,signature:X}},Rt=function(he){const ge=ke(he).claims;return!!ge&&"object"==typeof ge&&ge.hasOwnProperty("iat")},vt=function(he){const ae=ke(he).claims;return"object"==typeof ae&&!0===ae.admin};function Ct(he,ae){return Object.prototype.hasOwnProperty.call(he,ae)}function Xt(he,ae){if(Object.prototype.hasOwnProperty.call(he,ae))return he[ae]}function Wt(he){for(const ae in he)if(Object.prototype.hasOwnProperty.call(he,ae))return!1;return!0}function an(he,ae,ge){const Le={};for(const X in he)Object.prototype.hasOwnProperty.call(he,X)&&(Le[X]=ae.call(ge,he[X],X,he));return Le}function In(he,ae){if(he===ae)return!0;const ge=Object.keys(he),Le=Object.keys(ae);for(const X of ge){if(!Le.includes(X))return!1;const te=he[X],se=ae[X];if(rr(te)&&rr(se)){if(!In(te,se))return!1}else if(te!==se)return!1}for(const X of Le)if(!ge.includes(X))return!1;return!0}function rr(he){return null!==he&&"object"==typeof he}function Rn(he){const ae=[];for(const[ge,Le]of Object.entries(he))Array.isArray(Le)?Le.forEach(X=>{ae.push(encodeURIComponent(ge)+"="+encodeURIComponent(X))}):ae.push(encodeURIComponent(ge)+"="+encodeURIComponent(Le));return ae.length?"&"+ae.join("&"):""}function Qn(he){const ae={};return he.replace(/^\?/,"").split("&").forEach(Le=>{if(Le){const[X,te]=Le.split("=");ae[decodeURIComponent(X)]=decodeURIComponent(te)}}),ae}function Ke(he){const ae=he.indexOf("?");if(!ae)return"";const ge=he.indexOf("#",ae);return he.substring(ae,ge>0?ge:void 0)}class Jn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let ae=1;ae<this.blockSize;++ae)this.pad_[ae]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(ae,ge){ge||(ge=0);const Le=this.W_;if("string"==typeof ae)for(let at=0;at<16;at++)Le[at]=ae.charCodeAt(ge)<<24|ae.charCodeAt(ge+1)<<16|ae.charCodeAt(ge+2)<<8|ae.charCodeAt(ge+3),ge+=4;else for(let at=0;at<16;at++)Le[at]=ae[ge]<<24|ae[ge+1]<<16|ae[ge+2]<<8|ae[ge+3],ge+=4;for(let at=16;at<80;at++){const nn=Le[at-3]^Le[at-8]^Le[at-14]^Le[at-16];Le[at]=4294967295&(nn<<1|nn>>>31)}let Et,kt,X=this.chain_[0],te=this.chain_[1],se=this.chain_[2],Ne=this.chain_[3],Xe=this.chain_[4];for(let at=0;at<80;at++){at<40?at<20?(Et=Ne^te&(se^Ne),kt=1518500249):(Et=te^se^Ne,kt=1859775393):at<60?(Et=te&se|Ne&(te|se),kt=2400959708):(Et=te^se^Ne,kt=3395469782);const nn=(X<<5|X>>>27)+Et+Xe+kt+Le[at]&4294967295;Xe=Ne,Ne=se,se=4294967295&(te<<30|te>>>2),te=X,X=nn}this.chain_[0]=this.chain_[0]+X&4294967295,this.chain_[1]=this.chain_[1]+te&4294967295,this.chain_[2]=this.chain_[2]+se&4294967295,this.chain_[3]=this.chain_[3]+Ne&4294967295,this.chain_[4]=this.chain_[4]+Xe&4294967295}update(ae,ge){if(null==ae)return;void 0===ge&&(ge=ae.length);const Le=ge-this.blockSize;let X=0;const te=this.buf_;let se=this.inbuf_;for(;X<ge;){if(0===se)for(;X<=Le;)this.compress_(ae,X),X+=this.blockSize;if("string"==typeof ae){for(;X<ge;)if(te[se]=ae.charCodeAt(X),++se,++X,se===this.blockSize){this.compress_(te),se=0;break}}else for(;X<ge;)if(te[se]=ae[X],++se,++X,se===this.blockSize){this.compress_(te),se=0;break}}this.inbuf_=se,this.total_+=ge}digest(){const ae=[];let ge=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let X=this.blockSize-1;X>=56;X--)this.buf_[X]=255&ge,ge/=256;this.compress_(this.buf_);let Le=0;for(let X=0;X<5;X++)for(let te=24;te>=0;te-=8)ae[Le]=this.chain_[X]>>te&255,++Le;return ae}}function $n(he,ae){const ge=new pt(he,ae);return ge.subscribe.bind(ge)}class pt{constructor(ae,ge){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ge,this.task.then(()=>{ae(this)}).catch(Le=>{this.error(Le)})}next(ae){this.forEachObserver(ge=>{ge.next(ae)})}error(ae){this.forEachObserver(ge=>{ge.error(ae)}),this.close(ae)}complete(){this.forEachObserver(ae=>{ae.complete()}),this.close()}subscribe(ae,ge,Le){let X;if(void 0===ae&&void 0===ge&&void 0===Le)throw new Error("Missing Observer.");X=function(he,ae){if("object"!=typeof he||null===he)return!1;for(const ge of["next","error","complete"])if(ge in he&&"function"==typeof he[ge])return!0;return!1}(ae)?ae:{next:ae,error:ge,complete:Le},void 0===X.next&&(X.next=ln),void 0===X.error&&(X.error=ln),void 0===X.complete&&(X.complete=ln);const te=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?X.error(this.finalError):X.complete()}catch(se){}}),this.observers.push(X),te}unsubscribeOne(ae){void 0===this.observers||void 0===this.observers[ae]||(delete this.observers[ae],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ae){if(!this.finalized)for(let ge=0;ge<this.observers.length;ge++)this.sendOne(ge,ae)}sendOne(ae,ge){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ae])try{ge(this.observers[ae])}catch(Le){"undefined"!=typeof console&&console.error&&console.error(Le)}})}close(ae){this.finalized||(this.finalized=!0,void 0!==ae&&(this.finalError=ae),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ln(){}const ir=function(he,ae,ge,Le){let X;if(Le<ae?X="at least "+ae:Le>ge&&(X=0===ge?"none":"no more than "+ge),X)throw new Error(he+" failed: Was called with "+Le+(1===Le?" argument.":" arguments.")+" Expects "+X+".")};function fr(he,ae){return`${he} failed: ${ae} argument `}function Dn(he,ae,ge,Le){if((!Le||ge)&&"function"!=typeof ge)throw new Error(fr(he,ae)+"must be a valid function.")}function zi(he,ae,ge,Le){if((!Le||ge)&&("object"!=typeof ge||null===ge))throw new Error(fr(he,ae)+"must be a valid context object.")}const Cn=function(he){const ae=[];let ge=0;for(let Le=0;Le<he.length;Le++){let X=he.charCodeAt(Le);if(X>=55296&&X<=56319){const te=X-55296;Le++,k(Le<he.length,"Surrogate pair missing trail surrogate."),X=65536+(te<<10)+(he.charCodeAt(Le)-56320)}X<128?ae[ge++]=X:X<2048?(ae[ge++]=X>>6|192,ae[ge++]=63&X|128):X<65536?(ae[ge++]=X>>12|224,ae[ge++]=X>>6&63|128,ae[ge++]=63&X|128):(ae[ge++]=X>>18|240,ae[ge++]=X>>12&63|128,ae[ge++]=X>>6&63|128,ae[ge++]=63&X|128)}return ae},it=function(he){let ae=0;for(let ge=0;ge<he.length;ge++){const Le=he.charCodeAt(ge);Le<128?ae++:Le<2048?ae+=2:Le>=55296&&Le<=56319?(ae+=4,ge++):ae+=3}return ae};function Nt(he,ae=1e3,ge=2){const Le=ae*Math.pow(ge,he),X=Math.round(.5*Le*(Math.random()-.5)*2);return Math.min(144e5,Le+X)}function cn(he){return he&&he._delegate?he._delegate:he}function St(he,ae){return new Promise((ge,Le)=>{he.onsuccess=X=>{ge(X.target.result)},he.onerror=X=>{var te;Le(`${ae}: ${null===(te=X.target.error)||void 0===te?void 0:te.message}`)}})}class qt{constructor(ae){this._db=ae,this.objectStoreNames=this._db.objectStoreNames}transaction(ae,ge="readonly"){return new rt(this._db.transaction.call(this._db,ae,ge))}createObjectStore(ae,ge){return new qe(this._db.createObjectStore(ae,ge))}close(){this._db.close()}}class rt{constructor(ae){this._transaction=ae,this.complete=new Promise((ge,Le)=>{this._transaction.oncomplete=function(){ge()},this._transaction.onerror=()=>{Le(this._transaction.error)},this._transaction.onabort=()=>{Le(this._transaction.error)}})}objectStore(ae){return new qe(this._transaction.objectStore(ae))}}class qe{constructor(ae){this._store=ae}index(ae){return new mt(this._store.index(ae))}createIndex(ae,ge,Le){return new mt(this._store.createIndex(ae,ge,Le))}get(ae){return St(this._store.get(ae),"Error reading from IndexedDB")}put(ae,ge){return St(this._store.put(ae,ge),"Error writing to IndexedDB")}delete(ae){return St(this._store.delete(ae),"Error deleting from IndexedDB")}clear(){return St(this._store.clear(),"Error clearing IndexedDB object store")}}class mt{constructor(ae){this._index=ae}get(ae){return St(this._index.get(ae),"Error reading from IndexedDB")}}function Mt(he,ae,ge){return new Promise((Le,X)=>{try{const te=indexedDB.open(he,ae);te.onsuccess=se=>{Le(new qt(se.target.result))},te.onerror=se=>{var Ne;X(`Error opening indexedDB: ${null===(Ne=se.target.error)||void 0===Ne?void 0:Ne.message}`)},te.onupgradeneeded=se=>{ge(new qt(te.result),se.oldVersion,se.newVersion,new rt(te.transaction))}}catch(te){X(`Error opening indexedDB: ${te.message}`)}})}function Lt(he){return en.apply(this,arguments)}function en(){return(en=(0,a.Z)(function*(he){return new Promise((ae,ge)=>{try{const Le=indexedDB.deleteDatabase(he);Le.onsuccess=()=>{ae()},Le.onerror=X=>{var te;ge(`Error deleting indexedDB database "${he}": ${null===(te=X.target.error)||void 0===te?void 0:te.message}`)}}catch(Le){ge(`Error deleting indexedDB database "${he}": ${Le.message}`)}})})).apply(this,arguments)}},7832:function(Ve,me,O){var a;Ve.exports=(a=O(1823),O(8341),O(916),O(4369),O(8822),function(){var R=a,Q=R.lib.BlockCipher,ie=R.algo,q=[],ee=[],L=[],U=[],P=[],N=[],A=[],B=[],z=[],J=[];!function(){for(var H=[],Z=0;Z<256;Z++)H[Z]=Z<128?Z<<1:Z<<1^283;var de=0,fe=0;for(Z=0;Z<256;Z++){var Ce=fe^fe<<1^fe<<2^fe<<3^fe<<4;q[de]=Ce=Ce>>>8^255&Ce^99,ee[Ce]=de;var Ae,ve=H[de],He=H[ve],Re=H[He];L[de]=(Ae=257*H[Ce]^16843008*Ce)<<24|Ae>>>8,U[de]=Ae<<16|Ae>>>16,P[de]=Ae<<8|Ae>>>24,N[de]=Ae,A[Ce]=(Ae=16843009*Re^65537*He^257*ve^16843008*de)<<24|Ae>>>8,B[Ce]=Ae<<16|Ae>>>16,z[Ce]=Ae<<8|Ae>>>24,J[Ce]=Ae,de?(de=ve^H[H[H[Re^ve]]],fe^=H[H[fe]]):de=fe=1}}();var re=[0,1,2,4,8,16,32,64,128,27,54],le=ie.AES=Q.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var Z=this._keyPriorReset=this._key,de=Z.words,fe=Z.sigBytes/4,ve=4*((this._nRounds=fe+6)+1),He=this._keySchedule=[],Re=0;Re<ve;Re++)Re<fe?He[Re]=de[Re]:(H=He[Re-1],Re%fe?fe>6&&Re%fe==4&&(H=q[H>>>24]<<24|q[H>>>16&255]<<16|q[H>>>8&255]<<8|q[255&H]):(H=q[(H=H<<8|H>>>24)>>>24]<<24|q[H>>>16&255]<<16|q[H>>>8&255]<<8|q[255&H],H^=re[Re/fe|0]<<24),He[Re]=He[Re-fe]^H);for(var Ae=this._invKeySchedule=[],be=0;be<ve;be++){if(Re=ve-be,be%4)var H=He[Re];else H=He[Re-4];Ae[be]=be<4||Re<=4?H:A[q[H>>>24]]^B[q[H>>>16&255]]^z[q[H>>>8&255]]^J[q[255&H]]}}},encryptBlock:function(H,Z){this._doCryptBlock(H,Z,this._keySchedule,L,U,P,N,q)},decryptBlock:function(H,Z){var de=H[Z+1];H[Z+1]=H[Z+3],H[Z+3]=de,this._doCryptBlock(H,Z,this._invKeySchedule,A,B,z,J,ee),de=H[Z+1],H[Z+1]=H[Z+3],H[Z+3]=de},_doCryptBlock:function(H,Z,de,fe,Ce,ve,He,Re){for(var Ae=this._nRounds,be=H[Z]^de[0],ce=H[Z+1]^de[1],Ee=H[Z+2]^de[2],_e=H[Z+3]^de[3],xe=4,Ie=1;Ie<Ae;Ie++){var Je=fe[be>>>24]^Ce[ce>>>16&255]^ve[Ee>>>8&255]^He[255&_e]^de[xe++],ht=fe[ce>>>24]^Ce[Ee>>>16&255]^ve[_e>>>8&255]^He[255&be]^de[xe++],ct=fe[Ee>>>24]^Ce[_e>>>16&255]^ve[be>>>8&255]^He[255&ce]^de[xe++],Oe=fe[_e>>>24]^Ce[be>>>16&255]^ve[ce>>>8&255]^He[255&Ee]^de[xe++];be=Je,ce=ht,Ee=ct,_e=Oe}Je=(Re[be>>>24]<<24|Re[ce>>>16&255]<<16|Re[Ee>>>8&255]<<8|Re[255&_e])^de[xe++],ht=(Re[ce>>>24]<<24|Re[Ee>>>16&255]<<16|Re[_e>>>8&255]<<8|Re[255&be])^de[xe++],ct=(Re[Ee>>>24]<<24|Re[_e>>>16&255]<<16|Re[be>>>8&255]<<8|Re[255&ce])^de[xe++],Oe=(Re[_e>>>24]<<24|Re[be>>>16&255]<<16|Re[ce>>>8&255]<<8|Re[255&Ee])^de[xe++],H[Z]=Je,H[Z+1]=ht,H[Z+2]=ct,H[Z+3]=Oe},keySize:8});R.AES=Q._createHelper(le)}(),a.AES)},8822:function(Ve,me,O){var k,Q,ie,q,ee,L,P,A,B,J,re,le,Z,fe,ve,He,Ae,be,a;Ve.exports=(a=O(1823),O(4369),void(a.lib.Cipher||(k=a,Q=k.lib,ie=Q.Base,q=Q.WordArray,ee=Q.BufferedBlockAlgorithm,L=k.enc,P=L.Base64,A=k.algo.EvpKDF,B=Q.Cipher=ee.extend({cfg:ie.extend(),createEncryptor:function(ce,Ee){return this.create(this._ENC_XFORM_MODE,ce,Ee)},createDecryptor:function(ce,Ee){return this.create(this._DEC_XFORM_MODE,ce,Ee)},init:function(ce,Ee,_e){this.cfg=this.cfg.extend(_e),this._xformMode=ce,this._key=Ee,this.reset()},reset:function(){ee.reset.call(this),this._doReset()},process:function(ce){return this._append(ce),this._process()},finalize:function(ce){return ce&&this._append(ce),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function ce(Ee){return"string"==typeof Ee?be:He}return function(Ee){return{encrypt:function(_e,xe,Ie){return ce(xe).encrypt(Ee,_e,xe,Ie)},decrypt:function(_e,xe,Ie){return ce(xe).decrypt(Ee,_e,xe,Ie)}}}}()}),Q.StreamCipher=B.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),J=k.mode={},re=Q.BlockCipherMode=ie.extend({createEncryptor:function(ce,Ee){return this.Encryptor.create(ce,Ee)},createDecryptor:function(ce,Ee){return this.Decryptor.create(ce,Ee)},init:function(ce,Ee){this._cipher=ce,this._iv=Ee}}),le=J.CBC=function(){var ce=re.extend();function Ee(_e,xe,Ie){var Je,ht=this._iv;ht?(Je=ht,this._iv=undefined):Je=this._prevBlock;for(var ct=0;ct<Ie;ct++)_e[xe+ct]^=Je[ct]}return ce.Encryptor=ce.extend({processBlock:function(_e,xe){var Ie=this._cipher,Je=Ie.blockSize;Ee.call(this,_e,xe,Je),Ie.encryptBlock(_e,xe),this._prevBlock=_e.slice(xe,xe+Je)}}),ce.Decryptor=ce.extend({processBlock:function(_e,xe){var Ie=this._cipher,Je=Ie.blockSize,ht=_e.slice(xe,xe+Je);Ie.decryptBlock(_e,xe),Ee.call(this,_e,xe,Je),this._prevBlock=ht}}),ce}(),Z=(k.pad={}).Pkcs7={pad:function(ce,Ee){for(var _e=4*Ee,xe=_e-ce.sigBytes%_e,Ie=xe<<24|xe<<16|xe<<8|xe,Je=[],ht=0;ht<xe;ht+=4)Je.push(Ie);var ct=q.create(Je,xe);ce.concat(ct)},unpad:function(ce){ce.sigBytes-=255&ce.words[ce.sigBytes-1>>>2]}},Q.BlockCipher=B.extend({cfg:B.cfg.extend({mode:le,padding:Z}),reset:function(){var ce;B.reset.call(this);var Ee=this.cfg,_e=Ee.iv,xe=Ee.mode;this._xformMode==this._ENC_XFORM_MODE?ce=xe.createEncryptor:(ce=xe.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==ce?this._mode.init(this,_e&&_e.words):(this._mode=ce.call(xe,this,_e&&_e.words),this._mode.__creator=ce)},_doProcessBlock:function(ce,Ee){this._mode.processBlock(ce,Ee)},_doFinalize:function(){var ce,Ee=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(Ee.pad(this._data,this.blockSize),ce=this._process(!0)):(ce=this._process(!0),Ee.unpad(ce)),ce},blockSize:4}),fe=Q.CipherParams=ie.extend({init:function(ce){this.mixIn(ce)},toString:function(ce){return(ce||this.formatter).stringify(this)}}),ve=(k.format={}).OpenSSL={stringify:function(ce){var _e=ce.ciphertext,xe=ce.salt;return(xe?q.create([1398893684,1701076831]).concat(xe).concat(_e):_e).toString(P)},parse:function(ce){var Ee,_e=P.parse(ce),xe=_e.words;return 1398893684==xe[0]&&1701076831==xe[1]&&(Ee=q.create(xe.slice(2,4)),xe.splice(0,4),_e.sigBytes-=16),fe.create({ciphertext:_e,salt:Ee})}},He=Q.SerializableCipher=ie.extend({cfg:ie.extend({format:ve}),encrypt:function(ce,Ee,_e,xe){xe=this.cfg.extend(xe);var Ie=ce.createEncryptor(_e,xe),Je=Ie.finalize(Ee),ht=Ie.cfg;return fe.create({ciphertext:Je,key:_e,iv:ht.iv,algorithm:ce,mode:ht.mode,padding:ht.padding,blockSize:ce.blockSize,formatter:xe.format})},decrypt:function(ce,Ee,_e,xe){return xe=this.cfg.extend(xe),Ee=this._parse(Ee,xe.format),ce.createDecryptor(_e,xe).finalize(Ee.ciphertext)},_parse:function(ce,Ee){return"string"==typeof ce?Ee.parse(ce,this):ce}}),Ae=(k.kdf={}).OpenSSL={execute:function(ce,Ee,_e,xe){xe||(xe=q.random(8));var Ie=A.create({keySize:Ee+_e}).compute(ce,xe),Je=q.create(Ie.words.slice(Ee),4*_e);return Ie.sigBytes=4*Ee,fe.create({key:Ie,iv:Je,salt:xe})}},be=Q.PasswordBasedCipher=He.extend({cfg:He.cfg.extend({kdf:Ae}),encrypt:function(ce,Ee,_e,xe){var Ie=(xe=this.cfg.extend(xe)).kdf.execute(_e,ce.keySize,ce.ivSize);xe.iv=Ie.iv;var Je=He.encrypt.call(this,ce,Ee,Ie.key,xe);return Je.mixIn(Ie),Je},decrypt:function(ce,Ee,_e,xe){xe=this.cfg.extend(xe),Ee=this._parse(Ee,xe.format);var Ie=xe.kdf.execute(_e,ce.keySize,ce.ivSize,Ee.salt);return xe.iv=Ie.iv,He.decrypt.call(this,ce,Ee,Ie.key,xe)}}))))},1823:function(Ve,me,O){var a;Ve.exports=a=a||function(R,k){var Q;if("undefined"!=typeof window&&window.crypto&&(Q=window.crypto),"undefined"!=typeof self&&self.crypto&&(Q=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(Q=globalThis.crypto),!Q&&"undefined"!=typeof window&&window.msCrypto&&(Q=window.msCrypto),!Q&&"undefined"!=typeof global&&global.crypto&&(Q=global.crypto),!Q)try{Q=O(2480)}catch(H){}var ie=function(){if(Q){if("function"==typeof Q.getRandomValues)try{return Q.getRandomValues(new Uint32Array(1))[0]}catch(H){}if("function"==typeof Q.randomBytes)try{return Q.randomBytes(4).readInt32LE()}catch(H){}}throw new Error("Native crypto module could not be used to get secure random number.")},q=Object.create||function(){function H(){}return function(Z){var de;return H.prototype=Z,de=new H,H.prototype=null,de}}(),ee={},L=ee.lib={},U=L.Base={extend:function(H){var Z=q(this);return H&&Z.mixIn(H),(!Z.hasOwnProperty("init")||this.init===Z.init)&&(Z.init=function(){Z.$super.init.apply(this,arguments)}),Z.init.prototype=Z,Z.$super=this,Z},create:function(){var H=this.extend();return H.init.apply(H,arguments),H},init:function(){},mixIn:function(H){for(var Z in H)H.hasOwnProperty(Z)&&(this[Z]=H[Z]);H.hasOwnProperty("toString")&&(this.toString=H.toString)},clone:function(){return this.init.prototype.extend(this)}},P=L.WordArray=U.extend({init:function(H,Z){H=this.words=H||[],this.sigBytes=null!=Z?Z:4*H.length},toString:function(H){return(H||A).stringify(this)},concat:function(H){var Z=this.words,de=H.words,fe=this.sigBytes,Ce=H.sigBytes;if(this.clamp(),fe%4)for(var ve=0;ve<Ce;ve++)Z[fe+ve>>>2]|=(de[ve>>>2]>>>24-ve%4*8&255)<<24-(fe+ve)%4*8;else for(var Re=0;Re<Ce;Re+=4)Z[fe+Re>>>2]=de[Re>>>2];return this.sigBytes+=Ce,this},clamp:function(){var H=this.words,Z=this.sigBytes;H[Z>>>2]&=4294967295<<32-Z%4*8,H.length=R.ceil(Z/4)},clone:function(){var H=U.clone.call(this);return H.words=this.words.slice(0),H},random:function(H){for(var Z=[],de=0;de<H;de+=4)Z.push(ie());return new P.init(Z,H)}}),N=ee.enc={},A=N.Hex={stringify:function(H){for(var Z=H.words,de=H.sigBytes,fe=[],Ce=0;Ce<de;Ce++){var ve=Z[Ce>>>2]>>>24-Ce%4*8&255;fe.push((ve>>>4).toString(16)),fe.push((15&ve).toString(16))}return fe.join("")},parse:function(H){for(var Z=H.length,de=[],fe=0;fe<Z;fe+=2)de[fe>>>3]|=parseInt(H.substr(fe,2),16)<<24-fe%8*4;return new P.init(de,Z/2)}},B=N.Latin1={stringify:function(H){for(var Z=H.words,de=H.sigBytes,fe=[],Ce=0;Ce<de;Ce++)fe.push(String.fromCharCode(Z[Ce>>>2]>>>24-Ce%4*8&255));return fe.join("")},parse:function(H){for(var Z=H.length,de=[],fe=0;fe<Z;fe++)de[fe>>>2]|=(255&H.charCodeAt(fe))<<24-fe%4*8;return new P.init(de,Z)}},z=N.Utf8={stringify:function(H){try{return decodeURIComponent(escape(B.stringify(H)))}catch(Z){throw new Error("Malformed UTF-8 data")}},parse:function(H){return B.parse(unescape(encodeURIComponent(H)))}},J=L.BufferedBlockAlgorithm=U.extend({reset:function(){this._data=new P.init,this._nDataBytes=0},_append:function(H){"string"==typeof H&&(H=z.parse(H)),this._data.concat(H),this._nDataBytes+=H.sigBytes},_process:function(H){var Z,de=this._data,fe=de.words,Ce=de.sigBytes,ve=this.blockSize,Re=Ce/(4*ve),Ae=(Re=H?R.ceil(Re):R.max((0|Re)-this._minBufferSize,0))*ve,be=R.min(4*Ae,Ce);if(Ae){for(var ce=0;ce<Ae;ce+=ve)this._doProcessBlock(fe,ce);Z=fe.splice(0,Ae),de.sigBytes-=be}return new P.init(Z,be)},clone:function(){var H=U.clone.call(this);return H._data=this._data.clone(),H},_minBufferSize:0}),le=(L.Hasher=J.extend({cfg:U.extend(),init:function(H){this.cfg=this.cfg.extend(H),this.reset()},reset:function(){J.reset.call(this),this._doReset()},update:function(H){return this._append(H),this._process(),this},finalize:function(H){return H&&this._append(H),this._doFinalize()},blockSize:16,_createHelper:function(H){return function(Z,de){return new H.init(de).finalize(Z)}},_createHmacHelper:function(H){return function(Z,de){return new le.HMAC.init(H,de).finalize(Z)}}}),ee.algo={});return ee}(Math)},8341:function(Ve,me,O){var a,Q;Ve.exports=(a=O(1823),Q=a.lib.WordArray,a.enc.Base64={stringify:function(L){var U=L.words,P=L.sigBytes,N=this._map;L.clamp();for(var A=[],B=0;B<P;B+=3)for(var le=(U[B>>>2]>>>24-B%4*8&255)<<16|(U[B+1>>>2]>>>24-(B+1)%4*8&255)<<8|U[B+2>>>2]>>>24-(B+2)%4*8&255,H=0;H<4&&B+.75*H<P;H++)A.push(N.charAt(le>>>6*(3-H)&63));var Z=N.charAt(64);if(Z)for(;A.length%4;)A.push(Z);return A.join("")},parse:function(L){var U=L.length,P=this._map,N=this._reverseMap;if(!N){N=this._reverseMap=[];for(var A=0;A<P.length;A++)N[P.charCodeAt(A)]=A}var B=P.charAt(64);if(B){var z=L.indexOf(B);-1!==z&&(U=z)}return function(L,U,P){for(var N=[],A=0,B=0;B<U;B++)if(B%4){var z=P[L.charCodeAt(B-1)]<<B%4*2,J=P[L.charCodeAt(B)]>>>6-B%4*2;N[A>>>2]|=(z|J)<<24-A%4*8,A++}return Q.create(N,A)}(L,U,N)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},a.enc.Base64)},9237:function(Ve,me,O){var a,Q;Ve.exports=(a=O(1823),Q=a.lib.WordArray,a.enc.Base64url={stringify:function(L,U=!0){var P=L.words,N=L.sigBytes,A=U?this._safe_map:this._map;L.clamp();for(var B=[],z=0;z<N;z+=3)for(var H=(P[z>>>2]>>>24-z%4*8&255)<<16|(P[z+1>>>2]>>>24-(z+1)%4*8&255)<<8|P[z+2>>>2]>>>24-(z+2)%4*8&255,Z=0;Z<4&&z+.75*Z<N;Z++)B.push(A.charAt(H>>>6*(3-Z)&63));var de=A.charAt(64);if(de)for(;B.length%4;)B.push(de);return B.join("")},parse:function(L,U=!0){var P=L.length,N=U?this._safe_map:this._map,A=this._reverseMap;if(!A){A=this._reverseMap=[];for(var B=0;B<N.length;B++)A[N.charCodeAt(B)]=B}var z=N.charAt(64);if(z){var J=L.indexOf(z);-1!==J&&(P=J)}return function(L,U,P){for(var N=[],A=0,B=0;B<U;B++)if(B%4){var z=P[L.charCodeAt(B-1)]<<B%4*2,J=P[L.charCodeAt(B)]>>>6-B%4*2;N[A>>>2]|=(z|J)<<24-A%4*8,A++}return Q.create(N,A)}(L,P,A)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},a.enc.Base64url)},4153:function(Ve,me,O){var a;Ve.exports=(a=O(1823),function(){var Q=a.lib.WordArray,ie=a.enc;function ee(L){return L<<8&4278255360|L>>>8&16711935}ie.Utf16=ie.Utf16BE={stringify:function(L){for(var U=L.words,P=L.sigBytes,N=[],A=0;A<P;A+=2)N.push(String.fromCharCode(U[A>>>2]>>>16-A%4*8&65535));return N.join("")},parse:function(L){for(var U=L.length,P=[],N=0;N<U;N++)P[N>>>1]|=L.charCodeAt(N)<<16-N%2*16;return Q.create(P,2*U)}},ie.Utf16LE={stringify:function(L){for(var U=L.words,P=L.sigBytes,N=[],A=0;A<P;A+=2){var B=ee(U[A>>>2]>>>16-A%4*8&65535);N.push(String.fromCharCode(B))}return N.join("")},parse:function(L){for(var U=L.length,P=[],N=0;N<U;N++)P[N>>>1]|=ee(L.charCodeAt(N)<<16-N%2*16);return Q.create(P,2*U)}}}(),a.enc.Utf16)},4369:function(Ve,me,O){var R,k,Q,ie,q,L,a;Ve.exports=(a=O(1823),O(6496),O(3331),ie=(k=(R=a).lib).WordArray,L=(q=R.algo).EvpKDF=(Q=k.Base).extend({cfg:Q.extend({keySize:4,hasher:q.MD5,iterations:1}),init:function(U){this.cfg=this.cfg.extend(U)},compute:function(U,P){for(var N,A=this.cfg,B=A.hasher.create(),z=ie.create(),J=z.words,re=A.keySize,le=A.iterations;J.length<re;){N&&B.update(N),N=B.update(U).finalize(P),B.reset();for(var H=1;H<le;H++)N=B.finalize(N),B.reset();z.concat(N)}return z.sigBytes=4*re,z}}),R.EvpKDF=function(U,P,N){return L.create(N).compute(U,P)},a.EvpKDF)},5383:function(Ve,me,O){var a,ie,ee;Ve.exports=(a=O(1823),O(8822),ie=a.lib.CipherParams,ee=a.enc.Hex,a.format.Hex={stringify:function(P){return P.ciphertext.toString(ee)},parse:function(P){var N=ee.parse(P);return ie.create({ciphertext:N})}},a.format.Hex)},3331:function(Ve,me,O){var a,q;Ve.exports=(a=O(1823),q=a.enc.Utf8,void(a.algo.HMAC=a.lib.Base.extend({init:function(U,P){U=this._hasher=new U.init,"string"==typeof P&&(P=q.parse(P));var N=U.blockSize,A=4*N;P.sigBytes>A&&(P=U.finalize(P)),P.clamp();for(var B=this._oKey=P.clone(),z=this._iKey=P.clone(),J=B.words,re=z.words,le=0;le<N;le++)J[le]^=1549556828,re[le]^=909522486;B.sigBytes=z.sigBytes=A,this.reset()},reset:function(){var U=this._hasher;U.reset(),U.update(this._iKey)},update:function(U){return this._hasher.update(U),this},finalize:function(U){var P=this._hasher,N=P.finalize(U);return P.reset(),P.finalize(this._oKey.clone().concat(N))}})))},2527:function(Ve,me,O){var a;Ve.exports=(a=O(1823),O(4615),O(4194),O(4153),O(8341),O(9237),O(916),O(6496),O(6946),O(6538),O(1206),O(7098),O(2633),O(5508),O(3331),O(3096),O(4369),O(8822),O(8915),O(9913),O(1981),O(7163),O(6447),O(3199),O(9049),O(2812),O(5355),O(1247),O(5383),O(7832),O(4994),O(1093),O(7076),O(5625),a)},4194:function(Ve,me,O){var a;Ve.exports=(a=O(1823),function(){if("function"==typeof ArrayBuffer){var Q=a.lib.WordArray,ie=Q.init;(Q.init=function(ee){if(ee instanceof ArrayBuffer&&(ee=new Uint8Array(ee)),(ee instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&ee instanceof Uint8ClampedArray||ee instanceof Int16Array||ee instanceof Uint16Array||ee instanceof Int32Array||ee instanceof Uint32Array||ee instanceof Float32Array||ee instanceof Float64Array)&&(ee=new Uint8Array(ee.buffer,ee.byteOffset,ee.byteLength)),ee instanceof Uint8Array){for(var L=ee.byteLength,U=[],P=0;P<L;P++)U[P>>>2]|=ee[P]<<24-P%4*8;ie.call(this,U,L)}else ie.apply(this,arguments)}).prototype=Q}}(),a.lib.WordArray)},916:function(Ve,me,O){var a;Ve.exports=(a=O(1823),function(R){var k=a,Q=k.lib,ie=Q.WordArray,q=Q.Hasher,ee=k.algo,L=[];!function(){for(var z=0;z<64;z++)L[z]=4294967296*R.abs(R.sin(z+1))|0}();var U=ee.MD5=q.extend({_doReset:function(){this._hash=new ie.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(z,J){for(var re=0;re<16;re++){var le=J+re,H=z[le];z[le]=16711935&(H<<8|H>>>24)|4278255360&(H<<24|H>>>8)}var Z=this._hash.words,de=z[J+0],fe=z[J+1],Ce=z[J+2],ve=z[J+3],He=z[J+4],Re=z[J+5],Ae=z[J+6],be=z[J+7],ce=z[J+8],Ee=z[J+9],_e=z[J+10],xe=z[J+11],Ie=z[J+12],Je=z[J+13],ht=z[J+14],ct=z[J+15],Oe=Z[0],Fe=Z[1],ke=Z[2],We=Z[3];Oe=P(Oe,Fe,ke,We,de,7,L[0]),We=P(We,Oe,Fe,ke,fe,12,L[1]),ke=P(ke,We,Oe,Fe,Ce,17,L[2]),Fe=P(Fe,ke,We,Oe,ve,22,L[3]),Oe=P(Oe,Fe,ke,We,He,7,L[4]),We=P(We,Oe,Fe,ke,Re,12,L[5]),ke=P(ke,We,Oe,Fe,Ae,17,L[6]),Fe=P(Fe,ke,We,Oe,be,22,L[7]),Oe=P(Oe,Fe,ke,We,ce,7,L[8]),We=P(We,Oe,Fe,ke,Ee,12,L[9]),ke=P(ke,We,Oe,Fe,_e,17,L[10]),Fe=P(Fe,ke,We,Oe,xe,22,L[11]),Oe=P(Oe,Fe,ke,We,Ie,7,L[12]),We=P(We,Oe,Fe,ke,Je,12,L[13]),ke=P(ke,We,Oe,Fe,ht,17,L[14]),Oe=N(Oe,Fe=P(Fe,ke,We,Oe,ct,22,L[15]),ke,We,fe,5,L[16]),We=N(We,Oe,Fe,ke,Ae,9,L[17]),ke=N(ke,We,Oe,Fe,xe,14,L[18]),Fe=N(Fe,ke,We,Oe,de,20,L[19]),Oe=N(Oe,Fe,ke,We,Re,5,L[20]),We=N(We,Oe,Fe,ke,_e,9,L[21]),ke=N(ke,We,Oe,Fe,ct,14,L[22]),Fe=N(Fe,ke,We,Oe,He,20,L[23]),Oe=N(Oe,Fe,ke,We,Ee,5,L[24]),We=N(We,Oe,Fe,ke,ht,9,L[25]),ke=N(ke,We,Oe,Fe,ve,14,L[26]),Fe=N(Fe,ke,We,Oe,ce,20,L[27]),Oe=N(Oe,Fe,ke,We,Je,5,L[28]),We=N(We,Oe,Fe,ke,Ce,9,L[29]),ke=N(ke,We,Oe,Fe,be,14,L[30]),Oe=A(Oe,Fe=N(Fe,ke,We,Oe,Ie,20,L[31]),ke,We,Re,4,L[32]),We=A(We,Oe,Fe,ke,ce,11,L[33]),ke=A(ke,We,Oe,Fe,xe,16,L[34]),Fe=A(Fe,ke,We,Oe,ht,23,L[35]),Oe=A(Oe,Fe,ke,We,fe,4,L[36]),We=A(We,Oe,Fe,ke,He,11,L[37]),ke=A(ke,We,Oe,Fe,be,16,L[38]),Fe=A(Fe,ke,We,Oe,_e,23,L[39]),Oe=A(Oe,Fe,ke,We,Je,4,L[40]),We=A(We,Oe,Fe,ke,de,11,L[41]),ke=A(ke,We,Oe,Fe,ve,16,L[42]),Fe=A(Fe,ke,We,Oe,Ae,23,L[43]),Oe=A(Oe,Fe,ke,We,Ee,4,L[44]),We=A(We,Oe,Fe,ke,Ie,11,L[45]),ke=A(ke,We,Oe,Fe,ct,16,L[46]),Oe=B(Oe,Fe=A(Fe,ke,We,Oe,Ce,23,L[47]),ke,We,de,6,L[48]),We=B(We,Oe,Fe,ke,be,10,L[49]),ke=B(ke,We,Oe,Fe,ht,15,L[50]),Fe=B(Fe,ke,We,Oe,Re,21,L[51]),Oe=B(Oe,Fe,ke,We,Ie,6,L[52]),We=B(We,Oe,Fe,ke,ve,10,L[53]),ke=B(ke,We,Oe,Fe,_e,15,L[54]),Fe=B(Fe,ke,We,Oe,fe,21,L[55]),Oe=B(Oe,Fe,ke,We,ce,6,L[56]),We=B(We,Oe,Fe,ke,ct,10,L[57]),ke=B(ke,We,Oe,Fe,Ae,15,L[58]),Fe=B(Fe,ke,We,Oe,Je,21,L[59]),Oe=B(Oe,Fe,ke,We,He,6,L[60]),We=B(We,Oe,Fe,ke,xe,10,L[61]),ke=B(ke,We,Oe,Fe,Ce,15,L[62]),Fe=B(Fe,ke,We,Oe,Ee,21,L[63]),Z[0]=Z[0]+Oe|0,Z[1]=Z[1]+Fe|0,Z[2]=Z[2]+ke|0,Z[3]=Z[3]+We|0},_doFinalize:function(){var z=this._data,J=z.words,re=8*this._nDataBytes,le=8*z.sigBytes;J[le>>>5]|=128<<24-le%32;var H=R.floor(re/4294967296),Z=re;J[15+(le+64>>>9<<4)]=16711935&(H<<8|H>>>24)|4278255360&(H<<24|H>>>8),J[14+(le+64>>>9<<4)]=16711935&(Z<<8|Z>>>24)|4278255360&(Z<<24|Z>>>8),z.sigBytes=4*(J.length+1),this._process();for(var de=this._hash,fe=de.words,Ce=0;Ce<4;Ce++){var ve=fe[Ce];fe[Ce]=16711935&(ve<<8|ve>>>24)|4278255360&(ve<<24|ve>>>8)}return de},clone:function(){var z=q.clone.call(this);return z._hash=this._hash.clone(),z}});function P(z,J,re,le,H,Z,de){var fe=z+(J&re|~J&le)+H+de;return(fe<<Z|fe>>>32-Z)+J}function N(z,J,re,le,H,Z,de){var fe=z+(J&le|re&~le)+H+de;return(fe<<Z|fe>>>32-Z)+J}function A(z,J,re,le,H,Z,de){var fe=z+(J^re^le)+H+de;return(fe<<Z|fe>>>32-Z)+J}function B(z,J,re,le,H,Z,de){var fe=z+(re^(J|~le))+H+de;return(fe<<Z|fe>>>32-Z)+J}k.MD5=q._createHelper(U),k.HmacMD5=q._createHmacHelper(U)}(Math),a.MD5)},8915:function(Ve,me,O){var a;Ve.exports=(a=O(1823),O(8822),a.mode.CFB=function(){var R=a.lib.BlockCipherMode.extend();function k(Q,ie,q,ee){var L,U=this._iv;U?(L=U.slice(0),this._iv=void 0):L=this._prevBlock,ee.encryptBlock(L,0);for(var P=0;P<q;P++)Q[ie+P]^=L[P]}return R.Encryptor=R.extend({processBlock:function(Q,ie){var q=this._cipher,ee=q.blockSize;k.call(this,Q,ie,ee,q),this._prevBlock=Q.slice(ie,ie+ee)}}),R.Decryptor=R.extend({processBlock:function(Q,ie){var q=this._cipher,ee=q.blockSize,L=Q.slice(ie,ie+ee);k.call(this,Q,ie,ee,q),this._prevBlock=L}}),R}(),a.mode.CFB)},1981:function(Ve,me,O){var a;Ve.exports=(a=O(1823),O(8822),a.mode.CTRGladman=function(){var R=a.lib.BlockCipherMode.extend();function k(q){if(255==(q>>24&255)){var ee=q>>16&255,L=q>>8&255,U=255&q;255===ee?(ee=0,255===L?(L=0,255===U?U=0:++U):++L):++ee,q=0,q+=ee<<16,q+=L<<8,q+=U}else q+=1<<24;return q}var ie=R.Encryptor=R.extend({processBlock:function(q,ee){var L=this._cipher,U=L.blockSize,P=this._iv,N=this._counter;P&&(N=this._counter=P.slice(0),this._iv=void 0),function(q){0===(q[0]=k(q[0]))&&(q[1]=k(q[1]))}(N);var A=N.slice(0);L.encryptBlock(A,0);for(var B=0;B<U;B++)q[ee+B]^=A[B]}});return R.Decryptor=ie,R}(),a.mode.CTRGladman)},9913:function(Ve,me,O){var R,k,a;Ve.exports=(a=O(1823),O(8822),a.mode.CTR=(k=(R=a.lib.BlockCipherMode.extend()).Encryptor=R.extend({processBlock:function(Q,ie){var q=this._cipher,ee=q.blockSize,L=this._iv,U=this._counter;L&&(U=this._counter=L.slice(0),this._iv=void 0);var P=U.slice(0);q.encryptBlock(P,0),U[ee-1]=U[ee-1]+1|0;for(var N=0;N<ee;N++)Q[ie+N]^=P[N]}}),R.Decryptor=k,R),a.mode.CTR)},6447:function(Ve,me,O){var R,a;Ve.exports=(a=O(1823),O(8822),a.mode.ECB=((R=a.lib.BlockCipherMode.extend()).Encryptor=R.extend({processBlock:function(k,Q){this._cipher.encryptBlock(k,Q)}}),R.Decryptor=R.extend({processBlock:function(k,Q){this._cipher.decryptBlock(k,Q)}}),R),a.mode.ECB)},7163:function(Ve,me,O){var R,k,a;Ve.exports=(a=O(1823),O(8822),a.mode.OFB=(k=(R=a.lib.BlockCipherMode.extend()).Encryptor=R.extend({processBlock:function(Q,ie){var q=this._cipher,ee=q.blockSize,L=this._iv,U=this._keystream;L&&(U=this._keystream=L.slice(0),this._iv=void 0),q.encryptBlock(U,0);for(var P=0;P<ee;P++)Q[ie+P]^=U[P]}}),R.Decryptor=k,R),a.mode.OFB)},3199:function(Ve,me,O){var a;Ve.exports=(a=O(1823),O(8822),a.pad.AnsiX923={pad:function(R,k){var Q=R.sigBytes,ie=4*k,q=ie-Q%ie,ee=Q+q-1;R.clamp(),R.words[ee>>>2]|=q<<24-ee%4*8,R.sigBytes+=q},unpad:function(R){R.sigBytes-=255&R.words[R.sigBytes-1>>>2]}},a.pad.Ansix923)},9049:function(Ve,me,O){var a;Ve.exports=(a=O(1823),O(8822),a.pad.Iso10126={pad:function(R,k){var Q=4*k,ie=Q-R.sigBytes%Q;R.concat(a.lib.WordArray.random(ie-1)).concat(a.lib.WordArray.create([ie<<24],1))},unpad:function(R){R.sigBytes-=255&R.words[R.sigBytes-1>>>2]}},a.pad.Iso10126)},2812:function(Ve,me,O){var a;Ve.exports=(a=O(1823),O(8822),a.pad.Iso97971={pad:function(R,k){R.concat(a.lib.WordArray.create([2147483648],1)),a.pad.ZeroPadding.pad(R,k)},unpad:function(R){a.pad.ZeroPadding.unpad(R),R.sigBytes--}},a.pad.Iso97971)},1247:function(Ve,me,O){var a;Ve.exports=(a=O(1823),O(8822),a.pad.NoPadding={pad:function(){},unpad:function(){}},a.pad.NoPadding)},5355:function(Ve,me,O){var a;Ve.exports=(a=O(1823),O(8822),a.pad.ZeroPadding={pad:function(R,k){var Q=4*k;R.clamp(),R.sigBytes+=Q-(R.sigBytes%Q||Q)},unpad:function(R){var k=R.words,Q=R.sigBytes-1;for(Q=R.sigBytes-1;Q>=0;Q--)if(k[Q>>>2]>>>24-Q%4*8&255){R.sigBytes=Q+1;break}}},a.pad.ZeroPadding)},3096:function(Ve,me,O){var R,k,Q,ie,q,L,U,a;Ve.exports=(a=O(1823),O(6496),O(3331),ie=(k=(R=a).lib).WordArray,L=(q=R.algo).HMAC,U=q.PBKDF2=(Q=k.Base).extend({cfg:Q.extend({keySize:4,hasher:q.SHA1,iterations:1}),init:function(P){this.cfg=this.cfg.extend(P)},compute:function(P,N){for(var A=this.cfg,B=L.create(A.hasher,P),z=ie.create(),J=ie.create([1]),re=z.words,le=J.words,H=A.keySize,Z=A.iterations;re.length<H;){var de=B.update(N).finalize(J);B.reset();for(var fe=de.words,Ce=fe.length,ve=de,He=1;He<Z;He++){ve=B.finalize(ve),B.reset();for(var Re=ve.words,Ae=0;Ae<Ce;Ae++)fe[Ae]^=Re[Ae]}z.concat(de),le[0]++}return z.sigBytes=4*H,z}}),R.PBKDF2=function(P,N,A){return U.create(A).compute(P,N)},a.PBKDF2)},5625:function(Ve,me,O){var a;Ve.exports=(a=O(1823),O(8341),O(916),O(4369),O(8822),function(){var R=a,Q=R.lib.StreamCipher,q=[],ee=[],L=[],U=R.algo.RabbitLegacy=Q.extend({_doReset:function(){var N=this._key.words,A=this.cfg.iv,B=this._X=[N[0],N[3]<<16|N[2]>>>16,N[1],N[0]<<16|N[3]>>>16,N[2],N[1]<<16|N[0]>>>16,N[3],N[2]<<16|N[1]>>>16],z=this._C=[N[2]<<16|N[2]>>>16,4294901760&N[0]|65535&N[1],N[3]<<16|N[3]>>>16,4294901760&N[1]|65535&N[2],N[0]<<16|N[0]>>>16,4294901760&N[2]|65535&N[3],N[1]<<16|N[1]>>>16,4294901760&N[3]|65535&N[0]];this._b=0;for(var J=0;J<4;J++)P.call(this);for(J=0;J<8;J++)z[J]^=B[J+4&7];if(A){var re=A.words,le=re[0],H=re[1],Z=16711935&(le<<8|le>>>24)|4278255360&(le<<24|le>>>8),de=16711935&(H<<8|H>>>24)|4278255360&(H<<24|H>>>8),fe=Z>>>16|4294901760&de,Ce=de<<16|65535&Z;for(z[0]^=Z,z[1]^=fe,z[2]^=de,z[3]^=Ce,z[4]^=Z,z[5]^=fe,z[6]^=de,z[7]^=Ce,J=0;J<4;J++)P.call(this)}},_doProcessBlock:function(N,A){var B=this._X;P.call(this),q[0]=B[0]^B[5]>>>16^B[3]<<16,q[1]=B[2]^B[7]>>>16^B[5]<<16,q[2]=B[4]^B[1]>>>16^B[7]<<16,q[3]=B[6]^B[3]>>>16^B[1]<<16;for(var z=0;z<4;z++)q[z]=16711935&(q[z]<<8|q[z]>>>24)|4278255360&(q[z]<<24|q[z]>>>8),N[A+z]^=q[z]},blockSize:4,ivSize:2});function P(){for(var N=this._X,A=this._C,B=0;B<8;B++)ee[B]=A[B];for(A[0]=A[0]+1295307597+this._b|0,A[1]=A[1]+3545052371+(A[0]>>>0<ee[0]>>>0?1:0)|0,A[2]=A[2]+886263092+(A[1]>>>0<ee[1]>>>0?1:0)|0,A[3]=A[3]+1295307597+(A[2]>>>0<ee[2]>>>0?1:0)|0,A[4]=A[4]+3545052371+(A[3]>>>0<ee[3]>>>0?1:0)|0,A[5]=A[5]+886263092+(A[4]>>>0<ee[4]>>>0?1:0)|0,A[6]=A[6]+1295307597+(A[5]>>>0<ee[5]>>>0?1:0)|0,A[7]=A[7]+3545052371+(A[6]>>>0<ee[6]>>>0?1:0)|0,this._b=A[7]>>>0<ee[7]>>>0?1:0,B=0;B<8;B++){var z=N[B]+A[B],J=65535&z,re=z>>>16;L[B]=((J*J>>>17)+J*re>>>15)+re*re^((4294901760&z)*z|0)+((65535&z)*z|0)}N[0]=L[0]+(L[7]<<16|L[7]>>>16)+(L[6]<<16|L[6]>>>16)|0,N[1]=L[1]+(L[0]<<8|L[0]>>>24)+L[7]|0,N[2]=L[2]+(L[1]<<16|L[1]>>>16)+(L[0]<<16|L[0]>>>16)|0,N[3]=L[3]+(L[2]<<8|L[2]>>>24)+L[1]|0,N[4]=L[4]+(L[3]<<16|L[3]>>>16)+(L[2]<<16|L[2]>>>16)|0,N[5]=L[5]+(L[4]<<8|L[4]>>>24)+L[3]|0,N[6]=L[6]+(L[5]<<16|L[5]>>>16)+(L[4]<<16|L[4]>>>16)|0,N[7]=L[7]+(L[6]<<8|L[6]>>>24)+L[5]|0}R.RabbitLegacy=Q._createHelper(U)}(),a.RabbitLegacy)},7076:function(Ve,me,O){var a;Ve.exports=(a=O(1823),O(8341),O(916),O(4369),O(8822),function(){var R=a,Q=R.lib.StreamCipher,q=[],ee=[],L=[],U=R.algo.Rabbit=Q.extend({_doReset:function(){for(var N=this._key.words,A=this.cfg.iv,B=0;B<4;B++)N[B]=16711935&(N[B]<<8|N[B]>>>24)|4278255360&(N[B]<<24|N[B]>>>8);var z=this._X=[N[0],N[3]<<16|N[2]>>>16,N[1],N[0]<<16|N[3]>>>16,N[2],N[1]<<16|N[0]>>>16,N[3],N[2]<<16|N[1]>>>16],J=this._C=[N[2]<<16|N[2]>>>16,4294901760&N[0]|65535&N[1],N[3]<<16|N[3]>>>16,4294901760&N[1]|65535&N[2],N[0]<<16|N[0]>>>16,4294901760&N[2]|65535&N[3],N[1]<<16|N[1]>>>16,4294901760&N[3]|65535&N[0]];for(this._b=0,B=0;B<4;B++)P.call(this);for(B=0;B<8;B++)J[B]^=z[B+4&7];if(A){var re=A.words,le=re[0],H=re[1],Z=16711935&(le<<8|le>>>24)|4278255360&(le<<24|le>>>8),de=16711935&(H<<8|H>>>24)|4278255360&(H<<24|H>>>8),fe=Z>>>16|4294901760&de,Ce=de<<16|65535&Z;for(J[0]^=Z,J[1]^=fe,J[2]^=de,J[3]^=Ce,J[4]^=Z,J[5]^=fe,J[6]^=de,J[7]^=Ce,B=0;B<4;B++)P.call(this)}},_doProcessBlock:function(N,A){var B=this._X;P.call(this),q[0]=B[0]^B[5]>>>16^B[3]<<16,q[1]=B[2]^B[7]>>>16^B[5]<<16,q[2]=B[4]^B[1]>>>16^B[7]<<16,q[3]=B[6]^B[3]>>>16^B[1]<<16;for(var z=0;z<4;z++)q[z]=16711935&(q[z]<<8|q[z]>>>24)|4278255360&(q[z]<<24|q[z]>>>8),N[A+z]^=q[z]},blockSize:4,ivSize:2});function P(){for(var N=this._X,A=this._C,B=0;B<8;B++)ee[B]=A[B];for(A[0]=A[0]+1295307597+this._b|0,A[1]=A[1]+3545052371+(A[0]>>>0<ee[0]>>>0?1:0)|0,A[2]=A[2]+886263092+(A[1]>>>0<ee[1]>>>0?1:0)|0,A[3]=A[3]+1295307597+(A[2]>>>0<ee[2]>>>0?1:0)|0,A[4]=A[4]+3545052371+(A[3]>>>0<ee[3]>>>0?1:0)|0,A[5]=A[5]+886263092+(A[4]>>>0<ee[4]>>>0?1:0)|0,A[6]=A[6]+1295307597+(A[5]>>>0<ee[5]>>>0?1:0)|0,A[7]=A[7]+3545052371+(A[6]>>>0<ee[6]>>>0?1:0)|0,this._b=A[7]>>>0<ee[7]>>>0?1:0,B=0;B<8;B++){var z=N[B]+A[B],J=65535&z,re=z>>>16;L[B]=((J*J>>>17)+J*re>>>15)+re*re^((4294901760&z)*z|0)+((65535&z)*z|0)}N[0]=L[0]+(L[7]<<16|L[7]>>>16)+(L[6]<<16|L[6]>>>16)|0,N[1]=L[1]+(L[0]<<8|L[0]>>>24)+L[7]|0,N[2]=L[2]+(L[1]<<16|L[1]>>>16)+(L[0]<<16|L[0]>>>16)|0,N[3]=L[3]+(L[2]<<8|L[2]>>>24)+L[1]|0,N[4]=L[4]+(L[3]<<16|L[3]>>>16)+(L[2]<<16|L[2]>>>16)|0,N[5]=L[5]+(L[4]<<8|L[4]>>>24)+L[3]|0,N[6]=L[6]+(L[5]<<16|L[5]>>>16)+(L[4]<<16|L[4]>>>16)|0,N[7]=L[7]+(L[6]<<8|L[6]>>>24)+L[5]|0}R.Rabbit=Q._createHelper(U)}(),a.Rabbit)},1093:function(Ve,me,O){var a;Ve.exports=(a=O(1823),O(8341),O(916),O(4369),O(8822),function(){var R=a,Q=R.lib.StreamCipher,ie=R.algo,q=ie.RC4=Q.extend({_doReset:function(){for(var U=this._key,P=U.words,N=U.sigBytes,A=this._S=[],B=0;B<256;B++)A[B]=B;B=0;for(var z=0;B<256;B++){var J=B%N,le=A[B];A[B]=A[z=(z+A[B]+(P[J>>>2]>>>24-J%4*8&255))%256],A[z]=le}this._i=this._j=0},_doProcessBlock:function(U,P){U[P]^=ee.call(this)},keySize:8,ivSize:0});function ee(){for(var U=this._S,P=this._i,N=this._j,A=0,B=0;B<4;B++){var z=U[P=(P+1)%256];U[P]=U[N=(N+U[P])%256],U[N]=z,A|=U[(U[P]+U[N])%256]<<24-8*B}return this._i=P,this._j=N,A}R.RC4=Q._createHelper(q);var L=ie.RC4Drop=q.extend({cfg:q.cfg.extend({drop:192}),_doReset:function(){q._doReset.call(this);for(var U=this.cfg.drop;U>0;U--)ee.call(this)}});R.RC4Drop=Q._createHelper(L)}(),a.RC4)},5508:function(Ve,me,O){var a;Ve.exports=(a=O(1823),function(R){var k=a,Q=k.lib,ie=Q.WordArray,q=Q.Hasher,ee=k.algo,L=ie.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),U=ie.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),P=ie.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),N=ie.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),A=ie.create([0,1518500249,1859775393,2400959708,2840853838]),B=ie.create([1352829926,1548603684,1836072691,2053994217,0]),z=ee.RIPEMD160=q.extend({_doReset:function(){this._hash=ie.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(fe,Ce){for(var ve=0;ve<16;ve++){var He=Ce+ve,Re=fe[He];fe[He]=16711935&(Re<<8|Re>>>24)|4278255360&(Re<<24|Re>>>8)}var Je,ht,ct,Oe,Fe,ke,We,Jt,Rt,vt,Ct,Ae=this._hash.words,be=A.words,ce=B.words,Ee=L.words,_e=U.words,xe=P.words,Ie=N.words;for(ke=Je=Ae[0],We=ht=Ae[1],Jt=ct=Ae[2],Rt=Oe=Ae[3],vt=Fe=Ae[4],ve=0;ve<80;ve+=1)Ct=Je+fe[Ce+Ee[ve]]|0,Ct+=ve<16?J(ht,ct,Oe)+be[0]:ve<32?re(ht,ct,Oe)+be[1]:ve<48?le(ht,ct,Oe)+be[2]:ve<64?H(ht,ct,Oe)+be[3]:Z(ht,ct,Oe)+be[4],Ct=(Ct=de(Ct|=0,xe[ve]))+Fe|0,Je=Fe,Fe=Oe,Oe=de(ct,10),ct=ht,ht=Ct,Ct=ke+fe[Ce+_e[ve]]|0,Ct+=ve<16?Z(We,Jt,Rt)+ce[0]:ve<32?H(We,Jt,Rt)+ce[1]:ve<48?le(We,Jt,Rt)+ce[2]:ve<64?re(We,Jt,Rt)+ce[3]:J(We,Jt,Rt)+ce[4],Ct=(Ct=de(Ct|=0,Ie[ve]))+vt|0,ke=vt,vt=Rt,Rt=de(Jt,10),Jt=We,We=Ct;Ct=Ae[1]+ct+Rt|0,Ae[1]=Ae[2]+Oe+vt|0,Ae[2]=Ae[3]+Fe+ke|0,Ae[3]=Ae[4]+Je+We|0,Ae[4]=Ae[0]+ht+Jt|0,Ae[0]=Ct},_doFinalize:function(){var fe=this._data,Ce=fe.words,ve=8*this._nDataBytes,He=8*fe.sigBytes;Ce[He>>>5]|=128<<24-He%32,Ce[14+(He+64>>>9<<4)]=16711935&(ve<<8|ve>>>24)|4278255360&(ve<<24|ve>>>8),fe.sigBytes=4*(Ce.length+1),this._process();for(var Re=this._hash,Ae=Re.words,be=0;be<5;be++){var ce=Ae[be];Ae[be]=16711935&(ce<<8|ce>>>24)|4278255360&(ce<<24|ce>>>8)}return Re},clone:function(){var fe=q.clone.call(this);return fe._hash=this._hash.clone(),fe}});function J(fe,Ce,ve){return fe^Ce^ve}function re(fe,Ce,ve){return fe&Ce|~fe&ve}function le(fe,Ce,ve){return(fe|~Ce)^ve}function H(fe,Ce,ve){return fe&ve|Ce&~ve}function Z(fe,Ce,ve){return fe^(Ce|~ve)}function de(fe,Ce){return fe<<Ce|fe>>>32-Ce}k.RIPEMD160=q._createHelper(z),k.HmacRIPEMD160=q._createHmacHelper(z)}(Math),a.RIPEMD160)},6496:function(Ve,me,O){var R,k,Q,ie,ee,L,a;Ve.exports=(a=O(1823),Q=(k=(R=a).lib).WordArray,ee=[],L=R.algo.SHA1=(ie=k.Hasher).extend({_doReset:function(){this._hash=new Q.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(U,P){for(var N=this._hash.words,A=N[0],B=N[1],z=N[2],J=N[3],re=N[4],le=0;le<80;le++){if(le<16)ee[le]=0|U[P+le];else{var H=ee[le-3]^ee[le-8]^ee[le-14]^ee[le-16];ee[le]=H<<1|H>>>31}var Z=(A<<5|A>>>27)+re+ee[le];Z+=le<20?1518500249+(B&z|~B&J):le<40?1859775393+(B^z^J):le<60?(B&z|B&J|z&J)-1894007588:(B^z^J)-899497514,re=J,J=z,z=B<<30|B>>>2,B=A,A=Z}N[0]=N[0]+A|0,N[1]=N[1]+B|0,N[2]=N[2]+z|0,N[3]=N[3]+J|0,N[4]=N[4]+re|0},_doFinalize:function(){var U=this._data,P=U.words,N=8*this._nDataBytes,A=8*U.sigBytes;return P[A>>>5]|=128<<24-A%32,P[14+(A+64>>>9<<4)]=Math.floor(N/4294967296),P[15+(A+64>>>9<<4)]=N,U.sigBytes=4*P.length,this._process(),this._hash},clone:function(){var U=ie.clone.call(this);return U._hash=this._hash.clone(),U}}),R.SHA1=ie._createHelper(L),R.HmacSHA1=ie._createHmacHelper(L),a.SHA1)},6538:function(Ve,me,O){var R,Q,ie,q,ee,a;Ve.exports=(a=O(1823),O(6946),Q=(R=a).lib.WordArray,ee=(ie=R.algo).SHA224=(q=ie.SHA256).extend({_doReset:function(){this._hash=new Q.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var L=q._doFinalize.call(this);return L.sigBytes-=4,L}}),R.SHA224=q._createHelper(ee),R.HmacSHA224=q._createHmacHelper(ee),a.SHA224)},6946:function(Ve,me,O){var a;Ve.exports=(a=O(1823),function(R){var k=a,Q=k.lib,ie=Q.WordArray,q=Q.Hasher,ee=k.algo,L=[],U=[];!function(){function A(re){for(var le=R.sqrt(re),H=2;H<=le;H++)if(!(re%H))return!1;return!0}function B(re){return 4294967296*(re-(0|re))|0}for(var z=2,J=0;J<64;)A(z)&&(J<8&&(L[J]=B(R.pow(z,.5))),U[J]=B(R.pow(z,1/3)),J++),z++}();var P=[],N=ee.SHA256=q.extend({_doReset:function(){this._hash=new ie.init(L.slice(0))},_doProcessBlock:function(A,B){for(var z=this._hash.words,J=z[0],re=z[1],le=z[2],H=z[3],Z=z[4],de=z[5],fe=z[6],Ce=z[7],ve=0;ve<64;ve++){if(ve<16)P[ve]=0|A[B+ve];else{var He=P[ve-15],Ae=P[ve-2];P[ve]=((He<<25|He>>>7)^(He<<14|He>>>18)^He>>>3)+P[ve-7]+((Ae<<15|Ae>>>17)^(Ae<<13|Ae>>>19)^Ae>>>10)+P[ve-16]}var Ee=J&re^J&le^re&le,Ie=Ce+((Z<<26|Z>>>6)^(Z<<21|Z>>>11)^(Z<<7|Z>>>25))+(Z&de^~Z&fe)+U[ve]+P[ve];Ce=fe,fe=de,de=Z,Z=H+Ie|0,H=le,le=re,re=J,J=Ie+(((J<<30|J>>>2)^(J<<19|J>>>13)^(J<<10|J>>>22))+Ee)|0}z[0]=z[0]+J|0,z[1]=z[1]+re|0,z[2]=z[2]+le|0,z[3]=z[3]+H|0,z[4]=z[4]+Z|0,z[5]=z[5]+de|0,z[6]=z[6]+fe|0,z[7]=z[7]+Ce|0},_doFinalize:function(){var A=this._data,B=A.words,z=8*this._nDataBytes,J=8*A.sigBytes;return B[J>>>5]|=128<<24-J%32,B[14+(J+64>>>9<<4)]=R.floor(z/4294967296),B[15+(J+64>>>9<<4)]=z,A.sigBytes=4*B.length,this._process(),this._hash},clone:function(){var A=q.clone.call(this);return A._hash=this._hash.clone(),A}});k.SHA256=q._createHelper(N),k.HmacSHA256=q._createHmacHelper(N)}(Math),a.SHA256)},2633:function(Ve,me,O){var a;Ve.exports=(a=O(1823),O(4615),function(R){var k=a,Q=k.lib,ie=Q.WordArray,q=Q.Hasher,L=k.x64.Word,U=k.algo,P=[],N=[],A=[];!function(){for(var J=1,re=0,le=0;le<24;le++){P[J+5*re]=(le+1)*(le+2)/2%64;var Z=(2*J+3*re)%5;J=re%5,re=Z}for(J=0;J<5;J++)for(re=0;re<5;re++)N[J+5*re]=re+(2*J+3*re)%5*5;for(var de=1,fe=0;fe<24;fe++){for(var Ce=0,ve=0,He=0;He<7;He++){if(1&de){var Re=(1<<He)-1;Re<32?ve^=1<<Re:Ce^=1<<Re-32}128&de?de=de<<1^113:de<<=1}A[fe]=L.create(Ce,ve)}}();var B=[];!function(){for(var J=0;J<25;J++)B[J]=L.create()}();var z=U.SHA3=q.extend({cfg:q.cfg.extend({outputLength:512}),_doReset:function(){for(var J=this._state=[],re=0;re<25;re++)J[re]=new L.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(J,re){for(var le=this._state,H=this.blockSize/2,Z=0;Z<H;Z++){var de=J[re+2*Z],fe=J[re+2*Z+1];de=16711935&(de<<8|de>>>24)|4278255360&(de<<24|de>>>8),(Ce=le[Z]).high^=fe=16711935&(fe<<8|fe>>>24)|4278255360&(fe<<24|fe>>>8),Ce.low^=de}for(var ve=0;ve<24;ve++){for(var He=0;He<5;He++){for(var Re=0,Ae=0,be=0;be<5;be++)Re^=(Ce=le[He+5*be]).high,Ae^=Ce.low;var ce=B[He];ce.high=Re,ce.low=Ae}for(He=0;He<5;He++){var Ee=B[(He+4)%5],_e=B[(He+1)%5],xe=_e.high,Ie=_e.low;for(Re=Ee.high^(xe<<1|Ie>>>31),Ae=Ee.low^(Ie<<1|xe>>>31),be=0;be<5;be++)(Ce=le[He+5*be]).high^=Re,Ce.low^=Ae}for(var Je=1;Je<25;Je++){var ht=(Ce=le[Je]).high,ct=Ce.low,Oe=P[Je];Oe<32?(Re=ht<<Oe|ct>>>32-Oe,Ae=ct<<Oe|ht>>>32-Oe):(Re=ct<<Oe-32|ht>>>64-Oe,Ae=ht<<Oe-32|ct>>>64-Oe);var Fe=B[N[Je]];Fe.high=Re,Fe.low=Ae}var ke=B[0],We=le[0];for(ke.high=We.high,ke.low=We.low,He=0;He<5;He++)for(be=0;be<5;be++){var Jt=B[Je=He+5*be],Rt=B[(He+1)%5+5*be],vt=B[(He+2)%5+5*be];(Ce=le[Je]).high=Jt.high^~Rt.high&vt.high,Ce.low=Jt.low^~Rt.low&vt.low}var Ce,Ct=A[ve];(Ce=le[0]).high^=Ct.high,Ce.low^=Ct.low}},_doFinalize:function(){var J=this._data,re=J.words,H=8*J.sigBytes,Z=32*this.blockSize;re[H>>>5]|=1<<24-H%32,re[(R.ceil((H+1)/Z)*Z>>>5)-1]|=128,J.sigBytes=4*re.length,this._process();for(var de=this._state,fe=this.cfg.outputLength/8,Ce=fe/8,ve=[],He=0;He<Ce;He++){var Re=de[He],Ae=Re.high,be=Re.low;Ae=16711935&(Ae<<8|Ae>>>24)|4278255360&(Ae<<24|Ae>>>8),ve.push(be=16711935&(be<<8|be>>>24)|4278255360&(be<<24|be>>>8)),ve.push(Ae)}return new ie.init(ve,fe)},clone:function(){for(var J=q.clone.call(this),re=J._state=this._state.slice(0),le=0;le<25;le++)re[le]=re[le].clone();return J}});k.SHA3=q._createHelper(z),k.HmacSHA3=q._createHmacHelper(z)}(Math),a.SHA3)},7098:function(Ve,me,O){var R,k,Q,ie,q,ee,L,a;Ve.exports=(a=O(1823),O(4615),O(1206),Q=(k=(R=a).x64).Word,ie=k.WordArray,L=(q=R.algo).SHA384=(ee=q.SHA512).extend({_doReset:function(){this._hash=new ie.init([new Q.init(3418070365,3238371032),new Q.init(1654270250,914150663),new Q.init(2438529370,812702999),new Q.init(355462360,4144912697),new Q.init(1731405415,4290775857),new Q.init(2394180231,1750603025),new Q.init(3675008525,1694076839),new Q.init(1203062813,3204075428)])},_doFinalize:function(){var U=ee._doFinalize.call(this);return U.sigBytes-=16,U}}),R.SHA384=ee._createHelper(L),R.HmacSHA384=ee._createHmacHelper(L),a.SHA384)},1206:function(Ve,me,O){var a;Ve.exports=(a=O(1823),O(4615),function(){var R=a,Q=R.lib.Hasher,ie=R.x64,q=ie.Word,ee=ie.WordArray,L=R.algo;function U(){return q.create.apply(q,arguments)}var P=[U(1116352408,3609767458),U(1899447441,602891725),U(3049323471,3964484399),U(3921009573,2173295548),U(961987163,4081628472),U(1508970993,3053834265),U(2453635748,2937671579),U(2870763221,3664609560),U(3624381080,2734883394),U(310598401,1164996542),U(607225278,1323610764),U(1426881987,3590304994),U(1925078388,4068182383),U(2162078206,991336113),U(2614888103,633803317),U(3248222580,3479774868),U(3835390401,2666613458),U(4022224774,944711139),U(264347078,2341262773),U(604807628,2007800933),U(770255983,1495990901),U(1249150122,1856431235),U(1555081692,3175218132),U(1996064986,2198950837),U(2554220882,3999719339),U(2821834349,766784016),U(2952996808,2566594879),U(3210313671,3203337956),U(3336571891,1034457026),U(3584528711,2466948901),U(113926993,3758326383),U(338241895,168717936),U(666307205,1188179964),U(773529912,1546045734),U(1294757372,1522805485),U(1396182291,2643833823),U(1695183700,2343527390),U(1986661051,1014477480),U(2177026350,1206759142),U(2456956037,344077627),U(2730485921,1290863460),U(2820302411,3158454273),U(3259730800,3505952657),U(3345764771,106217008),U(3516065817,3606008344),U(3600352804,1432725776),U(4094571909,1467031594),U(275423344,851169720),U(430227734,3100823752),U(506948616,1363258195),U(659060556,3750685593),U(883997877,3785050280),U(958139571,3318307427),U(1322822218,3812723403),U(1537002063,2003034995),U(1747873779,3602036899),U(1955562222,1575990012),U(2024104815,1125592928),U(2227730452,2716904306),U(2361852424,442776044),U(2428436474,593698344),U(2756734187,3733110249),U(3204031479,2999351573),U(3329325298,3815920427),U(3391569614,3928383900),U(3515267271,566280711),U(3940187606,3454069534),U(4118630271,4000239992),U(116418474,1914138554),U(174292421,2731055270),U(289380356,3203993006),U(460393269,320620315),U(685471733,587496836),U(852142971,1086792851),U(1017036298,365543100),U(1126000580,2618297676),U(1288033470,3409855158),U(1501505948,4234509866),U(1607167915,987167468),U(1816402316,1246189591)],N=[];!function(){for(var B=0;B<80;B++)N[B]=U()}();var A=L.SHA512=Q.extend({_doReset:function(){this._hash=new ee.init([new q.init(1779033703,4089235720),new q.init(3144134277,2227873595),new q.init(1013904242,4271175723),new q.init(2773480762,1595750129),new q.init(1359893119,2917565137),new q.init(2600822924,725511199),new q.init(528734635,4215389547),new q.init(1541459225,327033209)])},_doProcessBlock:function(B,z){for(var J=this._hash.words,re=J[0],le=J[1],H=J[2],Z=J[3],de=J[4],fe=J[5],Ce=J[6],ve=J[7],He=re.high,Re=re.low,Ae=le.high,be=le.low,ce=H.high,Ee=H.low,_e=Z.high,xe=Z.low,Ie=de.high,Je=de.low,ht=fe.high,ct=fe.low,Oe=Ce.high,Fe=Ce.low,ke=ve.high,We=ve.low,Jt=He,Rt=Re,vt=Ae,Ct=be,Xt=ce,Wt=Ee,an=_e,In=xe,rr=Ie,Rn=Je,Qn=ht,Ke=ct,Jn=Oe,$n=Fe,pt=ke,hn=We,pn=0;pn<80;pn++){var ln,ir,fr=N[pn];if(pn<16)ir=fr.high=0|B[z+2*pn],ln=fr.low=0|B[z+2*pn+1];else{var cr=N[pn-15],Dn=cr.high,zi=cr.low,it=(zi>>>1|Dn<<31)^(zi>>>8|Dn<<24)^(zi>>>7|Dn<<25),Dt=N[pn-2],Nr=Dt.high,Zr=Dt.low,Nt=(Zr>>>19|Nr<<13)^(Zr<<3|Nr>>>29)^(Zr>>>6|Nr<<26),pr=N[pn-7],St=N[pn-16],rt=St.low;fr.high=ir=(ir=(ir=((Dn>>>1|zi<<31)^(Dn>>>8|zi<<24)^Dn>>>7)+pr.high+((ln=it+pr.low)>>>0<it>>>0?1:0))+((Nr>>>19|Zr<<13)^(Nr<<3|Zr>>>29)^Nr>>>6)+((ln+=Nt)>>>0<Nt>>>0?1:0))+St.high+((ln+=rt)>>>0<rt>>>0?1:0),fr.low=ln}var se,qe=rr&Qn^~rr&Jn,mt=Rn&Ke^~Rn&$n,Mt=Jt&vt^Jt&Xt^vt&Xt,he=(Rt>>>28|Jt<<4)^(Rt<<30|Jt>>>2)^(Rt<<25|Jt>>>7),Le=P[pn],te=Le.low,Ne=pt+((rr>>>14|Rn<<18)^(rr>>>18|Rn<<14)^(rr<<23|Rn>>>9))+((se=hn+((Rn>>>14|rr<<18)^(Rn>>>18|rr<<14)^(Rn<<23|rr>>>9)))>>>0<hn>>>0?1:0),Xe=he+(Rt&Ct^Rt&Wt^Ct&Wt);pt=Jn,hn=$n,Jn=Qn,$n=Ke,Qn=rr,Ke=Rn,rr=an+(Ne=(Ne=(Ne=Ne+qe+((se+=mt)>>>0<mt>>>0?1:0))+Le.high+((se+=te)>>>0<te>>>0?1:0))+ir+((se+=ln)>>>0<ln>>>0?1:0))+((Rn=In+se|0)>>>0<In>>>0?1:0)|0,an=Xt,In=Wt,Xt=vt,Wt=Ct,vt=Jt,Ct=Rt,Jt=Ne+(((Jt>>>28|Rt<<4)^(Jt<<30|Rt>>>2)^(Jt<<25|Rt>>>7))+Mt+(Xe>>>0<he>>>0?1:0))+((Rt=se+Xe|0)>>>0<se>>>0?1:0)|0}Re=re.low=Re+Rt,re.high=He+Jt+(Re>>>0<Rt>>>0?1:0),be=le.low=be+Ct,le.high=Ae+vt+(be>>>0<Ct>>>0?1:0),Ee=H.low=Ee+Wt,H.high=ce+Xt+(Ee>>>0<Wt>>>0?1:0),xe=Z.low=xe+In,Z.high=_e+an+(xe>>>0<In>>>0?1:0),Je=de.low=Je+Rn,de.high=Ie+rr+(Je>>>0<Rn>>>0?1:0),ct=fe.low=ct+Ke,fe.high=ht+Qn+(ct>>>0<Ke>>>0?1:0),Fe=Ce.low=Fe+$n,Ce.high=Oe+Jn+(Fe>>>0<$n>>>0?1:0),We=ve.low=We+hn,ve.high=ke+pt+(We>>>0<hn>>>0?1:0)},_doFinalize:function(){var B=this._data,z=B.words,J=8*this._nDataBytes,re=8*B.sigBytes;return z[re>>>5]|=128<<24-re%32,z[30+(re+128>>>10<<5)]=Math.floor(J/4294967296),z[31+(re+128>>>10<<5)]=J,B.sigBytes=4*z.length,this._process(),this._hash.toX32()},clone:function(){var B=Q.clone.call(this);return B._hash=this._hash.clone(),B},blockSize:32});R.SHA512=Q._createHelper(A),R.HmacSHA512=Q._createHmacHelper(A)}(),a.SHA512)},4994:function(Ve,me,O){var a;Ve.exports=(a=O(1823),O(8341),O(916),O(4369),O(8822),function(){var R=a,k=R.lib,Q=k.WordArray,ie=k.BlockCipher,q=R.algo,ee=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],L=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],U=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],P=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],N=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],A=q.DES=ie.extend({_doReset:function(){for(var le=this._key.words,H=[],Z=0;Z<56;Z++){var de=ee[Z]-1;H[Z]=le[de>>>5]>>>31-de%32&1}for(var fe=this._subKeys=[],Ce=0;Ce<16;Ce++){var ve=fe[Ce]=[],He=U[Ce];for(Z=0;Z<24;Z++)ve[Z/6|0]|=H[(L[Z]-1+He)%28]<<31-Z%6,ve[4+(Z/6|0)]|=H[28+(L[Z+24]-1+He)%28]<<31-Z%6;for(ve[0]=ve[0]<<1|ve[0]>>>31,Z=1;Z<7;Z++)ve[Z]=ve[Z]>>>4*(Z-1)+3;ve[7]=ve[7]<<5|ve[7]>>>27}var Re=this._invSubKeys=[];for(Z=0;Z<16;Z++)Re[Z]=fe[15-Z]},encryptBlock:function(re,le){this._doCryptBlock(re,le,this._subKeys)},decryptBlock:function(re,le){this._doCryptBlock(re,le,this._invSubKeys)},_doCryptBlock:function(re,le,H){this._lBlock=re[le],this._rBlock=re[le+1],B.call(this,4,252645135),B.call(this,16,65535),z.call(this,2,858993459),z.call(this,8,16711935),B.call(this,1,1431655765);for(var Z=0;Z<16;Z++){for(var de=H[Z],fe=this._lBlock,Ce=this._rBlock,ve=0,He=0;He<8;He++)ve|=P[He][((Ce^de[He])&N[He])>>>0];this._lBlock=Ce,this._rBlock=fe^ve}var Re=this._lBlock;this._lBlock=this._rBlock,this._rBlock=Re,B.call(this,1,1431655765),z.call(this,8,16711935),z.call(this,2,858993459),B.call(this,16,65535),B.call(this,4,252645135),re[le]=this._lBlock,re[le+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function B(re,le){var H=(this._lBlock>>>re^this._rBlock)&le;this._rBlock^=H,this._lBlock^=H<<re}function z(re,le){var H=(this._rBlock>>>re^this._lBlock)&le;this._lBlock^=H,this._rBlock^=H<<re}R.DES=ie._createHelper(A);var J=q.TripleDES=ie.extend({_doReset:function(){var le=this._key.words;if(2!==le.length&&4!==le.length&&le.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var H=le.slice(0,2),Z=le.length<4?le.slice(0,2):le.slice(2,4),de=le.length<6?le.slice(0,2):le.slice(4,6);this._des1=A.createEncryptor(Q.create(H)),this._des2=A.createEncryptor(Q.create(Z)),this._des3=A.createEncryptor(Q.create(de))},encryptBlock:function(re,le){this._des1.encryptBlock(re,le),this._des2.decryptBlock(re,le),this._des3.encryptBlock(re,le)},decryptBlock:function(re,le){this._des3.decryptBlock(re,le),this._des2.encryptBlock(re,le),this._des1.decryptBlock(re,le)},keySize:6,ivSize:2,blockSize:2});R.TripleDES=ie._createHelper(J)}(),a.TripleDES)},4615:function(Ve,me,O){var Q,ie,q,ee,a;Ve.exports=(a=O(1823),ie=(Q=a.lib).Base,q=Q.WordArray,(ee=a.x64={}).Word=ie.extend({init:function(P,N){this.high=P,this.low=N}}),ee.WordArray=ie.extend({init:function(P,N){P=this.words=P||[],this.sigBytes=null!=N?N:8*P.length},toX32:function(){for(var P=this.words,N=P.length,A=[],B=0;B<N;B++){var z=P[B];A.push(z.high),A.push(z.low)}return q.create(A,this.sigBytes)},clone:function(){for(var P=ie.clone.call(this),N=P.words=this.words.slice(0),A=N.length,B=0;B<A;B++)N[B]=N[B].clone();return P}}),a)},8873:function(Ve){Ve.exports=function(){"use strict";var O=6e4,a=36e5,R="millisecond",k="second",Q="minute",ie="hour",q="day",ee="week",L="month",U="quarter",P="year",N="date",A="Invalid Date",B=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,z=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,J={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},re=function(Ae,be,ce){var Ee=String(Ae);return!Ee||Ee.length>=be?Ae:""+Array(be+1-Ee.length).join(ce)+Ae},le={s:re,z:function(Ae){var be=-Ae.utcOffset(),ce=Math.abs(be),Ee=Math.floor(ce/60),_e=ce%60;return(be<=0?"+":"-")+re(Ee,2,"0")+":"+re(_e,2,"0")},m:function Ae(be,ce){if(be.date()<ce.date())return-Ae(ce,be);var Ee=12*(ce.year()-be.year())+(ce.month()-be.month()),_e=be.clone().add(Ee,L),xe=ce-_e<0,Ie=be.clone().add(Ee+(xe?-1:1),L);return+(-(Ee+(ce-_e)/(xe?_e-Ie:Ie-_e))||0)},a:function(Ae){return Ae<0?Math.ceil(Ae)||0:Math.floor(Ae)},p:function(Ae){return{M:L,y:P,w:ee,d:q,D:N,h:ie,m:Q,s:k,ms:R,Q:U}[Ae]||String(Ae||"").toLowerCase().replace(/s$/,"")},u:function(Ae){return void 0===Ae}},H="en",Z={};Z[H]=J;var de=function(Ae){return Ae instanceof He},fe=function Ae(be,ce,Ee){var _e;if(!be)return H;if("string"==typeof be){var xe=be.toLowerCase();Z[xe]&&(_e=xe),ce&&(Z[xe]=ce,_e=xe);var Ie=be.split("-");if(!_e&&Ie.length>1)return Ae(Ie[0])}else{var Je=be.name;Z[Je]=be,_e=Je}return!Ee&&_e&&(H=_e),_e||!Ee&&H},Ce=function(Ae,be){if(de(Ae))return Ae.clone();var ce="object"==typeof be?be:{};return ce.date=Ae,ce.args=arguments,new He(ce)},ve=le;ve.l=fe,ve.i=de,ve.w=function(Ae,be){return Ce(Ae,{locale:be.$L,utc:be.$u,x:be.$x,$offset:be.$offset})};var He=function(){function Ae(ce){this.$L=fe(ce.locale,null,!0),this.parse(ce)}var be=Ae.prototype;return be.parse=function(ce){this.$d=function(Ee){var _e=Ee.date,xe=Ee.utc;if(null===_e)return new Date(NaN);if(ve.u(_e))return new Date;if(_e instanceof Date)return new Date(_e);if("string"==typeof _e&&!/Z$/i.test(_e)){var Ie=_e.match(B);if(Ie){var Je=Ie[2]-1||0,ht=(Ie[7]||"0").substring(0,3);return xe?new Date(Date.UTC(Ie[1],Je,Ie[3]||1,Ie[4]||0,Ie[5]||0,Ie[6]||0,ht)):new Date(Ie[1],Je,Ie[3]||1,Ie[4]||0,Ie[5]||0,Ie[6]||0,ht)}}return new Date(_e)}(ce),this.$x=ce.x||{},this.init()},be.init=function(){var ce=this.$d;this.$y=ce.getFullYear(),this.$M=ce.getMonth(),this.$D=ce.getDate(),this.$W=ce.getDay(),this.$H=ce.getHours(),this.$m=ce.getMinutes(),this.$s=ce.getSeconds(),this.$ms=ce.getMilliseconds()},be.$utils=function(){return ve},be.isValid=function(){return this.$d.toString()!==A},be.isSame=function(ce,Ee){var _e=Ce(ce);return this.startOf(Ee)<=_e&&_e<=this.endOf(Ee)},be.isAfter=function(ce,Ee){return Ce(ce)<this.startOf(Ee)},be.isBefore=function(ce,Ee){return this.endOf(Ee)<Ce(ce)},be.$g=function(ce,Ee,_e){return ve.u(ce)?this[Ee]:this.set(_e,ce)},be.unix=function(){return Math.floor(this.valueOf()/1e3)},be.valueOf=function(){return this.$d.getTime()},be.startOf=function(ce,Ee){var _e=this,xe=!!ve.u(Ee)||Ee,Ie=ve.p(ce),Je=function(Rt,vt){var Ct=ve.w(_e.$u?Date.UTC(_e.$y,vt,Rt):new Date(_e.$y,vt,Rt),_e);return xe?Ct:Ct.endOf(q)},ht=function(Rt,vt){return ve.w(_e.toDate()[Rt].apply(_e.toDate("s"),(xe?[0,0,0,0]:[23,59,59,999]).slice(vt)),_e)},ct=this.$W,Oe=this.$M,Fe=this.$D,ke="set"+(this.$u?"UTC":"");switch(Ie){case P:return xe?Je(1,0):Je(31,11);case L:return xe?Je(1,Oe):Je(0,Oe+1);case ee:var We=this.$locale().weekStart||0,Jt=(ct<We?ct+7:ct)-We;return Je(xe?Fe-Jt:Fe+(6-Jt),Oe);case q:case N:return ht(ke+"Hours",0);case ie:return ht(ke+"Minutes",1);case Q:return ht(ke+"Seconds",2);case k:return ht(ke+"Milliseconds",3);default:return this.clone()}},be.endOf=function(ce){return this.startOf(ce,!1)},be.$set=function(ce,Ee){var _e,xe=ve.p(ce),Ie="set"+(this.$u?"UTC":""),Je=(_e={},_e[q]=Ie+"Date",_e[N]=Ie+"Date",_e[L]=Ie+"Month",_e[P]=Ie+"FullYear",_e[ie]=Ie+"Hours",_e[Q]=Ie+"Minutes",_e[k]=Ie+"Seconds",_e[R]=Ie+"Milliseconds",_e)[xe],ht=xe===q?this.$D+(Ee-this.$W):Ee;if(xe===L||xe===P){var ct=this.clone().set(N,1);ct.$d[Je](ht),ct.init(),this.$d=ct.set(N,Math.min(this.$D,ct.daysInMonth())).$d}else Je&&this.$d[Je](ht);return this.init(),this},be.set=function(ce,Ee){return this.clone().$set(ce,Ee)},be.get=function(ce){return this[ve.p(ce)]()},be.add=function(ce,Ee){var _e,xe=this;ce=Number(ce);var Ie=ve.p(Ee),Je=function(Oe){var Fe=Ce(xe);return ve.w(Fe.date(Fe.date()+Math.round(Oe*ce)),xe)};if(Ie===L)return this.set(L,this.$M+ce);if(Ie===P)return this.set(P,this.$y+ce);if(Ie===q)return Je(1);if(Ie===ee)return Je(7);var ht=(_e={},_e[Q]=O,_e[ie]=a,_e[k]=1e3,_e)[Ie]||1,ct=this.$d.getTime()+ce*ht;return ve.w(ct,this)},be.subtract=function(ce,Ee){return this.add(-1*ce,Ee)},be.format=function(ce){var Ee=this,_e=this.$locale();if(!this.isValid())return _e.invalidDate||A;var xe=ce||"YYYY-MM-DDTHH:mm:ssZ",Ie=ve.z(this),Je=this.$H,ht=this.$m,ct=this.$M,Oe=_e.weekdays,Fe=_e.months,ke=function(vt,Ct,Xt,Wt){return vt&&(vt[Ct]||vt(Ee,xe))||Xt[Ct].slice(0,Wt)},We=function(vt){return ve.s(Je%12||12,vt,"0")},Jt=_e.meridiem||function(vt,Ct,Xt){var Wt=vt<12?"AM":"PM";return Xt?Wt.toLowerCase():Wt},Rt={YY:String(this.$y).slice(-2),YYYY:this.$y,M:ct+1,MM:ve.s(ct+1,2,"0"),MMM:ke(_e.monthsShort,ct,Fe,3),MMMM:ke(Fe,ct),D:this.$D,DD:ve.s(this.$D,2,"0"),d:String(this.$W),dd:ke(_e.weekdaysMin,this.$W,Oe,2),ddd:ke(_e.weekdaysShort,this.$W,Oe,3),dddd:Oe[this.$W],H:String(Je),HH:ve.s(Je,2,"0"),h:We(1),hh:We(2),a:Jt(Je,ht,!0),A:Jt(Je,ht,!1),m:String(ht),mm:ve.s(ht,2,"0"),s:String(this.$s),ss:ve.s(this.$s,2,"0"),SSS:ve.s(this.$ms,3,"0"),Z:Ie};return xe.replace(z,function(vt,Ct){return Ct||Rt[vt]||Ie.replace(":","")})},be.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},be.diff=function(ce,Ee,_e){var xe,Ie=ve.p(Ee),Je=Ce(ce),ht=(Je.utcOffset()-this.utcOffset())*O,ct=this-Je,Oe=ve.m(this,Je);return Oe=(xe={},xe[P]=Oe/12,xe[L]=Oe,xe[U]=Oe/3,xe[ee]=(ct-ht)/6048e5,xe[q]=(ct-ht)/864e5,xe[ie]=ct/a,xe[Q]=ct/O,xe[k]=ct/1e3,xe)[Ie]||ct,_e?Oe:ve.a(Oe)},be.daysInMonth=function(){return this.endOf(L).$D},be.$locale=function(){return Z[this.$L]},be.locale=function(ce,Ee){if(!ce)return this.$L;var _e=this.clone(),xe=fe(ce,Ee,!0);return xe&&(_e.$L=xe),_e},be.clone=function(){return ve.w(this.$d,this)},be.toDate=function(){return new Date(this.valueOf())},be.toJSON=function(){return this.isValid()?this.toISOString():null},be.toISOString=function(){return this.$d.toISOString()},be.toString=function(){return this.$d.toUTCString()},Ae}(),Re=He.prototype;return Ce.prototype=Re,[["$ms",R],["$s",k],["$m",Q],["$H",ie],["$W",q],["$M",L],["$y",P],["$D",N]].forEach(function(Ae){Re[Ae[1]]=function(be){return this.$g(be,Ae[0],Ae[1])}}),Ce.extend=function(Ae,be){return Ae.$i||(Ae(be,He,Ce),Ae.$i=!0),Ce},Ce.locale=fe,Ce.isDayjs=de,Ce.unix=function(Ae){return Ce(1e3*Ae)},Ce.en=Z[H],Ce.Ls=Z,Ce.p={},Ce}()},4292:function(Ve){Ve.exports=function(){"use strict";var me={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},O=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,a=/\d\d/,R=/\d\d?/,k=/\d*[^\s\d-_:/()]+/,Q={},ie=function(A){return(A=+A)+(A>68?1900:2e3)},q=function(A){return function(B){this[A]=+B}},ee=[/[+-]\d\d:?(\d\d)?|Z/,function(A){(this.zone||(this.zone={})).offset=function(B){if(!B||"Z"===B)return 0;var z=B.match(/([+-]|\d\d)/g),J=60*z[1]+(+z[2]||0);return 0===J?0:"+"===z[0]?-J:J}(A)}],L=function(A){var B=Q[A];return B&&(B.indexOf?B:B.s.concat(B.f))},U=function(A,B){var z,J=Q.meridiem;if(J){for(var re=1;re<=24;re+=1)if(A.indexOf(J(re,0,B))>-1){z=re>12;break}}else z=A===(B?"pm":"PM");return z},P={A:[k,function(A){this.afternoon=U(A,!1)}],a:[k,function(A){this.afternoon=U(A,!0)}],S:[/\d/,function(A){this.milliseconds=100*+A}],SS:[a,function(A){this.milliseconds=10*+A}],SSS:[/\d{3}/,function(A){this.milliseconds=+A}],s:[R,q("seconds")],ss:[R,q("seconds")],m:[R,q("minutes")],mm:[R,q("minutes")],H:[R,q("hours")],h:[R,q("hours")],HH:[R,q("hours")],hh:[R,q("hours")],D:[R,q("day")],DD:[a,q("day")],Do:[k,function(A){var B=Q.ordinal,z=A.match(/\d+/);if(this.day=z[0],B)for(var J=1;J<=31;J+=1)B(J).replace(/\[|\]/g,"")===A&&(this.day=J)}],M:[R,q("month")],MM:[a,q("month")],MMM:[k,function(A){var B=L("months"),z=(L("monthsShort")||B.map(function(J){return J.slice(0,3)})).indexOf(A)+1;if(z<1)throw new Error;this.month=z%12||z}],MMMM:[k,function(A){var B=L("months").indexOf(A)+1;if(B<1)throw new Error;this.month=B%12||B}],Y:[/[+-]?\d+/,q("year")],YY:[a,function(A){this.year=ie(A)}],YYYY:[/\d{4}/,q("year")],Z:ee,ZZ:ee};return function(A,B,z){z.p.customParseFormat=!0,A&&A.parseTwoDigitYear&&(ie=A.parseTwoDigitYear);var J=B.prototype,re=J.parse;J.parse=function(le){var H=le.date,Z=le.utc,de=le.args;this.$u=Z;var fe=de[1];if("string"==typeof fe){var Ce=!0===de[2],ve=!0===de[3],He=Ce||ve,Re=de[2];ve&&(Re=de[2]),Q=this.$locale(),!Ce&&Re&&(Q=z.Ls[Re]),this.$d=function(Ee,_e,xe){try{if(["x","X"].indexOf(_e)>-1)return new Date(("X"===_e?1e3:1)*Ee);var Ie=function(A){var z;z=Q&&Q.formats;for(var J=(A=A.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(Ce,ve,He){var Re=He&&He.toUpperCase();return ve||z[He]||me[He]||z[Re].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(Ae,be,ce){return be||ce.slice(1)})})).match(O),re=J.length,le=0;le<re;le+=1){var H=J[le],Z=P[H],fe=Z&&Z[1];J[le]=fe?{regex:Z&&Z[0],parser:fe}:H.replace(/^\[|\]$/g,"")}return function(Ce){for(var ve={},He=0,Re=0;He<re;He+=1){var Ae=J[He];if("string"==typeof Ae)Re+=Ae.length;else{var be=Ae.regex,ce=Ae.parser,Ee=Ce.slice(Re),_e=be.exec(Ee)[0];ce.call(ve,_e),Ce=Ce.replace(_e,"")}}return function(xe){var Ie=xe.afternoon;if(void 0!==Ie){var Je=xe.hours;Ie?Je<12&&(xe.hours+=12):12===Je&&(xe.hours=0),delete xe.afternoon}}(ve),ve}}(_e)(Ee),Je=Ie.year,ht=Ie.month,ct=Ie.day,Oe=Ie.hours,Fe=Ie.minutes,ke=Ie.seconds,We=Ie.milliseconds,Jt=Ie.zone,Rt=new Date,vt=ct||(Je||ht?1:Rt.getDate()),Ct=Je||Rt.getFullYear(),Xt=0;Je&&!ht||(Xt=ht>0?ht-1:Rt.getMonth());var Wt=Oe||0,an=Fe||0,In=ke||0,rr=We||0;return Jt?new Date(Date.UTC(Ct,Xt,vt,Wt,an,In,rr+60*Jt.offset*1e3)):xe?new Date(Date.UTC(Ct,Xt,vt,Wt,an,In,rr)):new Date(Ct,Xt,vt,Wt,an,In,rr)}catch(Rn){return new Date("")}}(H,fe,Z),this.init(),Re&&!0!==Re&&(this.$L=this.locale(Re).$L),He&&H!=this.format(fe)&&(this.$d=new Date("")),Q={}}else if(fe instanceof Array)for(var Ae=fe.length,be=1;be<=Ae;be+=1){de[1]=fe[be-1];var ce=z.apply(this,de);if(ce.isValid()){this.$d=ce.$d,this.$L=ce.$L,this.init();break}be===Ae&&(this.$d=new Date(""))}else re.call(this,le)}}}()},2329:(Ve,me,O)=>{"use strict";O.d(me,{Mq:()=>a.getApp,C6:()=>a.getApps});var a=O(8026);(0,a.registerVersion)("firebase","9.6.11","app")},7841:(Ve,me,O)=>{"use strict";O.d(me,{Z:()=>a.Z});var a=O(3394);a.Z.registerVersion("firebase","9.6.11","app-compat")},4828:(Ve,me,O)=>{"use strict";O.r(me);var a=O(8239),R=O(3394),k=O(982),Q=O(3854),ee=(O(8026),O(5422),O(3910));function L(){return window}function N(){return(N=(0,a.Z)(function*(X,te,se){var Ne;const{BuildInfo:Xe}=L();(0,k.ap)(te.sessionId,"AuthEvent did not contain a session ID");const Et=yield H(te.sessionId),kt={};return(0,k.aq)()?kt.ibi=Xe.packageName:(0,k.ar)()?kt.apn=Xe.packageName:(0,k.as)(X,"operation-not-supported-in-this-environment"),Xe.displayName&&(kt.appDisplayName=Xe.displayName),kt.sessionId=Et,(0,k.at)(X,se,te.type,void 0,null!==(Ne=te.eventId)&&void 0!==Ne?Ne:void 0,kt)})).apply(this,arguments)}function B(){return(B=(0,a.Z)(function*(X){const{BuildInfo:te}=L(),se={};(0,k.aq)()?se.iosBundleId=te.packageName:(0,k.ar)()?se.androidPackageName=te.packageName:(0,k.as)(X,"operation-not-supported-in-this-environment"),yield(0,k.au)(X,se)})).apply(this,arguments)}function re(){return(re=(0,a.Z)(function*(X,te,se){const{cordova:Ne}=L();let Xe=()=>{};try{yield new Promise((Et,kt)=>{let at=null;function nn(){var mn;Et();const or=null===(mn=Ne.plugins.browsertab)||void 0===mn?void 0:mn.close;"function"==typeof or&&or(),"function"==typeof(null==se?void 0:se.close)&&se.close()}function jn(){at||(at=window.setTimeout(()=>{kt((0,k.av)(X,"redirect-cancelled-by-user"))},2e3))}function Fn(){"visible"===(null==document?void 0:document.visibilityState)&&jn()}te.addPassiveListener(nn),document.addEventListener("resume",jn,!1),(0,k.ar)()&&document.addEventListener("visibilitychange",Fn,!1),Xe=()=>{te.removePassiveListener(nn),document.removeEventListener("resume",jn,!1),document.removeEventListener("visibilitychange",Fn,!1),at&&window.clearTimeout(at)}})}finally{Xe()}})).apply(this,arguments)}function H(X){return Z.apply(this,arguments)}function Z(){return(Z=(0,a.Z)(function*(X){const te=de(X),se=yield crypto.subtle.digest("SHA-256",te);return Array.from(new Uint8Array(se)).map(Xe=>Xe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function de(X){if((0,k.ap)(/[0-9a-zA-Z]+/.test(X),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(X);const te=new ArrayBuffer(X.length),se=new Uint8Array(te);for(let Ne=0;Ne<X.length;Ne++)se[Ne]=X.charCodeAt(Ne);return se}class Ce extends k.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(te=>{this.resolveInialized=te})}addPassiveListener(te){this.passiveListeners.add(te)}removePassiveListener(te){this.passiveListeners.delete(te)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(te){return this.resolveInialized(),this.passiveListeners.forEach(se=>se(te)),super.onEvent(te)}initialized(){var te=this;return(0,a.Z)(function*(){yield te.initPromise})()}}function Re(X){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,a.Z)(function*(X){const te=yield Ee()._get(_e(X));return te&&(yield Ee()._remove(_e(X))),te})).apply(this,arguments)}function ce(){const X=[],te="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let se=0;se<20;se++){const Ne=Math.floor(Math.random()*te.length);X.push(te.charAt(Ne))}return X.join("")}function Ee(){return(0,k.ax)(k.b)}function _e(X){return(0,k.ay)("authEvent",X.config.apiKey,X.name)}function Je(X){if(!(null==X?void 0:X.includes("?")))return{};const[te,...se]=X.split("?");return(0,Q.zd)(se.join("?"))}function Fe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,k.av)("no-auth-event")}}function vt(){var X;return(null===(X=null==self?void 0:self.location)||void 0===X?void 0:X.protocol)||null}function Xt(X=(0,Q.z$)()){return!("file:"!==vt()&&"ionic:"!==vt()||!X.toLowerCase().match(/iphone|ipad|ipod|android/))}function Rn(){try{const X=self.localStorage,te=k.aG();if(X)return X.setItem(te,"1"),X.removeItem(te),!function(X=(0,Q.z$)()){return(0,Q.w1)()&&11===(null==document?void 0:document.documentMode)||function(X=(0,Q.z$)()){return/Edge\/\d+/.test(X)}(X)}()||(0,Q.hl)()}catch(X){return Qn()&&(0,Q.hl)()}return!1}function Qn(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ke(){return("http:"===vt()||"https:"===vt()||(0,Q.ru)()||Xt())&&!((0,Q.b$)()||(0,Q.UG)())&&Rn()&&!Qn()}function Jn(){return Xt()&&"undefined"!=typeof document}function pt(){return(pt=(0,a.Z)(function*(){return!!Jn()&&new Promise(X=>{const te=setTimeout(()=>{X(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(te),X(!0)})})})).apply(this,arguments)}const pn={LOCAL:"local",NONE:"none",SESSION:"session"},ln=k.aw,ir="persistence";function cr(X){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,a.Z)(function*(X){yield X._initializationPromise;const te=Cn(),se=k.ay(ir,X.config.apiKey,X.name);te&&te.setItem(se,X._getPersistence())})).apply(this,arguments)}function Cn(){var X;try{return(null===(X="undefined"!=typeof window?window:null)||void 0===X?void 0:X.sessionStorage)||null}catch(te){return null}}const it=k.aw;class Dt{constructor(){this.browserResolver=k.ax(k.k),this.cordovaResolver=k.ax(class{constructor(){this._redirectPersistence=k.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=k.aA}_initialize(te){var se=this;return(0,a.Z)(function*(){const Ne=te._key();let Xe=se.eventManagers.get(Ne);return Xe||(Xe=new Ce(te),se.eventManagers.set(Ne,Xe),se.attachCallbackListeners(te,Xe)),Xe})()}_openPopup(te){(0,k.as)(te,"operation-not-supported-in-this-environment")}_openRedirect(te,se,Ne,Xe){var Et=this;return(0,a.Z)(function*(){!function(X){var te,se,Ne,Xe,Et,kt,at,nn,jn,Fn;const mn=L();(0,k.aw)("function"==typeof(null===(te=null==mn?void 0:mn.universalLinks)||void 0===te?void 0:te.subscribe),X,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,k.aw)(void 0!==(null===(se=null==mn?void 0:mn.BuildInfo)||void 0===se?void 0:se.packageName),X,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,k.aw)("function"==typeof(null===(Et=null===(Xe=null===(Ne=null==mn?void 0:mn.cordova)||void 0===Ne?void 0:Ne.plugins)||void 0===Xe?void 0:Xe.browsertab)||void 0===Et?void 0:Et.openUrl),X,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.aw)("function"==typeof(null===(nn=null===(at=null===(kt=null==mn?void 0:mn.cordova)||void 0===kt?void 0:kt.plugins)||void 0===at?void 0:at.browsertab)||void 0===nn?void 0:nn.isAvailable),X,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.aw)("function"==typeof(null===(Fn=null===(jn=null==mn?void 0:mn.cordova)||void 0===jn?void 0:jn.InAppBrowser)||void 0===Fn?void 0:Fn.open),X,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(te);const kt=yield Et._initialize(te);yield kt.initialized(),kt.resetRedirect(),(0,k.aB)(),yield Et._originValidation(te);const at=function(X,te,se=null){return{type:te,eventId:se,urlResponse:null,sessionId:ce(),postBody:null,tenantId:X.tenantId,error:(0,k.av)(X,"no-auth-event")}}(te,Ne,Xe);yield function(X,te){return Ee()._set(_e(X),te)}(te,at);const nn=yield function(X,te,se){return N.apply(this,arguments)}(te,at,se),jn=yield function(X){const{cordova:te}=L();return new Promise(se=>{te.plugins.browsertab.isAvailable(Ne=>{let Xe=null;Ne?te.plugins.browsertab.openUrl(X):Xe=te.InAppBrowser.open(X,(0,k.ao)()?"_blank":"_system","location=yes"),se(Xe)})})}(nn);return function(X,te,se){return re.apply(this,arguments)}(te,kt,jn)})()}_isIframeWebStorageSupported(te,se){throw new Error("Method not implemented.")}_originValidation(te){const se=te._key();return this.originValidationPromises[se]||(this.originValidationPromises[se]=function(X){return B.apply(this,arguments)}(te)),this.originValidationPromises[se]}attachCallbackListeners(te,se){const{universalLinks:Ne,handleOpenURL:Xe,BuildInfo:Et}=L(),kt=setTimeout((0,a.Z)(function*(){yield Re(te),se.onEvent(Fe())}),500),at=function(){var Fn=(0,a.Z)(function*(mn){clearTimeout(kt);const or=yield Re(te);let st=null;or&&(null==mn?void 0:mn.url)&&(st=function(X,te){var se,Ne;const Xe=function(X){const te=Je(X),se=te.link?decodeURIComponent(te.link):void 0,Ne=Je(se).link,Xe=te.deep_link_id?decodeURIComponent(te.deep_link_id):void 0;return Je(Xe).link||Xe||Ne||se||X}(te);if(Xe.includes("/__/auth/callback")){const Et=Je(Xe),kt=Et.firebaseError?function(X){try{return JSON.parse(X)}catch(te){return null}}(decodeURIComponent(Et.firebaseError)):null,at=null===(Ne=null===(se=null==kt?void 0:kt.code)||void 0===se?void 0:se.split("auth/"))||void 0===Ne?void 0:Ne[1],nn=at?(0,k.av)(at):null;return nn?{type:X.type,eventId:X.eventId,tenantId:X.tenantId,error:nn,urlResponse:null,sessionId:null,postBody:null}:{type:X.type,eventId:X.eventId,tenantId:X.tenantId,sessionId:X.sessionId,urlResponse:Xe,postBody:null}}return null}(or,mn.url)),se.onEvent(st||Fe())});return function(or){return Fn.apply(this,arguments)}}();void 0!==Ne&&"function"==typeof Ne.subscribe&&Ne.subscribe(null,at);const nn=Xe,jn=`${Et.packageName.toLowerCase()}://`;L().handleOpenURL=function(){var Fn=(0,a.Z)(function*(mn){if(mn.toLowerCase().startsWith(jn)&&at({url:mn}),"function"==typeof nn)try{nn(mn)}catch(or){console.error(or)}});return function(mn){return Fn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=k.a,this._completeRedirectFn=k.aA}_initialize(te){var se=this;return(0,a.Z)(function*(){return yield se.selectUnderlyingResolver(),se.assertedUnderlyingResolver._initialize(te)})()}_openPopup(te,se,Ne,Xe){var Et=this;return(0,a.Z)(function*(){return yield Et.selectUnderlyingResolver(),Et.assertedUnderlyingResolver._openPopup(te,se,Ne,Xe)})()}_openRedirect(te,se,Ne,Xe){var Et=this;return(0,a.Z)(function*(){return yield Et.selectUnderlyingResolver(),Et.assertedUnderlyingResolver._openRedirect(te,se,Ne,Xe)})()}_isIframeWebStorageSupported(te,se){this.assertedUnderlyingResolver._isIframeWebStorageSupported(te,se)}_originValidation(te){return this.assertedUnderlyingResolver._originValidation(te)}get _shouldInitProactively(){return Jn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return it(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var te=this;return(0,a.Z)(function*(){if(te.underlyingResolver)return;const se=yield function(){return pt.apply(this,arguments)}();te.underlyingResolver=se?te.cordovaResolver:te.browserResolver})()}}function Nr(X){return X.unwrap()}function gn(X){return pr(X)}function pr(X){const{_tokenResponse:te}=X instanceof Q.ZR?X.customData:X;if(!te)return null;if(!(X instanceof Q.ZR)&&"temporaryProof"in te&&"phoneNumber"in te)return k.P.credentialFromResult(X);const se=te.providerId;if(!se||se===k.o.PASSWORD)return null;let Ne;switch(se){case k.o.GOOGLE:Ne=k.N;break;case k.o.FACEBOOK:Ne=k.M;break;case k.o.GITHUB:Ne=k.Q;break;case k.o.TWITTER:Ne=k.V;break;default:const{oauthIdToken:Xe,oauthAccessToken:Et,oauthTokenSecret:kt,pendingToken:at,nonce:nn}=te;return Et||kt||Xe||at?at?se.startsWith("saml.")?k.aJ._create(se,at):k.I._fromParams({providerId:se,signInMethod:se,pendingToken:at,idToken:Xe,accessToken:Et}):new k.T(se).credential({idToken:Xe,accessToken:Et,rawNonce:nn}):null}return X instanceof Q.ZR?Ne.credentialFromError(X):Ne.credentialFromResult(X)}function sr(X,te){return te.catch(se=>{throw se instanceof Q.ZR&&function(X,te){var se;const Ne=null===(se=te.customData)||void 0===se?void 0:se._tokenResponse;if("auth/multi-factor-auth-required"===te.code)te.resolver=new qt(X,k.am(X,te));else if(Ne){const Xe=pr(te),Et=te;Xe&&(Et.credential=Xe,Et.tenantId=Ne.tenantId||void 0,Et.email=Ne.email||void 0,Et.phoneNumber=Ne.phoneNumber||void 0)}}(X,se),se}).then(se=>{const Xe=se.user;return{operationType:se.operationType,credential:gn(se),additionalUserInfo:k.ak(se),user:rt.getOrCreate(Xe)}})}function cn(X,te){return St.apply(this,arguments)}function St(){return(St=(0,a.Z)(function*(X,te){const se=yield te;return{verificationId:se.verificationId,confirm:Ne=>sr(X,se.confirm(Ne))}})).apply(this,arguments)}class qt{constructor(te,se){this.resolver=se,this.auth=te.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(te){return sr(Nr(this.auth),this.resolver.resolveSignIn(te))}}class rt{constructor(te){this._delegate=te,this.multiFactor=k.an(te)}static getOrCreate(te){return rt.USER_MAP.has(te)||rt.USER_MAP.set(te,new rt(te)),rt.USER_MAP.get(te)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(te){return this._delegate.getIdTokenResult(te)}getIdToken(te){return this._delegate.getIdToken(te)}linkAndRetrieveDataWithCredential(te){return this.linkWithCredential(te)}linkWithCredential(te){var se=this;return(0,a.Z)(function*(){return sr(se.auth,k.Y(se._delegate,te))})()}linkWithPhoneNumber(te,se){var Ne=this;return(0,a.Z)(function*(){return cn(Ne.auth,k.l(Ne._delegate,te,se))})()}linkWithPopup(te){var se=this;return(0,a.Z)(function*(){return sr(se.auth,k.d(se._delegate,te,Dt))})()}linkWithRedirect(te){var se=this;return(0,a.Z)(function*(){return yield cr(k.aC(se.auth)),k.g(se._delegate,te,Dt)})()}reauthenticateAndRetrieveDataWithCredential(te){return this.reauthenticateWithCredential(te)}reauthenticateWithCredential(te){var se=this;return(0,a.Z)(function*(){return sr(se.auth,k.Z(se._delegate,te))})()}reauthenticateWithPhoneNumber(te,se){return cn(this.auth,k.r(this._delegate,te,se))}reauthenticateWithPopup(te){return sr(this.auth,k.e(this._delegate,te,Dt))}reauthenticateWithRedirect(te){var se=this;return(0,a.Z)(function*(){return yield cr(k.aC(se.auth)),k.h(se._delegate,te,Dt)})()}sendEmailVerification(te){return k.aa(this._delegate,te)}unlink(te){var se=this;return(0,a.Z)(function*(){return yield k.aj(se._delegate,te),se})()}updateEmail(te){return k.af(this._delegate,te)}updatePassword(te){return k.ag(this._delegate,te)}updatePhoneNumber(te){return k.u(this._delegate,te)}updateProfile(te){return k.ae(this._delegate,te)}verifyBeforeUpdateEmail(te,se){return k.ab(this._delegate,te,se)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}rt.USER_MAP=new WeakMap;const qe=k.aw;let mt=(()=>{class X{constructor(se,Ne){if(this.app=se,Ne.isInitialized())return this._delegate=Ne.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Xe}=se.options;qe(Xe,"invalid-api-key",{appName:se.name}),qe(Xe,"invalid-api-key",{appName:se.name});const Et="undefined"!=typeof window?Dt:void 0;this._delegate=Ne.initialize({options:{persistence:Lt(Xe,se.name),popupRedirectResolver:Et}}),this._delegate._updateErrorMap(k.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?rt.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(se){this._delegate.languageCode=se}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(se){this._delegate.tenantId=se}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(se,Ne){k.E(this._delegate,se,Ne)}applyActionCode(se){return k.a1(this._delegate,se)}checkActionCode(se){return k.a2(this._delegate,se)}confirmPasswordReset(se,Ne){return k.a0(this._delegate,se,Ne)}createUserWithEmailAndPassword(se,Ne){var Xe=this;return(0,a.Z)(function*(){return sr(Xe._delegate,k.a4(Xe._delegate,se,Ne))})()}fetchProvidersForEmail(se){return this.fetchSignInMethodsForEmail(se)}fetchSignInMethodsForEmail(se){return k.a9(this._delegate,se)}isSignInWithEmailLink(se){return k.a7(this._delegate,se)}getRedirectResult(){var se=this;return(0,a.Z)(function*(){qe(Ke(),se._delegate,"operation-not-supported-in-this-environment");const Ne=yield k.j(se._delegate,Dt);return Ne?sr(se._delegate,Promise.resolve(Ne)):{credential:null,user:null}})()}addFrameworkForLogging(se){!function(X,te){(0,k.aC)(X)._logFramework(te)}(this._delegate,se)}onAuthStateChanged(se,Ne,Xe){const{next:Et,error:kt,complete:at}=Mt(se,Ne,Xe);return this._delegate.onAuthStateChanged(Et,kt,at)}onIdTokenChanged(se,Ne,Xe){const{next:Et,error:kt,complete:at}=Mt(se,Ne,Xe);return this._delegate.onIdTokenChanged(Et,kt,at)}sendSignInLinkToEmail(se,Ne){return k.a6(this._delegate,se,Ne)}sendPasswordResetEmail(se,Ne){return k.$(this._delegate,se,Ne||void 0)}setPersistence(se){var Ne=this;return(0,a.Z)(function*(){let Xe;switch(function(X,te){ln(Object.values(pn).includes(te),X,"invalid-persistence-type"),(0,Q.b$)()?ln(te!==pn.SESSION,X,"unsupported-persistence-type"):(0,Q.UG)()?ln(te===pn.NONE,X,"unsupported-persistence-type"):Qn()?ln(te===pn.NONE||te===pn.LOCAL&&(0,Q.hl)(),X,"unsupported-persistence-type"):ln(te===pn.NONE||Rn(),X,"unsupported-persistence-type")}(Ne._delegate,se),se){case pn.SESSION:Xe=k.a;break;case pn.LOCAL:Xe=(yield k.ax(k.i)._isAvailable())?k.i:k.b;break;case pn.NONE:Xe=k.K;break;default:return k.as("argument-error",{appName:Ne._delegate.name})}return Ne._delegate.setPersistence(Xe)})()}signInAndRetrieveDataWithCredential(se){return this.signInWithCredential(se)}signInAnonymously(){return sr(this._delegate,k.W(this._delegate))}signInWithCredential(se){return sr(this._delegate,k.X(this._delegate,se))}signInWithCustomToken(se){return sr(this._delegate,k._(this._delegate,se))}signInWithEmailAndPassword(se,Ne){return sr(this._delegate,k.a5(this._delegate,se,Ne))}signInWithEmailLink(se,Ne){return sr(this._delegate,k.a8(this._delegate,se,Ne))}signInWithPhoneNumber(se,Ne){return cn(this._delegate,k.s(this._delegate,se,Ne))}signInWithPopup(se){var Ne=this;return(0,a.Z)(function*(){return qe(Ke(),Ne._delegate,"operation-not-supported-in-this-environment"),sr(Ne._delegate,k.c(Ne._delegate,se,Dt))})()}signInWithRedirect(se){var Ne=this;return(0,a.Z)(function*(){return qe(Ke(),Ne._delegate,"operation-not-supported-in-this-environment"),yield cr(Ne._delegate),k.f(Ne._delegate,se,Dt)})()}updateCurrentUser(se){return this._delegate.updateCurrentUser(se)}verifyPasswordResetCode(se){return k.a3(this._delegate,se)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return X.Persistence=pn,X})();function Mt(X,te,se){let Ne=X;"function"!=typeof X&&({next:Ne,error:te,complete:se}=X);const Xe=Ne;return{next:kt=>Xe(kt&&rt.getOrCreate(kt)),error:te,complete:se}}function Lt(X,te){const se=function(X,te){const se=Cn();if(!se)return[];const Ne=k.ay(ir,X,te);switch(se.getItem(Ne)){case pn.NONE:return[k.K];case pn.LOCAL:return[k.i,k.a];case pn.SESSION:return[k.a];default:return[]}}(X,te);if("undefined"!=typeof self&&!se.includes(k.i)&&se.push(k.i),"undefined"!=typeof window)for(const Ne of[k.b,k.a])se.includes(Ne)||se.push(Ne);return se.includes(k.K)||se.push(k.K),se}class en{constructor(){this.providerId="phone",this._delegate=new k.P(Nr(R.Z.auth()))}static credential(te,se){return k.P.credential(te,se)}verifyPhoneNumber(te,se){return this._delegate.verifyPhoneNumber(te,se)}unwrap(){return this._delegate}}en.PHONE_SIGN_IN_METHOD=k.P.PHONE_SIGN_IN_METHOD,en.PROVIDER_ID=k.P.PROVIDER_ID;const he=k.aw;var X;(X=R.Z).INTERNAL.registerComponent(new ee.wA("auth-compat",te=>{const se=te.getProvider("app-compat").getImmediate(),Ne=te.getProvider("auth");return new mt(se,Ne)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:k.A.EMAIL_SIGNIN,PASSWORD_RESET:k.A.PASSWORD_RESET,RECOVER_EMAIL:k.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:k.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:k.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:k.A.VERIFY_EMAIL}},EmailAuthProvider:k.L,FacebookAuthProvider:k.M,GithubAuthProvider:k.Q,GoogleAuthProvider:k.N,OAuthProvider:k.T,SAMLAuthProvider:k.U,PhoneAuthProvider:en,PhoneMultiFactorGenerator:k.m,RecaptchaVerifier:class{constructor(te,se,Ne=R.Z.app()){var Xe;he(null===(Xe=Ne.options)||void 0===Xe?void 0:Xe.apiKey,"invalid-api-key",{appName:Ne.name}),this._delegate=new k.R(te,se,Ne.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:k.V,Auth:mt,AuthCredential:k.G,Error:Q.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),X.registerVersion("@firebase/auth-compat","0.2.12")},1593:(Ve,me,O)=>{"use strict";O.d(me,{P:()=>ee});var a=O(9193),R=O(5917),k=O(7574);class ee{constructor(U,P,N){this.kind=U,this.value=P,this.error=N,this.hasValue="N"===U}observe(U){switch(this.kind){case"N":return U.next&&U.next(this.value);case"E":return U.error&&U.error(this.error);case"C":return U.complete&&U.complete()}}do(U,P,N){switch(this.kind){case"N":return U&&U(this.value);case"E":return P&&P(this.error);case"C":return N&&N()}}accept(U,P,N){return U&&"function"==typeof U.next?this.observe(U):this.do(U,P,N)}toObservable(){switch(this.kind){case"N":return(0,R.of)(this.value);case"E":return L=this.error,new k.y(P=>P.error(L));case"C":return(0,a.c)()}var L;throw new Error("unexpected notification kind value")}static createNext(U){return void 0!==U?new ee("N",U):ee.undefinedValueNotification}static createError(U){return new ee("E",void 0,U)}static createComplete(){return ee.completeNotification}}ee.completeNotification=new ee("C"),ee.undefinedValueNotification=new ee("N",void 0)},7574:(Ve,me,O)=>{"use strict";O.d(me,{y:()=>N});var a=O(7393),k=O(9181),Q=O(6490),q=O(6554),ee=O(4487);var P=O(2494);let N=(()=>{class B{constructor(J){this._isScalar=!1,J&&(this._subscribe=J)}lift(J){const re=new B;return re.source=this,re.operator=J,re}subscribe(J,re,le){const{operator:H}=this,Z=function(B,z,J){if(B){if(B instanceof a.L)return B;if(B[k.b])return B[k.b]()}return B||z||J?new a.L(B,z,J):new a.L(Q.c)}(J,re,le);if(Z.add(H?H.call(Z,this.source):this.source||P.v.useDeprecatedSynchronousErrorHandling&&!Z.syncErrorThrowable?this._subscribe(Z):this._trySubscribe(Z)),P.v.useDeprecatedSynchronousErrorHandling&&Z.syncErrorThrowable&&(Z.syncErrorThrowable=!1,Z.syncErrorThrown))throw Z.syncErrorValue;return Z}_trySubscribe(J){try{return this._subscribe(J)}catch(re){P.v.useDeprecatedSynchronousErrorHandling&&(J.syncErrorThrown=!0,J.syncErrorValue=re),function(B){for(;B;){const{closed:z,destination:J,isStopped:re}=B;if(z||re)return!1;B=J&&J instanceof a.L?J:null}return!0}(J)?J.error(re):console.warn(re)}}forEach(J,re){return new(re=A(re))((le,H)=>{let Z;Z=this.subscribe(de=>{try{J(de)}catch(fe){H(fe),Z&&Z.unsubscribe()}},H,le)})}_subscribe(J){const{source:re}=this;return re&&re.subscribe(J)}[q.L](){return this}pipe(...J){return 0===J.length?this:function(B){return 0===B.length?ee.y:1===B.length?B[0]:function(J){return B.reduce((re,le)=>le(re),J)}}(J)(this)}toPromise(J){return new(J=A(J))((re,le)=>{let H;this.subscribe(Z=>H=Z,Z=>le(Z),()=>re(H))})}}return B.create=z=>new B(z),B})();function A(B){if(B||(B=P.v.Promise||Promise),!B)throw new Error("no Promise impl found");return B}},6490:(Ve,me,O)=>{"use strict";O.d(me,{c:()=>k});var a=O(2494),R=O(4449);const k={closed:!0,next(Q){},error(Q){if(a.v.useDeprecatedSynchronousErrorHandling)throw Q;(0,R.z)(Q)},complete(){}}},9765:(Ve,me,O)=>{"use strict";O.d(me,{Yc:()=>ee,xQ:()=>L,ug:()=>U});var a=O(7574),R=O(7393),k=O(5319),Q=O(7971),ie=O(8858),q=O(9181);class ee extends R.L{constructor(N){super(N),this.destination=N}}let L=(()=>{class P extends a.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[q.b](){return new ee(this)}lift(A){const B=new U(this,this);return B.operator=A,B}next(A){if(this.closed)throw new Q.N;if(!this.isStopped){const{observers:B}=this,z=B.length,J=B.slice();for(let re=0;re<z;re++)J[re].next(A)}}error(A){if(this.closed)throw new Q.N;this.hasError=!0,this.thrownError=A,this.isStopped=!0;const{observers:B}=this,z=B.length,J=B.slice();for(let re=0;re<z;re++)J[re].error(A);this.observers.length=0}complete(){if(this.closed)throw new Q.N;this.isStopped=!0;const{observers:A}=this,B=A.length,z=A.slice();for(let J=0;J<B;J++)z[J].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(A){if(this.closed)throw new Q.N;return super._trySubscribe(A)}_subscribe(A){if(this.closed)throw new Q.N;return this.hasError?(A.error(this.thrownError),k.w.EMPTY):this.isStopped?(A.complete(),k.w.EMPTY):(this.observers.push(A),new ie.W(this,A))}asObservable(){const A=new a.y;return A.source=this,A}}return P.create=(N,A)=>new U(N,A),P})();class U extends L{constructor(N,A){super(),this.destination=N,this.source=A}next(N){const{destination:A}=this;A&&A.next&&A.next(N)}error(N){const{destination:A}=this;A&&A.error&&this.destination.error(N)}complete(){const{destination:N}=this;N&&N.complete&&this.destination.complete()}_subscribe(N){const{source:A}=this;return A?this.source.subscribe(N):k.w.EMPTY}}},8858:(Ve,me,O)=>{"use strict";O.d(me,{W:()=>R});var a=O(5319);class R extends a.w{constructor(Q,ie){super(),this.subject=Q,this.subscriber=ie,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const Q=this.subject,ie=Q.observers;if(this.subject=null,!ie||0===ie.length||Q.isStopped||Q.closed)return;const q=ie.indexOf(this.subscriber);-1!==q&&ie.splice(q,1)}}},7393:(Ve,me,O)=>{"use strict";O.d(me,{L:()=>ee});var a=O(9105),R=O(6490),k=O(5319),Q=O(9181),ie=O(2494),q=O(4449);class ee extends k.w{constructor(P,N,A){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=R.c;break;case 1:if(!P){this.destination=R.c;break}if("object"==typeof P){P instanceof ee?(this.syncErrorThrowable=P.syncErrorThrowable,this.destination=P,P.add(this)):(this.syncErrorThrowable=!0,this.destination=new L(this,P));break}default:this.syncErrorThrowable=!0,this.destination=new L(this,P,N,A)}}[Q.b](){return this}static create(P,N,A){const B=new ee(P,N,A);return B.syncErrorThrowable=!1,B}next(P){this.isStopped||this._next(P)}error(P){this.isStopped||(this.isStopped=!0,this._error(P))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(P){this.destination.next(P)}_error(P){this.destination.error(P),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:P}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=P,this}}class L extends ee{constructor(P,N,A,B){super(),this._parentSubscriber=P;let z,J=this;(0,a.m)(N)?z=N:N&&(z=N.next,A=N.error,B=N.complete,N!==R.c&&(J=Object.create(N),(0,a.m)(J.unsubscribe)&&this.add(J.unsubscribe.bind(J)),J.unsubscribe=this.unsubscribe.bind(this))),this._context=J,this._next=z,this._error=A,this._complete=B}next(P){if(!this.isStopped&&this._next){const{_parentSubscriber:N}=this;ie.v.useDeprecatedSynchronousErrorHandling&&N.syncErrorThrowable?this.__tryOrSetError(N,this._next,P)&&this.unsubscribe():this.__tryOrUnsub(this._next,P)}}error(P){if(!this.isStopped){const{_parentSubscriber:N}=this,{useDeprecatedSynchronousErrorHandling:A}=ie.v;if(this._error)A&&N.syncErrorThrowable?(this.__tryOrSetError(N,this._error,P),this.unsubscribe()):(this.__tryOrUnsub(this._error,P),this.unsubscribe());else if(N.syncErrorThrowable)A?(N.syncErrorValue=P,N.syncErrorThrown=!0):(0,q.z)(P),this.unsubscribe();else{if(this.unsubscribe(),A)throw P;(0,q.z)(P)}}}complete(){if(!this.isStopped){const{_parentSubscriber:P}=this;if(this._complete){const N=()=>this._complete.call(this._context);ie.v.useDeprecatedSynchronousErrorHandling&&P.syncErrorThrowable?(this.__tryOrSetError(P,N),this.unsubscribe()):(this.__tryOrUnsub(N),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(P,N){try{P.call(this._context,N)}catch(A){if(this.unsubscribe(),ie.v.useDeprecatedSynchronousErrorHandling)throw A;(0,q.z)(A)}}__tryOrSetError(P,N,A){if(!ie.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{N.call(this._context,A)}catch(B){return ie.v.useDeprecatedSynchronousErrorHandling?(P.syncErrorValue=B,P.syncErrorThrown=!0,!0):((0,q.z)(B),!0)}return!1}_unsubscribe(){const{_parentSubscriber:P}=this;this._context=null,this._parentSubscriber=null,P.unsubscribe()}}},5319:(Ve,me,O)=>{"use strict";O.d(me,{w:()=>q});var a=O(9796),R=O(1555),k=O(9105);const ie=(()=>{function L(U){return Error.call(this),this.message=U?`${U.length} errors occurred during unsubscription:\n${U.map((P,N)=>`${N+1}) ${P.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=U,this}return L.prototype=Object.create(Error.prototype),L})();class q{constructor(U){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,U&&(this._ctorUnsubscribe=!0,this._unsubscribe=U)}unsubscribe(){let U;if(this.closed)return;let{_parentOrParents:P,_ctorUnsubscribe:N,_unsubscribe:A,_subscriptions:B}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,P instanceof q)P.remove(this);else if(null!==P)for(let z=0;z<P.length;++z)P[z].remove(this);if((0,k.m)(A)){N&&(this._unsubscribe=void 0);try{A.call(this)}catch(z){U=z instanceof ie?ee(z.errors):[z]}}if((0,a.k)(B)){let z=-1,J=B.length;for(;++z<J;){const re=B[z];if((0,R.K)(re))try{re.unsubscribe()}catch(le){U=U||[],le instanceof ie?U=U.concat(ee(le.errors)):U.push(le)}}}if(U)throw new ie(U)}add(U){let P=U;if(!U)return q.EMPTY;switch(typeof U){case"function":P=new q(U);case"object":if(P===this||P.closed||"function"!=typeof P.unsubscribe)return P;if(this.closed)return P.unsubscribe(),P;if(!(P instanceof q)){const B=P;P=new q,P._subscriptions=[B]}break;default:throw new Error("unrecognized teardown "+U+" added to Subscription.")}let{_parentOrParents:N}=P;if(null===N)P._parentOrParents=this;else if(N instanceof q){if(N===this)return P;P._parentOrParents=[N,this]}else{if(-1!==N.indexOf(this))return P;N.push(this)}const A=this._subscriptions;return null===A?this._subscriptions=[P]:A.push(P),P}remove(U){const P=this._subscriptions;if(P){const N=P.indexOf(U);-1!==N&&P.splice(N,1)}}}var L;function ee(L){return L.reduce((U,P)=>U.concat(P instanceof ie?P.errors:P),[])}q.EMPTY=((L=new q).closed=!0,L)},2494:(Ve,me,O)=>{"use strict";O.d(me,{v:()=>R});let a=!1;const R={Promise:void 0,set useDeprecatedSynchronousErrorHandling(k){if(k){const Q=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+Q.stack)}else a&&console.log("RxJS: Back to a better error behavior. Thank you. <3");a=k},get useDeprecatedSynchronousErrorHandling(){return a}}},5345:(Ve,me,O)=>{"use strict";O.d(me,{IY:()=>Q,Ds:()=>q,ft:()=>L});var a=O(7393),R=O(7574),k=O(7444);class Q extends a.L{constructor(P){super(),this.parent=P}_next(P){this.parent.notifyNext(P)}_error(P){this.parent.notifyError(P),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class q extends a.L{notifyNext(P){this.destination.next(P)}notifyError(P){this.destination.error(P)}notifyComplete(){this.destination.complete()}}function L(U,P){if(P.closed)return;if(U instanceof R.y)return U.subscribe(P);let N;try{N=(0,k.s)(U)(P)}catch(A){P.error(A)}return N}},2441:(Ve,me,O)=>{"use strict";O.d(me,{c:()=>ie,N:()=>q});var a=O(9765),R=O(7574),k=O(5319),Q=O(1307);class ie extends R.y{constructor(N,A){super(),this.source=N,this.subjectFactory=A,this._refCount=0,this._isComplete=!1}_subscribe(N){return this.getSubject().subscribe(N)}getSubject(){const N=this._subject;return(!N||N.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let N=this._connection;return N||(this._isComplete=!1,N=this._connection=new k.w,N.add(this.source.subscribe(new ee(this.getSubject(),this))),N.closed&&(this._connection=null,N=k.w.EMPTY)),N}refCount(){return(0,Q.x)()(this)}}const q=(()=>{const P=ie.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:P._subscribe},_isComplete:{value:P._isComplete,writable:!0},getSubject:{value:P.getSubject},connect:{value:P.connect},refCount:{value:P.refCount}}})();class ee extends a.Yc{constructor(N,A){super(N),this.connectable=A}_error(N){this._unsubscribe(),super._error(N)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const N=this.connectable;if(N){this.connectable=null;const A=N._connection;N._refCount=0,N._subject=null,N._connection=null,A&&A.unsubscribe()}}}},9193:(Ve,me,O)=>{"use strict";O.d(me,{E:()=>R,c:()=>k});var a=O(7574);const R=new a.y(ie=>ie.complete());function k(ie){return ie?function(ie){return new a.y(q=>ie.schedule(()=>q.complete()))}(ie):R}},4402:(Ve,me,O)=>{"use strict";O.d(me,{D:()=>J});var a=O(7574),R=O(7444),k=O(5319),Q=O(6554),ee=O(4087),L=O(377),N=O(4072),A=O(9489);function J(re,le){return le?function(re,le){if(null!=re){if(function(re){return re&&"function"==typeof re[Q.L]}(re))return function(re,le){return new a.y(H=>{const Z=new k.w;return Z.add(le.schedule(()=>{const de=re[Q.L]();Z.add(de.subscribe({next(fe){Z.add(le.schedule(()=>H.next(fe)))},error(fe){Z.add(le.schedule(()=>H.error(fe)))},complete(){Z.add(le.schedule(()=>H.complete()))}}))})),Z})}(re,le);if((0,N.t)(re))return function(re,le){return new a.y(H=>{const Z=new k.w;return Z.add(le.schedule(()=>re.then(de=>{Z.add(le.schedule(()=>{H.next(de),Z.add(le.schedule(()=>H.complete()))}))},de=>{Z.add(le.schedule(()=>H.error(de)))}))),Z})}(re,le);if((0,A.z)(re))return(0,ee.r)(re,le);if(function(re){return re&&"function"==typeof re[L.hZ]}(re)||"string"==typeof re)return function(re,le){if(!re)throw new Error("Iterable cannot be null");return new a.y(H=>{const Z=new k.w;let de;return Z.add(()=>{de&&"function"==typeof de.return&&de.return()}),Z.add(le.schedule(()=>{de=re[L.hZ](),Z.add(le.schedule(function(){if(H.closed)return;let fe,Ce;try{const ve=de.next();fe=ve.value,Ce=ve.done}catch(ve){return void H.error(ve)}Ce?H.complete():(H.next(fe),this.schedule())}))})),Z})}(re,le)}throw new TypeError((null!==re&&typeof re||re)+" is not observable")}(re,le):re instanceof a.y?re:new a.y((0,R.s)(re))}},6693:(Ve,me,O)=>{"use strict";O.d(me,{n:()=>Q});var a=O(7574),R=O(5015),k=O(4087);function Q(ie,q){return q?(0,k.r)(ie,q):new a.y((0,R.V)(ie))}},6682:(Ve,me,O)=>{"use strict";O.d(me,{T:()=>ie});var a=O(7574),R=O(4869),k=O(3282),Q=O(6693);function ie(...q){let ee=Number.POSITIVE_INFINITY,L=null,U=q[q.length-1];return(0,R.K)(U)?(L=q.pop(),q.length>1&&"number"==typeof q[q.length-1]&&(ee=q.pop())):"number"==typeof U&&(ee=q.pop()),null===L&&1===q.length&&q[0]instanceof a.y?q[0]:(0,k.J)(ee)((0,Q.n)(q,L))}},5917:(Ve,me,O)=>{"use strict";O.d(me,{of:()=>Q});var a=O(4869),R=O(6693),k=O(4087);function Q(...ie){let q=ie[ie.length-1];return(0,a.K)(q)?(ie.pop(),(0,k.r)(ie,q)):(0,R.n)(ie)}},8002:(Ve,me,O)=>{"use strict";O.d(me,{U:()=>R});var a=O(7393);function R(ie,q){return function(L){if("function"!=typeof ie)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return L.lift(new k(ie,q))}}class k{constructor(q,ee){this.project=q,this.thisArg=ee}call(q,ee){return ee.subscribe(new Q(q,this.project,this.thisArg))}}class Q extends a.L{constructor(q,ee,L){super(q),this.project=ee,this.count=0,this.thisArg=L||this}_next(q){let ee;try{ee=this.project.call(this.thisArg,q,this.count++)}catch(L){return void this.destination.error(L)}this.destination.next(ee)}}},3282:(Ve,me,O)=>{"use strict";O.d(me,{J:()=>k});var a=O(9773),R=O(4487);function k(Q=Number.POSITIVE_INFINITY){return(0,a.zg)(R.y,Q)}},9773:(Ve,me,O)=>{"use strict";O.d(me,{zg:()=>Q});var a=O(8002),R=O(4402),k=O(5345);function Q(L,U,P=Number.POSITIVE_INFINITY){return"function"==typeof U?N=>N.pipe(Q((A,B)=>(0,R.D)(L(A,B)).pipe((0,a.U)((z,J)=>U(A,z,B,J))),P)):("number"==typeof U&&(P=U),N=>N.lift(new ie(L,P)))}class ie{constructor(U,P=Number.POSITIVE_INFINITY){this.project=U,this.concurrent=P}call(U,P){return P.subscribe(new q(U,this.project,this.concurrent))}}class q extends k.Ds{constructor(U,P,N=Number.POSITIVE_INFINITY){super(U),this.project=P,this.concurrent=N,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(U){this.active<this.concurrent?this._tryNext(U):this.buffer.push(U)}_tryNext(U){let P;const N=this.index++;try{P=this.project(U,N)}catch(A){return void this.destination.error(A)}this.active++,this._innerSub(P)}_innerSub(U){const P=new k.IY(this),N=this.destination;N.add(P);const A=(0,k.ft)(U,P);A!==P&&N.add(A)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(U){this.destination.next(U)}notifyComplete(){const U=this.buffer;this.active--,U.length>0?this._next(U.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},9746:(Ve,me,O)=>{"use strict";O.d(me,{QV:()=>k,ht:()=>ie});var a=O(7393),R=O(1593);function k(ee,L=0){return function(P){return P.lift(new Q(ee,L))}}class Q{constructor(L,U=0){this.scheduler=L,this.delay=U}call(L,U){return U.subscribe(new ie(L,this.scheduler,this.delay))}}class ie extends a.L{constructor(L,U,P=0){super(L),this.scheduler=U,this.delay=P}static dispatch(L){const{notification:U,destination:P}=L;U.observe(P),this.unsubscribe()}scheduleMessage(L){this.destination.add(this.scheduler.schedule(ie.dispatch,this.delay,new q(L,this.destination)))}_next(L){this.scheduleMessage(R.P.createNext(L))}_error(L){this.scheduleMessage(R.P.createError(L)),this.unsubscribe()}_complete(){this.scheduleMessage(R.P.createComplete()),this.unsubscribe()}}class q{constructor(L,U){this.notification=L,this.destination=U}}},1307:(Ve,me,O)=>{"use strict";O.d(me,{x:()=>R});var a=O(7393);function R(){return function(q){return q.lift(new k(q))}}class k{constructor(q){this.connectable=q}call(q,ee){const{connectable:L}=this;L._refCount++;const U=new Q(q,L),P=ee.subscribe(U);return U.closed||(U.connection=L.connect()),P}}class Q extends a.L{constructor(q,ee){super(q),this.connectable=ee}_unsubscribe(){const{connectable:q}=this;if(!q)return void(this.connection=null);this.connectable=null;const ee=q._refCount;if(ee<=0)return void(this.connection=null);if(q._refCount=ee-1,ee>1)return void(this.connection=null);const{connection:L}=this,U=q._connection;this.connection=null,U&&(!L||U===L)&&U.unsubscribe()}}},8819:(Ve,me,O)=>{"use strict";O.d(me,{B:()=>ee});var a=O(2441);var Q=O(1307),ie=O(9765);function q(){return new ie.xQ}function ee(){return L=>(0,Q.x)()(function(L,U){return function(N){let A;A="function"==typeof L?L:function(){return L};const B=Object.create(N,a.N);return B.source=N,B.subjectFactory=A,B}}(q)(L))}},2639:(Ve,me,O)=>{"use strict";O.d(me,{R:()=>re});var a=O(7574);let R=1;const k=Promise.resolve(),Q={};function ie(H){return H in Q&&(delete Q[H],!0)}const q={setImmediate(H){const Z=R++;return Q[Z]=!0,k.then(()=>ie(Z)&&H()),Z},clearImmediate(H){ie(H)}};var L=O(6465),P=O(6102);const B=new class extends P.v{flush(Z){this.active=!0,this.scheduled=void 0;const{actions:de}=this;let fe,Ce=-1,ve=de.length;Z=Z||de.shift();do{if(fe=Z.execute(Z.state,Z.delay))break}while(++Ce<ve&&(Z=de.shift()));if(this.active=!1,fe){for(;++Ce<ve&&(Z=de.shift());)Z.unsubscribe();throw fe}}}(class extends L.o{constructor(Z,de){super(Z,de),this.scheduler=Z,this.work=de}requestAsyncId(Z,de,fe=0){return null!==fe&&fe>0?super.requestAsyncId(Z,de,fe):(Z.actions.push(this),Z.scheduled||(Z.scheduled=q.setImmediate(Z.flush.bind(Z,null))))}recycleAsyncId(Z,de,fe=0){if(null!==fe&&fe>0||null===fe&&this.delay>0)return super.recycleAsyncId(Z,de,fe);0===Z.actions.length&&(q.clearImmediate(de),Z.scheduled=void 0)}});var z=O(6561);class J extends a.y{constructor(Z,de=0,fe=B){super(),this.source=Z,this.delayTime=de,this.scheduler=fe,(!(0,z.k)(de)||de<0)&&(this.delayTime=0),(!fe||"function"!=typeof fe.schedule)&&(this.scheduler=B)}static create(Z,de=0,fe=B){return new J(Z,de,fe)}static dispatch(Z){const{source:de,subscriber:fe}=Z;return this.add(de.subscribe(fe))}_subscribe(Z){return this.scheduler.schedule(J.dispatch,this.delayTime,{source:this.source,subscriber:Z})}}function re(H,Z=0){return function(fe){return fe.lift(new le(H,Z))}}class le{constructor(Z,de){this.scheduler=Z,this.delay=de}call(Z,de){return new J(de,this.delay,this.scheduler).subscribe(Z)}}},8307:(Ve,me,O)=>{"use strict";O.d(me,{b:()=>Q});var a=O(7393),R=O(8640),k=O(9105);function Q(ee,L,U){return function(N){return N.lift(new ie(ee,L,U))}}class ie{constructor(L,U,P){this.nextOrObserver=L,this.error=U,this.complete=P}call(L,U){return U.subscribe(new q(L,this.nextOrObserver,this.error,this.complete))}}class q extends a.L{constructor(L,U,P,N){super(L),this._tapNext=R.Z,this._tapError=R.Z,this._tapComplete=R.Z,this._tapError=P||R.Z,this._tapComplete=N||R.Z,(0,k.m)(U)?(this._context=this,this._tapNext=U):U&&(this._context=U,this._tapNext=U.next||R.Z,this._tapError=U.error||R.Z,this._tapComplete=U.complete||R.Z)}_next(L){try{this._tapNext.call(this._context,L)}catch(U){return void this.destination.error(U)}this.destination.next(L)}_error(L){try{this._tapError.call(this._context,L)}catch(U){return void this.destination.error(U)}this.destination.error(L)}_complete(){try{this._tapComplete.call(this._context)}catch(L){return void this.destination.error(L)}return this.destination.complete()}}},4087:(Ve,me,O)=>{"use strict";O.d(me,{r:()=>k});var a=O(7574),R=O(5319);function k(Q,ie){return new a.y(q=>{const ee=new R.w;let L=0;return ee.add(ie.schedule(function(){L!==Q.length?(q.next(Q[L++]),q.closed||ee.add(this.schedule())):q.complete()})),ee})}},6465:(Ve,me,O)=>{"use strict";O.d(me,{o:()=>k});var a=O(5319);class R extends a.w{constructor(ie,q){super()}schedule(ie,q=0){return this}}class k extends R{constructor(ie,q){super(ie,q),this.scheduler=ie,this.work=q,this.pending=!1}schedule(ie,q=0){if(this.closed)return this;this.state=ie;const ee=this.id,L=this.scheduler;return null!=ee&&(this.id=this.recycleAsyncId(L,ee,q)),this.pending=!0,this.delay=q,this.id=this.id||this.requestAsyncId(L,this.id,q),this}requestAsyncId(ie,q,ee=0){return setInterval(ie.flush.bind(ie,this),ee)}recycleAsyncId(ie,q,ee=0){if(null!==ee&&this.delay===ee&&!1===this.pending)return q;clearInterval(q)}execute(ie,q){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ee=this._execute(ie,q);if(ee)return ee;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ie,q){let L,ee=!1;try{this.work(ie)}catch(U){ee=!0,L=!!U&&U||new Error(U)}if(ee)return this.unsubscribe(),L}_unsubscribe(){const ie=this.id,q=this.scheduler,ee=q.actions,L=ee.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==L&&ee.splice(L,1),null!=ie&&(this.id=this.recycleAsyncId(q,ie,null)),this.delay=null}}},6102:(Ve,me,O)=>{"use strict";O.d(me,{v:()=>R});let a=(()=>{class k{constructor(ie,q=k.now){this.SchedulerAction=ie,this.now=q}schedule(ie,q=0,ee){return new this.SchedulerAction(this,ie).schedule(ee,q)}}return k.now=()=>Date.now(),k})();class R extends a{constructor(Q,ie=a.now){super(Q,()=>R.delegate&&R.delegate!==this?R.delegate.now():ie()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(Q,ie=0,q){return R.delegate&&R.delegate!==this?R.delegate.schedule(Q,ie,q):super.schedule(Q,ie,q)}flush(Q){const{actions:ie}=this;if(this.active)return void ie.push(Q);let q;this.active=!0;do{if(q=Q.execute(Q.state,Q.delay))break}while(Q=ie.shift());if(this.active=!1,q){for(;Q=ie.shift();)Q.unsubscribe();throw q}}}},3637:(Ve,me,O)=>{"use strict";O.d(me,{z:()=>k,P:()=>Q});var a=O(6465);const k=new(O(6102).v)(a.o),Q=k},7771:(Ve,me,O)=>{"use strict";O.d(me,{c:()=>q,N:()=>ie});var a=O(6465),k=O(6102);const ie=new class extends k.v{}(class extends a.o{constructor(L,U){super(L,U),this.scheduler=L,this.work=U}schedule(L,U=0){return U>0?super.schedule(L,U):(this.delay=U,this.state=L,this.scheduler.flush(this),this)}execute(L,U){return U>0||this.closed?super.execute(L,U):this._execute(L,U)}requestAsyncId(L,U,P=0){return null!==P&&P>0||null===P&&this.delay>0?super.requestAsyncId(L,U,P):L.flush(this)}}),q=ie},377:(Ve,me,O)=>{"use strict";O.d(me,{hZ:()=>R});const R="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(Ve,me,O)=>{"use strict";O.d(me,{L:()=>a});const a="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(Ve,me,O)=>{"use strict";O.d(me,{b:()=>a});const a="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(Ve,me,O)=>{"use strict";O.d(me,{N:()=>R});const R=(()=>{function k(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return k.prototype=Object.create(Error.prototype),k})()},4449:(Ve,me,O)=>{"use strict";function a(R){setTimeout(()=>{throw R},0)}O.d(me,{z:()=>a})},4487:(Ve,me,O)=>{"use strict";function a(R){return R}O.d(me,{y:()=>a})},9796:(Ve,me,O)=>{"use strict";O.d(me,{k:()=>a});const a=Array.isArray||(R=>R&&"number"==typeof R.length)},9489:(Ve,me,O)=>{"use strict";O.d(me,{z:()=>a});const a=R=>R&&"number"==typeof R.length&&"function"!=typeof R},9105:(Ve,me,O)=>{"use strict";function a(R){return"function"==typeof R}O.d(me,{m:()=>a})},6561:(Ve,me,O)=>{"use strict";O.d(me,{k:()=>R});var a=O(9796);function R(k){return!(0,a.k)(k)&&k-parseFloat(k)+1>=0}},1555:(Ve,me,O)=>{"use strict";function a(R){return null!==R&&"object"==typeof R}O.d(me,{K:()=>a})},4072:(Ve,me,O)=>{"use strict";function a(R){return!!R&&"function"!=typeof R.subscribe&&"function"==typeof R.then}O.d(me,{t:()=>a})},4869:(Ve,me,O)=>{"use strict";function a(R){return R&&"function"==typeof R.schedule}O.d(me,{K:()=>a})},8640:(Ve,me,O)=>{"use strict";function a(){}O.d(me,{Z:()=>a})},7444:(Ve,me,O)=>{"use strict";O.d(me,{s:()=>N});var a=O(5015),R=O(4449),Q=O(377),q=O(6554),L=O(9489),U=O(4072),P=O(1555);const N=A=>{if(A&&"function"==typeof A[q.L])return(A=>B=>{const z=A[q.L]();if("function"!=typeof z.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return z.subscribe(B)})(A);if((0,L.z)(A))return(0,a.V)(A);if((0,U.t)(A))return(A=>B=>(A.then(z=>{B.closed||(B.next(z),B.complete())},z=>B.error(z)).then(null,R.z),B))(A);if(A&&"function"==typeof A[Q.hZ])return(A=>B=>{const z=A[Q.hZ]();for(;;){let J;try{J=z.next()}catch(re){return B.error(re),B}if(J.done){B.complete();break}if(B.next(J.value),B.closed)break}return"function"==typeof z.return&&B.add(()=>{z.return&&z.return()}),B})(A);{const z=`You provided ${(0,P.K)(A)?"an invalid object":`'${A}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(z)}}},5015:(Ve,me,O)=>{"use strict";O.d(me,{V:()=>a});const a=R=>k=>{for(let Q=0,ie=R.length;Q<ie&&!k.closed;Q++)k.next(R[Q]);k.complete()}},6355:function(Ve,me){!function(O){"use strict";const a=("Number",A=>"[object Number]"===Object.prototype.toString.call(A)),R=A=>a(A)&&!Number.isNaN(A);const Q=(A,B)=>A+B;function q(A){if(A.length)return A.slice(-1)[0]}function U(A,B,z){const J=2/(B+1);return[z].concat(function(A,B,...z){return function(J){const re=Math.min(...J.map(H=>H.length)),le=[];for(let H=0;H<re;H++){const Z=[];for(const de of J)Z.push(de[H]);le.push(Z)}return le}(z).map(J=>B=A(B,...J))}((re,le)=>R(re)?J*le+(1-J)*re:le,z,A))}function P(A,B,z=1){let J=A.findIndex(R);J<0&&(J=A.length);const re=Math.min(J+z-1,A.length);J=Math.max(J,re);const le=function(A){return new Array(Math.max(A,0)).fill(NaN)}(J),H=(Z=A.slice(J+1-z,J+1).filter(R)).length<=0?NaN:function(...A){return(B=A,B.filter(z=>"number"==typeof z).map(z=>z).filter(z=>!Number.isNaN(z))).reduce(Q,0);var B}(...Z)/Z.length;var Z;return le.concat(U(A.slice(J+1),B,H)).slice(0,A.length)}function N(A,B=12,z=26,J=9,re=!1){const le=(fe,Ce)=>P(fe,Ce,re?Ce:1),H=le(A,B),Z=le(A,z),de=H.map((fe,Ce)=>fe-Z[Ce]);return{line:de,signal:le(de,J)}}O.ema=P,O.emaCore=U,O.macd=N,O.macdGetOneResult=function(A,B=12,z=26,J=9,re=!1){const le=N(A,B,z,J,re);return{line:q(le.line)||NaN,signal:q(le.signal)||NaN}},Object.defineProperty(O,"__esModule",{value:!0})}(me)},8044:(Ve,me,O)=>{"use strict";var a=O(7716);let R=null;function k(){return R}const ee=new a.OlP("DocumentToken");let L=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=(0,a.Yz7)({factory:U,token:n,providedIn:"platform"}),n})();function U(){return(0,a.LFG)(N)}const P=new a.OlP("Location Initialized");let N=(()=>{class n extends L{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(e){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,r,i){A()?this._history.pushState(e,r,i):this.location.hash=i}replaceState(e,r,i){A()?this._history.replaceState(e,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ee))},n.\u0275prov=(0,a.Yz7)({factory:B,token:n,providedIn:"platform"}),n})();function A(){return!!window.history.pushState}function B(){return new N((0,a.LFG)(ee))}function z(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function J(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function re(n){return n&&"?"!==n[0]?"?"+n:n}let le=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=(0,a.Yz7)({factory:H,token:n,providedIn:"root"}),n})();function H(n){const t=(0,a.LFG)(ee).location;return new de((0,a.LFG)(L),t&&t.origin||"")}const Z=new a.OlP("appBaseHref");let de=(()=>{class n extends le{constructor(e,r){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return z(this._baseHref,e)}path(e=!1){const r=this._platformLocation.pathname+re(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${r}${i}`:r}pushState(e,r,i,l){const d=this.prepareExternalUrl(i+re(l));this._platformLocation.pushState(e,r,d)}replaceState(e,r,i,l){const d=this.prepareExternalUrl(i+re(l));this._platformLocation.replaceState(e,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,e)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(L),a.LFG(Z,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),fe=(()=>{class n extends le{constructor(e,r){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(e){const r=z(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,i,l){let d=this.prepareExternalUrl(i+re(l));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(e,r,d)}replaceState(e,r,i,l){let d=this.prepareExternalUrl(i+re(l));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(e,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,e)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(L),a.LFG(Z,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),Ce=(()=>{class n{constructor(e,r){this._subject=new a.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=J(Re(i)),this._platformStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+re(r))}normalize(e){return n.stripTrailingSlash(function(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,Re(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,r="",i=null){this._platformStrategy.pushState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+re(r)),i)}replaceState(e,r="",i=null){this._platformStrategy.replaceState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+re(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(i=>i(e,r))}subscribe(e,r,i){return this._subject.subscribe({next:e,error:r,complete:i})}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(le),a.LFG(L))},n.normalizeQueryParams=re,n.joinWithSlash=z,n.stripTrailingSlash=J,n.\u0275prov=(0,a.Yz7)({factory:ve,token:n,providedIn:"root"}),n})();function ve(){return new Ce((0,a.LFG)(le),(0,a.LFG)(L))}function Re(n){return n.replace(/\/index.html$/,"")}var ce=(()=>((ce=ce||{})[ce.Zero=0]="Zero",ce[ce.One=1]="One",ce[ce.Two=2]="Two",ce[ce.Few=3]="Few",ce[ce.Many=4]="Many",ce[ce.Other=5]="Other",ce))(),Ee=(()=>((Ee=Ee||{})[Ee.Format=0]="Format",Ee[Ee.Standalone=1]="Standalone",Ee))(),_e=(()=>((_e=_e||{})[_e.Narrow=0]="Narrow",_e[_e.Abbreviated=1]="Abbreviated",_e[_e.Wide=2]="Wide",_e[_e.Short=3]="Short",_e))(),xe=(()=>((xe=xe||{})[xe.Short=0]="Short",xe[xe.Medium=1]="Medium",xe[xe.Long=2]="Long",xe[xe.Full=3]="Full",xe))(),Ie=(()=>((Ie=Ie||{})[Ie.Decimal=0]="Decimal",Ie[Ie.Group=1]="Group",Ie[Ie.List=2]="List",Ie[Ie.PercentSign=3]="PercentSign",Ie[Ie.PlusSign=4]="PlusSign",Ie[Ie.MinusSign=5]="MinusSign",Ie[Ie.Exponential=6]="Exponential",Ie[Ie.SuperscriptingExponent=7]="SuperscriptingExponent",Ie[Ie.PerMille=8]="PerMille",Ie[Ie.Infinity=9]="Infinity",Ie[Ie.NaN=10]="NaN",Ie[Ie.TimeSeparator=11]="TimeSeparator",Ie[Ie.CurrencyDecimal=12]="CurrencyDecimal",Ie[Ie.CurrencyGroup=13]="CurrencyGroup",Ie))();function Rt(n,t){return hn((0,a.cg1)(n)[a.wAp.DateFormat],t)}function vt(n,t){return hn((0,a.cg1)(n)[a.wAp.TimeFormat],t)}function Ct(n,t){return hn((0,a.cg1)(n)[a.wAp.DateTimeFormat],t)}function Xt(n,t){const e=(0,a.cg1)(n),r=e[a.wAp.NumberSymbols][t];if(void 0===r){if(t===Ie.CurrencyDecimal)return e[a.wAp.NumberSymbols][Ie.Decimal];if(t===Ie.CurrencyGroup)return e[a.wAp.NumberSymbols][Ie.Group]}return r}const Qn=a.kL8;function Ke(n){if(!n[a.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[a.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function hn(n,t){for(let e=t;e>-1;e--)if(void 0!==n[e])return n[e];throw new Error("Locale data API: locale data undefined")}function pn(n){const[t,e]=n.split(":");return{hours:+t,minutes:+e}}const cr=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Dn={},zi=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Cn=(()=>((Cn=Cn||{})[Cn.Short=0]="Short",Cn[Cn.ShortGMT=1]="ShortGMT",Cn[Cn.Long=2]="Long",Cn[Cn.Extended=3]="Extended",Cn))(),it=(()=>((it=it||{})[it.FullYear=0]="FullYear",it[it.Month=1]="Month",it[it.Date=2]="Date",it[it.Hours=3]="Hours",it[it.Minutes=4]="Minutes",it[it.Seconds=5]="Seconds",it[it.FractionalSeconds=6]="FractionalSeconds",it[it.Day=7]="Day",it))(),Dt=(()=>((Dt=Dt||{})[Dt.DayPeriods=0]="DayPeriods",Dt[Dt.Days=1]="Days",Dt[Dt.Months=2]="Months",Dt[Dt.Eras=3]="Eras",Dt))();function Nr(n,t,e,r){let i=function(n){if(Et(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,l=1,d=1]=n.split("-").map(f=>+f);return Zr(i,l-1,d)}const e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let r;if(r=n.match(cr))return function(n){const t=new Date(0);let e=0,r=0;const i=n[8]?t.setUTCFullYear:t.setFullYear,l=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));const d=Number(n[4]||0)-e,f=Number(n[5]||0)-r,m=Number(n[6]||0),b=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return l.call(t,d,f,m,b),t}(r)}const t=new Date(n);if(!Et(t))throw new Error(`Unable to convert "${n}" into a date`);return t}(n);t=gn(e,t)||t;let f,d=[];for(;t;){if(f=zi.exec(t),!f){d.push(t);break}{d=d.concat(f.slice(1));const x=d.pop();if(!x)break;t=x}}let m=i.getTimezoneOffset();r&&(m=X(r,m),i=function(n,t,e){const i=n.getTimezoneOffset();return function(n,t){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+t),n}(n,-1*(X(t,i)-i))}(i,r));let b="";return d.forEach(x=>{const I=function(n){if(ge[n])return ge[n];let t;switch(n){case"G":case"GG":case"GGG":t=qt(Dt.Eras,_e.Abbreviated);break;case"GGGG":t=qt(Dt.Eras,_e.Wide);break;case"GGGGG":t=qt(Dt.Eras,_e.Narrow);break;case"y":t=cn(it.FullYear,1,0,!1,!0);break;case"yy":t=cn(it.FullYear,2,0,!0,!0);break;case"yyy":t=cn(it.FullYear,3,0,!1,!0);break;case"yyyy":t=cn(it.FullYear,4,0,!1,!0);break;case"Y":t=ae(1);break;case"YY":t=ae(2,!0);break;case"YYY":t=ae(3);break;case"YYYY":t=ae(4);break;case"M":case"L":t=cn(it.Month,1,1);break;case"MM":case"LL":t=cn(it.Month,2,1);break;case"MMM":t=qt(Dt.Months,_e.Abbreviated);break;case"MMMM":t=qt(Dt.Months,_e.Wide);break;case"MMMMM":t=qt(Dt.Months,_e.Narrow);break;case"LLL":t=qt(Dt.Months,_e.Abbreviated,Ee.Standalone);break;case"LLLL":t=qt(Dt.Months,_e.Wide,Ee.Standalone);break;case"LLLLL":t=qt(Dt.Months,_e.Narrow,Ee.Standalone);break;case"w":t=he(1);break;case"ww":t=he(2);break;case"W":t=he(1,!0);break;case"d":t=cn(it.Date,1);break;case"dd":t=cn(it.Date,2);break;case"c":case"cc":t=cn(it.Day,1);break;case"ccc":t=qt(Dt.Days,_e.Abbreviated,Ee.Standalone);break;case"cccc":t=qt(Dt.Days,_e.Wide,Ee.Standalone);break;case"ccccc":t=qt(Dt.Days,_e.Narrow,Ee.Standalone);break;case"cccccc":t=qt(Dt.Days,_e.Short,Ee.Standalone);break;case"E":case"EE":case"EEE":t=qt(Dt.Days,_e.Abbreviated);break;case"EEEE":t=qt(Dt.Days,_e.Wide);break;case"EEEEE":t=qt(Dt.Days,_e.Narrow);break;case"EEEEEE":t=qt(Dt.Days,_e.Short);break;case"a":case"aa":case"aaa":t=qt(Dt.DayPeriods,_e.Abbreviated);break;case"aaaa":t=qt(Dt.DayPeriods,_e.Wide);break;case"aaaaa":t=qt(Dt.DayPeriods,_e.Narrow);break;case"b":case"bb":case"bbb":t=qt(Dt.DayPeriods,_e.Abbreviated,Ee.Standalone,!0);break;case"bbbb":t=qt(Dt.DayPeriods,_e.Wide,Ee.Standalone,!0);break;case"bbbbb":t=qt(Dt.DayPeriods,_e.Narrow,Ee.Standalone,!0);break;case"B":case"BB":case"BBB":t=qt(Dt.DayPeriods,_e.Abbreviated,Ee.Format,!0);break;case"BBBB":t=qt(Dt.DayPeriods,_e.Wide,Ee.Format,!0);break;case"BBBBB":t=qt(Dt.DayPeriods,_e.Narrow,Ee.Format,!0);break;case"h":t=cn(it.Hours,1,-12);break;case"hh":t=cn(it.Hours,2,-12);break;case"H":t=cn(it.Hours,1);break;case"HH":t=cn(it.Hours,2);break;case"m":t=cn(it.Minutes,1);break;case"mm":t=cn(it.Minutes,2);break;case"s":t=cn(it.Seconds,1);break;case"ss":t=cn(it.Seconds,2);break;case"S":t=cn(it.FractionalSeconds,1);break;case"SS":t=cn(it.FractionalSeconds,2);break;case"SSS":t=cn(it.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=qe(Cn.Short);break;case"ZZZZZ":t=qe(Cn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=qe(Cn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=qe(Cn.Long);break;default:return null}return ge[n]=t,t}(x);b+=I?I(i,e,m):"''"===x?"'":x.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),b}function Zr(n,t,e){const r=new Date(0);return r.setFullYear(n,t,e),r.setHours(0,0,0),r}function gn(n,t){const e=function(n){return(0,a.cg1)(n)[a.wAp.LocaleId]}(n);if(Dn[e]=Dn[e]||{},Dn[e][t])return Dn[e][t];let r="";switch(t){case"shortDate":r=Rt(n,xe.Short);break;case"mediumDate":r=Rt(n,xe.Medium);break;case"longDate":r=Rt(n,xe.Long);break;case"fullDate":r=Rt(n,xe.Full);break;case"shortTime":r=vt(n,xe.Short);break;case"mediumTime":r=vt(n,xe.Medium);break;case"longTime":r=vt(n,xe.Long);break;case"fullTime":r=vt(n,xe.Full);break;case"short":const i=gn(n,"shortTime"),l=gn(n,"shortDate");r=Nt(Ct(n,xe.Short),[i,l]);break;case"medium":const d=gn(n,"mediumTime"),f=gn(n,"mediumDate");r=Nt(Ct(n,xe.Medium),[d,f]);break;case"long":const m=gn(n,"longTime"),b=gn(n,"longDate");r=Nt(Ct(n,xe.Long),[m,b]);break;case"full":const x=gn(n,"fullTime"),I=gn(n,"fullDate");r=Nt(Ct(n,xe.Full),[x,I])}return r&&(Dn[e][t]=r),r}function Nt(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,r){return null!=t&&r in t?t[r]:e})),n}function pr(n,t,e="-",r,i){let l="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,l=e));let d=String(n);for(;d.length<t;)d="0"+d;return r&&(d=d.substr(d.length-t)),l+d}function cn(n,t,e=0,r=!1,i=!1){return function(l,d){let f=function(n,t){switch(n){case it.FullYear:return t.getFullYear();case it.Month:return t.getMonth();case it.Date:return t.getDate();case it.Hours:return t.getHours();case it.Minutes:return t.getMinutes();case it.Seconds:return t.getSeconds();case it.FractionalSeconds:return t.getMilliseconds();case it.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,l);if((e>0||f>-e)&&(f+=e),n===it.Hours)0===f&&-12===e&&(f=12);else if(n===it.FractionalSeconds)return function(n,t){return pr(n,3).substr(0,t)}(f,t);const m=Xt(d,Ie.MinusSign);return pr(f,t,m,r,i)}}function qt(n,t,e=Ee.Format,r=!1){return function(i,l){return function(n,t,e,r,i,l){switch(e){case Dt.Months:return function(n,t,e){const r=(0,a.cg1)(n),l=hn([r[a.wAp.MonthsFormat],r[a.wAp.MonthsStandalone]],t);return hn(l,e)}(t,i,r)[n.getMonth()];case Dt.Days:return function(n,t,e){const r=(0,a.cg1)(n),l=hn([r[a.wAp.DaysFormat],r[a.wAp.DaysStandalone]],t);return hn(l,e)}(t,i,r)[n.getDay()];case Dt.DayPeriods:const d=n.getHours(),f=n.getMinutes();if(l){const b=function(n){const t=(0,a.cg1)(n);return Ke(t),(t[a.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?pn(r):[pn(r[0]),pn(r[1])])}(t),x=function(n,t,e){const r=(0,a.cg1)(n);Ke(r);const l=hn([r[a.wAp.ExtraData][0],r[a.wAp.ExtraData][1]],t)||[];return hn(l,e)||[]}(t,i,r),I=b.findIndex(V=>{if(Array.isArray(V)){const[G,ne]=V,we=d>=G.hours&&f>=G.minutes,Ue=d<ne.hours||d===ne.hours&&f<ne.minutes;if(G.hours<ne.hours){if(we&&Ue)return!0}else if(we||Ue)return!0}else if(V.hours===d&&V.minutes===f)return!0;return!1});if(-1!==I)return x[I]}return function(n,t,e){const r=(0,a.cg1)(n),l=hn([r[a.wAp.DayPeriodsFormat],r[a.wAp.DayPeriodsStandalone]],t);return hn(l,e)}(t,i,r)[d<12?0:1];case Dt.Eras:return function(n,t){return hn((0,a.cg1)(n)[a.wAp.Eras],t)}(t,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(i,l,n,t,e,r)}}function qe(n){return function(t,e,r){const i=-1*r,l=Xt(e,Ie.MinusSign),d=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case Cn.Short:return(i>=0?"+":"")+pr(d,2,l)+pr(Math.abs(i%60),2,l);case Cn.ShortGMT:return"GMT"+(i>=0?"+":"")+pr(d,1,l);case Cn.Long:return"GMT"+(i>=0?"+":"")+pr(d,2,l)+":"+pr(Math.abs(i%60),2,l);case Cn.Extended:return 0===r?"Z":(i>=0?"+":"")+pr(d,2,l)+":"+pr(Math.abs(i%60),2,l);default:throw new Error(`Unknown zone width "${n}"`)}}}function en(n){return Zr(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function he(n,t=!1){return function(e,r){let i;if(t){const l=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,d=e.getDate();i=1+Math.floor((d+l)/7)}else{const l=en(e),d=function(n){const t=Zr(n,0,1).getDay();return Zr(n,0,1+(t<=4?4:11)-t)}(l.getFullYear()),f=l.getTime()-d.getTime();i=1+Math.round(f/6048e5)}return pr(i,n,Xt(r,Ie.MinusSign))}}function ae(n,t=!1){return function(e,r){return pr(en(e).getFullYear(),n,Xt(r,Ie.MinusSign),t)}}const ge={};function X(n,t){n=n.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function Et(n){return n instanceof Date&&!isNaN(n.valueOf())}class hs{}let pc=(()=>{class n extends hs{constructor(e){super(),this.locale=e}getPluralCategory(e,r){switch(Qn(r||this.locale)(e)){case ce.Zero:return"zero";case ce.One:return"one";case ce.Two:return"two";case ce.Few:return"few";case ce.Many:return"many";default:return"other"}}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a.soG))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function zr(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const r=e.indexOf("="),[i,l]=-1==r?[e,""]:[e.slice(0,r),e.slice(r+1)];if(i.trim()===t)return decodeURIComponent(l)}return null}let ho=(()=>{class n{constructor(e,r,i,l){this._iterableDiffers=e,this._keyValueDiffers=r,this._ngEl=i,this._renderer=l,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,a.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),e.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),e.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,a.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),e.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(r=>this._toggleClass(r,!0)):Object.keys(e).forEach(r=>this._toggleClass(r,!!e[r])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(r=>this._toggleClass(r,!1)):Object.keys(e).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(e,r){(e=e.trim())&&e.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.ZZ4),a.Y36(a.aQg),a.Y36(a.SBq),a.Y36(a.Qsj))},n.\u0275dir=a.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class ai{constructor(t,e,r,i){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let rn=(()=>{class n{constructor(e,r,i){this._viewContainer=e,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${e}' of type '${function(n){return n.name||typeof n}(e)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const r=[];e.forEachOperation((i,l,d)=>{if(null==i.previousIndex){const f=this._viewContainer.createEmbeddedView(this._template,new ai(null,this._ngForOf,-1,-1),null===d?void 0:d),m=new xu(i,f);r.push(m)}else if(null==d)this._viewContainer.remove(null===l?void 0:l);else if(null!==l){const f=this._viewContainer.get(l);this._viewContainer.move(f,d);const m=new xu(i,f);r.push(m)}});for(let i=0;i<r.length;i++)this._perViewChange(r[i].view,r[i].record);for(let i=0,l=this._viewContainer.length;i<l;i++){const d=this._viewContainer.get(i);d.context.index=i,d.context.count=l,d.context.ngForOf=this._ngForOf}e.forEachIdentityChange(i=>{this._viewContainer.get(i.currentIndex).context.$implicit=i.item})}_perViewChange(e,r){e.context.$implicit=r.item}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.s_b),a.Y36(a.Rgc),a.Y36(a.ZZ4))},n.\u0275dir=a.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class xu{constructor(t,e){this.record=t,this.view=e}}let Fr=(()=>{class n{constructor(e,r){this._viewContainer=e,this._context=new Du,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){fo("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){fo("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.s_b),a.Y36(a.Rgc))},n.\u0275dir=a.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Du{constructor(){this.$implicit=null,this.ngIf=null}}function fo(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,a.AaK)(t)}'.`)}let gc=(()=>{class n{constructor(e){this.locale=e}transform(e,r="mediumDate",i,l){if(null==e||""===e||e!=e)return null;try{return Nr(e,r,l||this.locale,i)}catch(d){throw function(n,t){return Error(`InvalidPipeArgument: '${t}' for pipe '${(0,a.AaK)(n)}'`)}(n,d.message)}}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.soG,16))},n.\u0275pipe=a.Yjl({name:"date",type:n,pure:!0}),n})(),ur=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[{provide:hs,useClass:pc}]}),n})();function wh(n){return"server"===n}let Nu=(()=>{class n{}return n.\u0275prov=(0,a.Yz7)({token:n,providedIn:"root",factory:()=>new Ch((0,a.LFG)(ee),window)}),n})();class Ch{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const l=i.shadowRoot;if(l){const d=l.getElementById(t)||l.querySelector(`[name="${t}"]`);if(d)return d}i=r.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),r=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(r-l[0],i-l[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Ia(this.window.history)||Ia(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function Ia(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Mu{}class Ru extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new Ru,R||(R=n)}onAndCancel(t,e,r){return t.addEventListener(e,r,!1),()=>{t.removeEventListener(e,r,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(As=As||document.querySelector("base"),As?As.getAttribute("href"):null);return null==e?null:function(n){Ln=Ln||document.createElement("a"),Ln.setAttribute("href",n);const t=Ln.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){As=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return zr(document.cookie,t)}}let Ln,As=null;const ku=new a.OlP("TRANSITION_ID"),Vn=[{provide:a.ip1,useFactory:function(n,t,e){return()=>{e.get(a.CZH).donePromise.then(()=>{const r=k(),i=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<i.length;l++)r.remove(i[l])})}},deps:[ku,ee,a.zs3],multi:!0}];class Pu{static init(){(0,a.VLi)(new Pu)}addToWindow(t){a.dqk.getAngularTestability=(r,i=!0)=>{const l=t.findTestabilityInTree(r,i);if(null==l)throw new Error("Could not find testability for element.");return l},a.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),a.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),a.dqk.frameworkStabilizers||(a.dqk.frameworkStabilizers=[]),a.dqk.frameworkStabilizers.push(r=>{const i=a.dqk.getAllAngularTestabilities();let l=i.length,d=!1;const f=function(m){d=d||m,l--,0==l&&r(d)};i.forEach(function(m){m.whenStable(f)})})}findTestabilityInTree(t,e,r){if(null==e)return null;const i=t.getTestability(e);return null!=i?i:r?k().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let Ns=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const _o=new a.OlP("EventManagerPlugins");let Ze=(()=>{class n{constructor(e,r){this._zone=r,this._eventNameToPlugin=new Map,e.forEach(i=>i.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,r,i){return this._findPluginFor(r).addEventListener(e,r,i)}addGlobalEventListener(e,r,i){return this._findPluginFor(r).addGlobalEventListener(e,r,i)}getZone(){return this._zone}_findPluginFor(e){const r=this._eventNameToPlugin.get(e);if(r)return r;const i=this._plugins;for(let l=0;l<i.length;l++){const d=i[l];if(d.supports(e))return this._eventNameToPlugin.set(e,d),d}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(_o),a.LFG(a.R0b))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class sn{constructor(t){this._doc=t}addGlobalEventListener(t,e,r){const i=k().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${e}`);return this.addEventListener(i,e,r)}}let Aa=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const r=new Set;e.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),er=(()=>{class n extends Aa{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,r,i){e.forEach(l=>{const d=this._doc.createElement("style");d.textContent=l,i.push(r.appendChild(d))})}addHost(e){const r=[];this._addStylesToHost(this._stylesSet,e,r),this._hostNodes.set(e,r)}removeHost(e){const r=this._hostNodes.get(e);r&&r.forEach(El),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(e,i,r)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(El))}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ee))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function El(n){k().remove(n)}const Gs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ci=/%COMP%/g;function _r(n,t,e){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?_r(n,i,e):(i=i.replace(ci,n),e.push(i))}return e}function ki(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let Pi=(()=>{class n{constructor(e,r,i){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Oi(e)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;switch(r.encapsulation){case a.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Np(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(e),i}case 1:case a.ifc.ShadowDom:return new Wo(this.eventManager,this.sharedStylesHost,e,r);default:if(!this.rendererByCompId.has(r.id)){const i=_r(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(Ze),a.LFG(er),a.LFG(a.AFp))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class Oi{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Gs[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,r){t&&t.insertBefore(e,r)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,i){if(i){e=i+":"+e;const l=Gs[i];l?t.setAttributeNS(l,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){const i=Gs[r];i?t.removeAttributeNS(i,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,i){i&(a.JOm.DashCase|a.JOm.Important)?t.style.setProperty(e,r,i&a.JOm.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&a.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t[e]=r}setValue(t,e){t.nodeValue=e}listen(t,e,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,ki(r)):this.eventManager.addEventListener(t,e,ki(r))}}class Np extends Oi{constructor(t,e,r,i){super(t),this.component=r;const l=_r(i+"-"+r.id,r.styles,[]);e.addStyles(l),this.contentAttr="_ngcontent-%COMP%".replace(ci,i+"-"+r.id),this.hostAttr="_nghost-%COMP%".replace(ci,i+"-"+r.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}}class Wo extends Oi{constructor(t,e,r,i){super(t),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=_r(i.id,i.styles,[]);for(let d=0;d<l.length;d++){const f=document.createElement("style");f.textContent=l[d],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Hu=(()=>{class n extends sn{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i){return e.addEventListener(r,i,!1),()=>this.removeEventListener(e,r,i)}removeEventListener(e,r,i){return e.removeEventListener(r,i)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ee))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const qo=["alt","control","meta","shift"],Mp={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Yr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Tc={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Zu=(()=>{class n extends sn{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,r,i){const l=n.parseEventName(r),d=n.eventCallback(l.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(e,l.domEventName,d))}static parseEventName(e){const r=e.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const l=n._normalizeKey(r.pop());let d="";if(qo.forEach(m=>{const b=r.indexOf(m);b>-1&&(r.splice(b,1),d+=m+".")}),d+=l,0!=r.length||0===l.length)return null;const f={};return f.domEventName=i,f.fullKey=d,f}static getEventFullKey(e){let r="",i=function(n){let t=n.key;if(null==t){if(t=n.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===n.location&&Yr.hasOwnProperty(t)&&(t=Yr[t]))}return Mp[t]||t}(e);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),qo.forEach(l=>{l!=i&&Tc[l](e)&&(r+=l+".")}),r+=i,r}static eventCallback(e,r,i){return l=>{n.getEventFullKey(l)===e&&i.runGuarded(()=>r(l))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ee))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const Oa=(0,a.eFA)(a._c5,"browser",[{provide:a.Lbi,useValue:"browser"},{provide:a.g9A,useValue:function(){Ru.makeCurrent(),Pu.init()},multi:!0},{provide:ee,useFactory:function(){return(0,a.RDi)(document),document},deps:[]}]),zu=[[],{provide:a.zSh,useValue:"root"},{provide:a.qLn,useFactory:function(){return new a.qLn},deps:[]},{provide:_o,useClass:Hu,multi:!0,deps:[ee,a.R0b,a.Lbi]},{provide:_o,useClass:Zu,multi:!0,deps:[ee]},[],{provide:Pi,useClass:Pi,deps:[Ze,er,a.AFp]},{provide:a.FYo,useExisting:Pi},{provide:Aa,useExisting:er},{provide:er,useClass:er,deps:[ee]},{provide:a.dDg,useClass:a.dDg,deps:[a.R0b]},{provide:Ze,useClass:Ze,deps:[_o,a.R0b]},{provide:Mu,useClass:Ns,deps:[]},[]];let Op=(()=>{class n{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:n,providers:[{provide:a.AFp,useValue:e.appId},{provide:ku,useExisting:a.AFp},Vn]}}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(n,12))},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:zu,imports:[ur,a.hGG]}),n})();"undefined"!=typeof window&&window;var un=O(4402),xt=O(5917),Tn=O(9765),Nl=O(7971);class Tr extends Tn.xQ{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Nl.N;return this._value}next(t){super.next(this._value=t)}}var zo=O(4869),Rs=O(9796),gr=O(7393);class Nh extends gr.L{notifyNext(t,e,r,i,l){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Bp extends gr.L{constructor(t,e,r){super(),this.parent=t,this.outerValue=e,this.outerIndex=r,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Co=O(7444),zn=O(7574);function dr(n,t,e,r,i=new Bp(n,e,r)){if(!i.closed)return t instanceof zn.y?t.subscribe(i):(0,Co.s)(t)(i)}var Mc=O(6693);const Yo={};class Va{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Ku(t,this.resultSelector))}}class Ku extends Nh{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Yo),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let r=0;r<e;r++)this.add(dr(this,t[r],void 0,r))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,r){const i=this.values,d=this.toRespond?i[r]===Yo?--this.toRespond:this.toRespond:0;i[r]=e,0===d&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(r){return void this.destination.error(r)}this.destination.next(e)}}const ks=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var ms=O(3282);function Zs(...n){return(0,ms.J)(1)((0,xt.of)(...n))}var ui=O(9193);function Fi(n){return new zn.y(t=>{let e;try{e=n()}catch(i){return void t.error(i)}return(e?(0,un.D)(e):(0,ui.c)()).subscribe(t)})}var Cv=O(2441),bt=O(8002),Xi=O(5345);function mr(n,t){return"function"==typeof t?e=>e.pipe(mr((r,i)=>(0,un.D)(n(r,i)).pipe((0,bt.U)((l,d)=>t(r,l,i,d))))):e=>e.lift(new Up(n))}class Up{constructor(t){this.project=t}call(t,e){return e.subscribe(new nr(t,this.project))}}class nr extends Xi.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const r=this.index++;try{e=this.project(t,r)}catch(i){return void this.destination.error(i)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const r=new Xi.IY(this),i=this.destination;i.add(r),this.innerSubscription=(0,Xi.ft)(t,r),this.innerSubscription!==r&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;(!t||t.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const Qu=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function _i(n){return t=>0===n?(0,ui.c)():t.lift(new Ev(n))}class Ev{constructor(t){if(this.total=t,this.total<0)throw new Qu}call(t,e){return e.subscribe(new Hp(t,this.total))}}class Hp extends gr.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,r=++this.count;r<=e&&(this.destination.next(t),r===e&&(this.destination.complete(),this.unsubscribe()))}}function Ko(...n){const t=n[n.length-1];return(0,zo.K)(t)?(n.pop(),e=>Zs(n,e,t)):e=>Zs(n,e)}function Ba(n,t){let e=!1;return arguments.length>=2&&(e=!0),function(i){return i.lift(new e0(n,t,e))}}class e0{constructor(t,e,r=!1){this.accumulator=t,this.seed=e,this.hasSeed=r}call(t,e){return e.subscribe(new kc(t,this.accumulator,this.seed,this.hasSeed))}}class kc extends gr.L{constructor(t,e,r,i){super(t),this.accumulator=e,this._seed=r,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let r;try{r=this.accumulator(this.seed,t,e)}catch(i){this.destination.error(i)}this.seed=r,this.destination.next(r)}}function ar(n,t){return function(r){return r.lift(new Ju(n,t))}}class Ju{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Do(t,this.predicate,this.thisArg))}}class Do extends gr.L{constructor(t,e,r){super(t),this.predicate=e,this.thisArg=r,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(r){return void this.destination.error(r)}e&&this.destination.next(t)}}function To(n){return function(e){const r=new yr(n),i=e.lift(r);return r.caught=i}}class yr{constructor(t){this.selector=t}call(t,e){return e.subscribe(new zs(t,this.selector,this.caught))}}class zs extends Xi.Ds{constructor(t,e,r){super(t),this.selector=e,this.caught=r}error(t){if(!this.isStopped){let e;try{e=this.selector(t,this.caught)}catch(l){return void super.error(l)}this._unsubscribeAndRecycle();const r=new Xi.IY(this);this.add(r);const i=(0,Xi.ft)(e,r);i!==r&&this.add(i)}}}var Br=O(9773);function Pc(n,t){return(0,Br.zg)(n,t,1)}function Rh(n){return function(e){return 0===n?(0,ui.c)():e.lift(new yi(n))}}class yi{constructor(t){if(this.total=t,this.total<0)throw new Qu}call(t,e){return e.subscribe(new Ps(t,this.total))}}class Ps extends gr.L{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,r=this.total,i=this.count++;e.length<r?e.push(t):e[i%r]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const r=this.count>=this.total?this.total:this.count,i=this.ring;for(let l=0;l<r;l++){const d=e++%r;t.next(i[d])}}t.complete()}}function Os(n=kh){return t=>t.lift(new Io(n))}class Io{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new So(t,this.errorFactory))}}class So extends gr.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function kh(){return new ks}function Ys(n=null){return t=>t.lift(new $p(n))}class $p{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Ua(t,this.defaultValue))}}class Ua extends gr.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var jp=O(4487);function Ir(n,t){const e=arguments.length>=2;return r=>r.pipe(n?ar((i,l)=>n(i,l,r)):jp.y,_i(1),e?Ys(t):Os(()=>new ks))}var vr=O(8307),Ha=O(1307),ed=O(5319);class S{constructor(t){this.callback=t}call(t,e){return e.subscribe(new W(t,this.callback))}}class W extends gr.L{constructor(t,e){super(t),this.add(new ed.w(e))}}class oe{constructor(t,e){this.id=t,this.url=e}}class De extends oe{constructor(t,e,r="imperative",i=null){super(t,e),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Me extends oe{constructor(t,e,r){super(t,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Qe extends oe{constructor(t,e,r){super(t,e),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class dt extends oe{constructor(t,e,r){super(t,e),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ot extends oe{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ut extends oe{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fn extends oe{constructor(t,e,r,i,l){super(t,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=l}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ht extends oe{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mr extends oe{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rr{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ml{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class td{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ks{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $a{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fs{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qo{constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Gt="primary";class Gp{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function hr(n){return new Gp(n)}const Oc="ngNavigationCancelingError";function t0(n){const t=Error("NavigationCancelingError: "+n);return t[Oc]=!0,t}function kl(n,t,e){const r=e.path.split("/");if(r.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||r.length<n.length))return null;const i={};for(let l=0;l<r.length;l++){const d=r[l],f=n[l];if(d.startsWith(":"))i[d.substring(1)]=f;else if(d!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function _s(n,t){const e=n?Object.keys(n):void 0,r=t?Object.keys(t):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let l=0;l<e.length;l++)if(i=e[l],!qp(n[i],t[i]))return!1;return!0}function qp(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),r=[...t].sort();return e.every((i,l)=>r[l]===i)}return n===t}function n0(n){return Array.prototype.concat.apply([],n)}function ja(n){return n.length>0?n[n.length-1]:null}function Ur(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function Kr(n){return(0,a.CqO)(n)?n:(0,a.QGY)(n)?(0,un.D)(Promise.resolve(n)):(0,xt.of)(n)}const r0={exact:function Ph(n,t,e){if(!qa(n.segments,t.segments)||!Lc(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!n.children[r]||!Ph(n.children[r],t.children[r],e))return!1;return!0},subset:Jo},Fc={exact:function(n,t){return _s(n,t)},subset:function(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>qp(n[e],t[e]))},ignored:()=>!0};function nd(n,t,e){return r0[e.paths](n.root,t.root,e.matrixParams)&&Fc[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function Jo(n,t,e){return Wa(n,t,t.segments,e)}function Wa(n,t,e,r){if(n.segments.length>e.length){const i=n.segments.slice(0,e.length);return!(!qa(i,e)||t.hasChildren()||!Lc(i,e,r))}if(n.segments.length===e.length){if(!qa(n.segments,e)||!Lc(n.segments,e,r))return!1;for(const i in t.children)if(!n.children[i]||!Jo(n.children[i],t.children[i],r))return!1;return!0}{const i=e.slice(0,n.segments.length),l=e.slice(n.segments.length);return!!(qa(n.segments,i)&&Lc(n.segments,i,r)&&n.children[Gt])&&Wa(n.children[Gt],t,l,r)}}function Lc(n,t,e){return t.every((r,i)=>Fc[e](n[i].parameters,r.parameters))}class Pl{constructor(t,e,r){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=hr(this.queryParams)),this._queryParamMap}toString(){return id.serialize(this)}}class dn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Ur(e,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Xo(this)}}class rd{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=hr(this.parameters)),this._parameterMap}toString(){return Uc(this)}}function qa(n,t){return n.length===t.length&&n.every((e,r)=>e.path===t[r].path)}class Zp{}class Vc{parse(t){const e=new Lh(t);return new Pl(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var n;return`${`/${sd(t.root,!0)}`}${function(n){const t=Object.keys(n).map(e=>{const r=n[e];return Array.isArray(r)?r.map(i=>`${od(e)}=${od(i)}`).join("&"):`${od(e)}=${od(r)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${n=t.fragment,encodeURI(n)}`:""}`}}const id=new Vc;function Xo(n){return n.segments.map(t=>Uc(t)).join("/")}function sd(n,t){if(!n.hasChildren())return Xo(n);if(t){const e=n.children[Gt]?sd(n.children[Gt],!1):"",r=[];return Ur(n.children,(i,l)=>{l!==Gt&&r.push(`${l}:${sd(i,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}{const e=function(n,t){let e=[];return Ur(n.children,(r,i)=>{i===Gt&&(e=e.concat(t(r,i)))}),Ur(n.children,(r,i)=>{i!==Gt&&(e=e.concat(t(r,i)))}),e}(n,(r,i)=>i===Gt?[sd(n.children[Gt],!1)]:[`${i}:${sd(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Gt]?`${Xo(n)}/${e[0]}`:`${Xo(n)}/(${e.join("//")})`}}function a0(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function od(n){return a0(n).replace(/%3B/gi,";")}function ad(n){return a0(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bc(n){return decodeURIComponent(n)}function zp(n){return Bc(n.replace(/\+/g,"%20"))}function Uc(n){return`${ad(n.path)}${function(n){return Object.keys(n).map(t=>`;${ad(t)}=${ad(n[t])}`).join("")}(n.parameters)}`}const Sv=/^[^\/()?;=#]+/;function Fh(n){const t=n.match(Sv);return t?t[0]:""}const Av=/^[^=?&#]+/,ea=/^[^?&#]+/;class Lh{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new dn([],{}):new dn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[Gt]=new dn(t,e)),r}parseSegment(){const t=Fh(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new rd(Bc(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Fh(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const i=Fh(this.remaining);i&&(r=i,this.capture(r))}t[Bc(e)]=Bc(r)}parseQueryParam(t){const e=function(n){const t=n.match(Av);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const d=function(n){const t=n.match(ea);return t?t[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const i=zp(e),l=zp(r);if(t.hasOwnProperty(i)){let d=t[i];Array.isArray(d)||(d=[d],t[i]=d),d.push(l)}else t[i]=l}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Fh(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let l;r.indexOf(":")>-1?(l=r.substr(0,r.indexOf(":")),this.capture(l),this.capture(":")):t&&(l=Gt);const d=this.parseChildren();e[l]=1===Object.keys(d).length?d[Gt]:new dn([],d),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class l0{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Yp(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){const e=Yp(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Kp(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return Kp(t,this._root).map(e=>e.value)}}function Yp(n,t){if(n===t.value)return t;for(const e of t.children){const r=Yp(n,e);if(r)return r}return null}function Kp(n,t){if(n===t.value)return[t];for(const e of t.children){const r=Kp(n,e);if(r.length)return r.unshift(t),r}return[]}class ta{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function ld(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class Vh extends l0{constructor(t,e){super(t),this.snapshot=e,Uh(this,t)}toString(){return this.snapshot.toString()}}function c0(n,t){const e=function(n,t){const d=new Bh([],{},{},"",{},Gt,t,null,n.root,-1,{});return new Za("",new ta(d,[]))}(n,t),r=new Tr([new rd("",{})]),i=new Tr({}),l=new Tr({}),d=new Tr({}),f=new Tr(""),m=new $c(r,i,d,f,l,Gt,t,e.root);return m.snapshot=e.root,new Vh(new ta(m,[]),e)}class $c{constructor(t,e,r,i,l,d,f,m){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=l,this.outlet=d,this.component=f,this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,bt.U)(t=>hr(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,bt.U)(t=>hr(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function u0(n,t="emptyOnly"){const e=n.pathFromRoot;let r=0;if("always"!==t)for(r=e.length-1;r>=1;){const i=e[r],l=e[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(l.component)break;r--}}return function(n){return n.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(r))}class Bh{constructor(t,e,r,i,l,d,f,m,b,x,I){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=l,this.outlet=d,this.component=f,this.routeConfig=m,this._urlSegment=b,this._lastPathIndex=x,this._resolve=I}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=hr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=hr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Za extends l0{constructor(t,e){super(e),this.url=t,Uh(this,e)}toString(){return Ls(this._root)}}function Uh(n,t){t.value._routerState=n,t.children.forEach(e=>Uh(n,e))}function Ls(n){const t=n.children.length>0?` { ${n.children.map(Ls).join(", ")} } `:"";return`${n.value}${t}`}function Fl(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,_s(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),_s(t.params,e.params)||n.params.next(e.params),function(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!_s(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),_s(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function jc(n,t){return _s(n.params,t.params)&&function(n,t){return qa(n,t)&&n.every((e,r)=>_s(e.parameters,t[r].parameters))}(n.url,t.url)&&!(!n.parent!=!t.parent)&&(!n.parent||jc(n.parent,t.parent))}function Gc(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const r=e.value;r._futureSnapshot=t.value;const i=function(n,t,e){return t.children.map(r=>{for(const i of e.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Gc(n,r,i);return Gc(n,r)})}(n,t,e);return new ta(r,i)}{if(n.shouldAttach(t.value)){const l=n.retrieve(t.value);if(null!==l){const d=l.route;return f0(t,d),d}}const r=function(n){return new $c(new Tr(n.url),new Tr(n.params),new Tr(n.queryParams),new Tr(n.fragment),new Tr(n.data),n.outlet,n.component,n)}(t.value),i=t.children.map(l=>Gc(n,l));return new ta(r,i)}}function f0(n,t){if(n.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=n.value;for(let e=0;e<n.children.length;++e)f0(n.children[e],t.children[e])}function cd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function w(n){return"object"==typeof n&&null!=n&&n.outlets}function g(n,t,e,r,i){let l={};return r&&Ur(r,(d,f)=>{l[f]=Array.isArray(d)?d.map(m=>`${m}`):`${d}`}),new Pl(e.root===n?t:y(e.root,n,t),l,i)}function y(n,t,e){const r={};return Ur(n.children,(i,l)=>{r[l]=i===t?e:y(i,t,e)}),new dn(n.segments,r)}class E{constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&cd(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(w);if(i&&i!==ja(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class j{constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}}function nt(n,t,e){if(n||(n=new dn([],{})),0===n.segments.length&&n.hasChildren())return Tt(n,t,e);const r=function(n,t,e){let r=0,i=t;const l={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=e.length)return l;const d=n.segments[i],f=e[r];if(w(f))break;const m=`${f}`,b=r<e.length-1?e[r+1]:null;if(i>0&&void 0===m)break;if(m&&b&&"object"==typeof b&&void 0===b.outlets){if(!ud(m,b,d))return l;r+=2}else{if(!ud(m,{},d))return l;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,t,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const l=new dn(n.segments.slice(0,r.pathIndex),{});return l.children[Gt]=new dn(n.segments.slice(r.pathIndex),n.children),Tt(l,0,i)}return r.match&&0===i.length?new dn(n.segments,{}):r.match&&!n.hasChildren()?Zn(n,t,e):r.match?Tt(n,0,i):Zn(n,t,e)}function Tt(n,t,e){if(0===e.length)return new dn(n.segments,{});{const r=function(n){return w(n[0])?n[0].outlets:{[Gt]:n}}(e),i={};return Ur(r,(l,d)=>{"string"==typeof l&&(l=[l]),null!==l&&(i[d]=nt(n.children[d],t,l))}),Ur(n.children,(l,d)=>{void 0===r[d]&&(i[d]=l)}),new dn(n.segments,i)}}function Zn(n,t,e){const r=n.segments.slice(0,t);let i=0;for(;i<e.length;){const l=e[i];if(w(l)){const m=wn(l.outlets);return new dn(r,m)}if(0===i&&cd(e[0])){r.push(new rd(n.segments[t].path,na(e[0]))),i++;continue}const d=w(l)?l.outlets[Gt]:`${l}`,f=i<e.length-1?e[i+1]:null;d&&f&&cd(f)?(r.push(new rd(d,na(f))),i+=2):(r.push(new rd(d,{})),i++)}return new dn(r,{})}function wn(n){const t={};return Ur(n,(e,r)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[r]=Zn(new dn([],{}),0,e))}),t}function na(n){const t={};return Ur(n,(e,r)=>t[r]=`${e}`),t}function ud(n,t,e){return n==e.path&&_s(t,e.parameters)}class Jp{constructor(t,e,r,i){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=i}activate(t){const e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),Fl(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){const i=ld(e);t.children.forEach(l=>{const d=l.value.outlet;this.deactivateRoutes(l,i[d],r),delete i[d]}),Ur(i,(l,d)=>{this.deactivateRouteAndItsChildren(l,r)})}deactivateRoutes(t,e,r){const i=t.value,l=e?e.value:null;if(i===l)if(i.component){const d=r.getContext(i.outlet);d&&this.deactivateChildRoutes(t,e,d.children)}else this.deactivateChildRoutes(t,e,r);else l&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const r=e.getContext(t.value.outlet);if(r&&r.outlet){const i=r.outlet.detach(),l=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:i,route:t,contexts:l})}}deactivateRouteAndOutlet(t,e){const r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,l=ld(t);for(const d of Object.keys(l))this.deactivateRouteAndItsChildren(l[d],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,e,r){const i=ld(e);t.children.forEach(l=>{this.activateRoutes(l,i[l.value.outlet],r),this.forwardEvent(new Fs(l.value.snapshot))}),t.children.length&&this.forwardEvent(new Ks(t.value.snapshot))}activateRoutes(t,e,r){const i=t.value,l=e?e.value:null;if(Fl(i),i===l)if(i.component){const d=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,d.children)}else this.activateChildRoutes(t,e,r);else if(i.component){const d=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),d.children.onOutletReAttached(f.contexts),d.attachRef=f.componentRef,d.route=f.route.value,d.outlet&&d.outlet.attach(f.componentRef,f.route.value),Xp(f.route)}else{const f=function(n){for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(i.snapshot),m=f?f.module.componentFactoryResolver:null;d.attachRef=null,d.route=i,d.resolver=m,d.outlet&&d.outlet.activateWith(i,m),this.activateChildRoutes(t,null,d.children)}}else this.activateChildRoutes(t,null,r)}}function Xp(n){Fl(n.value),n.children.forEach(Xp)}class Hh{constructor(t,e){this.routes=t,this.module=e}}function ra(n){return"function"==typeof n}function Ll(n){return n instanceof Pl}const $h=Symbol("INITIAL_VALUE");function jh(){return mr(n=>function(...n){let t,e;return(0,zo.K)(n[n.length-1])&&(e=n.pop()),"function"==typeof n[n.length-1]&&(t=n.pop()),1===n.length&&(0,Rs.k)(n[0])&&(n=n[0]),(0,Mc.n)(n,e).lift(new Va(t))}(n.map(t=>t.pipe(_i(1),Ko($h)))).pipe(Ba((t,e)=>{let r=!1;return e.reduce((i,l,d)=>i!==$h?i:(l===$h&&(r=!0),r||!1!==l&&d!==e.length-1&&!Ll(l)?i:l),t)},$h),ar(t=>t!==$h),(0,bt.U)(t=>Ll(t)?t:!0===t),_i(1)))}let Vi=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,r){1&e&&a._UZ(0,"router-outlet")},directives:function(){return[og]},encapsulation:2}),n})();function Gh(n,t=""){for(let e=0;e<n.length;e++){const r=n[e];kv(r,GS(t,r))}}function kv(n,t){n.children&&Gh(n.children,t)}function GS(n,t){return t?n||t.path?n&&!t.path?`${n}/`:!n&&t.path?t.path:`${n}/${t.path}`:"":n}function Pv(n){const t=n.children&&n.children.map(Pv),e=t?Object.assign(Object.assign({},n),{children:t}):Object.assign({},n);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Gt&&(e.component=Vi),e}function Qs(n){return n.outlet||Gt}function cE(n,t){const e=n.filter(r=>Qs(r)===t);return e.push(...n.filter(r=>Qs(r)!==t)),e}const Ov={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function p0(n,t,e){var r;if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?Object.assign({},Ov):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const l=(t.matcher||kl)(e,n,t);if(!l)return Object.assign({},Ov);const d={};Ur(l.posParams,(m,b)=>{d[b]=m.path});const f=l.consumed.length>0?Object.assign(Object.assign({},d),l.consumed[l.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:l.consumed,lastChild:l.consumed.length,parameters:f,positionalParamSegments:null!==(r=l.posParams)&&void 0!==r?r:{}}}function ng(n,t,e,r,i="corrected"){if(e.length>0&&function(n,t,e){return e.some(r=>Wh(n,t,r)&&Qs(r)!==Gt)}(n,e,r)){const d=new dn(t,function(n,t,e,r){const i={};i[Gt]=r,r._sourceSegment=n,r._segmentIndexShift=t.length;for(const l of e)if(""===l.path&&Qs(l)!==Gt){const d=new dn([],{});d._sourceSegment=n,d._segmentIndexShift=t.length,i[Qs(l)]=d}return i}(n,t,r,new dn(e,n.children)));return d._sourceSegment=n,d._segmentIndexShift=t.length,{segmentGroup:d,slicedSegments:[]}}if(0===e.length&&function(n,t,e){return e.some(r=>Wh(n,t,r))}(n,e,r)){const d=new dn(n.segments,function(n,t,e,r,i,l){const d={};for(const f of r)if(Wh(n,e,f)&&!i[Qs(f)]){const m=new dn([],{});m._sourceSegment=n,m._segmentIndexShift="legacy"===l?n.segments.length:t.length,d[Qs(f)]=m}return Object.assign(Object.assign({},i),d)}(n,t,e,r,n.children,i));return d._sourceSegment=n,d._segmentIndexShift=t.length,{segmentGroup:d,slicedSegments:e}}const l=new dn(n.segments,n.children);return l._sourceSegment=n,l._segmentIndexShift=t.length,{segmentGroup:l,slicedSegments:e}}function Wh(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function Fv(n,t,e,r){return!!(Qs(n)===r||r!==Gt&&Wh(t,e,n))&&("**"===n.path||p0(t,n,e).matched)}function dE(n,t,e){return 0===t.length&&!n.children[e]}class g0{constructor(t){this.segmentGroup=t||null}}class Lv{constructor(t){this.urlTree=t}}function hd(n){return new zn.y(t=>t.error(new g0(n)))}function hE(n){return new zn.y(t=>t.error(new Lv(n)))}function zS(n){return new zn.y(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class KS{constructor(t,e,r,i,l){this.configLoader=e,this.urlSerializer=r,this.urlTree=i,this.config=l,this.allowRedirects=!0,this.ngModule=t.get(a.h0i)}apply(){const t=ng(this.urlTree.root,[],[],this.config).segmentGroup,e=new dn(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Gt).pipe((0,bt.U)(l=>this.createUrlTree(Vv(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(To(l=>{if(l instanceof Lv)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof g0?this.noMatchError(l):l}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Gt).pipe((0,bt.U)(i=>this.createUrlTree(Vv(i),t.queryParams,t.fragment))).pipe(To(i=>{throw i instanceof g0?this.noMatchError(i):i}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,r){const i=t.segments.length>0?new dn([],{[Gt]:t}):t;return new Pl(i,e,r)}expandSegmentGroup(t,e,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,e,r).pipe((0,bt.U)(l=>new dn([],l))):this.expandSegment(t,r,e,r.segments,i,!0)}expandChildren(t,e,r){const i=[];for(const l of Object.keys(r.children))"primary"===l?i.unshift(l):i.push(l);return(0,un.D)(i).pipe(Pc(l=>{const d=r.children[l],f=cE(e,l);return this.expandSegmentGroup(t,f,d,l).pipe((0,bt.U)(m=>({segment:m,outlet:l})))}),Ba((l,d)=>(l[d.outlet]=d.segment,l),{}),function(n,t){const e=arguments.length>=2;return r=>r.pipe(n?ar((i,l)=>n(i,l,r)):jp.y,Rh(1),e?Ys(t):Os(()=>new ks))}())}expandSegment(t,e,r,i,l,d){return(0,un.D)(r).pipe(Pc(f=>this.expandSegmentAgainstRoute(t,e,r,f,i,l,d).pipe(To(b=>{if(b instanceof g0)return(0,xt.of)(null);throw b}))),Ir(f=>!!f),To((f,m)=>{if(f instanceof ks||"EmptyError"===f.name){if(dE(e,i,l))return(0,xt.of)(new dn([],{}));throw new g0(e)}throw f}))}expandSegmentAgainstRoute(t,e,r,i,l,d,f){return Fv(i,e,l,d)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,e,i,l,d):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,r,i,l,d):hd(e):hd(e)}expandSegmentAgainstRouteUsingRedirect(t,e,r,i,l,d){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,i,d):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,i,l,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,r,i){const l=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?hE(l):this.lineralizeSegments(r,l).pipe((0,Br.zg)(d=>{const f=new dn(d,{});return this.expandSegment(t,f,e,d,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,i,l,d){const{matched:f,consumedSegments:m,lastChild:b,positionalParamSegments:x}=p0(e,i,l);if(!f)return hd(e);const I=this.applyRedirectCommands(m,i.redirectTo,x);return i.redirectTo.startsWith("/")?hE(I):this.lineralizeSegments(i,I).pipe((0,Br.zg)(V=>this.expandSegment(t,e,r,V.concat(l.slice(b)),d,!1)))}matchSegmentAgainstRoute(t,e,r,i,l){if("**"===r.path)return r.loadChildren?(r._loadedConfig?(0,xt.of)(r._loadedConfig):this.configLoader.load(t.injector,r)).pipe((0,bt.U)(V=>(r._loadedConfig=V,new dn(i,{})))):(0,xt.of)(new dn(i,{}));const{matched:d,consumedSegments:f,lastChild:m}=p0(e,r,i);if(!d)return hd(e);const b=i.slice(m);return this.getChildConfig(t,r,i).pipe((0,Br.zg)(I=>{const V=I.module,G=I.routes,{segmentGroup:ne,slicedSegments:we}=ng(e,f,b,G),Ue=new dn(ne.segments,ne.children);if(0===we.length&&Ue.hasChildren())return this.expandChildren(V,G,Ue).pipe((0,bt.U)(yt=>new dn(f,yt)));if(0===G.length&&0===we.length)return(0,xt.of)(new dn(f,{}));const tt=Qs(r)===l;return this.expandSegment(V,Ue,G,we,tt?Gt:l,!0).pipe((0,bt.U)(gt=>new dn(f.concat(gt.segments),gt.children)))}))}getChildConfig(t,e,r){return e.children?(0,xt.of)(new Hh(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?(0,xt.of)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,r).pipe((0,Br.zg)(i=>{return i?this.configLoader.load(t.injector,e).pipe((0,bt.U)(l=>(e._loadedConfig=l,l))):(n=e,new zn.y(t=>t.error(t0(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):(0,xt.of)(new Hh([],t))}runCanLoadGuards(t,e,r){const i=e.canLoad;if(!i||0===i.length)return(0,xt.of)(!0);const l=i.map(d=>{const f=t.get(d);let m;if((n=f)&&ra(n.canLoad))m=f.canLoad(e,r);else{if(!ra(f))throw new Error("Invalid CanLoad guard");m=f(e,r)}var n;return Kr(m)});return(0,xt.of)(l).pipe(jh(),(0,vr.b)(d=>{if(!Ll(d))return;const f=t0(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw f.url=d,f}),(0,bt.U)(d=>!0===d))}lineralizeSegments(t,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,xt.of)(r);if(i.numberOfChildren>1||!i.children[Gt])return zS(t.redirectTo);i=i.children[Gt]}}applyRedirectCommands(t,e,r){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,r)}applyRedirectCreatreUrlTree(t,e,r,i){const l=this.createSegmentGroup(t,e.root,r,i);return new Pl(l,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const r={};return Ur(t,(i,l)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[l]=e[f]}else r[l]=i}),r}createSegmentGroup(t,e,r,i){const l=this.createSegments(t,e.segments,r,i);let d={};return Ur(e.children,(f,m)=>{d[m]=this.createSegmentGroup(t,f,r,i)}),new dn(l,d)}createSegments(t,e,r,i){return e.map(l=>l.path.startsWith(":")?this.findPosParam(t,l,i):this.findOrReturn(l,r))}findPosParam(t,e,r){const i=r[e.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return i}findOrReturn(t,e){let r=0;for(const i of e){if(i.path===t.path)return e.splice(r),i;r++}return t}}function Vv(n){const t={};for(const r of Object.keys(n.children)){const l=Vv(n.children[r]);(l.segments.length>0||l.hasChildren())&&(t[r]=l)}return function(n){if(1===n.numberOfChildren&&n.children[Gt]){const t=n.children[Gt];return new dn(n.segments.concat(t.segments),t.children)}return n}(new dn(n.segments,t))}class rg{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class ys{constructor(t,e){this.component=t,this.route=e}}function fE(n,t,e){const r=n._root;return _0(r,t?t._root:null,e,[r.value])}function m0(n,t,e){const r=function(n){if(!n)return null;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:e).get(n)}function _0(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const l=ld(t);return n.children.forEach(d=>{(function(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const l=n.value,d=t?t.value:null,f=e?e.getContext(n.value.outlet):null;if(d&&l.routeConfig===d.routeConfig){const m=function(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!qa(n.url,t.url);case"pathParamsOrQueryParamsChange":return!qa(n.url,t.url)||!_s(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!jc(n,t)||!_s(n.queryParams,t.queryParams);case"paramsChange":default:return!jc(n,t)}}(d,l,l.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new rg(r)):(l.data=d.data,l._resolvedData=d._resolvedData),_0(n,t,l.component?f?f.children:null:e,r,i),m&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new ys(f.outlet.component,d))}else d&&ig(t,f,i),i.canActivateChecks.push(new rg(r)),_0(n,null,l.component?f?f.children:null:e,r,i)})(d,l[d.value.outlet],e,r.concat([d.value]),i),delete l[d.value.outlet]}),Ur(l,(d,f)=>ig(d,e.getContext(f),i)),i}function ig(n,t,e){const r=ld(n),i=n.value;Ur(r,(l,d)=>{ig(l,i.component?t?t.children.getContext(d):null:t,e)}),e.canDeactivateChecks.push(new ys(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}class Bv{}function y0(n){return new zn.y(t=>t.error(n))}class _E{constructor(t,e,r,i,l,d){this.rootComponentType=t,this.config=e,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=d}recognize(){const t=ng(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Gt);if(null===e)return null;const r=new Bh([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Gt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ta(r,e),l=new Za(this.url,i);return this.inheritParamsAndData(l._root),l}inheritParamsAndData(t){const e=t.value,r=u0(e,this.paramsInheritanceStrategy);e.params=Object.freeze(r.params),e.data=Object.freeze(r.data),t.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(t,e,r){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,r)}processChildren(t,e){const r=[];for(const l of Object.keys(e.children)){const d=e.children[l],f=cE(t,l),m=this.processSegmentGroup(f,d,l);if(null===m)return null;r.push(...m)}const i=v0(r);return i.sort((t,e)=>t.value.outlet===Gt?-1:e.value.outlet===Gt?1:t.value.outlet.localeCompare(e.value.outlet)),i}processSegment(t,e,r,i){for(const l of t){const d=this.processSegmentAgainstRoute(l,e,r,i);if(null!==d)return d}return dE(e,r,i)?[]:null}processSegmentAgainstRoute(t,e,r,i){if(t.redirectTo||!Fv(t,e,r,i))return null;let l,d=[],f=[];if("**"===t.path){const G=r.length>0?ja(r).parameters:{};l=new Bh(r,G,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,fd(t),Qs(t),t.component,t,Uv(e),rA(e)+r.length,b0(t))}else{const G=p0(e,t,r);if(!G.matched)return null;d=G.consumedSegments,f=r.slice(G.lastChild),l=new Bh(d,G.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,fd(t),Qs(t),t.component,t,Uv(e),rA(e)+d.length,b0(t))}const m=(n=t).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:b,slicedSegments:x}=ng(e,d,f,m.filter(G=>void 0===G.redirectTo),this.relativeLinkResolution);var n;if(0===x.length&&b.hasChildren()){const G=this.processChildren(m,b);return null===G?null:[new ta(l,G)]}if(0===m.length&&0===x.length)return[new ta(l,[])];const I=Qs(t)===i,V=this.processSegment(m,b,x,I?Gt:i);return null===V?null:[new ta(l,V)]}}function vE(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function v0(n){const t=[],e=new Set;for(const r of n){if(!vE(r)){t.push(r);continue}const i=t.find(l=>r.value.routeConfig===l.value.routeConfig);void 0!==i?(i.children.push(...r.children),e.add(i)):t.push(r)}for(const r of e){const i=v0(r.children);t.push(new ta(r.value,i))}return t.filter(r=>!e.has(r))}function Uv(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function rA(n){let t=n,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function fd(n){return n.data||{}}function b0(n){return n.resolve||{}}function $v(n){return mr(t=>{const e=n(t);return e?(0,un.D)(e).pipe((0,bt.U)(()=>t)):(0,xt.of)(t)})}class cA extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const w0=new a.OlP("ROUTES");class C0{constructor(t,e,r,i){this.loader=t,this.compiler=e,this.onLoadStartListener=r,this.onLoadEndListener=i}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const i=this.loadModuleFactory(e.loadChildren).pipe((0,bt.U)(l=>{this.onLoadEndListener&&this.onLoadEndListener(e);const d=l.create(t);return new Hh(n0(d.injector.get(w0,void 0,a.XFs.Self|a.XFs.Optional)).map(Pv),d)}),To(l=>{throw e._loader$=void 0,l}));return e._loader$=new Cv.c(i,()=>new Tn.xQ).pipe((0,Ha.x)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?(0,un.D)(this.loader.load(t)):Kr(t()).pipe((0,Br.zg)(e=>e instanceof a.YKP?(0,xt.of)(e):(0,un.D)(this.compiler.compileModuleAsync(e))))}}class CE{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Wc,this.attachRef=null}}class Wc{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const r=this.getOrCreateContext(t);r.outlet=e,this.contexts.set(t,r)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new CE,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class dA{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function EE(n){throw n}function xE(n,t,e){return t.parse("/")}function qc(n,t){return(0,xt.of)(null)}const DE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},TE={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let vs=(()=>{class n{constructor(e,r,i,l,d,f,m,b){this.rootComponentType=e,this.urlSerializer=r,this.rootContexts=i,this.location=l,this.config=b,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Tn.xQ,this.errorHandler=EE,this.malformedUriErrorHandler=xE,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:qc,afterPreactivation:qc},this.urlHandlingStrategy=new dA,this.routeReuseStrategy=new cA,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(a.h0i),this.console=d.get(a.c2e);const V=d.get(a.R0b);this.isNgZoneEnabled=V instanceof a.R0b&&a.R0b.isInAngularZone(),this.resetConfig(b),this.currentUrlTree=new Pl(new dn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new C0(f,m,G=>this.triggerEvent(new Rr(G)),G=>this.triggerEvent(new Ml(G))),this.routerState=c0(this.currentUrlTree,this.rootComponentType),this.transitions=new Tr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const r=this.events;return e.pipe(ar(i=>0!==i.id),(0,bt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),mr(i=>{let l=!1,d=!1;return(0,xt.of)(i).pipe((0,vr.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.currentRawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),mr(f=>{const m=this.browserUrlTree.toString(),b=!this.navigated||f.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return x0(f.source)&&(this.browserUrlTree=f.extractedUrl),(0,xt.of)(f).pipe(mr(I=>{const V=this.transitions.getValue();return r.next(new De(I.id,this.serializeUrl(I.extractedUrl),I.source,I.restoredState)),V!==this.transitions.getValue()?ui.E:Promise.resolve(I)}),function(n,t,e,r){return mr(i=>function(n,t,e,r,i){return new KS(n,t,e,r,i).apply()}(n,t,e,i.extractedUrl,r).pipe((0,bt.U)(l=>Object.assign(Object.assign({},i),{urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,vr.b)(I=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:I.urlAfterRedirects})}),function(n,t,e,r,i){return(0,Br.zg)(l=>function(n,t,e,r,i="emptyOnly",l="legacy"){try{const d=new _E(n,t,e,r,i,l).recognize();return null===d?y0(new Bv):(0,xt.of)(d)}catch(d){return y0(d)}}(n,t,l.urlAfterRedirects,e(l.urlAfterRedirects),r,i).pipe((0,bt.U)(d=>Object.assign(Object.assign({},l),{targetSnapshot:d}))))}(this.rootComponentType,this.config,I=>this.serializeUrl(I),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,vr.b)(I=>{"eager"===this.urlUpdateStrategy&&(I.extras.skipLocationChange||this.setBrowserUrl(I.urlAfterRedirects,I),this.browserUrlTree=I.urlAfterRedirects);const V=new Ot(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(I.urlAfterRedirects),I.targetSnapshot);r.next(V)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:V,extractedUrl:G,source:ne,restoredState:we,extras:Ue}=f,tt=new De(V,this.serializeUrl(G),ne,we);r.next(tt);const ot=c0(G,this.rootComponentType).snapshot;return(0,xt.of)(Object.assign(Object.assign({},f),{targetSnapshot:ot,urlAfterRedirects:G,extras:Object.assign(Object.assign({},Ue),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=f.rawUrl,this.browserUrlTree=f.urlAfterRedirects,f.resolve(null),ui.E}),$v(f=>{const{targetSnapshot:m,id:b,extractedUrl:x,rawUrl:I,extras:{skipLocationChange:V,replaceUrl:G}}=f;return this.hooks.beforePreactivation(m,{navigationId:b,appliedUrlTree:x,rawUrlTree:I,skipLocationChange:!!V,replaceUrl:!!G})}),(0,vr.b)(f=>{const m=new Ut(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(m)}),(0,bt.U)(f=>Object.assign(Object.assign({},f),{guards:fE(f.targetSnapshot,f.currentSnapshot,this.rootContexts)})),function(n,t){return(0,Br.zg)(e=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:l,canDeactivateChecks:d}}=e;return 0===d.length&&0===l.length?(0,xt.of)(Object.assign(Object.assign({},e),{guardsResult:!0})):function(n,t,e,r){return(0,un.D)(n).pipe((0,Br.zg)(i=>function(n,t,e,r,i){const l=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!l||0===l.length)return(0,xt.of)(!0);const d=l.map(f=>{const m=m0(f,t,i);let b;if(function(n){return n&&ra(n.canDeactivate)}(m))b=Kr(m.canDeactivate(n,t,e,r));else{if(!ra(m))throw new Error("Invalid CanDeactivate guard");b=Kr(m(n,t,e,r))}return b.pipe(Ir())});return(0,xt.of)(d).pipe(jh())}(i.component,i.route,e,t,r)),Ir(i=>!0!==i,!0))}(d,r,i,n).pipe((0,Br.zg)(f=>f&&function(n){return"boolean"==typeof n}(f)?function(n,t,e,r){return(0,un.D)(t).pipe(Pc(i=>Zs(function(n,t){return null!==n&&t&&t(new td(n)),(0,xt.of)(!0)}(i.route.parent,r),function(n,t){return null!==n&&t&&t(new $a(n)),(0,xt.of)(!0)}(i.route,r),function(n,t,e){const r=t[t.length-1],l=t.slice(0,t.length-1).reverse().map(d=>function(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(d)).filter(d=>null!==d).map(d=>Fi(()=>{const f=d.guards.map(m=>{const b=m0(m,d.node,e);let x;if(function(n){return n&&ra(n.canActivateChild)}(b))x=Kr(b.canActivateChild(r,n));else{if(!ra(b))throw new Error("Invalid CanActivateChild guard");x=Kr(b(r,n))}return x.pipe(Ir())});return(0,xt.of)(f).pipe(jh())}));return(0,xt.of)(l).pipe(jh())}(n,i.path,e),function(n,t,e){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return(0,xt.of)(!0);const i=r.map(l=>Fi(()=>{const d=m0(l,t,e);let f;if(function(n){return n&&ra(n.canActivate)}(d))f=Kr(d.canActivate(t,n));else{if(!ra(d))throw new Error("Invalid CanActivate guard");f=Kr(d(t,n))}return f.pipe(Ir())}));return(0,xt.of)(i).pipe(jh())}(n,i.route,e))),Ir(i=>!0!==i,!0))}(r,l,n,t):(0,xt.of)(f)),(0,bt.U)(f=>Object.assign(Object.assign({},e),{guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,vr.b)(f=>{if(Ll(f.guardsResult)){const b=t0(`Redirecting to "${this.serializeUrl(f.guardsResult)}"`);throw b.url=f.guardsResult,b}const m=new fn(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(m)}),ar(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,""),!1)),$v(f=>{if(f.guards.canActivateChecks.length)return(0,xt.of)(f).pipe((0,vr.b)(m=>{const b=new Ht(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(b)}),mr(m=>{let b=!1;return(0,xt.of)(m).pipe(function(n,t){return(0,Br.zg)(e=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return(0,xt.of)(e);let l=0;return(0,un.D)(i).pipe(Pc(d=>function(n,t,e,r){return function(n,t,e,r){const i=Object.keys(n);if(0===i.length)return(0,xt.of)({});const l={};return(0,un.D)(i).pipe((0,Br.zg)(d=>function(n,t,e,r){const i=m0(n,t,r);return Kr(i.resolve?i.resolve(t,e):i(t,e))}(n[d],t,e,r).pipe((0,vr.b)(f=>{l[d]=f}))),Rh(1),(0,Br.zg)(()=>Object.keys(l).length===i.length?(0,xt.of)(l):ui.E))}(n._resolve,n,t,r).pipe((0,bt.U)(l=>(n._resolvedData=l,n.data=Object.assign(Object.assign({},n.data),u0(n,e).resolve),null)))}(d.route,r,n,t)),(0,vr.b)(()=>l++),Rh(1),(0,Br.zg)(d=>l===i.length?(0,xt.of)(e):ui.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,vr.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(m),this.cancelNavigationTransition(m,"At least one route resolver didn't emit any value."))}}))}),(0,vr.b)(m=>{const b=new Mr(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(b)}))}),$v(f=>{const{targetSnapshot:m,id:b,extractedUrl:x,rawUrl:I,extras:{skipLocationChange:V,replaceUrl:G}}=f;return this.hooks.afterPreactivation(m,{navigationId:b,appliedUrlTree:x,rawUrlTree:I,skipLocationChange:!!V,replaceUrl:!!G})}),(0,bt.U)(f=>{const m=function(n,t,e){const r=Gc(n,t._root,e?e._root:void 0);return new Vh(r,t)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return Object.assign(Object.assign({},f),{targetRouterState:m})}),(0,vr.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,t,e)=>(0,bt.U)(r=>(new Jp(t,r.targetRouterState,r.currentRouterState,e).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,vr.b)({next(){l=!0},complete(){l=!0}}),function(n){return t=>t.lift(new S(n))}(()=>{var f;if(!l&&!d){const m=`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(i),this.cancelNavigationTransition(i,m)):this.cancelNavigationTransition(i,m)}(null===(f=this.currentNavigation)||void 0===f?void 0:f.id)===i.id&&(this.currentNavigation=null)}),To(f=>{if(d=!0,function(n){return n&&n[Oc]}(f)){const m=Ll(f.url);m||(this.navigated=!0,this.restoreHistory(i,!0));const b=new Qe(i.id,this.serializeUrl(i.extractedUrl),f.message);r.next(b),m?setTimeout(()=>{const x=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),I={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||x0(i.source)};this.scheduleNavigation(x,"imperative",null,I,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const m=new dt(i.id,this.serializeUrl(i.extractedUrl),f);r.next(m);try{i.resolve(this.errorHandler(f))}catch(b){i.reject(b)}}return ui.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const r=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:i,state:l,urlTree:d}=r,f={replaceUrl:!0};if(l){const m=Object.assign({},l);delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(f.state=m)}this.scheduleNavigation(d,i,l,f)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(e){var r;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(r=e.state)||void 0===r?void 0:r.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,r){if(!e)return!0;const i=r.urlTree.toString()===e.urlTree.toString();return r.transitionId!==e.transitionId||!i||!("hashchange"===r.source&&"popstate"===e.source||"popstate"===r.source&&"hashchange"===e.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){Gh(e),this.config=e.map(Pv),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,r={}){const{relativeTo:i,queryParams:l,fragment:d,queryParamsHandling:f,preserveFragment:m}=r,b=i||this.routerState.root,x=m?this.currentUrlTree.fragment:d;let I=null;switch(f){case"merge":I=Object.assign(Object.assign({},this.currentUrlTree.queryParams),l);break;case"preserve":I=this.currentUrlTree.queryParams;break;default:I=l||null}return null!==I&&(I=this.removeEmptyProps(I)),function(n,t,e,r,i){if(0===e.length)return g(t.root,t.root,t,r,i);const l=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new E(!0,0,n);let t=0,e=!1;const r=n.reduce((i,l,d)=>{if("object"==typeof l&&null!=l){if(l.outlets){const f={};return Ur(l.outlets,(m,b)=>{f[b]="string"==typeof m?m.split("/"):m}),[...i,{outlets:f}]}if(l.segmentPath)return[...i,l.segmentPath]}return"string"!=typeof l?[...i,l]:0===d?(l.split("/").forEach((f,m)=>{0==m&&"."===f||(0==m&&""===f?e=!0:".."===f?t++:""!=f&&i.push(f))}),i):[...i,l]},[]);return new E(e,t,r)}(e);if(l.toRoot())return g(t.root,new dn([],{}),t,r,i);const d=function(n,t,e){if(n.isAbsolute)return new j(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const l=e.snapshot._urlSegment;return new j(l,l===t.root,0)}const r=cd(n.commands[0])?0:1;return function(n,t,e){let r=n,i=t,l=e;for(;l>i;){if(l-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new j(r,!1,i-l)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(l,t,n),f=d.processChildren?Tt(d.segmentGroup,d.index,l.commands):nt(d.segmentGroup,d.index,l.commands);return g(d.segmentGroup,f,t,r,i)}(b,this.currentUrlTree,e,I,null!=x?x:null)}navigateByUrl(e,r={skipLocationChange:!1}){const i=Ll(e)?e:this.parseUrl(e),l=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,r)}navigate(e,r={skipLocationChange:!1}){return function(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let r;try{r=this.urlSerializer.parse(e)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,e)}return r}isActive(e,r){let i;if(i=!0===r?Object.assign({},DE):!1===r?Object.assign({},TE):r,Ll(e))return nd(this.currentUrlTree,e,i);const l=this.parseUrl(e);return nd(this.currentUrlTree,l,i)}removeEmptyProps(e){return Object.keys(e).reduce((r,i)=>{const l=e[i];return null!=l&&(r[i]=l),r},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new Me(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,r,i,l,d){var f,m;if(this.disposed)return Promise.resolve(!1);const b=this.getTransition(),x=x0(r)&&b&&!x0(b.source),G=(this.lastSuccessfulId===b.id||this.currentNavigation?b.rawUrl:b.urlAfterRedirects).toString()===e.toString();if(x&&G)return Promise.resolve(!0);let ne,we,Ue;d?(ne=d.resolve,we=d.reject,Ue=d.promise):Ue=new Promise((gt,yt)=>{ne=gt,we=yt});const tt=++this.navigationId;let ot;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),ot=i&&i.\u0275routerPageId?i.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?null!==(f=this.browserPageId)&&void 0!==f?f:0:(null!==(m=this.browserPageId)&&void 0!==m?m:0)+1):ot=0,this.setTransition({id:tt,targetPageId:ot,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:l,resolve:ne,reject:we,promise:Ue,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ue.catch(gt=>Promise.reject(gt))}setBrowserUrl(e,r){const i=this.urlSerializer.serialize(e),l=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",l):this.location.go(i,"",l)}restoreHistory(e,r=!1){var i,l;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===d?this.currentUrlTree===(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)&&0===d&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,r){const i=new Qe(e.id,this.serializeUrl(e.extractedUrl),r);this.triggerEvent(i),e.resolve(!1)}generateNgRouterState(e,r){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a.DyG),a.LFG(Zp),a.LFG(Wc),a.LFG(Ce),a.LFG(a.zs3),a.LFG(a.v3s),a.LFG(a.Sil),a.LFG(void 0))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function x0(n){return"imperative"!==n}let og=(()=>{class n{constructor(e,r,i,l,d){this.parentContexts=e,this.location=r,this.resolver=i,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new a.vpe,this.deactivateEvents=new a.vpe,this.name=l||Gt,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const d=(r=r||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),f=this.parentContexts.getOrCreateContext(this.name).children,m=new I0(e,f,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,m),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(Wc),a.Y36(a.s_b),a.Y36(a._Vd),a.$8M("name"),a.Y36(a.sBO))},n.\u0275dir=a.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class I0{constructor(t,e,r){this.route=t,this.childContexts=e,this.parent=r}get(t,e){return t===$c?this.route:t===Wc?this.childContexts:this.parent.get(t,e)}}class Gv{}class qv{preload(t,e){return(0,xt.of)(null)}}let S0=(()=>{class n{constructor(e,r,i,l,d){this.router=e,this.injector=l,this.preloadingStrategy=d,this.loader=new C0(r,i,b=>e.triggerEvent(new Rr(b)),b=>e.triggerEvent(new Ml(b)))}setUpPreloading(){this.subscription=this.router.events.pipe(ar(e=>e instanceof Me),Pc(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(a.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){const i=[];for(const l of r)if(l.loadChildren&&!l.canLoad&&l._loadedConfig){const d=l._loadedConfig;i.push(this.processRoutes(d.module,d.routes))}else l.loadChildren&&!l.canLoad?i.push(this.preloadConfig(e,l)):l.children&&i.push(this.processRoutes(e,l.children));return(0,un.D)(i).pipe((0,ms.J)(),(0,bt.U)(l=>{}))}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?(0,xt.of)(r._loadedConfig):this.loader.load(e.injector,r)).pipe((0,Br.zg)(l=>(r._loadedConfig=l,this.processRoutes(l.module,l.routes)))))}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(vs),a.LFG(a.v3s),a.LFG(a.Sil),a.LFG(a.zs3),a.LFG(Gv))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),gd=(()=>{class n{constructor(e,r,i={}){this.router=e,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof De?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Me&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Qo&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.router.triggerEvent(new Qo(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(vs),a.LFG(Nu),a.LFG(void 0))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const Zc=new a.OlP("ROUTER_CONFIGURATION"),SE=new a.OlP("ROUTER_FORROOT_GUARD"),AE=[Ce,{provide:Zp,useClass:Vc},{provide:vs,useFactory:function(n,t,e,r,i,l,d,f={},m,b){const x=new vs(null,n,t,e,r,i,l,n0(d));return m&&(x.urlHandlingStrategy=m),b&&(x.routeReuseStrategy=b),function(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy)}(f,x),f.enableTracing&&x.events.subscribe(I=>{var V,G;null===(V=console.group)||void 0===V||V.call(console,`Router Event: ${I.constructor.name}`),console.log(I.toString()),console.log(I),null===(G=console.groupEnd)||void 0===G||G.call(console)}),x},deps:[Zp,Wc,Ce,a.zs3,a.v3s,a.Sil,w0,Zc,[class{},new a.FiY],[class{},new a.FiY]]},Wc,{provide:$c,useFactory:function(n){return n.routerState.root},deps:[vs]},{provide:a.v3s,useClass:a.EAV},S0,qv,class{preload(t,e){return e().pipe(To(()=>(0,xt.of)(null)))}},{provide:Zc,useValue:{enableTracing:!1}}];function Zv(){return new a.PXZ("Router",vs)}let zv=(()=>{class n{constructor(e,r){}static forRoot(e,r){return{ngModule:n,providers:[AE,Yv(e),{provide:SE,useFactory:fA,deps:[[vs,new a.FiY,new a.tp0]]},{provide:Zc,useValue:r||{}},{provide:le,useFactory:NE,deps:[L,[new a.tBr(Z),new a.FiY],Zc]},{provide:gd,useFactory:l2,deps:[vs,Nu,Zc]},{provide:Gv,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:qv},{provide:a.PXZ,multi:!0,useFactory:Zv},[Kv,{provide:a.ip1,multi:!0,useFactory:ME,deps:[Kv]},{provide:RE,useFactory:mA,deps:[Kv]},{provide:a.tb,multi:!0,useExisting:RE}]]}}static forChild(e){return{ngModule:n,providers:[Yv(e)]}}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(SE,8),a.LFG(vs,8))},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})();function l2(n,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new gd(n,t,e)}function NE(n,t,e={}){return e.useHash?new fe(n,t):new de(n,t)}function fA(n){return"guarded"}function Yv(n){return[{provide:a.deG,multi:!0,useValue:n},{provide:w0,multi:!0,useValue:n}]}let Kv=(()=>{class n{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Tn.xQ}appInitializer(){return this.injector.get(P,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(f=>r=f),l=this.injector.get(vs),d=this.injector.get(Zc);return"disabled"===d.initialNavigation?(l.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(l.hooks.afterPreactivation=()=>this.initNavigation?(0,xt.of)(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),l.initialNavigation()):r(!0),i})}bootstrapListener(e){const r=this.injector.get(Zc),i=this.injector.get(S0),l=this.injector.get(gd),d=this.injector.get(vs),f=this.injector.get(a.z2F);e===f.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),i.setUpPreloading(),l.init(),d.resetRootComponentType(f.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a.zs3))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function ME(n){return n.appInitializer.bind(n)}function mA(n){return n.bootstrapListener.bind(n)}const RE=new a.OlP("Router Initializer"),kE=[];let yA=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[zv.forRoot(kE)],zv]}),n})();var $e=O(8239),zc=O(8873),Kt=O(4292),Yc=O(3637),A0=O(6561);function sa(n){const{subscriber:t,counter:e,period:r}=n;t.next(e),this.schedule({subscriber:t,counter:e+1,period:r},r)}var PE=O(6355),vA=O(7771),md=O(9746),Bl=O(8858);class zh extends Tn.xQ{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new OE(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,r=e?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,l=r.length;let d;if(this.closed)throw new Nl.N;if(this.isStopped||this.hasError?d=ed.w.EMPTY:(this.observers.push(t),d=new Bl.W(this,t)),i&&t.add(t=new md.ht(t,i)),e)for(let f=0;f<l&&!t.closed;f++)t.next(r[f]);else for(let f=0;f<l&&!t.closed;f++)t.next(r[f].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),d}_getNow(){return(this.scheduler||vA.c).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,r=this._windowTime,i=this._events,l=i.length;let d=0;for(;d<l&&!(t-i[d].time<r);)d++;return l>e&&(d=Math.max(d,l-e)),d>0&&i.splice(0,d),i}}class OE{constructor(t,e){this.time=t,this.value=e}}const Qv={url:"",deserializer:n=>JSON.parse(n.data),serializer:n=>JSON.stringify(n)};class M0 extends Tn.ug{constructor(t,e){if(super(),t instanceof zn.y)this.destination=e,this.source=t;else{const r=this._config=Object.assign({},Qv);if(this._output=new Tn.xQ,"string"==typeof t)r.url=t;else for(let i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);if(!r.WebSocketCtor&&WebSocket)r.WebSocketCtor=WebSocket;else if(!r.WebSocketCtor)throw new Error("no WebSocket constructor can be found");this.destination=new zh}}lift(t){const e=new M0(this._config,this.destination);return e.operator=t,e.source=this,e}_resetState(){this._socket=null,this.source||(this.destination=new zh),this._output=new Tn.xQ}multiplex(t,e,r){const i=this;return new zn.y(l=>{try{i.next(t())}catch(f){l.error(f)}const d=i.subscribe(f=>{try{r(f)&&l.next(f)}catch(m){l.error(m)}},f=>l.error(f),()=>l.complete());return()=>{try{i.next(e())}catch(f){l.error(f)}d.unsubscribe()}})}_connectSocket(){const{WebSocketCtor:t,protocol:e,url:r,binaryType:i}=this._config,l=this._output;let d=null;try{d=e?new t(r,e):new t(r),this._socket=d,i&&(this._socket.binaryType=i)}catch(m){return void l.error(m)}const f=new ed.w(()=>{this._socket=null,d&&1===d.readyState&&d.close()});d.onopen=m=>{const{_socket:b}=this;if(!b)return d.close(),void this._resetState();const{openObserver:x}=this._config;x&&x.next(m);const I=this.destination;this.destination=gr.L.create(V=>{if(1===d.readyState)try{const{serializer:G}=this._config;d.send(G(V))}catch(G){this.destination.error(G)}},V=>{const{closingObserver:G}=this._config;G&&G.next(void 0),V&&V.code?d.close(V.code,V.reason):l.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),this._resetState()},()=>{const{closingObserver:V}=this._config;V&&V.next(void 0),d.close(),this._resetState()}),I&&I instanceof zh&&f.add(I.subscribe(this.destination))},d.onerror=m=>{this._resetState(),l.error(m)},d.onclose=m=>{this._resetState();const{closeObserver:b}=this._config;b&&b.next(m),m.wasClean?l.complete():l.error(m)},d.onmessage=m=>{try{const{deserializer:b}=this._config;l.next(b(m))}catch(b){l.error(b)}}}_subscribe(t){const{source:e}=this;return e?e.subscribe(t):(this._socket||this._connectSocket(),this._output.subscribe(t),t.add(()=>{const{_socket:r}=this;0===this._output.observers.length&&(r&&1===r.readyState&&r.close(),this._resetState())}),t)}unsubscribe(){const{_socket:t}=this;t&&1===t.readyState&&t.close(),this._resetState(),super.unsubscribe()}}function bA(n){return new M0(n)}class Ul{constructor(t,e,r){this.sinal=t,this.http=e,this.appComponent=r,this._1second=1e3,this._5seconds=5*this._1second,this._5minutes=60*this._1second*5,this.binance5minCandleDataList=[],this.binance1minCandleDataList=[],this.getMovingAverage=(i=[])=>{const l=[];let d=0,f=0;for(let m=0;m<i.length;m++)d+=i[m],f++,l[m]=d/f;return l},this.updateCandleDataList()}stop(){}update(t){this.sinal=t;let e=this.verificarShort(),r=this.verificarLong();if(e.canBuy||r.canBuy){let i={};i.sinal=this.sinal,i.id=this.sinal.moeda+this.sinal.tipo,i.dataHora=zc().format("DD/MM/YYYY HH:mm:ss"),this.appComponent.acionarAlerta(i)}}updateCandleDataList(){this.http.get(`https://api.binance.com/api/v3/klines?symbol=${this.sinal.moeda}&interval=5m&limit=52`).subscribe(r=>{this.binance5minCandleDataList=r,this.coin5minSocket||(this.coin5minSocket=bA(`wss://fstream.binance.com/ws/${this.sinal.moeda.toLowerCase()}@kline_5m`),this.coin5minSocket.subscribe(i=>{this.update5minLastCandle(i)},i=>{console.error(i)}))},r=>console.error(r)),this.http.get(`https://api.binance.com/api/v3/klines?symbol=${this.sinal.moeda}&interval=1m&limit=52`).subscribe(r=>{this.binance1minCandleDataList=r,this.coin1minSocket||(this.coin1minSocket=bA(`wss://fstream.binance.com/ws/${this.sinal.moeda.toLowerCase()}@kline_1m`),this.coin1minSocket.subscribe(i=>{this.update1minLastCandle(i)},i=>{console.error(i)}))},r=>console.error(r))}update5minLastCandle(t){let e=t.k;if(e.x)this.updateCandleDataList();else{let r=[];r[0]=e.t,r[1]=e.o,r[2]=e.h,r[3]=e.l,r[4]=e.c,r[5]=e.T,this.binance5minCandleDataList[this.binance5minCandleDataList.length-1]=r}}update1minLastCandle(t){let e=t.k;if(e.x)this.updateCandleDataList();else{let r=[];r[0]=e.t,r[1]=e.o,r[2]=e.h,r[3]=e.l,r[4]=e.c,r[5]=e.T,this.binance1minCandleDataList[this.binance1minCandleDataList.length-1]=r}}getMACD(t=[]){let l=this.appComponent.sinaisMap[this.sinal.id].priceCoin.toString(),d=l.indexOf("."),f=l.substr(d+1).length,m=(0,PE.macd)(t,12,26,9);return m.line.forEach((b,x)=>{b&&(m.line[x]=parseFloat(b.toFixed(d+f+1)))}),m.signal.forEach((b,x)=>{b&&(m.signal[x]=parseFloat(b.toFixed(d+f+1)))}),{MACD:m.line,signal:m.signal}}verificarShort(){let t=this.binance1minCandleDataList.map(tt=>parseFloat(tt[4]));const e=this.mapCandleResult(this.binance1minCandleDataList);this.fillMA5(e),this.fillM26(e),this.fillMA12(e);let r=e[e.length-1],i=e[e.length-2],b=this.getMACD(t),x={canBuy:!1,stopLossPrice:""};return"SHORT"===this.sinal.tipo&&(b.MACD[b.MACD.length-1]<b.signal[b.signal.length-1]&&b.MACD[b.MACD.length-2]>b.signal[b.signal.length-2]||r.M5<r.M26&&r.M26<r.M12&&i.M26<i.M5&&i.M5<i.M12)&&(x.canBuy=!0),x}verificarLong(){let t=this.binance5minCandleDataList.map(tt=>parseFloat(tt[4]));const e=this.mapCandleResult(this.binance5minCandleDataList);this.fillMA5(e),this.fillM26(e),this.fillMA12(e);let r=e[e.length-1],i=e[e.length-2],x=(this.getMACD(t),{canBuy:!1,stopLossPrice:""});return"LONG"===this.sinal.tipo&&r.M5>r.M26&&r.M26>r.M12&&i.M26>i.M5&&i.M5>i.M12&&(x.canBuy=!0),x}calculateStopLoss(t){let e=t.length-1,r=parseFloat(t[e][2]),i=parseFloat(t[e][4]),l=parseFloat(t[--e][2]),d=parseFloat(t[--e][4]),f=parseFloat(t[--e][2]),m=parseFloat(t[--e][4]),b=0;return b="LONG"===this.sinal.tipo?[i,d,m].sort((x,I)=>x-I)[0]:[r,l,f].sort((x,I)=>I-x)[0],b.toString()}mapCandleResult(t=[]){let e=[];return t.forEach(r=>{let i=(parseFloat(r[1])+parseFloat(r[4]))/2;e.push({data:zc(r[0]).add(3,"hours").format("HH:mm:ss"),mediana:parseFloat(String(i)),MA5:0,MA12:0,MA26:0})}),e}fillMA5(t=[]){let e=[];for(let i=t.length-5;i<t.length;i++)e.push(t[i]);let r=this.sinal.priceCoin.toString().length;e=this.getMovingAverage(e.map(i=>i.mediana));for(let i=t.length-5;i<t.length;i++){let l=e.shift();l=parseFloat(l.toString().substr(0,r)),t[i].MA5=l}}fillMA12(t=[]){let e=[];for(let i=t.length-12;i<t.length;i++)e.push(t[i]);e=this.getMovingAverage(e.map(i=>i.mediana));let r=this.sinal.priceCoin.toString().length;for(let i=t.length-12;i<t.length;i++){let l=e.shift();l=parseFloat(l.toString().substr(0,r)),t[i].MA12=l}}fillM26(t=[]){let e=t.map(l=>l.mediana),r=this.getMovingAverage(e),i=this.sinal.priceCoin.toString().length;t.forEach((l,d)=>{let f=r[d];f=parseFloat(f.toString().substr(0,i)),l.MA26=f})}checkCandleSinal(t){let e=t[t.length-1],r=t[t.length-2],i=t[t.length-3],l=parseFloat(e[1]),d=parseFloat(e[4]),m=(parseFloat(e[2]),parseFloat(e[3])),I=(parseFloat(r[1]),parseFloat(r[4]),parseFloat(r[2])),V=parseFloat(r[3]),we=(parseFloat(i[1]),parseFloat(i[4]),parseFloat(i[2])),Ue=parseFloat(i[3]),tt=!1;return tt="LONG"===this.sinal.tipo?l<d&&d>I&&d>we&&m>V&&m>Ue:l>d&&d<V&&d<Ue&&d<I&&d<we,tt}checkDiffMAIsValid(t,e){let i=0,l=0,d=0,f=0;for(let b=e.length-3;b<e.length;b++){let x=e[b],I=e[b+1];if(b===e.length-1){"LONG"===t?(x.MA5>x.MA12&&l++,x.MA5>x.MA26&&d++,x.MA12>x.MA26&&f++):(x.MA5<x.MA12&&l--,x.MA5<x.MA26&&d--,x.MA12<x.MA26&&f--);break}"LONG"===t?(x.MA5<I.MA5&&i++,x.MA5>x.MA12&&l++,x.MA5>x.MA26&&d++,x.MA12>x.MA26&&f++):(x.MA5>I.MA5&&i--,x.MA5<x.MA12&&l--,x.MA5<x.MA26&&d--,x.MA12<x.MA26&&f--)}let m=!1;return("LONG"===t&&2===i&&3===l&&3===d&&3===f||"SHORT"===t&&-2===i&&-3===l&&-3===d&&-3===f)&&(m=!0),m}calculate_MA5_MA26_MA12(t,e){let r=t[t.length-1],i=this.checkCandleSinal(e[e.length-1]),l=!1,d=!1,f=!1;"LONG"===this.sinal.tipo?(l=r.MA5>r.MA26&&r.MA26>r.MA12,d=this.sinal.priceCoin>r.MA5):(l=r.MA5<r.MA26&&r.MA26<r.MA12,d=this.sinal.priceCoin<r.MA5);let m=0,b=0;for(let I=t.length-3;I<t.length;I++){let V=t[I],G=t[I+1];if(!G)break;"LONG"===this.sinal.tipo?(V.MA5<G.MA5&&m++,V.MA26<G.MA26&&b++):(V.MA5>G.MA5&&m--,V.MA26>G.MA26&&b--)}return("LONG"===this.sinal.tipo&&2===m&&2===b||"SHORT"===this.sinal.tipo&&-2===m&&-2===b)&&(f=!0),f&&i&&l&&d}calculate_MA5_MA12(t,e){let r=t[t.length-1],i=this.checkDiffMAIsValid(this.sinal.tipo,t),l=this.checkCandleSinal(e),d=!1,f=!1;return"LONG"===this.sinal.tipo?(d=r.MA5>r.MA12&&r.MA5>r.MA26&&r.MA12>r.MA26,f=this.sinal.priceCoin>r.MA5):(d=r.MA5<r.MA12&&r.MA5<r.MA26&&r.MA12<r.MA26,f=this.sinal.priceCoin<r.MA5),i&&l&&d&&f}isGreenCandle(t){return parseFloat(t[1])<parseFloat(t[4])}isRedCandle(t){return parseFloat(t[1])>parseFloat(t[4])}}var ag=O(2527);class R0{constructor(t,e){this.sinal=t,this.confRobo=e,this.umPorCento=0,this.BINANCE_FUTURE_ENDPOINT="https://fapi.binance.com",this.ENPOINT_ORDER="/fapi/v1/order",this.umPorCento="LONG"===t.tipo?(parseFloat(t.entradas[t.entradas.length-1].valor)-parseFloat(t.entradas[0].valor))/100:(parseFloat(t.entradas[0].valor)-parseFloat(t.entradas[t.entradas.length-1].valor))/100,this.makeRequestBuyOrder()}converterUSDT2MOEDA(t,e){let i=parseFloat((t/e*20).toFixed(0));return i<=0?1:i}objectToURLQuery(t){var e=[];for(var r in t)null!=t[r]&&e.push(r+"="+t[r]);return e.join("&")}makeRequestBuyOrder(){let t=parseFloat(this.sinal.priceCoin),e=this.converterUSDT2MOEDA(this.confRobo.valorEntradaUsdt,t);var r=1e3*zc().unix(),l={symbol:this.sinal.moeda,side:"LONG"===this.sinal.tipo?"BUY":"SELL",type:"MARKET",timestamp:r,recvWindow:6e4,quantity:e};let d=window.localStorage.getItem("apiKey"),f=window.localStorage.getItem("apiSecret"),m=this.objectToURLQuery(l);var b=ag.HmacSHA256(m,f).toString(ag.enc.Hex);fetch(this.BINANCE_FUTURE_ENDPOINT+this.ENPOINT_ORDER+"?"+m+"&signature="+b,{method:"POST",headers:{"X-MBX-APIKEY":d}}).then(G=>{if(G.ok)return G.json();throw G.text()}).then(G=>{"NEW"===G.status&&window.toastr.error("Ok!","Compra realizada na binance")}).catch(G=>{G.then(ne=>{let we=zc();console.error(we,ne),console.log(we,`Erro ao comprar moeda ${this.sinal.moeda}, moeda foi bloqueada!`)})})}}var _d=O(6682),wA=O(8819);function lg(n,t){return e=>e.lift(new FE(n,t))}class FE{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new d2(t,this.compare,this.keySelector))}}class d2 extends gr.L{constructor(t,e,r){super(t),this.keySelector=r,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:i}=this;e=i?i(t):t}catch(i){return this.destination.error(i)}let r=!1;if(this.hasKey)try{const{compare:i}=this;r=i(this.key,e)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=e,this.destination.next(t))}}function k0(...n){return t=>{let e;return"function"==typeof n[n.length-1]&&(e=n.pop()),t.lift(new h2(n,e))}}class h2{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new LE(t,this.observables,this.project))}}class LE extends Nh{constructor(t,e,r){super(t),this.observables=e,this.project=r,this.toRespond=[];const i=e.length;this.values=new Array(i);for(let l=0;l<i;l++)this.toRespond.push(l);for(let l=0;l<i;l++)this.add(dr(this,e[l],void 0,l))}notifyNext(t,e,r){this.values[r]=e;const i=this.toRespond;if(i.length>0){const l=i.indexOf(r);-1!==l&&i.splice(l,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(r){return void this.destination.error(r)}this.destination.next(e)}}class CA{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new Jv(t,this.predicate))}}class Jv extends gr.L{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}var Yn=O(8971),vi=O(8939),BE=(O(4828),O(3394)),Ka=O(3910),Vs=O(8026),Y=O(3854),Qa=O(5422);const EA="@firebase/database";let UE="";function Hl(n){UE=n}class Xv{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,Y.Pz)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,Y.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class DA{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,Y.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const eb=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Xv(t)}}catch(t){}return new DA},$l=eb("localStorage"),P0=eb("sessionStorage"),Kc=new Qa.Yd("@firebase/database"),HE=function(){let n=1;return function(){return n++}}(),jl=function(n){const t=(0,Y.dS)(n),e=new Y.gQ;e.update(t);const r=e.digest();return Y.US.encodeByteArray(r)},Yh=function(...n){let t="";for(let e=0;e<n.length;e++){const r=n[e];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?t+=Yh.apply(null,r):t+="object"==typeof r?(0,Y.Pz)(r):r,t+=" "}return t};let yd=null,TA=!0;const O0=function(n,t){(0,Y.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Kc.logLevel=Qa.in.VERBOSE,yd=Kc.log.bind(Kc),t&&P0.set("logging_enabled",!0)):"function"==typeof n?yd=n:(yd=null,P0.remove("logging_enabled"))},bi=function(...n){if(!0===TA&&(TA=!1,null===yd&&!0===P0.get("logging_enabled")&&O0(!0)),yd){const t=Yh.apply(null,n);yd(t)}},Kh=function(n){return function(...t){bi(n,...t)}},tb=function(...n){const t="FIREBASE INTERNAL ERROR: "+Yh(...n);Kc.error(t)},Ja=function(...n){const t=`FIREBASE FATAL ERROR: ${Yh(...n)}`;throw Kc.error(t),new Error(t)},di=function(...n){const t="FIREBASE WARNING: "+Yh(...n);Kc.warn(t)},Jh=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Js="[MIN_NAME]",bs="[MAX_NAME]",vd=function(n,t){if(n===t)return 0;if(n===Js||t===bs)return-1;if(t===Js||n===bs)return 1;{const e=dg(n),r=dg(t);return null!==e?null!==r?e-r==0?n.length-t.length:e-r:-1:null!==r?1:n<t?-1:1}},$E=function(n,t){return n===t?0:n<t?-1:1},ef=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,Y.Pz)(t))},cg=function(n){if("object"!=typeof n||null===n)return(0,Y.Pz)(n);const t=[];for(const r in n)t.push(r);t.sort();let e="{";for(let r=0;r<t.length;r++)0!==r&&(e+=","),e+=(0,Y.Pz)(t[r]),e+=":",e+=cg(n[t[r]]);return e+="}",e},F0=function(n,t){const e=n.length;if(e<=t)return[n];const r=[];for(let i=0;i<e;i+=t)r.push(n.substring(i,i+t>e?e:i+t));return r};function hi(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const ug=function(n){(0,Y.hu)(!Jh(n),"Invalid JSON number");const r=1023;let i,l,d,f,m;0===n?(l=0,d=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),l=f+r,d=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(l=0,d=Math.round(n/Math.pow(2,-1074))));const b=[];for(m=52;m;m-=1)b.push(d%2?1:0),d=Math.floor(d/2);for(m=11;m;m-=1)b.push(l%2?1:0),l=Math.floor(l/2);b.push(i?1:0),b.reverse();const x=b.join("");let I="";for(m=0;m<64;m+=8){let V=parseInt(x.substr(m,8),2).toString(16);1===V.length&&(V="0"+V),I+=V}return I.toLowerCase()},GE=new RegExp("^-?(0*)\\d{1,10}$"),nb=-2147483648,rb=2147483647,dg=function(n){if(GE.test(n)){const t=Number(n);if(t>=nb&&t<=rb)return t}return null},tf=function(n){try{n()}catch(t){setTimeout(()=>{throw di("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},Bi=function(n,t){const e=setTimeout(n,t);return"object"==typeof e&&e.unref&&e.unref(),e};class AA{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(r=>this.appCheck=r)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,r):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){di(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class NA{constructor(t,e,r){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(bi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,r):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',di(t)}}let L0=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const ob=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,lb="websocket",ZE="long_polling";class B0{constructor(t,e,r,i,l=!1,d="",f=!1){this.secure=e,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=l,this.persistenceKey=d,this.includeNamespaceInQueryParams=f,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=$l.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&$l.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function zE(n,t,e){let r;if((0,Y.hu)("string"==typeof t,"typeof type must == string"),(0,Y.hu)("object"==typeof e,"typeof params must == object"),t===lb)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==ZE)throw new Error("Unknown connection type: "+t);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const i=[];return hi(e,(l,d)=>{i.push(l+"="+d)}),r+i.join("&")}class YE{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,Y.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,Y.p$)(this.counters_)}}const U0={},cb={};function Ao(n){const t=n.toString();return U0[t]||(U0[t]=new YE),U0[t]}class PA{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&tf(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Qc{constructor(t,e,r,i,l,d,f){this.connId=t,this.repoInfo=e,this.applicationId=r,this.appCheckToken=i,this.authToken=l,this.transportSessionId=d,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Kh(t),this.stats_=Ao(e),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),zE(e,ZE,m))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new PA(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,Y.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new tx((...l)=>{const[d,f,m,b,x]=l;if(this.incrementIncomingBytes_(l),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===d)this.id=f,this.password=m;else{if("close"!==d)throw new Error("Unrecognized command received: "+d);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...l)=>{const[d,f]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(d,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&ob.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Qc.forceAllow_=!0}static forceDisallow(){Qc.forceDisallow_=!0}static isAvailable(){return!((0,Y.Yr)()||!Qc.forceAllow_&&(Qc.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,Y.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const r=(0,Y.h$)(e),i=F0(r,1840);for(let l=0;l<i.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[l]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,Y.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=t,r.pw=e,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,Y.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class tx{constructor(t,e,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,Y.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=HE(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=tx.createIFrame_();let l="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(l='<script>document.domain="'+document.domain+'";<\/script>');const d="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(d),this.myIFrame.doc.close()}catch(f){bi("frame writing exception"),f.stack&&bi(f.stack),bi(f)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||bi("No IE domain setting required")}catch(e){const r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const d=this.pendingSegs.shift();r=r+"&seg"+i+"="+d.seg+"&ts"+i+"="+d.ts+"&d"+i+"="+d.d,i++}return e+=r,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,r){this.pendingSegs.push({seg:t,ts:e,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const r=()=>{this.outstandingRequests.delete(e),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(i),r()})}addTag(t,e){(0,Y.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=()=>{bi("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let nf=null;"undefined"!=typeof MozWebSocket?nf=MozWebSocket:"undefined"!=typeof WebSocket&&(nf=WebSocket);let rf=(()=>{class n{constructor(e,r,i,l,d,f,m){this.connId=e,this.applicationId=i,this.appCheckToken=l,this.authToken=d,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Kh(this.connId),this.stats_=Ao(r),this.connURL=n.connectionURL_(r,f,m,l),this.nodeAdmin=r.nodeAdmin}static connectionURL_(e,r,i,l){const d={v:"5"};return!(0,Y.Yr)()&&"undefined"!=typeof location&&location.hostname&&ob.test(location.hostname)&&(d.r="f"),r&&(d.s=r),i&&(d.ls=i),l&&(d.ac=l),zE(e,lb,d)}open(e,r){this.onDisconnect=r,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,$l.set("previous_websocket_failure",!0);try{if((0,Y.Yr)()){const l={headers:{"User-Agent":`Firebase/5/${UE}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(l.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(l.headers["X-Firebase-AppCheck"]=this.appCheckToken);const d=process.env,f=0===this.connURL.indexOf("wss://")?d.HTTPS_PROXY||d.https_proxy:d.HTTP_PROXY||d.http_proxy;f&&(l.proxy={origin:f}),this.mySock=new nf(this.connURL,[],l)}else this.mySock=new nf(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const l=i.message||i.data;return l&&this.log_(l),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const l=i.message||i.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&null!==nf&&!n.forceDisallow_}static previouslyFailed(){return $l.isInMemoryStorage||!0===$l.get("previous_websocket_failure")}markConnectionHealthy(){$l.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,Y.cI)(r);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,Y.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const r=Number(e);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const r=e.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const r=(0,Y.Pz)(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=F0(r,16384);i.length>1&&this.sendString_(String(i.length));for(let l=0;l<i.length;l++)this.sendString_(i[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class W0{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Qc,rf]}initTransports_(t){const e=rf&&rf.isAvailable();let r=e&&!rf.previouslyFailed();if(t.webSocketOnly&&(e||di("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[rf];else{const i=this.transports_=[];for(const l of W0.ALL_TRANSPORTS)l&&l.isAvailable()&&i.push(l)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class gb{constructor(t,e,r,i,l,d,f,m,b,x){this.id=t,this.repoInfo_=e,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=l,this.onMessage_=d,this.onReady_=f,this.onDisconnect_=m,this.onKill_=b,this.lastSessionId=x,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Kh("c:"+this.id+":"),this.transportManager_=new W0(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,r)},Math.floor(0));const i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Bi(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=ef("t",t),r=ef("d",t);if("c"===e)this.onSecondaryControl_(r);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=ef("t",t),r=ef("d",t);"c"===e?this.onControl_(r):"d"===e&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=ef("t",t);if("d"in t){const r=t.d;if("h"===e)this.onHandshake_(r);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(r):"r"===e?this.onReset_(r):"e"===e?tb("Server Error: "+r):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):tb("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==r&&di("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,r),Bi(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Bi(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&($l.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class sx{put(t,e,r,i){}merge(t,e,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,r){}onDisconnectMerge(t,e,r){}onDisconnectCancel(t,e){}reportStats(t){}}class z0{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,Y.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)}}on(t,e,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:r});const i=this.getInitialEvent(t);i&&e.apply(r,i)}off(t,e,r){this.validateEventType_(t);const i=this.listeners_[t]||[];for(let l=0;l<i.length;l++)if(i[l].callback===e&&(!r||r===i[l].context))return void i.splice(l,1)}validateEventType_(t){(0,Y.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class Y0 extends z0{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,Y.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Y0}getInitialEvent(t){return(0,Y.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class An{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function kn(){return new An("")}function _n(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Jc(n){return n.pieces_.length-n.pieceNum_}function Bn(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new An(n.pieces_,t)}function _b(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function fg(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function ax(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new An(t,0)}function kr(n,t){const e=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)e.push(n.pieces_[r]);if(t instanceof An)for(let r=t.pieceNum_;r<t.pieces_.length;r++)e.push(t.pieces_[r]);else{const r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&e.push(r[i])}return new An(e,0)}function yn(n){return n.pieceNum_>=n.pieces_.length}function es(n,t){const e=_n(n),r=_n(t);if(null===e)return t;if(e===r)return es(Bn(n),Bn(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function Sr(n,t){const e=fg(n,0),r=fg(t,0);for(let i=0;i<e.length&&i<r.length;i++){const l=vd(e[i],r[i]);if(0!==l)return l}return e.length===r.length?0:e.length<r.length?-1:1}function pg(n,t){if(Jc(n)!==Jc(t))return!1;for(let e=n.pieceNum_,r=t.pieceNum_;e<=n.pieces_.length;e++,r++)if(n.pieces_[e]!==t.pieces_[r])return!1;return!0}function oa(n,t){let e=n.pieceNum_,r=t.pieceNum_;if(Jc(n)>Jc(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[r])return!1;++e,++r}return!0}class Wl{constructor(t,e){this.errorPrefix_=e,this.parts_=fg(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,Y.ug)(this.parts_[r]);qA(this)}}function qA(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+bd(n))}function bd(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class bb extends z0{constructor(){let t,e;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new bb}getInitialEvent(t){return(0,Y.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const lf=1e3;let _g,Xc=(()=>{class n extends sx{constructor(e,r,i,l,d,f,m,b){if(super(),this.repoInfo_=e,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=l,this.onServerInfoUpdate_=d,this.authTokenProvider_=f,this.appCheckTokenProvider_=m,this.authOverride_=b,this.id=n.nextPersistentConnectionId_++,this.log_=Kh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=lf,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,b&&!(0,Y.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");bb.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&Y0.getInstance().on("online",this.onOnline_,this)}sendRequest(e,r,i){const l=++this.requestNumber_,d={r:l,a:e,b:r};this.log_((0,Y.Pz)(d)),(0,Y.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(d),i&&(this.requestCBHash_[l]=i)}get(e){this.initConnection_();const r=new Y.BH,i={p:e._path.toString(),q:e._queryObject},l={action:"g",request:i,onComplete:f=>{const m=f.d;"ok"===f.s?(this.onDataUpdate_(i.p,m,!1,null),r.resolve(m)):r.reject(m)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const d=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const f=this.outstandingGets_[d];void 0===f||l!==f||(delete this.outstandingGets_[d],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+d+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(d),r.promise}listen(e,r,i,l){this.initConnection_();const d=e._queryIdentifier,f=e._path.toString();this.log_("Listen called for "+f+" "+d),this.listens.has(f)||this.listens.set(f,new Map),(0,Y.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,Y.hu)(!this.listens.get(f).has(d),"listen() called twice for same path/queryId.");const m={onComplete:l,hashFn:r,query:e,tag:i};this.listens.get(f).set(d,m),this.connected_&&this.sendListen_(m)}sendGet_(e){const r=this.outstandingGets_[e];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(e){const r=e.query,i=r._path.toString(),l=r._queryIdentifier;this.log_("Listen on "+i+" for "+l);const d={p:i};e.tag&&(d.q=r._queryObject,d.t=e.tag),d.h=e.hashFn(),this.sendRequest("q",d,m=>{const b=m.d,x=m.s;n.warnOnListenWarnings_(b,r),(this.listens.get(i)&&this.listens.get(i).get(l))===e&&(this.log_("listen response",m),"ok"!==x&&this.removeListen_(i,l),e.onComplete&&e.onComplete(x,b))})}static warnOnListenWarnings_(e,r){if(e&&"object"==typeof e&&(0,Y.r3)(e,"w")){const i=(0,Y.DV)(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const l='".indexOn": "'+r._queryParams.getIndex().toString()+'"',d=r._path.toString();di(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${d} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,Y.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,r=(0,Y.w9)(e)?"auth":"gauth",i={cred:e};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,l=>{const d=l.s,f=l.d||"error";this.authToken_===e&&("ok"===d?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(d,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const r=e.s,i=e.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(e,r){const i=e._path.toString(),l=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+l),(0,Y.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,l)&&this.connected_&&this.sendUnlisten_(i,l,e._queryObject,r)}sendUnlisten_(e,r,i,l){this.log_("Unlisten on "+e+" for "+r);const d={p:e};l&&(d.q=i,d.t=l),this.sendRequest("n",d)}onDisconnectPut(e,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,r,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:r,onComplete:i})}onDisconnectMerge(e,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,r,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:r,onComplete:i})}onDisconnectCancel(e,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(e,r,i,l){const d={p:r,d:i};this.log_("onDisconnect "+e,d),this.sendRequest(e,d,f=>{l&&setTimeout(()=>{l(f.s,f.d)},Math.floor(0))})}put(e,r,i,l){this.putInternal("p",e,r,i,l)}merge(e,r,i,l){this.putInternal("m",e,r,i,l)}putInternal(e,r,i,l,d){this.initConnection_();const f={p:r,d:i};void 0!==d&&(f.h=d),this.outstandingPuts_.push({action:e,request:f,onComplete:l}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(e){const r=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,l=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,i,d=>{this.log_(r+" response",d),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),l&&l(d.s,d.d)})}reportStats(e){if(this.connected_){const r={c:e};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,Y.Pz)(e));const r=e.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,r){this.log_("handleServerMessage",e,r),"d"===e?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===e?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===e?this.onListenRevoked_(r.p,r.q):"ac"===e?this.onAuthRevoked_(r.s,r.d):"apc"===e?this.onAppCheckRevoked_(r.s,r.d):"sd"===e?this.onSecurityDebugPacket_(r):tb("Unrecognized action received from server: "+(0,Y.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,Y.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=lf,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=lf,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=lf),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-e);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,$e.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const r=e.onDataMessage_.bind(e),i=e.onReady_.bind(e),l=e.onRealtimeDisconnect_.bind(e),d=e.id+":"+n.nextConnectionId_++,f=e.lastSessionId;let m=!1,b=null;const x=function(){b?b.close():(m=!0,l())};e.realtime_={close:x,sendRequest:function(G){(0,Y.hu)(b,"sendRequest call when we're not connected not allowed."),b.sendRequest(G)}};const V=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[G,ne]=yield Promise.all([e.authTokenProvider_.getToken(V),e.appCheckTokenProvider_.getToken(V)]);m?bi("getToken() completed but was canceled"):(bi("getToken() completed. Creating connection."),e.authToken_=G&&G.accessToken,e.appCheckToken_=ne&&ne.token,b=new gb(d,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,r,i,l,we=>{di(we+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},f))}catch(G){e.log_("Failed to get token: "+G),m||(e.repoInfo_.nodeAdmin&&di(G),x())}}})()}interrupt(e){bi("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){bi("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,Y.xb)(this.interruptReasons_)&&(this.reconnectDelay_=lf,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const r=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const r=this.outstandingPuts_[e];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,r){let i;i=r?r.map(d=>cg(d)).join("$"):"default";const l=this.removeListen_(e,i);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(e,r){const i=new An(e).toString();let l;if(this.listens.has(i)){const d=this.listens.get(i);l=d.get(r),d.delete(r),0===d.size&&this.listens.delete(i)}else l=void 0;return l}onAuthRevoked_(e,r){bi("Auth token revoked: "+e+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,r){bi("App check token revoked: "+e+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const r of e.values())this.sendListen_(r);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let r="js";(0,Y.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+r+"."+UE.replace(/\./g,"-")]=1,(0,Y.uI)()?e["framework.cordova"]=1:(0,Y.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Y0.getInstance().currentlyOnline();return(0,Y.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class vn{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new vn(t,e)}}class mg{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const r=new vn(Js,t),i=new vn(Js,e);return 0!==this.compare(r,i)}minPost(){return vn.MIN}}class ux extends mg{static get __EMPTY_NODE(){return _g}static set __EMPTY_NODE(t){_g=t}compare(t,e){return vd(t.name,e.name)}isDefinedOn(t){throw(0,Y.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return vn.MIN}maxPost(){return new vn(bs,_g)}makePost(t,e){return(0,Y.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new vn(t,_g)}toString(){return".key"}}const Xa=new ux;class Q0{constructor(t,e,r,i,l=null){this.isReverse_=i,this.resultGenerator_=l,this.nodeStack_=[];let d=1;for(;!t.isEmpty();)if(t=t,d=e?r(t.key,e):1,i&&(d*=-1),d<0)t=this.isReverse_?t.left:t.right;else{if(0===d){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let Eb,aa=(()=>{class n{constructor(e,r,i,l,d){this.key=e,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=l?l:Xs.EMPTY_NODE,this.right=null!=d?d:Xs.EMPTY_NODE}copy(e,r,i,l,d){return new n(null!=e?e:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=l?l:this.left,null!=d?d:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,i){let l=this;const d=i(e,l.key);return l=d<0?l.copy(null,null,null,l.left.insert(e,r,i),null):0===d?l.copy(null,r,null,null,null):l.copy(null,null,null,null,l.right.insert(e,r,i)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return Xs.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,r){let i,l;if(i=this,r(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(e,i.key)){if(i.right.isEmpty())return Xs.EMPTY_NODE;l=i.right.min_(),i=i.copy(l.key,l.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Xs{constructor(t,e=Xs.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Xs(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,aa.BLACK,null,null))}remove(t){return new Xs(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,aa.BLACK,null,null))}get(t){let e,r=this.root_;for(;!r.isEmpty();){if(e=this.comparator_(t,r.key),0===e)return r.value;e<0?r=r.left:e>0&&(r=r.right)}return null}getPredecessorKey(t){let e,r=this.root_,i=null;for(;!r.isEmpty();){if(e=this.comparator_(t,r.key),0===e){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}e<0?r=r.left:e>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Q0(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new Q0(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new Q0(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new Q0(this.root_,null,this.comparator_,!0,t)}}function hx(n,t){return vd(n.name,t.name)}function Cb(n,t){return vd(n,t)}Xs.EMPTY_NODE=new class{copy(t,e,r,i,l){return this}insert(t,e,r){return new aa(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const YA=function(n){return"number"==typeof n?"number:"+ug(n):"string:"+n},J0=function(n){if(n.isLeafNode()){const t=n.val();(0,Y.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,Y.r3)(t,".sv"),"Priority must be a string or number.")}else(0,Y.hu)(n===Eb||n.isEmpty(),"priority of unexpected type.");(0,Y.hu)(n===Eb||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let fx,xb,KA,wd=(()=>{class n{constructor(e,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=r,this.lazyHash_=null,(0,Y.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),J0(this.priorityNode_)}static set __childrenNodeConstructor(e){fx=e}static get __childrenNodeConstructor(){return fx}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return yn(e)?this:".priority"===_n(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,r){return null}updateImmediateChild(e,r){return".priority"===e?this.updatePriority(r):r.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,r).updatePriority(this.priorityNode_)}updateChild(e,r){const i=_n(e);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,Y.hu)(".priority"!==i||1===Jc(e),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Bn(e),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,r){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+YA(this.priorityNode_.val())+":");const r=typeof this.value_;e+=r+":",e+="number"===r?ug(this.value_):this.value_,this.lazyHash_=jl(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,Y.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const r=typeof e.value_,i=typeof this.value_,l=n.VALUE_TYPE_ORDER.indexOf(r),d=n.VALUE_TYPE_ORDER.indexOf(i);return(0,Y.hu)(l>=0,"Unknown leaf type: "+r),(0,Y.hu)(d>=0,"Unknown leaf type: "+i),l===d?"object"===i?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:d-l}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const r=e;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const br=new class extends mg{compare(t,e){const r=t.node.getPriority(),i=e.node.getPriority(),l=r.compareTo(i);return 0===l?vd(t.name,e.name):l}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return vn.MIN}maxPost(){return new vn(bs,new wd("[PRIORITY-POST]",KA))}makePost(t,e){const r=xb(t);return new vn(e,new wd("[PRIORITY-POST]",r))}toString(){return".priority"}},px=Math.log(2);class gx{constructor(t){this.count=parseInt(Math.log(t+1)/px,10),this.current_=this.count-1;const i=(l=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&i}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const yg=function(n,t,e,r){n.sort(t);const i=function(m,b){const x=b-m;let I,V;if(0===x)return null;if(1===x)return I=n[m],V=e?e(I):I,new aa(V,I.node,aa.BLACK,null,null);{const G=parseInt(x/2,10)+m,ne=i(m,G),we=i(G+1,b);return I=n[G],V=e?e(I):I,new aa(V,I.node,aa.BLACK,ne,we)}},f=function(m){let b=null,x=null,I=n.length;const V=function(ne,we){const Ue=I-ne,tt=I;I-=ne;const ot=i(Ue+1,tt),gt=n[Ue],yt=e?e(gt):gt;G(new aa(yt,gt.node,we,null,ot))},G=function(ne){b?(b.left=ne,b=ne):(x=ne,b=ne)};for(let ne=0;ne<m.count;++ne){const we=m.nextBitIsOne(),Ue=Math.pow(2,m.count-(ne+1));we?V(Ue,aa.BLACK):(V(Ue,aa.BLACK),V(Ue,aa.RED))}return x}(new gx(n.length));return new Xs(r||t,f)};let Db;const vg={};class el{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,Y.hu)(vg&&br,"ChildrenNode.ts has not been loaded"),Db=Db||new el({".priority":vg},{".priority":br}),Db}get(t){const e=(0,Y.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Xs?e:null}hasIndex(t){return(0,Y.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,Y.hu)(t!==Xa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const l=e.getIterator(vn.Wrap);let f,d=l.getNext();for(;d;)i=i||t.isDefinedOn(d.node),r.push(d),d=l.getNext();f=i?yg(r,t.getCompare()):vg;const m=t.toString(),b=Object.assign({},this.indexSet_);b[m]=t;const x=Object.assign({},this.indexes_);return x[m]=f,new el(x,b)}addToIndexes(t,e){const r=(0,Y.UI)(this.indexes_,(i,l)=>{const d=(0,Y.DV)(this.indexSet_,l);if((0,Y.hu)(d,"Missing index implementation for "+l),i===vg){if(d.isDefinedOn(t.node)){const f=[],m=e.getIterator(vn.Wrap);let b=m.getNext();for(;b;)b.name!==t.name&&f.push(b),b=m.getNext();return f.push(t),yg(f,d.getCompare())}return vg}{const f=e.get(t.name);let m=i;return f&&(m=m.remove(new vn(t.name,f))),m.insert(t,t.node)}});return new el(r,this.indexSet_)}removeFromIndexes(t,e){const r=(0,Y.UI)(this.indexes_,i=>{if(i===vg)return i;{const l=e.get(t.name);return l?i.remove(new vn(t.name,l)):i}});return new el(r,this.indexSet_)}}let Cd,tn=(()=>{class n{constructor(e,r,i){this.children_=e,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&J0(this.priorityNode_),this.children_.isEmpty()&&(0,Y.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Cd||(Cd=new n(new Xs(Cb),null,el.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Cd}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const r=this.children_.get(e);return null===r?Cd:r}}getChild(e){const r=_n(e);return null===r?this:this.getImmediateChild(r).getChild(Bn(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,r){if((0,Y.hu)(r,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(r);{const i=new vn(e,r);let l,d;r.isEmpty()?(l=this.children_.remove(e),d=this.indexMap_.removeFromIndexes(i,this.children_)):(l=this.children_.insert(e,r),d=this.indexMap_.addToIndexes(i,this.children_));const f=l.isEmpty()?Cd:this.priorityNode_;return new n(l,f,d)}}updateChild(e,r){const i=_n(e);if(null===i)return r;{(0,Y.hu)(".priority"!==_n(e)||1===Jc(e),".priority must be the last token in a path");const l=this.getImmediateChild(i).updateChild(Bn(e),r);return this.updateImmediateChild(i,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const r={};let i=0,l=0,d=!0;if(this.forEachChild(br,(f,m)=>{r[f]=m.val(e),i++,d&&n.INTEGER_REGEXP_.test(f)?l=Math.max(l,Number(f)):d=!1}),!e&&d&&l<2*i){const f=[];for(const m in r)f[m]=r[m];return f}return e&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+YA(this.getPriority().val())+":"),this.forEachChild(br,(r,i)=>{const l=i.hash();""!==l&&(e+=":"+r+":"+l)}),this.lazyHash_=""===e?"":jl(e)}return this.lazyHash_}getPredecessorChildName(e,r,i){const l=this.resolveIndex_(i);if(l){const d=l.getPredecessorKey(new vn(e,r));return d?d.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const r=this.resolveIndex_(e);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(e){const r=this.getFirstChildName(e);return r?new vn(r,this.children_.get(r)):null}getLastChildName(e){const r=this.resolveIndex_(e);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(e){const r=this.getLastChildName(e);return r?new vn(r,this.children_.get(r)):null}forEachChild(e,r){const i=this.resolveIndex_(e);return i?i.inorderTraversal(l=>r(l.name,l.node)):this.children_.inorderTraversal(r)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(e,l=>l);{const l=this.children_.getIteratorFrom(e.name,vn.Wrap);let d=l.peek();for(;null!=d&&r.compare(d,e)<0;)l.getNext(),d=l.peek();return l}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(e,l=>l);{const l=this.children_.getReverseIteratorFrom(e.name,vn.Wrap);let d=l.peek();for(;null!=d&&r.compare(d,e)>0;)l.getNext(),d=l.peek();return l}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===bg?-1:0}withIndex(e){if(e===Xa||this.indexMap_.hasIndex(e))return this;{const r=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(e){return e===Xa||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const r=e;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(br),l=r.getIterator(br);let d=i.getNext(),f=l.getNext();for(;d&&f;){if(d.name!==f.name||!d.node.equals(f.node))return!1;d=i.getNext(),f=l.getNext()}return null===d&&null===f}return!1}return!1}}resolveIndex_(e){return e===Xa?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const bg=new class extends tn{constructor(){super(new Xs(Cb),tn.EMPTY_NODE,el.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return tn.EMPTY_NODE}isEmpty(){return!1}};function Pr(n,t=null){if(null===n)return tn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,Y.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new wd(n,Pr(t));if(n instanceof Array){let e=tn.EMPTY_NODE;return hi(n,(r,i)=>{if((0,Y.r3)(n,r)&&"."!==r.substring(0,1)){const l=Pr(i);(l.isLeafNode()||!l.isEmpty())&&(e=e.updateImmediateChild(r,l))}}),e.updatePriority(Pr(t))}{const e=[];let r=!1;if(hi(n,(d,f)=>{if("."!==d.substring(0,1)){const m=Pr(f);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),e.push(new vn(d,m)))}}),0===e.length)return tn.EMPTY_NODE;const l=yg(e,hx,d=>d.name,Cb);if(r){const d=yg(e,br.getCompare());return new tn(l,Pr(t),new el({".priority":d},{".priority":br}))}return new tn(l,Pr(t),el.Default)}}Object.defineProperties(vn,{MIN:{value:new vn(Js,tn.EMPTY_NODE)},MAX:{value:new vn(bs,bg)}}),ux.__EMPTY_NODE=tn.EMPTY_NODE,wd.__childrenNodeConstructor=tn,Eb=bg,KA=bg,function(n){xb=n}(Pr);class Ib extends mg{constructor(t){super(),this.indexPath_=t,(0,Y.hu)(!yn(t)&&".priority"!==_n(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const r=this.extractChild(t.node),i=this.extractChild(e.node),l=r.compareTo(i);return 0===l?vd(t.name,e.name):l}makePost(t,e){const r=Pr(t),i=tn.EMPTY_NODE.updateChild(this.indexPath_,r);return new vn(e,i)}maxPost(){const t=tn.EMPTY_NODE.updateChild(this.indexPath_,bg);return new vn(bs,t)}toString(){return fg(this.indexPath_,0).join("/")}}const Sb=new class extends mg{compare(t,e){const r=t.node.compareTo(e.node);return 0===r?vd(t.name,e.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return vn.MIN}maxPost(){return vn.MAX}makePost(t,e){const r=Pr(t);return new vn(e,r)}toString(){return".value"}},ql="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",wg=function(){let n=0;const t=[];return function(e){const r=e===n;let i;n=e;const l=new Array(8);for(i=7;i>=0;i--)l[i]=ql.charAt(e%64),e=Math.floor(e/64);(0,Y.hu)(0===e,"Cannot push at time == 0");let d=l.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)d+=ql.charAt(t[i]);return(0,Y.hu)(20===d.length,"nextPushId: Length should be 20."),d}}(),mx=function(n){if(n===""+rb)return"-";const t=dg(n);if(null!=t)return""+(t+1);const e=new Array(n.length);for(let d=0;d<e.length;d++)e[d]=n.charAt(d);if(e.length<786)return e.push("-"),e.join("");let r=e.length-1;for(;r>=0&&"z"===e[r];)r--;if(-1===r)return bs;const l=ql.charAt(ql.indexOf(e[r])+1);return e[r]=l,e.slice(0,r+1).join("")},_x=function(n){if(n===""+nb)return Js;const t=dg(n);if(null!=t)return""+(t-1);const e=new Array(n.length);for(let r=0;r<e.length;r++)e[r]=n.charAt(r);return"-"===e[e.length-1]?1===e.length?""+rb:(delete e[e.length-1],e.join("")):(e[e.length-1]=ql.charAt(ql.indexOf(e[e.length-1])-1),e.join("")+"z".repeat(786-e.length))};function X0(n){return{type:"value",snapshotNode:n}}function ws(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function Zl(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function ti(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class cf{constructor(t){this.index_=t}updateChild(t,e,r,i,l,d){(0,Y.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=t.getImmediateChild(e);return f.getChild(i).equals(r.getChild(i))&&f.isEmpty()===r.isEmpty()||(null!=d&&(r.isEmpty()?t.hasChild(e)?d.trackChildChange(Zl(e,f)):(0,Y.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?d.trackChildChange(ws(e,r)):d.trackChildChange(ti(e,r,f))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(e,r).withIndex(this.index_)}updateFullNode(t,e,r){return null!=r&&(t.isLeafNode()||t.forEachChild(br,(i,l)=>{e.hasChild(i)||r.trackChildChange(Zl(i,l))}),e.isLeafNode()||e.forEachChild(br,(i,l)=>{if(t.hasChild(i)){const d=t.getImmediateChild(i);d.equals(l)||r.trackChildChange(ti(i,l,d))}else r.trackChildChange(ws(i,l))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?tn.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ts{constructor(t){this.indexedFilter_=new cf(t.getIndex()),this.index_=t.getIndex(),this.startPost_=ts.getStartPost_(t),this.endPost_=ts.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,e,r,i,l,d){return this.matches(new vn(e,r))||(r=tn.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,r,i,l,d)}updateFullNode(t,e,r){e.isLeafNode()&&(e=tn.EMPTY_NODE);let i=e.withIndex(this.index_);i=i.updatePriority(tn.EMPTY_NODE);const l=this;return e.forEachChild(br,(d,f)=>{l.matches(new vn(d,f))||(i=i.updateImmediateChild(d,tn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class Nb{constructor(t){this.rangedFilter_=new ts(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,e,r,i,l,d){return this.rangedFilter_.matches(new vn(e,r))||(r=tn.EMPTY_NODE),t.getImmediateChild(e).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,r,i,l,d):this.fullLimitUpdateChild_(t,e,r,l,d)}updateFullNode(t,e,r){let i;if(e.isLeafNode()||e.isEmpty())i=tn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let l;i=tn.EMPTY_NODE.withIndex(this.index_),l=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let d=0;for(;l.hasNext()&&d<this.limit_;){const f=l.getNext();let m;if(m=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),f)<=0:this.index_.compare(f,this.rangedFilter_.getEndPost())<=0,!m)break;i=i.updateImmediateChild(f.name,f.node),d++}}else{let l,d,f,m;if(i=e.withIndex(this.index_),i=i.updatePriority(tn.EMPTY_NODE),this.reverse_){m=i.getReverseIterator(this.index_),l=this.rangedFilter_.getEndPost(),d=this.rangedFilter_.getStartPost();const I=this.index_.getCompare();f=(V,G)=>I(G,V)}else m=i.getIterator(this.index_),l=this.rangedFilter_.getStartPost(),d=this.rangedFilter_.getEndPost(),f=this.index_.getCompare();let b=0,x=!1;for(;m.hasNext();){const I=m.getNext();!x&&f(l,I)<=0&&(x=!0),x&&b<this.limit_&&f(I,d)<=0?b++:i=i.updateImmediateChild(I.name,tn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,r,i,l){let d;if(this.reverse_){const I=this.index_.getCompare();d=(V,G)=>I(G,V)}else d=this.index_.getCompare();const f=t;(0,Y.hu)(f.numChildren()===this.limit_,"");const m=new vn(e,r),b=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),x=this.rangedFilter_.matches(m);if(f.hasChild(e)){const I=f.getImmediateChild(e);let V=i.getChildAfterChild(this.index_,b,this.reverse_);for(;null!=V&&(V.name===e||f.hasChild(V.name));)V=i.getChildAfterChild(this.index_,V,this.reverse_);const G=null==V?1:d(V,m);if(x&&!r.isEmpty()&&G>=0)return null!=l&&l.trackChildChange(ti(e,r,I)),f.updateImmediateChild(e,r);{null!=l&&l.trackChildChange(Zl(e,I));const we=f.updateImmediateChild(e,tn.EMPTY_NODE);return null!=V&&this.rangedFilter_.matches(V)?(null!=l&&l.trackChildChange(ws(V.name,V.node)),we.updateImmediateChild(V.name,V.node)):we}}return r.isEmpty()?t:x&&d(b,m)>=0?(null!=l&&(l.trackChildChange(Zl(b.name,b.node)),l.trackChildChange(ws(e,r))),f.updateImmediateChild(e,r).updateImmediateChild(b.name,tn.EMPTY_NODE)):t}}class zl{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=br}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,Y.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,Y.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Js}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,Y.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,Y.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:bs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,Y.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===br}copy(){const t=new zl;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function tu(n,t,e){const r=n.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=e?(r.startNameSet_=!0,r.indexStartName_=e):(r.startNameSet_=!1,r.indexStartName_=""),r}function nu(n,t,e){const r=n.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==e?(r.endNameSet_=!0,r.indexEndName_=e):(r.endNameSet_=!1,r.indexEndName_=""),r}function Yl(n,t){const e=n.copy();return e.index_=t,e}function Mb(n){const t={};if(n.isDefault())return t;let e;return n.index_===br?e="$priority":n.index_===Sb?e="$value":n.index_===Xa?e="$key":((0,Y.hu)(n.index_ instanceof Ib,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,Y.Pz)(e),n.startSet_&&(t.startAt=(0,Y.Pz)(n.indexStartValue_),n.startNameSet_&&(t.startAt+=","+(0,Y.Pz)(n.indexStartName_))),n.endSet_&&(t.endAt=(0,Y.Pz)(n.indexEndValue_),n.endNameSet_&&(t.endAt+=","+(0,Y.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function Rb(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_)),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_)),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==br&&(t.i=n.index_.toString()),t}class Cg extends sx{constructor(t,e,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Kh("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,Y.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,r,i){const l=t._path.toString();this.log_("Listen called for "+l+" "+t._queryIdentifier);const d=Cg.getListenId_(t,r),f={};this.listens_[d]=f;const m=Mb(t._queryParams);this.restRequest_(l+".json",m,(b,x)=>{let I=x;if(404===b&&(I=null,b=null),null===b&&this.onDataUpdate_(l,I,!1,r),(0,Y.DV)(this.listens_,d)===f){let V;V=b?401===b?"permission_denied":"rest_error:"+b:"ok",i(V,null)}})}unlisten(t,e){const r=Cg.getListenId_(t,e);delete this.listens_[r]}get(t){const e=Mb(t._queryParams),r=t._path.toString(),i=new Y.BH;return this.restRequest_(r+".json",e,(l,d)=>{let f=d;404===l&&(f=null,l=null),null===l?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(t){}restRequest_(t,e={},r){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,l])=>{i&&i.accessToken&&(e.auth=i.accessToken),l&&l.token&&(e.ac=l.token);const d=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,Y.xO)(e);this.log_("Sending REST request for "+d);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+d+" received. status:",f.status,"response:",f.responseText);let m=null;if(f.status>=200&&f.status<300){try{m=(0,Y.cI)(f.responseText)}catch(b){di("Failed to parse JSON response for "+d+": "+f.responseText)}r(null,m)}else 401!==f.status&&404!==f.status&&di("Got unsuccessful REST response for "+d+" Status: "+f.status),r(f.status);r=null}},f.open("GET",d,!0),f.send()})}}class yx{constructor(){this.rootNode_=tn.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function Eg(){return{value:null,children:new Map}}function xd(n,t,e){if(yn(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const r=_n(t);n.children.has(r)||n.children.set(r,Eg()),xd(n.children.get(r),t=Bn(t),e)}}function e_(n,t){if(yn(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(br,(r,i)=>{xd(n,new An(r),i)}),e_(n,t)}}if(n.children.size>0){const e=_n(t);return t=Bn(t),n.children.has(e)&&e_(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function t_(n,t,e){null!==n.value?e(t,n.value):function(n,t){n.children.forEach((e,r)=>{t(r,e)})}(n,(r,i)=>{t_(i,new An(t.toString()+"/"+r),e)})}class XA{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&hi(this.last_,(r,i)=>{e[r]=e[r]-i}),this.last_=t,e}}class wx{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new XA(t);const r=1e4+2e4*Math.random();Bi(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const t=this.statsListener_.get(),e={};let r=!1;hi(t,(i,l)=>{l>0&&(0,Y.r3)(this.statsToReport_,i)&&(e[i]=l,r=!0)}),r&&this.server_.reportStats(e),Bi(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Mo=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Mo||(Mo={})),Mo))();function n_(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class r_{constructor(t,e,r){this.path=t,this.affectedTree=e,this.revert=r,this.type=Mo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(yn(this.path)){if(null!=this.affectedTree.value)return(0,Y.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new An(t));return new r_(kn(),e,this.revert)}}return(0,Y.hu)(_n(this.path)===t,"operationForChild called for unrelated child."),new r_(Bn(this.path),this.affectedTree,this.revert)}}class gf{constructor(t,e){this.source=t,this.path=e,this.type=Mo.LISTEN_COMPLETE}operationForChild(t){return yn(this.path)?new gf(this.source,kn()):new gf(this.source,Bn(this.path))}}class Dd{constructor(t,e,r){this.source=t,this.path=e,this.snap=r,this.type=Mo.OVERWRITE}operationForChild(t){return yn(this.path)?new Dd(this.source,kn(),this.snap.getImmediateChild(t)):new Dd(this.source,Bn(this.path),this.snap)}}class mf{constructor(t,e,r){this.source=t,this.path=e,this.children=r,this.type=Mo.MERGE}operationForChild(t){if(yn(this.path)){const e=this.children.subtree(new An(t));return e.isEmpty()?null:e.value?new Dd(this.source,kn(),e.value):new mf(this.source,kn(),e)}return(0,Y.hu)(_n(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new mf(this.source,Bn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Td{constructor(t,e,r){this.node_=t,this.fullyInitialized_=e,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(yn(t))return this.isFullyInitialized()&&!this.filtered_;const e=_n(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class tN{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function i_(n,t,e,r,i,l){const d=r.filter(f=>f.type===e);d.sort((f,m)=>function(n,t,e){if(null==t.childName||null==e.childName)throw(0,Y.g5)("Should only compare child_ events.");const r=new vn(t.childName,t.snapshotNode),i=new vn(e.childName,e.snapshotNode);return n.index_.compare(r,i)}(n,f,m)),d.forEach(f=>{const m=function(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,f,l);i.forEach(b=>{b.respondsTo(f.type)&&t.push(b.createEvent(m,n.query_))})})}function s_(n,t){return{eventCache:n,serverCache:t}}function o_(n,t,e,r){return s_(new Td(t,e,r),n.serverCache)}function xx(n,t,e,r){return s_(n.eventCache,new Td(t,e,r))}function a_(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Kl(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let xg;class wr{constructor(t,e=(()=>(xg||(xg=new Xs($E)),xg))()){this.value=t,this.children=e}static fromObject(t){let e=new wr(null);return hi(t,(r,i)=>{e=e.set(new An(r),i)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:kn(),value:this.value};if(yn(t))return null;{const r=_n(t),i=this.children.get(r);if(null!==i){const l=i.findRootMostMatchingPathAndValue(Bn(t),e);return null!=l?{path:kr(new An(r),l.path),value:l.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(yn(t))return this;{const e=_n(t),r=this.children.get(e);return null!==r?r.subtree(Bn(t)):new wr(null)}}set(t,e){if(yn(t))return new wr(e,this.children);{const r=_n(t),l=(this.children.get(r)||new wr(null)).set(Bn(t),e),d=this.children.insert(r,l);return new wr(this.value,d)}}remove(t){if(yn(t))return this.children.isEmpty()?new wr(null):new wr(null,this.children);{const e=_n(t),r=this.children.get(e);if(r){const i=r.remove(Bn(t));let l;return l=i.isEmpty()?this.children.remove(e):this.children.insert(e,i),null===this.value&&l.isEmpty()?new wr(null):new wr(this.value,l)}return this}}get(t){if(yn(t))return this.value;{const e=_n(t),r=this.children.get(e);return r?r.get(Bn(t)):null}}setTree(t,e){if(yn(t))return e;{const r=_n(t),l=(this.children.get(r)||new wr(null)).setTree(Bn(t),e);let d;return d=l.isEmpty()?this.children.remove(r):this.children.insert(r,l),new wr(this.value,d)}}fold(t){return this.fold_(kn(),t)}fold_(t,e){const r={};return this.children.inorderTraversal((i,l)=>{r[i]=l.fold_(kr(t,i),e)}),e(t,this.value,r)}findOnPath(t,e){return this.findOnPath_(t,kn(),e)}findOnPath_(t,e,r){const i=!!this.value&&r(e,this.value);if(i)return i;if(yn(t))return null;{const l=_n(t),d=this.children.get(l);return d?d.findOnPath_(Bn(t),kr(e,l),r):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,kn(),e)}foreachOnPath_(t,e,r){if(yn(t))return this;{this.value&&r(e,this.value);const i=_n(t),l=this.children.get(i);return l?l.foreachOnPath_(Bn(t),kr(e,i),r):new wr(null)}}foreach(t){this.foreach_(kn(),t)}foreach_(t,e){this.children.inorderTraversal((r,i)=>{i.foreach_(kr(t,r),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,r)=>{r.value&&t(e,r.value)})}}class tl{constructor(t){this.writeTree_=t}static empty(){return new tl(new wr(null))}}function l_(n,t,e){if(yn(t))return new tl(new wr(e));{const r=n.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let l=r.value;const d=es(i,t);return l=l.updateChild(d,e),new tl(n.writeTree_.set(i,l))}{const i=new wr(e),l=n.writeTree_.setTree(t,i);return new tl(l)}}}function Ob(n,t,e){let r=n;return hi(e,(i,l)=>{r=l_(r,kr(t,i),l)}),r}function Fb(n,t){if(yn(t))return tl.empty();{const e=n.writeTree_.setTree(t,new wr(null));return new tl(e)}}function Dx(n,t){return null!=Id(n,t)}function Id(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(es(e.path,t)):null}function Sd(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(br,(r,i)=>{t.push(new vn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&t.push(new vn(r,i.value))}),t}function ru(n,t){if(yn(t))return n;{const e=Id(n,t);return new tl(null!=e?new wr(e):n.writeTree_.subtree(t))}}function c_(n){return n.writeTree_.isEmpty()}function _f(n,t){return Lb(kn(),n.writeTree_,t)}function Lb(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let r=null;return t.children.inorderTraversal((i,l)=>{".priority"===i?((0,Y.hu)(null!==l.value,"Priority writes must always be leaf nodes"),r=l.value):e=Lb(kr(n,i),l,e)}),!e.getChild(n).isEmpty()&&null!==r&&(e=e.updateChild(kr(n,".priority"),r)),e}}function Ad(n,t){return d_(t,n)}function oN(n,t){if(n.snap)return oa(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&oa(kr(n.path,e),t))return!0;return!1}function lN(n){return n.visible}function Vb(n,t,e){let r=tl.empty();for(let i=0;i<n.length;++i){const l=n[i];if(t(l)){const d=l.path;let f;if(l.snap)oa(e,d)?(f=es(e,d),r=l_(r,f,l.snap)):oa(d,e)&&(f=es(d,e),r=l_(r,kn(),l.snap.getChild(f)));else{if(!l.children)throw(0,Y.g5)("WriteRecord should have .snap or .children");if(oa(e,d))f=es(e,d),r=Ob(r,f,l.children);else if(oa(d,e))if(f=es(d,e),yn(f))r=Ob(r,kn(),l.children);else{const m=(0,Y.DV)(l.children,_n(f));if(m){const b=m.getChild(Bn(f));r=l_(r,kn(),b)}}}}}return r}function Ix(n,t,e,r,i){if(r||i){const l=ru(n.visibleWrites,t);return!i&&c_(l)?e:i||null!=e||Dx(l,kn())?_f(Vb(n.allWrites,function(b){return(b.visible||i)&&(!r||!~r.indexOf(b.writeId))&&(oa(b.path,t)||oa(t,b.path))},t),e||tn.EMPTY_NODE):null}{const l=Id(n.visibleWrites,t);if(null!=l)return l;{const d=ru(n.visibleWrites,t);return c_(d)?e:null!=e||Dx(d,kn())?_f(d,e||tn.EMPTY_NODE):null}}}function Hb(n,t,e,r){return Ix(n.writeTree,n.treePath,t,e,r)}function Nd(n,t){return function(n,t,e){let r=tn.EMPTY_NODE;const i=Id(n.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(br,(l,d)=>{r=r.updateImmediateChild(l,d)}),r;if(e){const l=ru(n.visibleWrites,t);return e.forEachChild(br,(d,f)=>{const m=_f(ru(l,new An(d)),f);r=r.updateImmediateChild(d,m)}),Sd(l).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}return Sd(ru(n.visibleWrites,t)).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}(n.writeTree,n.treePath,t)}function Nx(n,t,e,r){return function(n,t,e,r,i){(0,Y.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const l=kr(t,e);if(Dx(n.visibleWrites,l))return null;{const d=ru(n.visibleWrites,l);return c_(d)?i.getChild(e):_f(d,i.getChild(e))}}(n.writeTree,n.treePath,t,e,r)}function yf(n,t){return function(n,t){return Id(n.visibleWrites,t)}(n.writeTree,kr(n.treePath,t))}function jb(n,t,e){return function(n,t,e,r){const i=kr(t,e),l=Id(n.visibleWrites,i);return null!=l?l:r.isCompleteForChild(e)?_f(ru(n.visibleWrites,i),r.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function u_(n,t){return d_(kr(n.treePath,t),n.writeTree)}function d_(n,t){return{treePath:n,writeTree:t}}class Mx{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,r=t.childName;(0,Y.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,Y.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const l=i.type;if("child_added"===e&&"child_removed"===l)this.changeMap.set(r,ti(r,t.snapshotNode,i.snapshotNode));else if("child_removed"===e&&"child_added"===l)this.changeMap.delete(r);else if("child_removed"===e&&"child_changed"===l)this.changeMap.set(r,Zl(r,i.oldSnap));else if("child_changed"===e&&"child_added"===l)this.changeMap.set(r,ws(r,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==l)throw(0,Y.g5)("Illegal combination of changes: "+t+" occurred after "+i);this.changeMap.set(r,ti(r,t.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}}const Rx=new class{getCompleteChild(t){return null}getChildAfterChild(t,e,r){return null}};class Dg{constructor(t,e,r=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=r}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const r=null!=this.optCompleteServerCache_?new Td(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return jb(this.writes_,t,r)}}getChildAfterChild(t,e,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Kl(this.viewCache_),l=function(n,t,e,r,i,l){return function(n,t,e,r,i,l,d){let f;const m=ru(n.visibleWrites,t),b=Id(m,kn());if(null!=b)f=b;else{if(null==e)return[];f=_f(m,e)}if(f=f.withIndex(d),f.isEmpty()||f.isLeafNode())return[];{const x=[],I=d.getCompare(),V=l?f.getReverseIteratorFrom(r,d):f.getIteratorFrom(r,d);let G=V.getNext();for(;G&&x.length<i;)0!==I(G,r)&&x.push(G),G=V.getNext();return x}}(n.writeTree,n.treePath,t,e,r,i,l)}(this.writes_,i,e,1,r,t);return 0===l.length?null:l[0]}}function qb(n,t,e,r,i,l){const d=t.eventCache;if(null!=yf(r,e))return t;{let f,m;if(yn(e))if((0,Y.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const b=Kl(t),I=Nd(r,b instanceof tn?b:tn.EMPTY_NODE);f=n.filter.updateFullNode(t.eventCache.getNode(),I,l)}else{const b=Hb(r,Kl(t));f=n.filter.updateFullNode(t.eventCache.getNode(),b,l)}else{const b=_n(e);if(".priority"===b){(0,Y.hu)(1===Jc(e),"Can't have a priority with additional path components");const x=d.getNode();m=t.serverCache.getNode();const I=Nx(r,e,x,m);f=null!=I?n.filter.updatePriority(x,I):d.getNode()}else{const x=Bn(e);let I;if(d.isCompleteForChild(b)){m=t.serverCache.getNode();const V=Nx(r,e,d.getNode(),m);I=null!=V?d.getNode().getImmediateChild(b).updateChild(x,V):d.getNode().getImmediateChild(b)}else I=jb(r,b,t.serverCache);f=null!=I?n.filter.updateChild(d.getNode(),b,I,x,i,l):d.getNode()}}return o_(t,f,d.isFullyInitialized()||yn(e),n.filter.filtersNodes())}}function vf(n,t,e,r,i,l,d,f){const m=t.serverCache;let b;const x=d?n.filter:n.filter.getIndexedFilter();if(yn(e))b=x.updateFullNode(m.getNode(),r,null);else if(x.filtersNodes()&&!m.isFiltered()){const G=m.getNode().updateChild(e,r);b=x.updateFullNode(m.getNode(),G,null)}else{const G=_n(e);if(!m.isCompleteForPath(e)&&Jc(e)>1)return t;const ne=Bn(e),Ue=m.getNode().getImmediateChild(G).updateChild(ne,r);b=".priority"===G?x.updatePriority(m.getNode(),Ue):x.updateChild(m.getNode(),G,Ue,ne,Rx,null)}const I=xx(t,b,m.isFullyInitialized()||yn(e),x.filtersNodes());return qb(n,I,e,i,new Dg(i,I,l),f)}function Tg(n,t,e,r,i,l,d){const f=t.eventCache;let m,b;const x=new Dg(i,t,l);if(yn(e))b=n.filter.updateFullNode(t.eventCache.getNode(),r,d),m=o_(t,b,!0,n.filter.filtersNodes());else{const I=_n(e);if(".priority"===I)b=n.filter.updatePriority(t.eventCache.getNode(),r),m=o_(t,b,f.isFullyInitialized(),f.isFiltered());else{const V=Bn(e),G=f.getNode().getImmediateChild(I);let ne;if(yn(V))ne=r;else{const we=x.getCompleteChild(I);ne=null!=we?".priority"===_b(V)&&we.getChild(ax(V)).isEmpty()?we:we.updateChild(V,r):tn.EMPTY_NODE}m=G.equals(ne)?t:o_(t,n.filter.updateChild(f.getNode(),I,ne,V,x,d),f.isFullyInitialized(),n.filter.filtersNodes())}}return m}function Zb(n,t){return n.eventCache.isCompleteForChild(t)}function zb(n,t,e){return e.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function h_(n,t,e,r,i,l,d,f){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let b,m=t;b=yn(e)?r:new wr(null).setTree(e,r);const x=t.serverCache.getNode();return b.children.inorderTraversal((I,V)=>{if(x.hasChild(I)){const ne=zb(0,t.serverCache.getNode().getImmediateChild(I),V);m=vf(n,m,new An(I),ne,i,l,d,f)}}),b.children.inorderTraversal((I,V)=>{const G=!t.serverCache.isCompleteForChild(I)&&void 0===V.value;if(!x.hasChild(I)&&!G){const we=zb(0,t.serverCache.getNode().getImmediateChild(I),V);m=vf(n,m,new An(I),we,i,l,d,f)}}),m}class Ox{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new cf(r.getIndex()),l=function(n){return n.loadsAllData()?new cf(n.getIndex()):n.hasLimit()?new Nb(n):new ts(n)}(r);this.processor_=function(n){return{filter:n}}(l);const d=e.serverCache,f=e.eventCache,m=i.updateFullNode(tn.EMPTY_NODE,d.getNode(),null),b=l.updateFullNode(tn.EMPTY_NODE,f.getNode(),null),x=new Td(m,d.isFullyInitialized(),i.filtersNodes()),I=new Td(b,f.isFullyInitialized(),l.filtersNodes());this.viewCache_=s_(I,x),this.eventGenerator_=new tN(this.query_)}get query(){return this.query_}}function f_(n,t){const e=Kl(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!yn(t)&&!e.getImmediateChild(_n(t)).isEmpty())?e.getChild(t):null}function Qb(n){return 0===n.eventRegistrations_.length}function Jb(n,t,e){const r=[];if(e){(0,Y.hu)(null==t,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(l=>{const d=l.createCancelEvent(e,i);d&&r.push(d)})}if(t){let i=[];for(let l=0;l<n.eventRegistrations_.length;++l){const d=n.eventRegistrations_[l];if(d.matches(t)){if(t.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(l+1));break}}else i.push(d)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function Xb(n,t,e,r){t.type===Mo.MERGE&&null!==t.source.queryId&&((0,Y.hu)(Kl(n.viewCache_),"We should always have a full cache before handling merges"),(0,Y.hu)(a_(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,l=function(n,t,e,r,i){const l=new Mx;let d,f;if(e.type===Mo.OVERWRITE){const b=e;b.source.fromUser?d=Tg(n,t,b.path,b.snap,r,i,l):((0,Y.hu)(b.source.fromServer,"Unknown source."),f=b.source.tagged||t.serverCache.isFiltered()&&!yn(b.path),d=vf(n,t,b.path,b.snap,r,i,f,l))}else if(e.type===Mo.MERGE){const b=e;b.source.fromUser?d=function(n,t,e,r,i,l,d){let f=t;return r.foreach((m,b)=>{const x=kr(e,m);Zb(t,_n(x))&&(f=Tg(n,f,x,b,i,l,d))}),r.foreach((m,b)=>{const x=kr(e,m);Zb(t,_n(x))||(f=Tg(n,f,x,b,i,l,d))}),f}(n,t,b.path,b.children,r,i,l):((0,Y.hu)(b.source.fromServer,"Unknown source."),f=b.source.tagged||t.serverCache.isFiltered(),d=h_(n,t,b.path,b.children,r,i,f,l))}else if(e.type===Mo.ACK_USER_WRITE){const b=e;d=b.revert?function(n,t,e,r,i,l){let d;if(null!=yf(r,e))return t;{const f=new Dg(r,t,i),m=t.eventCache.getNode();let b;if(yn(e)||".priority"===_n(e)){let x;if(t.serverCache.isFullyInitialized())x=Hb(r,Kl(t));else{const I=t.serverCache.getNode();(0,Y.hu)(I instanceof tn,"serverChildren would be complete if leaf node"),x=Nd(r,I)}x=x,b=n.filter.updateFullNode(m,x,l)}else{const x=_n(e);let I=jb(r,x,t.serverCache);null==I&&t.serverCache.isCompleteForChild(x)&&(I=m.getImmediateChild(x)),b=null!=I?n.filter.updateChild(m,x,I,Bn(e),f,l):t.eventCache.getNode().hasChild(x)?n.filter.updateChild(m,x,tn.EMPTY_NODE,Bn(e),f,l):m,b.isEmpty()&&t.serverCache.isFullyInitialized()&&(d=Hb(r,Kl(t)),d.isLeafNode()&&(b=n.filter.updateFullNode(b,d,l)))}return d=t.serverCache.isFullyInitialized()||null!=yf(r,kn()),o_(t,b,d,n.filter.filtersNodes())}}(n,t,b.path,r,i,l):function(n,t,e,r,i,l,d){if(null!=yf(i,e))return t;const f=t.serverCache.isFiltered(),m=t.serverCache;if(null!=r.value){if(yn(e)&&m.isFullyInitialized()||m.isCompleteForPath(e))return vf(n,t,e,m.getNode().getChild(e),i,l,f,d);if(yn(e)){let b=new wr(null);return m.getNode().forEachChild(Xa,(x,I)=>{b=b.set(new An(x),I)}),h_(n,t,e,b,i,l,f,d)}return t}{let b=new wr(null);return r.foreach((x,I)=>{const V=kr(e,x);m.isCompleteForPath(V)&&(b=b.set(x,m.getNode().getChild(V)))}),h_(n,t,e,b,i,l,f,d)}}(n,t,b.path,b.affectedTree,r,i,l)}else{if(e.type!==Mo.LISTEN_COMPLETE)throw(0,Y.g5)("Unknown operation type: "+e.type);d=function(n,t,e,r,i){const l=t.serverCache;return qb(n,xx(t,l.getNode(),l.isFullyInitialized()||yn(e),l.isFiltered()),e,r,Rx,i)}(n,t,e.path,r,l)}const m=l.getChanges();return function(n,t,e){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),l=a_(n);(e.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(l)||!r.getNode().getPriority().equals(l.getPriority()))&&e.push(X0(a_(t)))}}(t,d,m),{viewCache:d,changes:m}}(n.processor_,i,t,e,r);return function(n,t){(0,Y.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,Y.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,l.viewCache),(0,Y.hu)(l.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=l.viewCache,e1(n,l.changes,l.viewCache.eventCache.getNode(),null)}function e1(n,t,e,r){return function(n,t,e,r){const i=[],l=[];return t.forEach(d=>{"child_changed"===d.type&&n.index_.indexedValueChanged(d.oldSnap,d.snapshotNode)&&l.push(function(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(d.childName,d.snapshotNode))}),i_(n,i,"child_removed",t,r,e),i_(n,i,"child_added",t,r,e),i_(n,i,"child_moved",l,r,e),i_(n,i,"child_changed",t,r,e),i_(n,i,"value",t,r,e),i}(n.eventGenerator_,t,e,r?[r]:n.eventRegistrations_)}let Ig,Jl;class t1{constructor(){this.views=new Map}}function p_(n,t,e,r){const i=t.source.queryId;if(null!==i){const l=n.views.get(i);return(0,Y.hu)(null!=l,"SyncTree gave us an op for an invalid query."),Xb(l,t,e,r)}{let l=[];for(const d of n.views.values())l=l.concat(Xb(d,t,e,r));return l}}function Bx(n,t,e,r,i){const d=n.views.get(t._queryIdentifier);if(!d){let f=Hb(e,i?r:null),m=!1;f?m=!0:r instanceof tn?(f=Nd(e,r),m=!1):(f=tn.EMPTY_NODE,m=!1);const b=s_(new Td(f,m,!1),new Td(r,i,!1));return new Ox(t,b)}return d}function Hx(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function iu(n,t){let e=null;for(const r of n.views.values())e=e||f_(r,t);return e}function n1(n,t){return t._queryParams.loadsAllData()?Sg(n):n.views.get(t._queryIdentifier)}function $x(n,t){return null!=n1(n,t)}function Ql(n){return null!=Sg(n)}function Sg(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let jx=1;class Gx{constructor(t){this.listenProvider_=t,this.syncPointTree_=new wr(null),this.pendingWriteTree_={visibleWrites:tl.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function g_(n,t,e,r,i){return function(n,t,e,r,i){(0,Y.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:t,snap:e,writeId:r,visible:i}),i&&(n.visibleWrites=l_(n.visibleWrites,t,e)),n.lastWriteId=r}(n.pendingWriteTree_,t,e,r,i),i?bf(n,new Dd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function nl(n,t,e=!1){const r=function(n,t){for(let e=0;e<n.allWrites.length;e++){const r=n.allWrites[e];if(r.writeId===t)return r}return null}(n.pendingWriteTree_,t);if(function(n,t){const e=n.allWrites.findIndex(f=>f.writeId===t);(0,Y.hu)(e>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[e];n.allWrites.splice(e,1);let i=r.visible,l=!1,d=n.allWrites.length-1;for(;i&&d>=0;){const f=n.allWrites[d];f.visible&&(d>=e&&oN(f,r.path)?i=!1:oa(r.path,f.path)&&(l=!0)),d--}return!!i&&(l?(function(n){n.visibleWrites=Vb(n.allWrites,lN,kn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=Fb(n.visibleWrites,r.path):hi(r.children,m=>{n.visibleWrites=Fb(n.visibleWrites,kr(r.path,m))}),!0))}(n.pendingWriteTree_,t)){let l=new wr(null);return null!=r.snap?l=l.set(kn(),!0):hi(r.children,d=>{l=l.set(new An(d),!0)}),bf(n,new r_(r.path,l,e))}return[]}function Md(n,t,e){return bf(n,new Dd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function Ro(n,t,e,r){const i=t._path,l=n.syncPointTree_.get(i);let d=[];if(l&&("default"===t._queryIdentifier||$x(l,t))){const f=function(n,t,e,r){const i=t._queryIdentifier,l=[];let d=[];const f=Ql(n);if("default"===i)for(const[m,b]of n.views.entries())d=d.concat(Jb(b,e,r)),Qb(b)&&(n.views.delete(m),b.query._queryParams.loadsAllData()||l.push(b.query));else{const m=n.views.get(i);m&&(d=d.concat(Jb(m,e,r)),Qb(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||l.push(m.query)))}return f&&!Ql(n)&&l.push(new((0,Y.hu)(Ig,"Reference.ts has not been loaded"),Ig)(t._repo,t._path)),{removed:l,events:d}}(l,t,e,r);(function(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const m=f.removed;d=f.events;const b=-1!==m.findIndex(I=>I._queryParams.loadsAllData()),x=n.syncPointTree_.findOnPath(i,(I,V)=>Ql(V));if(b&&!x){const I=n.syncPointTree_.subtree(i);if(!I.isEmpty()){const V=function(n){return n.fold((t,e,r)=>{if(e&&Ql(e))return[Sg(e)];{let i=[];return e&&(i=Hx(e)),hi(r,(l,d)=>{i=i.concat(d)}),i}})}(I);for(let G=0;G<V.length;++G){const ne=V[G],we=ne.query,Ue=m_(n,ne);n.listenProvider_.startListening(ou(we),su(n,we),Ue.hashFn,Ue.onComplete)}}}if(!x&&m.length>0&&!r)if(b){const I=null;n.listenProvider_.stopListening(ou(t),I)}else m.forEach(I=>{const V=n.queryToTagMap.get(__(I));n.listenProvider_.stopListening(ou(I),V)});!function(n,t){for(let e=0;e<t.length;++e){const r=t[e];if(!r._queryParams.loadsAllData()){const i=__(r),l=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(l)}}}(n,m)}return d}function r1(n,t,e){const r=t._path;let i=null,l=!1;n.syncPointTree_.foreachOnPath(r,(I,V)=>{const G=es(I,r);i=i||iu(V,G),l=l||Ql(V)});let f,d=n.syncPointTree_.get(r);d?(l=l||Ql(d),i=i||iu(d,kn())):(d=new t1,n.syncPointTree_=n.syncPointTree_.set(r,d)),null!=i?f=!0:(f=!1,i=tn.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((V,G)=>{const ne=iu(G,kn());ne&&(i=i.updateImmediateChild(V,ne))}));const m=$x(d,t);if(!m&&!t._queryParams.loadsAllData()){const I=__(t);(0,Y.hu)(!n.queryToTagMap.has(I),"View does not exist, but we have a tag");const V=jx++;n.queryToTagMap.set(I,V),n.tagToQueryMap.set(V,I)}let x=function(n,t,e,r,i,l){const d=Bx(n,t,r,i,l);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,d),function(n,t){n.eventRegistrations_.push(t)}(d,e),function(n,t){const e=n.viewCache_.eventCache,r=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(br,(l,d)=>{r.push(ws(l,d))}),e.isFullyInitialized()&&r.push(X0(e.getNode())),e1(n,r,e.getNode(),t)}(d,e)}(d,t,e,Ad(n.pendingWriteTree_,r),i,f);if(!m&&!l){const I=n1(d,t);x=x.concat(function(n,t,e){const r=t._path,i=su(n,t),l=m_(n,e),d=n.listenProvider_.startListening(ou(t),i,l.hashFn,l.onComplete),f=n.syncPointTree_.subtree(r);if(i)(0,Y.hu)(!Ql(f.value),"If we're adding a query, it shouldn't be shadowed");else{const m=f.fold((b,x,I)=>{if(!yn(b)&&x&&Ql(x))return[Sg(x).query];{let V=[];return x&&(V=V.concat(Hx(x).map(G=>G.query))),hi(I,(G,ne)=>{V=V.concat(ne)}),V}});for(let b=0;b<m.length;++b){const x=m[b];n.listenProvider_.stopListening(ou(x),su(n,x))}}return d}(n,t,I))}return x}function Ag(n,t,e){const i=n.pendingWriteTree_,l=n.syncPointTree_.findOnPath(t,(d,f)=>{const b=iu(f,es(d,t));if(b)return b});return Ix(i,t,l,e,!0)}function bf(n,t){return qx(t,n.syncPointTree_,null,Ad(n.pendingWriteTree_,kn()))}function qx(n,t,e,r){if(yn(n.path))return Zx(n,t,e,r);{const i=t.get(kn());null==e&&null!=i&&(e=iu(i,kn()));let l=[];const d=_n(n.path),f=n.operationForChild(d),m=t.children.get(d);if(m&&f){const b=e?e.getImmediateChild(d):null,x=u_(r,d);l=l.concat(qx(f,m,b,x))}return i&&(l=l.concat(p_(i,n,r,e))),l}}function Zx(n,t,e,r){const i=t.get(kn());null==e&&null!=i&&(e=iu(i,kn()));let l=[];return t.children.inorderTraversal((d,f)=>{const m=e?e.getImmediateChild(d):null,b=u_(r,d),x=n.operationForChild(d);x&&(l=l.concat(Zx(x,f,m,b)))}),i&&(l=l.concat(p_(i,n,r,e))),l}function m_(n,t){const e=t.query,r=su(n,e);return{hashFn:()=>(function(n){return n.viewCache_.serverCache.getNode()}(t)||tn.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function(n,t,e){const r=y_(n,e);if(r){const i=i1(r),l=i.path,d=i.queryId,f=es(l,t);return v_(n,l,new gf(n_(d),f))}return[]}(n,e._path,r):function(n,t){return bf(n,new gf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const l=function(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const r=new Error(n+" at "+t._path.toString()+": "+e);return r.code=n.toUpperCase(),r}(i,e);return Ro(n,e,null,l)}}}}function su(n,t){const e=__(t);return n.queryToTagMap.get(e)}function __(n){return n._path.toString()+"$"+n._queryIdentifier}function y_(n,t){return n.tagToQueryMap.get(t)}function i1(n){const t=n.indexOf("$");return(0,Y.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new An(n.substr(0,t))}}function v_(n,t,e){const r=n.syncPointTree_.get(t);return(0,Y.hu)(r,"Missing sync point for query tag that we're tracking"),p_(r,e,Ad(n.pendingWriteTree_,t),null)}function ou(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new((0,Y.hu)(Jl,"Reference.ts has not been loaded"),Jl)(n._repo,n._path):n}class Ng{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new Ng(e)}node(){return this.node_}}class wf{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=kr(this.path_,t);return new wf(this.syncTree_,e)}node(){return Ag(this.syncTree_,this.path_)}}const o1=function(n,t,e){return n&&"object"==typeof n?((0,Y.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Qx(n[".sv"],t,e):"object"==typeof n[".sv"]?Jx(n[".sv"],t):void(0,Y.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Qx=function(n,t,e){switch(n){case"timestamp":return e.timestamp;default:(0,Y.hu)(!1,"Unexpected server value: "+n)}},Jx=function(n,t,e){n.hasOwnProperty("increment")||(0,Y.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,Y.hu)(!1,"Unexpected increment value: "+r);const i=t.node();if((0,Y.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const d=i.getValue();return"number"!=typeof d?r:d+r},a1=function(n,t,e,r){return w_(t,new wf(e,n),r)},b_=function(n,t,e){return w_(n,new Ng(t),e)};function w_(n,t,e){const r=n.getPriority().val(),i=o1(r,t.getImmediateChild(".priority"),e);let l;if(n.isLeafNode()){const d=n,f=o1(d.getValue(),t,e);return f!==d.getValue()||i!==d.getPriority().val()?new wd(f,Pr(i)):n}{const d=n;return l=d,i!==d.getPriority().val()&&(l=l.updatePriority(new wd(i))),d.forEachChild(br,(f,m)=>{const b=w_(m,t.getImmediateChild(f),e);b!==m&&(l=l.updateImmediateChild(f,b))}),l}}class C_{constructor(t="",e=null,r={children:{},childCount:0}){this.name=t,this.parent=e,this.node=r}}function E_(n,t){let e=t instanceof An?t:new An(t),r=n,i=_n(e);for(;null!==i;){const l=(0,Y.DV)(r.node.children,i)||{children:{},childCount:0};r=new C_(i,r,l),e=Bn(e),i=_n(e)}return r}function Rd(n){return n.node.value}function l1(n,t){n.node.value=t,u1(n)}function c1(n){return n.node.childCount>0}function x_(n,t){hi(n.node.children,(e,r)=>{t(new C_(e,n,r))})}function Xx(n,t,e,r){e&&!r&&t(n),x_(n,i=>{Xx(i,t,!0,r)}),e&&r&&t(n)}function Mg(n){return new An(null===n.parent?n.name:Mg(n.parent)+"/"+n.name)}function u1(n){null!==n.parent&&function(n,t,e){const r=function(n){return void 0===Rd(n)&&!c1(n)}(e),i=(0,Y.r3)(n.node.children,t);r&&i?(delete n.node.children[t],n.node.childCount--,u1(n)):!r&&!i&&(n.node.children[t]=e.node,n.node.childCount++,u1(n))}(n.parent,n.name,n)}const EN=/[\[\].#$\/\u0000-\u001F\u007F]/,xN=/[\[\].#$\u0000-\u001F\u007F]/,d1=10485760,D_=function(n){return"string"==typeof n&&0!==n.length&&!EN.test(n)},eD=function(n){return"string"==typeof n&&0!==n.length&&!xN.test(n)},Rg=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Jh(n)||n&&"object"==typeof n&&(0,Y.r3)(n,".sv")},da=function(n,t,e,r){r&&void 0===t||Cf((0,Y.gK)(n,"value"),t,e)},Cf=function(n,t,e){const r=e instanceof An?new Wl(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+bd(r));if("function"==typeof t)throw new Error(n+"contains a function "+bd(r)+" with contents = "+t.toString());if(Jh(t))throw new Error(n+"contains "+t.toString()+" "+bd(r));if("string"==typeof t&&t.length>d1/3&&(0,Y.ug)(t)>d1)throw new Error(n+"contains a string greater than "+d1+" utf8 bytes "+bd(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let i=!1,l=!1;if(hi(t,(d,f)=>{if(".value"===d)i=!0;else if(".priority"!==d&&".sv"!==d&&(l=!0,!D_(d)))throw new Error(n+" contains an invalid key ("+d+") "+bd(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,Y.ug)(t),qA(n)})(r,d),Cf(n,f,r),function(n){const t=n.parts_.pop();n.byteLength_-=(0,Y.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&l)throw new Error(n+' contains ".value" child '+bd(r)+" in addition to actual children.")}},h1=function(n,t,e,r){if(r&&void 0===t)return;const i=(0,Y.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const l=[];hi(t,(d,f)=>{const m=new An(d);if(Cf(i,f,kr(e,m)),".priority"===_b(m)&&!Rg(f))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(m)}),function(n,t){let e,r;for(e=0;e<t.length;e++){r=t[e];const l=fg(r);for(let d=0;d<l.length;d++)if((".priority"!==l[d]||d!==l.length-1)&&!D_(l[d]))throw new Error(n+"contains an invalid key ("+l[d]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(Sr);let i=null;for(e=0;e<t.length;e++){if(r=t[e],null!==i&&oa(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,l)},T_=function(n,t,e){if(!e||void 0!==t){if(Jh(t))throw new Error((0,Y.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Rg(t))throw new Error((0,Y.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Ef=function(n,t,e,r){if(!(r&&void 0===e||D_(e)))throw new Error((0,Y.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},xf=function(n,t,e,r){if(!(r&&void 0===e||eD(e)))throw new Error((0,Y.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},eo=function(n,t){if(".info"===_n(t))throw new Error(n+" failed = Can't modify data under /.info/")},I_=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!D_(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),eD(n)}(e))throw new Error((0,Y.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class rD{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function il(n,t){let e=null;for(let r=0;r<t.length;r++){const i=t[r],l=i.getPath();null!==e&&!pg(l,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:l}),e.events.push(i)}e&&n.eventLists_.push(e)}function f1(n,t,e){il(n,e),kd(n,r=>pg(r,t))}function ko(n,t,e){il(n,e),kd(n,r=>oa(r,t)||oa(t,r))}function kd(n,t){n.recursionDepth_++;let e=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(t(i.path)?(x2(n.eventLists_[r]),n.eventLists_[r]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function x2(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const r=e.getEventRunner();yd&&bi("event: "+e.toString()),tf(r)}}}const S_="repo_interrupt";class iD{constructor(t,e,r,i){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new rD,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Eg(),this.transactionQueueTree_=new C_,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function TN(n){const e=n.infoData_.getNode(new An(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function At(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:TN(n)})}function oD(n,t,e,r,i){n.dataUpdateCount++;const l=new An(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let d=[];if(i)if(r){const m=(0,Y.UI)(e,b=>Pr(b));d=function(n,t,e,r){const i=y_(n,r);if(i){const l=i1(i),d=l.path,f=l.queryId,m=es(d,t),b=wr.fromObject(e);return v_(n,d,new mf(n_(f),m,b))}return[]}(n.serverSyncTree_,l,m,i)}else{const m=Pr(e);d=function(n,t,e,r){const i=y_(n,r);if(null!=i){const l=i1(i),d=l.path,f=l.queryId,m=es(d,t);return v_(n,d,new Dd(n_(f),m,e))}return[]}(n.serverSyncTree_,l,m,i)}else if(r){const m=(0,Y.UI)(e,b=>Pr(b));d=function(n,t,e){const r=wr.fromObject(e);return bf(n,new mf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,l,m)}else{const m=Pr(e);d=Md(n.serverSyncTree_,l,m)}let f=l;d.length>0&&(f=Xl(n,l)),ko(n.eventQueue_,f,d)}function aD(n,t){Df(n,"connected",t),!1===t&&function(n){If(n,"onDisconnectEvents");const t=At(n),e=Eg();t_(n.onDisconnect_,kn(),(i,l)=>{const d=a1(i,l,n.serverSyncTree_,t);xd(e,i,d)});let r=[];t_(e,kn(),(i,l)=>{r=r.concat(Md(n.serverSyncTree_,i,l));const d=Pd(n,i);Xl(n,d)}),n.onDisconnect_=Eg(),ko(n.eventQueue_,kn(),r)}(n)}function Df(n,t,e){const r=new An("/.info/"+t),i=Pr(e);n.infoData_.updateSnapshot(r,i);const l=Md(n.infoSyncTree_,r,i);ko(n.eventQueue_,r,l)}function A_(n){return n.nextWriteId_++}function Tf(n,t,e,r,i){If(n,"set",{path:t.toString(),value:e,priority:r});const l=At(n),d=Pr(e,r),f=Ag(n.serverSyncTree_,t),m=b_(d,f,l),b=A_(n),x=g_(n.serverSyncTree_,t,m,b,!0);il(n.eventQueue_,x),n.server_.put(t.toString(),d.val(!0),(V,G)=>{const ne="ok"===V;ne||di("set at "+t+" failed: "+V);const we=nl(n.serverSyncTree_,b,!ne);ko(n.eventQueue_,t,we),au(0,i,V,G)});const I=Pd(n,t);Xl(n,I),ko(n.eventQueue_,I,[])}function lD(n,t,e){n.server_.onDisconnectCancel(t.toString(),(r,i)=>{"ok"===r&&e_(n.onDisconnect_,t),au(0,e,r,i)})}function M_(n,t,e,r){const i=Pr(e);n.server_.onDisconnectPut(t.toString(),i.val(!0),(l,d)=>{"ok"===l&&xd(n.onDisconnect_,t,i),au(0,r,l,d)})}function R_(n,t,e){let r;r=".info"===_n(t._path)?Ro(n.infoSyncTree_,t,e):Ro(n.serverSyncTree_,t,e),f1(n.eventQueue_,t._path,r)}function p1(n){n.persistentConnection_&&n.persistentConnection_.interrupt(S_)}function If(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),bi(e,...t)}function au(n,t,e,r){t&&tf(()=>{if("ok"===e)t(null);else{const i=(e||"error").toUpperCase();let l=i;r&&(l+=": "+r);const d=new Error(l);d.code=i,t(d)}})}function g1(n,t,e){return Ag(n.serverSyncTree_,t,e)||tn.EMPTY_NODE}function k_(n,t=n.transactionQueueTree_){if(t||lu(n,t),Rd(t)){const e=_1(n,t);(0,Y.hu)(e.length>0,"Sending zero length transaction queue"),e.every(i=>0===i.status)&&function(n,t,e){const r=e.map(b=>b.currentWriteId),i=g1(n,t,r);let l=i;const d=i.hash();for(let b=0;b<e.length;b++){const x=e[b];(0,Y.hu)(0===x.status,"tryToSendTransactionQueue_: items in queue should all be run."),x.status=1,x.retryCount++;const I=es(t,x.path);l=l.updateChild(I,x.currentOutputSnapshotRaw)}const f=l.val(!0),m=t;n.server_.put(m.toString(),f,b=>{If(n,"transaction put response",{path:m.toString(),status:b});let x=[];if("ok"===b){const I=[];for(let V=0;V<e.length;V++)e[V].status=2,x=x.concat(nl(n.serverSyncTree_,e[V].currentWriteId)),e[V].onComplete&&I.push(()=>e[V].onComplete(null,!0,e[V].currentOutputSnapshotResolved)),e[V].unwatcher();lu(n,E_(n.transactionQueueTree_,t)),k_(n,n.transactionQueueTree_),ko(n.eventQueue_,t,x);for(let V=0;V<I.length;V++)tf(I[V])}else{if("datastale"===b)for(let I=0;I<e.length;I++)e[I].status=3===e[I].status?4:0;else{di("transaction at "+m.toString()+" failed: "+b);for(let I=0;I<e.length;I++)e[I].status=4,e[I].abortReason=b}Xl(n,t)}},d)}(n,Mg(t),e)}else c1(t)&&x_(t,e=>{k_(n,e)})}function Xl(n,t){const e=m1(n,t),r=Mg(e);return function(n,t,e){if(0===t.length)return;const r=[];let i=[];const d=t.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<t.length;f++){const m=t[f],b=es(e,m.path);let I,x=!1;if((0,Y.hu)(null!==b,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)x=!0,I=m.abortReason,i=i.concat(nl(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)x=!0,I="maxretry",i=i.concat(nl(n.serverSyncTree_,m.currentWriteId,!0));else{const V=g1(n,m.path,d);m.currentInputSnapshot=V;const G=t[f].update(V.val());if(void 0!==G){Cf("transaction failed: Data returned ",G,m.path);let ne=Pr(G);"object"==typeof G&&null!=G&&(0,Y.r3)(G,".priority")||(ne=ne.updatePriority(V.getPriority()));const Ue=m.currentWriteId,tt=At(n),ot=b_(ne,V,tt);m.currentOutputSnapshotRaw=ne,m.currentOutputSnapshotResolved=ot,m.currentWriteId=A_(n),d.splice(d.indexOf(Ue),1),i=i.concat(g_(n.serverSyncTree_,m.path,ot,m.currentWriteId,m.applyLocally)),i=i.concat(nl(n.serverSyncTree_,Ue,!0))}else x=!0,I="nodata",i=i.concat(nl(n.serverSyncTree_,m.currentWriteId,!0))}ko(n.eventQueue_,e,i),i=[],x&&(t[f].status=2,setTimeout(t[f].unwatcher,Math.floor(0)),t[f].onComplete&&r.push("nodata"===I?()=>t[f].onComplete(null,!1,t[f].currentInputSnapshot):()=>t[f].onComplete(new Error(I),!1,null)))}lu(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)tf(r[f]);k_(n,n.transactionQueueTree_)}(n,_1(n,e),r),r}function m1(n,t){let e,r=n.transactionQueueTree_;for(e=_n(t);null!==e&&void 0===Rd(r);)r=E_(r,e),e=_n(t=Bn(t));return r}function _1(n,t){const e=[];return hD(n,t,e),e.sort((r,i)=>r.order-i.order),e}function hD(n,t,e){const r=Rd(t);if(r)for(let i=0;i<r.length;i++)e.push(r[i]);x_(t,i=>{hD(n,i,e)})}function lu(n,t){const e=Rd(t);if(e){let r=0;for(let i=0;i<e.length;i++)2!==e[i].status&&(e[r]=e[i],r++);e.length=r,l1(t,e.length>0?e:void 0)}x_(t,r=>{lu(n,r)})}function Pd(n,t){const e=Mg(m1(n,t)),r=E_(n.transactionQueueTree_,t);return function(n,t,e){let r=n.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,i=>{y1(n,i)}),y1(n,r),Xx(r,i=>{y1(n,i)}),e}function y1(n,t){const e=Rd(t);if(e){const r=[];let i=[],l=-1;for(let d=0;d<e.length;d++)3===e[d].status||(1===e[d].status?((0,Y.hu)(l===d-1,"All SENT items should be at beginning of queue."),l=d,e[d].status=3,e[d].abortReason="set"):((0,Y.hu)(0===e[d].status,"Unexpected transaction status in abort"),e[d].unwatcher(),i=i.concat(nl(n.serverSyncTree_,e[d].currentWriteId,!0)),e[d].onComplete&&r.push(e[d].onComplete.bind(null,new Error("set"),!1,null))));-1===l?l1(t,void 0):e.length=l+1,ko(n.eventQueue_,Mg(t),i);for(let d=0;d<r.length;d++)tf(r[d])}}const P_=function(n,t){const e=fD(n),r=e.namespace;return"firebase.com"===e.domain&&Ja(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==e.domain&&Ja("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&di("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new B0(e.host,e.secure,r,"ws"===e.scheme||"wss"===e.scheme,t,"",r!==e.subdomain),path:new An(e.pathString)}},fD=function(n){let t="",e="",r="",i="",l="",d=!0,f="https",m=443;if("string"==typeof n){let b=n.indexOf("//");b>=0&&(f=n.substring(0,b-1),n=n.substring(b+2));let x=n.indexOf("/");-1===x&&(x=n.length);let I=n.indexOf("?");-1===I&&(I=n.length),t=n.substring(0,Math.min(x,I)),x<I&&(i=function(n){let t="";const e=n.split("/");for(let r=0;r<e.length;r++)if(e[r].length>0){let i=e[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(l){}t+="/"+i}return t}(n.substring(x,I)));const V=function(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const r=e.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):di(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,I)));b=t.indexOf(":"),b>=0?(d="https"===f||"wss"===f,m=parseInt(t.substring(b+1),10)):b=t.length;const G=t.slice(0,b);if("localhost"===G.toLowerCase())e="localhost";else if(G.split(".").length<=2)e=G;else{const ne=t.indexOf(".");r=t.substring(0,ne).toLowerCase(),e=t.substring(ne+1),l=r}"ns"in V&&(l=V.ns)}return{host:t,port:m,domain:e,subdomain:r,secure:d,scheme:f,pathString:i,namespace:l}};class v1{constructor(t,e,r,i){this.eventType=t,this.eventRegistration=e,this.snapshot=r,this.prevName=i}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,Y.Pz)(this.snapshot.exportVal())}}class pD{constructor(t,e,r){this.eventRegistration=t,this.error=e,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class b1{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,Y.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class gD{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new Y.BH;return lD(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){eo("OnDisconnect.remove",this._path);const t=new Y.BH;return M_(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){eo("OnDisconnect.set",this._path),da("OnDisconnect.set",t,this._path,!1);const e=new Y.BH;return M_(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){eo("OnDisconnect.setWithPriority",this._path),da("OnDisconnect.setWithPriority",t,this._path,!1),T_("OnDisconnect.setWithPriority",e,!1);const r=new Y.BH;return function(n,t,e,r,i){const l=Pr(e,r);n.server_.onDisconnectPut(t.toString(),l.val(!0),(d,f)=>{"ok"===d&&xd(n.onDisconnect_,t,l),au(0,i,d,f)})}(this._repo,this._path,t,e,r.wrapCallback(()=>{})),r.promise}update(t){eo("OnDisconnect.update",this._path),h1("OnDisconnect.update",t,this._path,!1);const e=new Y.BH;return function(n,t,e,r){if((0,Y.xb)(e))return bi("onDisconnect().update() called with empty data.  Don't do anything."),void au(0,r,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(i,l)=>{"ok"===i&&hi(e,(d,f)=>{const m=Pr(f);xd(n.onDisconnect_,kr(t,d),m)}),au(0,r,i,l)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class Bs{constructor(t,e,r,i){this._repo=t,this._path=e,this._queryParams=r,this._orderByCalled=i}get key(){return yn(this._path)?null:_b(this._path)}get ref(){return new ha(this._repo,this._path)}get _queryIdentifier(){const t=Rb(this._queryParams),e=cg(t);return"{}"===e?"default":e}get _queryObject(){return Rb(this._queryParams)}isEqual(t){if(!((t=(0,Y.m9)(t))instanceof Bs))return!1;const e=this._repo===t._repo,r=pg(this._path,t._path);return e&&r&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function w1(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Od(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===Xa){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Js)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==bs)throw new Error(r);if("string"!=typeof e)throw new Error(i)}}else if(n.getIndex()===br){if(null!=t&&!Rg(t)||null!=e&&!Rg(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,Y.hu)(n.getIndex()instanceof Ib||n.getIndex()===Sb,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function C1(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ha extends Bs{constructor(t,e){super(t,e,new zl,!1)}get parent(){const t=ax(this._path);return null===t?null:new ha(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class cu{constructor(t,e,r){this._node=t,this.ref=e,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new An(t),r=Fd(this.ref,t);return new cu(this._node.getChild(e),r,br)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>t(new cu(i,Fd(this.ref,r),br)))}hasChild(t){const e=new An(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Pg(n,t){return(n=(0,Y.m9)(n))._checkNotDeleted("ref"),void 0!==t?Fd(n._root,t):n._root}function mD(n,t){(n=(0,Y.m9)(n))._checkNotDeleted("refFromURL");const e=P_(t,n._repo.repoInfo_.nodeAdmin);I_("refFromURL",e);const r=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Ja("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),Pg(n,e.path.toString())}function Fd(n,t){return null===_n((n=(0,Y.m9)(n))._path)?((e=t)&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),xf("child","path",e,!1)):xf("child","path",t,!1),new ha(n._repo,kr(n._path,t));var e}function E1(n,t){n=(0,Y.m9)(n),eo("set",n._path),da("set",t,n._path,!1);const e=new Y.BH;return Tf(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function LN(n,t){h1("update",t,n._path,!1);const e=new Y.BH;return function(n,t,e,r){If(n,"update",{path:t.toString(),value:e});let i=!0;const l=At(n),d={};if(hi(e,(f,m)=>{i=!1,d[f]=a1(kr(t,f),Pr(m),n.serverSyncTree_,l)}),i)bi("update() called with empty data.  Don't do anything."),au(0,r,"ok",void 0);else{const f=A_(n),m=function(n,t,e,r){!function(n,t,e,r){(0,Y.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:r,visible:!0}),n.visibleWrites=Ob(n.visibleWrites,t,e),n.lastWriteId=r}(n.pendingWriteTree_,t,e,r);const i=wr.fromObject(e);return bf(n,new mf({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,t,d,f);il(n.eventQueue_,m),n.server_.merge(t.toString(),e,(b,x)=>{const I="ok"===b;I||di("update at "+t+" failed: "+b);const V=nl(n.serverSyncTree_,f,!I),G=V.length>0?Xl(n,t):t;ko(n.eventQueue_,G,V),au(0,r,b,x)}),hi(e,b=>{const x=Pd(n,kr(t,b));Xl(n,x)}),ko(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function _D(n){return function(n,t){const e=function(n,t){const e=t._path;let r=null;n.syncPointTree_.foreachOnPath(e,(b,x)=>{const I=es(b,e);r=r||iu(x,I)});let i=n.syncPointTree_.get(e);i?r=r||iu(i,kn()):(i=new t1,n.syncPointTree_=n.syncPointTree_.set(e,i));const l=null!=r,d=l?new Td(r,!0,!1):null;return function(n){return a_(n.viewCache_)}(Bx(i,t,Ad(n.pendingWriteTree_,t._path),l?d.getNode():tn.EMPTY_NODE,l))}(n.serverSyncTree_,t);return null!=e?Promise.resolve(e):n.server_.get(t).then(r=>{const i=Pr(r).withIndex(t._queryParams.getIndex()),l=Md(n.serverSyncTree_,t._path,i);return f1(n.eventQueue_,t._path,l),Promise.resolve(i)},r=>(If(n,"get for query "+(0,Y.Pz)(t)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,Y.m9)(n))._repo,n).then(t=>new cu(t,new ha(n._repo,n._path),n._queryParams.getIndex()))}class O_{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const r=e._queryParams.getIndex();return new v1("value",this,new cu(t.snapshotNode,new ha(e._repo,e._path),r))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new pD(this,t,e):null}matches(t){return t instanceof O_&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class F_{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new pD(this,t,e):null}createEvent(t,e){(0,Y.hu)(null!=t.childName,"Child events should have a childName.");const r=Fd(new ha(e._repo,e._path),t.childName),i=e._queryParams.getIndex();return new v1(t.type,this,new cu(t.snapshotNode,r,i),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof F_&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function sl(n,t,e,r,i){let l;if("object"==typeof r&&(l=void 0,i=r),"function"==typeof r&&(l=r),i&&i.onlyOnce){const m=e,b=(x,I)=>{R_(n._repo,n,f),m(x,I)};b.userCallback=e.userCallback,b.context=e.context,e=b}const d=new b1(e,l||void 0),f="value"===t?new O_(d):new F_(t,d);return function(n,t,e){let r;r=".info"===_n(t._path)?r1(n.infoSyncTree_,t,e):r1(n.serverSyncTree_,t,e),f1(n.eventQueue_,t._path,r)}(n._repo,n,f),()=>R_(n._repo,n,f)}function x1(n,t,e,r){return sl(n,"value",t,e,r)}function D1(n,t,e,r){return sl(n,"child_added",t,e,r)}function yD(n,t,e,r){return sl(n,"child_changed",t,e,r)}function T1(n,t,e,r){return sl(n,"child_moved",t,e,r)}function vD(n,t,e,r){return sl(n,"child_removed",t,e,r)}function I1(n,t,e){let r=null;const i=e?new b1(e):null;"value"===t?r=new O_(i):t&&(r=new F_(t,i)),R_(n._repo,n,r)}class fa{}class L_ extends fa{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){da("endAt",this._value,t._path,!0);const e=nu(t._queryParams,this._value,this._key);if(C1(e),Od(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Bs(t._repo,t._path,e,t._orderByCalled)}}class bD extends fa{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){da("endBefore",this._value,t._path,!1);const e=function(n,t,e){let r,i;return n.index_===Xa?("string"==typeof t&&(t=_x(t)),i=nu(n,t,e)):(r=null==e?Js:_x(e),i=nu(n,t,r)),i.endBeforeSet_=!0,i}(t._queryParams,this._value,this._key);if(C1(e),Od(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Bs(t._repo,t._path,e,t._orderByCalled)}}class CD extends fa{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){da("startAt",this._value,t._path,!0);const e=tu(t._queryParams,this._value,this._key);if(C1(e),Od(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Bs(t._repo,t._path,e,t._orderByCalled)}}class UN extends fa{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){da("startAfter",this._value,t._path,!1);const e=function(n,t,e){let r;if(n.index_===Xa)"string"==typeof t&&(t=mx(t)),r=tu(n,t,e);else{let i;i=null==e?bs:mx(e),r=tu(n,t,i)}return r.startAfterSet_=!0,r}(t._queryParams,this._value,this._key);if(C1(e),Od(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Bs(t._repo,t._path,e,t._orderByCalled)}}class HN extends fa{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Bs(t._repo,t._path,function(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class $N extends fa{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Bs(t._repo,t._path,function(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class GN extends fa{constructor(t){super(),this._path=t}_apply(t){w1(t,"orderByChild");const e=new An(this._path);if(yn(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Ib(e),i=Yl(t._queryParams,r);return Od(i),new Bs(t._repo,t._path,i,!0)}}class qN extends fa{_apply(t){w1(t,"orderByKey");const e=Yl(t._queryParams,Xa);return Od(e),new Bs(t._repo,t._path,e,!0)}}class zN extends fa{_apply(t){w1(t,"orderByPriority");const e=Yl(t._queryParams,br);return Od(e),new Bs(t._repo,t._path,e,!0)}}class xD extends fa{_apply(t){w1(t,"orderByValue");const e=Yl(t._queryParams,Sb);return Od(e),new Bs(t._repo,t._path,e,!0)}}class TD extends fa{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(da("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new L_(this._value,this._key)._apply(new CD(this._value,this._key)._apply(t))}}function to(n,...t){let e=(0,Y.m9)(n);for(const r of t)e=r._apply(e);return e}(function(n){(0,Y.hu)(!Ig,"__referenceConstructor has already been defined"),Ig=n})(ha),function(n){(0,Y.hu)(!Jl,"__referenceConstructor has already been defined"),Jl=n}(ha);const A1={};function V_(n,t,e,r,i){let l=r||n.options.databaseURL;void 0===l&&(n.options.projectId||Ja("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),bi("Using default host for project ",n.options.projectId),l=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,b,d=P_(l,i),f=d.repoInfo;"undefined"!=typeof process&&process.env&&(b=process.env.FIREBASE_DATABASE_EMULATOR_HOST),b?(m=!0,l=`http://${b}?ns=${f.namespace}`,d=P_(l,i),f=d.repoInfo):m=!d.repoInfo.secure;const x=i&&m?new L0(L0.OWNER):new NA(n.name,n.options,t);I_("Invalid Firebase Database URL",d),yn(d.path)||Ja("Database URL must point to the root of a Firebase Database (not including a child path).");const I=function(n,t,e,r){let i=A1[t.name];i||(i={},A1[t.name]=i);let l=i[n.toURLString()];return l&&Ja("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new iD(n,false,e,r),i[n.toURLString()]=l,l}(f,n,x,new AA(n.name,e));return new JN(I,n)}class JN{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,t,e){if(n.stats_=Ao(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Cg(n.repoInfo_,(r,i,l,d)=>{oD(n,r,i,l,d)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>aD(n,!0),0);else{if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,Y.Pz)(e)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Xc(n.repoInfo_,t,(r,i,l,d)=>{oD(n,r,i,l,d)},r=>{aD(n,r)},r=>{!function(n,t){hi(t,(e,r)=>{Df(n,e,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function(n,t){const e=n.toString();return cb[e]||(cb[e]=t()),cb[e]}(n.repoInfo_,()=>new wx(n.stats_,n.server_)),n.infoData_=new yx,n.infoSyncTree_=new Gx({startListening:(r,i,l,d)=>{let f=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(f=Md(n.infoSyncTree_,r._path,m),setTimeout(()=>{d("ok")},0)),f},stopListening:()=>{}}),Df(n,"connected",!1),n.serverSyncTree_=new Gx({startListening:(r,i,l,d)=>(n.server_.listen(r,l,i,(f,m)=>{const b=d(f,m);ko(n.eventQueue_,r._path,b)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ha(this._repo,kn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,t){const e=A1[t];(!e||e[n.key]!==n)&&Ja(`Database ${t}(${n.repoInfo_}) has already been deleted.`),p1(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&Ja("Cannot call "+t+" on a deleted database.")}}function RD(n,t){O0(n,t)}class Sf{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Xc.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},Xc.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},Hl(Vs.SDK_VERSION),(0,Vs._registerComponent)(new Ka.wA("database",(t,{instanceIdentifier:e})=>V_(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,Vs.registerVersion)(EA,"0.12.8",void 0),(0,Vs.registerVersion)(EA,"0.12.8","esm2017");const rM=new Qa.Yd("@firebase/database-compat"),iM=function(n){rM.warn("FIREBASE WARNING: "+n)};class FD{constructor(t){this._delegate=t}cancel(t){(0,Y.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,Y.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),r=>t(r)),e}remove(t){(0,Y.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,Y.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),r=>t(r)),e}set(t,e){(0,Y.Dv)("OnDisconnect.set",1,2,arguments.length),(0,Y.Wj)("OnDisconnect.set","onComplete",e,!0);const r=this._delegate.set(t);return e&&r.then(()=>e(null),i=>e(i)),r}setWithPriority(t,e,r){(0,Y.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,Y.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(t,e);return r&&i.then(()=>r(null),l=>r(l)),i}update(t,e){if((0,Y.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const i={};for(let l=0;l<t.length;++l)i[""+l]=t[l];t=i,iM("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,Y.Wj)("OnDisconnect.update","onComplete",e,!0);const r=this._delegate.update(t);return e&&r.then(()=>e(null),i=>e(i)),r}}class A2{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,Y.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class pa{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,Y.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,Y.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,Y.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,Y.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,Y.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),xf("DataSnapshot.child","path",t,!1),new pa(this._database,this._delegate.child(t))}hasChild(t){return(0,Y.Dv)("DataSnapshot.hasChild",1,1,arguments.length),xf("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,Y.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,Y.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,Y.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new pa(this._database,e)))}hasChildren(){return(0,Y.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,Y.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,Y.Dv)("DataSnapshot.ref",0,0,arguments.length),new no(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ui{constructor(t,e){this.database=t,this._delegate=e}on(t,e,r,i){var l;(0,Y.Dv)("Query.on",2,4,arguments.length),(0,Y.Wj)("Query.on","callback",e,!1);const d=Ui.getCancelAndContextArgs_("Query.on",r,i),f=(b,x)=>{e.call(d.context,new pa(this.database,b),x)};f.userCallback=e,f.context=d.context;const m=null===(l=d.cancel)||void 0===l?void 0:l.bind(d.context);switch(t){case"value":return x1(this._delegate,f,m),e;case"child_added":return D1(this._delegate,f,m),e;case"child_removed":return vD(this._delegate,f,m),e;case"child_changed":return yD(this._delegate,f,m),e;case"child_moved":return T1(this._delegate,f,m),e;default:throw new Error((0,Y.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,r){if((0,Y.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,Y.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,Y.Wj)("Query.off","callback",e,!0),(0,Y.lb)("Query.off","context",r,!0),e){const i=()=>{};i.userCallback=e,i.context=r,I1(this._delegate,t,i)}else I1(this._delegate,t)}get(){return _D(this._delegate).then(t=>new pa(this.database,t))}once(t,e,r,i){(0,Y.Dv)("Query.once",1,4,arguments.length),(0,Y.Wj)("Query.once","callback",e,!0);const l=Ui.getCancelAndContextArgs_("Query.once",r,i),d=new Y.BH,f=(b,x)=>{const I=new pa(this.database,b);e&&e.call(l.context,I,x),d.resolve(I)};f.userCallback=e,f.context=l.context;const m=b=>{l.cancel&&l.cancel.call(l.context,b),d.reject(b)};switch(t){case"value":x1(this._delegate,f,m,{onlyOnce:!0});break;case"child_added":D1(this._delegate,f,m,{onlyOnce:!0});break;case"child_removed":vD(this._delegate,f,m,{onlyOnce:!0});break;case"child_changed":yD(this._delegate,f,m,{onlyOnce:!0});break;case"child_moved":T1(this._delegate,f,m,{onlyOnce:!0});break;default:throw new Error((0,Y.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return d.promise}limitToFirst(t){return(0,Y.Dv)("Query.limitToFirst",1,1,arguments.length),new Ui(this.database,to(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new HN(n)}(t)))}limitToLast(t){return(0,Y.Dv)("Query.limitToLast",1,1,arguments.length),new Ui(this.database,to(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new $N(n)}(t)))}orderByChild(t){return(0,Y.Dv)("Query.orderByChild",1,1,arguments.length),new Ui(this.database,to(this._delegate,function(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return xf("orderByChild","path",n,!1),new GN(n)}(t)))}orderByKey(){return(0,Y.Dv)("Query.orderByKey",0,0,arguments.length),new Ui(this.database,to(this._delegate,new qN))}orderByPriority(){return(0,Y.Dv)("Query.orderByPriority",0,0,arguments.length),new Ui(this.database,to(this._delegate,new zN))}orderByValue(){return(0,Y.Dv)("Query.orderByValue",0,0,arguments.length),new Ui(this.database,to(this._delegate,new xD))}startAt(t=null,e){return(0,Y.Dv)("Query.startAt",0,2,arguments.length),new Ui(this.database,to(this._delegate,function(n=null,t){return Ef("startAt","key",t,!0),new CD(n,t)}(t,e)))}startAfter(t=null,e){return(0,Y.Dv)("Query.startAfter",0,2,arguments.length),new Ui(this.database,to(this._delegate,function(n,t){return Ef("startAfter","key",t,!0),new UN(n,t)}(t,e)))}endAt(t=null,e){return(0,Y.Dv)("Query.endAt",0,2,arguments.length),new Ui(this.database,to(this._delegate,function(n,t){return Ef("endAt","key",t,!0),new L_(n,t)}(t,e)))}endBefore(t=null,e){return(0,Y.Dv)("Query.endBefore",0,2,arguments.length),new Ui(this.database,to(this._delegate,function(n,t){return Ef("endBefore","key",t,!0),new bD(n,t)}(t,e)))}equalTo(t,e){return(0,Y.Dv)("Query.equalTo",1,2,arguments.length),new Ui(this.database,to(this._delegate,function(n,t){return Ef("equalTo","key",t,!0),new TD(n,t)}(t,e)))}toString(){return(0,Y.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,Y.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,Y.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof Ui))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,r){const i={cancel:void 0,context:void 0};if(e&&r)i.cancel=e,(0,Y.Wj)(t,"cancel",i.cancel,!0),i.context=r,(0,Y.lb)(t,"context",i.context,!0);else if(e)if("object"==typeof e&&null!==e)i.context=e;else{if("function"!=typeof e)throw new Error((0,Y.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=e}return i}get ref(){return new no(this.database,new ha(this._delegate._repo,this._delegate._path))}}class no extends Ui{constructor(t,e){super(t,new Bs(e._repo,e._path,new zl,!1)),this.database=t,this._delegate=e}getKey(){return(0,Y.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,Y.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new no(this.database,Fd(this._delegate,t))}getParent(){(0,Y.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new no(this.database,t):null}getRoot(){return(0,Y.Dv)("Reference.root",0,0,arguments.length),new no(this.database,this._delegate.root)}set(t,e){(0,Y.Dv)("Reference.set",1,2,arguments.length),(0,Y.Wj)("Reference.set","onComplete",e,!0);const r=E1(this._delegate,t);return e&&r.then(()=>e(null),i=>e(i)),r}update(t,e){if((0,Y.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const i={};for(let l=0;l<t.length;++l)i[""+l]=t[l];t=i,iM("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}eo("Reference.update",this._delegate._path),(0,Y.Wj)("Reference.update","onComplete",e,!0);const r=LN(this._delegate,t);return e&&r.then(()=>e(null),i=>e(i)),r}setWithPriority(t,e,r){(0,Y.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,Y.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function(n,t,e){if(eo("setWithPriority",n._path),da("setWithPriority",t,n._path,!1),T_("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new Y.BH;return Tf(n._repo,n._path,t,e,r.wrapCallback(()=>{})),r.promise}(this._delegate,t,e);return r&&i.then(()=>r(null),l=>r(l)),i}remove(t){(0,Y.Dv)("Reference.remove",0,1,arguments.length),(0,Y.Wj)("Reference.remove","onComplete",t,!0);const e=function(n){return eo("remove",n._path),E1(n,null)}(this._delegate);return t&&e.then(()=>t(null),r=>t(r)),e}transaction(t,e,r){(0,Y.Dv)("Reference.transaction",1,3,arguments.length),(0,Y.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,Y.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,r){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,Y.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function(n,t,e){var r;if(n=(0,Y.m9)(n),eo("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==e?void 0:e.applyLocally)||void 0===r||r,l=new Y.BH,f=x1(n,()=>{});return function(n,t,e,r,i,l){If(n,"transaction on "+t);const d={path:t,update:e,onComplete:r,status:null,order:HE(),applyLocally:l,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=g1(n,t,void 0);d.currentInputSnapshot=f;const m=d.update(f.val());if(void 0===m)d.unwatcher(),d.currentOutputSnapshotRaw=null,d.currentOutputSnapshotResolved=null,d.onComplete&&d.onComplete(null,!1,d.currentInputSnapshot);else{Cf("transaction failed: Data returned ",m,d.path),d.status=0;const b=E_(n.transactionQueueTree_,t),x=Rd(b)||[];let I;x.push(d),l1(b,x),"object"==typeof m&&null!==m&&(0,Y.r3)(m,".priority")?(I=(0,Y.DV)(m,".priority"),(0,Y.hu)(Rg(I),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):I=(Ag(n.serverSyncTree_,t)||tn.EMPTY_NODE).getPriority().val();const V=At(n),G=Pr(m,I),ne=b_(G,f,V);d.currentOutputSnapshotRaw=G,d.currentOutputSnapshotResolved=ne,d.currentWriteId=A_(n);const we=g_(n.serverSyncTree_,t,ne,d.currentWriteId,d.applyLocally);ko(n.eventQueue_,t,we),k_(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(m,b,x)=>{let I=null;m?l.reject(m):(I=new cu(x,new ha(n._repo,n._path),br),l.resolve(new Sf(b,I)))},f,i),l.promise}(this._delegate,t,{applyLocally:r}).then(l=>new A2(l.committed,new pa(this.database,l.snapshot)));return e&&i.then(l=>e(null,l.committed,l.snapshot),l=>e(l,!1,null)),i}setPriority(t,e){(0,Y.Dv)("Reference.setPriority",1,2,arguments.length),(0,Y.Wj)("Reference.setPriority","onComplete",e,!0);const r=function(n,t){n=(0,Y.m9)(n),eo("setPriority",n._path),T_("setPriority",t,!1);const e=new Y.BH;return Tf(n._repo,kr(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&r.then(()=>e(null),i=>e(i)),r}push(t,e){(0,Y.Dv)("Reference.push",0,2,arguments.length),(0,Y.Wj)("Reference.push","onComplete",e,!0);const r=function(n,t){n=(0,Y.m9)(n),eo("push",n._path),da("push",t,n._path,!0);const e=TN(n._repo),r=wg(e),i=Fd(n,r),l=Fd(n,r);let d;return d=null!=t?E1(l,t).then(()=>l):Promise.resolve(l),i.then=d.then.bind(d),i.catch=d.then.bind(d,void 0),i}(this._delegate,t),i=r.then(d=>new no(this.database,d));e&&i.then(()=>e(null),d=>e(d));const l=new no(this.database,r);return l.then=i.then.bind(i),l.catch=i.catch.bind(i,void 0),l}onDisconnect(){return eo("Reference.onDisconnect",this._delegate._path),new FD(new gD(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class B_{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(t,e,r={}){!function(n,t,e,r={}){(n=(0,Y.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Ja("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let l;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ja('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new L0(L0.OWNER);else if(r.mockUserToken){const d="string"==typeof r.mockUserToken?r.mockUserToken:(0,Y.Sg)(r.mockUserToken,n.app.options.projectId);l=new L0(d)}!function(n,t,e,r){n.repoInfo_=new B0(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,t,e,l)}(this._delegate,t,e,r)}ref(t){if((0,Y.Dv)("database.ref",0,1,arguments.length),t instanceof no){const e=mD(this._delegate,t.toString());return new no(this,e)}{const e=Pg(this._delegate,t);return new no(this,e)}}refFromURL(t){(0,Y.Dv)("database.refFromURL",1,1,arguments.length);const r=mD(this._delegate,t);return new no(this,r)}goOffline(){return(0,Y.Dv)("database.goOffline",0,0,arguments.length),function(n){(n=(0,Y.m9)(n))._checkNotDeleted("goOffline"),p1(n._repo)}(this._delegate)}goOnline(){return(0,Y.Dv)("database.goOnline",0,0,arguments.length),function(n){(n=(0,Y.m9)(n))._checkNotDeleted("goOnline"),function(n){n.persistentConnection_&&n.persistentConnection_.resume(S_)}(n._repo)}(this._delegate)}}B_.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:n=>function(n){return{".sv":{increment:n}}}(n)};var aM=Object.freeze({__proto__:null,initStandalone:function({app:n,url:t,version:e,customAuthImpl:r,namespace:i,nodeAdmin:l=!1}){Hl(e);const d=new Ka.zt("auth-internal",new Ka.H0("database-standalone"));return d.setComponent(new Ka.wA("auth-internal",()=>r,"PRIVATE")),{instance:new B_(V_(n,d,void 0,t,l),n),namespace:i}}});const lM=B_.ServerValue;function P1(n,t,e){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:t,refCount:!1,scheduler:e},i=>i.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:t=Number.POSITIVE_INFINITY,refCount:e,scheduler:r}){let i,d,l=0,f=!1,m=!1;return function(x){let I;l++,!i||f?(f=!1,i=new zh(n,t,r),I=i.subscribe(this),d=x.subscribe({next(V){i.next(V)},error(V){f=!0,i.error(V)},complete(){m=!0,d=void 0,i.complete()}}),m&&(d=void 0)):I=i.subscribe(this),this.add(()=>{l--,I.unsubscribe(),I=void 0,d&&!m&&e&&0===l&&(d.unsubscribe(),d=void 0,i=void 0)})}}(r))}function F1(n,t){return t?mr(()=>n,t):mr(()=>n)}!function(n){n.INTERNAL.registerComponent(new Ka.wA("database-compat",(t,{instanceIdentifier:e})=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("database").getImmediate({identifier:e});return new B_(i,r)},"PUBLIC").setServiceProps({Reference:no,Query:Ui,Database:B_,DataSnapshot:pa,enableLogging:RD,INTERNAL:aM,ServerValue:lM}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.8")}(BE.Z);var L1=O(2639);O(2329);const pM=new Map,gM={activated:!1,tokenObservers:[]},mM={initialized:!1,enabled:!1};function wi(n){return pM.get(n)||gM}function ga(n,t){pM.set(n,t)}function j_(){return mM}class Fg{constructor(t,e,r,i,l){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=i,i>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,$e.Z)(function*(){e.stop();try{e.pending=new Y.BH,yield function(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new Y.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(r){e.retryPolicy(r)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const Cs=new Y.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function uu(n){if(!wi(n).activated)throw Cs.create("use-before-activation",{appName:n.name})}function G1(n,t){return Nf.apply(this,arguments)}function Nf(){return(Nf=(0,$e.Z)(function*({url:n,body:t},e){const r={"Content-Type":"application/json"},i=e.getImmediate({optional:!0});if(i){const I=yield i.getHeartbeatsHeader();I&&(r["X-Firebase-Client"]=I)}const l={method:"POST",body:JSON.stringify(t),headers:r};let d,f;try{d=yield fetch(n,l)}catch(I){throw Cs.create("fetch-network-error",{originalErrorMessage:I.message})}if(200!==d.status)throw Cs.create("fetch-status-error",{httpStatus:d.status});try{f=yield d.json()}catch(I){throw Cs.create("fetch-parse-error",{originalErrorMessage:I.message})}const m=f.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw Cs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const b=1e3*Number(m[1]),x=Date.now();return{token:f.attestationToken,expireTimeMillis:x+b,issuedAtTimeMillis:x}})).apply(this,arguments)}function UD(n,t){const{projectId:e,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${e}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:t}}}const Mf="firebase-app-check-store";let G_=null;function $D(){return G_||(G_=new Promise((n,t)=>{try{const e=indexedDB.open("firebase-app-check-database",1);e.onsuccess=r=>{n(r.target.result)},e.onerror=r=>{var i;t(Cs.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},e.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Mf,{keyPath:"compositeKey"})}}}catch(e){t(Cs.create("storage-open",{originalErrorMessage:e.message}))}}),G_)}function WD(){return(WD=(0,$e.Z)(function*(n,t){const r=(yield $D()).transaction(Mf,"readwrite"),l=r.objectStore(Mf).put({compositeKey:n,value:t});return new Promise((d,f)=>{l.onsuccess=m=>{d()},r.onerror=m=>{var b;f(Cs.create("storage-set",{originalErrorMessage:null===(b=m.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const al=new Qa.Yd("@firebase/app-check");function zt(n,t){return(0,Y.hl)()?function(n,t){return function(n,t){return WD.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{al.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function du(){return j_().enabled}function IM(){return q_.apply(this,arguments)}function q_(){return(q_=(0,$e.Z)(function*(){const n=j_();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const O2={error:"UNKNOWN_ERROR"};function SM(n){return Y.US.encodeString(JSON.stringify(n),!1)}function Z_(n){return Us.apply(this,arguments)}function Us(){return(Us=(0,$e.Z)(function*(n,t=!1){const e=n.app;uu(e);const r=wi(e);let l,i=r.token;if(!i){const m=yield r.cachedTokenPromise;m&&kf(m)&&(i=m)}if(!t&&i&&kf(i))return{token:i.token};let f,d=!1;if(du()){r.exchangeTokenPromise||(r.exchangeTokenPromise=G1(UD(e,yield IM()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),d=!0);const m=yield r.exchangeTokenPromise;return yield zt(e,m),ga(e,Object.assign(Object.assign({},r),{token:m})),{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(m=>(r.exchangeTokenPromise=void 0,m)),d=!0),i=yield r.exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?al.warn(m.message):al.error(m),l=m}return i?(f={token:i.token},ga(e,Object.assign(Object.assign({},r),{token:i})),yield zt(e,i)):f=Pf(l),d&&z1(e,f),f})).apply(this,arguments)}function ro(n,t){const e=wi(n),r=e.tokenObservers.filter(i=>i.next!==t);0===r.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),ga(n,Object.assign(Object.assign({},e),{tokenObservers:r}))}function Z1(n){const{app:t}=n,e=wi(t);let r=e.tokenRefresher;r||(r=function(n){const{app:t}=n;return new Fg((0,$e.Z)(function*(){let r;if(r=wi(t).token?yield Z_(n,!0):yield Z_(n),r.error)throw r.error}),()=>!0,()=>{const e=wi(t);if(e.token){let r=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,e.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),ga(t,Object.assign(Object.assign({},e),{tokenRefresher:r}))),!r.isRunning()&&e.isTokenAutoRefreshEnabled&&r.start()}function z1(n,t){const e=wi(n).tokenObservers;for(const r of e)try{"EXTERNAL"===r.type&&null!=t.error?r.error(t.error):r.next(t)}catch(i){}}function kf(n){return n.expireTimeMillis-Date.now()>0}function Pf(n){return{token:SM(O2),error:n}}class Ug{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=wi(this.app);for(const e of t)ro(this.app,e.next);return Promise.resolve()}}const PM="app-check-internal";(0,Vs._registerComponent)(new Ka.wA("app-check",n=>function(n,t){return new Ug(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(PM).initialize()})),(0,Vs._registerComponent)(new Ka.wA(PM,n=>function(n){return{getToken:t=>Z_(n,t),addTokenListener:t=>function(n,t,e,r){const{app:i}=n,l=wi(i),d={next:e,error:r,type:t};if(ga(i,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,d]})),l.token&&kf(l.token)){const f=l.token;Promise.resolve().then(()=>{e({token:f.token}),Z1(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>Z1(n))}(n,"INTERNAL",t),removeTokenListener:t=>ro(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Vs.registerVersion)("@firebase/app-check","0.5.6");class jg{constructor(){return(0,Yn.vb)("app-check")}}"undefined"!=typeof window&&window;var ew=O(7841);const tw=new a.OlP("angularfire2.auth.use-emulator"),nw=new a.OlP("angularfire2.auth.settings"),rw=new a.OlP("angularfire2.auth.tenant-id"),Bd=new a.OlP("angularfire2.auth.langugage-code"),iw=new a.OlP("angularfire2.auth.use-device-language"),sw=new a.OlP("angularfire.auth.persistence"),X_=(n,t,e,r,i,l,d,f)=>(0,vi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=t.runOutsideAngular(()=>n.auth());if(e&&m.useEmulator(...e),r&&(m.tenantId=r),m.languageCode=i,l&&m.useDeviceLanguage(),d)for(const[b,x]of Object.entries(d))m.settings[b]=x;return f&&m.setPersistence(f),m},[e,r,i,l,d,f]);let nc=(()=>{class n{constructor(e,r,i,l,d,f,m,b,x,I,V,G){const ne=new Tn.xQ,we=(0,xt.of)(void 0).pipe((0,md.QV)(d.outsideAngular),mr(()=>l.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,4828)))),(0,bt.U)(()=>(0,vi.on)(e,l,r)),(0,bt.U)(Ue=>X_(Ue,l,f,b,x,I,m,V)),P1({bufferSize:1,refCount:!1}));if(wh(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,xt.of)(null);else{we.pipe(Ir()).subscribe();const tt=we.pipe(mr(yt=>yt.getRedirectResult().then(jt=>jt,()=>null)),Yn.iC,P1({bufferSize:1,refCount:!1})),ot=we.pipe(mr(yt=>new zn.y(jt=>({unsubscribe:l.runOutsideAngular(()=>yt.onAuthStateChanged(bn=>jt.next(bn),bn=>jt.error(bn),()=>jt.complete()))})))),gt=we.pipe(mr(yt=>new zn.y(jt=>({unsubscribe:l.runOutsideAngular(()=>yt.onIdTokenChanged(bn=>jt.next(bn),bn=>jt.error(bn),()=>jt.complete()))}))));this.authState=tt.pipe(F1(ot),(0,L1.R)(d.outsideAngular),(0,md.QV)(d.insideAngular)),this.user=tt.pipe(F1(gt),(0,L1.R)(d.outsideAngular),(0,md.QV)(d.insideAngular)),this.idToken=this.user.pipe(mr(yt=>yt?(0,un.D)(yt.getIdToken()):(0,xt.of)(null))),this.idTokenResult=this.user.pipe(mr(yt=>yt?(0,un.D)(yt.getIdTokenResult()):(0,xt.of)(null))),this.credential=(0,_d.T)(tt,ne,this.authState.pipe(ar(yt=>!yt))).pipe((0,bt.U)(yt=>(null==yt?void 0:yt.user)?yt:null),(0,L1.R)(d.outsideAngular),(0,md.QV)(d.insideAngular))}return(0,vi.pX)(this,we,l,{spy:{apply:(Ue,tt,ot)=>{(Ue.startsWith("signIn")||Ue.startsWith("createUser"))&&ot.then(gt=>ne.next(gt))}}})}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(vi.Dh),a.LFG(vi.xv,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(Yn.HU),a.LFG(tw,8),a.LFG(nw,8),a.LFG(rw,8),a.LFG(Bd,8),a.LFG(iw,8),a.LFG(sw,8),a.LFG(jg,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),W2=(()=>{class n{constructor(){ew.Z.registerVersion("angularfire",Yn.q4.full,"auth-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[nc]}),n})();function iT(n){return null==n}function sT(n){return"function"==typeof n.set}function oT(n,t){return sT(t)?t:n.ref(t)}function aT(n,t){if(function(n){return"string"==typeof n}(n))return t.stringCase();if(sT(n))return t.firebaseCase();if(function(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Of(n,t,e="on",r=Yc.z){return new zn.y(i=>{let l=null;return l=n[e](t,(d,f)=>{r.schedule(()=>{i.next({snapshot:d,prevKey:f})}),"once"===e&&r.schedule(()=>i.complete())},d=>{r.schedule(()=>i.error(d))}),"on"===e?{unsubscribe(){null!=l&&n.off(t,l)}}:{unsubscribe(){}}}).pipe((0,bt.U)(i=>{const{snapshot:l,prevKey:d}=i;let f=null;return l.exists()&&(f=l.key),{type:t,payload:l,prevKey:d,key:f}}),(0,wA.B)())}function lT(n,t){const e=n.length;for(let r=0;r<e;r++)if(n[r].payload.key===t)return r;return-1}function Z2(n,t){const{payload:e,prevKey:r,key:i}=t,l=lT(n,i),d=function(n,t){if(iT(t))return 0;{const e=lT(n,t);return-1===e?n.length:e+1}}(n,r);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let f=null;t.payload.forEach(m=>{const b={payload:m,type:"value",prevKey:f,key:m.key};return f=m.key,n=[...n,b],!1})}return n;case"child_added":if(l>-1){const f=n[l-1];(f&&f.key||null)!==r&&(n=n.filter(m=>m.payload.key!==e.key)).splice(d,0,t)}else{if(null==r)return[t,...n];(n=n.slice()).splice(d,0,t)}return n;case"child_removed":return n.filter(f=>f.payload.key!==e.key);case"child_changed":return n.map(f=>f.payload.key===i?t:f);case"child_moved":if(l>-1){const f=n.splice(l,1)[0];return(n=n.slice()).splice(d,0,f),n}return n;default:return n}}function GM(n){return(iT(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function ey(n,t,e){return function(n,t,e){return Of(n,"value","once",e).pipe(mr(r=>{const i=[(0,xt.of)(r)];return t.forEach(l=>i.push(Of(n,l,"on",e))),(0,_d.T)(...i).pipe(Ba(Z2,[]))}),lg())}(n,t=GM(t),e)}function cT(n,t,e){const r=(t=GM(t)).map(i=>Of(n,i,"on",e));return(0,_d.T)(...r)}function uT(n,t){return function(r,i){return aT(r,{stringCase:()=>n.child(r)[t](i),firebaseCase:()=>r[t](i),snapshotCase:()=>r.ref[t](i)})}}function zM(n){return function(e){return e?aT(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function ty(n,t){return function(){return Of(n,"value","on",t)}}const Ff=new a.OlP("angularfire2.realtimeDatabaseURL"),ns=new a.OlP("angularfire2.database.use-emulator");let hT=(()=>{class n{constructor(e,r,i,l,d,f,m,b,x,I,V,G,ne,we,Ue){this.schedulers=f;const tt=m,ot=(0,vi.on)(e,d,r);b&&X_(ot,d,x,V,G,ne,I,we),this.database=(0,vi.cc)(`${ot.name}.database.${i}`,"AngularFireDatabase",ot.name,()=>{const gt=d.runOutsideAngular(()=>ot.database(i||void 0));return tt&&gt.useEmulator(...tt),gt},[tt])}list(e,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>oT(this.database,e));let l=i;return r&&(l=r(i)),function(n,t){const e=t.schedulers.outsideAngular,r=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:uT(r,"update"),set:uT(r,"set"),push:i=>r.push(i),remove:zM(r),snapshotChanges:i=>ey(n,i,e).pipe(Yn.iC),stateChanges:i=>cT(n,i,e).pipe(Yn.iC),auditTrail:i=>function(n,t,e){return function(n,t,e){return function(n,t){return Of(n,"value","on",t).pipe((0,bt.U)(e=>{let r;return e.payload.forEach(i=>(r=i.key,!1)),{data:e,lastKeyToLoad:r}}))}(n,e).pipe(k0(t),(0,bt.U)(([i,l])=>{const d=i.lastKeyToLoad,f=l.map(m=>m.key);return{actions:l,lastKeyToLoad:d,loadedKeys:f}}),function(n){return t=>t.lift(new CA(n))}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,bt.U)(i=>i.actions))}(n,cT(n,t).pipe(Ba((i,l)=>[...i,l],[])),e)}(n,i,e).pipe(Yn.iC),valueChanges:(i,l)=>ey(n,i,e).pipe((0,bt.U)(f=>f.map(m=>l&&l.idField?Object.assign(Object.assign({},m.payload.val()),{[l.idField]:m.key}):m.payload.val())),Yn.iC)}}(l,this)}object(e){return function(n,t){return{query:n,snapshotChanges:()=>ty(n,t.schedulers.outsideAngular)().pipe(Yn.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>ty(n,t.schedulers.outsideAngular)().pipe(Yn.iC,(0,bt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>oT(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(vi.Dh),a.LFG(vi.xv,8),a.LFG(Ff,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(Yn.HU),a.LFG(ns,8),a.LFG(nc,8),a.LFG(tw,8),a.LFG(nw,8),a.LFG(rw,8),a.LFG(Bd,8),a.LFG(iw,8),a.LFG(sw,8),a.LFG(jg,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var ow=O(982);function aw(){return n=>n.lift(new fT)}class fT{call(t,e){return e.subscribe(new pT(t))}}class pT extends gr.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var wt,gT="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},rc={},lw=lw||{},Yt=gT||self;function ny(){}function mT(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function Gg(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var hu="closure_uid_"+(1e9*Math.random()>>>0),z2=0;function _T(n,t,e){return n.call.apply(n.bind,arguments)}function QM(n,t,e){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(t,i)}}return function(){return n.apply(t,arguments)}}function rs(n,t,e){return(rs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_T:QM).apply(null,arguments)}function Wg(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var r=e.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function $i(n,t){function e(){}e.prototype=t.prototype,n.Z=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.Vb=function(r,i,l){for(var d=Array(arguments.length-2),f=2;f<arguments.length;f++)d[f-2]=arguments[f];return t.prototype[i].apply(r,d)}}function cl(){this.s=this.s,this.o=this.o}var yT={};cl.prototype.s=!1,cl.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,hu)&&n[hu]||(n[hu]=++z2)}(this);delete yT[n]}},cl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const cw=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1},uw=Array.prototype.forEach?function(n,t,e){Array.prototype.forEach.call(n,t,e)}:function(n,t,e){const r=n.length,i="string"==typeof n?n.split(""):n;for(let l=0;l<r;l++)l in i&&t.call(e,i[l],l,n)};function vT(n){return Array.prototype.concat.apply([],arguments)}function dw(n){const t=n.length;if(0<t){const e=Array(t);for(let r=0;r<t;r++)e[r]=n[r];return e}return[]}function ry(n){return/^[\s\xa0]*$/.test(n)}var is,bT=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Es(n,t){return-1!=n.indexOf(t)}function Ud(n,t){return n<t?-1:n>t?1:0}e:{var hw=Yt.navigator;if(hw){var fw=hw.userAgent;if(fw){is=fw;break e}}is=""}function iy(n,t,e){for(const r in n)t.call(e,n[r],r,n)}function pw(n){const t={};for(const e in n)t[e]=n[e];return t}var gw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wT(n,t){let e,r;for(let i=1;i<arguments.length;i++){for(e in r=arguments[i],r)n[e]=r[e];for(let l=0;l<gw.length;l++)e=gw[l],Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}}function sy(n){return sy[" "](n),n}sy[" "]=ny;var io,eR=Es(is,"Opera"),Lf=Es(is,"Trident")||Es(is,"MSIE"),ET=Es(is,"Edge"),Hd=ET||Lf,Vf=Es(is,"Gecko")&&!(Es(is.toLowerCase(),"webkit")&&!Es(is,"Edge"))&&!(Es(is,"Trident")||Es(is,"MSIE"))&&!Es(is,"Edge"),tR=Es(is.toLowerCase(),"webkit")&&!Es(is,"Edge");function oy(){var n=Yt.document;return n?n.documentMode:void 0}e:{var mw="",Bf=function(){var n=is;return Vf?/rv:([^\);]+)(\)|;)/.exec(n):ET?/Edge\/([\d\.]+)/.exec(n):Lf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):tR?/WebKit\/(\S+)/.exec(n):eR?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(Bf&&(mw=Bf?Bf[1]:""),Lf){var _w=oy();if(null!=_w&&_w>parseFloat(mw)){io=String(_w);break e}}io=mw}var nR={};function Y2(){return t=nR,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){let n=0;const t=bT(String(io)).split("."),e=bT("9").split("."),r=Math.max(t.length,e.length);for(let d=0;0==n&&d<r;d++){var i=t[d]||"",l=e[d]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==i[0].length&&0==l[0].length)break;n=Ud(0==i[1].length?0:parseInt(i[1],10),0==l[1].length?0:parseInt(l[1],10))||Ud(0==i[2].length,0==l[2].length)||Ud(i[2],l[2]),i=i[3],l=l[3]}while(0==n)}return 0<=n}();var t}var xT=Yt.document&&Lf&&(oy()||parseInt(io,10))||void 0,yw=function(){if(!Yt.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Yt.addEventListener("test",ny,t),Yt.removeEventListener("test",ny,t)}catch(e){}return n}();function Ci(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}function Zg(n,t){if(Ci.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(Vf){e:{try{sy(t.nodeName);var i=!0;break e}catch(l){}i=!1}i||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:rR[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Zg.Z.h.call(this)}}Ci.prototype.h=function(){this.defaultPrevented=!0},$i(Zg,Ci);var rR={2:"touch",3:"pen",4:"mouse"};Zg.prototype.h=function(){Zg.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var zg="closure_listenable_"+(1e6*Math.random()|0),iR=0;function DT(n,t,e,r,i){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!r,this.ia=i,this.key=++iR,this.ca=this.fa=!1}function Uf(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Yg(n){this.src=n,this.g={},this.h=0}function ly(n,t){var e=t.type;if(e in n.g){var l,r=n.g[e],i=cw(r,t);(l=0<=i)&&Array.prototype.splice.call(r,i,1),l&&(Uf(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function cy(n,t,e,r){for(var i=0;i<n.length;++i){var l=n[i];if(!l.ca&&l.listener==t&&l.capture==!!e&&l.ia==r)return i}return-1}Yg.prototype.add=function(n,t,e,r,i){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var d=cy(n,t,r,i);return-1<d?(t=n[d],e||(t.fa=!1)):((t=new DT(t,this.src,l,!!r,i)).fa=e,n.push(t)),t};var uy="closure_lm_"+(1e6*Math.random()|0),vw={};function bw(n,t,e,r,i){if(r&&r.once)return Cw(n,t,e,r,i);if(Array.isArray(t)){for(var l=0;l<t.length;l++)bw(n,t[l],e,r,i);return null}return e=IT(e),n&&n[zg]?n.N(t,e,Gg(r)?!!r.capture:!!r,i):ww(n,t,e,!1,r,i)}function ww(n,t,e,r,i,l){if(!t)throw Error("Invalid event type");var d=Gg(i)?!!i.capture:!!i,f=xw(n);if(f||(n[uy]=f=new Yg(n)),(e=f.add(t,e,r,d,l)).proxy)return e;if(r=function(){var t=Hf;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=r,r.src=n,r.listener=e,n.addEventListener)yw||(i=d),void 0===i&&(i=!1),n.addEventListener(t.toString(),r,i);else if(n.attachEvent)n.attachEvent(ss(t.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return e}function Cw(n,t,e,r,i){if(Array.isArray(t)){for(var l=0;l<t.length;l++)Cw(n,t[l],e,r,i);return null}return e=IT(e),n&&n[zg]?n.O(t,e,Gg(r)?!!r.capture:!!r,i):ww(n,t,e,!0,r,i)}function Ew(n,t,e,r,i){if(Array.isArray(t))for(var l=0;l<t.length;l++)Ew(n,t[l],e,r,i);else r=Gg(r)?!!r.capture:!!r,e=IT(e),n&&n[zg]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=cy(l=n.g[t],e,r,i))&&(Uf(l[e]),Array.prototype.splice.call(l,e,1),0==l.length&&(delete n.g[t],n.h--))):n&&(n=xw(n))&&(t=n.g[t.toString()],n=-1,t&&(n=cy(t,e,r,i)),(e=-1<n?t[n]:null)&&TT(e))}function TT(n){if("number"!=typeof n&&n&&!n.ca){var t=n.src;if(t&&t[zg])ly(t.i,n);else{var e=n.type,r=n.proxy;t.removeEventListener?t.removeEventListener(e,r,n.capture):t.detachEvent?t.detachEvent(ss(e),r):t.addListener&&t.removeListener&&t.removeListener(r),(e=xw(t))?(ly(e,n),0==e.h&&(e.src=null,t[uy]=null)):Uf(n)}}}function ss(n){return n in vw?vw[n]:vw[n]="on"+n}function Hf(n,t){if(n.ca)n=!0;else{t=new Zg(t,this);var e=n.listener,r=n.ia||n.src;n.fa&&TT(n),n=e.call(r,t)}return n}function xw(n){return(n=n[uy])instanceof Yg?n:null}var Dw="__closure_events_fn_"+(1e9*Math.random()>>>0);function IT(n){return"function"==typeof n?n:(n[Dw]||(n[Dw]=function(t){return n.handleEvent(t)}),n[Dw])}function $r(){cl.call(this),this.i=new Yg(this),this.P=this,this.I=null}function ji(n,t){var e,r=n.I;if(r)for(e=[];r;r=r.I)e.push(r);if(n=n.P,r=t.type||t,"string"==typeof t)t=new Ci(t,n);else if(t instanceof Ci)t.target=t.target||n;else{var i=t;wT(t=new Ci(r,n),i)}if(i=!0,e)for(var l=e.length-1;0<=l;l--){var d=t.g=e[l];i=$f(d,r,!0,t)&&i}if(i=$f(d=t.g=n,r,!0,t)&&i,i=$f(d,r,!1,t)&&i,e)for(l=0;l<e.length;l++)i=$f(d=t.g=e[l],r,!1,t)&&i}function $f(n,t,e,r){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,l=0;l<t.length;++l){var d=t[l];if(d&&!d.ca&&d.capture==e){var f=d.listener,m=d.ia||d.src;d.fa&&ly(n.i,d),i=!1!==f.call(m,r)&&i}}return i&&!r.defaultPrevented}$i($r,cl),$r.prototype[zg]=!0,$r.prototype.removeEventListener=function(n,t,e,r){Ew(this,n,t,e,r)},$r.prototype.M=function(){if($r.Z.M.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],r=0;r<e.length;r++)Uf(e[r]);delete n.g[t],n.h--}}this.I=null},$r.prototype.N=function(n,t,e,r){return this.i.add(String(n),t,!1,e,r)},$r.prototype.O=function(n,t,e,r){return this.i.add(String(n),t,!0,e,r)};var Tw=Yt.JSON.stringify;function ST(){var n=Aw;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var jf,AT=new class{constructor(n,t){this.i=n,this.j=t,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Iw,n=>n.reset());class Iw{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function NT(n){Yt.setTimeout(()=>{throw n},0)}function dy(n,t){jf||function(){var n=Yt.Promise.resolve(void 0);jf=function(){n.then(aR)}}(),MT||(jf(),MT=!0),Aw.add(n,t)}var MT=!1,Aw=new class{constructor(){this.h=this.g=null}add(t,e){const r=AT.get();r.set(t,e),this.h?this.h.next=r:this.g=r,this.h=r}};function aR(){for(var n;n=ST();){try{n.h.call(n.g)}catch(e){NT(e)}var t=AT;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}MT=!1}function Kg(n,t){$r.call(this),this.h=n||1,this.g=t||Yt,this.j=rs(this.kb,this),this.l=Date.now()}function Gf(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function hy(n,t,e){if("function"==typeof n)e&&(n=rs(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=rs(n.handleEvent,n)}return 2147483647<Number(t)?-1:Yt.setTimeout(n,t||0)}function RT(n){n.g=hy(()=>{n.g=null,n.i&&(n.i=!1,RT(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}$i(Kg,$r),(wt=Kg.prototype).da=!1,wt.S=null,wt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ji(this,"tick"),this.da&&(Gf(this),this.start()))}},wt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},wt.M=function(){Kg.Z.M.call(this),Gf(this),delete this.g};class Nw extends cl{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:RT(this)}M(){super.M(),this.g&&(Yt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $d(n){cl.call(this),this.h=n,this.g={}}$i($d,cl);var kT=[];function PT(n,t,e,r){Array.isArray(e)||(e&&(kT[0]=e.toString()),e=kT);for(var i=0;i<e.length;i++){var l=bw(t,e[i],r||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function Mw(n){iy(n.g,function(t,e){this.g.hasOwnProperty(e)&&TT(t)},n),n.g={}}function Qg(){this.g=!0}function jd(n,t,e,r){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var r=e[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var l=i[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var d=1;d<i.length;d++)i[d]=""}}}return Tw(e)}catch(f){return t}}(n,e)+(r?" "+r:"")})}$d.prototype.M=function(){$d.Z.M.call(this),Mw(this)},$d.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Qg.prototype.Aa=function(){this.g=!1},Qg.prototype.info=function(){};var Gd={},Rw=null;function fy(){return Rw=Rw||new $r}function kw(n){Ci.call(this,Gd.Ma,n)}function Wf(n){const t=fy();ji(t,new kw(t,n))}function Pw(n,t){Ci.call(this,Gd.STAT_EVENT,n),this.stat=t}function os(n){const t=fy();ji(t,new Pw(t,n))}function LT(n,t){Ci.call(this,Gd.Na,n),this.size=t}function Jg(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Yt.setTimeout(function(){n()},t)}Gd.Ma="serverreachability",$i(kw,Ci),Gd.STAT_EVENT="statevent",$i(Pw,Ci),Gd.Na="timingevent",$i(LT,Ci);var py={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ow={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function VT(){}function dR(){}VT.prototype.h=null;var HT,gy={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function BT(){Ci.call(this,"d")}function UT(){Ci.call(this,"c")}function Fw(){}function my(n,t,e,r){this.l=n,this.j=t,this.m=e,this.X=r||1,this.V=new $d(this),this.P=K2,this.W=new Kg(n=Hd?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new hR}function hR(){this.i=null,this.g="",this.h=!1}$i(BT,Ci),$i(UT,Ci),$i(Fw,VT),Fw.prototype.g=function(){return new XMLHttpRequest},Fw.prototype.i=function(){return{}},HT=new Fw;var K2=45e3,$T={},Lw={};function jT(n,t,e){n.K=1,n.v=Kf(ic(t)),n.s=e,n.U=!0,fR(n,null)}function fR(n,t){n.F=Date.now(),Xg(n),n.A=ic(n.v);var e=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),bR(e.h,"t",r),n.C=0,e=n.l.H,n.h=new hR,n.g=Xw(n.l,e?t:null,!n.s),0<n.O&&(n.L=new Nw(rs(n.Ia,n,n.g),n.O)),PT(n.V,n.g,"readystatechange",n.gb),t=n.H?pw(n.H):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,t)):(n.u="GET",n.g.ea(n.A,n.u,null,t)),Wf(1),function(n,t,e,r,i,l){n.info(function(){if(n.g)if(l)for(var d="",f=l.split("&"),m=0;m<f.length;m++){var b=f[m].split("=");if(1<b.length){var x=b[0];b=b[1];var I=x.split("_");d=2<=I.length&&"type"==I[1]?d+(x+"=")+b+"&":d+(x+"=redacted&")}}else d=null;else d=l;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+e+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function pR(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function gR(n,t,e){let i,r=!0;for(;!n.I&&n.C<e.length;){if(i=mR(n,e),i==Lw){4==t&&(n.o=4,os(14),r=!1),jd(n.j,n.m,null,"[Incomplete Response]");break}if(i==$T){n.o=4,os(15),jd(n.j,n.m,e,"[Invalid Chunk]"),r=!1;break}jd(n.j,n.m,i,null),Bw(n,i)}pR(n)&&i!=Lw&&i!=$T&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,os(16),r=!1),n.i=n.i&&r,r?0<e.length&&!n.aa&&(n.aa=!0,(t=n.l).g==n&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+e.length),uI(t),t.L=!0,os(11))):(jd(n.j,n.m,e,"[Invalid Chunked Response]"),qf(n),_y(n))}function mR(n,t){var e=n.C,r=t.indexOf("\n",e);return-1==r?Lw:(e=Number(t.substring(e,r)),isNaN(e)?$T:(r+=1)+e>t.length?Lw:(t=t.substr(r,e),n.C=r+e,t))}function Xg(n){n.Y=Date.now()+n.P,GT(n,n.P)}function GT(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Jg(rs(n.eb,n),t)}function Vw(n){n.B&&(Yt.clearTimeout(n.B),n.B=null)}function _y(n){0==n.l.G||n.I||dI(n.l,n)}function qf(n){Vw(n);var t=n.L;t&&"function"==typeof t.na&&t.na(),n.L=null,Gf(n.W),Mw(n.V),n.g&&(t=n.g,n.g=null,t.abort(),t.na())}function Bw(n,t){try{var e=n.l;if(0!=e.G&&(e.g==n||vy(e.i,n)))if(e.I=n.N,!n.J&&vy(e.i,n)&&3==e.G){try{var r=e.Ca.g.parse(t)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(e.u)e.ta=i[1],0<e.ta-e.U&&37500>i[2]&&e.N&&0==e.A&&!e.v&&(e.v=Jg(rs(e.ab,e),6e3));else{if(e.g){if(!(e.g.F+3e3<n.F))break e;um(e),xy(e)}Qw(e),os(18)}if(1>=ER(e.i)&&e.ka){try{e.ka()}catch(b){}e.ka=void 0}}else fu(e,11)}else if((n.J||e.g==n)&&um(e),!ry(t))for(i=e.Ca.g.parse(t),t=0;t<i.length;t++){let b=i[t];if(e.U=b[0],b=b[1],2==e.G)if("c"==b[0]){e.J=b[1],e.la=b[2];const x=b[3];null!=x&&(e.ma=x,e.h.info("VER="+e.ma));const I=b[4];null!=I&&(e.za=I,e.h.info("SVER="+e.za));const V=b[5];null!=V&&"number"==typeof V&&0<V&&(e.K=r=1.5*V,e.h.info("backChannelRequestTimeoutMs_="+r)),r=e;const G=n.g;if(G){const ne=G.g?G.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ne){var l=r.i;!l.g&&(Es(ne,"spdy")||Es(ne,"quic")||Es(ne,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&($w(l,l.h),l.h=null))}if(r.D){const we=G.g?G.g.getResponseHeader("X-HTTP-Session-Id"):null;we&&(r.sa=we,Ar(r.F,r.D,we))}}e.G=3,e.j&&e.j.xa(),e.$&&(e.O=Date.now()-n.F,e.h.info("Handshake RTT: "+e.O+"ms"));var d=n;if((r=e).oa=Dy(r,r.H?r.la:null,r.W),d.J){xR(r.i,d);var f=d,m=r.K;m&&f.setTimeout(m),f.B&&(Vw(f),Xg(f)),r.g=d}else Kw(r);0<e.l.length&&zw(e)}else"stop"!=b[0]&&"close"!=b[0]||fu(e,7);else 3==e.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?fu(e,7):aI(e):"noop"!=b[0]&&e.j&&e.j.wa(b),e.A=0)}Wf(4)}catch(b){}}function Uw(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(mT(n)||"string"==typeof n)uw(n,t,void 0);else{if(n.T&&"function"==typeof n.T)var e=n.T();else if(n.R&&"function"==typeof n.R)e=void 0;else if(mT(n)||"string"==typeof n){e=[];for(var r=n.length,i=0;i<r;i++)e.push(i)}else for(i in e=[],r=0,n)e[r++]=i;i=(r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(mT(n)){for(var t=[],e=n.length,r=0;r<e;r++)t.push(n[r]);return t}for(r in t=[],e=0,n)t[e++]=n[r];return t}(n)).length;for(var l=0;l<i;l++)t.call(void 0,r[l],e&&e[l],n)}}function em(n,t){this.h={},this.g=[],this.i=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var r=0;r<e;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof em)for(e=n.T(),r=0;r<e.length;r++)this.set(e[r],n.get(e[r]));else for(r in n)this.set(r,n[r])}function WT(n){if(n.i!=n.g.length){for(var t=0,e=0;t<n.g.length;){var r=n.g[t];Zf(n.h,r)&&(n.g[e++]=r),t++}n.g.length=e}if(n.i!=n.g.length){var i={};for(e=t=0;t<n.g.length;)Zf(i,r=n.g[t])||(n.g[e++]=r,i[r]=1),t++;n.g.length=e}}function Zf(n,t){return Object.prototype.hasOwnProperty.call(n,t)}(wt=my.prototype).setTimeout=function(n){this.P=n},wt.gb=function(n){n=n.target;const t=this.L;t&&3==ma(n)?t.l():this.Ia(n)},wt.Ia=function(n){try{if(n==this.g)e:{const x=ma(this.g);var t=this.g.Da();const I=this.g.ba();if(!(3>x)&&(3!=x||Hd||this.g&&(this.h.h||this.g.ga()||sI(this.g)))){this.I||4!=x||7==t||Wf(8==t||0>=I?3:2),Vw(this);var e=this.g.ba();this.N=e;t:if(pR(this)){var r=sI(this.g);n="";var i=r.length,l=4==ma(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){qf(this),_y(this);var d="";break t}this.h.i=new Yt.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,n+=this.h.i.decode(r[t],{stream:l&&t==i-1});r.splice(0,i),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==e,function(n,t,e,r,i,l,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+e+"\n"+l+" "+d})}(this.j,this.u,this.A,this.m,this.X,x,e),this.i){if(this.$&&!this.J){t:{if(this.g){var f,m=this.g;if((f=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ry(f)){var b=f;break t}}b=null}if(!(e=b)){this.i=!1,this.o=3,os(12),qf(this),_y(this);break e}jd(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Bw(this,e)}this.U?(gR(this,x,d),Hd&&this.i&&3==x&&(PT(this.V,this.W,"tick",this.fb),this.W.start())):(jd(this.j,this.m,d,null),Bw(this,d)),4==x&&qf(this),this.i&&!this.I&&(4==x?dI(this.l,this):(this.i=!1,Xg(this)))}else 400==e&&0<d.indexOf("Unknown SID")?(this.o=3,os(12)):(this.o=0,os(13)),qf(this),_y(this)}}}catch(x){}},wt.fb=function(){if(this.g){var n=ma(this.g),t=this.g.ga();this.C<t.length&&(Vw(this),gR(this,n,t),this.i&&4!=n&&Xg(this))}},wt.cancel=function(){this.I=!0,qf(this)},wt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(Wf(3),os(17)),qf(this),this.o=2,_y(this)):GT(this,this.Y-n)},(wt=em.prototype).R=function(){WT(this);for(var n=[],t=0;t<this.g.length;t++)n.push(this.h[this.g[t]]);return n},wt.T=function(){return WT(this),this.g.concat()},wt.get=function(n,t){return Zf(this.h,n)?this.h[n]:t},wt.set=function(n,t){Zf(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=t},wt.forEach=function(n,t){for(var e=this.T(),r=0;r<e.length;r++){var i=e[r],l=this.get(i);n.call(t,l,i,this)}};var yR=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function zf(n,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof zf){this.g=void 0!==t?t:n.g,Yf(this,n.j),this.s=n.s,sc(this,n.i),tm(this,n.m),this.l=n.l,t=n.h;var e=new rm;e.i=t.i,t.g&&(e.g=new em(t.g),e.h=t.h),qT(this,e),this.o=n.o}else n&&(e=String(n).match(yR))?(this.g=!!t,Yf(this,e[1]||"",!0),this.s=Qf(e[2]||""),sc(this,e[3]||"",!0),tm(this,e[4]),this.l=Qf(e[5]||"",!0),qT(this,e[6]||"",!0),this.o=Qf(e[7]||"")):(this.g=!!t,this.h=new rm(null,this.g))}function ic(n){return new zf(n)}function Yf(n,t,e){n.j=e?Qf(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function sc(n,t,e){n.i=e?Qf(t,!0):t}function tm(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function qT(n,t,e){t instanceof rm?(n.h=t,function(n,t){t&&!n.j&&(Wd(n),n.i=null,n.g.forEach(function(e,r){var i=r.toLowerCase();r!=i&&(im(this,r),bR(this,i,e))},n)),n.j=t}(n.h,n.g)):(e||(t=yy(t,J2)),n.h=new rm(t,n.g))}function Ar(n,t,e){n.h.set(t,e)}function Kf(n){return Ar(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Qf(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function yy(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,YT),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function YT(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}zf.prototype.toString=function(){var n=[],t=this.j;t&&n.push(yy(t,nm,!0),":");var e=this.i;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(yy(t,nm,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.i&&"/"!=e.charAt(0)&&n.push("/"),n.push(yy(e,"/"==e.charAt(0)?Q2:KT,!0))),(e=this.h.toString())&&n.push("?",e),(e=this.o)&&n.push("#",yy(e,X2)),n.join("")};var nm=/[#\/\?@]/g,KT=/[#\?:]/g,Q2=/[#\?]/g,J2=/[#\?@]/g,X2=/#/g;function rm(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function Wd(n){n.g||(n.g=new em,n.h=0,n.i&&function(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var r=n[e].indexOf("="),i=null;if(0<=r){var l=n[e].substring(0,r);i=n[e].substring(r+1)}else l=n[e];t(l,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function im(n,t){Wd(n),t=sm(n,t),Zf(n.g.h,t)&&(n.i=null,n.h-=n.g.get(t).length,Zf((n=n.g).h,t)&&(delete n.h[t],n.i--,n.g.length>2*n.i&&WT(n)))}function QT(n,t){return Wd(n),t=sm(n,t),Zf(n.g.h,t)}function bR(n,t,e){im(n,t),0<e.length&&(n.i=null,n.g.set(sm(n,t),dw(e)),n.h+=e.length)}function sm(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function CR(n){this.l=n||eF,n=Yt.PerformanceNavigationTiming?0<(n=Yt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Yt.g&&Yt.g.Ea&&Yt.g.Ea()&&Yt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(wt=rm.prototype).add=function(n,t){Wd(this),this.i=null,n=sm(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},wt.forEach=function(n,t){Wd(this),this.g.forEach(function(e,r){uw(e,function(i){n.call(t,i,r,this)},this)},this)},wt.T=function(){Wd(this);for(var n=this.g.R(),t=this.g.T(),e=[],r=0;r<t.length;r++)for(var i=n[r],l=0;l<i.length;l++)e.push(t[r]);return e},wt.R=function(n){Wd(this);var t=[];if("string"==typeof n)QT(this,n)&&(t=vT(t,this.g.get(sm(this,n))));else{n=this.g.R();for(var e=0;e<n.length;e++)t=vT(t,n[e])}return t},wt.set=function(n,t){return Wd(this),this.i=null,QT(this,n=sm(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},wt.get=function(n,t){return n&&0<(n=this.R(n)).length?String(n[0]):t},wt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],t=this.g.T(),e=0;e<t.length;e++){var r=t[e],i=encodeURIComponent(String(r));r=this.R(r);for(var l=0;l<r.length;l++){var d=i;""!==r[l]&&(d+="="+encodeURIComponent(String(r[l]))),n.push(d)}}return this.i=n.join("&")};var eF=10;function JT(n){return!!n.h||!!n.g&&n.g.size>=n.j}function ER(n){return n.h?1:n.g?n.g.size:0}function vy(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function $w(n,t){n.g?n.g.add(t):n.h=t}function xR(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function DR(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.D);return t}return dw(n.i)}function jw(){}function om(){this.g=new jw}function TR(n,t,e){const r=e||"";try{Uw(n,function(i,l){let d=i;Gg(i)&&(d=Tw(i)),t.push(r+l+"="+encodeURIComponent(d))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function by(n,t,e,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(l){}}function qd(n){this.l=n.$b||null,this.j=n.ib||!1}function wy(n,t){$r.call(this),this.D=n,this.u=t,this.m=void 0,this.readyState=xs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}CR.prototype.cancel=function(){if(this.i=DR(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},jw.prototype.stringify=function(n){return Yt.JSON.stringify(n,void 0)},jw.prototype.parse=function(n){return Yt.JSON.parse(n,void 0)},$i(qd,VT),qd.prototype.g=function(){return new wy(this.l,this.j)},qd.prototype.i=function(n){return function(){return n}}({}),$i(wy,$r);var xs=0;function XT(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Zd(n){n.readyState=4,n.l=null,n.j=null,n.A=null,am(n)}function am(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(wt=wy.prototype).open=function(n,t){if(this.readyState!=xs)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,am(this)},wt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.D||Yt).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},wt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Zd(this)),this.readyState=xs},wt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,am(this)),this.g&&(this.readyState=3,am(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Yt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;XT(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},wt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?Zd(this):am(this),3==this.readyState&&XT(this)}},wt.Ua=function(n){this.g&&(this.response=this.responseText=n,Zd(this))},wt.Ta=function(n){this.g&&(this.response=n,Zd(this))},wt.ha=function(){this.g&&Zd(this)},wt.setRequestHeader=function(n,t){this.v.append(n,t)},wt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},wt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(wy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var SR=Yt.JSON.parse;function jr(n){$r.call(this),this.headers=new em,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Gw,this.K=this.L=!1}$i(jr,$r);var Gw="",eI=/^https?$/i,AR=["POST","PUT"];function nI(n){return"content-type"==n.toLowerCase()}function rI(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,iI(n),lm(n)}function iI(n){n.D||(n.D=!0,ji(n,"complete"),ji(n,"error"))}function Cy(n){if(n.h&&void 0!==lw&&(!n.C[1]||4!=ma(n)||2!=n.ba()))if(n.v&&4==ma(n))hy(n.Fa,0,n);else if(ji(n,"readystatechange"),4==ma(n)){n.h=!1;try{const f=n.ba();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var r;if(r=0===f){var i=String(n.H).match(yR)[1]||null;if(!i&&Yt.self&&Yt.self.location){var l=Yt.self.location.protocol;i=l.substr(0,l.length-1)}r=!eI.test(i?i.toLowerCase():"")}e=r}if(e)ji(n,"complete"),ji(n,"success");else{n.m=6;try{var d=2<ma(n)?n.g.statusText:""}catch(m){d=""}n.j=d+" ["+n.ba()+"]",iI(n)}}finally{lm(n)}}}function lm(n,t){if(n.g){Ww(n);const e=n.g,r=n.C[0]?ny:null;n.g=null,n.C=null,t||ji(n,"ready");try{e.onreadystatechange=r}catch(i){}}}function Ww(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Yt.clearTimeout(n.A),n.A=null)}function ma(n){return n.g?n.g.readyState:0}function sI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Gw:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(t){return null}}function qw(n,t,e){e:{for(r in e){var r=!1;break e}r=!0}r||(e=function(n){let t="";return iy(n,function(e,r){t+=r,t+=":",t+=e,t+="\r\n"}),t}(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):Ar(n,t,e))}function Ey(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function oI(n){this.za=0,this.l=[],this.h=new Qg,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ey("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ey("baseRetryDelayMs",5e3,n),this.$a=Ey("retryDelaySeedMs",1e4,n),this.Ya=Ey("forwardChannelMaxRetries",2,n),this.ra=Ey("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new CR(n&&n.concurrentRequestLimit),this.Ca=new om,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function aI(n){if(lI(n),3==n.G){var t=n.V++,e=ic(n.F);Ar(e,"SID",n.J),Ar(e,"RID",t),Ar(e,"TYPE","terminate"),cm(n,e),(t=new my(n,n.h,t,void 0)).K=2,t.v=Kf(ic(e)),e=!1,Yt.navigator&&Yt.navigator.sendBeacon&&(e=Yt.navigator.sendBeacon(t.v.toString(),"")),!e&&Yt.Image&&((new Image).src=t.v,e=!0),e||(t.g=Xw(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Xg(t)}Jf(n)}function xy(n){n.g&&(uI(n),n.g.cancel(),n.g=null)}function lI(n){xy(n),n.u&&(Yt.clearTimeout(n.u),n.u=null),um(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Yt.clearTimeout(n.m),n.m=null)}function Zw(n,t){n.l.push(new class{constructor(n,t){this.h=n,this.g=t}}(n.Za++,t)),3==n.G&&zw(n)}function zw(n){JT(n.i)||n.m||(n.m=!0,dy(n.Ha,n),n.C=0)}function Yw(n,t){var e;e=t?t.m:n.V++;const r=ic(n.F);Ar(r,"SID",n.J),Ar(r,"RID",e),Ar(r,"AID",n.U),cm(n,r),n.o&&n.s&&qw(r,n.o,n.s),e=new my(n,n.h,e,n.C+1),null===n.o&&(e.H=n.s),t&&(n.l=t.D.concat(n.l)),t=cI(n,e,1e3),e.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),$w(n.i,e),jT(e,r,t)}function cm(n,t){n.j&&Uw({},function(e,r){Ar(t,r,e)})}function cI(n,t,e){e=Math.min(n.l.length,e);var r=n.j?rs(n.j.Oa,n.j,n):null;e:{var i=n.l;let l=-1;for(;;){const d=["count="+e];-1==l?0<e?(l=i[0].h,d.push("ofs="+l)):l=0:d.push("ofs="+l);let f=!0;for(let m=0;m<e;m++){let b=i[m].h;const x=i[m].g;if(b-=l,0>b)l=Math.max(0,i[m].h-100),f=!1;else try{TR(x,d,"req"+b+"_")}catch(I){r&&r(x)}}if(f){r=d.join("&");break e}}}return n=n.l.splice(0,e),t.D=n,r}function Kw(n){n.g||n.u||(n.Y=1,dy(n.Ga,n),n.A=0)}function Qw(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Jg(rs(n.Ga,n),hI(n,n.A)),n.A++,0))}function uI(n){null!=n.B&&(Yt.clearTimeout(n.B),n.B=null)}function Jw(n){n.g=new my(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var t=ic(n.oa);Ar(t,"RID","rpc"),Ar(t,"SID",n.J),Ar(t,"CI",n.N?"0":"1"),Ar(t,"AID",n.U),cm(n,t),Ar(t,"TYPE","xmlhttp"),n.o&&n.s&&qw(t,n.o,n.s),n.K&&n.g.setTimeout(n.K);var e=n.g;n=n.la,e.K=1,e.v=Kf(ic(t)),e.s=null,e.U=!0,fR(e,n)}function um(n){null!=n.v&&(Yt.clearTimeout(n.v),n.v=null)}function dI(n,t){var e=null;if(n.g==t){um(n),uI(n),n.g=null;var r=2}else{if(!vy(n.i,t))return;e=t.D,xR(n.i,t),r=1}if(n.I=t.N,0!=n.G)if(t.i)if(1==r){e=t.s?t.s.length:0,t=Date.now()-t.F;var i=n.C;ji(r=fy(),new LT(r,e,t,i)),zw(n)}else Kw(n);else if(3==(i=t.o)||0==i&&0<n.I||!(1==r&&function(n,t){return!(ER(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=t.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Jg(rs(n.Ha,n,t),hI(n,n.C)),n.C++,0)))}(n,t)||2==r&&Qw(n)))switch(e&&0<e.length&&(t=n.i,t.i=t.i.concat(e)),i){case 1:fu(n,5);break;case 4:fu(n,10);break;case 3:fu(n,6);break;default:fu(n,2)}}function hI(n,t){let e=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(e*=2),e*t}function fu(n,t){if(n.h.info("Error code "+t),2==t){var e=null;n.j&&(e=null);var r=rs(n.jb,n);e||(e=new zf("//www.google.com/images/cleardot.gif"),Yt.location&&"http"==Yt.location.protocol||Yf(e,"https"),Kf(e)),function(n,t){const e=new Qg;if(Yt.Image){const r=new Image;r.onload=Wg(by,e,r,"TestLoadImage: loaded",!0,t),r.onerror=Wg(by,e,r,"TestLoadImage: error",!1,t),r.onabort=Wg(by,e,r,"TestLoadImage: abort",!1,t),r.ontimeout=Wg(by,e,r,"TestLoadImage: timeout",!1,t),Yt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else t(!1)}(e.toString(),r)}else os(2);n.G=0,n.j&&n.j.va(t),Jf(n),lI(n)}function Jf(n){n.G=0,n.I=-1,n.j&&((0!=DR(n.i).length||0!=n.l.length)&&(n.i.i.length=0,dw(n.l),n.l.length=0),n.j.ua())}function Dy(n,t,e){let r=function(n){return n instanceof zf?ic(n):new zf(n,void 0)}(e);if(""!=r.i)t&&sc(r,t+"."+r.i),tm(r,r.m);else{const i=Yt.location;r=function(n,t,e,r){var i=new zf(null,void 0);return n&&Yf(i,n),t&&sc(i,t),e&&tm(i,e),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,e)}return n.aa&&iy(n.aa,function(i,l){Ar(r,l,i)}),e=n.sa,(t=n.D)&&e&&Ar(r,t,e),Ar(r,"VER",n.ma),cm(n,r),r}function Xw(n,t,e){if(t&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new jr(e&&n.Ba&&!n.qa?new qd({ib:!0}):n.qa)).L=n.H,t}function fI(){}function Ty(){if(Lf&&!(10<=Number(xT)))throw Error("Environmental error: no available transport.")}function Oo(n,t){$r.call(this),this.g=new oI(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(n?n["X-WebChannel-Client-Profile"]=t.ya:n={"X-WebChannel-Client-Profile":t.ya}),this.g.P=n,(n=t&&t.httpHeadersOverwriteParam)&&!ry(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ry(t)&&(this.g.D=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new zd(this)}function MR(n){BT.call(this);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function RR(){UT.call(this),this.status=1}function zd(n){this.g=n}(wt=jr.prototype).ea=function(n,t,e,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);t=t?t.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():HT.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:HT),this.g.onreadystatechange=rs(this.Fa,this);try{this.F=!0,this.g.open(t,String(n),!0),this.F=!1}catch(l){return void rI(this,l)}n=e||"";const i=new em(this.headers);r&&Uw(r,function(l,d){i.set(d,l)}),r=function(n){e:{var t=nI;const e=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<e;i++)if(i in r&&t.call(void 0,r[i],i,n)){t=i;break e}t=-1}return 0>t?null:"string"==typeof n?n.charAt(t):n[t]}(i.T()),e=Yt.FormData&&n instanceof Yt.FormData,!(0<=cw(AR,t))||r||e||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(l,d){this.g.setRequestHeader(d,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ww(this),0<this.B&&((this.K=function(n){return Lf&&Y2()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=rs(this.pa,this)):this.A=hy(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){rI(this,l)}},wt.pa=function(){void 0!==lw&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ji(this,"timeout"),this.abort(8))},wt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ji(this,"complete"),ji(this,"abort"),lm(this))},wt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),lm(this,!0)),jr.Z.M.call(this)},wt.Fa=function(){this.s||(this.F||this.v||this.l?Cy(this):this.cb())},wt.cb=function(){Cy(this)},wt.ba=function(){try{return 2<ma(this)?this.g.status:-1}catch(n){return-1}},wt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},wt.Qa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),SR(t)}},wt.Da=function(){return this.m},wt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(wt=oI.prototype).ma=8,wt.G=1,wt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(t){}},wt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new my(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=pw(l),wT(l,this.P)):l=this.P),null===this.o&&(i.H=l),this.ja)e:{for(var t=0,e=0;e<this.l.length;e++){var r=this.l[e];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=e;break e}if(4096===t||e===this.l.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=cI(this,i,t),Ar(e=ic(this.F),"RID",n),Ar(e,"CVER",22),this.D&&Ar(e,"X-HTTP-Session-Id",this.D),cm(this,e),this.o&&l&&qw(e,this.o,l),$w(this.i,i),this.Ra&&Ar(e,"TYPE","init"),this.ja?(Ar(e,"$req",t),Ar(e,"SID","null"),i.$=!0,jT(i,e,null)):jT(i,e,t),this.G=2}}else 3==this.G&&(n?Yw(this,n):0==this.l.length||JT(this.i)||Yw(this))},wt.Ga=function(){if(this.u=null,Jw(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Jg(rs(this.bb,this),n)}},wt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,os(10),xy(this),Jw(this))},wt.ab=function(){null!=this.v&&(this.v=null,xy(this),Qw(this),os(19))},wt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),os(2)):(this.h.info("Failed to ping google.com"),os(1))},(wt=fI.prototype).xa=function(){},wt.wa=function(){},wt.va=function(){},wt.ua=function(){},wt.Oa=function(){},Ty.prototype.g=function(n,t){return new Oo(n,t)},$i(Oo,$r),Oo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,t=this.l,e=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),dy(rs(n.hb,n,t))),os(0),n.W=t,n.aa=e||{},n.N=n.X,n.F=Dy(n,null,n.W),zw(n)},Oo.prototype.close=function(){aI(this.g)},Oo.prototype.u=function(n){if("string"==typeof n){var t={};t.__data__=n,Zw(this.g,t)}else this.v?((t={}).__data__=Tw(n),Zw(this.g,t)):Zw(this.g,n)},Oo.prototype.M=function(){this.g.j=null,delete this.j,aI(this.g),delete this.g,Oo.Z.M.call(this)},$i(MR,BT),$i(RR,UT),$i(zd,fI),zd.prototype.xa=function(){ji(this.g,"a")},zd.prototype.wa=function(n){ji(this.g,new MR(n))},zd.prototype.va=function(n){ji(this.g,new RR(n))},zd.prototype.ua=function(){ji(this.g,"b")},Ty.prototype.createWebChannel=Ty.prototype.g,Oo.prototype.send=Oo.prototype.u,Oo.prototype.open=Oo.prototype.m,Oo.prototype.close=Oo.prototype.close,py.NO_ERROR=0,py.TIMEOUT=8,py.HTTP_ERROR=6,Ow.COMPLETE="complete",dR.EventType=gy,gy.OPEN="a",gy.CLOSE="b",gy.ERROR="c",gy.MESSAGE="d",$r.prototype.listen=$r.prototype.N,jr.prototype.listenOnce=jr.prototype.O,jr.prototype.getLastError=jr.prototype.La,jr.prototype.getLastErrorCode=jr.prototype.Da,jr.prototype.getStatus=jr.prototype.ba,jr.prototype.getResponseJson=jr.prototype.Qa,jr.prototype.getResponseText=jr.prototype.ga,jr.prototype.send=jr.prototype.ea;var pI=rc.createWebChannelTransport=function(){return new Ty},kR=rc.getStatEventTarget=function(){return fy()},eC=rc.ErrorCode=py,PR=rc.EventType=Ow,OR=rc.Event=Gd,tC=rc.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},tF=rc.FetchXmlHttpFactory=qd,nC=rc.WebChannel=dR,FR=rc.XhrIo=jr;const Iy="@firebase/firestore";class Mn{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Mn.UNAUTHENTICATED=new Mn(null),Mn.GOOGLE_CREDENTIALS=new Mn("google-credentials-uid"),Mn.FIRST_PARTY=new Mn("first-party-uid"),Mn.MOCK_USER=new Mn("mock-user");let dm="9.6.11";const oc=new Qa.Yd("@firebase/firestore");function Sy(){return oc.logLevel}function et(n,...t){if(oc.logLevel<=Qa.in.DEBUG){const e=t.map(Ay);oc.debug(`Firestore (${dm}): ${n}`,...e)}}function ni(n,...t){if(oc.logLevel<=Qa.in.ERROR){const e=t.map(Ay);oc.error(`Firestore (${dm}): ${n}`,...e)}}function hm(n,...t){if(oc.logLevel<=Qa.in.WARN){const e=t.map(Ay);oc.warn(`Firestore (${dm}): ${n}`,...e)}}function Ay(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(e){return n}}function _t(n="Unexpected state"){const t=`FIRESTORE (${dm}) INTERNAL ASSERTION FAILED: `+n;throw ni(t),new Error(t)}function $t(n,t){n||_t()}function ut(n,t){return n}const Be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ye extends Y.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ei{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class Ny{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class gI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Mn.UNAUTHENTICATED))}shutdown(){}}class xi{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class nF{constructor(t){this.t=t,this.currentUser=Mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var r=this;let i=this.i;const l=b=>this.i!==i?(i=this.i,e(b)):Promise.resolve();let d=new Ei;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Ei,t.enqueueRetryable(()=>l(this.currentUser))};const f=()=>{const b=d;t.enqueueRetryable((0,$e.Z)(function*(){yield b.promise,yield l(r.currentUser)}))},m=b=>{et("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(b=>m(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?m(b):(et("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Ei)}},0),f()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(r=>this.i!==t?(et("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($t("string"==typeof r.accessToken),new Ny(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return $t(null===t||"string"==typeof t),new Mn(t)}}class VR{constructor(t,e,r){this.type="FirstParty",this.user=Mn.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",e);const i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class BR{constructor(t,e,r){this.h=t,this.l=e,this.m=r}getToken(){return Promise.resolve(new VR(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(Mn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class UR{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class My{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(t,e){const r=l=>{null!=l.error&&et("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.p;return this.p=l.token,et("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?e(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable(()=>r(l))};const i=l=>{et("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.g.onInit(l=>i(l)),setTimeout(()=>{if(!this.appCheck){const l=this.g.getImmediate({optional:!0});l?i(l):et("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?($t("string"==typeof e.token),this.p=e.token,new UR(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Fo{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.I(r),this.T=r=>e.writeSequenceNumber(r))}I(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.T&&this.T(t),t}}function iF(n){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let r=0;r<n;r++)e[r]=Math.floor(256*Math.random());return e}Fo.A=-1;class HR{static R(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=iF(40);for(let l=0;l<i.length;++l)r.length<20&&i[l]<e&&(r+=t.charAt(i[l]%t.length))}return r}}function on(n,t){return n<t?-1:n>t?1:0}function Xf(n,t,e){return n.length===t.length&&n.every((r,i)=>e(r,t[i]))}function mI(n){return n+"\0"}class Qr{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ye(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ye(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ye(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ye(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Qr.fromMillis(Date.now())}static fromDate(t){return Qr.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*e));return new Qr(e,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?on(this.nanoseconds,t.nanoseconds):on(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Bt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Bt(t)}static min(){return new Bt(new Qr(0,0))}static max(){return new Bt(new Qr(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function $R(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Yd(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function _I(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}class fm{constructor(t,e,r){void 0===e?e=0:e>t.length&&_t(),void 0===r?r=t.length-e:r>t.length-e&&_t(),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return 0===fm.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof fm?t.forEach(r=>{e.push(r)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let i=0;i<r;i++){const l=t.get(i),d=e.get(i);if(l<d)return-1;if(l>d)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Pn extends fm{construct(t,e,r){return new Pn(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new Ye(Be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter(i=>i.length>0))}return new Pn(e)}static emptyPath(){return new Pn([])}}const sF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Di extends fm{construct(t,e,r){return new Di(t,e,r)}static isValidIdentifier(t){return sF.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Di.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Di(["__name__"])}static fromServerFormat(t){const e=[];let r="",i=0;const l=()=>{if(0===r.length)throw new Ye(Be.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let d=!1;for(;i<t.length;){const f=t[i];if("\\"===f){if(i+1===t.length)throw new Ye(Be.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const m=t[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Ye(Be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=m,i+=2}else"`"===f?(d=!d,i++):"."!==f||d?(r+=f,i++):(l(),i++)}if(l(),d)throw new Ye(Be.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Di(e)}static emptyPath(){return new Di([])}}class ep{constructor(t){this.fields=t,t.sort(Di.comparator)}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Xf(this.fields,t.fields,(e,r)=>e.isEqual(r))}}class pi{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new pi(e)}static fromUint8Array(t){const e=function(r){let i="";for(let l=0;l<r.length;++l)i+=String.fromCharCode(r[l]);return i}(t);return new pi(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return on(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}pi.EMPTY_BYTE_STRING=new pi("");const GR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ti(n){if($t(!!n),"string"==typeof n){let t=0;const e=GR.exec(n);if($t(!!e),e[1]){let i=e[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Gr(n.seconds),nanos:Gr(n.nanos)}}function Gr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Kd(n){return"string"==typeof n?pi.fromBase64String(n):pi.fromUint8Array(n)}function iC(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=null==n?void 0:n.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function yI(n){const t=n.mapValue.fields.__previous_value__;return iC(t)?yI(t):t}function Ry(n){const t=Ti(n.mapValue.fields.__local_write_time__.timestampValue);return new Qr(t.seconds,t.nanos)}class WR{constructor(t,e,r,i,l,d,f,m){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=i,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=f,this.useFetchStreams=m}}class ac{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new ac("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof ac&&t.projectId===this.projectId&&t.database===this.database}}function Qd(n){return null==n}function lc(n){return 0===n&&1/n==-1/0}function sC(n){return"number"==typeof n&&Number.isInteger(n)&&!lc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class lt{constructor(t){this.path=t}static fromPath(t){return new lt(Pn.fromString(t))}static fromName(t){return new lt(Pn.fromString(t).popFirst(5))}static empty(){return new lt(Pn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Pn.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Pn.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new lt(new Pn(t.slice()))}}const vI={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},qR={nullValue:"NULL_VALUE"};function tp(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?iC(n)?4:aC(n)?9:10:_t()}function cc(n,t){if(n===t)return!0;const e=tp(n);if(e!==tp(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Ry(n).isEqual(Ry(t));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const l=Ti(r.timestampValue),d=Ti(i.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return i=t,Kd(n.bytesValue).isEqual(Kd(i.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,i){return Gr(r.geoPointValue.latitude)===Gr(i.geoPointValue.latitude)&&Gr(r.geoPointValue.longitude)===Gr(i.geoPointValue.longitude)}(n,t);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Gr(r.integerValue)===Gr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const l=Gr(r.doubleValue),d=Gr(i.doubleValue);return l===d?lc(l)===lc(d):isNaN(l)&&isNaN(d)}return!1}(n,t);case 9:return Xf(n.arrayValue.values||[],t.arrayValue.values||[],cc);case 10:return function(r,i){const l=r.mapValue.fields||{},d=i.mapValue.fields||{};if($R(l)!==$R(d))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(void 0===d[f]||!cc(l[f],d[f])))return!1;return!0}(n,t);default:return _t()}var i}function Jd(n,t){return void 0!==(n.values||[]).find(e=>cc(e,t))}function pu(n,t){if(n===t)return 0;const e=tp(n),r=tp(t);if(e!==r)return on(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return on(n.booleanValue,t.booleanValue);case 2:return function(i,l){const d=Gr(i.integerValue||i.doubleValue),f=Gr(l.integerValue||l.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1}(n,t);case 3:return bI(n.timestampValue,t.timestampValue);case 4:return bI(Ry(n),Ry(t));case 5:return on(n.stringValue,t.stringValue);case 6:return function(i,l){const d=Kd(i),f=Kd(l);return d.compareTo(f)}(n.bytesValue,t.bytesValue);case 7:return function(i,l){const d=i.split("/"),f=l.split("/");for(let m=0;m<d.length&&m<f.length;m++){const b=on(d[m],f[m]);if(0!==b)return b}return on(d.length,f.length)}(n.referenceValue,t.referenceValue);case 8:return function(i,l){const d=on(Gr(i.latitude),Gr(l.latitude));return 0!==d?d:on(Gr(i.longitude),Gr(l.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(i,l){const d=i.values||[],f=l.values||[];for(let m=0;m<d.length&&m<f.length;++m){const b=pu(d[m],f[m]);if(b)return b}return on(d.length,f.length)}(n.arrayValue,t.arrayValue);case 10:return function(i,l){const d=i.fields||{},f=Object.keys(d),m=l.fields||{},b=Object.keys(m);f.sort(),b.sort();for(let x=0;x<f.length&&x<b.length;++x){const I=on(f[x],b[x]);if(0!==I)return I;const V=pu(d[f[x]],m[b[x]]);if(0!==V)return V}return on(f.length,b.length)}(n.mapValue,t.mapValue);default:throw _t()}}function bI(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return on(n,t);const e=Ti(n),r=Ti(t),i=on(e.seconds,r.seconds);return 0!==i?i:on(e.nanos,r.nanos)}function np(n){return wI(n)}function wI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Ti(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Kd(n.bytesValue).toBase64():"referenceValue"in n?lt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(r){let i="[",l=!0;for(const d of r.values||[])l?l=!1:i+=",",i+=wI(d);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let l="{",d=!0;for(const f of i)d?d=!1:l+=",",l+=`${f}:${wI(r.fields[f])}`;return l+"}"}(n.mapValue):_t();var t}function Xd(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function oC(n){return!!n&&"integerValue"in n}function pm(n){return!!n&&"arrayValue"in n}function Lo(n){return!!n&&"nullValue"in n}function ZR(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gm(n){return!!n&&"mapValue"in n}function mm(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Yd(n.mapValue.fields,(e,r)=>t.mapValue.fields[e]=mm(r)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=mm(n.arrayValue.values[e]);return t}return Object.assign({},n)}function aC(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function CI(n){return"nullValue"in n?qR:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Xd(ac.empty(),lt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:_t()}function EI(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Xd(ac.empty(),lt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?vI:_t()}function ky(n,t){return void 0===n?t:void 0===t||pu(n,t)>0?n:t}function Py(n,t){return void 0===n?t:void 0===t||pu(n,t)<0?n:t}class Ii{constructor(t){this.value=t}static empty(){return new Ii({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!gm(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=mm(e)}setAll(t){let e=Di.emptyPath(),r={},i=[];t.forEach((d,f)=>{if(!e.isImmediateParentOf(f)){const m=this.getFieldsMap(e);this.applyChanges(m,r,i),r={},i=[],e=f.popLast()}d?r[f.lastSegment()]=mm(d):i.push(f.lastSegment())});const l=this.getFieldsMap(e);this.applyChanges(l,r,i)}delete(t){const e=this.field(t.popLast());gm(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return cc(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=e.mapValue.fields[t.get(r)];gm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,r){Yd(e,(i,l)=>t[i]=l);for(const i of r)delete t[i]}clone(){return new Ii(mm(this.value))}}function _m(n){const t=[];return Yd(n.fields,(e,r)=>{const i=new Di([e]);if(gm(r)){const l=_m(r.mapValue).fields;if(0===l.length)t.push(i);else for(const d of l)t.push(i.child(d))}else t.push(i)}),new ep(t)}class lr{constructor(t,e,r,i,l,d){this.key=t,this.documentType=e,this.version=r,this.readTime=i,this.data=l,this.documentState=d}static newInvalidDocument(t){return new lr(t,0,Bt.min(),Bt.min(),Ii.empty(),0)}static newFoundDocument(t,e,r){return new lr(t,1,e,Bt.min(),r,0)}static newNoDocument(t,e){return new lr(t,2,e,Bt.min(),Ii.empty(),0)}static newUnknownDocument(t,e){return new lr(t,3,e,Bt.min(),Ii.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ii.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ii.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof lr&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new lr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ym{constructor(t,e,r,i){this.indexId=t,this.collectionGroup=e,this.fields=r,this.indexState=i}}function Oy(n){return n.fields.find(t=>2===t.kind)}function eh(n){return n.fields.filter(t=>2!==t.kind)}ym.UNKNOWN_ID=-1;class Fy{constructor(t,e){this.fieldPath=t,this.kind=e}}class rp{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new rp(0,uc.min())}}function xI(n,t){const e=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Bt.fromTimestamp(1e9===r?new Qr(e+1,0):new Qr(e,r));return new uc(i,lt.empty(),t)}function zR(n){return new uc(n.readTime,n.key,-1)}class uc{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new uc(Bt.min(),lt.empty(),-1)}static max(){return new uc(Bt.max(),lt.empty(),-1)}}function lC(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=lt.comparator(n.documentKey,t.documentKey),0!==e?e:on(n.largestBatchId,t.largestBatchId))}class YR{constructor(t,e=null,r=[],i=[],l=null,d=null,f=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=i,this.limit=l,this.startAt=d,this.endAt=f,this.P=null}}function as(n,t=null,e=[],r=[],i=null,l=null,d=null){return new YR(n,t,e,r,i,l,d)}function ya(n){const t=ut(n);if(null===t.P){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+np(i.value);var i}).join(","),e+="|ob:",e+=t.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Qd(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(r=>np(r)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(r=>np(r)).join(",")),t.P=e}return t.P}function ip(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!nk(n.orderBy[i],t.orderBy[i]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((e=n.filters[i]).op!==(r=t.filters[i]).op||!e.field.isEqual(r.field)||!cc(e.value,r.value))return!1;var e,r;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!TI(n.startAt,t.startAt)&&TI(n.endAt,t.endAt)}function th(n){return lt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function sp(n,t){return n.filters.filter(e=>e instanceof Gi&&e.field.isEqual(t))}function cC(n,t,e){let r,i=!0;for(const l of sp(n,t)){let d,f=!0;switch(l.op){case"<":case"<=":d=CI(l.value);break;case"==":case"in":case">=":d=l.value;break;case">":d=l.value,f=!1;break;case"!=":case"not-in":d=qR}ky(r,d)===d&&(r=d,i=f)}if(null!==e)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(t)){const d=e.position[l];ky(r,d)===d&&(r=d,i=e.inclusive);break}return{value:r,inclusive:i}}function vm(n,t,e){let r,i=!0;for(const l of sp(n,t)){let d,f=!0;switch(l.op){case">=":case">":d=EI(l.value),f=!1;break;case"==":case"in":case"<=":d=l.value;break;case"<":d=l.value,f=!1;break;case"!=":case"not-in":d=vI}Py(r,d)===d&&(r=d,i=f)}if(null!==e)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(t)){const d=e.position[l];Py(r,d)===d&&(r=d,i=e.inclusive);break}return{value:r,inclusive:i}}class Gi extends class{}{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?"in"===e||"not-in"===e?this.V(t,e,r):new KR(t,e,r):"array-contains"===e?new XR(t,r):"in"===e?new ek(t,r):"not-in"===e?new tk(t,r):"array-contains-any"===e?new gu(t,r):new Gi(t,e,r)}static V(t,e,r){return"in"===e?new QR(t,r):new JR(t,r)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.v(pu(e,this.value)):null!==e&&tp(this.value)===tp(e)&&this.v(pu(e,this.value))}v(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return _t()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class KR extends Gi{constructor(t,e,r){super(t,e,r),this.key=lt.fromName(r.referenceValue)}matches(t){const e=lt.comparator(t.key,this.key);return this.v(e)}}class QR extends Gi{constructor(t,e){super(t,"in",e),this.keys=uC(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class JR extends Gi{constructor(t,e){super(t,"not-in",e),this.keys=uC(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function uC(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(r=>lt.fromName(r.referenceValue))}class XR extends Gi{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return pm(e)&&Jd(e.arrayValue,this.value)}}class ek extends Gi{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Jd(this.value.arrayValue,e)}}class tk extends Gi{constructor(t,e){super(t,"not-in",e)}matches(t){if(Jd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Jd(this.value.arrayValue,e)}}class gu extends Gi{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!pm(e)||!e.arrayValue.values)&&e.arrayValue.values.some(r=>Jd(this.value.arrayValue,r))}}class Vo{constructor(t,e){this.position=t,this.inclusive=e}}class mu{constructor(t,e="asc"){this.field=t,this.dir=e}}function nk(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}function DI(n,t,e){let r=0;for(let i=0;i<n.position.length;i++){const l=t[i],d=n.position[i];if(r=l.field.isKeyField()?lt.comparator(lt.fromName(d.referenceValue),e.key):pu(d,e.data.field(l.field)),"desc"===l.dir&&(r*=-1),0!==r)break}return r}function TI(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!cc(n.position[e],t.position[e]))return!1;return!0}class va{constructor(t,e=null,r=[],i=[],l=null,d="F",f=null,m=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=i,this.limit=l,this.limitType=d,this.startAt=f,this.endAt=m,this.D=null,this.C=null}}function II(n,t,e,r,i,l,d,f){return new va(n,t,e,r,i,l,d,f)}function nh(n){return new va(n)}function bm(n){return!Qd(n.limit)&&"F"===n.limitType}function Vy(n){return!Qd(n.limit)&&"L"===n.limitType}function dC(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function hC(n){for(const t of n.filters)if(t.S())return t.field;return null}function ba(n){return null!==n.collectionGroup}function ul(n){const t=ut(n);if(null===t.D){t.D=[];const e=hC(t),r=dC(t);if(null!==e&&null===r)e.isKeyField()||t.D.push(new mu(e)),t.D.push(new mu(Di.keyField(),"asc"));else{let i=!1;for(const l of t.explicitOrderBy)t.D.push(l),l.field.isKeyField()&&(i=!0);if(!i){const l=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new mu(Di.keyField(),l))}}}return t.D}function Wi(n){const t=ut(n);if(!t.C)if("F"===t.limitType)t.C=as(t.path,t.collectionGroup,ul(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const l of ul(t))e.push(new mu(l.field,"desc"===l.dir?"asc":"desc"));const r=t.endAt?new Vo(t.endAt.position,!t.endAt.inclusive):null,i=t.startAt?new Vo(t.startAt.position,!t.startAt.inclusive):null;t.C=as(t.path,t.collectionGroup,e,t.filters,t.limit,r,i)}return t.C}function wm(n,t,e){return new va(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function dl(n,t){return ip(Wi(n),Wi(t))&&n.limitType===t.limitType}function SI(n){return`${ya(Wi(n))}|lt:${n.limitType}`}function fC(n){return`Query(target=${function(n){let t=n.path.canonicalString();return null!==n.collectionGroup&&(t+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(t+=`, filters: [${n.filters.map(e=>{return`${(r=e).field.canonicalString()} ${r.op} ${np(r.value)}`;var r}).join(", ")}]`),Qd(n.limit)||(t+=", limit: "+n.limit),n.orderBy.length>0&&(t+=`, orderBy: [${n.orderBy.map(e=>{return`${(r=e).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(t+=", startAt: ",t+=n.startAt.inclusive?"b:":"a:",t+=n.startAt.position.map(e=>np(e)).join(",")),n.endAt&&(t+=", endAt: ",t+=n.endAt.inclusive?"a:":"b:",t+=n.endAt.position.map(e=>np(e)).join(",")),`Target(${t})`}(Wi(n))}; limitType=${n.limitType})`}function pC(n,t){return t.isFoundDocument()&&function(e,r){const i=r.key.path;return null!==e.collectionGroup?r.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(i):lt.isDocumentKey(e.path)?e.path.isEqual(i):e.path.isImmediateParentOf(i)}(n,t)&&function(e,r){for(const i of e.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,t)&&function(e,r){for(const i of e.filters)if(!i.matches(r))return!1;return!0}(n,t)&&(r=t,!((e=n).startAt&&!function(i,l,d){const f=DI(i,l,d);return i.inclusive?f<=0:f<0}(e.startAt,ul(e),r)||e.endAt&&!function(i,l,d){const f=DI(i,l,d);return i.inclusive?f>=0:f>0}(e.endAt,ul(e),r)));var e,r}function gC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function mC(n){return(t,e)=>{let r=!1;for(const i of ul(n)){const l=AI(i,t,e);if(0!==l)return l;r=r||i.field.isKeyField()}return 0}}function AI(n,t,e){const r=n.field.isKeyField()?lt.comparator(t.key,e.key):function(i,l,d){const f=l.data.field(i),m=d.data.field(i);return null!==f&&null!==m?pu(f,m):_t()}(n.field,t,e);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return _t()}}function _C(n,t){if(n.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lc(t)?"-0":t}}function By(n){return{integerValue:""+n}}function NI(n,t){return sC(t)?By(t):_C(n,t)}class Uy{constructor(){this._=void 0}}function MI(n,t,e){return n instanceof op?function(r,i){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(l.fields.__previous_value__=i),{mapValue:l}}(e,t):n instanceof ih?rk(n,t):n instanceof ap?ik(n,t):function(r,i){const l=Hy(r,i),d=RI(l)+RI(r.k);return oC(l)&&oC(r.k)?By(d):_C(r.M,d)}(n,t)}function rh(n,t,e){return n instanceof ih?rk(n,t):n instanceof ap?ik(n,t):e}function Hy(n,t){return n instanceof Cm?oC(e=t)||(r=e)&&"doubleValue"in r?t:{integerValue:0}:null;var r,e}class op extends Uy{}class ih extends Uy{constructor(t){super(),this.elements=t}}function rk(n,t){const e=kI(t);for(const r of n.elements)e.some(i=>cc(i,r))||e.push(r);return{arrayValue:{values:e}}}class ap extends Uy{constructor(t){super(),this.elements=t}}function ik(n,t){let e=kI(t);for(const r of n.elements)e=e.filter(i=>!cc(i,r));return{arrayValue:{values:e}}}class Cm extends Uy{constructor(t,e){super(),this.M=t,this.k=e}}function RI(n){return Gr(n.integerValue||n.doubleValue)}function kI(n){return pm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class $y{constructor(t,e){this.field=t,this.transform=e}}class aF{constructor(t,e){this.version=t,this.transformResults=e}}class gi{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new gi}static exists(t){return new gi(void 0,t)}static updateTime(t){return new gi(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function jy(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class yC{}function lF(n,t,e){n instanceof c?function(r,i,l){const d=r.value.clone(),f=p(r.fieldTransforms,i,l.transformResults);d.setAll(f),i.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(n,t,e):n instanceof u?function(r,i,l){if(!jy(r.precondition,i))return void i.convertToUnknownDocument(l.version);const d=p(r.fieldTransforms,i,l.transformResults),f=i.data;f.setAll(h(r)),f.setAll(d),i.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function PI(n,t,e){var i;n instanceof c?function(r,i,l){if(!jy(r.precondition,i))return;const d=r.value.clone(),f=_(r.fieldTransforms,l,i);d.setAll(f),i.convertToFoundDocument(o(i),d).setHasLocalMutations()}(n,t,e):n instanceof u?function(r,i,l){if(!jy(r.precondition,i))return;const d=_(r.fieldTransforms,l,i),f=i.data;f.setAll(h(r)),f.setAll(d),i.convertToFoundDocument(o(i),f).setHasLocalMutations()}(n,t,e):jy(n.precondition,i=t)&&i.convertToNoDocument(Bt.min())}function cF(n,t){let e=null;for(const r of n.fieldTransforms){const i=t.data.field(r.field),l=Hy(r.transform,i||null);null!=l&&(null==e&&(e=Ii.empty()),e.set(r.field,l))}return e||null}function s(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(r=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===r||e&&r&&Xf(e,r,(i,l)=>function(n,t){return n.field.isEqual(t.field)&&(r=t.transform,(e=n.transform)instanceof ih&&r instanceof ih||e instanceof ap&&r instanceof ap?Xf(e.elements,r.elements,cc):e instanceof Cm&&r instanceof Cm?cc(e.k,r.k):e instanceof op&&r instanceof op);var e,r}(i,l))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,r}function o(n){return n.isFoundDocument()?n.version:Bt.min()}class c extends yC{constructor(t,e,r,i=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=i,this.type=0}}class u extends yC{constructor(t,e,r,i,l=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=i,this.fieldTransforms=l,this.type=1}}function h(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const r=n.data.field(e);t.set(e,r)}}),t}function p(n,t,e){const r=new Map;$t(n.length===e.length);for(let i=0;i<e.length;i++){const l=n[i],d=l.transform,f=t.data.field(l.field);r.set(l.field,rh(d,f,e[i]))}return r}function _(n,t,e){const r=new Map;for(const i of n){const l=i.transform,d=e.data.field(i.field);r.set(i.field,MI(l,d,t))}return r}class v extends yC{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}}class C extends yC{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}}class T{constructor(t){this.count=t}}var M,$;function K(n){switch(n){default:return _t();case Be.CANCELLED:case Be.UNKNOWN:case Be.DEADLINE_EXCEEDED:case Be.RESOURCE_EXHAUSTED:case Be.INTERNAL:case Be.UNAVAILABLE:case Be.UNAUTHENTICATED:return!1;case Be.INVALID_ARGUMENT:case Be.NOT_FOUND:case Be.ALREADY_EXISTS:case Be.PERMISSION_DENIED:case Be.FAILED_PRECONDITION:case Be.ABORTED:case Be.OUT_OF_RANGE:case Be.UNIMPLEMENTED:case Be.DATA_LOSS:return!0}}function ue(n){if(void 0===n)return ni("GRPC error has no .code"),Be.UNKNOWN;switch(n){case M.OK:return Be.OK;case M.CANCELLED:return Be.CANCELLED;case M.UNKNOWN:return Be.UNKNOWN;case M.DEADLINE_EXCEEDED:return Be.DEADLINE_EXCEEDED;case M.RESOURCE_EXHAUSTED:return Be.RESOURCE_EXHAUSTED;case M.INTERNAL:return Be.INTERNAL;case M.UNAVAILABLE:return Be.UNAVAILABLE;case M.UNAUTHENTICATED:return Be.UNAUTHENTICATED;case M.INVALID_ARGUMENT:return Be.INVALID_ARGUMENT;case M.NOT_FOUND:return Be.NOT_FOUND;case M.ALREADY_EXISTS:return Be.ALREADY_EXISTS;case M.PERMISSION_DENIED:return Be.PERMISSION_DENIED;case M.FAILED_PRECONDITION:return Be.FAILED_PRECONDITION;case M.ABORTED:return Be.ABORTED;case M.OUT_OF_RANGE:return Be.OUT_OF_RANGE;case M.UNIMPLEMENTED:return Be.UNIMPLEMENTED;case M.DATA_LOSS:return Be.DATA_LOSS;default:return _t()}}($=M||(M={}))[$.OK=0]="OK",$[$.CANCELLED=1]="CANCELLED",$[$.UNKNOWN=2]="UNKNOWN",$[$.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$[$.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$[$.NOT_FOUND=5]="NOT_FOUND",$[$.ALREADY_EXISTS=6]="ALREADY_EXISTS",$[$.PERMISSION_DENIED=7]="PERMISSION_DENIED",$[$.UNAUTHENTICATED=16]="UNAUTHENTICATED",$[$.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$[$.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$[$.ABORTED=10]="ABORTED",$[$.OUT_OF_RANGE=11]="OUT_OF_RANGE",$[$.UNIMPLEMENTED=12]="UNIMPLEMENTED",$[$.INTERNAL=13]="INTERNAL",$[$.UNAVAILABLE=14]="UNAVAILABLE",$[$.DATA_LOSS=15]="DATA_LOSS";class pe{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(void 0!==r)for(const[i,l]of r)if(this.equalsFn(i,t))return l}has(t){return void 0!==this.get(t)}set(t,e){const r=this.mapKeyFn(t),i=this.inner[r];if(void 0===i)return this.inner[r]=[[t,e]],void this.innerSize++;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],t))return void(i[l]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return 1===r.length?delete this.inner[e]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Yd(this.inner,(e,r)=>{for(const[i,l]of r)t(i,l)})}isEmpty(){return _I(this.inner)}size(){return this.innerSize}}class Se{constructor(t,e){this.comparator=t,this.root=e||ze.EMPTY}insert(t,e){return new Se(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,ze.BLACK,null,null))}remove(t){return new Se(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ze.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(0===r)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(0===i)return e+r.left.size;i<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,r)=>(t(e,r),!1))}toString(){const t=[];return this.inorderTraversal((e,r)=>(t.push(`${e}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Te(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Te(this.root,t,this.comparator,!1)}getReverseIterator(){return new Te(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Te(this.root,t,this.comparator,!0)}}class Te{constructor(t,e,r,i){this.isReverse=i,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=e?r(t.key,e):1,e&&i&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(0===l){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ze{constructor(t,e,r,i,l){this.key=t,this.value=e,this.color=null!=r?r:ze.RED,this.left=null!=i?i:ze.EMPTY,this.right=null!=l?l:ze.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,i,l){return new ze(null!=t?t:this.key,null!=e?e:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let i=this;const l=r(t,i.key);return i=l<0?i.copy(null,null,null,i.left.insert(t,e,r),null):0===l?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ze.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return ze.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _t();const t=this.left.check();if(t!==this.right.check())throw _t();return t+(this.isRed()?0:1)}}ze.EMPTY=null,ze.RED=!0,ze.BLACK=!1,ze.EMPTY=new class{constructor(){this.size=0}get key(){throw _t()}get value(){throw _t()}get color(){throw _t()}get left(){throw _t()}get right(){throw _t()}copy(n,t,e,r,i){return this}insert(n,t,e){return new ze(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Pe{constructor(t){this.comparator=t,this.data=new Se(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,r)=>(t(e),!1))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let r;for(r=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new It(this.data.getIterator())}getIteratorFrom(t){return new It(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(r=>{e=e.add(r)}),e}isEqual(t){if(!(t instanceof Pe)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const i=e.getNext().key,l=r.getNext().key;if(0!==this.comparator(i,l))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Pe(this.comparator);return e.data=t,e}}class It{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Pt(n){return n.hasNext()?n.getNext():void 0}const En=new Se(lt.comparator);function Kn(){return En}const Bo=new Se(lt.comparator);function sh(){return Bo}function hl(){return new pe(n=>n.toString(),(n,t)=>n.isEqual(t))}const lp=new Se(lt.comparator),cp=new Pe(lt.comparator);function Hn(...n){let t=cp;for(const e of n)t=t.add(e);return t}const vC=new Pe(on);function up(){return vC}class oh{constructor(t,e,r,i,l){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,e){const r=new Map;return r.set(t,ah.createSynthesizedTargetChangeForCurrentChange(t,e)),new oh(Bt.min(),r,up(),Kn(),Hn())}}class ah{constructor(t,e,r,i,l){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,e){return new ah(pi.EMPTY_BYTE_STRING,e,Hn(),Hn(),Hn())}}class OI{constructor(t,e,r,i){this.O=t,this.removedTargetIds=e,this.key=r,this.F=i}}class uF{constructor(t,e){this.targetId=t,this.$=e}}class dF{constructor(t,e,r=pi.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=i}}class hF{constructor(){this.B=0,this.L=pF(),this.U=pi.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(t){t.approximateByteSize()>0&&(this.K=!0,this.U=t)}H(){let t=Hn(),e=Hn(),r=Hn();return this.L.forEach((i,l)=>{switch(l){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:r=r.add(i);break;default:_t()}}),new ah(this.U,this.q,t,e,r)}J(){this.K=!1,this.L=pF()}Y(t,e){this.K=!0,this.L=this.L.insert(t,e)}X(t){this.K=!0,this.L=this.L.remove(t)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Q8{constructor(t){this.nt=t,this.st=new Map,this.it=Kn(),this.rt=fF(),this.ot=new Pe(on)}ut(t){for(const e of t.O)t.F&&t.F.isFoundDocument()?this.at(e,t.F):this.ct(e,t.key,t.F);for(const e of t.removedTargetIds)this.ct(e,t.key,t.F)}ht(t){this.forEachTarget(t,e=>{const r=this.lt(e);switch(t.state){case 0:this.ft(e)&&r.W(t.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(t.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(e);break;case 3:this.ft(e)&&(r.et(),r.W(t.resumeToken));break;case 4:this.ft(e)&&(this.dt(e),r.W(t.resumeToken));break;default:_t()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.st.forEach((r,i)=>{this.ft(i)&&e(i)})}_t(t){const e=t.targetId,r=t.$.count,i=this.wt(e);if(i){const l=i.target;if(th(l))if(0===r){const d=new lt(l.path);this.ct(e,d,lr.newNoDocument(d,Bt.min()))}else $t(1===r);else this.gt(e)!==r&&(this.dt(e),this.ot=this.ot.add(e))}}yt(t){const e=new Map;this.st.forEach((l,d)=>{const f=this.wt(d);if(f){if(l.current&&th(f.target)){const m=new lt(f.target.path);null!==this.it.get(m)||this.It(d,m)||this.ct(d,m,lr.newNoDocument(m,t))}l.j&&(e.set(d,l.H()),l.J())}});let r=Hn();this.rt.forEach((l,d)=>{let f=!0;d.forEachWhile(m=>{const b=this.wt(m);return!b||2===b.purpose||(f=!1,!1)}),f&&(r=r.add(l))}),this.it.forEach((l,d)=>d.setReadTime(t));const i=new oh(t,e,this.ot,this.it,r);return this.it=Kn(),this.rt=fF(),this.ot=new Pe(on),i}at(t,e){if(!this.ft(t))return;const r=this.It(t,e.key)?2:0;this.lt(t).Y(e.key,r),this.it=this.it.insert(e.key,e),this.rt=this.rt.insert(e.key,this.Tt(e.key).add(t))}ct(t,e,r){if(!this.ft(t))return;const i=this.lt(t);this.It(t,e)?i.Y(e,1):i.X(e),this.rt=this.rt.insert(e,this.Tt(e).delete(t)),r&&(this.it=this.it.insert(e,r))}removeTarget(t){this.st.delete(t)}gt(t){const e=this.lt(t).H();return this.nt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Z(t){this.lt(t).Z()}lt(t){let e=this.st.get(t);return e||(e=new hF,this.st.set(t,e)),e}Tt(t){let e=this.rt.get(t);return e||(e=new Pe(on),this.rt=this.rt.insert(t,e)),e}ft(t){const e=null!==this.wt(t);return e||et("WatchChangeAggregator","Detected inactive target",t),e}wt(t){const e=this.st.get(t);return e&&e.G?null:this.nt.Et(t)}dt(t){this.st.set(t,new hF),this.nt.getRemoteKeysForTarget(t).forEach(e=>{this.ct(t,e,null)})}It(t,e){return this.nt.getRemoteKeysForTarget(t).has(e)}}function fF(){return new Se(lt.comparator)}function pF(){return new Se(lt.comparator)}const J8={asc:"ASCENDING",desc:"DESCENDING"},X8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class e4{constructor(t,e){this.databaseId=t,this.N=e}}function bC(n,t){return n.N?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function gF(n,t){return n.N?t.toBase64():t.toUint8Array()}function t4(n,t){return bC(n,t.toTimestamp())}function ls(n){return $t(!!n),Bt.fromTimestamp(function(t){const e=Ti(t);return new Qr(e.seconds,e.nanos)}(n))}function sk(n,t){return(e=n,new Pn(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function mF(n){const t=Pn.fromString(n);return $t(DF(t)),t}function wC(n,t){return sk(n.databaseId,t.path)}function _u(n,t){const e=mF(t);if(e.get(1)!==n.databaseId.projectId)throw new Ye(Be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Ye(Be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new lt(yF(e))}function ok(n,t){return sk(n.databaseId,t)}function _F(n){const t=mF(n);return 4===t.length?Pn.emptyPath():yF(t)}function CC(n){return new Pn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function yF(n){return $t(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function vF(n,t,e){return{name:wC(n,t),fields:e.value.mapValue.fields}}function bF(n,t,e){const r=_u(n,t.name),i=ls(t.updateTime),l=new Ii({mapValue:{fields:t.fields}}),d=lr.newFoundDocument(r,i,l);return e&&d.setHasCommittedMutations(),e?d.setHasCommittedMutations():d}function EC(n,t){let e;if(t instanceof c)e={update:vF(n,t.key,t.value)};else if(t instanceof v)e={delete:wC(n,t.key)};else if(t instanceof u)e={update:vF(n,t.key,t.data),updateMask:u4(t.fieldMask)};else{if(!(t instanceof C))return _t();e={verify:wC(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(r=>function(i,l){const d=l.transform;if(d instanceof op)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof ih)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof ap)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Cm)return{fieldPath:l.field.canonicalString(),increment:d.k};throw _t()}(0,r))),t.precondition.isNone||(e.currentDocument=void 0!==(i=t.precondition).updateTime?{updateTime:t4(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:_t()),e;var i}function ak(n,t){const e=t.currentDocument?void 0!==(i=t.currentDocument).updateTime?gi.updateTime(ls(i.updateTime)):void 0!==i.exists?gi.exists(i.exists):gi.none():gi.none(),r=t.updateTransforms?t.updateTransforms.map(i=>function(l,d){let f=null;"setToServerValue"in d?($t("REQUEST_TIME"===d.setToServerValue),f=new op):"appendMissingElements"in d?f=new ih(d.appendMissingElements.values||[]):"removeAllFromArray"in d?f=new ap(d.removeAllFromArray.values||[]):"increment"in d?f=new Cm(l,d.increment):_t();const m=Di.fromServerFormat(d.fieldPath);return new $y(m,f)}(n,i)):[];var i;if(t.update){const i=_u(n,t.update.name),l=new Ii({mapValue:{fields:t.update.fields}});if(t.updateMask){const d=new ep((t.updateMask.fieldPaths||[]).map(b=>Di.fromServerFormat(b)));return new u(i,l,d,e,r)}return new c(i,l,e,r)}if(t.delete){const i=_u(n,t.delete);return new v(i,e)}if(t.verify){const i=_u(n,t.verify);return new C(i,e)}return _t()}function wF(n,t){return{documents:[ok(n,t.path)]}}function CF(n,t){const e={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(e.parent=ok(n,r),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=ok(n,r.popLast()),e.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0===m.length)return;const b=m.map(x=>function(I){if("=="===I.op){if(ZR(I.value))return{unaryFilter:{field:Gy(I.field),op:"IS_NAN"}};if(Lo(I.value))return{unaryFilter:{field:Gy(I.field),op:"IS_NULL"}}}else if("!="===I.op){if(ZR(I.value))return{unaryFilter:{field:Gy(I.field),op:"IS_NOT_NAN"}};if(Lo(I.value))return{unaryFilter:{field:Gy(I.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gy(I.field),op:a4(I.op),value:I.value}}}(x));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(t.filters);i&&(e.structuredQuery.where=i);const l=function(m){if(0!==m.length)return m.map(b=>{return{field:Gy((x=b).field),direction:o4(x.dir)};var x})}(t.orderBy);l&&(e.structuredQuery.orderBy=l);const d=(b=t.limit,n.N||Qd(b)?b:{value:b});var b,f,m;return null!==d&&(e.structuredQuery.limit=d),t.startAt&&(e.structuredQuery.startAt={before:(f=t.startAt).inclusive,values:f.position}),t.endAt&&(e.structuredQuery.endAt={before:!(m=t.endAt).inclusive,values:m.position}),e}function EF(n){let t=_F(n.parent);const e=n.structuredQuery,r=e.from?e.from.length:0;let i=null;if(r>0){$t(1===r);const x=e.from[0];x.allDescendants?i=x.collectionId:t=t.child(x.collectionId)}let l=[];e.where&&(l=xF(e.where));let d=[];e.orderBy&&(d=e.orderBy.map(x=>{return new mu(Wy((I=x).field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction));var I}));let f=null;e.limit&&(f=function(x){let I;return I="object"==typeof x?x.value:x,Qd(I)?null:I}(e.limit));let m=null;var x;e.startAt&&(m=new Vo((x=e.startAt).values||[],!!x.before));let b=null;return e.endAt&&(b=function(x){return new Vo(x.values||[],!x.before)}(e.endAt)),II(t,i,d,l,f,"F",m,b)}function xF(n){return n?void 0!==n.unaryFilter?[c4(n)]:void 0!==n.fieldFilter?[l4(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(t=>xF(t)).reduce((t,e)=>t.concat(e)):_t():[]}function o4(n){return J8[n]}function a4(n){return X8[n]}function Gy(n){return{fieldPath:n.canonicalString()}}function Wy(n){return Di.fromServerFormat(n.fieldPath)}function l4(n){return Gi.create(Wy(n.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _t()}}(n.fieldFilter.op),n.fieldFilter.value)}function c4(n){switch(n.unaryFilter.op){case"IS_NAN":const t=Wy(n.unaryFilter.field);return Gi.create(t,"==",{doubleValue:NaN});case"IS_NULL":const e=Wy(n.unaryFilter.field);return Gi.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Wy(n.unaryFilter.field);return Gi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Wy(n.unaryFilter.field);return Gi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return _t()}}function u4(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function DF(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function so(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=TF(t)),t=d4(n.get(e),t);return TF(t)}function d4(n,t){let e=t;const r=n.length;for(let i=0;i<r;i++){const l=n.charAt(i);switch(l){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=l}}return e}function TF(n){return n+"\x01\x01"}function yu(n){const t=n.length;if($t(t>=2),2===t)return $t("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Pn.emptyPath();const e=t-2,r=[];let i="";for(let l=0;l<t;){const d=n.indexOf("\x01",l);switch((d<0||d>e)&&_t(),n.charAt(d+1)){case"\x01":const f=n.substring(l,d);let m;0===i.length?m=f:(i+=f,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(l,d),i+="\0";break;case"\x11":i+=n.substring(l,d+1);break;default:_t()}l=d+2}return new Pn(r)}const IF=["userId","batchId"];function FI(n,t){return[n,so(t)]}function SF(n,t,e){return[n,so(t),e]}const h4={},f4=["prefixPath","collectionGroup","readTime","documentId"],p4=["prefixPath","collectionGroup","documentId"],g4=["collectionGroup","readTime","prefixPath","documentId"],m4=["canonicalId","targetId"],_4=["targetId","path"],y4=["path","targetId"],v4=["collectionId","parent"],b4=["indexId","uid"],w4=["uid","sequenceNumber"],C4=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],E4=["indexId","uid","orderedDocumentKey"],x4=["userId","collectionPath","documentId"],D4=["userId","collectionPath","largestBatchId"],T4=["userId","collectionGroup","largestBatchId"],AF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],I4=[...AF,"documentOverlays"],NF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],S4=[...NF,"indexConfiguration","indexState","indexEntries"],MF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}class je{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&_t(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new je((r,i)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(r,i)},this.catchCallback=l=>{this.wrapFailure(e,l).next(r,i)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof je?e:je.resolve(e)}catch(e){return je.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):je.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):je.reject(e)}static resolve(t){return new je((e,r)=>{e(t)})}static reject(t){return new je((e,r)=>{r(t)})}static waitFor(t){return new je((e,r)=>{let i=0,l=0,d=!1;t.forEach(f=>{++i,f.next(()=>{++l,d&&l===i&&e()},m=>r(m))}),d=!0,l===i&&e()})}static or(t){let e=je.resolve(!1);for(const r of t)e=e.next(i=>i?je.resolve(i):r());return e}static forEach(t,e){const r=[];return t.forEach((i,l)=>{r.push(e.call(this,i,l))}),this.waitFor(r)}}class LI{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.At=new Ei,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{e.error?this.At.reject(new xC(t,e.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=lk(r.target.error);this.At.reject(new xC(t,i))}}static open(t,e,r,i){try{return new LI(e,t.transaction(i,r))}catch(l){throw new xC(e,l)}}get Rt(){return this.At.promise}abort(t){t&&this.At.reject(t),this.aborted||(et("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new N4(e)}}class dc{constructor(t,e,r){this.name=t,this.version=e,this.bt=r,12.2===dc.Vt((0,Y.z$)())&&ni("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return et("SimpleDb","Removing database:",t),xm(window.indexedDB.deleteDatabase(t)).toPromise()}static vt(){if(!(0,Y.hl)())return!1;if(dc.St())return!0;const t=(0,Y.z$)(),e=dc.Vt(t),r=0<e&&e<10,i=dc.Dt(t),l=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||l)}static St(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Ct)}static xt(t,e){return t.store(e)}static Vt(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(t){var e=this;return(0,$e.Z)(function*(){return e.db||(et("SimpleDb","Opening database:",e.name),e.db=yield new Promise((r,i)=>{const l=indexedDB.open(e.name,e.version);l.onsuccess=d=>{r(d.target.result)},l.onblocked=()=>{i(new xC(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=d=>{const f=d.target.error;i("VersionError"===f.name?new Ye(Be.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Ye(Be.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new xC(t,f))},l.onupgradeneeded=d=>{et("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',d.oldVersion),e.bt.kt(d.target.result,l.transaction,d.oldVersion,e.version).next(()=>{et("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.Mt&&(e.db.onversionchange=r=>e.Mt(r)),e.db})()}Ot(t){this.Mt=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,r,i){var l=this;return(0,$e.Z)(function*(){const d="readonly"===e;let f=0;for(;;){++f;try{l.db=yield l.Nt(t);const m=LI.open(l.db,t,d?"readonly":"readwrite",r),b=i(m).next(x=>(m.Pt(),x)).catch(x=>(m.abort(x),je.reject(x))).toPromise();return b.catch(()=>{}),yield m.Rt,b}catch(m){const b="FirebaseError"!==m.name&&f<3;if(et("SimpleDb","Transaction failed with error:",m.message,"Retrying:",b),l.close(),!b)return Promise.reject(m)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class A4{constructor(t){this.Ft=t,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(t){this.Ft=t}done(){this.$t=!0}Ut(t){this.Bt=t}delete(){return xm(this.Ft.delete())}}class xC extends Ye{constructor(t,e){super(Be.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Em(n){return"IndexedDbTransactionError"===n.name}class N4{constructor(t){this.store=t}put(t,e){let r;return void 0!==e?(et("SimpleDb","PUT",this.store.name,t,e),r=this.store.put(e,t)):(et("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),xm(r)}add(t){return et("SimpleDb","ADD",this.store.name,t,t),xm(this.store.add(t))}get(t){return xm(this.store.get(t)).next(e=>(void 0===e&&(e=null),et("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return et("SimpleDb","DELETE",this.store.name,t),xm(this.store.delete(t))}count(){return et("SimpleDb","COUNT",this.store.name),xm(this.store.count())}qt(t,e){const r=this.options(t,e);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),l=[];return this.Kt(i,(d,f)=>{l.push(f)}).next(()=>l)}{const i=this.store.getAll(r.range);return new je((l,d)=>{i.onerror=f=>{d(f.target.error)},i.onsuccess=f=>{l(f.target.result)}})}}Gt(t,e){const r=this.store.getAll(t,null===e?void 0:e);return new je((i,l)=>{r.onerror=d=>{l(d.target.error)},r.onsuccess=d=>{i(d.target.result)}})}Qt(t,e){et("SimpleDb","DELETE ALL",this.store.name);const r=this.options(t,e);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(l,d,f)=>f.delete())}Wt(t,e){let r;e?r=t:(r={},e=t);const i=this.cursor(r);return this.Kt(i,e)}zt(t){const e=this.cursor({});return new je((r,i)=>{e.onerror=l=>{const d=lk(l.target.error);i(d)},e.onsuccess=l=>{const d=l.target.result;d?t(d.primaryKey,d.value).next(f=>{f?d.continue():r()}):r()}})}Kt(t,e){const r=[];return new je((i,l)=>{t.onerror=d=>{l(d.target.error)},t.onsuccess=d=>{const f=d.target.result;if(!f)return void i();const m=new A4(f),b=e(f.primaryKey,f.value,m);if(b instanceof je){const x=b.catch(I=>(m.done(),je.reject(I)));r.push(x)}m.isDone?i():null===m.Lt?f.continue():f.continue(m.Lt)}}).next(()=>je.waitFor(r))}options(t,e){let r;return void 0!==t&&("string"==typeof t?r=t:e=t),{index:r,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const r=this.store.index(t.index);return t.jt?r.openKeyCursor(t.range,e):r.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function xm(n){return new je((t,e)=>{n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{const i=lk(r.target.error);e(i)}})}let kF=!1;function lk(n){const t=dc.Vt((0,Y.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const r=new Ye("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return kF||(kF=!0,setTimeout(()=>{throw r},0)),r}}return n}class PF extends RF{constructor(t,e){super(),this.Ht=t,this.currentSequenceNumber=e}}function cs(n,t){const e=ut(n);return dc.xt(e.Ht,t)}class ck{constructor(t,e,r,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const l=this.mutations[i];l.key.isEqual(t.key)&&lF(l,t,r[i])}}applyToLocalView(t){for(const e of this.baseMutations)e.key.isEqual(t.key)&&PI(e,t,this.localWriteTime);for(const e of this.mutations)e.key.isEqual(t.key)&&PI(e,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach(e=>{const r=t.get(e.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Bt.min())})}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Hn())}isEqual(t){return this.batchId===t.batchId&&Xf(this.mutations,t.mutations,(e,r)=>s(e,r))&&Xf(this.baseMutations,t.baseMutations,(e,r)=>s(e,r))}}class uk{constructor(t,e,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=i}static from(t,e,r){$t(t.mutations.length===r.length);let i=lp;const l=t.mutations;for(let d=0;d<l.length;d++)i=i.insert(l[d].key,r[d].version);return new uk(t,e,r,i)}}class dk{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class dp{constructor(t,e,r,i,l=Bt.min(),d=Bt.min(),f=pi.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=f}withSequenceNumber(t){return new dp(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new dp(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new dp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class OF{constructor(t){this.Jt=t}}function FF(n,t){const e=t.key,r={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:VI(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document={name:wC(i=n.Jt,(l=t).key),fields:l.data.value.mapValue.fields,updateTime:bC(i,l.version.toTimestamp())};else if(t.isNoDocument())r.noDocument={path:e.path.toArray(),readTime:Dm(t.version)};else{if(!t.isUnknownDocument())return _t();r.unknownDocument={path:e.path.toArray(),version:Dm(t.version)}}var i,l;return r}function VI(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function Dm(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Tm(n){const t=new Qr(n.seconds,n.nanoseconds);return Bt.fromTimestamp(t)}function qy(n,t){const e=(t.baseMutations||[]).map(l=>ak(n.Jt,l));for(let l=0;l<t.mutations.length-1;++l){const d=t.mutations[l];l+1<t.mutations.length&&void 0!==t.mutations[l+1].transform&&(d.updateTransforms=t.mutations[l+1].transform.fieldTransforms,t.mutations.splice(l+1,1),++l)}const r=t.mutations.map(l=>ak(n.Jt,l)),i=Qr.fromMillis(t.localWriteTimeMs);return new ck(t.batchId,i,e,r)}function DC(n){const t=Tm(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?Tm(n.lastLimboFreeSnapshotVersion):Bt.min();let r;var i;return void 0!==n.query.documents?($t(1===(i=n.query).documents.length),r=Wi(nh(_F(i.documents[0])))):r=Wi(EF(n.query)),new dp(r,n.targetId,0,n.lastListenSequenceNumber,t,e,pi.fromBase64String(n.resumeToken))}function LF(n,t){const e=Dm(t.snapshotVersion),r=Dm(t.lastLimboFreeSnapshotVersion);let i;i=th(t.target)?wF(n.Jt,t.target):CF(n.Jt,t.target);const l=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:ya(t.target),readTime:e,resumeToken:l,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function hk(n){const t=EF({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?wm(t,t.limit,"L"):t}function fk(n,t){return new dk(t.largestBatchId,ak(n.Jt,t.overlayMutation))}function VF(n,t){const e=t.path.lastSegment();return[n,so(t.path.popLast()),e]}class R4{getBundleMetadata(t,e){return BF(t).get(e).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Tm(i.createTime),version:i.version};var i})}saveBundleMetadata(t,e){return BF(t).put({bundleId:(r=e).id,createTime:Dm(ls(r.createTime)),version:r.version});var r}getNamedQuery(t,e){return UF(t).get(e).next(r=>{if(r)return{name:(i=r).name,query:hk(i.bundledQuery),readTime:Tm(i.readTime)};var i})}saveNamedQuery(t,e){return UF(t).put({name:(r=e).name,readTime:Dm(ls(r.readTime)),bundledQuery:r.bundledQuery});var r}}function BF(n){return cs(n,"bundles")}function UF(n){return cs(n,"namedQueries")}class pk{constructor(t,e){this.M=t,this.userId=e}static Yt(t,e){return new pk(t,e.uid||"")}getOverlay(t,e){return TC(t).get(VF(this.userId,e)).next(r=>r?fk(this.M,r):null)}saveOverlays(t,e,r){const i=[];return r.forEach((l,d)=>{const f=new dk(e,d);i.push(this.Xt(t,f))}),je.waitFor(i)}removeOverlaysForBatchId(t,e,r){const i=new Set;e.forEach(d=>i.add(so(d.getCollectionPath())));const l=[];return i.forEach(d=>{const f=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);l.push(TC(t).Qt("collectionPathOverlayIndex",f))}),je.waitFor(l)}getOverlaysForCollection(t,e,r){const i=hl(),l=so(e),d=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return TC(t).qt("collectionPathOverlayIndex",d).next(f=>{for(const m of f){const b=fk(this.M,m);i.set(b.getKey(),b)}return i})}getOverlaysForCollectionGroup(t,e,r,i){const l=hl();let d;const f=IDBKeyRange.bound([this.userId,e,r],[this.userId,e,Number.POSITIVE_INFINITY],!0);return TC(t).Wt({index:"collectionGroupOverlayIndex",range:f},(m,b,x)=>{const I=fk(this.M,b);l.size()<i||I.largestBatchId===d?(l.set(I.getKey(),I),d=I.largestBatchId):x.done()}).next(()=>l)}Xt(t,e){return TC(t).put(function(r,i,l){const[d,f,m]=VF(i,l.mutation.key);return{userId:i,collectionPath:f,documentId:m,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:EC(r.Jt,l.mutation)}}(this.M,this.userId,e))}}function TC(n){return cs(n,"documentOverlays")}class Im{constructor(){}Zt(t,e){this.te(t,e),e.ee()}te(t,e){if("nullValue"in t)this.ne(e,5);else if("booleanValue"in t)this.ne(e,10),e.se(t.booleanValue?1:0);else if("integerValue"in t)this.ne(e,15),e.se(Gr(t.integerValue));else if("doubleValue"in t){const r=Gr(t.doubleValue);isNaN(r)?this.ne(e,13):(this.ne(e,15),lc(r)?e.se(0):e.se(r))}else if("timestampValue"in t){const r=t.timestampValue;this.ne(e,20),"string"==typeof r?e.ie(r):(e.ie(`${r.seconds||""}`),e.se(r.nanos||0))}else if("stringValue"in t)this.re(t.stringValue,e),this.oe(e);else if("bytesValue"in t)this.ne(e,30),e.ue(Kd(t.bytesValue)),this.oe(e);else if("referenceValue"in t)this.ae(t.referenceValue,e);else if("geoPointValue"in t){const r=t.geoPointValue;this.ne(e,45),e.se(r.latitude||0),e.se(r.longitude||0)}else"mapValue"in t?aC(t)?this.ne(e,Number.MAX_SAFE_INTEGER):(this.ce(t.mapValue,e),this.oe(e)):"arrayValue"in t?(this.he(t.arrayValue,e),this.oe(e)):_t()}re(t,e){this.ne(e,25),this.le(t,e)}le(t,e){e.ie(t)}ce(t,e){const r=t.fields||{};this.ne(e,55);for(const i of Object.keys(r))this.re(i,e),this.te(r[i],e)}he(t,e){const r=t.values||[];this.ne(e,50);for(const i of r)this.te(i,e)}ae(t,e){this.ne(e,37),lt.fromName(t).path.forEach(r=>{this.ne(e,60),this.le(r,e)})}ne(t,e){t.se(e)}oe(t){t.se(2)}}function k4(n){if(0===n)return 8;let t=0;return n>>4==0&&(t+=4,n<<=4),n>>6==0&&(t+=2,n<<=2),n>>7==0&&(t+=1),t}function HF(n){const t=64-function(e){let r=0;for(let i=0;i<8;++i){const l=k4(255&e[i]);if(r+=l,8!==l)break}return r}(n);return Math.ceil(t/8)}Im.fe=new Im;class P4{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this._e(r.value),r=e.next();this.we()}me(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.ge(r.value),r=e.next();this.ye()}pe(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(e<"\ud800"||"\udbff"<e)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=e.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(e<"\ud800"||"\udbff"<e)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=e.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(t){const e=this.Ee(t),r=HF(e);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=e.length-r;i<e.length;++i)this.buffer[this.position++]=255&e[i]}Re(t){const e=this.Ee(t),r=HF(e);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=e.length-r;i<e.length;++i)this.buffer[this.position++]=~(255&e[i])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(t){this.Ae(t.length),this.buffer.set(t,this.position),this.position+=t.length}Se(){return this.buffer.slice(0,this.position)}Ee(t){const e=function(i){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,i,!1),new Uint8Array(l.buffer)}(t),r=0!=(128&e[0]);e[0]^=r?255:128;for(let i=1;i<e.length;++i)e[i]^=r?255:0;return e}_e(t){const e=255&t;0===e?(this.be(0),this.be(255)):255===e?(this.be(255),this.be(0)):this.be(e)}ge(t){const e=255&t;0===e?(this.ve(0),this.ve(255)):255===e?(this.ve(255),this.ve(0)):this.ve(t)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(t){this.Ae(1),this.buffer[this.position++]=t}ve(t){this.Ae(1),this.buffer[this.position++]=~t}Ae(t){const e=t+this.position;if(e<=this.buffer.length)return;let r=2*this.buffer.length;r<e&&(r=e);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class O4{constructor(t){this.De=t}ue(t){this.De.de(t)}ie(t){this.De.pe(t)}se(t){this.De.Te(t)}ee(){this.De.Pe()}}class F4{constructor(t){this.De=t}ue(t){this.De.me(t)}ie(t){this.De.Ie(t)}se(t){this.De.Re(t)}ee(){this.De.Ve()}}class IC{constructor(){this.De=new P4,this.Ce=new O4(this.De),this.xe=new F4(this.De)}seed(t){this.De.seed(t)}Ne(t){return 0===t?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class hp{constructor(t,e,r,i){this.indexId=t,this.documentKey=e,this.arrayValue=r,this.directionalValue=i}ke(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(e);return r.set(this.directionalValue,0),e!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new hp(this.indexId,this.documentKey,this.arrayValue,r)}}function Sm(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=$F(n.arrayValue,t.arrayValue),0!==e?e:(e=$F(n.directionalValue,t.directionalValue),0!==e?e:lt.comparator(n.documentKey,t.documentKey)))}function $F(n,t){for(let e=0;e<n.length&&e<t.length;++e){const r=n[e]-t[e];if(0!==r)return r}return n.length-t.length}class L4{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];for(const e of t.filters){const r=e;r.S()?this.Fe=r:this.Oe.push(r)}}$e(t){const e=Oy(t);if(void 0!==e&&!this.Be(e))return!1;const r=eh(t);let i=0,l=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const d=r[i];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[l++],d))return!1;++i}for(;i<r.length;++i){const d=r[i];if(l>=this.Me.length||!this.Ue(this.Me[l++],d))return!1}return!0}Be(t){for(const e of this.Oe)if(this.Le(e,t))return!0;return!1}Le(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}Ue(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}class V4{constructor(){this.qe=new gk}addToCollectionParentIndex(t,e){return this.qe.add(e),je.resolve()}getCollectionParents(t,e){return je.resolve(this.qe.getEntries(e))}addFieldIndex(t,e){return je.resolve()}deleteFieldIndex(t,e){return je.resolve()}getDocumentsMatchingTarget(t,e){return je.resolve(null)}getFieldIndex(t,e){return je.resolve(null)}getFieldIndexes(t,e){return je.resolve([])}getNextCollectionGroupToUpdate(t){return je.resolve(null)}updateCollectionGroup(t,e,r){return je.resolve()}updateIndexEntries(t,e){return je.resolve()}}class gk{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e]||new Pe(Pn.comparator),l=!i.has(r);return this.index[e]=i.add(r),l}has(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Pe(Pn.comparator)).toArray()}}const Zy=new Uint8Array(0);class B4{constructor(t,e){this.user=t,this.databaseId=e,this.Ke=new gk,this.Ge=new pe(r=>ya(r),(r,i)=>ip(r,i)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Ke.has(e)){const r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(()=>{this.Ke.add(e)});const l={collectionId:r,parent:so(i)};return jF(t).put(l)}return je.resolve()}getCollectionParents(t,e){const r=[],i=IDBKeyRange.bound([e,""],[mI(e),""],!1,!0);return jF(t).qt(i).next(l=>{for(const d of l){if(d.collectionId!==e)break;r.push(yu(d.parent))}return r})}addFieldIndex(t,e){const r=BI(t),i={indexId:(l=e).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var l;return delete i.indexId,r.add(i).next()}deleteFieldIndex(t,e){const r=BI(t),i=UI(t),l=SC(t);return r.delete(e.indexId).next(()=>i.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const r=SC(t);let i=!0;const l=new Map;return je.forEach(this.Qe(e),d=>this.getFieldIndex(t,d).next(f=>{i&&(i=!!f),l.set(d,f)})).next(()=>{if(i){let d=Hn();const f=[];return je.forEach(l,(m,b)=>{var x;et("IndexedDbIndexManager",`Using index ${x=m,`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(gt=>`${gt.fieldPath}:${gt.kind}`).join(",")}`} to execute ${ya(e)}`);const I=function(gt,yt){const jt=Oy(yt);if(void 0===jt)return null;for(const bn of sp(gt,jt.fieldPath))switch(bn.op){case"array-contains-any":return bn.value.arrayValue.values||[];case"array-contains":return[bn.value]}return null}(b,m),V=function(gt,yt){const jt=new Map;for(const bn of eh(yt))for(const Xr of sp(gt,bn.fieldPath))switch(Xr.op){case"==":case"in":jt.set(bn.fieldPath.canonicalString(),Xr.value);break;case"not-in":case"!=":return jt.set(bn.fieldPath.canonicalString(),Xr.value),Array.from(jt.values())}return null}(b,m),G=function(gt,yt){const jt=[];let bn=!0;for(const Xr of eh(yt)){const oi=0===Xr.kind?cC(gt,Xr.fieldPath,gt.startAt):vm(gt,Xr.fieldPath,gt.startAt);if(!oi.value)return null;jt.push(oi.value),bn&&(bn=oi.inclusive)}return new Vo(jt,bn)}(b,m),ne=function(gt,yt){const jt=[];let bn=!0;for(const Xr of eh(yt)){const oi=0===Xr.kind?vm(gt,Xr.fieldPath,gt.endAt):cC(gt,Xr.fieldPath,gt.endAt);if(!oi.value)return null;jt.push(oi.value),bn&&(bn=oi.inclusive)}return new Vo(jt,bn)}(b,m),we=this.je(m,b,G),Ue=this.je(m,b,ne),tt=this.We(m,b,V),ot=this.ze(m.indexId,I,we,!!G&&G.inclusive,Ue,!!ne&&ne.inclusive,tt);return je.forEach(ot,gt=>r.Gt(gt,e.limit).next(yt=>{yt.forEach(jt=>{const bn=lt.fromSegments(jt.documentKey);d.has(bn)||(d=d.add(bn),f.push(bn))})}))}).next(()=>f)}return je.resolve(null)})}Qe(t){let e=this.Ge.get(t);return e||(e=[t],this.Ge.set(t,e),e)}ze(t,e,r,i,l,d,f){const m=(null!=e?e.length:1)*Math.max(null!=r?r.length:1,null!=l?l.length:1),b=m/(null!=e?e.length:1),x=[];for(let I=0;I<m;++I){const V=e?this.He(e[I/b]):Zy,G=r?this.Je(t,V,r[I%b],i):this.Ye(t),ne=l?this.Xe(t,V,l[I%b],d):this.Ye(t+1);x.push(...this.createRange(G,ne,f.map(we=>this.Je(t,V,we,!0))))}return x}Je(t,e,r,i){const l=new hp(t,lt.empty(),e,r);return i?l:l.ke()}Xe(t,e,r,i){const l=new hp(t,lt.empty(),e,r);return i?l.ke():l}Ye(t){return new hp(t,lt.empty(),Zy,Zy)}getFieldIndex(t,e){const r=new L4(e),i=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,i).next(l=>{const d=l.filter(f=>r.$e(f));return d.sort((f,m)=>m.fields.length-f.fields.length),d.length>0?d[0]:null})}Ze(t,e){const r=new IC;for(const i of eh(t)){const l=e.data.field(i.fieldPath);if(null==l)return null;const d=r.Ne(i.kind);Im.fe.Zt(l,d)}return r.Se()}He(t){const e=new IC;return Im.fe.Zt(t,e.Ne(0)),e.Se()}tn(t,e){const r=new IC;return Im.fe.Zt(Xd(this.databaseId,e),r.Ne(function(i){const l=eh(i);return 0===l.length?0:l[l.length-1].kind}(t))),r.Se()}We(t,e,r){if(null===r)return[];let i=[];i.push(new IC);let l=0;for(const d of eh(t)){const f=r[l++];for(const m of i)if(this.en(e,d.fieldPath)&&pm(f))i=this.nn(i,d,f);else{const b=m.Ne(d.kind);Im.fe.Zt(f,b)}}return this.sn(i)}je(t,e,r){return null==r?null:this.We(t,e,r.position)}sn(t){const e=[];for(let r=0;r<t.length;++r)e[r]=t[r].Se();return e}nn(t,e,r){const i=[...t],l=[];for(const d of r.arrayValue.values||[])for(const f of i){const m=new IC;m.seed(f.Se()),Im.fe.Zt(d,m.Ne(e.kind)),l.push(m)}return l}en(t,e){return!!t.filters.find(r=>r instanceof Gi&&r.field.isEqual(e)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(t,e){const r=BI(t),i=UI(t);return(e?r.qt("collectionGroupIndex",IDBKeyRange.bound(e,e)):r.qt()).next(l=>{const d=[];return je.forEach(l,f=>i.get([f.indexId,this.uid]).next(m=>{d.push(function(b,x){const I=x?new rp(x.sequenceNumber,new uc(Tm(x.readTime),new lt(yu(x.documentKey)),x.largestBatchId)):rp.empty(),V=b.fields.map(([G,ne])=>new Fy(Di.fromServerFormat(G),ne));return new ym(b.indexId,b.collectionGroup,V,I)}(f,m))})).next(()=>d)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((r,i)=>{const l=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==l?l:on(r.collectionGroup,i.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,r){const i=BI(t),l=UI(t);return this.rn(t).next(d=>i.qt("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(f=>je.forEach(f,m=>{return l.put({indexId:m.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:Dm((V=r).readTime),documentKey:so(V.documentKey.path),largestBatchId:V.largestBatchId});var V})))}updateIndexEntries(t,e){const r=new Map;return je.forEach(e,(i,l)=>{const d=r.get(i.collectionGroup);return(d?je.resolve(d):this.getFieldIndexes(t,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),je.forEach(f,m=>this.on(t,i,m).next(b=>{const x=this.un(l,m);return b.isEqual(x)?je.resolve():this.an(t,l,m,b,x)}))))})}cn(t,e,r,i){return SC(t).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,e.key),documentKey:e.key.path.toArray()})}hn(t,e,r,i){return SC(t).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,e.key),e.key.path.toArray()])}on(t,e,r){const i=SC(t);let l=new Pe(Sm);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,e)])},(d,f)=>{l=l.add(new hp(r.indexId,e,f.arrayValue,f.directionalValue))}).next(()=>l)}un(t,e){let r=new Pe(Sm);const i=this.Ze(e,t);if(null==i)return r;const l=Oy(e);if(null!=l){const d=t.data.field(l.fieldPath);if(pm(d))for(const f of d.arrayValue.values||[])r=r.add(new hp(e.indexId,t.key,this.He(f),i))}else r=r.add(new hp(e.indexId,t.key,Zy,i));return r}an(t,e,r,i,l){et("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const d=[];return function(f,m,b,x,I){const V=f.getIterator(),G=m.getIterator();let ne=Pt(V),we=Pt(G);for(;ne||we;){let Ue=!1,tt=!1;if(ne&&we){const ot=b(ne,we);ot<0?tt=!0:ot>0&&(Ue=!0)}else null!=ne?tt=!0:Ue=!0;Ue?(x(we),we=Pt(G)):tt?(I(ne),ne=Pt(V)):(ne=Pt(V),we=Pt(G))}}(i,l,Sm,f=>{d.push(this.cn(t,e,r,f))},f=>{d.push(this.hn(t,e,r,f))}),je.waitFor(d)}rn(t){let e=1;return UI(t).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,l)=>{l.done(),e=i.sequenceNumber+1}).next(()=>e)}createRange(t,e,r){r=r.sort((d,f)=>Sm(d,f)).filter((d,f,m)=>!f||0!==Sm(d,m[f-1]));const i=[];i.push(t);for(const d of r){const f=Sm(d,t),m=Sm(d,e);if(0===f)i[0]=t.ke();else if(f>0&&m<0)i.push(d),i.push(d.ke());else if(m>0)break}i.push(e);const l=[];for(let d=0;d<i.length;d+=2)l.push(IDBKeyRange.bound([i[d].indexId,this.uid,i[d].arrayValue,i[d].directionalValue,Zy,[]],[i[d+1].indexId,this.uid,i[d+1].arrayValue,i[d+1].directionalValue,Zy,[]]));return l}}function jF(n){return cs(n,"collectionParents")}function SC(n){return cs(n,"indexEntries")}function BI(n){return cs(n,"indexConfiguration")}function UI(n){return cs(n,"indexState")}const GF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Uo{constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}static withCacheSize(t){return new Uo(t,Uo.DEFAULT_COLLECTION_PERCENTILE,Uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function WF(n,t,e){const r=n.store("mutations"),i=n.store("documentMutations"),l=[],d=IDBKeyRange.only(e.batchId);let f=0;const m=r.Wt({range:d},(x,I,V)=>(f++,V.delete()));l.push(m.next(()=>{$t(1===f)}));const b=[];for(const x of e.mutations){const I=SF(t,x.key.path,e.batchId);l.push(i.delete(I)),b.push(x.key)}return je.waitFor(l).next(()=>b)}function HI(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw _t();t=n.noDocument}return JSON.stringify(t).length}Uo.DEFAULT_COLLECTION_PERCENTILE=10,Uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Uo.DEFAULT=new Uo(41943040,Uo.DEFAULT_COLLECTION_PERCENTILE,Uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Uo.DISABLED=new Uo(-1,0,0);class mk{constructor(t,e,r,i){this.userId=t,this.M=e,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(t,e,r,i){$t(""!==t.uid);const l=t.isAuthenticated()?t.uid:"";return new mk(l,e,r,i)}checkEmpty(t){let e=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return fp(t).Wt({index:"userMutationsIndex",range:r},(i,l,d)=>{e=!1,d.done()}).next(()=>e)}addMutationBatch(t,e,r,i){const l=zy(t),d=fp(t);return d.add({}).next(f=>{$t("number"==typeof f);const m=new ck(f,e,r,i),b=function(V,G,ne){const we=ne.baseMutations.map(tt=>EC(V.Jt,tt)),Ue=ne.mutations.map(tt=>EC(V.Jt,tt));return{userId:G,batchId:ne.batchId,localWriteTimeMs:ne.localWriteTime.toMillis(),baseMutations:we,mutations:Ue}}(this.M,this.userId,m),x=[];let I=new Pe((V,G)=>on(V.canonicalString(),G.canonicalString()));for(const V of i){const G=SF(this.userId,V.key.path,f);I=I.add(V.key.path.popLast()),x.push(d.put(b)),x.push(l.put(G,h4))}return I.forEach(V=>{x.push(this.indexManager.addToCollectionParentIndex(t,V))}),t.addOnCommittedListener(()=>{this.ln[f]=m.keys()}),je.waitFor(x).next(()=>m)})}lookupMutationBatch(t,e){return fp(t).get(e).next(r=>r?($t(r.userId===this.userId),qy(this.M,r)):null)}fn(t,e){return this.ln[e]?je.resolve(this.ln[e]):this.lookupMutationBatch(t,e).next(r=>{if(r){const i=r.keys();return this.ln[e]=i,i}return null})}getNextMutationBatchAfterBatchId(t,e){const r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return fp(t).Wt({index:"userMutationsIndex",range:i},(d,f,m)=>{f.userId===this.userId&&($t(f.batchId>=r),l=qy(this.M,f)),m.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return fp(t).Wt({index:"userMutationsIndex",range:e,reverse:!0},(i,l,d)=>{r=l.batchId,d.done()}).next(()=>r)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return fp(t).qt("userMutationsIndex",e).next(r=>r.map(i=>qy(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(t,e){const r=FI(this.userId,e.path),i=IDBKeyRange.lowerBound(r),l=[];return zy(t).Wt({range:i},(d,f,m)=>{const[b,x,I]=d,V=yu(x);if(b===this.userId&&e.path.isEqual(V))return fp(t).get(I).next(G=>{if(!G)throw _t();$t(G.userId===this.userId),l.push(qy(this.M,G))});m.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Pe(on);const i=[];return e.forEach(l=>{const d=FI(this.userId,l.path),f=IDBKeyRange.lowerBound(d),m=zy(t).Wt({range:f},(b,x,I)=>{const[V,G,ne]=b,we=yu(G);V===this.userId&&l.path.isEqual(we)?r=r.add(ne):I.done()});i.push(m)}),je.waitFor(i).next(()=>this.dn(t,r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1,l=FI(this.userId,r),d=IDBKeyRange.lowerBound(l);let f=new Pe(on);return zy(t).Wt({range:d},(m,b,x)=>{const[I,V,G]=m,ne=yu(V);I===this.userId&&r.isPrefixOf(ne)?ne.length===i&&(f=f.add(G)):x.done()}).next(()=>this.dn(t,f))}dn(t,e){const r=[],i=[];return e.forEach(l=>{i.push(fp(t).get(l).next(d=>{if(null===d)throw _t();$t(d.userId===this.userId),r.push(qy(this.M,d))}))}),je.waitFor(i).next(()=>r)}removeMutationBatch(t,e){return WF(t.Ht,this.userId,e).next(r=>(t.addOnCommittedListener(()=>{this._n(e.batchId)}),je.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(t,i))))}_n(t){delete this.ln[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return je.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return zy(t).Wt({range:r},(l,d,f)=>{if(l[0]===this.userId){const m=yu(l[1]);i.push(m)}else f.done()}).next(()=>{$t(0===i.length)})})}containsKey(t,e){return qF(t,this.userId,e)}wn(t){return ZF(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function qF(n,t,e){const r=FI(t,e.path),i=r[1],l=IDBKeyRange.lowerBound(r);let d=!1;return zy(n).Wt({range:l,jt:!0},(f,m,b)=>{const[x,I,V]=f;x===t&&I===i&&(d=!0),b.done()}).next(()=>d)}function fp(n){return cs(n,"mutations")}function zy(n){return cs(n,"documentMutations")}function ZF(n){return cs(n,"mutationQueues")}class Am{constructor(t){this.mn=t}next(){return this.mn+=2,this.mn}static gn(){return new Am(0)}static yn(){return new Am(-1)}}class U4{constructor(t,e){this.referenceDelegate=t,this.M=e}allocateTargetId(t){return this.pn(t).next(e=>{const r=new Am(e.highestTargetId);return e.highestTargetId=r.next(),this.In(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.pn(t).next(e=>Bt.fromTimestamp(new Qr(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.pn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,r){return this.pn(t).next(i=>(i.highestListenSequenceNumber=e,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),this.In(t,i)))}addTargetData(t,e){return this.Tn(t,e).next(()=>this.pn(t).next(r=>(r.targetCount+=1,this.En(e,r),this.In(t,r))))}updateTargetData(t,e){return this.Tn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>Yy(t).delete(e.targetId)).next(()=>this.pn(t)).next(r=>($t(r.targetCount>0),r.targetCount-=1,this.In(t,r)))}removeTargets(t,e,r){let i=0;const l=[];return Yy(t).Wt((d,f)=>{const m=DC(f);m.sequenceNumber<=e&&null===r.get(m.targetId)&&(i++,l.push(this.removeTargetData(t,m)))}).next(()=>je.waitFor(l)).next(()=>i)}forEachTarget(t,e){return Yy(t).Wt((r,i)=>{const l=DC(i);e(l)})}pn(t){return zF(t).get("targetGlobalKey").next(e=>($t(null!==e),e))}In(t,e){return zF(t).put("targetGlobalKey",e)}Tn(t,e){return Yy(t).put(LF(this.M,e))}En(t,e){let r=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,r=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.pn(t).next(e=>e.targetCount)}getTargetData(t,e){const r=ya(e),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Yy(t).Wt({range:i,index:"queryTargetsIndex"},(d,f,m)=>{const b=DC(f);ip(e,b.target)&&(l=b,m.done())}).next(()=>l)}addMatchingKeys(t,e,r){const i=[],l=pp(t);return e.forEach(d=>{const f=so(d.path);i.push(l.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(t,r,d))}),je.waitFor(i)}removeMatchingKeys(t,e,r){const i=pp(t);return je.forEach(e,l=>{const d=so(l.path);return je.waitFor([i.delete([r,d]),this.referenceDelegate.removeReference(t,r,l)])})}removeMatchingKeysForTargetId(t,e){const r=pp(t),i=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(t,e){const r=IDBKeyRange.bound([e],[e+1],!1,!0),i=pp(t);let l=Hn();return i.Wt({range:r,jt:!0},(d,f,m)=>{const b=yu(d[1]),x=new lt(b);l=l.add(x)}).next(()=>l)}containsKey(t,e){const r=so(e.path),i=IDBKeyRange.bound([r],[mI(r)],!1,!0);let l=0;return pp(t).Wt({index:"documentTargetsIndex",jt:!0,range:i},([d,f],m,b)=>{0!==d&&(l++,b.done())}).next(()=>l>0)}Et(t,e){return Yy(t).get(e).next(r=>r?DC(r):null)}}function Yy(n){return cs(n,"targets")}function zF(n){return cs(n,"targetGlobal")}function pp(n){return cs(n,"targetDocuments")}function Nm(n){return _k.apply(this,arguments)}function _k(){return(_k=(0,$e.Z)(function*(n){if(n.code!==Be.FAILED_PRECONDITION||n.message!==MF)throw n;et("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function YF([n,t],[e,r]){const i=on(n,e);return 0===i?on(t,r):i}class H4{constructor(t){this.An=t,this.buffer=new Pe(YF),this.Rn=0}Pn(){return++this.Rn}bn(t){const e=[t,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();YF(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class $4{constructor(t,e){this.garbageCollector=t,this.asyncQueue=e,this.Vn=!1,this.vn=null}start(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(t)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(t){var e=this;const r=this.Vn?3e5:6e4;et("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,$e.Z)(function*(){e.vn=null,e.Vn=!0;try{yield t.collectGarbage(e.garbageCollector)}catch(i){Em(i)?et("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Nm(i)}yield e.Sn(t)}))}}class j4{constructor(t,e){this.Dn=t,this.params=e}calculateTargetCount(t,e){return this.Dn.Cn(t).next(r=>Math.floor(e/100*r))}nthSequenceNumber(t,e){if(0===e)return je.resolve(Fo.A);const r=new H4(e);return this.Dn.forEachTarget(t,i=>r.bn(i.sequenceNumber)).next(()=>this.Dn.xn(t,i=>r.bn(i))).next(()=>r.maxValue)}removeTargets(t,e,r){return this.Dn.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.Dn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(et("LruGarbageCollector","Garbage collection skipped; disabled"),je.resolve(GF)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(et("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),GF):this.Nn(t,e))}getCacheSize(t){return this.Dn.getCacheSize(t)}Nn(t,e){let r,i,l,d,f,m,b;const x=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(et("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),i=this.params.maximumSequenceNumbersToCollect):i=I,d=Date.now(),this.nthSequenceNumber(t,i))).next(I=>(r=I,f=Date.now(),this.removeTargets(t,r,e))).next(I=>(l=I,m=Date.now(),this.removeOrphanedDocuments(t,r))).next(I=>(b=Date.now(),Sy()<=Qa.in.DEBUG&&et("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-x}ms\n\tDetermined least recently used ${i} in `+(f-d)+`ms\n\tRemoved ${l} targets in `+(m-f)+`ms\n\tRemoved ${I} documents in `+(b-m)+`ms\nTotal Duration: ${b-x}ms`),je.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:l,documentsRemoved:I})))}}class G4{constructor(t,e){this.db=t,this.garbageCollector=new j4(this,e)}Cn(t){const e=this.kn(t);return this.db.getTargetCache().getTargetCount(t).next(r=>e.next(i=>r+i))}kn(t){let e=0;return this.xn(t,r=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}xn(t,e){return this.Mn(t,(r,i)=>e(i))}addReference(t,e,r){return $I(t,r)}removeReference(t,e,r){return $I(t,r)}removeTargets(t,e,r){return this.db.getTargetCache().removeTargets(t,e,r)}markPotentiallyOrphaned(t,e){return $I(t,e)}On(t,e){return function(r,i){let l=!1;return ZF(r).zt(d=>qF(r,d,i).next(f=>(f&&(l=!0),je.resolve(!f)))).next(()=>l)}(t,e)}removeOrphanedDocuments(t,e){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let l=0;return this.Mn(t,(d,f)=>{if(f<=e){const m=this.On(t,d).next(b=>{if(!b)return l++,r.getEntry(t,d).next(()=>(r.removeEntry(d,Bt.min()),pp(t).delete([0,so(d.path)])))});i.push(m)}}).next(()=>je.waitFor(i)).next(()=>r.apply(t)).next(()=>l)}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,e){return $I(t,e)}Mn(t,e){const r=pp(t);let i,l=Fo.A;return r.Wt({index:"documentTargetsIndex"},([d,f],{path:m,sequenceNumber:b})=>{0===d?(l!==Fo.A&&e(new lt(yu(i)),l),l=b,i=m):l=Fo.A}).next(()=>{l!==Fo.A&&e(new lt(yu(i)),l)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function $I(n,t){return pp(n).put((r=n.currentSequenceNumber,{targetId:0,path:so(t.path),sequenceNumber:r}));var r}class KF{constructor(){this.changes=new pe(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,lr.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return void 0!==r?je.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class W4{constructor(t){this.M=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,r){return Mm(t).put(r)}removeEntry(t,e,r){return Mm(t).delete(function(i,l){const d=i.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],VI(l),d[d.length-1]]}(e,r))}updateMetadata(t,e){return this.getMetadata(t).next(r=>(r.byteSize+=e,this.Fn(t,r)))}getEntry(t,e){let r=lr.newInvalidDocument(e);return Mm(t).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(AC(e))},(i,l)=>{r=this.$n(e,l)}).next(()=>r)}Bn(t,e){let r={size:0,document:lr.newInvalidDocument(e)};return Mm(t).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(AC(e))},(i,l)=>{r={document:this.$n(e,l),size:HI(l)}}).next(()=>r)}getEntries(t,e){let r=Kn();return this.Ln(t,e,(i,l)=>{const d=this.$n(i,l);r=r.insert(i,d)}).next(()=>r)}Un(t,e){let r=Kn(),i=new Se(lt.comparator);return this.Ln(t,e,(l,d)=>{const f=this.$n(l,d);r=r.insert(l,f),i=i.insert(l,HI(d))}).next(()=>({documents:r,qn:i}))}Ln(t,e,r){if(e.isEmpty())return je.resolve();let i=new Pe(XF);e.forEach(m=>i=i.add(m));const l=IDBKeyRange.bound(AC(i.first()),AC(i.last())),d=i.getIterator();let f=d.getNext();return Mm(t).Wt({index:"documentKeyIndex",range:l},(m,b,x)=>{const I=lt.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;f&&XF(f,I)<0;)r(f,null),f=d.getNext();f&&f.isEqual(I)&&(r(f,b),f=d.hasNext()?d.getNext():null),f?x.Ut(AC(f)):x.done()}).next(()=>{for(;f;)r(f,null),f=d.hasNext()?d.getNext():null})}getAllFromCollection(t,e,r){const i=[e.popLast().toArray(),e.lastSegment(),VI(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[e.popLast().toArray(),e.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Mm(t).qt(IDBKeyRange.bound(i,l,!0)).next(d=>{let f=Kn();for(const m of d){const b=this.$n(lt.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);f=f.insert(b.key,b)}return f})}getAllFromCollectionGroup(t,e,r,i){let l=Kn();const d=JF(e,r),f=JF(e,uc.max());return Mm(t).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,f,!0)},(m,b,x)=>{const I=this.$n(lt.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);l=l.insert(I.key,I),l.size===i&&x.done()}).next(()=>l)}newChangeBuffer(t){return new q4(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return QF(t).get("remoteDocumentGlobalKey").next(e=>($t(!!e),e))}Fn(t,e){return QF(t).put("remoteDocumentGlobalKey",e)}$n(t,e){if(e){const r=function(n,t){let e;if(t.document)e=bF(n.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=lt.fromSegments(t.noDocument.path),i=Tm(t.noDocument.readTime);e=lr.newNoDocument(r,i),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return _t();{const r=lt.fromSegments(t.unknownDocument.path),i=Tm(t.unknownDocument.version);e=lr.newUnknownDocument(r,i)}}return t.readTime&&e.setReadTime(function(r){const i=new Qr(r[0],r[1]);return Bt.fromTimestamp(i)}(t.readTime)),e}(this.M,e);if(!r.isNoDocument()||!r.version.isEqual(Bt.min()))return r}return lr.newInvalidDocument(t)}}class q4 extends KF{constructor(t,e){super(),this.Kn=t,this.trackRemovals=e,this.Gn=new pe(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(t){const e=[];let r=0,i=new Pe((l,d)=>on(l.canonicalString(),d.canonicalString()));return this.changes.forEach((l,d)=>{const f=this.Gn.get(l);if(e.push(this.Kn.removeEntry(t,l,f.readTime)),d.isValidDocument()){const m=FF(this.Kn.M,d);i=i.add(l.path.popLast()),r+=HI(m)-f.size,e.push(this.Kn.addEntry(t,l,m))}else if(r-=f.size,this.trackRemovals){const m=FF(this.Kn.M,d.convertToNoDocument(Bt.min()));e.push(this.Kn.addEntry(t,l,m))}}),i.forEach(l=>{e.push(this.Kn.indexManager.addToCollectionParentIndex(t,l))}),e.push(this.Kn.updateMetadata(t,r)),je.waitFor(e)}getFromCache(t,e){return this.Kn.Bn(t,e).next(r=>(this.Gn.set(e,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(t,e){return this.Kn.Un(t,e).next(({documents:r,qn:i})=>(i.forEach((l,d)=>{this.Gn.set(l,{size:d,readTime:r.get(l).readTime})}),r))}}function QF(n){return cs(n,"remoteDocumentGlobal")}function Mm(n){return cs(n,"remoteDocumentsV14")}function AC(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function JF(n,t){const e=t.documentKey.path.toArray();return[n,VI(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function XF(n,t){const e=n.path.toArray(),r=t.path.toArray();let i=0;for(let l=0;l<e.length-2&&l<r.length-2;++l)if(i=on(e[l],r[l]),i)return i;return i=on(e.length,r.length),i||(i=on(e[e.length-2],r[r.length-2]),i||on(e[e.length-1],r[r.length-1]))}class Z4{constructor(t){this.M=t}kt(t,e,r,i){const l=new LI("createOrUpgrade",e);var f;r<1&&i>=1&&(t.createObjectStore("owner"),(f=t).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",IF,{unique:!0}),f.createObjectStore("documentMutations"),eL(t),function(f){f.createObjectStore("remoteDocuments")}(t));let d=je.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(t),eL(t)),d=d.next(()=>function(f){const m=f.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Bt.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",b)}(l))),r<4&&i>=4&&(0!==r&&(d=d.next(()=>function(f,m){return m.store("mutations").qt().next(b=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",IF,{unique:!0});const x=m.store("mutations"),I=b.map(V=>x.put(V));return je.waitFor(I)})}(t,l))),d=d.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),r<5&&i>=5&&(d=d.next(()=>this.Qn(l))),r<6&&i>=6&&(d=d.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(t),this.jn(l)))),r<7&&i>=7&&(d=d.next(()=>this.Wn(l))),r<8&&i>=8&&(d=d.next(()=>this.zn(t,l))),r<9&&i>=9&&(d=d.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(t)})),r<10&&i>=10&&(d=d.next(()=>this.Hn(l))),r<11&&i>=11&&(d=d.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),r<12&&i>=12&&(d=d.next(()=>{!function(f){const m=f.createObjectStore("documentOverlays",{keyPath:x4});m.createIndex("collectionPathOverlayIndex",D4,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",T4,{unique:!1})}(t)})),r<13&&i>=13&&(d=d.next(()=>function(f){const m=f.createObjectStore("remoteDocumentsV14",{keyPath:f4});m.createIndex("documentKeyIndex",p4),m.createIndex("collectionGroupIndex",g4)}(t)).next(()=>this.Jn(t,l)).next(()=>t.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(d=d.next(()=>{!function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:b4}).createIndex("sequenceNumberIndex",w4,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:C4}).createIndex("documentKeyIndex",E4,{unique:!1})}(t)})),d}jn(t){let e=0;return t.store("remoteDocuments").Wt((r,i)=>{e+=HI(i)}).next(()=>{const r={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(t){const e=t.store("mutationQueues"),r=t.store("mutations");return e.qt().next(i=>je.forEach(i,l=>{const d=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(f=>je.forEach(f,m=>{$t(m.userId===l.userId);const b=qy(this.M,m);return WF(t,l.userId,b).next(()=>{})}))}))}Wn(t){const e=t.store("targetDocuments"),r=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(i=>{const l=[];return r.Wt((d,f)=>{const m=new Pn(d),b=[0,so(m)];l.push(e.get(b).next(x=>x?je.resolve():e.put({targetId:0,path:so(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>je.waitFor(l))})}zn(t,e){t.createObjectStore("collectionParents",{keyPath:v4});const r=e.store("collectionParents"),i=new gk,l=d=>{if(i.add(d)){const f=d.lastSegment(),m=d.popLast();return r.put({collectionId:f,parent:so(m)})}};return e.store("remoteDocuments").Wt({jt:!0},(d,f)=>{const m=new Pn(d);return l(m.popLast())}).next(()=>e.store("documentMutations").Wt({jt:!0},([d,f,m],b)=>{const x=yu(f);return l(x.popLast())}))}Hn(t){const e=t.store("targets");return e.Wt((r,i)=>{const l=DC(i),d=LF(this.M,l);return e.put(d)})}Jn(t,e){const r=e.store("remoteDocuments"),i=[];return r.Wt((l,d)=>{const f=e.store("remoteDocumentsV14"),m=(b=d,b.document?new lt(Pn.fromString(b.document.name).popFirst(5)):b.noDocument?lt.fromSegments(b.noDocument.path):b.unknownDocument?lt.fromSegments(b.unknownDocument.path):_t()).path.toArray();var b;const x={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};i.push(f.put(x))}).next(()=>je.waitFor(i))}}function eL(n){n.createObjectStore("targetDocuments",{keyPath:_4}).createIndex("documentTargetsIndex",y4,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",m4,{unique:!0}),n.createObjectStore("targetGlobal")}const yk="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class vk{constructor(t,e,r,i,l,d,f,m,b,x,I=13){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=r,this.Yn=l,this.window=d,this.document=f,this.Xn=b,this.Zn=x,this.ts=I,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=V=>Promise.resolve(),!vk.vt())throw new Ye(Be.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new G4(this,i),this.hs=e+"main",this.M=new OF(m),this.ls=new dc(this.hs,this.ts,new Z4(this.M)),this.fs=new U4(this.referenceDelegate,this.M),this.ds=new W4(this.M),this._s=new R4,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===x&&ni("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ye(Be.FAILED_PRECONDITION,yk);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.fs.getHighestSequenceNumber(t))}).then(t=>{this.es=new Fo(t,this.Xn)}).then(()=>{this.ns=!0}).catch(t=>(this.ls&&this.ls.close(),Promise.reject(t)))}Ts(t){var e=this;return this.cs=function(){var r=(0,$e.Z)(function*(i){if(e.started)return t(i)});return function(i){return r.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ls.Ot(function(){var e=(0,$e.Z)(function*(r){null===r.newVersion&&(yield t())});return function(r){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Yn.enqueueAndForget((0,$e.Z)(function*(){e.started&&(yield e.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>jI(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(t).next(e=>{e||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(t)).next(e=>this.isPrimary&&!e?this.Rs(t).next(()=>!1):!!e&&this.Ps(t).next(()=>!0))).catch(t=>{if(Em(t))return et("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return et("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Yn.enqueueRetryable(()=>this.cs(t)),this.isPrimary=t})}Es(t){return NC(t).get("owner").next(e=>je.resolve(this.bs(e)))}Vs(t){return jI(t).delete(this.clientId)}vs(){var t=this;return(0,$e.Z)(function*(){if(t.isPrimary&&!t.Ss(t.us,18e5)){t.us=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=cs(r,"clientMetadata");return i.qt().next(l=>{const d=t.Ds(l,18e5),f=l.filter(m=>-1===d.indexOf(m));return je.forEach(f,m=>i.delete(m.clientId)).next(()=>f)})}).catch(()=>[]);if(t.ws)for(const r of e)t.ws.removeItem(t.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(t){return!!t&&t.ownerId===this.clientId}As(t){return this.Zn?je.resolve(!0):NC(t).get("owner").next(e=>{if(null!==e&&this.Ss(e.leaseTimestampMs,5e3)&&!this.xs(e.ownerId)){if(this.bs(e)&&this.networkEnabled)return!0;if(!this.bs(e)){if(!e.allowTabSynchronization)throw new Ye(Be.FAILED_PRECONDITION,yk);return!1}}return!(!this.networkEnabled||!this.inForeground)||jI(t).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const d=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||d&&f)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&et("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,$e.Z)(function*(){t.ns=!1,t.Ns(),t.os&&(t.os.cancel(),t.os=null),t.ks(),t.Ms(),yield t.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new PF(e,Fo.A);return t.Rs(r).next(()=>t.Vs(r))}),t.ls.close(),t.Os()})()}Ds(t,e){return t.filter(r=>this.Ss(r.updateTimeMs,e)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",t=>jI(t).qt().next(e=>this.Ds(e,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(t,e){return mk.Yt(t,this.M,e,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(t){return new B4(t,this.M.Jt.databaseId)}getDocumentOverlayCache(t){return pk.Yt(this.M,t)}getBundleCache(){return this._s}runTransaction(t,e,r){et("IndexedDbPersistence","Starting transaction:",t);const i="readonly"===e?"readonly":"readwrite",l=14===(d=this.ts)?S4:13===d?NF:12===d?I4:11===d?AF:void _t();var d;let f;return this.ls.runTransaction(t,i,l,m=>(f=new PF(m,this.es?this.es.next():Fo.A),"readwrite-primary"===e?this.Es(f).next(b=>!!b||this.As(f)).next(b=>{if(!b)throw ni(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Ye(Be.FAILED_PRECONDITION,MF);return r(f)}).next(b=>this.Ps(f).next(()=>b)):this.$s(f).next(()=>r(f)))).then(m=>(f.raiseOnCommittedEvent(),m))}$s(t){return NC(t).get("owner").next(e=>{if(null!==e&&this.Ss(e.leaseTimestampMs,5e3)&&!this.xs(e.ownerId)&&!this.bs(e)&&!(this.Zn||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Ye(Be.FAILED_PRECONDITION,yk)})}Ps(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return NC(t).put("owner",e)}static vt(){return dc.vt()}Rs(t){const e=NC(t);return e.get("owner").next(r=>this.bs(r)?(et("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):je.resolve())}Ss(t,e){const r=Date.now();return!(t<r-e||t>r&&(ni(`Detected an update time that is in the future: ${t} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Y.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(t){var e;try{const r=null!==(null===(e=this.ws)||void 0===e?void 0:e.getItem(this.Cs(t)));return et("IndexedDbPersistence",`Client '${t}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ni("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(t){ni("Failed to set zombie client id.",t)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(t){}}Cs(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function NC(n){return cs(n,"owner")}function jI(n){return cs(n,"clientMetadata")}function bk(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class z4{constructor(t,e,r){this.ds=t,this.Bs=e,this.indexManager=r}Ls(t,e){return this.Bs.getAllMutationBatchesAffectingDocumentKey(t,e).next(r=>this.Us(t,e,r))}Us(t,e,r){return this.ds.getEntry(t,e).next(i=>{for(const l of r)l.applyToLocalView(i);return i})}qs(t,e){t.forEach((r,i)=>{for(const l of e)l.applyToLocalView(i)})}Ks(t,e){return this.ds.getEntries(t,e).next(r=>this.Gs(t,r).next(()=>r))}Gs(t,e){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(t,e).next(r=>this.qs(e,r))}Qs(t,e,r){return lt.isDocumentKey((i=e).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(t,e.path):ba(e)?this.Ws(t,e,r):this.zs(t,e,r);var i}js(t,e){return this.Ls(t,new lt(e)).next(r=>{let i=sh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(t,e,r){const i=e.collectionGroup;let l=sh();return this.indexManager.getCollectionParents(t,i).next(d=>je.forEach(d,f=>{const m=(b=e,x=f.child(i),new va(x,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,x;return this.zs(t,m,r).next(b=>{b.forEach((x,I)=>{l=l.insert(x,I)})})}).next(()=>l))}zs(t,e,r){let i;return this.ds.getAllFromCollection(t,e.path,r).next(l=>(i=l,this.Bs.getAllMutationBatchesAffectingQuery(t,e))).next(l=>{for(const d of l)for(const f of d.mutations){const m=f.key;let b=i.get(m);null==b&&(b=lr.newInvalidDocument(m),i=i.insert(m,b)),PI(f,b,d.localWriteTime),b.isFoundDocument()||(i=i.remove(m))}}).next(()=>(i.forEach((l,d)=>{pC(e,d)||(i=i.remove(l))}),i))}}class wk{constructor(t,e,r,i){this.targetId=t,this.fromCache=e,this.Hs=r,this.Js=i}static Ys(t,e){let r=Hn(),i=Hn();for(const l of e.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}return new wk(t,e.fromCache,r,i)}}class tL{Xs(t){this.Zs=t}Qs(t,e,r,i){return 0===(l=e).filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())||r.isEqual(Bt.min())?this.ti(t,e):this.Zs.Ks(t,i).next(l=>{const d=this.ei(e,l);return(bm(e)||Vy(e))&&this.ni(e.limitType,d,i,r)?this.ti(t,e):(Sy()<=Qa.in.DEBUG&&et("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),fC(e)),this.Zs.Qs(t,e,xI(r,-1)).next(f=>(d.forEach(m=>{f=f.insert(m.key,m)}),f)))});var l}ei(t,e){let r=new Pe(mC(t));return e.forEach((i,l)=>{pC(t,l)&&(r=r.add(l))}),r}ni(t,e,r,i){if(r.size!==e.size)return!0;const l="F"===t?e.last():e.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(i)>0)}ti(t,e){return Sy()<=Qa.in.DEBUG&&et("QueryEngine","Using full collection scan to execute query:",fC(e)),this.Zs.Qs(t,e,uc.min())}}class Y4{constructor(t,e,r,i){this.persistence=t,this.si=e,this.M=i,this.ii=new Se(on),this.ri=new pe(l=>ya(l),ip),this.oi=new Map,this.ui=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.ai(r)}ai(t){this.indexManager=this.persistence.getIndexManager(t),this.Bs=this.persistence.getMutationQueue(t,this.indexManager),this.ci=new z4(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ii))}}function nL(n,t,e,r){return new Y4(n,t,e,r)}function rL(n,t){return Ck.apply(this,arguments)}function Ck(){return(Ck=(0,$e.Z)(function*(n,t){const e=ut(n);return yield e.persistence.runTransaction("Handle user change","readonly",r=>{let i;return e.Bs.getAllMutationBatches(r).next(l=>(i=l,e.ai(t),e.Bs.getAllMutationBatches(r))).next(l=>{const d=[],f=[];let m=Hn();for(const b of i){d.push(b.batchId);for(const x of b.mutations)m=m.add(x.key)}for(const b of l){f.push(b.batchId);for(const x of b.mutations)m=m.add(x.key)}return e.ci.Ks(r,m).next(b=>({hi:b,removedBatchIds:d,addedBatchIds:f}))})})})).apply(this,arguments)}function K4(n,t){const e=ut(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),l=e.ui.newChangeBuffer({trackRemovals:!0});return function(d,f,m,b){const x=m.batch,I=x.keys();let V=je.resolve();return I.forEach(G=>{V=V.next(()=>b.getEntry(f,G)).next(ne=>{const we=m.docVersions.get(G);$t(null!==we),ne.version.compareTo(we)<0&&(x.applyToRemoteDocument(ne,m),ne.isValidDocument()&&(ne.setReadTime(m.commitVersion),b.addEntry(ne)))})}),V.next(()=>d.Bs.removeMutationBatch(f,x))}(e,r,t,l).next(()=>l.apply(r)).next(()=>e.Bs.performConsistencyCheck(r)).next(()=>e.ci.Ks(r,i))})}function iL(n){const t=ut(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.fs.getLastRemoteSnapshotVersion(e))}function Q4(n,t){const e=ut(n),r=t.snapshotVersion;let i=e.ii;return e.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const d=e.ui.newChangeBuffer({trackRemovals:!0});i=e.ii;const f=[];t.targetChanges.forEach((b,x)=>{const I=i.get(x);if(!I)return;f.push(e.fs.removeMatchingKeys(l,b.removedDocuments,x).next(()=>e.fs.addMatchingKeys(l,b.addedDocuments,x)));let V=I.withSequenceNumber(l.currentSequenceNumber);var G,ne,we;t.targetMismatches.has(x)?V=V.withResumeToken(pi.EMPTY_BYTE_STRING,Bt.min()).withLastLimboFreeSnapshotVersion(Bt.min()):b.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(b.resumeToken,r)),i=i.insert(x,V),ne=V,we=b,(0===(G=I).resumeToken.approximateByteSize()||ne.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=3e8||we.addedDocuments.size+we.modifiedDocuments.size+we.removedDocuments.size>0)&&f.push(e.fs.updateTargetData(l,V))});let m=Kn();if(t.documentUpdates.forEach(b=>{t.resolvedLimboDocuments.has(b)&&f.push(e.persistence.referenceDelegate.updateLimboDocument(l,b))}),f.push(sL(l,d,t.documentUpdates).next(b=>{m=b})),!r.isEqual(Bt.min())){const b=e.fs.getLastRemoteSnapshotVersion(l).next(x=>e.fs.setTargetsMetadata(l,l.currentSequenceNumber,r));f.push(b)}return je.waitFor(f).next(()=>d.apply(l)).next(()=>e.ci.Gs(l,m)).next(()=>m)}).then(l=>(e.ii=i,l))}function sL(n,t,e){let r=Hn();return e.forEach(i=>r=r.add(i)),t.getEntries(n,r).next(i=>{let l=Kn();return e.forEach((d,f)=>{const m=i.get(d);f.isNoDocument()&&f.version.isEqual(Bt.min())?(t.removeEntry(d,f.readTime),l=l.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||0===f.version.compareTo(m.version)&&m.hasPendingWrites?(t.addEntry(f),l=l.insert(d,f)):et("LocalStore","Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)}),l})}function J4(n,t){const e=ut(n);return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===t&&(t=-1),e.Bs.getNextMutationBatchAfterBatchId(r,t)))}function Ky(n,t){const e=ut(n);return e.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return e.fs.getTargetData(r,t).next(l=>l?(i=l,je.resolve(i)):e.fs.allocateTargetId(r).next(d=>(i=new dp(t,d,0,r.currentSequenceNumber),e.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=e.ii.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(e.ii=e.ii.insert(r.targetId,r),e.ri.set(t,r.targetId)),r})}function Qy(n,t,e){return Ek.apply(this,arguments)}function Ek(){return(Ek=(0,$e.Z)(function*(n,t,e){const r=ut(n),i=r.ii.get(t),l=e?"readwrite":"readwrite-primary";try{e||(yield r.persistence.runTransaction("Release target",l,d=>r.persistence.referenceDelegate.removeTarget(d,i)))}catch(d){if(!Em(d))throw d;et("LocalStore",`Failed to update sequence numbers for target ${t}: ${d}`)}r.ii=r.ii.remove(t),r.ri.delete(i.target)})).apply(this,arguments)}function GI(n,t,e){const r=ut(n);let i=Bt.min(),l=Hn();return r.persistence.runTransaction("Execute query","readonly",d=>function(f,m,b){const x=ut(f),I=x.ri.get(b);return void 0!==I?je.resolve(x.ii.get(I)):x.fs.getTargetData(m,b)}(r,d,Wi(t)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(d,f.targetId).next(m=>{l=m})}).next(()=>r.si.Qs(d,t,e?i:Bt.min(),e?l:Hn())).next(f=>(lL(r,gC(t),f),{documents:f,li:l})))}function oL(n,t){const e=ut(n),r=ut(e.fs),i=e.ii.get(t);return i?Promise.resolve(i.target):e.persistence.runTransaction("Get target data","readonly",l=>r.Et(l,t).next(d=>d?d.target:null))}function aL(n,t){const e=ut(n),r=e.oi.get(t)||Bt.min();return e.persistence.runTransaction("Get new document changes","readonly",i=>e.ui.getAllFromCollectionGroup(i,t,xI(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(lL(e,t,i),i))}function lL(n,t,e){let r=Bt.min();e.forEach((i,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),n.oi.set(t,r)}function xk(){return(xk=(0,$e.Z)(function*(n,t,e,r){const i=ut(n);let l=Hn(),d=Kn();for(const b of e){const x=t.fi(b.metadata.name);b.document&&(l=l.add(x));const I=t.di(b);I.setReadTime(t._i(b.metadata.readTime)),d=d.insert(x,I)}const f=i.ui.newChangeBuffer({trackRemovals:!0}),m=yield Ky(i,(b=r,Wi(nh(Pn.fromString(`__bundle__/docs/${b}`)))));var b;return i.persistence.runTransaction("Apply bundle documents","readwrite",b=>sL(b,f,d).next(x=>(f.apply(b),x)).next(x=>i.fs.removeMatchingKeysForTargetId(b,m.targetId).next(()=>i.fs.addMatchingKeys(b,l,m.targetId)).next(()=>i.ci.Gs(b,x)).next(()=>x)))})).apply(this,arguments)}function e6(n,t){return Dk.apply(this,arguments)}function Dk(){return(Dk=(0,$e.Z)(function*(n,t,e=Hn()){const r=yield Ky(n,Wi(hk(t.bundledQuery))),i=ut(n);return i.persistence.runTransaction("Save named query","readwrite",l=>{const d=ls(t.readTime);if(r.snapshotVersion.compareTo(d)>=0)return i._s.saveNamedQuery(l,t);const f=r.withResumeToken(pi.EMPTY_BYTE_STRING,d);return i.ii=i.ii.insert(f.targetId,f),i.fs.updateTargetData(l,f).next(()=>i.fs.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>i.fs.addMatchingKeys(l,e,r.targetId)).next(()=>i._s.saveNamedQuery(l,t))})})).apply(this,arguments)}class t6{constructor(t){this.M=t,this.wi=new Map,this.mi=new Map}getBundleMetadata(t,e){return je.resolve(this.wi.get(e))}saveBundleMetadata(t,e){var r;return this.wi.set(e.id,{id:(r=e).id,version:r.version,createTime:ls(r.createTime)}),je.resolve()}getNamedQuery(t,e){return je.resolve(this.mi.get(e))}saveNamedQuery(t,e){return this.mi.set(e.name,{name:(r=e).name,query:hk(r.bundledQuery),readTime:ls(r.readTime)}),je.resolve();var r}}class n6{constructor(){this.overlays=new Se(lt.comparator),this.gi=new Map}getOverlay(t,e){return je.resolve(this.overlays.get(e))}saveOverlays(t,e,r){return r.forEach((i,l)=>{this.Xt(t,e,l)}),je.resolve()}removeOverlaysForBatchId(t,e,r){const i=this.gi.get(r);return void 0!==i&&(i.forEach(l=>this.overlays=this.overlays.remove(l)),this.gi.delete(r)),je.resolve()}getOverlaysForCollection(t,e,r){const i=hl(),l=e.length+1,d=new lt(e.child("")),f=this.overlays.getIteratorFrom(d);for(;f.hasNext();){const m=f.getNext().value,b=m.getKey();if(!e.isPrefixOf(b.path))break;b.path.length===l&&m.largestBatchId>r&&i.set(m.getKey(),m)}return je.resolve(i)}getOverlaysForCollectionGroup(t,e,r,i){let l=new Se((b,x)=>b-x);const d=this.overlays.getIterator();for(;d.hasNext();){const b=d.getNext().value;if(b.getKey().getCollectionGroup()===e&&b.largestBatchId>r){let x=l.get(b.largestBatchId);null===x&&(x=hl(),l=l.insert(b.largestBatchId,x)),x.set(b.getKey(),b)}}const f=hl(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((b,x)=>f.set(b,x)),!(f.size()>=i)););return je.resolve(f)}Xt(t,e,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const d=this.gi.get(i.largestBatchId).delete(r.key);this.gi.set(i.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new dk(e,r));let l=this.gi.get(e);void 0===l&&(l=Hn(),this.gi.set(e,l)),this.gi.set(e,l.add(r.key))}}class Tk{constructor(){this.yi=new Pe(us.pi),this.Ii=new Pe(us.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(t,e){const r=new us(t,e);this.yi=this.yi.add(r),this.Ii=this.Ii.add(r)}Ei(t,e){t.forEach(r=>this.addReference(r,e))}removeReference(t,e){this.Ai(new us(t,e))}Ri(t,e){t.forEach(r=>this.removeReference(r,e))}Pi(t){const e=new lt(new Pn([])),r=new us(e,t),i=new us(e,t+1),l=[];return this.Ii.forEachInRange([r,i],d=>{this.Ai(d),l.push(d.key)}),l}bi(){this.yi.forEach(t=>this.Ai(t))}Ai(t){this.yi=this.yi.delete(t),this.Ii=this.Ii.delete(t)}Vi(t){const e=new lt(new Pn([])),r=new us(e,t),i=new us(e,t+1);let l=Hn();return this.Ii.forEachInRange([r,i],d=>{l=l.add(d.key)}),l}containsKey(t){const e=new us(t,0),r=this.yi.firstAfterOrEqual(e);return null!==r&&t.isEqual(r.key)}}class us{constructor(t,e){this.key=t,this.vi=e}static pi(t,e){return lt.comparator(t.key,e.key)||on(t.vi,e.vi)}static Ti(t,e){return on(t.vi,e.vi)||lt.comparator(t.key,e.key)}}class r6{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.Bs=[],this.Si=1,this.Di=new Pe(us.pi)}checkEmpty(t){return je.resolve(0===this.Bs.length)}addMutationBatch(t,e,r,i){const l=this.Si;this.Si++;const d=new ck(l,e,r,i);this.Bs.push(d);for(const f of i)this.Di=this.Di.add(new us(f.key,l)),this.indexManager.addToCollectionParentIndex(t,f.key.path.popLast());return je.resolve(d)}lookupMutationBatch(t,e){return je.resolve(this.Ci(e))}getNextMutationBatchAfterBatchId(t,e){const i=this.xi(e+1),l=i<0?0:i;return je.resolve(this.Bs.length>l?this.Bs[l]:null)}getHighestUnacknowledgedBatchId(){return je.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(t){return je.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new us(e,0),i=new us(e,Number.POSITIVE_INFINITY),l=[];return this.Di.forEachInRange([r,i],d=>{const f=this.Ci(d.vi);l.push(f)}),je.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Pe(on);return e.forEach(i=>{const l=new us(i,0),d=new us(i,Number.POSITIVE_INFINITY);this.Di.forEachInRange([l,d],f=>{r=r.add(f.vi)})}),je.resolve(this.Ni(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1;let l=r;lt.isDocumentKey(l)||(l=l.child(""));const d=new us(new lt(l),0);let f=new Pe(on);return this.Di.forEachWhile(m=>{const b=m.key.path;return!!r.isPrefixOf(b)&&(b.length===i&&(f=f.add(m.vi)),!0)},d),je.resolve(this.Ni(f))}Ni(t){const e=[];return t.forEach(r=>{const i=this.Ci(r);null!==i&&e.push(i)}),e}removeMutationBatch(t,e){$t(0===this.ki(e.batchId,"removed")),this.Bs.shift();let r=this.Di;return je.forEach(e.mutations,i=>{const l=new us(i.key,e.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Di=r})}_n(t){}containsKey(t,e){const r=new us(e,0),i=this.Di.firstAfterOrEqual(r);return je.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return je.resolve()}ki(t,e){return this.xi(t)}xi(t){return 0===this.Bs.length?0:t-this.Bs[0].batchId}Ci(t){const e=this.xi(t);return e<0||e>=this.Bs.length?null:this.Bs[e]}}class i6{constructor(t){this.Mi=t,this.docs=new Se(lt.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,i=this.docs.get(r),l=i?i.size:0,d=this.Mi(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return je.resolve(r?r.document.mutableCopy():lr.newInvalidDocument(e))}getEntries(t,e){let r=Kn();return e.forEach(i=>{const l=this.docs.get(i);r=r.insert(i,l?l.document.mutableCopy():lr.newInvalidDocument(i))}),je.resolve(r)}getAllFromCollection(t,e,r){let i=Kn();const l=new lt(e.child("")),d=this.docs.getIteratorFrom(l);for(;d.hasNext();){const{key:f,value:{document:m}}=d.getNext();if(!e.isPrefixOf(f.path))break;f.path.length>e.length+1||lC(zR(m),r)<=0||(i=i.insert(m.key,m.mutableCopy()))}return je.resolve(i)}getAllFromCollectionGroup(t,e,r,i){_t()}Oi(t,e){return je.forEach(this.docs,r=>e(r))}newChangeBuffer(t){return new s6(this)}getSize(t){return je.resolve(this.size)}}class s6 extends KF{constructor(t){super(),this.Kn=t}applyChanges(t){const e=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?e.push(this.Kn.addEntry(t,i)):this.Kn.removeEntry(r)}),je.waitFor(e)}getFromCache(t,e){return this.Kn.getEntry(t,e)}getAllFromCache(t,e){return this.Kn.getEntries(t,e)}}class o6{constructor(t){this.persistence=t,this.Fi=new pe(e=>ya(e),ip),this.lastRemoteSnapshotVersion=Bt.min(),this.highestTargetId=0,this.$i=0,this.Bi=new Tk,this.targetCount=0,this.Li=Am.gn()}forEachTarget(t,e){return this.Fi.forEach((r,i)=>e(i)),je.resolve()}getLastRemoteSnapshotVersion(t){return je.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return je.resolve(this.$i)}allocateTargetId(t){return this.highestTargetId=this.Li.next(),je.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.$i&&(this.$i=e),je.resolve()}Tn(t){this.Fi.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Li=new Am(e),this.highestTargetId=e),t.sequenceNumber>this.$i&&(this.$i=t.sequenceNumber)}addTargetData(t,e){return this.Tn(e),this.targetCount+=1,je.resolve()}updateTargetData(t,e){return this.Tn(e),je.resolve()}removeTargetData(t,e){return this.Fi.delete(e.target),this.Bi.Pi(e.targetId),this.targetCount-=1,je.resolve()}removeTargets(t,e,r){let i=0;const l=[];return this.Fi.forEach((d,f)=>{f.sequenceNumber<=e&&null===r.get(f.targetId)&&(this.Fi.delete(d),l.push(this.removeMatchingKeysForTargetId(t,f.targetId)),i++)}),je.waitFor(l).next(()=>i)}getTargetCount(t){return je.resolve(this.targetCount)}getTargetData(t,e){const r=this.Fi.get(e)||null;return je.resolve(r)}addMatchingKeys(t,e,r){return this.Bi.Ei(e,r),je.resolve()}removeMatchingKeys(t,e,r){this.Bi.Ri(e,r);const i=this.persistence.referenceDelegate,l=[];return i&&e.forEach(d=>{l.push(i.markPotentiallyOrphaned(t,d))}),je.waitFor(l)}removeMatchingKeysForTargetId(t,e){return this.Bi.Pi(e),je.resolve()}getMatchingKeysForTargetId(t,e){const r=this.Bi.Vi(e);return je.resolve(r)}containsKey(t,e){return je.resolve(this.Bi.containsKey(e))}}class a6{constructor(t,e){this.Ui={},this.overlays={},this.es=new Fo(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new o6(this),this.indexManager=new V4,this.ds=new i6(r=>this.referenceDelegate.qi(r)),this.M=new OF(e),this._s=new t6(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new n6,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.Ui[t.toKey()];return r||(r=new r6(e,this.referenceDelegate),this.Ui[t.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(t,e,r){et("MemoryPersistence","Starting transaction:",t);const i=new l6(this.es.next());return this.referenceDelegate.Ki(),r(i).next(l=>this.referenceDelegate.Gi(i).next(()=>l)).toPromise().then(l=>(i.raiseOnCommittedEvent(),l))}Qi(t,e){return je.or(Object.values(this.Ui).map(r=>()=>r.containsKey(t,e)))}}class l6 extends RF{constructor(t){super(),this.currentSequenceNumber=t}}class Ik{constructor(t){this.persistence=t,this.ji=new Tk,this.Wi=null}static zi(t){return new Ik(t)}get Hi(){if(this.Wi)return this.Wi;throw _t()}addReference(t,e,r){return this.ji.addReference(r,e),this.Hi.delete(r.toString()),je.resolve()}removeReference(t,e,r){return this.ji.removeReference(r,e),this.Hi.add(r.toString()),je.resolve()}markPotentiallyOrphaned(t,e){return this.Hi.add(e.toString()),je.resolve()}removeTarget(t,e){this.ji.Pi(e.targetId).forEach(i=>this.Hi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(i=>{i.forEach(l=>this.Hi.add(l.toString()))}).next(()=>r.removeTargetData(t,e))}Ki(){this.Wi=new Set}Gi(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return je.forEach(this.Hi,r=>{const i=lt.fromPath(r);return this.Ji(t,i).next(l=>{l||e.removeEntry(i,Bt.min())})}).next(()=>(this.Wi=null,e.apply(t)))}updateLimboDocument(t,e){return this.Ji(t,e).next(r=>{r?this.Hi.delete(e.toString()):this.Hi.add(e.toString())})}qi(t){return 0}Ji(t,e){return je.or([()=>je.resolve(this.ji.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Qi(t,e)])}}function cL(n,t){return`firestore_clients_${n}_${t}`}function uL(n,t,e){let r=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function Sk(n,t){return`firestore_targets_${n}_${t}`}class WI{constructor(t,e,r,i){this.user=t,this.batchId=e,this.state=r,this.error=i}static Yi(t,e,r){const i=JSON.parse(r);let l,d="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return d&&i.error&&(d="string"==typeof i.error.message&&"string"==typeof i.error.code,d&&(l=new Ye(i.error.code,i.error.message))),d?new WI(t,e,i.state,l):(ni("SharedClientState",`Failed to parse mutation state for ID '${e}': ${r}`),null)}Xi(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class MC{constructor(t,e,r){this.targetId=t,this.state=e,this.error=r}static Yi(t,e){const r=JSON.parse(e);let i,l="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(i=new Ye(r.error.code,r.error.message))),l?new MC(t,r.state,i):(ni("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}Xi(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class qI{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Yi(t,e){const r=JSON.parse(e);let i="object"==typeof r&&r.activeTargetIds instanceof Array,l=up();for(let d=0;i&&d<r.activeTargetIds.length;++d)i=sC(r.activeTargetIds[d]),l=l.add(r.activeTargetIds[d]);return i?new qI(t,l):(ni("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class Ak{constructor(t,e){this.clientId=t,this.onlineState=e}static Yi(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new Ak(e.clientId,e.onlineState):(ni("SharedClientState",`Failed to parse online state: ${t}`),null)}}class Nk{constructor(){this.activeTargetIds=up()}Zi(t){this.activeTargetIds=this.activeTargetIds.add(t)}tr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Xi(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Mk{constructor(t,e,r,i,l){this.window=t,this.Yn=e,this.persistenceKey=r,this.er=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new Se(on),this.started=!1,this.rr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.ur=cL(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new Nk),this.cr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,$e.Z)(function*(){const e=yield t.syncEngine.Fs();for(const i of e){if(i===t.er)continue;const l=t.getItem(cL(t.persistenceKey,i));if(l){const d=qI.Yi(i,l);d&&(t.ir=t.ir.insert(d.clientId,d))}}t.wr();const r=t.storage.getItem(t.dr);if(r){const i=t.mr(r);i&&t.gr(i)}for(const i of t.rr)t.sr(i);t.rr=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.ar,JSON.stringify(t))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(t){let e=!1;return this.ir.forEach((r,i)=>{i.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.pr(t,"pending")}updateMutationState(t,e,r){this.pr(t,e,r),this.Ir(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const r=this.storage.getItem(Sk(this.persistenceKey,t));if(r){const i=MC.Yi(t,r);i&&(e=i.state)}}return this.Tr.Zi(t),this.wr(),e}removeLocalQueryTarget(t){this.Tr.tr(t),this.wr()}isLocalQueryTarget(t){return this.Tr.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(Sk(this.persistenceKey,t))}updateQueryState(t,e,r){this.Er(t,e,r)}handleUserChange(t,e,r){e.forEach(i=>{this.Ir(i)}),this.currentUser=t,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(t){this.Ar(t)}notifyBundleLoaded(t){this.Rr(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return et("SharedClientState","READ",t,e),e}setItem(t,e){et("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){et("SharedClientState","REMOVE",t),this.storage.removeItem(t)}sr(t){var e=this;const r=t;if(r.storageArea===this.storage){if(et("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ur)return void ni("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,$e.Z)(function*(){if(e.started){if(null!==r.key)if(e.cr.test(r.key)){if(null==r.newValue){const i=e.Pr(r.key);return e.br(i,null)}{const i=e.Vr(r.key,r.newValue);if(i)return e.br(i.clientId,i)}}else if(e.hr.test(r.key)){if(null!==r.newValue){const i=e.vr(r.key,r.newValue);if(i)return e.Sr(i)}}else if(e.lr.test(r.key)){if(null!==r.newValue){const i=e.Dr(r.key,r.newValue);if(i)return e.Cr(i)}}else if(r.key===e.dr){if(null!==r.newValue){const i=e.mr(r.newValue);if(i)return e.gr(i)}}else if(r.key===e.ar){const i=function(l){let d=Fo.A;if(null!=l)try{const f=JSON.parse(l);$t("number"==typeof f),d=f}catch(f){ni("SharedClientState","Failed to read sequence number from WebStorage",f)}return d}(r.newValue);i!==Fo.A&&e.sequenceNumberHandler(i)}else if(r.key===e._r){const i=e.Nr(r.newValue);yield Promise.all(i.map(l=>e.syncEngine.kr(l)))}}else e.rr.push(r)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(t,e,r){const i=new WI(this.currentUser,t,e,r),l=uL(this.persistenceKey,this.currentUser,t);this.setItem(l,i.Xi())}Ir(t){const e=uL(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Ar(t){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:t}))}Er(t,e,r){const i=Sk(this.persistenceKey,t),l=new MC(t,e,r);this.setItem(i,l.Xi())}Rr(t){const e=JSON.stringify(Array.from(t));this.setItem(this._r,e)}Pr(t){const e=this.cr.exec(t);return e?e[1]:null}Vr(t,e){const r=this.Pr(t);return qI.Yi(r,e)}vr(t,e){const r=this.hr.exec(t),i=Number(r[1]);return WI.Yi(new Mn(void 0!==r[2]?r[2]:null),i,e)}Dr(t,e){const r=this.lr.exec(t),i=Number(r[1]);return MC.Yi(i,e)}mr(t){return Ak.Yi(t)}Nr(t){return JSON.parse(t)}Sr(t){var e=this;return(0,$e.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.Mr(t.batchId,t.state,t.error);et("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Cr(t){return this.syncEngine.Or(t.targetId,t.state,t.error)}br(t,e){const r=e?this.ir.insert(t,e):this.ir.remove(t),i=this.yr(this.ir),l=this.yr(r),d=[],f=[];return l.forEach(m=>{i.has(m)||d.push(m)}),i.forEach(m=>{l.has(m)||f.push(m)}),this.syncEngine.Fr(d,f).then(()=>{this.ir=r})}gr(t){this.ir.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}yr(t){let e=up();return t.forEach((r,i)=>{e=e.unionWith(i.activeTargetIds)}),e}}class dL{constructor(){this.$r=new Nk,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t){return this.$r.Zi(t),this.Br[t]||"not-current"}updateQueryState(t,e,r){this.Br[t]=e}removeLocalQueryTarget(t){this.$r.tr(t)}isLocalQueryTarget(t){return this.$r.activeTargetIds.has(t)}clearQueryState(t){delete this.Br[t]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(t){return this.$r.activeTargetIds.has(t)}start(){return this.$r=new Nk,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class c6{Lr(t){}shutdown(){}}class hL{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(t){this.Qr.push(t)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){et("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Qr)t(0)}Gr(){et("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Qr)t(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const u6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class d6{constructor(t){this.Wr=t.Wr,this.zr=t.zr}Hr(t){this.Jr=t}Yr(t){this.Xr=t}onMessage(t){this.Zr=t}close(){this.zr()}send(t){this.Wr(t)}eo(){this.Jr()}no(t){this.Xr(t)}so(t){this.Zr(t)}}class h6 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.io=(t.ssl?"https":"http")+"://"+t.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(t,e,r,i,l){const d=this.uo(t,e);et("RestConnection","Sending: ",d,r);const f={};return this.ao(f,i,l),this.co(t,d,f,r).then(m=>(et("RestConnection","Received: ",m),m),m=>{throw hm("RestConnection",`${t} failed with error: `,m,"url: ",d,"request:",r),m})}ho(t,e,r,i,l){return this.oo(t,e,r,i,l)}ao(t,e,r){t["X-Goog-Api-Client"]="gl-js/ fire/"+dm,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((i,l)=>t[l]=i),r&&r.headers.forEach((i,l)=>t[l]=i)}uo(t,e){return`${this.io}/v1/${e}:${u6[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}co(t,e,r,i){return new Promise((l,d)=>{const f=new FR;f.listenOnce(PR.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case eC.NO_ERROR:const b=f.getResponseJson();et("Connection","XHR received:",JSON.stringify(b)),l(b);break;case eC.TIMEOUT:et("Connection",'RPC "'+t+'" timed out'),d(new Ye(Be.DEADLINE_EXCEEDED,"Request time out"));break;case eC.HTTP_ERROR:const x=f.getStatus();if(et("Connection",'RPC "'+t+'" failed with status:',x,"response text:",f.getResponseText()),x>0){const I=f.getResponseJson().error;if(I&&I.status&&I.message){const V=function(G){const ne=G.toLowerCase().replace(/_/g,"-");return Object.values(Be).indexOf(ne)>=0?ne:Be.UNKNOWN}(I.status);d(new Ye(V,I.message))}else d(new Ye(Be.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new Ye(Be.UNAVAILABLE,"Connection failed."));break;default:_t()}}finally{et("Connection",'RPC "'+t+'" completed.')}});const m=JSON.stringify(i);f.send(e,"POST",m,r,15)})}lo(t,e,r){const i=[this.io,"/","google.firestore.v1.Firestore","/",t,"/channel"],l=pI(),d=kR(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new tF({})),this.ao(f.initMessageHeaders,e,r),(0,Y.uI)()||(0,Y.b$)()||(0,Y.d)()||(0,Y.w1)()||(0,Y.Mn)()||(0,Y.ru)()||(f.httpHeadersOverwriteParam="$httpHeaders");const m=i.join("");et("Connection","Creating WebChannel: "+m,f);const b=l.createWebChannel(m,f);let x=!1,I=!1;const V=new d6({Wr:ne=>{I?et("Connection","Not sending because WebChannel is closed:",ne):(x||(et("Connection","Opening WebChannel transport."),b.open(),x=!0),et("Connection","WebChannel sending:",ne),b.send(ne))},zr:()=>b.close()}),G=(ne,we,Ue)=>{ne.listen(we,tt=>{try{Ue(tt)}catch(ot){setTimeout(()=>{throw ot},0)}})};return G(b,nC.EventType.OPEN,()=>{I||et("Connection","WebChannel transport opened.")}),G(b,nC.EventType.CLOSE,()=>{I||(I=!0,et("Connection","WebChannel transport closed"),V.no())}),G(b,nC.EventType.ERROR,ne=>{I||(I=!0,hm("Connection","WebChannel transport errored:",ne),V.no(new Ye(Be.UNAVAILABLE,"The operation could not be completed")))}),G(b,nC.EventType.MESSAGE,ne=>{var we;if(!I){const Ue=ne.data[0];$t(!!Ue);const tt=Ue,ot=tt.error||(null===(we=tt[0])||void 0===we?void 0:we.error);if(ot){et("Connection","WebChannel received error:",ot);const gt=ot.status;let yt=function(bn){const Xr=M[bn];if(void 0!==Xr)return ue(Xr)}(gt),jt=ot.message;void 0===yt&&(yt=Be.INTERNAL,jt="Unknown error status: "+gt+" with message "+ot.message),I=!0,V.no(new Ye(yt,jt)),b.close()}else et("Connection","WebChannel received:",Ue),V.so(Ue)}}),G(d,OR.STAT_EVENT,ne=>{ne.stat===tC.PROXY?et("Connection","Detected buffering proxy"):ne.stat===tC.NOPROXY&&et("Connection","Detected no buffering proxy")}),setTimeout(()=>{V.eo()},0),V}}function fL(){return"undefined"!=typeof window?window:null}function ZI(){return"undefined"!=typeof document?document:null}function RC(n){return new e4(n,!0)}class Rk{constructor(t,e,r=1e3,i=1.5,l=6e4){this.Yn=t,this.timerId=e,this.fo=r,this._o=i,this.wo=l,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(t){this.cancel();const e=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),i=Math.max(0,e-r);i>0&&et("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.mo} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.po=Date.now(),t())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class pL{constructor(t,e,r,i,l,d,f,m){this.Yn=t,this.Ro=r,this.Po=i,this.bo=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new Rk(t,e)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var t=this;return(0,$e.Z)(function*(){t.Co()&&(yield t.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(t){this.$o(),this.stream.send(t)}Oo(){var t=this;return(0,$e.Z)(function*(){if(t.xo())return t.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(t,e){var r=this;return(0,$e.Z)(function*(){r.$o(),r.Bo(),r.Do.cancel(),r.Vo++,4!==t?r.Do.reset():e&&e.code===Be.RESOURCE_EXHAUSTED?(ni(e.toString()),ni("Using maximum backoff delay to prevent overloading the backend."),r.Do.Io()):e&&e.code===Be.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Lo(),r.stream.close(),r.stream=null),r.state=t,yield r.listener.Yr(e)})()}Lo(){}auth(){this.state=1;const t=this.Uo(this.Vo),e=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Vo===e&&this.qo(r,i)},r=>{t(()=>{const i=new Ye(Be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ko(i)})})}qo(t,e){const r=this.Uo(this.Vo);this.stream=this.Go(t,e),this.stream.Hr(()=>{r(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(i=>{r(()=>this.Ko(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}No(){var t=this;this.state=5,this.Do.To((0,$e.Z)(function*(){t.state=0,t.start()}))}Ko(t){return et("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Uo(t){return e=>{this.Yn.enqueueAndForget(()=>this.Vo===t?e():(et("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class f6 extends pL{constructor(t,e,r,i,l,d){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,i,d),this.M=l}Go(t,e){return this.bo.lo("Listen",t,e)}onMessage(t){this.Do.reset();const e=function(n,t){let e;if("targetChange"in t){const r="NO_CHANGE"===(m=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:_t(),i=t.targetChange.targetIds||[],l=function(m,b){return m.N?($t(void 0===b||"string"==typeof b),pi.fromBase64String(b||"")):($t(void 0===b||b instanceof Uint8Array),pi.fromUint8Array(b||new Uint8Array))}(n,t.targetChange.resumeToken),d=t.targetChange.cause,f=d&&function(m){const b=void 0===m.code?Be.UNKNOWN:ue(m.code);return new Ye(b,m.message||"")}(d);e=new dF(r,i,l,f||null)}else if("documentChange"in t){const r=t.documentChange,i=_u(n,r.document.name),l=ls(r.document.updateTime),d=new Ii({mapValue:{fields:r.document.fields}}),f=lr.newFoundDocument(i,l,d);e=new OI(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in t){const r=t.documentDelete,i=_u(n,r.document),l=r.readTime?ls(r.readTime):Bt.min(),d=lr.newNoDocument(i,l);e=new OI([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in t){const r=t.documentRemove,i=_u(n,r.document);e=new OI([],r.removedTargetIds||[],i,null)}else{if(!("filter"in t))return _t();{const r=t.filter,l=new T(r.count||0);e=new uF(r.targetId,l)}}var m;return e}(this.M,t),r=function(i){if(!("targetChange"in i))return Bt.min();const l=i.targetChange;return l.targetIds&&l.targetIds.length?Bt.min():l.readTime?ls(l.readTime):Bt.min()}(t);return this.listener.Qo(e,r)}jo(t){const e={};e.database=CC(this.M),e.addTarget=function(i,l){let d;const f=l.target;return d=th(f)?{documents:wF(i,f)}:{query:CF(i,f)},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?d.resumeToken=gF(i,l.resumeToken):l.snapshotVersion.compareTo(Bt.min())>0&&(d.readTime=bC(i,l.snapshotVersion.toTimestamp())),d}(this.M,t);const r=function(n,t){const e=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return _t()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);r&&(e.labels=r),this.Fo(e)}Wo(t){const e={};e.database=CC(this.M),e.removeTarget=t,this.Fo(e)}}class p6 extends pL{constructor(t,e,r,i,l,d){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,i,d),this.M=l,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(t,e){return this.bo.lo("Write",t,e)}onMessage(t){if($t(!!t.streamToken),this.lastStreamToken=t.streamToken,this.zo){this.Do.reset();const e=function(n,t){return n&&n.length>0?($t(void 0!==t),n.map(e=>function(r,i){let l=ls(r.updateTime?r.updateTime:i);return l.isEqual(Bt.min())&&(l=ls(i)),new aF(l,r.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),r=ls(t.commitTime);return this.listener.Yo(r,e)}return $t(!t.writeResults||0===t.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const t={};t.database=CC(this.M),this.Fo(t)}Jo(t){const e={streamToken:this.lastStreamToken,writes:t.map(r=>EC(this.M,r))};this.Fo(e)}}class g6 extends class{}{constructor(t,e,r,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.bo=r,this.M=i,this.tu=!1}eu(){if(this.tu)throw new Ye(Be.FAILED_PRECONDITION,"The client has already been terminated.")}oo(t,e,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.bo.oo(t,e,r,i,l)).catch(i=>{throw"FirebaseError"===i.name?(i.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ye(Be.UNKNOWN,i.toString())})}ho(t,e,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.bo.ho(t,e,r,i,l)).catch(i=>{throw"FirebaseError"===i.name?(i.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ye(Be.UNKNOWN,i.toString())})}terminate(){this.tu=!0}}class m6{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(t){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ou("Offline")))}set(t){this.cu(),this.nu=0,"Online"===t&&(this.iu=!1),this.ou(t)}ou(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}uu(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(ni(e),this.iu=!1):et("OnlineStateTracker",e)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class _6{constructor(t,e,r,i,l){var d=this;this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=l,this._u.Lr(f=>{r.enqueueAndForget((0,$e.Z)(function*(){var m;gp(d)&&(et("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,$e.Z)(function*(b){const x=ut(b);x.fu.add(4),yield Jy(x),x.wu.set("Unknown"),x.fu.delete(4),yield kC(x)}),function(b){return m.apply(this,arguments)})(d))}))}),this.wu=new m6(r,i)}}function kC(n){return kk.apply(this,arguments)}function kk(){return(kk=(0,$e.Z)(function*(n){if(gp(n))for(const t of n.du)yield t(!0)})).apply(this,arguments)}function Jy(n){return Pk.apply(this,arguments)}function Pk(){return(Pk=(0,$e.Z)(function*(n){for(const t of n.du)yield t(!1)})).apply(this,arguments)}function zI(n,t){const e=ut(n);e.lu.has(t.targetId)||(e.lu.set(t.targetId,t),Lk(e)?Fk(e):ev(e).xo()&&Ok(e,t))}function PC(n,t){const e=ut(n),r=ev(e);e.lu.delete(t),r.xo()&&gL(e,t),0===e.lu.size&&(r.xo()?r.Mo():gp(e)&&e.wu.set("Unknown"))}function Ok(n,t){n.mu.Z(t.targetId),ev(n).jo(t)}function gL(n,t){n.mu.Z(t),ev(n).Wo(t)}function Fk(n){n.mu=new Q8({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>n.lu.get(t)||null}),ev(n).start(),n.wu.ru()}function Lk(n){return gp(n)&&!ev(n).Co()&&n.lu.size>0}function gp(n){return 0===ut(n).fu.size}function mL(n){n.mu=void 0}function y6(n){return Vk.apply(this,arguments)}function Vk(){return(Vk=(0,$e.Z)(function*(n){n.lu.forEach((t,e)=>{Ok(n,t)})})).apply(this,arguments)}function v6(n,t){return Bk.apply(this,arguments)}function Bk(){return(Bk=(0,$e.Z)(function*(n,t){mL(n),Lk(n)?(n.wu.au(t),Fk(n)):n.wu.set("Unknown")})).apply(this,arguments)}function b6(n,t,e){return Uk.apply(this,arguments)}function Uk(){return(Uk=(0,$e.Z)(function*(n,t,e){if(n.wu.set("Online"),t instanceof dF&&2===t.state&&t.cause)try{yield(r=(0,$e.Z)(function*(i,l){const d=l.cause;for(const f of l.targetIds)i.lu.has(f)&&(yield i.remoteSyncer.rejectListen(f,d),i.lu.delete(f),i.mu.removeTarget(f))}),function(i,l){return r.apply(this,arguments)})(n,t)}catch(r){et("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),yield YI(n,r)}else if(t instanceof OI?n.mu.ut(t):t instanceof uF?n.mu._t(t):n.mu.ht(t),!e.isEqual(Bt.min()))try{const r=yield iL(n.localStore);e.compareTo(r)>=0&&(yield function(i,l){const d=i.mu.yt(l);return d.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const b=i.lu.get(m);b&&i.lu.set(m,b.withResumeToken(f.resumeToken,l))}}),d.targetMismatches.forEach(f=>{const m=i.lu.get(f);if(!m)return;i.lu.set(f,m.withResumeToken(pi.EMPTY_BYTE_STRING,m.snapshotVersion)),gL(i,f);const b=new dp(m.target,f,1,m.sequenceNumber);Ok(i,b)}),i.remoteSyncer.applyRemoteEvent(d)}(n,e))}catch(r){et("RemoteStore","Failed to raise snapshot:",r),yield YI(n,r)}var r})).apply(this,arguments)}function YI(n,t,e){return Hk.apply(this,arguments)}function Hk(){return(Hk=(0,$e.Z)(function*(n,t,e){if(!Em(t))throw t;n.fu.add(1),yield Jy(n),n.wu.set("Offline"),e||(e=()=>iL(n.localStore)),n.asyncQueue.enqueueRetryable((0,$e.Z)(function*(){et("RemoteStore","Retrying IndexedDB access"),yield e(),n.fu.delete(1),yield kC(n)}))})).apply(this,arguments)}function _L(n,t){return t().catch(e=>YI(n,e,t))}function Xy(n){return $k.apply(this,arguments)}function $k(){return($k=(0,$e.Z)(function*(n){const t=ut(n),e=mp(t);let r=t.hu.length>0?t.hu[t.hu.length-1].batchId:-1;for(;w6(t);)try{const i=yield J4(t.localStore,r);if(null===i){0===t.hu.length&&e.Mo();break}r=i.batchId,C6(t,i)}catch(i){yield YI(t,i)}yL(t)&&vL(t)})).apply(this,arguments)}function w6(n){return gp(n)&&n.hu.length<10}function C6(n,t){n.hu.push(t);const e=mp(n);e.xo()&&e.Ho&&e.Jo(t.mutations)}function yL(n){return gp(n)&&!mp(n).Co()&&n.hu.length>0}function vL(n){mp(n).start()}function E6(n){return jk.apply(this,arguments)}function jk(){return(jk=(0,$e.Z)(function*(n){mp(n).Zo()})).apply(this,arguments)}function x6(n){return Gk.apply(this,arguments)}function Gk(){return(Gk=(0,$e.Z)(function*(n){const t=mp(n);for(const e of n.hu)t.Jo(e.mutations)})).apply(this,arguments)}function D6(n,t,e){return Wk.apply(this,arguments)}function Wk(){return(Wk=(0,$e.Z)(function*(n,t,e){const r=n.hu.shift(),i=uk.from(r,t,e);yield _L(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Xy(n)})).apply(this,arguments)}function T6(n,t){return qk.apply(this,arguments)}function qk(){return(qk=(0,$e.Z)(function*(n,t){var e;t&&mp(n).Ho&&(yield(e=(0,$e.Z)(function*(r,i){if(K(l=i.code)&&l!==Be.ABORTED){const d=r.hu.shift();mp(r).ko(),yield _L(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,i)),yield Xy(r)}var l}),function(r,i){return e.apply(this,arguments)})(n,t)),yL(n)&&vL(n)})).apply(this,arguments)}function bL(n,t){return Zk.apply(this,arguments)}function Zk(){return(Zk=(0,$e.Z)(function*(n,t){const e=ut(n);e.asyncQueue.verifyOperationInProgress(),et("RemoteStore","RemoteStore received new credentials");const r=gp(e);e.fu.add(3),yield Jy(e),r&&e.wu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.fu.delete(3),yield kC(e)})).apply(this,arguments)}function zk(n,t){return Yk.apply(this,arguments)}function Yk(){return(Yk=(0,$e.Z)(function*(n,t){const e=ut(n);t?(e.fu.delete(2),yield kC(e)):t||(e.fu.add(2),yield Jy(e),e.wu.set("Unknown"))})).apply(this,arguments)}function ev(n){return n.gu||(n.gu=function(t,e,r){const i=ut(t);return i.eu(),new f6(e,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Hr:y6.bind(null,n),Yr:v6.bind(null,n),Qo:b6.bind(null,n)}),n.du.push(function(){var t=(0,$e.Z)(function*(e){e?(n.gu.ko(),Lk(n)?Fk(n):n.wu.set("Unknown")):(yield n.gu.stop(),mL(n))});return function(e){return t.apply(this,arguments)}}())),n.gu}function mp(n){return n.yu||(n.yu=function(t,e,r){const i=ut(t);return i.eu(),new p6(e,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Hr:E6.bind(null,n),Yr:T6.bind(null,n),Xo:x6.bind(null,n),Yo:D6.bind(null,n)}),n.du.push(function(){var t=(0,$e.Z)(function*(e){e?(n.yu.ko(),yield Xy(n)):(yield n.yu.stop(),n.hu.length>0&&(et("RemoteStore",`Stopping write stream with ${n.hu.length} pending writes`),n.hu=[]))});return function(e){return t.apply(this,arguments)}}())),n.yu}class Kk{constructor(t,e,r,i,l){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=i,this.removalCallback=l,this.deferred=new Ei,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(t,e,r,i,l){const d=Date.now()+r,f=new Kk(t,e,d,i,l);return f.start(r),f}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ye(Be.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tv(n,t){if(ni("AsyncQueue",`${t}: ${n}`),Em(n))return new Ye(Be.UNAVAILABLE,`${t}: ${n}`);throw n}class nv{constructor(t){this.comparator=t?(e,r)=>t(e,r)||lt.comparator(e.key,r.key):(e,r)=>lt.comparator(e.key,r.key),this.keyedMap=sh(),this.sortedSet=new Se(this.comparator)}static emptySet(t){return new nv(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,r)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof nv)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const i=e.getNext().key,l=r.getNext().key;if(!i.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const r=new nv;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}class wL{constructor(){this.pu=new Se(lt.comparator)}track(t){const e=t.doc.key,r=this.pu.get(e);r?0!==t.type&&3===r.type?this.pu=this.pu.insert(e,t):3===t.type&&1!==r.type?this.pu=this.pu.insert(e,{type:r.type,doc:t.doc}):2===t.type&&2===r.type?this.pu=this.pu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===r.type?this.pu=this.pu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===r.type?this.pu=this.pu.remove(e):1===t.type&&2===r.type?this.pu=this.pu.insert(e,{type:1,doc:r.doc}):0===t.type&&1===r.type?this.pu=this.pu.insert(e,{type:2,doc:t.doc}):_t():this.pu=this.pu.insert(e,t)}Iu(){const t=[];return this.pu.inorderTraversal((e,r)=>{t.push(r)}),t}}class rv{constructor(t,e,r,i,l,d,f,m){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=f,this.excludesMetadataChanges=m}static fromInitialDocuments(t,e,r,i){const l=[];return e.forEach(d=>{l.push({type:0,doc:d})}),new rv(t,e,nv.emptySet(e),l,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&dl(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==r[i].type||!e[i].doc.isEqual(r[i].doc))return!1;return!0}}class I6{constructor(){this.Tu=void 0,this.listeners=[]}}class S6{constructor(){this.queries=new pe(t=>SI(t),dl),this.onlineState="Unknown",this.Eu=new Set}}function Qk(n,t){return Jk.apply(this,arguments)}function Jk(){return(Jk=(0,$e.Z)(function*(n,t){const e=ut(n),r=t.query;let i=!1,l=e.queries.get(r);if(l||(i=!0,l=new I6),i)try{l.Tu=yield e.onListen(r)}catch(d){const f=tv(d,`Initialization of query '${fC(t.query)}' failed`);return void t.onError(f)}e.queries.set(r,l),l.listeners.push(t),t.Au(e.onlineState),l.Tu&&t.Ru(l.Tu)&&tP(e)})).apply(this,arguments)}function Xk(n,t){return eP.apply(this,arguments)}function eP(){return(eP=(0,$e.Z)(function*(n,t){const e=ut(n),r=t.query;let i=!1;const l=e.queries.get(r);if(l){const d=l.listeners.indexOf(t);d>=0&&(l.listeners.splice(d,1),i=0===l.listeners.length)}if(i)return e.queries.delete(r),e.onUnlisten(r)})).apply(this,arguments)}function A6(n,t){const e=ut(n);let r=!1;for(const i of t){const d=e.queries.get(i.query);if(d){for(const f of d.listeners)f.Ru(i)&&(r=!0);d.Tu=i}}r&&tP(e)}function N6(n,t,e){const r=ut(n),i=r.queries.get(t);if(i)for(const l of i.listeners)l.onError(e);r.queries.delete(t)}function tP(n){n.Eu.forEach(t=>{t.next()})}class nP{constructor(t,e,r){this.query=t,this.Pu=e,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}Ru(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)3!==i.type&&r.push(i);t=new rv(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.bu?this.vu(t)&&(this.Pu.next(t),e=!0):this.Su(t,this.onlineState)&&(this.Du(t),e=!0),this.Vu=t,e}onError(t){this.Pu.error(t)}Au(t){this.onlineState=t;let e=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,t)&&(this.Du(this.Vu),e=!0),e}Su(t,e){return!t.fromCache||!(this.options.Cu&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)}vu(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(t){t=rv.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.bu=!0,this.Pu.next(t)}}class M6{constructor(t,e){this.payload=t,this.byteLength=e}xu(){return"metadata"in this.payload}}class CL{constructor(t){this.M=t}fi(t){return _u(this.M,t)}di(t){return t.metadata.exists?bF(this.M,t.document,!1):lr.newNoDocument(this.fi(t.metadata.name),this._i(t.metadata.readTime))}_i(t){return ls(t)}}class R6{constructor(t,e,r){this.Nu=t,this.localStore=e,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=EL(t)}ku(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.payload.namedQuery)this.queries.push(t.payload.namedQuery);else if(t.payload.documentMetadata){this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e;const r=Pn.fromString(t.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}Mu(t){const e=new Map,r=new CL(this.M);for(const i of t)if(i.metadata.queries){const l=r.fi(i.metadata.name);for(const d of i.metadata.queries){const f=(e.get(d)||Hn()).add(l);e.set(d,f)}}return e}complete(){var t=this;return(0,$e.Z)(function*(){const e=yield function(n,t,e,r){return xk.apply(this,arguments)}(t.localStore,new CL(t.M),t.documents,t.Nu.id),r=t.Mu(t.documents);for(const i of t.queries)yield e6(t.localStore,i,r.get(i.name));return t.progress.taskState="Success",{progress:t.progress,Ou:t.collectionGroups,Fu:e}})()}}function EL(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class xL{constructor(t){this.key=t}}class DL{constructor(t){this.key=t}}class TL{constructor(t,e){this.query=t,this.$u=e,this.Bu=null,this.current=!1,this.Lu=Hn(),this.mutatedKeys=Hn(),this.Uu=mC(t),this.qu=new nv(this.Uu)}get Ku(){return this.$u}Gu(t,e){const r=e?e.Qu:new wL,i=e?e.qu:this.qu;let l=e?e.mutatedKeys:this.mutatedKeys,d=i,f=!1;const m=bm(this.query)&&i.size===this.query.limit?i.last():null,b=Vy(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((x,I)=>{const V=i.get(x),G=pC(this.query,I)?I:null,ne=!!V&&this.mutatedKeys.has(V.key),we=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let Ue=!1;V&&G?V.data.isEqual(G.data)?ne!==we&&(r.track({type:3,doc:G}),Ue=!0):this.ju(V,G)||(r.track({type:2,doc:G}),Ue=!0,(m&&this.Uu(G,m)>0||b&&this.Uu(G,b)<0)&&(f=!0)):!V&&G?(r.track({type:0,doc:G}),Ue=!0):V&&!G&&(r.track({type:1,doc:V}),Ue=!0,(m||b)&&(f=!0)),Ue&&(G?(d=d.add(G),l=we?l.add(x):l.delete(x)):(d=d.delete(x),l=l.delete(x)))}),bm(this.query)||Vy(this.query))for(;d.size>this.query.limit;){const x=bm(this.query)?d.last():d.first();d=d.delete(x.key),l=l.delete(x.key),r.track({type:1,doc:x})}return{qu:d,Qu:r,ni:f,mutatedKeys:l}}ju(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r){const i=this.qu;this.qu=t.qu,this.mutatedKeys=t.mutatedKeys;const l=t.Qu.Iu();l.sort((b,x)=>function(I,V){const G=ne=>{switch(ne){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _t()}};return G(I)-G(V)}(b.type,x.type)||this.Uu(b.doc,x.doc)),this.Wu(r);const d=e?this.zu():[],f=0===this.Lu.size&&this.current?1:0,m=f!==this.Bu;return this.Bu=f,0!==l.length||m?{snapshot:new rv(this.query,t.qu,i,l,t.mutatedKeys,0===f,m,!1),Hu:d}:{Hu:d}}Au(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new wL,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(t){return!this.$u.has(t)&&!!this.qu.has(t)&&!this.qu.get(t).hasLocalMutations}Wu(t){t&&(t.addedDocuments.forEach(e=>this.$u=this.$u.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.$u=this.$u.delete(e)),this.current=t.current)}zu(){if(!this.current)return[];const t=this.Lu;this.Lu=Hn(),this.qu.forEach(r=>{this.Ju(r.key)&&(this.Lu=this.Lu.add(r.key))});const e=[];return t.forEach(r=>{this.Lu.has(r)||e.push(new DL(r))}),this.Lu.forEach(r=>{t.has(r)||e.push(new xL(r))}),e}Yu(t){this.$u=t.li,this.Lu=Hn();const e=this.Gu(t.documents);return this.applyChanges(e,!0)}Xu(){return rv.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class k6{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class P6{constructor(t){this.key=t,this.Zu=!1}}class O6{constructor(t,e,r,i,l,d){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=i,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.ta={},this.ea=new pe(f=>SI(f),dl),this.na=new Map,this.sa=new Set,this.ia=new Se(lt.comparator),this.ra=new Map,this.oa=new Tk,this.ua={},this.aa=new Map,this.ca=Am.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function F6(n,t){return rP.apply(this,arguments)}function rP(){return(rP=(0,$e.Z)(function*(n,t){const e=TP(n);let r,i;const l=e.ea.get(t);if(l)r=l.targetId,e.sharedClientState.addLocalQueryTarget(r),i=l.view.Xu();else{const d=yield Ky(e.localStore,Wi(t));e.isPrimaryClient&&zI(e.remoteStore,d);const f=e.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,i=yield iP(e,t,r,"current"===f)}return i})).apply(this,arguments)}function iP(n,t,e,r){return sP.apply(this,arguments)}function sP(){return(sP=(0,$e.Z)(function*(n,t,e,r){n.la=(x,I,V)=>{return(G=(0,$e.Z)(function*(ne,we,Ue,tt){let ot=we.view.Gu(Ue);ot.ni&&(ot=yield GI(ne.localStore,we.query,!1).then(({documents:jt})=>we.view.Gu(jt,ot)));const gt=tt&&tt.targetChanges.get(we.targetId),yt=we.view.applyChanges(ot,ne.isPrimaryClient,gt);return gP(ne,we.targetId,yt.Hu),yt.snapshot}),function(ne,we,Ue,tt){return G.apply(this,arguments)})(n,x,I,V);var G};const i=yield GI(n.localStore,t,!0),l=new TL(t,i.li),d=l.Gu(i.documents),f=ah.createSynthesizedTargetChangeForCurrentChange(e,r&&"Offline"!==n.onlineState),m=l.applyChanges(d,n.isPrimaryClient,f);gP(n,e,m.Hu);const b=new k6(t,e,l);return n.ea.set(t,b),n.na.has(e)?n.na.get(e).push(t):n.na.set(e,[t]),m.snapshot})).apply(this,arguments)}function L6(n,t){return oP.apply(this,arguments)}function oP(){return(oP=(0,$e.Z)(function*(n,t){const e=ut(n),r=e.ea.get(t),i=e.na.get(r.targetId);if(i.length>1)return e.na.set(r.targetId,i.filter(l=>!dl(l,t))),void e.ea.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(r.targetId),e.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Qy(e.localStore,r.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(r.targetId),PC(e.remoteStore,r.targetId),iv(e,r.targetId)}).catch(Nm))):(iv(e,r.targetId),yield Qy(e.localStore,r.targetId,!0))})).apply(this,arguments)}function aP(){return(aP=(0,$e.Z)(function*(n,t,e){const r=IP(n);try{const i=yield function(l,d){const f=ut(l),m=Qr.now(),b=d.reduce((I,V)=>I.add(V.key),Hn());let x;return f.persistence.runTransaction("Locally write mutations","readwrite",I=>f.ci.Ks(I,b).next(V=>{x=V;const G=[];for(const ne of d){const we=cF(ne,x.get(ne.key));null!=we&&G.push(new u(ne.key,we,_m(we.value.mapValue),gi.exists(!0)))}return f.Bs.addMutationBatch(I,m,G,d)})).then(I=>(I.applyToLocalDocumentSet(x),{batchId:I.batchId,changes:x}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(l,d,f){let m=l.ua[l.currentUser.toKey()];m||(m=new Se(on)),m=m.insert(d,f),l.ua[l.currentUser.toKey()]=m}(r,i.batchId,e),yield lh(r,i.changes),yield Xy(r.remoteStore)}catch(i){const l=tv(i,"Failed to persist write");e.reject(l)}})).apply(this,arguments)}function IL(n,t){return lP.apply(this,arguments)}function lP(){return(lP=(0,$e.Z)(function*(n,t){const e=ut(n);try{const r=yield Q4(e.localStore,t);t.targetChanges.forEach((i,l)=>{const d=e.ra.get(l);d&&($t(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?d.Zu=!0:i.modifiedDocuments.size>0?$t(d.Zu):i.removedDocuments.size>0&&($t(d.Zu),d.Zu=!1))}),yield lh(e,r,t)}catch(r){yield Nm(r)}})).apply(this,arguments)}function SL(n,t,e){const r=ut(n);if(r.isPrimaryClient&&0===e||!r.isPrimaryClient&&1===e){const i=[];r.ea.forEach((l,d)=>{const f=d.view.Au(t);f.snapshot&&i.push(f.snapshot)}),function(l,d){const f=ut(l);f.onlineState=d;let m=!1;f.queries.forEach((b,x)=>{for(const I of x.listeners)I.Au(d)&&(m=!0)}),m&&tP(f)}(r.eventManager,t),i.length&&r.ta.Qo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function B6(n,t,e){return cP.apply(this,arguments)}function cP(){return(cP=(0,$e.Z)(function*(n,t,e){const r=ut(n);r.sharedClientState.updateQueryState(t,"rejected",e);const i=r.ra.get(t),l=i&&i.key;if(l){let d=new Se(lt.comparator);d=d.insert(l,lr.newNoDocument(l,Bt.min()));const f=Hn().add(l),m=new oh(Bt.min(),new Map,new Pe(on),d,f);yield IL(r,m),r.ia=r.ia.remove(l),r.ra.delete(t),mP(r)}else yield Qy(r.localStore,t,!1).then(()=>iv(r,t,e)).catch(Nm)})).apply(this,arguments)}function U6(n,t){return uP.apply(this,arguments)}function uP(){return(uP=(0,$e.Z)(function*(n,t){const e=ut(n),r=t.batch.batchId;try{const i=yield K4(e.localStore,t);pP(e,r,null),fP(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),yield lh(e,i)}catch(i){yield Nm(i)}})).apply(this,arguments)}function H6(n,t,e){return dP.apply(this,arguments)}function dP(){return(dP=(0,$e.Z)(function*(n,t,e){const r=ut(n);try{const i=yield function(l,d){const f=ut(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let b;return f.Bs.lookupMutationBatch(m,d).next(x=>($t(null!==x),b=x.keys(),f.Bs.removeMutationBatch(m,x))).next(()=>f.Bs.performConsistencyCheck(m)).next(()=>f.ci.Ks(m,b))})}(r.localStore,t);pP(r,t,e),fP(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),yield lh(r,i)}catch(i){yield Nm(i)}})).apply(this,arguments)}function hP(){return(hP=(0,$e.Z)(function*(n,t){const e=ut(n);gp(e.remoteStore)||et("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(l){const d=ut(l);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>d.Bs.getHighestUnacknowledgedBatchId(f))}(e.localStore);if(-1===r)return void t.resolve();const i=e.aa.get(r)||[];i.push(t),e.aa.set(r,i)}catch(r){const i=tv(r,"Initialization of waitForPendingWrites() operation failed");t.reject(i)}})).apply(this,arguments)}function fP(n,t){(n.aa.get(t)||[]).forEach(e=>{e.resolve()}),n.aa.delete(t)}function pP(n,t,e){const r=ut(n);let i=r.ua[r.currentUser.toKey()];if(i){const l=i.get(t);l&&(e?l.reject(e):l.resolve(),i=i.remove(t)),r.ua[r.currentUser.toKey()]=i}}function iv(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.na.get(t))n.ea.delete(r),e&&n.ta.fa(r,e);n.na.delete(t),n.isPrimaryClient&&n.oa.Pi(t).forEach(r=>{n.oa.containsKey(r)||AL(n,r)})}function AL(n,t){n.sa.delete(t.path.canonicalString());const e=n.ia.get(t);null!==e&&(PC(n.remoteStore,e),n.ia=n.ia.remove(t),n.ra.delete(e),mP(n))}function gP(n,t,e){for(const r of e)r instanceof xL?(n.oa.addReference(r.key,t),j6(n,r)):r instanceof DL?(et("SyncEngine","Document no longer in limbo: "+r.key),n.oa.removeReference(r.key,t),n.oa.containsKey(r.key)||AL(n,r.key)):_t()}function j6(n,t){const e=t.key,r=e.path.canonicalString();n.ia.get(e)||n.sa.has(r)||(et("SyncEngine","New document in limbo: "+e),n.sa.add(r),mP(n))}function mP(n){for(;n.sa.size>0&&n.ia.size<n.maxConcurrentLimboResolutions;){const t=n.sa.values().next().value;n.sa.delete(t);const e=new lt(Pn.fromString(t)),r=n.ca.next();n.ra.set(r,new P6(e)),n.ia=n.ia.insert(e,r),zI(n.remoteStore,new dp(Wi(nh(e.path)),r,2,Fo.A))}}function lh(n,t,e){return _P.apply(this,arguments)}function _P(){return(_P=(0,$e.Z)(function*(n,t,e){const r=ut(n),i=[],l=[],d=[];var f;r.ea.isEmpty()||(r.ea.forEach((f,m)=>{d.push(r.la(m,t,e).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,b.fromCache?"not-current":"current"),i.push(b);const x=wk.Ys(m.targetId,b);l.push(x)}}))}),yield Promise.all(d),r.ta.Qo(i),yield(f=(0,$e.Z)(function*(m,b){const x=ut(m);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>je.forEach(b,V=>je.forEach(V.Hs,G=>x.persistence.referenceDelegate.addReference(I,V.targetId,G)).next(()=>je.forEach(V.Js,G=>x.persistence.referenceDelegate.removeReference(I,V.targetId,G)))))}catch(I){if(!Em(I))throw I;et("LocalStore","Failed to update sequence numbers: "+I)}for(const I of b){const V=I.targetId;if(!I.fromCache){const G=x.ii.get(V),we=G.withLastLimboFreeSnapshotVersion(G.snapshotVersion);x.ii=x.ii.insert(V,we)}}}),function(m,b){return f.apply(this,arguments)})(r.localStore,l))})).apply(this,arguments)}function G6(n,t){return yP.apply(this,arguments)}function yP(){return(yP=(0,$e.Z)(function*(n,t){const e=ut(n);if(!e.currentUser.isEqual(t)){et("SyncEngine","User change. New user:",t.toKey());const r=yield rL(e.localStore,t);e.currentUser=t,(i=e).aa.forEach(d=>{d.forEach(f=>{f.reject(new Ye(Be.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.aa.clear(),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),yield lh(e,r.hi)}var i})).apply(this,arguments)}function W6(n,t){const e=ut(n),r=e.ra.get(t);if(r&&r.Zu)return Hn().add(r.key);{let i=Hn();const l=e.na.get(t);if(!l)return i;for(const d of l){const f=e.ea.get(d);i=i.unionWith(f.view.Ku)}return i}}function q6(n,t){return vP.apply(this,arguments)}function vP(){return(vP=(0,$e.Z)(function*(n,t){const e=ut(n),r=yield GI(e.localStore,t.query,!0),i=t.view.Yu(r);return e.isPrimaryClient&&gP(e,t.targetId,i.Hu),i})).apply(this,arguments)}function Z6(n,t){return bP.apply(this,arguments)}function bP(){return(bP=(0,$e.Z)(function*(n,t){const e=ut(n);return aL(e.localStore,t).then(r=>lh(e,r))})).apply(this,arguments)}function z6(n,t,e,r){return wP.apply(this,arguments)}function wP(){return(wP=(0,$e.Z)(function*(n,t,e,r){const i=ut(n),l=yield function(d,f){const m=ut(d),b=ut(m.Bs);return m.persistence.runTransaction("Lookup mutation documents","readonly",x=>b.fn(x,f).next(I=>I?m.ci.Ks(x,I):je.resolve(null)))}(i.localStore,t);var f;null!==l?("pending"===e?yield Xy(i.remoteStore):"acknowledged"===e||"rejected"===e?(pP(i,t,r||null),fP(i,t),f=t,ut(ut(i.localStore).Bs)._n(f)):_t(),yield lh(i,l)):et("SyncEngine","Cannot apply mutation batch with id: "+t)})).apply(this,arguments)}function CP(){return(CP=(0,$e.Z)(function*(n,t){const e=ut(n);if(TP(e),IP(e),!0===t&&!0!==e.ha){const r=e.sharedClientState.getAllActiveQueryTargets(),i=yield NL(e,r.toArray());e.ha=!0,yield zk(e.remoteStore,!0);for(const l of i)zI(e.remoteStore,l)}else if(!1===t&&!1!==e.ha){const r=[];let i=Promise.resolve();e.na.forEach((l,d)=>{e.sharedClientState.isLocalQueryTarget(d)?r.push(d):i=i.then(()=>(iv(e,d),Qy(e.localStore,d,!0))),PC(e.remoteStore,d)}),yield i,yield NL(e,r),function(l){const d=ut(l);d.ra.forEach((f,m)=>{PC(d.remoteStore,m)}),d.oa.bi(),d.ra=new Map,d.ia=new Se(lt.comparator)}(e),e.ha=!1,yield zk(e.remoteStore,!1)}})).apply(this,arguments)}function NL(n,t,e){return EP.apply(this,arguments)}function EP(){return(EP=(0,$e.Z)(function*(n,t,e){const r=ut(n),i=[],l=[];for(const d of t){let f;const m=r.na.get(d);if(m&&0!==m.length){f=yield Ky(r.localStore,Wi(m[0]));for(const b of m){const x=r.ea.get(b),I=yield q6(r,x);I.snapshot&&l.push(I.snapshot)}}else{const b=yield oL(r.localStore,d);f=yield Ky(r.localStore,b),yield iP(r,ML(b),d,!1)}i.push(f)}return r.ta.Qo(l),i})).apply(this,arguments)}function ML(n){return II(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function K6(n){const t=ut(n);return ut(ut(t.localStore).persistence).Fs()}function Q6(n,t,e,r){return xP.apply(this,arguments)}function xP(){return(xP=(0,$e.Z)(function*(n,t,e,r){const i=ut(n);if(i.ha)return void et("SyncEngine","Ignoring unexpected query state notification.");const l=i.na.get(t);if(l&&l.length>0)switch(e){case"current":case"not-current":{const d=yield aL(i.localStore,gC(l[0])),f=oh.createSynthesizedRemoteEventForCurrentChange(t,"current"===e);yield lh(i,d,f);break}case"rejected":yield Qy(i.localStore,t,!0),iv(i,t,r);break;default:_t()}})).apply(this,arguments)}function J6(n,t,e){return DP.apply(this,arguments)}function DP(){return(DP=(0,$e.Z)(function*(n,t,e){const r=TP(n);if(r.ha){for(const i of t){if(r.na.has(i)){et("SyncEngine","Adding an already active target "+i);continue}const l=yield oL(r.localStore,i),d=yield Ky(r.localStore,l);yield iP(r,ML(l),d.targetId,!1),zI(r.remoteStore,d)}for(const i of e)r.na.has(i)&&(yield Qy(r.localStore,i,!1).then(()=>{PC(r.remoteStore,i),iv(r,i)}).catch(Nm))}})).apply(this,arguments)}function TP(n){const t=ut(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=IL.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=W6.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=B6.bind(null,t),t.ta.Qo=A6.bind(null,t.eventManager),t.ta.fa=N6.bind(null,t.eventManager),t}function IP(n){const t=ut(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=U6.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=H6.bind(null,t),t}class RL{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,$e.Z)(function*(){e.M=RC(t.databaseInfo.databaseId),e.sharedClientState=e._a(t),e.persistence=e.wa(t),yield e.persistence.start(),e.gcScheduler=e.ma(t),e.localStore=e.ga(t)})()}ma(t){return null}ga(t){return nL(this.persistence,new tL,t.initialUser,this.M)}wa(t){return new a6(Ik.zi,this.M)}_a(t){return new dL}terminate(){var t=this;return(0,$e.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class kL extends RL{constructor(t,e,r){super(),this.ya=t,this.cacheSizeBytes=e,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,r=this;return(0,$e.Z)(function*(){yield e().call(r,t),yield r.ya.initialize(r,t),yield IP(r.ya.syncEngine),yield Xy(r.ya.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ga(t){return nL(this.persistence,new tL,t.initialUser,this.M)}ma(t){return new $4(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)}wa(t){const e=bk(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Uo.withCacheSize(this.cacheSizeBytes):Uo.DEFAULT;return new vk(this.synchronizeTabs,e,t.clientId,r,t.asyncQueue,fL(),ZI(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(t){return new dL}}class eU extends kL{constructor(t,e){super(t,e,!1),this.ya=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,r=this;return(0,$e.Z)(function*(){yield e().call(r,t);const i=r.ya.syncEngine;r.sharedClientState instanceof Mk&&(r.sharedClientState.syncEngine={Mr:z6.bind(null,i),Or:Q6.bind(null,i),Fr:J6.bind(null,i),Fs:K6.bind(null,i),kr:Z6.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var l=(0,$e.Z)(function*(d){yield function(n,t){return CP.apply(this,arguments)}(r.ya.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return l.apply(this,arguments)}}())})()}_a(t){const e=fL();if(!Mk.vt(e))throw new Ye(Be.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=bk(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Mk(e,t.asyncQueue,r,t.clientId,t.initialUser)}}class SP{initialize(t,e){var r=this;return(0,$e.Z)(function*(){r.localStore||(r.localStore=t.localStore,r.sharedClientState=t.sharedClientState,r.datastore=r.createDatastore(e),r.remoteStore=r.createRemoteStore(e),r.eventManager=r.createEventManager(e),r.syncEngine=r.createSyncEngine(e,!t.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>SL(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=G6.bind(null,r.syncEngine),yield zk(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(t){return new S6}createDatastore(t){const e=RC(t.databaseInfo.databaseId),r=new h6(t.databaseInfo);return new g6(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return e=this.localStore,r=this.datastore,i=t.asyncQueue,l=f=>SL(this.syncEngine,f,0),d=hL.vt()?new hL:new c6,new _6(e,r,i,l,d);var e,r,i,l,d}createSyncEngine(t,e){return function(r,i,l,d,f,m,b){const x=new O6(r,i,l,d,f,m);return b&&(x.ha=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,$e.Z)(function*(e){const r=ut(e);et("RemoteStore","RemoteStore shutting down."),r.fu.add(5),yield Jy(r),r._u.shutdown(),r.wu.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function PL(n,t=10240){let e=0;return{read:()=>(0,$e.Z)(function*(){if(e<n.byteLength){const r={value:n.slice(e,e+t),done:!1};return e+=t,r}return{done:!0}})(),cancel:()=>(0,$e.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class KI{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.pa(this.observer.next,t)}error(t){this.observer.error?this.pa(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}Ia(){this.muted=!0}pa(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class tU{constructor(t,e){this.Ta=t,this.M=e,this.metadata=new Ei,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(r=>{r&&r.xu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ta.cancel()}getMetadata(){var t=this;return(0,$e.Z)(function*(){return t.metadata.promise})()}da(){var t=this;return(0,$e.Z)(function*(){return yield t.getMetadata(),t.Aa()})()}Aa(){var t=this;return(0,$e.Z)(function*(){const e=yield t.Ra();if(null===e)return null;const r=t.Ea.decode(e),i=Number(r);isNaN(i)&&t.Pa(`length string (${r}) is not valid number`);const l=yield t.ba(i);return new M6(JSON.parse(l),e.length+i)})()}Va(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}Ra(){var t=this;return(0,$e.Z)(function*(){for(;t.Va()<0&&!(yield t.va()););if(0===t.buffer.length)return null;const e=t.Va();e<0&&t.Pa("Reached the end of bundle when a length string is expected.");const r=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),r})()}ba(t){var e=this;return(0,$e.Z)(function*(){for(;e.buffer.length<t;)(yield e.va())&&e.Pa("Reached the end of bundle when more is expected.");const r=e.Ea.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),r})()}Pa(t){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${t}`)}va(){var t=this;return(0,$e.Z)(function*(){const e=yield t.Ta.read();if(!e.done){const r=new Uint8Array(t.buffer.length+e.value.length);r.set(t.buffer),r.set(e.value,t.buffer.length),t.buffer=r}return e.done})()}}class nU{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,$e.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Ye(Be.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,$e.Z)(function*(l,d){const f=ut(l),m=CC(f.M)+"/documents",b={documents:d.map(G=>wC(f.M,G))},x=yield f.ho("BatchGetDocuments",m,b),I=new Map;x.forEach(G=>{const ne=function(n,t){return"found"in t?function(e,r){$t(!!r.found);const i=_u(e,r.found.name),l=ls(r.found.updateTime),d=new Ii({mapValue:{fields:r.found.fields}});return lr.newFoundDocument(i,l,d)}(n,t):"missing"in t?function(e,r){$t(!!r.missing),$t(!!r.readTime);const i=_u(e,r.missing),l=ls(r.readTime);return lr.newNoDocument(i,l)}(n,t):_t()}(f.M,G);I.set(ne.key.toString(),ne)});const V=[];return d.forEach(G=>{const ne=I.get(G.toString());$t(!!ne),V.push(ne)}),V}),function(l,d){return i.apply(this,arguments)})(e.datastore,t);var i;return r.forEach(i=>e.recordVersion(i)),r})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(t.toString())}delete(t){this.write(new v(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,$e.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var r;t.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,i)=>{const l=lt.fromPath(i);t.mutations.push(new C(l,t.precondition(l)))}),yield(r=(0,$e.Z)(function*(i,l){const d=ut(i),f=CC(d.M)+"/documents",m={writes:l.map(b=>EC(d.M,b))};yield d.oo("Commit",f,m)}),function(i,l){return r.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw _t();e=Bt.min()}const r=this.readVersions.get(t.key.toString());if(r){if(!e.isEqual(r))throw new Ye(Be.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?gi.updateTime(e):gi.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Bt.min()))throw new Ye(Be.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gi.updateTime(e)}return gi.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class rU{constructor(t,e,r,i){this.asyncQueue=t,this.datastore=e,this.updateFunction=r,this.deferred=i,this.Sa=5,this.Do=new Rk(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var t=this;this.Do.To((0,$e.Z)(function*(){const e=new nU(t.datastore),r=t.Ca(e);r&&r.then(i=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(i)}).catch(l=>{t.xa(l)}))}).catch(i=>{t.xa(i)})}))}Ca(t){try{const e=this.updateFunction(t);return!Qd(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}xa(t){this.Sa>0&&this.Na(t)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(t)}Na(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||!K(e)}return!1}}class iU{constructor(t,e,r,i){var l=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=i,this.user=Mn.UNAUTHENTICATED,this.clientId=HR.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,$e.Z)(function*(f){et("FirestoreClient","Received user=",f.uid),yield l.authCredentialListener(f),l.user=f});return function(f){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(et("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var t=this;return(0,$e.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ye(Be.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new Ei;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,$e.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(r){const i=tv(r,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}function OL(n,t){return AP.apply(this,arguments)}function AP(){return(AP=(0,$e.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),et("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let r=e.initialUser;n.setCredentialChangeListener(function(){var i=(0,$e.Z)(function*(l){r.isEqual(l)||(yield rL(t.localStore,l),r=l)});return function(l){return i.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=t})).apply(this,arguments)}function FL(n,t){return NP.apply(this,arguments)}function NP(){return(NP=(0,$e.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield MP(n);et("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield t.initialize(e,r),n.setCredentialChangeListener(i=>bL(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,l)=>bL(t.remoteStore,l)),n.onlineComponents=t})).apply(this,arguments)}function MP(n){return RP.apply(this,arguments)}function RP(){return(RP=(0,$e.Z)(function*(n){return n.offlineComponents||(et("FirestoreClient","Using default OfflineComponentProvider"),yield OL(n,new RL)),n.offlineComponents})).apply(this,arguments)}function QI(n){return kP.apply(this,arguments)}function kP(){return(kP=(0,$e.Z)(function*(n){return n.onlineComponents||(et("FirestoreClient","Using default OnlineComponentProvider"),yield FL(n,new SP)),n.onlineComponents})).apply(this,arguments)}function LL(n){return MP(n).then(t=>t.persistence)}function PP(n){return MP(n).then(t=>t.localStore)}function VL(n){return QI(n).then(t=>t.remoteStore)}function OP(n){return QI(n).then(t=>t.syncEngine)}function sv(n){return FP.apply(this,arguments)}function FP(){return(FP=(0,$e.Z)(function*(n){const t=yield QI(n),e=t.eventManager;return e.onListen=F6.bind(null,t.syncEngine),e.onUnlisten=L6.bind(null,t.syncEngine),e})).apply(this,arguments)}function BL(n,t,e={}){const r=new Ei;return n.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){return function(i,l,d,f,m){const b=new KI({next:I=>{l.enqueueAndForget(()=>Xk(i,x));const V=I.docs.has(d);!V&&I.fromCache?m.reject(new Ye(Be.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&I.fromCache&&f&&"server"===f.source?m.reject(new Ye(Be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(I)},error:I=>m.reject(I)}),x=new nP(nh(d.path),b,{includeMetadataChanges:!0,Cu:!0});return Qk(i,x)}(yield sv(n),n.asyncQueue,t,e,r)})),r.promise}function UL(n,t,e={}){const r=new Ei;return n.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){return function(i,l,d,f,m){const b=new KI({next:I=>{l.enqueueAndForget(()=>Xk(i,x)),I.fromCache&&"server"===f.source?m.reject(new Ye(Be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(I)},error:I=>m.reject(I)}),x=new nP(d,b,{includeMetadataChanges:!0,Cu:!0});return Qk(i,x)}(yield sv(n),n.asyncQueue,t,e,r)})),r.promise}const HL=new Map;function LP(n,t,e){if(!e)throw new Ye(Be.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function $L(n,t,e,r){if(!0===t&&!0===r)throw new Ye(Be.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function jL(n){if(!lt.isDocumentKey(n))throw new Ye(Be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function GL(n){if(lt.isDocumentKey(n))throw new Ye(Be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function JI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":_t()}function On(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Ye(Be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=JI(n);throw new Ye(Be.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function WL(n,t){if(t<=0)throw new Ye(Be.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}class qL{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ye(Be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ye(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,$L("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class OC{constructor(t,e,r){this._authCredentials=e,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qL({}),this._settingsFrozen=!1,t instanceof ac?this._databaseId=t:(this._app=t,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Ye(Be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ac(i.options.projectId)}(t))}get app(){if(!this._app)throw new Ye(Be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Ye(Be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qL(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new gI;switch(e.type){case"gapi":const r=e.client;return $t(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new BR(r,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Ye(Be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=HL.get(t);e&&(et("ComponentProvider","Removing Datastore"),HL.delete(t),e.terminate())}(this),Promise.resolve()}}class Or{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Or(this.firestore,t,this._key)}}class Hs{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Hs(this.firestore,t,this._query)}}class vu extends Hs{constructor(t,e,r){super(t,e,nh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Or(this.firestore,null,new lt(t))}withConverter(t){return new vu(this.firestore,t,this._path)}}function ZL(n,t,...e){if(n=(0,Y.m9)(n),LP("collection","path",t),n instanceof OC){const r=Pn.fromString(t,...e);return GL(r),new vu(n,null,r)}{if(!(n instanceof Or||n instanceof vu))throw new Ye(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Pn.fromString(t,...e));return GL(r),new vu(n.firestore,null,r)}}function XI(n,t,...e){if(n=(0,Y.m9)(n),1===arguments.length&&(t=HR.R()),LP("doc","path",t),n instanceof OC){const r=Pn.fromString(t,...e);return jL(r),new Or(n,null,new lt(r))}{if(!(n instanceof Or||n instanceof vu))throw new Ye(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Pn.fromString(t,...e));return jL(r),new Or(n.firestore,n instanceof vu?n.converter:null,new lt(r))}}function zL(n,t){return n=(0,Y.m9)(n),t=(0,Y.m9)(t),(n instanceof Or||n instanceof vu)&&(t instanceof Or||t instanceof vu)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function YL(n,t){return n=(0,Y.m9)(n),t=(0,Y.m9)(t),n instanceof Hs&&t instanceof Hs&&n.firestore===t.firestore&&dl(n._query,t._query)&&n.converter===t.converter}class gU{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new Rk(this,"async_queue_retry"),this.qa=()=>{const e=ZI();e&&et("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Do.Ao()};const t=ZI();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Ka(),this.Ga(t)}enterRestrictedMode(t){if(!this.Oa){this.Oa=!0,this.La=t||!1;const e=ZI();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.qa)}}enqueue(t){if(this.Ka(),this.Oa)return new Promise(()=>{});const e=new Ei;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ma.push(t),this.Qa()))}Qa(){var t=this;return(0,$e.Z)(function*(){if(0!==t.Ma.length){try{yield t.Ma[0](),t.Ma.shift(),t.Do.reset()}catch(e){if(!Em(e))throw e;et("AsyncQueue","Operation failed with retryable error: "+e)}t.Ma.length>0&&t.Do.To(()=>t.Qa())}})()}Ga(t){const e=this.ka.then(()=>(this.Ba=!0,t().catch(r=>{throw this.$a=r,this.Ba=!1,ni("INTERNAL UNHANDLED ERROR: ",function(l){let d=l.message||"";return l.stack&&(d=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),d}(r)),r}).then(r=>(this.Ba=!1,r))));return this.ka=e,e}enqueueAfterDelay(t,e,r){this.Ka(),this.Ua.indexOf(t)>-1&&(e=0);const i=Kk.createAndSchedule(this,t,e,r,l=>this.ja(l));return this.Fa.push(i),i}Ka(){this.$a&&_t()}verifyOperationInProgress(){}Wa(){var t=this;return(0,$e.Z)(function*(){let e;do{e=t.ka,yield e}while(e!==t.ka)})()}za(t){for(const e of this.Fa)if(e.timerId===t)return!0;return!1}Ha(t){return this.Wa().then(()=>{this.Fa.sort((e,r)=>e.targetTimeMs-r.targetTimeMs);for(const e of this.Fa)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Wa()})}Ja(t){this.Ua.push(t)}ja(t){const e=this.Fa.indexOf(t);this.Fa.splice(e,1)}}function VP(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const r=t;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class mU{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ei,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,r){this._progressObserver={next:t,error:e,complete:r}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class Wr extends OC{constructor(t,e,r){super(t,e,r),this.type="firestore",this._queue=new gU,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||KL(this),this._firestoreClient.terminate()}}function Si(n){return n._firestoreClient||KL(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function KL(n){var t;const e=n._freezeSettings(),r=(l=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new WR(n._databaseId,l,n._persistenceKey,(f=e).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var l,f;n._firestoreClient=new iU(n._authCredentials,n._appCheckCredentials,n._queue,r)}function QL(n,t,e){const r=new Ei;return n.asyncQueue.enqueue((0,$e.Z)(function*(){try{yield OL(n,e),yield FL(n,t),r.resolve()}catch(i){if(!("FirebaseError"===(l=i).name?l.code===Be.FAILED_PRECONDITION||l.code===Be.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var l})).then(()=>r.promise)}function JL(n){if(n._initialized||n._terminated)throw new Ye(Be.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ch{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Ye(Be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Di(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class bu{constructor(t){this._byteString=t}static fromBase64String(t){try{return new bu(pi.fromBase64String(t))}catch(e){throw new Ye(Be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new bu(pi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Rm{constructor(t){this._methodName=t}}class eS{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ye(Be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ye(Be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return on(this._lat,t._lat)||on(this._long,t._long)}}const TU=/^__.*__$/;class IU{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return null!==this.fieldMask?new u(t,this.data,this.fieldMask,e,this.fieldTransforms):new c(t,this.data,e,this.fieldTransforms)}}class XL{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new u(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function e3(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _t()}}class tS{constructor(t,e,r,i,l,d){this.settings=t,this.databaseId=e,this.M=r,this.ignoreUndefinedProperties=i,void 0===l&&this.Ya(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(t){return new tS(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(t){var e;const r=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Za({path:r,ec:!1});return i.nc(t),i}sc(t){var e;const r=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Za({path:r,ec:!1});return i.Ya(),i}ic(t){return this.Za({path:void 0,ec:!0})}rc(t){return iS(t,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}Ya(){if(this.path)for(let t=0;t<this.path.length;t++)this.nc(this.path.get(t))}nc(t){if(0===t.length)throw this.rc("Document fields must not be empty");if(e3(this.Xa)&&TU.test(t))throw this.rc('Document fields cannot begin and end with "__"')}}class SU{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.M=r||RC(t)}ac(t,e,r,i=!1){return new tS({Xa:t,methodName:e,uc:r,path:Di.emptyPath(),ec:!1,oc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function km(n){const t=n._freezeSettings(),e=RC(n._databaseId);return new SU(n._databaseId,!!t.ignoreUndefinedProperties,e)}function nS(n,t,e,r,i,l={}){const d=n.ac(l.merge||l.mergeFields?2:0,t,e,i);$P("Data must be an object, but it was:",d,r);const f=r3(r,d);let m,b;if(l.merge)m=new ep(d.fieldMask),b=d.fieldTransforms;else if(l.mergeFields){const x=[];for(const I of l.mergeFields){const V=jP(t,I,e);if(!d.contains(V))throw new Ye(Be.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);s3(x,V)||x.push(V)}m=new ep(x),b=d.fieldTransforms.filter(I=>m.covers(I.field))}else m=null,b=d.fieldTransforms;return new IU(new Ii(f),m,b)}class FC extends Rm{_toFieldTransform(t){if(2!==t.Xa)throw t.rc(1===t.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof FC}}function t3(n,t,e){return new tS({Xa:3,uc:t.settings.uc,methodName:n._methodName,ec:e},t.databaseId,t.M,t.ignoreUndefinedProperties)}class BP extends Rm{_toFieldTransform(t){return new $y(t.path,new op)}isEqual(t){return t instanceof BP}}class AU extends Rm{constructor(t,e){super(t),this.cc=e}_toFieldTransform(t){const e=t3(this,t,!0),r=this.cc.map(l=>Pm(l,e)),i=new ih(r);return new $y(t.path,i)}isEqual(t){return this===t}}class NU extends Rm{constructor(t,e){super(t),this.cc=e}_toFieldTransform(t){const e=t3(this,t,!0),r=this.cc.map(l=>Pm(l,e)),i=new ap(r);return new $y(t.path,i)}isEqual(t){return this===t}}class MU extends Rm{constructor(t,e){super(t),this.hc=e}_toFieldTransform(t){const e=new Cm(t.M,NI(t.M,this.hc));return new $y(t.path,e)}isEqual(t){return this===t}}function UP(n,t,e,r){const i=n.ac(1,t,e);$P("Data must be an object, but it was:",i,r);const l=[],d=Ii.empty();Yd(r,(m,b)=>{const x=rS(t,m,e);b=(0,Y.m9)(b);const I=i.sc(x);if(b instanceof FC)l.push(x);else{const V=Pm(b,I);null!=V&&(l.push(x),d.set(x,V))}});const f=new ep(l);return new XL(d,f,i.fieldTransforms)}function HP(n,t,e,r,i,l){const d=n.ac(1,t,e),f=[jP(t,r,e)],m=[i];if(l.length%2!=0)throw new Ye(Be.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<l.length;V+=2)f.push(jP(t,l[V])),m.push(l[V+1]);const b=[],x=Ii.empty();for(let V=f.length-1;V>=0;--V)if(!s3(b,f[V])){const G=f[V];let ne=m[V];ne=(0,Y.m9)(ne);const we=d.sc(G);if(ne instanceof FC)b.push(G);else{const Ue=Pm(ne,we);null!=Ue&&(b.push(G),x.set(G,Ue))}}const I=new ep(b);return new XL(x,I,d.fieldTransforms)}function n3(n,t,e,r=!1){return Pm(e,n.ac(r?4:3,t))}function Pm(n,t){if(i3(n=(0,Y.m9)(n)))return $P("Unsupported field value:",t,n),r3(n,t);if(n instanceof Rm)return function(e,r){if(!e3(r.Xa))throw r.rc(`${e._methodName}() can only be used with update() and set()`);if(!r.path)throw r.rc(`${e._methodName}() is not currently supported inside arrays`);const i=e._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.ec&&4!==t.Xa)throw t.rc("Nested arrays are not supported");return function(e,r){const i=[];let l=0;for(const d of e){let f=Pm(d,r.ic(l));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),l++}return{arrayValue:{values:i}}}(n,t)}return function(e,r){if(null===(e=(0,Y.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return NI(r.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const i=Qr.fromDate(e);return{timestampValue:bC(r.M,i)}}if(e instanceof Qr){const i=new Qr(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:bC(r.M,i)}}if(e instanceof eS)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof bu)return{bytesValue:gF(r.M,e._byteString)};if(e instanceof Or){const i=r.databaseId,l=e.firestore._databaseId;if(!l.isEqual(i))throw r.rc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:sk(e.firestore._databaseId||r.databaseId,e._key.path)}}throw r.rc(`Unsupported field value: ${JI(e)}`)}(n,t)}function r3(n,t){const e={};return _I(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Yd(n,(r,i)=>{const l=Pm(i,t.tc(r));null!=l&&(e[r]=l)}),{mapValue:{fields:e}}}function i3(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Qr||n instanceof eS||n instanceof bu||n instanceof Or||n instanceof Rm)}function $P(n,t,e){if(!i3(e)||"object"!=typeof(r=e)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=JI(e);throw t.rc("an object"===r?n+" a custom object":n+" "+r)}var r}function jP(n,t,e){if((t=(0,Y.m9)(t))instanceof ch)return t._internalPath;if("string"==typeof t)return rS(n,t);throw iS("Field path arguments must be of type string or ",n,!1,void 0,e)}const RU=new RegExp("[~\\*/\\[\\]]");function rS(n,t,e){if(t.search(RU)>=0)throw iS(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new ch(...t.split("."))._internalPath}catch(r){throw iS(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function iS(n,t,e,r,i){const l=r&&!r.isEmpty(),d=void 0!==i;let f=`Function ${t}() called with invalid data`;e&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||d)&&(m+=" (found",l&&(m+=` in field ${r}`),d&&(m+=` in document ${i}`),m+=")"),new Ye(Be.INVALID_ARGUMENT,f+n+m)}function s3(n,t){return n.some(e=>e.isEqual(t))}class LC{constructor(t,e,r,i,l){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=i,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Or(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new kU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(sS("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class kU extends LC{data(){return super.data()}}function sS(n,t){return"string"==typeof t?rS(n,t):t instanceof ch?t._internalPath:t._delegate._internalPath}class Om{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class uh extends LC{constructor(t,e,r,i,l,d){super(t,e,r,i,d),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new VC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(sS("DocumentSnapshot.get",t));if(null!==r)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}}class VC extends uh{data(t={}){return super.data(t)}}class _p{constructor(t,e,r,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new Om(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(r=>{t.call(e,new VC(this._firestore,this._userDataWriter,r.key,r,new Om(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ye(Be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new VC(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Om(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:l++}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>i||3!==d.type).map(d=>{const f=new VC(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Om(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,b=-1;return 0!==d.type&&(m=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),1!==d.type&&(l=l.add(d.doc),b=l.indexOf(d.doc.key)),{type:PU(d.type),doc:f,oldIndex:m,newIndex:b}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function PU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _t()}}function o3(n,t){return n instanceof uh&&t instanceof uh?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof _p&&t instanceof _p&&n._firestore===t._firestore&&YL(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}function a3(n){if(Vy(n)&&0===n.explicitOrderBy.length)throw new Ye(Be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class BC{}function yp(n,...t){for(const e of t)n=e._apply(n);return n}class OU extends BC{constructor(t,e,r){super(),this.lc=t,this.fc=e,this.dc=r,this.type="where"}_apply(t){const e=km(t.firestore),r=function(i,l,d,f,m,b,x){let I;if(m.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Ye(Be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){f3(x,b);const G=[];for(const ne of x)G.push(h3(f,i,ne));I={arrayValue:{values:G}}}else I=h3(f,i,x)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||f3(x,b),I=n3(d,"where",x,"in"===b||"not-in"===b);const V=Gi.create(m,b,I);return function(G,ne){if(ne.S()){const Ue=hC(G);if(null!==Ue&&!Ue.isEqual(ne.field))throw new Ye(Be.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ue.toString()}' and '${ne.field.toString()}'`);const tt=dC(G);null!==tt&&p3(0,ne.field,tt)}const we=function(Ue,tt){for(const ot of Ue.filters)if(tt.indexOf(ot.op)>=0)return ot.op;return null}(G,function(Ue){switch(Ue){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ne.op));if(null!==we)throw new Ye(Be.INVALID_ARGUMENT,we===ne.op?`Invalid query. You cannot use more than one '${ne.op.toString()}' filter.`:`Invalid query. You cannot use '${ne.op.toString()}' filters with '${we.toString()}' filters.`)}(i,V),V}(t._query,0,e,t.firestore._databaseId,this.lc,this.fc,this.dc);return new Hs(t.firestore,t.converter,function(i,l){const d=i.filters.concat([l]);return new va(i.path,i.collectionGroup,i.explicitOrderBy.slice(),d,i.limit,i.limitType,i.startAt,i.endAt)}(t._query,r))}}class LU extends BC{constructor(t,e){super(),this.lc=t,this._c=e,this.type="orderBy"}_apply(t){const e=function(r,i,l){if(null!==r.startAt)throw new Ye(Be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ye(Be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new mu(i,l);return function(f,m){if(null===dC(f)){const b=hC(f);null!==b&&p3(0,b,m.field)}}(r,d),d}(t._query,this.lc,this._c);return new Hs(t.firestore,t.converter,function(r,i){const l=r.explicitOrderBy.concat([i]);return new va(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,e))}}class l3 extends BC{constructor(t,e,r){super(),this.type=t,this.wc=e,this.mc=r}_apply(t){return new Hs(t.firestore,t.converter,wm(t._query,this.wc,this.mc))}}class c3 extends BC{constructor(t,e,r){super(),this.type=t,this.gc=e,this.yc=r}_apply(t){const e=d3(t,this.type,this.gc,this.yc);return new Hs(t.firestore,t.converter,(i=e,new va((r=t._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class u3 extends BC{constructor(t,e,r){super(),this.type=t,this.gc=e,this.yc=r}_apply(t){const e=d3(t,this.type,this.gc,this.yc);return new Hs(t.firestore,t.converter,(i=e,new va((r=t._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function d3(n,t,e,r){if(e[0]=(0,Y.m9)(e[0]),e[0]instanceof LC)return function(i,l,d,f,m){if(!f)throw new Ye(Be.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const b=[];for(const x of ul(i))if(x.field.isKeyField())b.push(Xd(l,f.key));else{const I=f.data.field(x.field);if(iC(I))throw new Ye(Be.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===I){const V=x.field.canonicalString();throw new Ye(Be.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}b.push(I)}return new Vo(b,m)}(n._query,n.firestore._databaseId,t,e[0]._document,r);{const i=km(n.firestore);return function(l,d,f,m,b,x){const I=l.explicitOrderBy;if(b.length>I.length)throw new Ye(Be.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let G=0;G<b.length;G++){const ne=b[G];if(I[G].field.isKeyField()){if("string"!=typeof ne)throw new Ye(Be.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof ne}`);if(!ba(l)&&-1!==ne.indexOf("/"))throw new Ye(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${ne}' contains a slash.`);const we=l.path.child(Pn.fromString(ne));if(!lt.isDocumentKey(we))throw new Ye(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${we}' is not because it contains an odd number of segments.`);const Ue=new lt(we);V.push(Xd(d,Ue))}else{const we=n3(f,m,ne);V.push(we)}}return new Vo(V,x)}(n._query,n.firestore._databaseId,i,t,e,r)}}function h3(n,t,e){if("string"==typeof(e=(0,Y.m9)(e))){if(""===e)throw new Ye(Be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ba(t)&&-1!==e.indexOf("/"))throw new Ye(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const r=t.path.child(Pn.fromString(e));if(!lt.isDocumentKey(r))throw new Ye(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Xd(n,new lt(r))}if(e instanceof Or)return Xd(n,e._key);throw new Ye(Be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${JI(e)}.`)}function f3(n,t){if(!Array.isArray(n)||0===n.length)throw new Ye(Be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(n.length>10)throw new Ye(Be.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function p3(n,t,e){if(!e.isEqual(t))throw new Ye(Be.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}class GP{convertValue(t,e="none"){switch(tp(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Gr(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Kd(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw _t()}}convertObject(t,e){const r={};return Yd(t.fields,(i,l)=>{r[i]=this.convertValue(l,e)}),r}convertGeoPoint(t){return new eS(Gr(t.latitude),Gr(t.longitude))}convertArray(t,e){return(t.values||[]).map(r=>this.convertValue(r,e))}convertServerTimestamp(t,e){switch(e){case"previous":const r=yI(t);return null==r?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(Ry(t));default:return null}}convertTimestamp(t){const e=Ti(t);return new Qr(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=Pn.fromString(t);$t(DF(r));const i=new ac(r.get(1),r.get(3)),l=new lt(r.popFirst(5));return i.isEqual(e)||ni(`Document ${l} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),l}}function oS(n,t,e){let r;return r=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,r}class WU extends GP{constructor(t){super(),this.firestore=t}convertBytes(t){return new bu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Or(this.firestore,null,e)}}class g3{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=km(t)}set(t,e,r){this._verifyNotCommitted();const i=vp(t,this._firestore),l=oS(i.converter,e,r),d=nS(this._dataReader,"WriteBatch.set",i._key,l,null!==i.converter,r);return this._mutations.push(d.toMutation(i._key,gi.none())),this}update(t,e,r,...i){this._verifyNotCommitted();const l=vp(t,this._firestore);let d;return d="string"==typeof(e=(0,Y.m9)(e))||e instanceof ch?HP(this._dataReader,"WriteBatch.update",l._key,e,r,i):UP(this._dataReader,"WriteBatch.update",l._key,e),this._mutations.push(d.toMutation(l._key,gi.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=vp(t,this._firestore);return this._mutations=this._mutations.concat(new v(e._key,gi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ye(Be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function vp(n,t){if((n=(0,Y.m9)(n)).firestore!==t)throw new Ye(Be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Fm extends GP{constructor(t){super(),this.firestore=t}convertBytes(t){return new bu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Or(this.firestore,null,e)}}function m3(n,t,e){n=On(n,Or);const r=On(n.firestore,Wr),i=oS(n.converter,t,e);return ov(r,[nS(km(r),"setDoc",n._key,i,null!==n.converter,e).toMutation(n._key,gi.none())])}function _3(n,t,e,...r){n=On(n,Or);const i=On(n.firestore,Wr),l=km(i);let d;return d="string"==typeof(t=(0,Y.m9)(t))||t instanceof ch?HP(l,"updateDoc",n._key,t,e,r):UP(l,"updateDoc",n._key,t),ov(i,[d.toMutation(n._key,gi.exists(!0))])}function y3(n,...t){var e,r,i;n=(0,Y.m9)(n);let l={includeMetadataChanges:!1},d=0;"object"!=typeof t[d]||VP(t[d])||(l=t[d],d++);const f={includeMetadataChanges:l.includeMetadataChanges};if(VP(t[d])){const I=t[d];t[d]=null===(e=I.next)||void 0===e?void 0:e.bind(I),t[d+1]=null===(r=I.error)||void 0===r?void 0:r.bind(I),t[d+2]=null===(i=I.complete)||void 0===i?void 0:i.bind(I)}let m,b,x;if(n instanceof Or)b=On(n.firestore,Wr),x=nh(n._key.path),m={next:I=>{t[d]&&t[d](WP(b,n,I))},error:t[d+1],complete:t[d+2]};else{const I=On(n,Hs);b=On(I.firestore,Wr),x=I._query;const V=new Fm(b);m={next:G=>{t[d]&&t[d](new _p(b,V,I,G))},error:t[d+1],complete:t[d+2]},a3(n._query)}return function(I,V,G,ne){const we=new KI(ne),Ue=new nP(V,we,G);return I.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){return Qk(yield sv(I),Ue)})),()=>{we.Ia(),I.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){return Xk(yield sv(I),Ue)}))}}(Si(b),x,f,m)}function ov(n,t){return function(e,r){const i=new Ei;return e.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){return function(n,t,e){return aP.apply(this,arguments)}(yield OP(e),r,i)})),i.promise}(Si(n),t)}function WP(n,t,e){const r=e.docs.get(t._key),i=new Fm(n);return new uh(n,i,t._key,r,new Om(e.hasPendingWrites,e.fromCache),t.converter)}class tH extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=km(t)}get(t){const e=vp(t,this._firestore),r=new WU(this._firestore);return this._transaction.lookup([e._key]).then(i=>{if(!i||1!==i.length)return _t();const l=i[0];if(l.isFoundDocument())return new LC(this._firestore,r,l.key,l,e.converter);if(l.isNoDocument())return new LC(this._firestore,r,e._key,null,e.converter);throw _t()})}set(t,e,r){const i=vp(t,this._firestore),l=oS(i.converter,e,r),d=nS(this._dataReader,"Transaction.set",i._key,l,null!==i.converter,r);return this._transaction.set(i._key,d),this}update(t,e,r,...i){const l=vp(t,this._firestore);let d;return d="string"==typeof(e=(0,Y.m9)(e))||e instanceof ch?HP(this._dataReader,"Transaction.update",l._key,e,r,i):UP(this._dataReader,"Transaction.update",l._key,e),this._transaction.update(l._key,d),this}delete(t){const e=vp(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=vp(t,this._firestore),r=new Fm(this._firestore);return super.get(t).then(i=>new uh(this._firestore,r,e._key,i._document,new Om(!1,!1),e.converter))}}function qP(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ye("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function b3(){if("undefined"==typeof Uint8Array)throw new Ye("unimplemented","Uint8Arrays are not available in this environment.")}function w3(){if("undefined"==typeof atob)throw new Ye("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,t=!0){dm=Vs.SDK_VERSION,(0,Vs._registerComponent)(new Ka.wA("firestore",(e,{options:r})=>{const i=e.getProvider("app").getImmediate(),l=new Wr(i,new nF(e.getProvider("auth-internal")),new My(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),l._setSettings(r),l},"PUBLIC")),(0,Vs.registerVersion)(Iy,"3.4.8",n),(0,Vs.registerVersion)(Iy,"3.4.8","esm2017")}();class UC{constructor(t){this._delegate=t}static fromBase64String(t){return w3(),new UC(bu.fromBase64String(t))}static fromUint8Array(t){return b3(),new UC(bu.fromUint8Array(t))}toBase64(){return w3(),this._delegate.toBase64()}toUint8Array(){return b3(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function ZP(n){return function(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const r of["next","error","complete"])if(r in e&&"function"==typeof e[r])return!0;return!1}(n)}class dH{enableIndexedDbPersistence(t,e){return function(n,t){JL(n=On(n,Wr));const e=Si(n),r=n._freezeSettings(),i=new SP;return QL(e,i,new kL(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function(n){JL(n=On(n,Wr));const t=Si(n),e=n._freezeSettings(),r=new SP;return QL(t,r,new eU(r,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function(n){if(n._initialized&&!n._terminated)throw new Ye(Be.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Ei;return n._queue.enqueueAndForgetEvenWhileRestricted((0,$e.Z)(function*(){try{yield(e=(0,$e.Z)(function*(r){if(!dc.vt())return Promise.resolve();const i=r+"main";yield dc.delete(i)}),function(r){return e.apply(this,arguments)})(bk(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class C3{constructor(t,e,r){this._delegate=e,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},t instanceof ac||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&hm("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,r={}){!function(n,t,e,r={}){var i;const l=(n=On(n,OC))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==t&&hm("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${t}:${e}`,ssl:!1})),r.mockUserToken){let d,f;if("string"==typeof r.mockUserToken)d=r.mockUserToken,f=Mn.MOCK_USER;else{d=(0,Y.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Ye(Be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Mn(m)}n._authCredentials=new xi(new Ny(d,f))}}(this._delegate,t,e,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,$e.Z)(function*(){const t=yield LL(n),e=yield VL(n);return t.setNetworkEnabled(!0),function(r){const i=ut(r);return i.fu.delete(0),kC(i)}(e)}))}(Si(n=On(n,Wr)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,$e.Z)(function*(){const t=yield LL(n),e=yield VL(n);return t.setNetworkEnabled(!1),(r=(0,$e.Z)(function*(i){const l=ut(i);l.fu.add(0),yield Jy(l),l.wu.set("Offline")}),function(i){return r.apply(this,arguments)})(e);var r}))}(Si(n=On(n,Wr)))}(this._delegate)}enablePersistence(t){let e=!1,r=!1;return t&&(e=!!t.synchronizeTabs,r=!!t.experimentalForceOwningTab,$L("synchronizeTabs",e,"experimentalForceOwningTab",r)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(t){const e=new Ei;return t.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){return function(n,t){return hP.apply(this,arguments)}(yield OP(t),e)})),e.promise}(Si(n=On(n,Wr)))}(this._delegate)}onSnapshotsInSync(t){return function(n,t){return function(n,t){const e=new KI(t);return n.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){return r=yield sv(n),i=e,ut(r).Eu.add(i),void i.next();var r,i})),()=>{e.Ia(),n.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){return r=yield sv(n),i=e,void ut(r).Eu.delete(i);var r,i}))}}(Si(n=On(n,Wr)),VP(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Ye("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new av(this,ZL(this._delegate,t))}catch(e){throw oo(e,"collection()","Firestore.collection()")}}doc(t){try{return new fl(this,XI(this._delegate,t))}catch(e){throw oo(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new ao(this,function(n,t){if(n=On(n,OC),LP("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ye(Be.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Hs(n,null,(e=t,new va(Pn.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw oo(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function(n,t){return function(n,t){const e=new Ei;return n.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){const r=yield(i=n,QI(i).then(l=>l.datastore));var i;new rU(n.asyncQueue,r,t,e).run()})),e.promise}(Si(n=On(n,Wr)),e=>t(new tH(n,e)))}(this._delegate,e=>t(new E3(this,e)))}batch(){return Si(this._delegate),new x3(new g3(this._delegate,t=>ov(this._delegate,t)))}loadBundle(t){return function(n,t){const e=Si(n=On(n,Wr)),r=new mU;return function(n,t,e,r){const i=function(l,d){let f;return f="string"==typeof l?(new TextEncoder).encode(l):l,m=function(m,b){if(m instanceof Uint8Array)return PL(m,b);if(m instanceof ArrayBuffer)return PL(new Uint8Array(m),b);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new tU(m,d);var m}(e,RC(t));n.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){!function(n,t,e){const r=ut(n);var i;(i=(0,$e.Z)(function*(l,d,f){try{const m=yield d.getMetadata();if(yield function(V,G){const ne=ut(V),we=ls(G.createTime);return ne.persistence.runTransaction("hasNewerBundle","readonly",Ue=>ne._s.getBundleMetadata(Ue,G.id)).then(Ue=>!!Ue&&Ue.createTime.compareTo(we)>=0)}(l.localStore,m))return yield d.close(),f._completeWith({taskState:"Success",documentsLoaded:(V=m).totalDocuments,bytesLoaded:V.totalBytes,totalDocuments:V.totalDocuments,totalBytes:V.totalBytes}),Promise.resolve(new Set);f._updateProgress(EL(m));const b=new R6(m,l.localStore,d.M);let x=yield d.da();for(;x;){const V=yield b.ku(x);V&&f._updateProgress(V),x=yield d.da()}const I=yield b.complete();return yield lh(l,I.Fu,void 0),yield function(V,G){const ne=ut(V);return ne.persistence.runTransaction("Save bundle","readwrite",we=>ne._s.saveBundleMetadata(we,G))}(l.localStore,m),f._completeWith(I.progress),Promise.resolve(I.Ou)}catch(m){return hm("SyncEngine",`Loading bundle failed with ${m}`),f._failWith(m),Promise.resolve(new Set)}var V}),function(l,d,f){return i.apply(this,arguments)})(r,t,e).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield OP(n),i,r)}))}(e,n._databaseId,t,r),r}(this._delegate,t)}namedQuery(t){return function(n,t){return function(n,t){return n.asyncQueue.enqueue((0,$e.Z)(function*(){return function(e,r){const i=ut(e);return i.persistence.runTransaction("Get named query","readonly",l=>i._s.getNamedQuery(l,r))}(yield PP(n),t)}))}(Si(n=On(n,Wr)),t).then(e=>e?new Hs(n,null,e.query):null)}(this._delegate,t).then(e=>e?new ao(this,e):null)}}class aS extends GP{constructor(t){super(),this.firestore=t}convertBytes(t){return new UC(new bu(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return fl.forKey(e,this.firestore,null)}}class E3{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new aS(t)}get(t){const e=Vm(t);return this._delegate.get(e).then(r=>new HC(this._firestore,new uh(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,e.converter)))}set(t,e,r){const i=Vm(t);return r?(qP("Transaction.set",r),this._delegate.set(i,e,r)):this._delegate.set(i,e),this}update(t,e,r,...i){const l=Vm(t);return 2===arguments.length?this._delegate.update(l,e):this._delegate.update(l,e,r,...i),this}delete(t){const e=Vm(t);return this._delegate.delete(e),this}}class x3{constructor(t){this._delegate=t}set(t,e,r){const i=Vm(t);return r?(qP("WriteBatch.set",r),this._delegate.set(i,e,r)):this._delegate.set(i,e),this}update(t,e,r,...i){const l=Vm(t);return 2===arguments.length?this._delegate.update(l,e):this._delegate.update(l,e,r,...i),this}delete(t){const e=Vm(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class Lm{constructor(t,e,r){this._firestore=t,this._userDataWriter=e,this._delegate=r}fromFirestore(t,e){const r=new VC(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new $C(this._firestore,r),null!=e?e:{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const r=Lm.INSTANCES;let i=r.get(t);i||(i=new WeakMap,r.set(t,i));let l=i.get(e);return l||(l=new Lm(t,new aS(t),e),i.set(e,l)),l}}Lm.INSTANCES=new WeakMap;class fl{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new aS(t)}static forPath(t,e,r){if(t.length%2!=0)throw new Ye("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new fl(e,new Or(e._delegate,r,new lt(t)))}static forKey(t,e,r){return new fl(e,new Or(e._delegate,r,t))}get id(){return this._delegate.id}get parent(){return new av(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new av(this.firestore,ZL(this._delegate,t))}catch(e){throw oo(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,Y.m9)(t))instanceof Or&&zL(this._delegate,t)}set(t,e){e=qP("DocumentReference.set",e);try{return e?m3(this._delegate,t,e):m3(this._delegate,t)}catch(r){throw oo(r,"setDoc()","DocumentReference.set()")}}update(t,e,...r){try{return 1===arguments.length?_3(this._delegate,t):_3(this._delegate,t,e,...r)}catch(i){throw oo(i,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return ov(On(n.firestore,Wr),[new v(n._key,gi.none())])}(this._delegate)}onSnapshot(...t){const e=D3(t),r=T3(t,i=>new HC(this.firestore,new uh(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return y3(this._delegate,e,r)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function(n){n=On(n,Or);const t=On(n.firestore,Wr),e=Si(t),r=new Fm(t);return function(n,t){const e=new Ei;return n.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){return(r=(0,$e.Z)(function*(i,l,d){try{const f=yield function(m,b){const x=ut(m);return x.persistence.runTransaction("read document","readonly",I=>x.ci.Ls(I,b))}(i,l);f.isFoundDocument()?d.resolve(f):f.isNoDocument()?d.resolve(null):d.reject(new Ye(Be.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const m=tv(f,`Failed to get document '${l} from cache`);d.reject(m)}}),function(i,l,d){return r.apply(this,arguments)})(yield PP(n),t,e);var r})),e.promise}(e,n._key).then(i=>new uh(t,r,n._key,i,new Om(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==t?void 0:t.source)?function(n){n=On(n,Or);const t=On(n.firestore,Wr);return BL(Si(t),n._key,{source:"server"}).then(e=>WP(t,n,e))}(this._delegate):function(n){n=On(n,Or);const t=On(n.firestore,Wr);return BL(Si(t),n._key).then(e=>WP(t,n,e))}(this._delegate),e.then(r=>new HC(this.firestore,new uh(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(t){return new fl(this.firestore,this._delegate.withConverter(t?Lm.getInstance(this.firestore,t):null))}}function oo(n,t,e){return n.message=n.message.replace(t,e),n}function D3(n){for(const t of n)if("object"==typeof t&&!ZP(t))return t;return{}}function T3(n,t){var e,r;let i;return i=ZP(n[0])?n[0]:ZP(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{i.next&&i.next(t(l))},error:null===(e=i.error)||void 0===e?void 0:e.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class HC{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new fl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return o3(this._delegate,t._delegate)}}class $C extends HC{data(t){const e=this._delegate.data(t);return function(n,t){n||_t()}(void 0!==e),e}}class ao{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new aS(t)}where(t,e,r){try{return new ao(this.firestore,yp(this._delegate,function(n,t,e){const r=t,i=sS("where",n);return new OU(i,r,e)}(t,e,r)))}catch(i){throw oo(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new ao(this.firestore,yp(this._delegate,function(n,t="asc"){const e=t,r=sS("orderBy",n);return new LU(r,e)}(t,e)))}catch(r){throw oo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new ao(this.firestore,yp(this._delegate,function(n){return WL("limit",n),new l3("limit",n,"F")}(t)))}catch(e){throw oo(e,"limit()","Query.limit()")}}limitToLast(t){try{return new ao(this.firestore,yp(this._delegate,function(n){return WL("limitToLast",n),new l3("limitToLast",n,"L")}(t)))}catch(e){throw oo(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new ao(this.firestore,yp(this._delegate,function(...n){return new c3("startAt",n,!0)}(...t)))}catch(e){throw oo(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new ao(this.firestore,yp(this._delegate,function(...n){return new c3("startAfter",n,!1)}(...t)))}catch(e){throw oo(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new ao(this.firestore,yp(this._delegate,function(...n){return new u3("endBefore",n,!1)}(...t)))}catch(e){throw oo(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new ao(this.firestore,yp(this._delegate,function(...n){return new u3("endAt",n,!0)}(...t)))}catch(e){throw oo(e,"endAt()","Query.endAt()")}}isEqual(t){return YL(this._delegate,t._delegate)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function(n){n=On(n,Hs);const t=On(n.firestore,Wr),e=Si(t),r=new Fm(t);return function(n,t){const e=new Ei;return n.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){return(r=(0,$e.Z)(function*(i,l,d){try{const f=yield GI(i,l,!0),m=new TL(l,f.li),b=m.Gu(f.documents),x=m.applyChanges(b,!1);d.resolve(x.snapshot)}catch(f){const m=tv(f,`Failed to execute query '${l} against cache`);d.reject(m)}}),function(i,l,d){return r.apply(this,arguments)})(yield PP(n),t,e);var r})),e.promise}(e,n._query).then(i=>new _p(t,r,n,i))}(this._delegate):"server"===(null==t?void 0:t.source)?function(n){n=On(n,Hs);const t=On(n.firestore,Wr),e=Si(t),r=new Fm(t);return UL(e,n._query,{source:"server"}).then(i=>new _p(t,r,n,i))}(this._delegate):function(n){n=On(n,Hs);const t=On(n.firestore,Wr),e=Si(t),r=new Fm(t);return a3(n._query),UL(e,n._query).then(i=>new _p(t,r,n,i))}(this._delegate),e.then(r=>new zP(this.firestore,new _p(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...t){const e=D3(t),r=T3(t,i=>new zP(this.firestore,new _p(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return y3(this._delegate,e,r)}withConverter(t){return new ao(this.firestore,this._delegate.withConverter(t?Lm.getInstance(this.firestore,t):null))}}class fH{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new $C(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class zP{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new ao(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new $C(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new fH(this._firestore,e))}forEach(t,e){this._delegate.forEach(r=>{t.call(e,new $C(this._firestore,r))})}isEqual(t){return o3(this._delegate,t._delegate)}}class av extends ao{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new fl(this.firestore,t):null}doc(t){try{return new fl(this.firestore,void 0===t?XI(this._delegate):XI(this._delegate,t))}catch(e){throw oo(e,"doc()","CollectionReference.doc()")}}add(t){return function(n,t){const e=On(n.firestore,Wr),r=XI(n),i=oS(n.converter,t);return ov(e,[nS(km(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,gi.exists(!1))]).then(()=>r)}(this._delegate,t).then(e=>new fl(this.firestore,e))}isEqual(t){return zL(this._delegate,t._delegate)}withConverter(t){return new av(this.firestore,this._delegate.withConverter(t?Lm.getInstance(this.firestore,t):null))}}function Vm(n){return On(n,Or)}class YP{constructor(...t){this._delegate=new ch(...t)}static documentId(){return new YP(Di.keyField().canonicalString())}isEqual(t){return(t=(0,Y.m9)(t))instanceof ch&&this._delegate._internalPath.isEqual(t._internalPath)}}class Bm{constructor(t){this._delegate=t}static serverTimestamp(){const t=new BP("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new Bm(t)}static delete(){const t=new FC("deleteField");return t._methodName="FieldValue.delete",new Bm(t)}static arrayUnion(...t){const e=function(...n){return new AU("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new Bm(e)}static arrayRemove(...t){const e=function(...n){return new NU("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new Bm(e)}static increment(t){const e=function(n){return new MU("increment",n)}(t);return e._methodName="FieldValue.increment",new Bm(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const pH={Firestore:C3,GeoPoint:eS,Timestamp:Qr,Blob:UC,Transaction:E3,WriteBatch:x3,DocumentReference:fl,DocumentSnapshot:HC,Query:ao,QueryDocumentSnapshot:$C,QuerySnapshot:zP,CollectionReference:av,FieldPath:YP,FieldValue:Bm,setLogLevel:function(n){!function(n){oc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function I3(n,t){return function(n,t=Yc.z){return new zn.y(e=>{let r;return null!=t?t.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},e)}):r=n.onSnapshot({includeMetadataChanges:!0},e),()=>{null!=r&&r()}})}(n,t)}function KP(n,t){return I3(n,t).pipe((0,bt.U)(e=>({payload:e,type:"query"})))}function lS(n,t){return KP(n,t).pipe(Ko(void 0),aw(),(0,bt.U)(([e,r])=>{const i=r.payload.docChanges(),l=i.map(d=>({type:d.type,payload:d}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,f)=>{const m=i.find(x=>x.doc.ref.isEqual(d.ref)),b=null==e?void 0:e.payload.docs.find(x=>x.ref.isEqual(d.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(d.metadata)||!m&&b&&JSON.stringify(b.metadata)===JSON.stringify(d.metadata)||l.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:d}})}),l}))}function S3(n,t,e){return lS(n,e).pipe(Ba((r,i)=>function(n,t,e){return t.forEach(r=>{e.indexOf(r.type)>-1&&(n=function(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return QP(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return QP(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return QP(n,t.oldIndex,1)}return n}(n,r))}),n}(r,i.map(l=>l.payload),t),[]),lg(),(0,bt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function QP(n,t,e,...r){const i=n.slice();return i.splice(t,e,...r),i}function A3(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function(n){(function(n,t){n.INTERNAL.registerComponent(new Ka.wA("firestore-compat",e=>((t,e)=>new C3(t,e,new dH))(e.getProvider("app-compat").getImmediate(),e.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},pH)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.17")}(BE.Z);class N3{constructor(t,e,r){this.ref=t,this.query=e,this.afs=r}stateChanges(t){let e=lS(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,bt.U)(r=>r.filter(i=>t.indexOf(i.type)>-1)))),e.pipe(Ko(void 0),aw(),ar(([r,i])=>i.length>0||!r),(0,bt.U)(([r,i])=>i),Yn.iC)}auditTrail(t){return this.stateChanges(t).pipe(Ba((e,r)=>[...e,...r],[]))}snapshotChanges(t){const e=A3(t);return S3(this.query,e,this.afs.schedulers.outsideAngular).pipe(Yn.iC)}valueChanges(t={}){return KP(this.query,this.afs.schedulers.outsideAngular).pipe((0,bt.U)(e=>e.payload.docs.map(r=>t.idField?Object.assign(Object.assign({},r.data()),{[t.idField]:r.id}):r.data())),Yn.iC)}get(t){return(0,un.D)(this.query.get(t)).pipe(Yn.iC)}add(t){return this.ref.add(t)}doc(t){return new M3(this.ref.doc(t),this.afs)}}class M3{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const r=this.ref.collection(t),{ref:i,query:l}=P3(r,e);return new N3(i,l,this.afs)}snapshotChanges(){return function(n,t){return I3(n,t).pipe(Ko(void 0),aw(),(0,bt.U)(([e,r])=>r.exists?(null==e?void 0:e.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Yn.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,bt.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,un.D)(this.ref.get(t)).pipe(Yn.iC)}}class wH{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?lS(this.query,this.afs.schedulers.outsideAngular).pipe((0,bt.U)(e=>e.filter(r=>t.indexOf(r.type)>-1)),ar(e=>e.length>0),Yn.iC):lS(this.query,this.afs.schedulers.outsideAngular).pipe(Yn.iC)}auditTrail(t){return this.stateChanges(t).pipe(Ba((e,r)=>[...e,...r],[]))}snapshotChanges(t){const e=A3(t);return S3(this.query,e,this.afs.schedulers.outsideAngular).pipe(Yn.iC)}valueChanges(t={}){return KP(this.query,this.afs.schedulers.outsideAngular).pipe((0,bt.U)(r=>r.payload.docs.map(i=>t.idField?Object.assign({[t.idField]:i.id},i.data()):i.data())),Yn.iC)}get(t){return(0,un.D)(this.query.get(t)).pipe(Yn.iC)}}const R3=new a.OlP("angularfire2.enableFirestorePersistence"),k3=new a.OlP("angularfire2.firestore.persistenceSettings"),CH=new a.OlP("angularfire2.firestore.settings"),EH=new a.OlP("angularfire2.firestore.use-emulator");function P3(n,t=(e=>e)){return{query:t(n),ref:n}}let O3=(()=>{class n{constructor(e,r,i,l,d,f,m,b,x,I,V,G,ne,we,Ue,tt,ot){this.schedulers=m;const gt=(0,vi.on)(e,f,r),yt=x;I&&X_(gt,f,V,ne,we,Ue,G,tt),[this.firestore,this.persistenceEnabled$]=(0,vi.cc)(`${gt.name}.firestore`,"AngularFirestore",gt.name,()=>{const jt=f.runOutsideAngular(()=>gt.firestore());if(l&&jt.settings(l),yt&&jt.useEmulator(...yt),i&&!wh(d)){const bn=()=>{try{return(0,un.D)(jt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(Xr){return"undefined"!=typeof console&&console.warn(Xr),(0,xt.of)(!1)}};return[jt,f.runOutsideAngular(bn)]}return[jt,(0,xt.of)(!1)]},[l,yt,i])}collection(e,r){let i;i="string"==typeof e?this.firestore.collection(e):e;const{ref:l,query:d}=P3(i,r),f=this.schedulers.ngZone.run(()=>l);return new N3(f,d,this)}collectionGroup(e,r){const i=r||(d=>d),l=this.firestore.collectionGroup(e);return new wH(i(l),this)}doc(e){let r;r="string"==typeof e?this.firestore.doc(e):e;const i=this.schedulers.ngZone.run(()=>r);return new M3(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(vi.Dh),a.LFG(vi.xv,8),a.LFG(R3,8),a.LFG(CH,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(Yn.HU),a.LFG(k3,8),a.LFG(EH,8),a.LFG(nc,8),a.LFG(tw,8),a.LFG(nw,8),a.LFG(rw,8),a.LFG(Bd,8),a.LFG(iw,8),a.LFG(sw,8),a.LFG(jg,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),xH=(()=>{class n{constructor(){ew.Z.registerVersion("angularfire",Yn.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:R3,useValue:!0},{provide:k3,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[O3]}),n})(),DH=(()=>{class n{constructor(e,r,i,l){this.afs=e,this.afAuth=r,this.router=i,this.ngZone=l,this.afAuth.authState.subscribe(d=>{d?(this.userData=d,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(e,r){return this.afAuth.signInWithEmailAndPassword(e,r)}SignUp(e,r){return this.afAuth.createUserWithEmailAndPassword(e,r).then(i=>{this.SendVerificationMail(),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(e=>e.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(e){return this.afAuth.sendPasswordResetEmail(e).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const e=JSON.parse(localStorage.getItem("user"));return null==this.userData&&(this.userData=e),null!==e}GoogleAuth(){return this.AuthLogin(new ow.N).then(e=>{e&&this.router.navigate(["dashboard"])})}AuthLogin(e){return this.afAuth.signInWithPopup(e).then(r=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(e){return this.afs.doc(`users/${e.uid}`).set({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),localStorage.removeItem("apiKey"),localStorage.removeItem("apiSecret"),window.location.reload()})}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(O3),a.LFG(nc),a.LFG(vs),a.LFG(a.R0b))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var TH=O(9105);function Ds(n,t,e,r){return(0,TH.m)(e)&&(r=e,e=void 0),r?Ds(n,t,e).pipe((0,bt.U)(i=>(0,Rs.k)(i)?r(...i):r(i))):new zn.y(i=>{F3(n,t,function(d){i.next(arguments.length>1?Array.prototype.slice.call(arguments):d)},i,e)})}function F3(n,t,e,r,i){let l;if(function(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const d=n;n.addEventListener(t,e,i),l=()=>d.removeEventListener(t,e,i)}else if(function(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const d=n;n.on(t,e),l=()=>d.off(t,e)}else if(function(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const d=n;n.addListener(t,e),l=()=>d.removeListener(t,e)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let d=0,f=n.length;d<f;d++)F3(n[d],t,e,r,i)}r.add(l)}function NH(n){const{index:t,period:e,subscriber:r}=n;if(r.next(t),!r.closed){if(-1===e)return r.complete();n.index=t+1,this.schedule(n,e)}}class MH{call(t,e){return e.subscribe(new RH(t))}}class RH extends Nh{constructor(t){super(t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(t){this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(let r=0;r<e&&!this.hasFirst;r++){const l=dr(this,t[r],void 0,r);this.subscriptions&&this.subscriptions.push(l),this.add(l)}this.observables=null}}notifyNext(t,e,r){if(!this.hasFirst){this.hasFirst=!0;for(let i=0;i<this.subscriptions.length;i++)if(i!==r){let l=this.subscriptions[i];l.unsubscribe(),this.remove(l)}this.subscriptions=null}this.destination.next(e)}}var kH=O(8640);new zn.y(kH.Z);var cS=O(377);function uS(...n){const t=n[n.length-1];return"function"==typeof t&&n.pop(),(0,Mc.n)(n,void 0).lift(new PH(t))}class PH{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new OH(t,this.resultSelector))}}class OH extends gr.L{constructor(t,e,r=Object.create(null)){super(t),this.resultSelector=e,this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:void 0}_next(t){const e=this.iterators;(0,Rs.k)(t)?e.push(new LH(t)):e.push("function"==typeof t[cS.hZ]?new FH(t[cS.hZ]()):new VH(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let r=0;r<e;r++){let i=t[r];i.stillUnsubscribed?this.destination.add(i.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,r=this.destination;for(let d=0;d<e;d++){let f=t[d];if("function"==typeof f.hasValue&&!f.hasValue())return}let i=!1;const l=[];for(let d=0;d<e;d++){let f=t[d],m=f.next();if(f.hasCompleted()&&(i=!0),m.done)return void r.complete();l.push(m.value)}this.resultSelector?this._tryresultSelector(l):r.next(l),i&&r.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(r){return void this.destination.error(r)}this.destination.next(e)}}class FH{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return Boolean(t&&t.done)}}class LH{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[cS.hZ](){return this}next(t){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class VH extends Xi.Ds{constructor(t,e,r){super(t),this.parent=e,this.observable=r,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[cS.hZ](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t){this.buffer.push(t),this.parent.checkIterators()}subscribe(){return(0,Xi.ft)(this.observable,new Xi.IY(this))}}function ri(n){return t=>t.lift(new UH(n))}class UH{constructor(t){this.notifier=t}call(t,e){const r=new HH(t),i=(0,Xi.ft)(this.notifier,new Xi.IY(r));return i&&!r.seenValue?(r.add(i),e.subscribe(r)):r}}class HH extends Xi.Ds{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}O(1593);var zH=O(1555);function dS(n,t){return new zn.y(e=>{const r=n.length;if(0===r)return void e.complete();const i=new Array(r);let l=0,d=0;for(let f=0;f<r;f++){const m=(0,un.D)(n[f]);let b=!1;e.add(m.subscribe({next:x=>{b||(b=!0,d++),i[f]=x},error:x=>e.error(x),complete:()=>{l++,(l===r||!b)&&(d===r&&e.next(t?t.reduce((x,I,V)=>(x[I]=i[V],x),{}):i),e.complete())}}))}})}let $3=(()=>{class n{constructor(e,r){this._renderer=e,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.Qsj),a.Y36(a.SBq))},n.\u0275dir=a.lG2({type:n}),n})(),Um=(()=>{class n extends $3{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,features:[a.qOj]}),n})();const Ts=new a.OlP("NgValueAccessor"),KH={provide:Ts,useExisting:(0,a.Gpc)(()=>XP),multi:!0};let XP=(()=>{class n extends Um{writeValue(e){this.setProperty("checked",e)}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,r){1&e&&a.NdJ("change",function(l){return r.onChange(l.target.checked)})("blur",function(){return r.onTouched()})},features:[a._Bn([KH]),a.qOj]}),n})();const QH={provide:Ts,useExisting:(0,a.Gpc)(()=>hS),multi:!0},XH=new a.OlP("CompositionEventMode");let hS=(()=>{class n extends $3{constructor(e,r,i){super(e,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=k()?k().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.Qsj),a.Y36(a.SBq),a.Y36(XH,8))},n.\u0275dir=a.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,r){1&e&&a.NdJ("input",function(l){return r._handleInput(l.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(l){return r._compositionEnd(l.target.value)})},features:[a._Bn([QH]),a.qOj]}),n})();const Is=new a.OlP("NgValidators"),wp=new a.OlP("NgAsyncValidators");function J3(n){return null!=n}function X3(n){const t=(0,a.QGY)(n)?(0,un.D)(n):n;return(0,a.CqO)(t),t}function eV(n){let t={};return n.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function tV(n,t){return t.map(e=>e(n))}function nV(n){return n.map(t=>function(n){return!n.validate}(t)?t:e=>t.validate(e))}function eO(n){return null!=n?function(n){if(!n)return null;const t=n.filter(J3);return 0==t.length?null:function(e){return eV(tV(e,t))}}(nV(n)):null}function tO(n){return null!=n?function(n){if(!n)return null;const t=n.filter(J3);return 0==t.length?null:function(e){return function(...n){if(1===n.length){const t=n[0];if((0,Rs.k)(t))return dS(t,null);if((0,zH.K)(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return dS(e.map(r=>t[r]),e)}}if("function"==typeof n[n.length-1]){const t=n.pop();return dS(n=1===n.length&&(0,Rs.k)(n[0])?n[0]:n,null).pipe((0,bt.U)(e=>t(...e)))}return dS(n,null)}(tV(e,t).map(X3)).pipe((0,bt.U)(eV))}}(nV(n)):null}function sV(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function nO(n){return n?Array.isArray(n)?n:[n]:[]}function fS(n,t){return Array.isArray(n)?n.includes(t):n===t}function lV(n,t){const e=nO(t);return nO(n).forEach(i=>{fS(e,i)||e.push(i)}),e}function cV(n,t){return nO(t).filter(e=>!fS(n,e))}let uV=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=eO(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=tO(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,r){return!!this.control&&this.control.hasError(e,r)}getError(e,r){return this.control?this.control.getError(e,r):null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=a.lG2({type:n}),n})(),lo=(()=>{class n extends uV{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,features:[a.qOj]}),n})();class Ep extends uV{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let hV=(()=>{class n extends class{constructor(t){this._cd=t}is(t){var e,r,i;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[t])}}{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(Ep,2))},n.\u0275dir=a.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,r){2&e&&a.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[a.qOj]}),n})();function jC(n,t){(function(n,t){const e=function(n){return n._rawValidators}(n);null!==t.validator?n.setValidators(sV(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const r=function(n){return n._rawAsyncValidators}(n);null!==t.asyncValidator?n.setAsyncValidators(sV(r,t.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();_S(t._rawValidators,i),_S(t._rawAsyncValidators,i)})(n,t),t.valueAccessor.writeValue(n.value),function(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&fV(n,t)})}(n,t),function(n,t){const e=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&fV(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function(n,t){if(t.valueAccessor.setDisabledState){const e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function _S(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function fV(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function vS(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const GC="VALID",bS="INVALID",lv="PENDING",WC="DISABLED";function lO(n){return(uO(n)?n.validators:n)||null}function mV(n){return Array.isArray(n)?eO(n):n||null}function cO(n,t){return(uO(t)?t.asyncValidators:n)||null}function _V(n){return Array.isArray(n)?tO(n):n||null}function uO(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class dO{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=mV(this._rawValidators),this._composedAsyncValidatorFn=_V(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===GC}get invalid(){return this.status===bS}get pending(){return this.status==lv}get disabled(){return this.status===WC}get enabled(){return this.status!==WC}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=mV(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=_V(t)}addValidators(t){this.setValidators(lV(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(lV(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(cV(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(cV(t,this._rawAsyncValidators))}hasValidator(t){return fS(this._rawValidators,t)}hasAsyncValidator(t){return fS(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=lv,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=WC,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=GC,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===GC||this.status===lv)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?WC:GC}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=lv,this._hasOwnPendingAsyncValidator=!0;const e=X3(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(n,t,e){if(null==t||(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length))return null;let r=n;return t.forEach(i=>{r=r instanceof hO?r.controls.hasOwnProperty(i)?r.controls[i]:null:r instanceof p$&&r.at(i)||null}),r}(this,t)}getError(t,e){const r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new a.vpe,this.statusChanges=new a.vpe}_calculateStatus(){return this._allControlsDisabled()?WC:this.errors?bS:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(lv)?lv:this._anyControlsHaveStatus(bS)?bS:GC}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){uO(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class wS extends dO{constructor(t=null,e,r){super(lO(e),cO(r,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){vS(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){vS(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class hO extends dO{constructor(t,e,r){super(lO(e),cO(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e instanceof wS?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>!!r._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const r=this.controls[e];if(this.contains(e)&&t(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,r)=>((e.enabled||this.disabled)&&(t[r]=e.value),t))}_reduceChildren(t,e){let r=t;return this._forEachChild((i,l)=>{r=e(r,i,l)}),r}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,r)=>{if(void 0===t[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class p$ extends dO{constructor(t,e,r){super(lO(e),cO(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,r={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((r,i)=>{this._throwIfControlMissing(i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof wS?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,r)=>!!r._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,r)=>{t(e,r)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,r)=>{if(void 0===t[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const _$={provide:Ep,useExisting:(0,a.Gpc)(()=>pO)},bV=(()=>Promise.resolve(null))();let pO=(()=>{class n extends Ep{constructor(e,r,i,l){super(),this.control=new wS,this._registered=!1,this.update=new a.vpe,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function(n,t){if(!t)return null;let e,r,i;return Array.isArray(t),t.forEach(l=>{l.constructor===hS?e=l:function(n){return Object.getPrototypeOf(n.constructor)===Um}(l)?r=l:i=l}),i||r||e||null}(0,l)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(n,t){return[...t.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){jC(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){bV.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const r=e.isDisabled.currentValue,i=""===r||r&&"false"!==r;bV.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(lo,9),a.Y36(Is,10),a.Y36(wp,10),a.Y36(Ts,10))},n.\u0275dir=a.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[a._Bn([_$]),a.qOj,a.TTD]}),n})(),CV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})();const S$={provide:Ts,useExisting:(0,a.Gpc)(()=>CS),multi:!0};function SV(n,t){return null==n?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let CS=(()=>{class n extends Um{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const r=this._getOptionId(e);null==r&&this.setProperty("selectedIndex",-1);const i=SV(r,e);this.setProperty("value",i)}registerOnChange(e){this.onChange=r=>{this.value=this._getOptionValue(r),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),e))return r;return null}_getOptionValue(e){const r=function(n){return n.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r):e}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,r){1&e&&a.NdJ("change",function(l){return r.onChange(l.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[a._Bn([S$]),a.qOj]}),n})(),vO=(()=>{class n{constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(SV(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(CS,9))},n.\u0275dir=a.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const N$={provide:Ts,useExisting:(0,a.Gpc)(()=>bO),multi:!0};function AV(n,t){return null==n?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let bO=(()=>{class n extends Um{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let r;if(this.value=e,Array.isArray(e)){const i=e.map(l=>this._getOptionId(l));r=(l,d)=>{l._setSelected(i.indexOf(d.toString())>-1)}}else r=(i,l)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(e){this.onChange=r=>{const i=[];if(void 0!==r.selectedOptions){const l=r.selectedOptions;for(let d=0;d<l.length;d++){const f=l.item(d),m=this._getOptionValue(f.value);i.push(m)}}else{const l=r.options;for(let d=0;d<l.length;d++){const f=l.item(d);if(f.selected){const m=this._getOptionValue(f.value);i.push(m)}}}this.value=i,e(i)}}_registerOption(e){const r=(this._idCounter++).toString();return this._optionMap.set(r,e),r}_getOptionId(e){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,e))return r;return null}_getOptionValue(e){const r=function(n){return n.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r)._value:e}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,r){1&e&&a.NdJ("change",function(l){return r.onChange(l.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[a._Bn([N$]),a.qOj]}),n})(),wO=(()=>{class n{constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(AV(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(AV(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(bO,9))},n.\u0275dir=a.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const P$={provide:Is,useExisting:(0,a.Gpc)(()=>ES),multi:!0};let ES=(()=>{class n{constructor(){this._required=!1}get required(){return this._required}set required(e){this._required=null!=e&&!1!==e&&"false"!=`${e}`,this._onChange&&this._onChange()}validate(e){return this.required?function(n){return function(n){return null==n||0===n.length}(n.value)?{required:!0}:null}(e):null}registerOnValidatorChange(e){this._onChange=e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=a.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,r){2&e&&a.uIk("required",r.required?"":null)},inputs:{required:"required"},features:[a._Bn([P$])]}),n})(),BV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[CV]]}),n})(),UV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[BV]}),n})();const cv=["*"],I5=["dialog"];function xp(n){return null!=n}function dv(n){return(n||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(n){let t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(n))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});const jV={animation:!0,transitionTimerDelayMs:5};let ds=(()=>{class n{constructor(){this.animation=jV.animation}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=a.Yz7({factory:function(){return new n},token:n,providedIn:"root"}),n})();const Bj=()=>{},{transitionTimerDelayMs:Uj}=jV,zC=new Map,qi=(n,t,e,r)=>{let i=r.context||{};const l=zC.get(t);if(l)switch(r.runningTransition){case"continue":return ui.E;case"stop":n.run(()=>l.transition$.complete()),i=Object.assign(l.context,i),zC.delete(t)}const d=e(t,r.animation,i)||Bj;if(!r.animation||"none"===window.getComputedStyle(t).transitionProperty)return n.run(()=>d()),(0,xt.of)(void 0).pipe(function(n){return t=>new zn.y(e=>t.subscribe(d=>n.run(()=>e.next(d)),d=>n.run(()=>e.error(d)),()=>n.run(()=>e.complete())))}(n));const f=new Tn.xQ,m=new Tn.xQ,b=f.pipe(function(...n){return t=>Zs(t,(0,xt.of)(...n))}(!0));zC.set(t,{transition$:f,complete:()=>{m.next(),m.complete()},context:i});const x=function(n){const{transitionDelay:t,transitionDuration:e}=window.getComputedStyle(n);return 1e3*(parseFloat(t)+parseFloat(e))}(t);return n.runOutsideAngular(()=>{const I=Ds(t,"transitionend").pipe(ri(b),ar(({target:G})=>G===t));(function(...n){if(1===n.length){if(!(0,Rs.k)(n[0]))return n[0];n=n[0]}return(0,Mc.n)(n,void 0).lift(new MH)})(function(n=0,t,e){let r=-1;return(0,A0.k)(t)?r=Number(t)<1?1:Number(t):(0,zo.K)(t)&&(e=t),(0,zo.K)(e)||(e=Yc.P),new zn.y(i=>{const l=(0,A0.k)(n)?n:+n-e.now();return e.schedule(NH,l,{index:0,period:r,subscriber:i})})}(x+Uj).pipe(ri(b)),I,m).pipe(ri(b)).subscribe(()=>{zC.delete(t),n.run(()=>{d(),f.next(),f.complete()})})}),f.asObservable()};var xn=(()=>(function(n){n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown"}(xn||(xn={})),xn))();"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const oB=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function aB(n){const t=Array.from(n.querySelectorAll(oB)).filter(e=>-1!==e.tabIndex);return[t[0],t[t.length-1]]}new class{getAllStyles(t){return window.getComputedStyle(t)}getStyle(t,e){return this.getAllStyles(t)[e]}isStaticPositioned(t){return"static"===(this.getStyle(t,"position")||"static")}offsetParent(t){let e=t.offsetParent||document.documentElement;for(;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement}position(t,e=!0){let r,i={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))r=t.getBoundingClientRect(),r={top:r.top,bottom:r.bottom,left:r.left,right:r.right,height:r.height,width:r.width};else{const l=this.offsetParent(t);r=this.offset(t,!1),l!==document.documentElement&&(i=this.offset(l,!1)),i.top+=l.clientTop,i.left+=l.clientLeft}return r.top-=i.top,r.bottom-=i.top,r.left-=i.left,r.right-=i.left,e&&(r.top=Math.round(r.top),r.bottom=Math.round(r.bottom),r.left=Math.round(r.left),r.right=Math.round(r.right)),r}offset(t,e=!0){const r=t.getBoundingClientRect(),i_top=window.pageYOffset-document.documentElement.clientTop,i_left=window.pageXOffset-document.documentElement.clientLeft;let l={height:r.height||t.offsetHeight,width:r.width||t.offsetWidth,top:r.top+i_top,bottom:r.bottom+i_top,left:r.left+i_left,right:r.right+i_left};return e&&(l.height=Math.round(l.height),l.width=Math.round(l.width),l.top=Math.round(l.top),l.bottom=Math.round(l.bottom),l.left=Math.round(l.left),l.right=Math.round(l.right)),l}positionElements(t,e,r,i){const[l="top",d="center"]=r.split("-"),f=i?this.offset(t,!1):this.position(t,!1),m=this.getAllStyles(e),b=parseFloat(m.marginTop),x=parseFloat(m.marginBottom),I=parseFloat(m.marginLeft),V=parseFloat(m.marginRight);let G=0,ne=0;switch(l){case"top":G=f.top-(e.offsetHeight+b+x);break;case"bottom":G=f.top+f.height;break;case"left":ne=f.left-(e.offsetWidth+I+V);break;case"right":ne=f.left+f.width}switch(d){case"top":G=f.top;break;case"bottom":G=f.top+f.height-e.offsetHeight;break;case"left":ne=f.left;break;case"right":ne=f.left+f.width-e.offsetWidth;break;case"center":"top"===l||"bottom"===l?ne=f.left+f.width/2-e.offsetWidth/2:G=f.top+f.height/2-e.offsetHeight/2}e.style.transform=`translate(${Math.round(ne)}px, ${Math.round(G)}px)`;const we=e.getBoundingClientRect(),Ue=document.documentElement,tt=window.innerHeight||Ue.clientHeight,ot=window.innerWidth||Ue.clientWidth;return we.left>=0&&we.top>=0&&we.right<=ot&&we.bottom<=tt}},new Date(1882,10,12),new Date(2174,10,25);let PO=(()=>{class n{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ds))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(ds))},token:n,providedIn:"root"}),n})();class Wm{constructor(t,e,r){this.nodes=t,this.viewRef=e,this.componentRef=r}}const LG=()=>{};let CB=(()=>{class n{constructor(e){this._document=e}compensate(){const e=this._getWidth();return this._isPresent(e)?this._adjustBody(e):LG}_adjustBody(e){const r=this._document.body,i=r.style.paddingRight,l=parseFloat(window.getComputedStyle(r)["padding-right"]);return r.style["padding-right"]=`${l+e}px`,()=>r.style["padding-right"]=i}_isPresent(e){const r=this._document.body.getBoundingClientRect();return window.innerWidth-(r.left+r.right)>=e-.1*e}_getWidth(){const e=this._document.createElement("div");e.className="modal-scrollbar-measure";const r=this._document.body;r.appendChild(e);const i=e.getBoundingClientRect().width-e.clientWidth;return r.removeChild(e),i}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ee))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(ee))},token:n,providedIn:"root"}),n})(),VG=(()=>{class n{constructor(e,r){this._el=e,this._zone=r}ngOnInit(){this._zone.onStable.asObservable().pipe(_i(1)).subscribe(()=>{qi(this._zone,this._el.nativeElement,(e,r)=>{r&&dv(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return qi(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.SBq),a.Y36(a.R0b))},n.\u0275cmp=a.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(e,r){2&e&&(a.Tol("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),a.ekj("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,r){},encapsulation:2}),n})();class EB{close(t){}dismiss(t){}}class BG{constructor(t,e,r,i){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=r,this._beforeDismiss=i,this._closed=new Tn.xQ,this._dismissed=new Tn.xQ,this._hidden=new Tn.xQ,t.instance.dismissEvent.subscribe(l=>{this.dismiss(l)}),this.result=new Promise((l,d)=>{this._resolve=l,this._reject=d}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(ri(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(ri(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();e&&e.then?e.then(r=>{!1!==r&&this._dismiss(t)},()=>{}):!1!==e&&this._dismiss(t)}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,xt.of)(void 0);t.subscribe(()=>{const{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),uS(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var eE=(()=>(function(n){n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC"}(eE||(eE={})),eE))();let UG=(()=>{class n{constructor(e,r,i){this._document=e,this._elRef=r,this._zone=i,this._closed$=new Tn.xQ,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new a.vpe,this.shown=new Tn.xQ,this.hidden=new Tn.xQ}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(_i(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,r={animation:this.animation,runningTransition:"stop"},d=uS(qi(this._zone,e,()=>e.classList.remove("show"),r),qi(this._zone,this._dialogEl.nativeElement,()=>{},r));return d.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),d}_show(){const e={animation:this.animation,runningTransition:"continue"};uS(qi(this._zone,this._elRef.nativeElement,(l,d)=>{d&&dv(l),l.classList.add("show")},e),qi(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{Ds(e,"keydown").pipe(ri(this._closed$),ar(i=>i.which===xn.Escape)).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(eE.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let r=!1;Ds(this._dialogEl.nativeElement,"mousedown").pipe(ri(this._closed$),(0,vr.b)(()=>r=!1),mr(()=>Ds(e,"mouseup").pipe(ri(this._closed$),_i(1))),ar(({target:i})=>e===i)).subscribe(()=>{r=!0}),Ds(e,"click").pipe(ri(this._closed$)).subscribe(({target:i})=>{e===i&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!r&&this._zone.run(()=>this.dismiss(eE.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const r=e.querySelector("[ngbAutofocus]"),i=aB(e)[0];(r||i||e).focus()}}_restoreFocus(){const e=this._document.body,r=this._elWithFocus;let i;i=r&&r.focus&&e.contains(r)?r:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&qi(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(ee),a.Y36(a.SBq),a.Y36(a.R0b))},n.\u0275cmp=a.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(e,r){if(1&e&&a.Gf(I5,7),2&e){let i;a.iGM(i=a.CRH())&&(r._dialogEl=i.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,r){2&e&&(a.uIk("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),a.Tol("modal d-block"+(r.windowClass?" "+r.windowClass:"")),a.ekj("fade",r.animation))},inputs:{backdrop:"backdrop",keyboard:"keyboard",animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:cv,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,r){1&e&&(a.F$t(),a.TgZ(0,"div",0,1),a.TgZ(2,"div",2),a.Hsn(3),a.qZA(),a.qZA()),2&e&&a.Tol("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}"],encapsulation:2}),n})(),xB=(()=>{class n{constructor(e,r,i,l,d,f){this._applicationRef=e,this._injector=r,this._document=i,this._scrollBar=l,this._rendererFactory=d,this._ngZone=f,this._activeWindowCmptHasChanged=new Tn.xQ,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new a.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const m=this._windowCmpts[this._windowCmpts.length-1];((n,t,e,r=!1)=>{n.runOutsideAngular(()=>{const i=Ds(t,"focusin").pipe(ri(e),(0,bt.U)(l=>l.target));Ds(t,"keydown").pipe(ri(e),ar(l=>l.which===xn.Tab),k0(i)).subscribe(([l,d])=>{const[f,m]=aB(t);(d===f||d===t)&&l.shiftKey&&(m.focus(),l.preventDefault()),d===m&&!l.shiftKey&&(f.focus(),l.preventDefault())}),r&&Ds(t,"click").pipe(ri(e),k0(i),(0,bt.U)(l=>l[1])).subscribe(l=>l.focus())})})(this._ngZone,m.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(m.location.nativeElement)}})}open(e,r,i,l){const d=l.container instanceof HTMLElement?l.container:xp(l.container)?this._document.querySelector(l.container):this._document.body,f=this._rendererFactory.createRenderer(null,null),m=this._scrollBar.compensate(),b=()=>{this._modalRefs.length||(f.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!d)throw new Error(`The specified modal container "${l.container||"body"}" was not found in the DOM.`);const x=new EB,I=this._getContentRef(e,l.injector||r,i,x,l);let V=!1!==l.backdrop?this._attachBackdrop(e,d):void 0,G=this._attachWindowComponent(e,d,I),ne=new BG(G,I,V,l.beforeDismiss);return this._registerModalRef(ne),this._registerWindowCmpt(G),ne.result.then(m,m),ne.result.then(b,b),x.close=we=>{ne.close(we)},x.dismiss=we=>{ne.dismiss(we)},this._applyWindowOptions(G.instance,l),1===this._modalRefs.length&&f.addClass(this._document.body,"modal-open"),V&&V.instance&&(this._applyBackdropOptions(V.instance,l),V.changeDetectorRef.detectChanges()),G.changeDetectorRef.detectChanges(),ne}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(r=>r.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e,r){let l=e.resolveComponentFactory(VG).create(this._injector);return this._applicationRef.attachView(l.hostView),r.appendChild(l.location.nativeElement),l}_attachWindowComponent(e,r,i){let d=e.resolveComponentFactory(UG).create(this._injector,i.nodes);return this._applicationRef.attachView(d.hostView),r.appendChild(d.location.nativeElement),d}_applyWindowOptions(e,r){this._windowAttributes.forEach(i=>{xp(r[i])&&(e[i]=r[i])})}_applyBackdropOptions(e,r){this._backdropAttributes.forEach(i=>{xp(r[i])&&(e[i]=r[i])})}_getContentRef(e,r,i,l,d){return i?i instanceof a.Rgc?this._createFromTemplateRef(i,l):function(n){return"string"==typeof n}(i)?this._createFromString(i):this._createFromComponent(e,r,i,l,d):new Wm([])}_createFromTemplateRef(e,r){const l=e.createEmbeddedView({$implicit:r,close(d){r.close(d)},dismiss(d){r.dismiss(d)}});return this._applicationRef.attachView(l),new Wm([l.rootNodes],l)}_createFromString(e){const r=this._document.createTextNode(`${e}`);return new Wm([[r]])}_createFromComponent(e,r,i,l,d){const f=e.resolveComponentFactory(i),m=a.zs3.create({providers:[{provide:EB,useValue:l}],parent:r}),b=f.create(m),x=b.location.nativeElement;return d.scrollable&&x.classList.add("component-host-scrollable"),this._applicationRef.attachView(b.hostView),new Wm([[x]],b.hostView,b)}_setAriaHidden(e){const r=e.parentElement;r&&e!==this._document.body&&(Array.from(r.children).forEach(i=>{i!==e&&"SCRIPT"!==i.nodeName&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,r)=>{e?r.setAttribute("aria-hidden",e):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const r=()=>{const i=this._modalRefs.indexOf(e);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(r,r)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const r=this._windowCmpts.indexOf(e);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a.z2F),a.LFG(a.zs3),a.LFG(ee),a.LFG(CB),a.LFG(a.FYo),a.LFG(a.R0b))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(a.z2F),a.LFG(a.gxx),a.LFG(ee),a.LFG(CB),a.LFG(a.FYo),a.LFG(a.R0b))},token:n,providedIn:"root"}),n})(),DB=(()=>{class n{constructor(e,r,i,l){this._moduleCFR=e,this._injector=r,this._modalStack=i,this._config=l}open(e,r={}){const i=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),r);return this._modalStack.open(this._moduleCFR,this._injector,e,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a._Vd),a.LFG(a.zs3),a.LFG(xB),a.LFG(PO))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(a._Vd),a.LFG(a.gxx),a.LFG(xB),a.LFG(PO))},token:n,providedIn:"root"}),n})();new a.OlP("live announcer delay",{providedIn:"root",factory:function(){return 100}});class XB{}class e8{}class dh{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const r=e.indexOf(":");if(r>0){const i=e.slice(0,r),l=i.toLowerCase(),d=e.slice(r+1).trim();this.maybeSetNormalizedName(i,l),this.headers.has(l)?this.headers.get(l).push(d):this.headers.set(l,[d])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let r=t[e];const i=e.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(e,i))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof dh?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new dh;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof dh?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(t.name,e);const i=("a"===t.op?this.headers.get(e):void 0)||[];i.push(...r),this.headers.set(e,i);break;case"d":const l=t.value;if(l){let d=this.headers.get(e);if(!d)return;d=d.filter(f=>-1===l.indexOf(f)),0===d.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,d)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class x7{encodeKey(t){return t8(t)}encodeValue(t){return t8(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const T7=/%(\d[a-f0-9])/gi,I7={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function t8(n){return encodeURIComponent(n).replace(T7,(t,e)=>{var r;return null!==(r=I7[e])&&void 0!==r?r:t})}function n8(n){return`${n}`}class Tp{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new x7,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const l=i.indexOf("="),[d,f]=-1==l?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,l)),t.decodeValue(i.slice(l+1))],m=e.get(d)||[];m.push(f),e.set(d,m)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const r=t.fromObject[e];this.map.set(e,Array.isArray(r)?r:[r])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(r=>{const i=t[r];Array.isArray(i)?i.forEach(l=>{e.push({param:r,value:l,op:"a"})}):e.push({param:r,value:i,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Tp({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(n8(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let r=this.map.get(t.param)||[];const i=r.indexOf(n8(t.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class S7{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}keys(){return this.map.keys()}}function r8(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function i8(n){return"undefined"!=typeof Blob&&n instanceof Blob}function s8(n){return"undefined"!=typeof FormData&&n instanceof FormData}class tE{constructor(t,e,r,i){let l;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,l=i):l=r,l&&(this.reportProgress=!!l.reportProgress,this.withCredentials=!!l.withCredentials,l.responseType&&(this.responseType=l.responseType),l.headers&&(this.headers=l.headers),l.context&&(this.context=l.context),l.params&&(this.params=l.params)),this.headers||(this.headers=new dh),this.context||(this.context=new S7),this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=e;else{const f=e.indexOf("?");this.urlWithParams=e+(-1===f?"?":f<e.length-1?"&":"")+d}}else this.params=new Tp,this.urlWithParams=e}serializeBody(){return null===this.body?null:r8(this.body)||i8(this.body)||s8(this.body)||function(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Tp?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||s8(this.body)?null:i8(this.body)?this.body.type||null:r8(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Tp?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const r=t.method||this.method,i=t.url||this.url,l=t.responseType||this.responseType,d=void 0!==t.body?t.body:this.body,f=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,m=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let b=t.headers||this.headers,x=t.params||this.params;const I=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(b=Object.keys(t.setHeaders).reduce((V,G)=>V.set(G,t.setHeaders[G]),b)),t.setParams&&(x=Object.keys(t.setParams).reduce((V,G)=>V.set(G,t.setParams[G]),x)),new tE(r,i,d,{params:x,headers:b,context:I,reportProgress:m,responseType:l,withCredentials:f})}}var Ai=(()=>((Ai=Ai||{})[Ai.Sent=0]="Sent",Ai[Ai.UploadProgress=1]="UploadProgress",Ai[Ai.ResponseHeader=2]="ResponseHeader",Ai[Ai.DownloadProgress=3]="DownloadProgress",Ai[Ai.Response=4]="Response",Ai[Ai.User=5]="User",Ai))();class BO{constructor(t,e=200,r="OK"){this.headers=t.headers||new dh,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class UO extends BO{constructor(t={}){super(t),this.type=Ai.ResponseHeader}clone(t={}){return new UO({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class FS extends BO{constructor(t={}){super(t),this.type=Ai.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new FS({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class o8 extends BO{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function HO(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let a8=(()=>{class n{constructor(e){this.handler=e}request(e,r,i={}){let l;if(e instanceof tE)l=e;else{let m,b;m=i.headers instanceof dh?i.headers:new dh(i.headers),i.params&&(b=i.params instanceof Tp?i.params:new Tp({fromObject:i.params})),l=new tE(e,r,void 0!==i.body?i.body:null,{headers:m,context:i.context,params:b,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const d=(0,xt.of)(l).pipe(Pc(m=>this.handler.handle(m)));if(e instanceof tE||"events"===i.observe)return d;const f=d.pipe(ar(m=>m instanceof FS));switch(i.observe||"body"){case"body":switch(l.responseType){case"arraybuffer":return f.pipe((0,bt.U)(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return f.pipe((0,bt.U)(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return f.pipe((0,bt.U)(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));case"json":default:return f.pipe((0,bt.U)(m=>m.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:(new Tp).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,i={}){return this.request("PATCH",e,HO(i,r))}post(e,r,i={}){return this.request("POST",e,HO(i,r))}put(e,r,i={}){return this.request("PUT",e,HO(i,r))}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(XB))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class l8{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const c8=new a.OlP("HTTP_INTERCEPTORS");let M7=(()=>{class n{intercept(e,r){return r.handle(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const R7=/^\)\]\}',?\n/;let u8=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new zn.y(r=>{const i=this.xhrFactory.build();if(i.open(e.method,e.urlWithParams),e.withCredentials&&(i.withCredentials=!0),e.headers.forEach((G,ne)=>i.setRequestHeader(G,ne.join(","))),e.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const G=e.detectContentTypeHeader();null!==G&&i.setRequestHeader("Content-Type",G)}if(e.responseType){const G=e.responseType.toLowerCase();i.responseType="json"!==G?G:"text"}const l=e.serializeBody();let d=null;const f=()=>{if(null!==d)return d;const G=1223===i.status?204:i.status,ne=i.statusText||"OK",we=new dh(i.getAllResponseHeaders()),Ue=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||e.url;return d=new UO({headers:we,status:G,statusText:ne,url:Ue}),d},m=()=>{let{headers:G,status:ne,statusText:we,url:Ue}=f(),tt=null;204!==ne&&(tt=void 0===i.response?i.responseText:i.response),0===ne&&(ne=tt?200:0);let ot=ne>=200&&ne<300;if("json"===e.responseType&&"string"==typeof tt){const gt=tt;tt=tt.replace(R7,"");try{tt=""!==tt?JSON.parse(tt):null}catch(yt){tt=gt,ot&&(ot=!1,tt={error:yt,text:tt})}}ot?(r.next(new FS({body:tt,headers:G,status:ne,statusText:we,url:Ue||void 0})),r.complete()):r.error(new o8({error:tt,headers:G,status:ne,statusText:we,url:Ue||void 0}))},b=G=>{const{url:ne}=f(),we=new o8({error:G,status:i.status||0,statusText:i.statusText||"Unknown Error",url:ne||void 0});r.error(we)};let x=!1;const I=G=>{x||(r.next(f()),x=!0);let ne={type:Ai.DownloadProgress,loaded:G.loaded};G.lengthComputable&&(ne.total=G.total),"text"===e.responseType&&!!i.responseText&&(ne.partialText=i.responseText),r.next(ne)},V=G=>{let ne={type:Ai.UploadProgress,loaded:G.loaded};G.lengthComputable&&(ne.total=G.total),r.next(ne)};return i.addEventListener("load",m),i.addEventListener("error",b),i.addEventListener("timeout",b),i.addEventListener("abort",b),e.reportProgress&&(i.addEventListener("progress",I),null!==l&&i.upload&&i.upload.addEventListener("progress",V)),i.send(l),r.next({type:Ai.Sent}),()=>{i.removeEventListener("error",b),i.removeEventListener("abort",b),i.removeEventListener("load",m),i.removeEventListener("timeout",b),e.reportProgress&&(i.removeEventListener("progress",I),null!==l&&i.upload&&i.upload.removeEventListener("progress",V)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(Mu))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const $O=new a.OlP("XSRF_COOKIE_NAME"),jO=new a.OlP("XSRF_HEADER_NAME");class d8{}let P7=(()=>{class n{constructor(e,r,i){this.doc=e,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=zr(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ee),a.LFG(a.Lbi),a.LFG($O))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),GO=(()=>{class n{constructor(e,r){this.tokenService=e,this.headerName=r}intercept(e,r){const i=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(e);const l=this.tokenService.getToken();return null!==l&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,l)})),r.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(d8),a.LFG(jO))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),O7=(()=>{class n{constructor(e,r){this.backend=e,this.injector=r,this.chain=null}handle(e){if(null===this.chain){const r=this.injector.get(c8,[]);this.chain=r.reduceRight((i,l)=>new l8(i,l),this.backend)}return this.chain.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(e8),a.LFG(a.zs3))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),F7=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:GO,useClass:M7}]}}static withOptions(e={}){return{ngModule:n,providers:[e.cookieName?{provide:$O,useValue:e.cookieName}:[],e.headerName?{provide:jO,useValue:e.headerName}:[]]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[GO,{provide:c8,useExisting:GO,multi:!0},{provide:d8,useClass:P7},{provide:$O,useValue:"XSRF-TOKEN"},{provide:jO,useValue:"X-XSRF-TOKEN"}]}),n})(),L7=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[a8,{provide:XB,useClass:O7},u8,{provide:e8,useExisting:u8}],imports:[[F7.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})(),V7=(()=>{class n{constructor(){this.selfId=n.randomString(7,n.chars)}static randomString(e,r){for(var i="",l=e;l>0;--l)i+=r[Math.floor(Math.random()*r.length)];return i}set symbols(e){if(e){let r=e.split(",").sort();r.forEach((i,l)=>r[l]="BINANCE:"+i),this.options={autosize:!0,symbol:r[0],interval:"5",timezone:"Etc/UTC",theme:"dark",style:"1",locale:"br",studies:["MACD@tv-basicstudies","MASimple@tv-basicstudies","MASimple@tv-basicstudies"],toolbar_bg:"#f1f3f6",enable_publishing:!1,container_id:this.selfId},r.length>1&&(this.options.watchlist=r),this.loadCandleChart()}}ngOnInit(){}loadCandleChart(){setTimeout(()=>{this.chart||(this.chart=new TradingView.widget(this.options),console.log(this.chart))},1e3)}}return n.chars="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["candle-chart-comp"]],inputs:{symbols:"symbols"},decls:1,vars:1,consts:[[2,"height","100%",3,"id"]],template:function(e,r){1&e&&a._UZ(0,"div",0),2&e&&a.Q6J("id",r.selfId)},encapsulation:2}),n})(),B7=(()=>{class n{constructor(e){this.el=e}onKeyDown(e){let r=e;if(this.OnlyNumber){if(-1!==[46,8,9,27,13,110,190].indexOf(r.keyCode)||65===r.keyCode&&(r.ctrlKey||r.metaKey)||67===r.keyCode&&(r.ctrlKey||r.metaKey)||86===r.keyCode&&(r.ctrlKey||r.metaKey)||88===r.keyCode&&(r.ctrlKey||r.metaKey)||r.keyCode>=35&&r.keyCode<=39)return;(r.shiftKey||r.keyCode<48||r.keyCode>57)&&(r.keyCode<96||r.keyCode>105)&&r.preventDefault()}}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.SBq))},n.\u0275dir=a.lG2({type:n,selectors:[["","OnlyNumber",""]],hostBindings:function(e,r){1&e&&a.NdJ("keydown",function(l){return r.onKeyDown(l)})},inputs:{OnlyNumber:"OnlyNumber"}}),n})();const U7=["modalLogin"],H7=["modalConfiguracaoRobo"],$7=["modalBinanceApiKey"],j7=["modalAlertaEntrada"];function G7(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",24),a.TgZ(1,"button",25),a.NdJ("click",function(){return a.CHM(e),a.oxw().novoSinal()}),a._uU(2,"Novo sinal"),a.qZA(),a.qZA()}}function W7(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div"),a.TgZ(1,"button",26),a.NdJ("click",function(){return a.CHM(e),a.oxw().openModalConfiguracaoRobo()}),a._UZ(2,"i",27),a.qZA(),a.TgZ(3,"button",28),a.NdJ("click",function(){return a.CHM(e),a.oxw().AuthService.SignOut()}),a._UZ(4,"i",29),a.qZA(),a.qZA()}}function q7(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",40),a.TgZ(1,"div",41),a.TgZ(2,"input",42),a.NdJ("ngModelChange",function(i){return a.CHM(e).$implicit.valor=i})("blur",function(){const i=a.CHM(e),l=i.$implicit,d=i.index;return a.oxw(2).setNextValueEntrada(l,d)}),a.qZA(),a.qZA(),a.TgZ(3,"div",41),a.TgZ(4,"input",43),a.NdJ("ngModelChange",function(i){return a.CHM(e).$implicit.descricao=i}),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=t.$implicit;a.xp6(2),a.Q6J("ngModel",e.valor),a.xp6(2),a.Q6J("ngModel",e.descricao)}}function Z7(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",30),a.TgZ(1,"div",9),a.TgZ(2,"label",31),a._uU(3,"Data"),a.qZA(),a.TgZ(4,"input",32),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().sinalModel.data=i}),a.qZA(),a.qZA(),a.TgZ(5,"div",9),a.TgZ(6,"label",31),a._uU(7,"Moeda"),a.qZA(),a.TgZ(8,"input",33),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().sinalModel.moeda=i}),a.qZA(),a.qZA(),a.TgZ(9,"div",9),a.TgZ(10,"label",31),a._uU(11,"Tipo"),a.qZA(),a.TgZ(12,"select",34),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().sinalModel.tipo=i}),a.TgZ(13,"option",35),a._uU(14,"LONG"),a.qZA(),a.TgZ(15,"option",36),a._uU(16,"SHORT"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(17,"div",9),a.TgZ(18,"label",31),a._uU(19,"Entradas"),a.qZA(),a.YNc(20,q7,5,2,"div",37),a.qZA(),a.TgZ(21,"div",9),a.TgZ(22,"button",38),a.NdJ("click",function(){return a.CHM(e),a.oxw().salvarEntrada()}),a._uU(23,"Salvar"),a.qZA(),a.TgZ(24,"button",39),a.NdJ("click",function(){return a.CHM(e),a.oxw().showFormNovoSinal=!1}),a._uU(25,"Cancelar"),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=a.oxw();a.xp6(4),a.Q6J("ngModel",e.sinalModel.data),a.xp6(4),a.Q6J("ngModel",e.sinalModel.moeda),a.xp6(4),a.Q6J("ngModel",e.sinalModel.tipo),a.xp6(8),a.Q6J("ngForOf",e.sinalModel.entradas)}}function z7(n,t){if(1&n&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&n){const e=a.oxw().$implicit,r=a.oxw();a.xp6(1),a.hij("$: ",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price,"")}}function Y7(n,t){if(1&n&&(a.ynx(0),a._uU(1),a.BQk()),2&n){const e=a.oxw(3).$implicit;a.xp6(1),a.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function K7(n,t){if(1&n&&(a.TgZ(0,"div",60),a._UZ(1,"i",61),a.TgZ(2,"small"),a._uU(3),a.YNc(4,Y7,2,1,"ng-container",3),a.qZA(),a.qZA()),2&n){const e=a.oxw(2).$implicit,r=a.oxw();a.xp6(3),a.hij("",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price," "),a.xp6(1),a.Q6J("ngIf",e.priceCoinPercentage)}}function Q7(n,t){if(1&n&&(a.ynx(0),a._uU(1),a.BQk()),2&n){const e=a.oxw(3).$implicit;a.xp6(1),a.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function J7(n,t){if(1&n&&(a.TgZ(0,"div",60),a._UZ(1,"i",61),a.TgZ(2,"small"),a._uU(3),a.YNc(4,Q7,2,1,"ng-container",3),a.qZA(),a.qZA()),2&n){const e=a.oxw(2).$implicit,r=a.oxw();a.xp6(3),a.hij("",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price," "),a.xp6(1),a.Q6J("ngIf",e.priceCoinPercentage)}}function X7(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"li"),a.YNc(1,K7,5,2,"div",57),a.TgZ(2,"div"),a.TgZ(3,"i",58),a.NdJ("click",function(){const l=a.CHM(e).$implicit,d=a.oxw().$implicit;return a.oxw().toggleAlcancado(d,l)}),a.qZA(),a.TgZ(4,"span",59),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw(2).copyEntry(l.valor)}),a._uU(5),a.qZA(),a.qZA(),a.YNc(6,J7,5,2,"div",57),a._UZ(7,"div"),a.qZA()}if(2&n){const e=t.$implicit,r=t.index,i=a.oxw().$implicit,l=a.oxw();a.xp6(1),a.Q6J("ngIf",l.PriceCoinMap[i.moeda]&&i.indexPricePosition===r),a.xp6(2),a.Q6J("ngClass",e.alcancado?"fa-flag text-success":"fa-caret-right"),a.xp6(2),a.AsE(" ",e.valor," - ",e.descricao," "),a.xp6(1),a.Q6J("ngIf",l.PriceCoinMap[i.moeda]&&r==i.entradas.length-1&&("LONG"===i.tipo&&l.castPrice(null==l.PriceCoinMap[i.moeda]?null:l.PriceCoinMap[i.moeda].price)>l.castPrice(e.valor)||"SHORT"===i.tipo&&l.castPrice(null==l.PriceCoinMap[i.moeda]?null:l.PriceCoinMap[i.moeda].price)<l.castPrice(e.valor)))}}function eW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",44),a.TgZ(1,"div",45),a.TgZ(2,"i",46),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw().toggleSinalBloqueado(l)}),a.qZA(),a.TgZ(3,"h5",47),a.TgZ(4,"strong"),a._uU(5),a.qZA(),a.qZA(),a.TgZ(6,"h5"),a.YNc(7,z7,2,1,"span",3),a.qZA(),a.TgZ(8,"h6",48),a._uU(9),a.ALo(10,"date"),a.qZA(),a.TgZ(11,"div"),a.TgZ(12,"ul",49),a.YNc(13,X7,8,5,"li",50),a.qZA(),a.qZA(),a.TgZ(14,"div"),a.TgZ(15,"div",51),a.TgZ(16,"button",52),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw().comprarAlerta(l)}),a._uU(17," Comprar "),a.qZA(),a.qZA(),a.TgZ(18,"div",53),a.TgZ(19,"button",54),a.NdJ("click",function(){const i=a.CHM(e),l=i.$implicit,d=i.index;return a.oxw().editarSinal(l,d)}),a._UZ(20,"i",55),a.qZA(),a.TgZ(21,"button",28),a.NdJ("click",function(){const i=a.CHM(e),l=i.$implicit,d=i.index;return a.oxw().excluirSinal(l,d)}),a._UZ(22,"i",56),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=t.$implicit,r=a.oxw();a.Q6J("ngClass","LONG"===e.tipo?"border-long":"border-short"),a.xp6(2),a.Q6J("ngClass",r.configuracaoRobo.sinaisBloqueadosList&&r.configuracaoRobo.sinaisBloqueadosList.indexOf(e.id)>-1?"fa-lock":"fa-unlock"),a.xp6(3),a.Oqu(e.moeda),a.xp6(2),a.Q6J("ngIf",r.PriceCoinMap[e.moeda]),a.xp6(1),a.Q6J("ngClass","LONG"===e.tipo?"text-success":"text-danger"),a.xp6(1),a.AsE(" ",e.tipo," - ",a.xi3(10,8,e.data,"dd/MM/yyyy")," "),a.xp6(4),a.Q6J("ngForOf",e.entradas)}}function tW(n,t){if(1&n&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&n){const e=a.oxw().$implicit,r=a.oxw();a.xp6(1),a.hij("$: ",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price,"")}}function nW(n,t){if(1&n&&(a.ynx(0),a._uU(1),a.BQk()),2&n){const e=a.oxw(3).$implicit;a.xp6(1),a.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function rW(n,t){if(1&n&&(a.TgZ(0,"div",60),a._UZ(1,"i",61),a.TgZ(2,"small"),a._uU(3),a.YNc(4,nW,2,1,"ng-container",3),a.qZA(),a.qZA()),2&n){const e=a.oxw(2).$implicit,r=a.oxw();a.xp6(3),a.hij("",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price," "),a.xp6(1),a.Q6J("ngIf",e.priceCoinPercentage)}}function iW(n,t){if(1&n&&(a.ynx(0),a._uU(1),a.BQk()),2&n){const e=a.oxw(3).$implicit;a.xp6(1),a.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function sW(n,t){if(1&n&&(a.TgZ(0,"div",60),a._UZ(1,"i",61),a.TgZ(2,"small"),a._uU(3),a.YNc(4,iW,2,1,"ng-container",3),a.qZA(),a.qZA()),2&n){const e=a.oxw(2).$implicit,r=a.oxw();a.xp6(3),a.hij("",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price," "),a.xp6(1),a.Q6J("ngIf",e.priceCoinPercentage)}}function oW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"li"),a.YNc(1,rW,5,2,"div",57),a.TgZ(2,"div"),a.TgZ(3,"i",58),a.NdJ("click",function(){const l=a.CHM(e).$implicit,d=a.oxw().$implicit;return a.oxw().toggleAlcancado(d,l)}),a.qZA(),a.TgZ(4,"span",59),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw(2).copyEntry(l.valor)}),a._uU(5),a.qZA(),a.qZA(),a.YNc(6,sW,5,2,"div",57),a._UZ(7,"div"),a.qZA()}if(2&n){const e=t.$implicit,r=t.index,i=a.oxw().$implicit,l=a.oxw();a.xp6(1),a.Q6J("ngIf",l.PriceCoinMap[i.moeda]&&i.indexPricePosition===r),a.xp6(2),a.Q6J("ngClass",e.alcancado?"fa-flag text-success":"fa-caret-right"),a.xp6(2),a.AsE(" ",e.valor," - ",e.descricao," "),a.xp6(1),a.Q6J("ngIf",l.PriceCoinMap[i.moeda]&&r==i.entradas.length-1&&("LONG"===i.tipo&&l.castPrice(null==l.PriceCoinMap[i.moeda]?null:l.PriceCoinMap[i.moeda].price)>l.castPrice(e.valor)||"SHORT"===i.tipo&&l.castPrice(null==l.PriceCoinMap[i.moeda]?null:l.PriceCoinMap[i.moeda].price)<l.castPrice(e.valor)))}}function aW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",44),a.TgZ(1,"div",45),a.TgZ(2,"i",46),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw().toggleSinalBloqueado(l)}),a.qZA(),a.TgZ(3,"h5",47),a.TgZ(4,"strong"),a._uU(5),a.qZA(),a.qZA(),a.TgZ(6,"h5"),a.YNc(7,tW,2,1,"span",3),a.qZA(),a.TgZ(8,"h6",48),a._uU(9),a.ALo(10,"date"),a.qZA(),a.TgZ(11,"div"),a.TgZ(12,"ul",49),a.YNc(13,oW,8,5,"li",50),a.qZA(),a.qZA(),a.TgZ(14,"div"),a.TgZ(15,"span",53),a.TgZ(16,"button",54),a.NdJ("click",function(){const i=a.CHM(e),l=i.$implicit,d=i.index;return a.oxw().editarSinal(l,d)}),a._UZ(17,"i",55),a.qZA(),a.TgZ(18,"button",28),a.NdJ("click",function(){const i=a.CHM(e),l=i.$implicit,d=i.index;return a.oxw().excluirSinal(l,d)}),a._UZ(19,"i",56),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=t.$implicit,r=a.oxw();a.Q6J("ngClass","LONG"===e.tipo?"border-long":"border-short"),a.xp6(2),a.Q6J("ngClass",r.configuracaoRobo.sinaisBloqueadosList&&r.configuracaoRobo.sinaisBloqueadosList.indexOf(e.id)>-1?"fa-lock":"fa-unlock"),a.xp6(3),a.Oqu(e.moeda),a.xp6(2),a.Q6J("ngIf",r.PriceCoinMap[e.moeda]),a.xp6(1),a.Q6J("ngClass","LONG"===e.tipo?"text-success":"text-danger"),a.xp6(1),a.AsE(" ",e.tipo," - ",a.xi3(10,8,e.data,"dd/MM/yyyy")," "),a.xp6(4),a.Q6J("ngForOf",e.entradas)}}function lW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"button",62),a.NdJ("click",function(){return a.CHM(e),a.oxw().removerTodosAlerta()}),a._uU(1," Remover todos "),a.qZA()}}function cW(n,t){1&n&&(a.TgZ(0,"strong",63),a._uU(1,"Sem sugest\xe3o de compra"),a.qZA())}function uW(n,t){if(1&n&&(a.ynx(0),a._uU(1),a.BQk()),2&n){const e=a.oxw(3).$implicit;a.xp6(1),a.hij(" ",":: "+e.sinal.priceCoinPercentage+"%"," ")}}function dW(n,t){if(1&n&&(a.TgZ(0,"div",60),a._UZ(1,"i",61),a.TgZ(2,"small"),a._uU(3),a.YNc(4,uW,2,1,"ng-container",3),a.qZA(),a.qZA()),2&n){const e=a.oxw(2).$implicit,r=a.oxw();a.xp6(3),a.hij("",null==r.PriceCoinMap[e.sinal.moeda]?null:r.PriceCoinMap[e.sinal.moeda].price," "),a.xp6(1),a.Q6J("ngIf",e.sinal.priceCoinPercentage)}}function hW(n,t){if(1&n&&(a.ynx(0),a._uU(1),a.BQk()),2&n){const e=a.oxw(3).$implicit;a.xp6(1),a.hij(" ",":: "+e.sinal.priceCoinPercentage+"%"," ")}}function fW(n,t){if(1&n&&(a.TgZ(0,"div",60),a._UZ(1,"i",61),a.TgZ(2,"small"),a._uU(3),a.YNc(4,hW,2,1,"ng-container",3),a.qZA(),a.qZA()),2&n){const e=a.oxw(2).$implicit,r=a.oxw();a.xp6(3),a.hij("",null==r.PriceCoinMap[e.sinal.moeda]?null:r.PriceCoinMap[e.sinal.moeda].price," "),a.xp6(1),a.Q6J("ngIf",e.sinal.priceCoinPercentage)}}function pW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"li"),a.YNc(1,dW,5,2,"div",57),a.TgZ(2,"div"),a.TgZ(3,"i",58),a.NdJ("click",function(){const l=a.CHM(e).$implicit,d=a.oxw().$implicit;return a.oxw().toggleAlcancado(d.sinal,l)}),a.qZA(),a.TgZ(4,"span",59),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw(2).copyEntry(l.valor)}),a._uU(5),a.qZA(),a.qZA(),a.YNc(6,fW,5,2,"div",57),a._UZ(7,"div"),a.qZA()}if(2&n){const e=t.$implicit,r=t.index,i=a.oxw().$implicit,l=a.oxw();a.xp6(1),a.Q6J("ngIf",l.PriceCoinMap[i.sinal.moeda]&&i.sinal.indexPricePosition===r),a.xp6(2),a.Q6J("ngClass",e.alcancado?"fa-flag text-success":"fa-caret-right"),a.xp6(2),a.AsE(" ",e.valor," - ",e.descricao," "),a.xp6(1),a.Q6J("ngIf",l.PriceCoinMap[i.sinal.moeda]&&r==i.sinal.entradas.length-1&&("LONG"===i.sinal.tipo&&l.castPrice(null==l.PriceCoinMap[i.sinal.moeda]?null:l.PriceCoinMap[i.sinal.moeda].price)>l.castPrice(e.valor)||"SHORT"===i.sinal.tipo&&l.castPrice(null==l.PriceCoinMap[i.sinal.moeda]?null:l.PriceCoinMap[i.sinal.moeda].price)<l.castPrice(e.valor)))}}function gW(n,t){if(1&n){const e=a.EpF();a.ynx(0),a.TgZ(1,"div",64),a.TgZ(2,"div",45),a.TgZ(3,"h5",47),a.TgZ(4,"strong"),a._uU(5),a.qZA(),a.qZA(),a.TgZ(6,"h6",65),a.TgZ(7,"span",66),a.TgZ(8,"strong"),a._uU(9),a.qZA(),a.qZA(),a.TgZ(10,"span"),a._uU(11),a.qZA(),a.qZA(),a.TgZ(12,"div"),a.TgZ(13,"div"),a._uU(14),a.ALo(15,"date"),a.qZA(),a.TgZ(16,"ul",49),a.YNc(17,pW,8,5,"li",50),a.qZA(),a.qZA(),a.TgZ(18,"button",52),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw().comprarAlerta(l.sinal)}),a._uU(19," Comprar "),a.qZA(),a.TgZ(20,"button",67),a.NdJ("click",function(){const l=a.CHM(e).index;return a.oxw().removerAlerta(l)}),a._uU(21," excluir "),a.qZA(),a.qZA(),a.qZA(),a.BQk()}if(2&n){const e=t.$implicit,r=a.oxw();a.xp6(5),a.AsE("",e.sinal.moeda," -$ ",null==r.PriceCoinMap[e.sinal.moeda]?null:r.PriceCoinMap[e.sinal.moeda].price,""),a.xp6(2),a.Q6J("ngClass","LONG"===e.sinal.tipo?"text-success":"text-danger"),a.xp6(2),a.hij("",e.sinal.tipo," "),a.xp6(2),a.Oqu(e.dataHora),a.xp6(3),a.hij(" Data sinal: ",a.xi3(15,7,e.sinal.data,"dd/MM/yyyy")," "),a.xp6(3),a.Q6J("ngForOf",e.sinal.entradas)}}function mW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",68),a.TgZ(1,"h4",69),a._uU(2,"Sign In"),a.qZA(),a.qZA(),a.TgZ(3,"div",70),a.TgZ(4,"div",71),a.TgZ(5,"div",71),a.TgZ(6,"div",71,72),a.TgZ(8,"div",73),a._UZ(9,"input",74,75),a.qZA(),a.TgZ(11,"div",73),a.TgZ(12,"label"),a._uU(13,"Password"),a.qZA(),a.TgZ(14,"div",76),a.TgZ(15,"input",77,78),a.NdJ("keydown",function(i){const d=a.CHM(e).$implicit,f=a.MAs(10),m=a.MAs(16);return a.oxw().submitSeach(i,f.value,m.value,d)}),a.qZA(),a.TgZ(17,"div",79),a.TgZ(18,"span",80),a.NdJ("click",function(){a.CHM(e);const i=a.oxw();return i.showPassword=!i.showPassword}),a._UZ(19,"i",81),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(20,"div",73),a.TgZ(21,"button",82),a.NdJ("click",function(){const l=a.CHM(e).$implicit,d=a.MAs(10),f=a.MAs(16);return a.oxw().sigin(d.value,f.value,l)}),a._uU(22,"Login"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=a.oxw();a.xp6(15),a.Q6J("type",e.showPassword?"text":"password"),a.xp6(4),a.Q6J("ngClass",e.showPassword?"fa-eye-slash":"fa-eye")}}function _W(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",68),a.TgZ(1,"h4",83),a._uU(2,"Configura\xe7\xe3o dos rob\xf4s"),a.qZA(),a.TgZ(3,"button",84),a.NdJ("click",function(){return a.CHM(e).$implicit.dismiss("Cross click")}),a.TgZ(4,"span",85),a._uU(5,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",70),a.TgZ(7,"div",71),a.TgZ(8,"div",71),a.TgZ(9,"div",71,72),a.TgZ(11,"div",73),a.TgZ(12,"label"),a._uU(13,"Valor entrada em USDT"),a.qZA(),a.TgZ(14,"input",86),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().configuracaoRobo.valorEntradaUsdt=i}),a.qZA(),a.qZA(),a.TgZ(15,"div",73),a.TgZ(16,"label"),a._uU(17,"M\xe1ximo de rob\xf4s ativos"),a.qZA(),a.TgZ(18,"input",87),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().configuracaoRobo.maximoRobosAtivos=i}),a.qZA(),a.qZA(),a.TgZ(19,"div",88),a.TgZ(20,"input",89),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().configuracaoRobo.ativo=i}),a.qZA(),a.TgZ(21,"label",90),a._uU(22," Ativo "),a.qZA(),a.qZA(),a.TgZ(23,"div",73),a.TgZ(24,"button",82),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw().salvarConfiguracacaoRobo(l)}),a._uU(25," salvar"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=a.oxw();a.xp6(14),a.Q6J("ngModel",e.configuracaoRobo.valorEntradaUsdt),a.xp6(4),a.Q6J("ngModel",e.configuracaoRobo.maximoRobosAtivos),a.xp6(2),a.Q6J("ngModel",e.configuracaoRobo.ativo)}}function yW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",68),a.TgZ(1,"h4",83),a._uU(2,"Salvar Binace API KEY"),a.qZA(),a.TgZ(3,"button",84),a.NdJ("click",function(){return a.CHM(e).$implicit.dismiss("Cross click")}),a.TgZ(4,"span",85),a._uU(5,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",70),a.TgZ(7,"div",71),a.TgZ(8,"div",71),a.TgZ(9,"div",71,72),a.TgZ(11,"div",73),a.TgZ(12,"label"),a._uU(13,"API KEY"),a.qZA(),a.TgZ(14,"input",91),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().binanceModel.apiKey=i}),a.qZA(),a.qZA(),a.TgZ(15,"div",73),a.TgZ(16,"label"),a._uU(17,"API SECRET"),a.qZA(),a.TgZ(18,"input",91),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().binanceModel.apiSecret=i}),a.qZA(),a.qZA(),a.TgZ(19,"div",73),a.TgZ(20,"button",82),a.NdJ("click",function(){return a.CHM(e).$implicit.close(!0)}),a._uU(21," salvar"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=a.oxw();a.xp6(14),a.Q6J("ngModel",e.binanceModel.apiKey),a.xp6(4),a.Q6J("ngModel",e.binanceModel.apiSecret)}}function vW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",68),a.TgZ(1,"h4",92),a._uU(2,"Configura\xe7\xe3o MACD"),a.qZA(),a.TgZ(3,"button",84),a.NdJ("click",function(){return a.CHM(e).$implicit.dismiss("Cross click")}),a.TgZ(4,"span",85),a._uU(5,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",70),a.TgZ(7,"div",71),a.TgZ(8,"div",71),a.TgZ(9,"div",71,72),a.TgZ(11,"div",73),a.TgZ(12,"div",73),a.TgZ(13,"label"),a._uU(14,"Intervalo em minutos"),a.qZA(),a.TgZ(15,"input",93),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().macdModel.interval=i}),a.qZA(),a.qZA(),a.TgZ(16,"div",73),a.TgZ(17,"label"),a._uU(18,"Limit"),a.qZA(),a.TgZ(19,"input",93),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().macdModel.limit=i}),a.qZA(),a.qZA(),a.TgZ(20,"div",73),a.TgZ(21,"button",82),a.NdJ("click",function(){return a.CHM(e).$implicit.close(!0)}),a._uU(22," salvar"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=a.oxw();a.xp6(15),a.Q6J("ngModel",e.macdModel.interval),a.xp6(4),a.Q6J("ngModel",e.macdModel.limit)}}zc.extend(Kt);let bW=(()=>{class n{constructor(e,r,i,l,d){this.db=e,this.AuthService=r,this.modalService=i,this.config=l,this.http=d,this.title="binance-future-watcher-githubio",this.showPassword=!1,this.loading=!1,this.showFormNovoSinal=!1,this.listView="lista_sinais",this.BINANCE_FUTURE_ENDPOINT="https://fapi.binance.com/fapi/v1",this.PriceCoinMap={},this.PriceCoinList=[],this.storage=window.localStorage,this.canCopyClipboard=window.navigator.clipboard,this.sinaisList=[],this.sinaisMap={},this.coinCandleWatcherMap={},this.sinaisPinnedList=[],this.coinNameList=[],this.sinaisIDPinnedList=[],this.watchersEntradaList=[],this.sinaisBloqueadosList=[],this.myHeaders=new Headers,this.myInit=null,this.sinalModel={data:null,moeda:null,tipo:null,entradas:[],alert:!1,indexPricePosition:-1},this.entradaModel={valor:0,descricao:null,alcancado:!1,dataAlcancado:null},this.canSendNotification=!1,this._1second=1e3,this._5seconds=5*this._1second,this.sinaisCompradosMap={},this.editandoSinalIdx=-1,this.configuracaoRobo={id:null,valorEntradaUsdt:10,maximoRobosAtivos:10,ativo:!1,sinaisBloqueadosList:[]},this.binanceModel={apiKey:"",apiSecret:""},this.macdModel={interval:5,limit:52},this.modalAberto=!1,this.alertaEntradasList=[],this.myHeaders.append("content-type","application/json"),this.myInit={method:"GET",headers:this.myHeaders}}ngOnInit(){"denied"===Notification.permission?Notification.requestPermission().then(e=>{this.canSendNotification="granted"===e}):"granted"===Notification.permission&&(this.canSendNotification=!0),setTimeout(()=>{if(this.AuthService.isLoggedIn){this.startPriceWatcher(),this.loadSinaisList(),this.loadConfiguracaoRobo(),this.checkBinaceApiKey();let e=window.localStorage.getItem("alerta_list");e&&(this.alertaEntradasList=JSON.parse(e))}else this.openModalLogin()},1e3)}startPriceWatcher(){const e=function(n=0,t=Yc.P){return(!(0,A0.k)(n)||n<0)&&(n=0),(!t||"function"!=typeof t.schedule)&&(t=Yc.P),new zn.y(e=>(e.add(t.schedule(sa,n,{subscriber:e,counter:0,period:n})),e))}(this._5seconds);this.populatePriceCoinMap(),e.subscribe(r=>this.populatePriceCoinMap())}updatePriceCoinMarkPrice(e,r){if(this.PriceCoinMap[e.moeda]){let i=this.PriceCoinMap[e.moeda];i.length<r.length&&(i=r.substr(0,i.length)),this.PriceCoinMap[e.moeda]=i}}populatePriceCoinMap(){this.BINANCE_FUTURE_ENDPOINT&&fetch(`${this.BINANCE_FUTURE_ENDPOINT}/ticker/price`,this.myInit).then(r=>{if(r.ok)return r.json()}).then(r=>{this.PriceCoinList=[];let i=[];r.forEach(d=>{this.PriceCoinMap[d.symbol]={price:d.price},i.push(d.symbol)});let l=this;i.sort(),i.forEach(d=>{l.PriceCoinList.push({symbol:d,price:this.PriceCoinMap[d].price})}),this.updatePricePositionOnSinais()})}updatePricePositionOnSinais(){this.sinaisList&&this.sinaisList.length>0&&(this.sinaisList.forEach((e,r)=>{let i=0;try{i=parseFloat(this.PriceCoinMap[e.moeda].price)}catch(l){}if(i){e.priceCoin=i;let l=-1,d=0;"LONG"===e.tipo?(d=(e.entradas[e.entradas.length-1].valor-e.entradas[0].valor)/100,e.priceCoinPercentage=i>e.entradas[0].valor?((i-e.entradas[0].valor)/d).toFixed(2):0):(d=(e.entradas[0].valor-e.entradas[e.entradas.length-1].valor)/100,e.priceCoinPercentage=i<e.entradas[0].valor?(100-(i-e.entradas[e.entradas.length-1].valor)/d).toFixed(2):0);for(let f=0;f<e.entradas.length;f++){let b=parseFloat(e.entradas[f].valor);if("LONG"===e.tipo){if(0==f||f===e.entradas.length-1){if(i<=b){l=f;break}if(f===e.entradas.length-1&&i>b){l=1e3;break}continue}if(i>=parseFloat(e.entradas[f-1].valor)&&i<=b){l=f;break}}else if("SHORT"===e.tipo){if(0==f||f===e.entradas.length-1){if(i>=b){l=f;break}if(f===e.entradas.length-1&&i<b){l=1e3;break}continue}if(i<=parseFloat(e.entradas[f-1].valor)&&i>=b){l=f;break}}}this.sinaisList[r].indexPricePosition=l;try{this.sinaisList[r].indexPricePosition>=1&&-1===this.sinaisBloqueadosList.indexOf(e.id)&&this.coinCandleWatcherMap[e.id].update(e)}catch(f){}}}),this.sortWatcherList(),this.sortWatcherEntradaList())}sortWatcherEntradaList(){this.watchersEntradaList=[],this.sinaisList.forEach(r=>{r.indexPricePosition>=1&&this.watchersEntradaList.push(r)}),this.watchersEntradaList.sort((r,i)=>{let l=0;return l=r.indexPricePosition>0?r.indexPricePosition-i.indexPricePosition:-1,l||r.priceCoinPercentage-i.priceCoinPercentage})}castPrice(e){return parseFloat(e)}novoSinal(){let e=zc().format("YYYY-MM-DD");this.editandoSinalIdx=-1,this.sinalModel={data:e,tipo:null,entradas:[]};let r=["Entrada","40%","60%","80%","100%"];for(let i=0;i<5;i++){let l=Object.assign({},this.entradaModel);l.descricao=r[i],this.sinalModel.entradas.push(l)}this.showFormNovoSinal=!0,window.scrollTo(0,0)}loadSinaisComprados(){this.sinaisCompradosObservable=this.db.object("/sinais-comprados/"+this.AuthService.userData.uid).valueChanges(),this.sinaisCompradosObservable.subscribe(r=>{if(r){try{for(let l in r)if(!this.sinaisCompradosMap[l]){let d=this.sinaisMap[l];new Notification("Binace watcher",{body:`Sinal comprado ${d.moeda}::${d.tipo}`,icon:"assets/bot.png"})}}catch(l){}this.sinaisCompradosMap=r}else this.sinaisCompradosMap={}})}loadSinaisList(){this.sinaisFirebaseObservable=this.db.list("/sinais").valueChanges(),this.sinaisFirebaseObservable.subscribe(e=>{this.sinaisList=e,this.coinNameList=this.sinaisList.map(r=>r.moeda),this.sinaisList&&this.sinaisList.length>0&&this.sinaisList.forEach(r=>{if(this.sinaisMap[r.id]||(this.sinaisMap[r.id]=r,this.coinCandleWatcherMap[r.id]=new Ul(r,this.http,this)),r.entradas&&r.entradas.length>0){let i=parseFloat(r.entradas[0].valor),l=parseFloat(r.entradas[1].valor);if(r.sugestao="LONG"===r.tipo?i+(l-i)/4:i-(i-l)/4,r.sugestao){let d=r.entradas[r.entradas.length-1].valor,f=d.indexOf(".")-1,m=d.substr(f).length;r.sugestao=r.sugestao.toFixed(m)}}}),this.loadSinaisFavoritos(),this.updatePricePositionOnSinais()})}sortWatcherList(){this.sinaisList.sort((e,r)=>{let i=zc(e.data).toDate().getTime(),l=zc(r.data).toDate().getTime(),d=-10;i==l?d=0:i>l?d=-1:i<l&&(d=1);let f=e.moeda.localeCompare(r.moeda);return d||f})}salvarEntrada(){let e=Object.assign({},this.sinalModel);if(!e.moeda)return void alert("Moeda inv\xe1lida");if(e.moeda=e.moeda.toUpperCase().trim(),-1==e.moeda.indexOf("USDT")&&(e.moeda+="USDT"),!this.PriceCoinMap[e.moeda])return void alert("Moeda inv\xe1lida");if(!e.tipo)return void alert("Tipo inv\xe1lido");e.entradas.length>0&&e.entradas.forEach(i=>{i.valor=i.valor.trim()});let r=e.id?e.id:"_"+Math.random().toString().replace(".","");e.id=r,this.db.object("/sinais/"+r).set(e).then(()=>{this.showFormNovoSinal=!1})}updateEntrada(e){this.db.object("/sinais/"+e.id).set(e).then(()=>{})}editarSinal(e,r){this.editandoSinalIdx=r,this.sinalModel=Object.assign({},e),this.showFormNovoSinal=!0,window.scrollTo(0,0)}excluirSinal(e,r){var i=this;return(0,$e.Z)(function*(){if(window.confirm("Realmente deseja excluir o sinal?")){try{i.coinCandleWatcherMap[e.id].stop(),delete i.coinCandleWatcherMap[e.id]}catch(l){}yield i.db.object("/sinais/"+e.id).remove()}})()}playAlert(){notificationAudio.play()}toggleAlcancado(e,r){r.alcancado=!r.alcancado||!r.alcancado,this.updateEntrada(e)}togglePinWatcher(e){var r=this;return(0,$e.Z)(function*(){let i=r.sinaisIDPinnedList.indexOf(e.id);if(i>-1){r.sinaisIDPinnedList.splice(i,1);for(let d=0;d<r.sinaisPinnedList.length;d++)if(r.sinaisPinnedList[d].id===e.id){r.sinaisPinnedList.splice(d,1);break}}else r.sinaisIDPinnedList.push(e.id),r.sinaisPinnedList.push(e);r.db.list("/favoritos").set(r.AuthService.userData.uid,r.sinaisIDPinnedList).then(()=>{}).catch(d=>{console.error(d)})})()}loadSinaisFavoritos(){this.sinaisPinnedList=[],this.db.list("/favoritos/"+this.AuthService.userData.uid).query.once("value").then(e=>{let r=e.val();r&&(this.sinaisIDPinnedList=r,this.sinaisIDPinnedList.forEach(i=>{this.sinaisList.forEach(l=>{l.id===i&&this.sinaisPinnedList.push(l)})}))})}toggleSinalBloqueado(e){var r=this;return(0,$e.Z)(function*(){r.configuracaoRobo.sinaisBloqueadosList||(r.configuracaoRobo.sinaisBloqueadosList=[]);let i=r.configuracaoRobo.sinaisBloqueadosList.indexOf(e.id);i>-1?r.configuracaoRobo.sinaisBloqueadosList.splice(i,1):r.configuracaoRobo.sinaisBloqueadosList.push(e.id),yield r.salvarConfiguracacaoRobo()})()}copyEntry(e){this.canCopyClipboard?window.navigator.clipboard.writeText(e.toString()).then(function(){window.toastr.success(":D",`Entrada ${e} copiada!`)},function(r){window.toastr.error("Erro","N\xe3o \xe9 poss\xedvel copiar a entrada")}):window.toastr.error("Erro","N\xe3o \xe9 poss\xedvel copiar a entrada")}openModalLogin(){this.config.backdrop="static",this.config.keyboard=!1,this.modalService.open(this.modalLogin,{centered:!0}).result.then(e=>{},e=>{})}sigin(e,r,i){this.AuthService.SignIn(e.trim(),r).then(()=>{this.startPriceWatcher(),this.loadSinaisList(),this.checkBinaceApiKey(),i&&i.close()}).catch(l=>{alert("Usu\xe1rio ou senha inv\xe1lido")})}submitSeach(e,r,i,l){13==e.keyCode&&this.sigin(r,i,l)}signOut(){this.AuthService.SignOut()}submitForm(e,r){13==r.keyCode&&e.submit()}loadConfiguracaoRobo(){var e;this.sinaisPinnedList=[],this.configuracaoRoboObservable=this.db.object("/configuracao-robo/"+this.AuthService.userData.uid).valueChanges(),null===(e=this.configuracaoRoboObservable)||void 0===e||e.subscribe(r=>{r&&(this.configuracaoRobo=r,this.configuracaoRobo.sinaisBloqueadosList?this.sinaisBloqueadosList=this.configuracaoRobo.sinaisBloqueadosList:(this.configuracaoRobo.sinaisBloqueadosList=[],this.configuracaoRobo.sinaisBloqueadosList=[]))})}openModalConfiguracaoRobo(){this.modalService.open(this.modalConfiguracaoRobo,{centered:!0}).result.then(e=>{},e=>{})}salvarConfiguracacaoRobo(e){var r=this;return(0,$e.Z)(function*(){let i=Object.assign({},r.configuracaoRobo);i.valorEntradaUsdt=parseFloat(i.valorEntradaUsdt),i.maximoRobosAtivos=parseInt(i.maximoRobosAtivos),i.id=r.AuthService.userData.uid,yield r.db.object("/configuracao-robo/"+r.AuthService.userData.uid).set(i),e&&(window.toastr.success(":D","Configura\xe7\xe3o salva!"),e&&e.close())})()}checkBinaceApiKey(){let e=window.localStorage.getItem("apiKey"),r=window.localStorage.getItem("apiSecret");!e&&!r&&this.openModalBinanceApiKey()}openModalBinanceApiKey(){this.modalService.open(this.modalBinanceApiKey,{centered:!0}).result.then(e=>{e&&this.binanceModel.apiKey&&this.binanceModel.apiSecret&&(window.localStorage.setItem("apiKey",this.binanceModel.apiKey.trim()),window.localStorage.setItem("apiSecret",this.binanceModel.apiSecret.trim()),window.toastr.success("Chaves salvas!","Sucesso!"))},e=>{})}removerAlerta(e){this.alertaEntradasList.splice(e,1),window.localStorage.setItem("alerta_list",JSON.stringify(this.alertaEntradasList))}removerTodosAlerta(){this.alertaEntradasList=[],window.localStorage.setItem("alerta_list",JSON.stringify([]))}acionarAlerta(e){let r=this.sinaisBloqueadosList.indexOf(e.sinal.id)>-1,i=this.alertaEntradasList.filter(d=>d.id==e.id);i.length>0||r||(0===i.length&&this.alertaEntradasList.splice(0,0,e),"lista_sugestao_compra"!==this.listView&&(this.listView="lista_sugestao_compra"),window.localStorage.setItem("alerta_list",JSON.stringify(this.alertaEntradasList)),window.document.hasFocus())||(this.playAlert(),new Notification("Binace watcher",{body:`Poss\xedvel compra em ${e.sinal.moeda}::${e.sinal.tipo}`,icon:"assets/bot.png"}))}openModalConfiguracaoMACD(){this.config.backdrop="static",this.config.keyboard=!1,this.modalAberto=!0;let e=window.localStorage.getItem("macdInterval")?parseInt(window.localStorage.getItem("macdInterval")):5,r=window.localStorage.getItem("macdLimit")?parseInt(window.localStorage.getItem("macdLimit")):52;this.macdModel.interval=e,this.macdModel.limit=r,this.modalService.open(this.modalAlertaEntrada,{centered:!0}).result.then(i=>{this.modalAberto=!1,i&&(window.localStorage.setItem("macdInterval",this.macdModel.interval.toString()),window.localStorage.setItem("macdLimit",this.macdModel.limit.toString()),window.toastr.success("OK!","Configura\xe7\xe3o salva"))},i=>{this.modalAberto=!1})}setNextValueEntrada(e,r){e.valor&&this.sinalModel.entradas[r+1]&&(this.sinalModel.entradas[r+1].valor=e.valor)}comprarAlerta(e){let r=window.localStorage.getItem("apiKey"),i=window.localStorage.getItem("apiSecret");r&&i?new R0(this.sinaisMap[e.id],this.configuracaoRobo):window.toastr.error("Erro","Sem configura\xe7\xe3o da binance")}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(hT),a.Y36(DH),a.Y36(DB),a.Y36(PO),a.Y36(a8))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-root"]],viewQuery:function(e,r){if(1&e&&(a.Gf(U7,5),a.Gf(H7,5),a.Gf($7,5),a.Gf(j7,5)),2&e){let i;a.iGM(i=a.CRH())&&(r.modalLogin=i.first),a.iGM(i=a.CRH())&&(r.modalConfiguracaoRobo=i.first),a.iGM(i=a.CRH())&&(r.modalBinanceApiKey=i.first),a.iGM(i=a.CRH())&&(r.modalAlertaEntrada=i.first)}},decls:40,vars:17,consts:[[1,"navbar","navbar-expand-md","navbar-dark","fixed-top","bg-dark"],[1,"container"],["class","text-center",4,"ngIf"],[4,"ngIf"],["role","main",1,"",2,"margin-top","100px"],[1,"h-100"],["class","col-md-8 col-lg-6",4,"ngIf"],[1,"row","h-100"],[1,"col-2"],[1,"mb-3"],[1,"form-control",3,"ngModel","ngModelChange"],[3,"value"],[2,"overflow-y","scroll","max-height","80vh",3,"hidden"],[1,"row","ml-3"],["class","card w-100",3,"ngClass",4,"ngFor","ngForOf"],["class","btn btn-danger btn-sm",3,"click",4,"ngIf"],["class","text-white text-center",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-5",2,"height","85vh"],[3,"symbols"],["modalLogin",""],["modalConfiguracaoRobo",""],["modalBinanceApiKey",""],["modalAlertaEntrada",""],[1,"text-center"],[1,"btn","btn-success","my-2",3,"click"],[1,"btn","btn-link","text-white",3,"click"],[1,"fa","fa-cogs","fa-2x"],[1,"btn","btn-link","text-danger",3,"click"],[1,"fa","fa-sign-out","fa-2x"],[1,"col-md-8","col-lg-6"],["for","",1,"form-label","text-white"],["type","date","placeholder","First name","aria-label","First name",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","","aria-label","First name",1,"form-control","text-uppercase",3,"ngModel","ngModelChange"],["aria-label","Default select example",1,"form-control","form-select",3,"ngModel","ngModelChange"],["value","LONG"],["value","SHORT"],["class","row",4,"ngFor","ngForOf"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"row"],[1,"col"],["type","text","placeholder","Valor","aria-label","Valor",1,"form-control",3,"ngModel","ngModelChange","blur"],["type","text","placeholder","Descri\xe7\xe3o","aria-label","descri\xe7\xe3o",1,"form-control",3,"ngModel","ngModelChange"],[1,"card","w-100",3,"ngClass"],[1,"card-body"],["title","Rob\xf4 bloqueado",1,"mr-2","clickable","fa",2,"color","gray",3,"ngClass","click"],[1,"card-title"],[1,"card-subtitle","mb-2",3,"ngClass"],[1,"price-list"],["style"," ",4,"ngFor","ngForOf"],[1,"float-left"],[1,"btn","btn-button","btn-sm","btn-success","mr-3",3,"click"],[1,"float-right"],[1,"btn","btn-link",3,"click"],[1,"fa","fa-pencil"],[1,"fa","fa-trash"],["class","ml-4",4,"ngIf"],[1,"clickable","fa",3,"ngClass","click"],[1,"clickable",3,"click"],[1,"ml-4"],[1,"fa","fa-caret-right","text-success"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"text-white","text-center"],[1,"card"],[1,"card-subtitle","mb-2","text-muted"],[3,"ngClass"],[1,"btn","btn-button","btn-sm","btn-danger",3,"click"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],[1,"modal-body"],[1,""],["formLogin",""],[1,"form-group"],["type","text","placeholder","Username","required","",1,"form-control"],["email",""],[1,"input-group"],["placeholder","Password","required","",1,"form-control",3,"type","keydown"],["userPassword",""],[1,"input-group-append"],[1,"input-group-text","clickable",3,"click"],[1,"fa",3,"ngClass"],["type","submit","value","Login",1,"btn","btn-primary",3,"click"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["type","text","placeholder","valorEntradaUsdt","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","maximoRobosAtivos","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-check","mt-3","mb-3"],["type","checkbox","value","","id","defaultCheck1",1,"form-check-input",3,"ngModel","ngModelChange"],["for","defaultCheck1",1,"form-check-label"],["type","text","placeholder","","required","",1,"form-control",3,"ngModel","ngModelChange"],["id","",1,"modal-title"],["type","text","placeholder","","OnlyNumber","true","required","",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,r){1&e&&(a.TgZ(0,"nav",0),a.TgZ(1,"div",1),a.YNc(2,G7,3,0,"div",2),a.YNc(3,W7,5,0,"div",3),a.qZA(),a.qZA(),a.TgZ(4,"main",4),a.TgZ(5,"section",5),a.TgZ(6,"div",1),a.YNc(7,Z7,26,4,"div",6),a.qZA(),a.TgZ(8,"div",7),a.TgZ(9,"div",8),a.TgZ(10,"div",9),a.TgZ(11,"select",10),a.NdJ("ngModelChange",function(l){return r.listView=l}),a.TgZ(12,"option",11),a._uU(13,"Lista de sinais"),a.qZA(),a.TgZ(14,"option",11),a._uU(15,"Sugest\xe3o de compra"),a.qZA(),a.TgZ(16,"option",11),a._uU(17,"Sinais na entrada"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(18,"div",12),a.TgZ(19,"div",13),a.YNc(20,eW,23,11,"div",14),a.qZA(),a.qZA(),a.TgZ(21,"div",12),a.TgZ(22,"div",13),a.YNc(23,aW,20,11,"div",14),a.qZA(),a.qZA(),a.TgZ(24,"div",12),a.YNc(25,lW,2,0,"button",15),a.YNc(26,cW,2,0,"strong",16),a.YNc(27,gW,22,10,"ng-container",17),a.qZA(),a.qZA(),a.TgZ(28,"div",18),a._UZ(29,"candle-chart-comp",19),a.qZA(),a.TgZ(30,"div",18),a._UZ(31,"candle-chart-comp",19),a.qZA(),a.qZA(),a.qZA(),a.YNc(32,mW,23,2,"ng-template",null,20,a.W1O),a.YNc(34,_W,26,3,"ng-template",null,21,a.W1O),a.YNc(36,yW,22,2,"ng-template",null,22,a.W1O),a.YNc(38,vW,23,2,"ng-template",null,23,a.W1O),a.qZA()),2&e&&(a.xp6(2),a.Q6J("ngIf",r.AuthService.isLoggedIn),a.xp6(1),a.Q6J("ngIf",r.AuthService.isLoggedIn),a.xp6(4),a.Q6J("ngIf",r.showFormNovoSinal),a.xp6(4),a.Q6J("ngModel",r.listView),a.xp6(1),a.Q6J("value","lista_sinais"),a.xp6(2),a.Q6J("value","lista_sugestao_compra"),a.xp6(2),a.Q6J("value","lista_sinais_entrada"),a.xp6(2),a.Q6J("hidden","lista_sinais"!=r.listView),a.xp6(2),a.Q6J("ngForOf",r.sinaisList),a.xp6(1),a.Q6J("hidden","lista_sinais_entrada"!=r.listView),a.xp6(2),a.Q6J("ngForOf",r.watchersEntradaList),a.xp6(1),a.Q6J("hidden","lista_sugestao_compra"!=r.listView),a.xp6(1),a.Q6J("ngIf",r.alertaEntradasList.length>1),a.xp6(1),a.Q6J("ngIf",0===r.alertaEntradasList.length),a.xp6(1),a.Q6J("ngForOf",r.alertaEntradasList),a.xp6(2),a.Q6J("symbols",r.coinNameList.join(",")),a.xp6(2),a.Q6J("symbols","BTCUSDT"))},directives:[Fr,CS,hV,pO,vO,wO,rn,V7,hS,ho,ES,XP,B7],pipes:[gc],styles:[".text-white[_ngcontent-%COMP%]{color:#fff}.hidden[_ngcontent-%COMP%]{display:none}.text-red[_ngcontent-%COMP%]{color:#fff}.text-yellow[_ngcontent-%COMP%]{color:#ff0}.border-long[_ngcontent-%COMP%]{border-color:#28a745!important;border-width:10px}.clickable[_ngcontent-%COMP%]{cursor:pointer}.border-short[_ngcontent-%COMP%]{border-color:red;border-width:10px}.price-list[_ngcontent-%COMP%]{list-style:none;padding-left:10px}.shake-element[_ngcontent-%COMP%]{animation:shake .5s;animation-iteration-count:infinite}@keyframes shake{0%{transform:translate(1px,1px) rotate(0)}10%{transform:translate(-1px,-2px) rotate(-1deg)}20%{transform:translate(-3px) rotate(1deg)}30%{transform:translate(3px,2px) rotate(0)}40%{transform:translate(1px,-1px) rotate(1deg)}50%{transform:translate(-1px,2px) rotate(-1deg)}60%{transform:translate(-3px,1px) rotate(0)}70%{transform:translate(3px,1px) rotate(-1deg)}80%{transform:translate(-1px,-1px) rotate(1deg)}90%{transform:translate(1px,2px) rotate(0)}to{transform:translate(1px,-2px) rotate(-1deg)}}.slidecontainer[_ngcontent-%COMP%]{width:100%}.slider[_ngcontent-%COMP%]{-webkit-appearance:none;appearance:none;width:100%;height:25px;background:#d3d3d3;outline:none;opacity:.7;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:25px;height:25px;background:#04AA6D;cursor:pointer}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:25px;height:25px;background:#04AA6D;cursor:pointer}.slider-square[_ngcontent-%COMP%]{-webkit-appearance:none;width:100%;height:24px;background:#d3d3d3;outline:none;opacity:.7;transition:opacity .15s ease-in-out}"]}),n})();class CW{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new EW(t,this.dueTime,this.scheduler))}}class EW extends gr.L{constructor(t,e,r){super(t),this.dueTime=e,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(xW,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function xW(n){n.debouncedNext()}const h8="firebasestorage.googleapis.com",f8="storageBucket";class si extends Y.ZR{constructor(t,e){super(WO(t),`Firebase Storage: ${e} (${WO(t)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,si.prototype)}_codeEquals(t){return WO(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function WO(n){return"storage/"+n}function qO(){return new si("unknown","An unknown error occurred, please check the error payload for server response.")}function p8(){return new si("canceled","User canceled the upload/download.")}function g8(){return new si("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function gv(n){return new si("invalid-argument",n)}function m8(){return new si("app-deleted","The Firebase app was deleted.")}function _8(n){return new si("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function nE(n,t){return new si("invalid-format","String does not match format '"+n+"': "+t)}function rE(n){throw new si("internal-error","Internal error: "+n)}class $s{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let r;try{r=$s.makeFromUrl(t,e)}catch(i){return new $s(t,"")}if(""===r.path)return r;throw function(n){return new si("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(t)}static makeFromUrl(t,e){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function b(yt){yt.path_=decodeURIComponent(yt.path)}const I=e.replace(/[.]/g,"\\."),gt=[{regex:f,indices:{bucket:1,path:3},postModify:function(yt){"/"===yt.path.charAt(yt.path.length-1)&&(yt.path_=yt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${I}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:b},{regex:new RegExp(`^https?://${e===h8?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:b}];for(let yt=0;yt<gt.length;yt++){const jt=gt[yt],bn=jt.regex.exec(t);if(bn){let oi=bn[jt.indices.path];oi||(oi=""),r=new $s(bn[jt.indices.bucket],oi),jt.postModify(r);break}}if(null==r)throw function(n){return new si("invalid-url","Invalid URL '"+n+"'.")}(t);return r}}class VW{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function LS(n){return"string"==typeof n||n instanceof String}function y8(n){return ZO()&&n instanceof Blob}function ZO(){return"undefined"!=typeof Blob}function zO(n,t,e,r){if(r<t)throw gv(`Invalid value for '${n}'. Expected ${t} or greater.`);if(r>e)throw gv(`Invalid value for '${n}'. Expected ${e} or less.`)}function hh(n,t,e){let r=t;return null==e&&(r=`https://${t}`),`${e}://${r}/v0${n}`}function v8(n){const t=encodeURIComponent;let e="?";for(const r in n)n.hasOwnProperty(r)&&(e=e+(t(r)+"=")+t(n[r])+"&");return e=e.slice(0,-1),e}var Ip=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Ip||(Ip={})),Ip))();class GW{constructor(t,e,r,i,l,d,f,m,b,x,I){this.url_=t,this.method_=e,this.headers_=r,this.body_=i,this.successCodes_=l,this.additionalRetryCodes_=d,this.callback_=f,this.errorCallback_=m,this.timeout_=b,this.progressCallback_=x,this.connectionFactory_=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((V,G)=>{this.resolve_=V,this.reject_=G,this.start_()})}start_(){const e=(r,i)=>{const l=this.resolve_,d=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());!function(n){return void 0!==n}(m)?l():l(m)}catch(m){d(m)}else if(null!==f){const m=qO();m.serverResponse=f.getErrorText(),d(this.errorCallback_?this.errorCallback_(f,m):m)}else d(i.canceled?this.appDelete_?m8():p8():new si("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?e(0,new VS(!1,null,!0)):this.backoffId_=function(n,t,e){let r=1,i=null,l=null,d=!1,f=0;function m(){return 2===f}let b=!1;function x(...Ue){b||(b=!0,t.apply(null,Ue))}function I(Ue){i=setTimeout(()=>{i=null,n(G,m())},Ue)}function V(){l&&clearTimeout(l)}function G(Ue,...tt){if(b)return void V();if(Ue)return V(),void x.call(null,Ue,...tt);if(m()||d)return V(),void x.call(null,Ue,...tt);let gt;r<64&&(r*=2),1===f?(f=2,gt=0):gt=1e3*(r+Math.random()),I(gt)}let ne=!1;function we(Ue){ne||(ne=!0,V(),!b&&(null!==i?(Ue||(f=2),clearTimeout(i),I(0)):Ue||(f=1)))}return I(0),l=setTimeout(()=>{d=!0,we(!0)},e),we}((r,i)=>{if(i)return void r(!1,new VS(!1,null,!0));const l=this.connectionFactory_();this.pendingConnection_=l;const d=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&l.addUploadProgressListener(d),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&l.removeUploadProgressListener(d),this.pendingConnection_=null;const f=l.getErrorCode()===Ip.NO_ERROR,m=l.getStatus();if(!f||this.isRetryStatusCode_(m)){const x=l.getErrorCode()===Ip.ABORT;return void r(!1,new VS(!1,null,x))}const b=-1!==this.successCodes_.indexOf(m);r(!0,new VS(b,l))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(t){const e=t>=500&&t<600,i=-1!==[408,429].indexOf(t),l=-1!==this.additionalRetryCodes_.indexOf(t);return e||i||l}}class VS{constructor(t,e,r){this.wasSuccessCode=t,this.connection=e,this.canceled=!!r}}function QW(...n){const t="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==t){const e=new t;for(let r=0;r<n.length;r++)e.append(n[r]);return e.getBlob()}if(ZO())return new Blob(n);throw new si("unsupported-environment","This browser doesn't seem to support creating Blobs")}const wa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class YO{constructor(t,e){this.data=t,this.contentType=e||null}}function KO(n,t){switch(n){case wa.RAW:return new YO(b8(t));case wa.BASE64:case wa.BASE64URL:return new YO(w8(n,t));case wa.DATA_URL:return new YO(function(n){const t=new C8(n);return t.base64?w8(wa.BASE64,t.rest):function(n){let t;try{t=decodeURIComponent(n)}catch(e){throw nE(wa.DATA_URL,"Malformed data URL.")}return b8(t)}(t.rest)}(t),function(n){return new C8(n).contentType}(t))}throw qO()}function b8(n){const t=[];for(let e=0;e<n.length;e++){let r=n.charCodeAt(e);r<=127?t.push(r):r<=2047?t.push(192|r>>6,128|63&r):55296==(64512&r)?e<n.length-1&&56320==(64512&n.charCodeAt(e+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++e),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):t.push(239,191,189):56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function w8(n,t){switch(n){case wa.BASE64:{const i=-1!==t.indexOf("-"),l=-1!==t.indexOf("_");if(i||l)throw nE(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case wa.BASE64URL:{const i=-1!==t.indexOf("+"),l=-1!==t.indexOf("/");if(i||l)throw nE(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function(n){return atob(n)}(t)}catch(i){throw nE(n,"Invalid character found")}const r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}class C8{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw nE(wa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=e[1]||null;null!=r&&(this.base64=function(n,t){return n.length>=t.length&&n.substring(n.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}}class wu{constructor(t,e){let r=0,i="";y8(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,e){if(y8(this.data_)){const i=function(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}(this.data_,t,e);return null===i?null:new wu(i)}{const r=new Uint8Array(this.data_.buffer,t,e-t);return new wu(r,!0)}}static getBlob(...t){if(ZO()){const e=t.map(r=>r instanceof wu?r.data_:r);return new wu(QW.apply(null,e))}{const e=t.map(d=>LS(d)?KO(wa.RAW,d).data:d.data_);let r=0;e.forEach(d=>{r+=d.byteLength});const i=new Uint8Array(r);let l=0;return e.forEach(d=>{for(let f=0;f<d.length;f++)i[l++]=d[f]}),new wu(i,!0)}}uploadData(){return this.data_}}function QO(n){let t;try{t=JSON.parse(n)}catch(e){return null}return function(n){return"object"==typeof n&&!Array.isArray(n)}(t)?t:null}function E8(n){const t=n.lastIndexOf("/",n.length-2);return-1===t?n:n.slice(t+1)}function oq(n,t){return t}class co{constructor(t,e,r,i){this.server=t,this.local=e||t,this.writable=!!r,this.xform=i||oq}}let BS=null;function iE(){if(BS)return BS;const n=[];n.push(new co("bucket")),n.push(new co("generation")),n.push(new co("metageneration")),n.push(new co("name","fullPath",!0));const e=new co("name");e.xform=function(l,d){return function(n){return!LS(n)||n.length<2?n:E8(n)}(d)},n.push(e);const i=new co("size");return i.xform=function(l,d){return void 0!==d?Number(d):d},n.push(i),n.push(new co("timeCreated")),n.push(new co("updated")),n.push(new co("md5Hash",null,!0)),n.push(new co("cacheControl",null,!0)),n.push(new co("contentDisposition",null,!0)),n.push(new co("contentEncoding",null,!0)),n.push(new co("contentLanguage",null,!0)),n.push(new co("contentType",null,!0)),n.push(new co("metadata","customMetadata",!0)),BS=n,BS}function x8(n,t,e){const r=QO(t);return null===r?null:function(n,t,e){const r={type:"file"},i=e.length;for(let l=0;l<i;l++){const d=e[l];r[d.local]=d.xform(r,t[d.server])}return function(n,t){Object.defineProperty(n,"ref",{get:function(){const l=new $s(n.bucket,n.fullPath);return t._makeStorageReference(l)}})}(r,n),r}(n,r,e)}function JO(n,t){const e={},r=t.length;for(let i=0;i<r;i++){const l=t[i];l.writable&&(e[l.server]=n[l.local])}return JSON.stringify(e)}const D8="prefixes";class Cu{constructor(t,e,r,i){this.url=t,this.method=e,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Eu(n){if(!n)throw qO()}function US(n,t){return function(r,i){const l=x8(n,i,t);return Eu(null!==l),l}}function mv(n){return function(e,r){let i;return i=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?new si("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new si("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?function(n){return new si("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===e.getStatus()?function(n){return new si("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function sE(n){const t=mv(n);return function(r,i){let l=t(r,i);return 404===r.getStatus()&&(l=function(n){return new si("object-not-found","Object '"+n+"' does not exist.")}(n.path)),l.serverResponse=i.serverResponse,l}}function I8(n,t,e){const i=hh(t.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,f=new Cu(i,"GET",US(n,e),d);return f.errorHandler=sE(t),f}function gq(n,t,e,r,i){const l={};l.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(l.delimiter=e),r&&(l.pageToken=r),i&&(l.maxResults=i);const f=hh(t.bucketOnlyServerUrl(),n.host,n._protocol),b=n.maxOperationRetryTime,x=new Cu(f,"GET",function(n,t){return function(r,i){const l=function(n,t,e){const r=QO(e);return null===r?null:function(n,t,e){const r={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[D8])for(const i of e[D8]){const l=i.replace(/\/$/,""),d=n._makeStorageReference(new $s(t,l));r.prefixes.push(d)}if(e.items)for(const i of e.items){const l=n._makeStorageReference(new $s(t,i.name));r.items.push(l)}return r}(n,t,r)}(n,t,i);return Eu(null!==l),l}}(n,t.bucket),b);return x.urlParams=l,x.errorHandler=mv(t),x}function A8(n,t,e){const r=Object.assign({},e);return r.fullPath=n.path,r.size=t.size(),r.contentType||(r.contentType=function(n,t){return t&&t.type()||"application/octet-stream"}(0,t)),r}class HS{constructor(t,e,r,i){this.current=t,this.total=e,this.finalized=!!r,this.metadata=i||null}}function XO(n,t){let e=null;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Eu(!1)}return Eu(!!e&&-1!==(t||["active"]).indexOf(e)),e}const Eq={STATE_CHANGED:"state_changed"},uo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function e2(n){switch(n){case"running":case"pausing":case"canceling":return uo.RUNNING;case"paused":return uo.PAUSED;case"success":return uo.SUCCESS;case"canceled":return uo.CANCELED;case"error":default:return uo.ERROR}}class xq{constructor(t,e,r){if(function(n){return"function"==typeof n}(t)||null!=e||null!=r)this.next=t,this.error=null!=e?e:void 0,this.complete=null!=r?r:void 0;else{const l=t;this.next=l.next,this.error=l.error,this.complete=l.complete}}}function _v(n){return(...t)=>{Promise.resolve().then(()=>n(...t))}}class Tq extends class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ip.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ip.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ip.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,r,i){if(this.sent_)throw rE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==i)for(const l in i)i.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,i[l].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw rE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw rE("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}}getResponse(){if(!this.sent_)throw rE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw rE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}{initXhr(){this.xhr_.responseType="text"}}function fc(){return new Tq}class k8{constructor(t,e,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=r,this._mappings=iE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,l)=>{this._resolve=i,this._reject=l,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,r])=>{switch(this._state){case"running":t(e,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const r=function(n,t,e,r,i){const l=t.bucketOnlyServerUrl(),d=A8(t,r,i),f={name:d.fullPath},m=hh(l,n.host,n._protocol),x={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":d.contentType,"Content-Type":"application/json; charset=utf-8"},I=JO(d,e),ne=new Cu(m,"POST",function(we){let Ue;XO(we);try{Ue=we.getResponseHeader("X-Goog-Upload-URL")}catch(tt){Eu(!1)}return Eu(LS(Ue)),Ue},n.maxUploadRetryTime);return ne.urlParams=f,ne.headers=x,ne.body=I,ne.errorHandler=mv(t),ne}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,fc,t,e);this._request=i,i.getPromise().then(l=>{this._request=void 0,this._uploadUrl=l,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,r)=>{const i=function(n,t,e,r){const m=new Cu(e,"POST",function(b){const x=XO(b,["active","final"]);let I=null;try{I=b.getResponseHeader("X-Goog-Upload-Size-Received")}catch(G){Eu(!1)}I||Eu(!1);const V=Number(I);return Eu(!isNaN(V)),new HS(V,r.size(),"final"===x)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=mv(t),m}(this._ref.storage,this._ref._location,t,this._blob),l=this._ref.storage._makeRequest(i,fc,e,r);this._request=l,l.getPromise().then(d=>{d=d,this._request=void 0,this._updateProgress(d.current),this._needToFetchStatus=!1,d.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=262144*this._chunkMultiplier,e=new HS(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,l)=>{let d;try{d=function(n,t,e,r,i,l,d,f){const m=new HS(0,0);if(d?(m.current=d.current,m.total=d.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw new si("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const b=m.total-m.current;let x=b;i>0&&(x=Math.min(x,i));const I=m.current,ne={"X-Goog-Upload-Command":x===b?"upload, finalize":"upload","X-Goog-Upload-Offset":`${m.current}`},we=r.slice(I,I+x);if(null===we)throw g8();const gt=new Cu(e,"POST",function(yt,jt){const bn=XO(yt,["active","final"]),Xr=m.current+x,oi=r.size();let r2;return r2="final"===bn?US(t,l)(yt,jt):null,new HS(Xr,oi,"final"===bn,r2)},t.maxUploadRetryTime);return gt.headers=ne,gt.body=we.uploadData(),gt.progressCallback=f||null,gt.errorHandler=mv(n),gt}(this._ref._location,this._ref.storage,r,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const f=this._ref.storage._makeRequest(d,fc,i,l);this._request=f,f.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const r=I8(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,fc,t,e);this._request=i,i.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const r=function(n,t,e,r,i){const l=t.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"},m=function(){let gt="";for(let yt=0;yt<2;yt++)gt+=Math.random().toString().slice(2);return gt}();d["Content-Type"]="multipart/related; boundary="+m;const b=A8(t,r,i),x=JO(b,e),G=wu.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+x+"\r\n--"+m+"\r\nContent-Type: "+b.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===G)throw g8();const ne={name:b.fullPath},we=hh(l,n.host,n._protocol),tt=n.maxUploadRetryTime,ot=new Cu(we,"POST",US(n,e),tt);return ot.urlParams=ne,ot.headers=d,ot.body=G.uploadData(),ot.errorHandler=mv(t),ot}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,fc,t,e);this._request=i,i.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=p8(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=e2(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,r,i){const l=new xq(e||void 0,r||void 0,i||void 0);return this._addObserver(l),()=>{this._removeObserver(l)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(e2(this._state)){case uo.SUCCESS:_v(this._resolve.bind(null,this.snapshot))();break;case uo.CANCELED:case uo.ERROR:_v(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(e2(this._state)){case uo.RUNNING:case uo.PAUSED:t.next&&_v(t.next.bind(t,this.snapshot))();break;case uo.SUCCESS:t.complete&&_v(t.complete.bind(t))();break;case uo.CANCELED:case uo.ERROR:t.error&&_v(t.error.bind(t,this._error))();break;default:t.error&&_v(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class qm{constructor(t,e){this._service=t,this._location=e instanceof $s?e:$s.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new qm(t,e)}get root(){const t=new $s(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return E8(this._location.path)}get storage(){return this._service}get parent(){const t=function(n){if(0===n.length)return null;const t=n.lastIndexOf("/");return-1===t?"":n.slice(0,t)}(this._location.path);if(null===t)return null;const e=new $s(this._location.bucket,t);return new qm(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw _8(t)}}function O8(n,t,e){return t2.apply(this,arguments)}function t2(){return(t2=(0,$e.Z)(function*(n,t,e){const i=yield F8(n,{pageToken:e});t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&(yield O8(n,t,i.nextPageToken))})).apply(this,arguments)}function F8(n,t){null!=t&&"number"==typeof t.maxResults&&zO("options.maxResults",1,1e3,t.maxResults);const e=t||{},r=gq(n.storage,n._location,"/",e.pageToken,e.maxResults);return n.storage.makeRequestWithTokens(r,fc)}function Vq(n){n._throwIfRoot("getDownloadURL");const t=function(n,t,e){const i=hh(t.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,f=new Cu(i,"GET",function(n,t){return function(r,i){const l=x8(n,i,t);return Eu(null!==l),function(n,t,e,r){const i=QO(t);if(null===i||!LS(i.downloadTokens))return null;const l=i.downloadTokens;if(0===l.length)return null;const d=encodeURIComponent;return l.split(",").map(b=>{const I=n.fullPath;return hh("/b/"+d(n.bucket)+"/o/"+d(I),e,r)+v8({alt:"media",token:b})})[0]}(l,i,n.host,n._protocol)}}(n,e),d);return f.errorHandler=sE(t),f}(n.storage,n._location,iE());return n.storage.makeRequestWithTokens(t,fc).then(e=>{if(null===e)throw new si("no-download-url","The given file does not have any download URLs.");return e})}function L8(n,t){const e=function(n,t){const e=t.split("/").filter(r=>r.length>0).join("/");return 0===n.length?e:n+"/"+e}(n._location.path,t),r=new $s(n._location.bucket,e);return new qm(n.storage,r)}function V8(n,t){if(n instanceof n2){const e=n;if(null==e._bucket)throw new si("no-default-bucket","No default bucket found. Did you set the '"+f8+"' property when initializing the app?");const r=new qm(e,e._bucket);return null!=t?V8(r,t):r}return void 0!==t?L8(n,t):n}function $q(n,t){if(t&&function(n){return/^[A-Za-z]+:\/\//.test(n)}(t)){if(n instanceof n2)return function(n,t){return new qm(n,t)}(n,t);throw gv("To use ref(service, url), the first argument must be a Storage instance.")}return V8(n,t)}function B8(n,t){const e=null==t?void 0:t[f8];return null==e?null:$s.makeFromBucketSpec(e,n)}class n2{constructor(t,e,r,i,l){this.app=t,this._authProvider=e,this._appCheckProvider=r,this._url=i,this._firebaseVersion=l,this._bucket=null,this._host=h8,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?$s.makeFromBucketSpec(i,this._host):B8(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?$s.makeFromBucketSpec(this._url,t):B8(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){zO("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){zO("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,$e.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const r=yield e.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,$e.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new qm(this,t)}_makeRequest(t,e,r,i){if(this._deleted)return new VW(m8());{const l=function(n,t,e,r,i,l){const d=v8(n.urlParams),f=n.url+d,m=Object.assign({},n.headers);return function(n,t){t&&(n["X-Firebase-GMPID"]=t)}(m,t),function(n,t){null!==t&&t.length>0&&(n.Authorization="Firebase "+t)}(m,e),function(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(m,l),function(n,t){null!==t&&(n["X-Firebase-AppCheck"]=t)}(m,r),new GW(f,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(t,this._appId,r,i,e,this._firebaseVersion);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(t,e){var r=this;return(0,$e.Z)(function*(){const[i,l]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(t,e,i,l).getPromise()})()}}const U8="@firebase/storage";function j8(n,t){return $q(n=(0,Y.m9)(n),t)}(0,Vs._registerComponent)(new Ka.wA("storage",function(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new n2(e,r,i,t,Vs.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,Vs.registerVersion)(U8,"0.9.5",""),(0,Vs.registerVersion)(U8,"0.9.5","esm2017");class $S{constructor(t,e,r){this._delegate=t,this.task=e,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class G8{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new $S(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(r=>{if(t)return t(new $S(r,this,this._ref))},e)}on(t,e,r,i){let l;return e&&(l="function"==typeof e?d=>e(new $S(d,this,this._ref)):{next:e.next?d=>e.next(new $S(d,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,l,r||void 0,i||void 0)}}class W8{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new fh(t,this._service))}get items(){return this._delegate.items.map(t=>new fh(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class fh{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function(n,t){return L8(n,t)}(this._delegate,t);return new fh(e,this.storage)}get root(){return new fh(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new fh(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new G8(function(n,t,e){return function(n,t,e){return n._throwIfRoot("uploadBytesResumable"),new k8(n,new wu(t),e)}(n=(0,Y.m9)(n),t,e)}(this._delegate,t,e),this)}putString(t,e=wa.RAW,r){this._throwIfRoot("putString");const i=KO(e,t),l=Object.assign({},r);return null==l.contentType&&null!=i.contentType&&(l.contentType=i.contentType),new G8(new k8(this._delegate,new wu(i.data,!0),l),this)}listAll(){return function(n){return function(n){const t={prefixes:[],items:[]};return O8(n,t).then(()=>t)}(n=(0,Y.m9)(n))}(this._delegate).then(t=>new W8(t,this.storage))}list(t){return function(n,t){return F8(n=(0,Y.m9)(n),t)}(this._delegate,t||void 0).then(e=>new W8(e,this.storage))}getMetadata(){return function(n){return function(n){n._throwIfRoot("getMetadata");const t=I8(n.storage,n._location,iE());return n.storage.makeRequestWithTokens(t,fc)}(n=(0,Y.m9)(n))}(this._delegate)}updateMetadata(t){return function(n,t){return function(n,t){n._throwIfRoot("updateMetadata");const e=function(n,t,e,r){const l=hh(t.fullServerUrl(),n.host,n._protocol),f=JO(e,r),b=n.maxOperationRetryTime,x=new Cu(l,"PATCH",US(n,r),b);return x.headers={"Content-Type":"application/json; charset=utf-8"},x.body=f,x.errorHandler=sE(t),x}(n.storage,n._location,t,iE());return n.storage.makeRequestWithTokens(e,fc)}(n=(0,Y.m9)(n),t)}(this._delegate,t)}getDownloadURL(){return function(n){return Vq(n=(0,Y.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(n){return function(n){n._throwIfRoot("deleteObject");const t=function(n,t){const r=hh(t.fullServerUrl(),n.host,n._protocol),f=new Cu(r,"DELETE",function(m,b){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=sE(t),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(t,fc)}(n=(0,Y.m9)(n))}(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw _8(t)}}class q8{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(Z8(t))throw gv("ref() expected a child path but got a URL, use refFromURL instead.");return new fh(j8(this._delegate,t),this)}refFromURL(t){if(!Z8(t))throw gv("refFromURL() expected a full URL but got a child path, use ref() instead.");try{$s.makeFromUrl(t,this._delegate.host)}catch(e){throw gv("refFromUrl() expected a valid full URL but got an invalid one.")}return new fh(j8(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,r={}){!function(n,t,e,r={}){!function(n,t,e,r={}){n.host=`${t}:${e}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,Y.Sg)(i,n.app.options.projectId))}(n,t,e,r)}(this._delegate,t,e,r)}}function Z8(n){return/^[A-Za-z]+:\/\//.test(n)}function iZ(n,{instanceIdentifier:t}){const e=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:t});return new q8(e,r)}function z8(n){const t=function(n){return new zn.y(t=>{const e=d=>t.next(d);e(n.snapshot);const l=n.on("state_changed",e);return n.then(d=>{e(d),t.complete()},d=>{e(n.snapshot),(d=>{t.error(d)})(d)}),function(){l()}}).pipe(function(n,t=Yc.P){return e=>e.lift(new CW(n,t))}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,bt.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function jS(n){return{getDownloadURL:()=>(0,xt.of)(void 0).pipe(Yn.fc,mr(()=>n.getDownloadURL()),Yn.iC),getMetadata:()=>(0,xt.of)(void 0).pipe(Yn.fc,mr(()=>n.getMetadata()),Yn.iC),delete:()=>(0,un.D)(n.delete()),child:t=>jS(n.child(t)),updateMetadata:t=>(0,un.D)(n.updateMetadata(t)),put:(t,e)=>z8(n.put(t,e)),putString:(t,e,r)=>z8(n.putString(t,e,r)),list:t=>(0,un.D)(n.list(t)),listAll:()=>(0,un.D)(n.listAll())}}!function(n){const t={TaskState:uo,TaskEvent:Eq,StringFormat:wa,Storage:q8,Reference:fh};n.INTERNAL.registerComponent(new Ka.wA("storage-compat",iZ,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.13")}(BE.Z);const aZ=new a.OlP("angularfire2.storageBucket"),lZ=new a.OlP("angularfire2.storage.maxUploadRetryTime"),cZ=new a.OlP("angularfire2.storage.maxOperationRetryTime"),uZ=new a.OlP("angularfire2.storage.use-emulator");let dZ=(()=>{class n{constructor(e,r,i,l,d,f,m,b,x,I){const V=(0,vi.on)(e,d,r);this.storage=(0,vi.cc)(`${V.name}.storage.${i}`,"AngularFireStorage",V.name,()=>{const G=d.runOutsideAngular(()=>V.storage(i||void 0)),ne=x;return ne&&G.useEmulator(...ne),m&&G.setMaxUploadRetryTime(m),b&&G.setMaxOperationRetryTime(b),G},[m,b])}ref(e){return jS(this.storage.ref(e))}refFromURL(e){return jS(this.storage.refFromURL(e))}upload(e,r,i){return jS(this.storage.ref(e)).put(r,i)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(vi.Dh),a.LFG(vi.xv,8),a.LFG(aZ,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(Yn.HU),a.LFG(lZ,8),a.LFG(cZ,8),a.LFG(uZ,8),a.LFG(jg,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),hZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})(),fZ=(()=>{class n{constructor(){ew.Z.registerVersion("angularfire",Yn.q4.full,"gcs-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[dZ],imports:[hZ]}),n})();const pZ={apiKey:"AIzaSyBtM7cE86rnFziMJRWOgI6Btf2WbOFj5vE",authDomain:"binance-watcher-4ca0e.firebaseapp.com",databaseURl:"https://binance-watcher-4ca0e-default-rtdb.firebaseio.com/",projectId:"binance-watcher-4ca0e",storageBucket:"binance-watcher-4ca0e.appspot.com",messagingSenderId:"585627053132",appId:"1:585627053132:web:273c98cb792fe3e2d818e9"};let gZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n,bootstrap:[bW]}),n.\u0275inj=a.cJS({providers:[],imports:[[Op,yA,UV,L7,vi.hO.initializeApp(pZ),xH,W2,fZ]]}),n})();(0,a.G48)(),Oa().bootstrapModule(gZ).catch(n=>console.error(n))},2480:()=>{},3394:(Ve,me,O)=>{"use strict";O.d(me,{Z:()=>J});var a=O(3854),R=O(3910),k=O(8026),Q=O(5422);class ie{constructor(le,H){this._delegate=le,this.firebase=H,(0,k._addComponent)(le,new R.wA("app-compat",()=>this,"PUBLIC")),this.container=le.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(le){this._delegate.automaticDataCollectionEnabled=le}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(le=>{this._delegate.checkDestroyed(),le()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(le,H=k._DEFAULT_ENTRY_NAME){var Z;this._delegate.checkDestroyed();const de=this._delegate.container.getProvider(le);return!de.isInitialized()&&"EXPLICIT"===(null===(Z=de.getComponent())||void 0===Z?void 0:Z.instantiationMode)&&de.initialize(),de.getImmediate({identifier:H})}_removeServiceInstance(le,H=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(le).clearInstance(H)}_addComponent(le){(0,k._addComponent)(this._delegate,le)}_addOrOverwriteComponent(le){(0,k._addOrOverwriteComponent)(this._delegate,le)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ee=new a.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),P=function U(){const re=function(re){const le={},H={__esModule:!0,initializeApp:function(Re,Ae={}){const be=k.initializeApp(Re,Ae);if((0,a.r3)(le,be.name))return le[be.name];const ce=new re(be,H);return le[be.name]=ce,ce},app:de,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function(Re){const Ae=Re.name,be=Ae.replace("-compat","");if(k._registerComponent(Re)&&"PUBLIC"===Re.type){const ce=(Ee=de())=>{if("function"!=typeof Ee[be])throw ee.create("invalid-app-argument",{appName:Ae});return Ee[be]()};void 0!==Re.serviceProps&&(0,a.ZB)(ce,Re.serviceProps),H[be]=ce,re.prototype[be]=function(...Ee){return this._getService.bind(this,Ae).apply(this,Re.multipleInstances?Ee:[])}}return"PUBLIC"===Re.type?H[be]:null},removeApp:function(Re){delete le[Re]},useAsService:function(Re,Ae){return"serverAuth"===Ae?null:Ae},modularAPIs:k}};function de(Re){if(!(0,a.r3)(le,Re=Re||k._DEFAULT_ENTRY_NAME))throw ee.create("no-app",{appName:Re});return le[Re]}return H.default=H,Object.defineProperty(H,"apps",{get:function(){return Object.keys(le).map(Re=>le[Re])}}),de.App=re,H}(ie);return re.INTERNAL=Object.assign(Object.assign({},re.INTERNAL),{createFirebaseNamespace:U,extendNamespace:function(H){(0,a.ZB)(re,H)},createSubscribe:a.ne,ErrorFactory:a.LL,deepExtend:a.ZB}),re}(),N=new Q.Yd("@firebase/app-compat");if((0,a.jU)()&&void 0!==self.firebase){N.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const re=self.firebase.SDK_VERSION;re&&re.indexOf("LITE")>=0&&N.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const J=P;(0,k.registerVersion)("@firebase/app-compat","0.1.22",undefined)},8026:(Ve,me,O)=>{"use strict";O.r(me),O.d(me,{FirebaseError:()=>Q.ZR,SDK_VERSION:()=>rr,_DEFAULT_ENTRY_NAME:()=>ct,_addComponent:()=>We,_addOrOverwriteComponent:()=>Jt,_apps:()=>Fe,_clearComponents:()=>Xt,_components:()=>ke,_getProvider:()=>vt,_registerComponent:()=>Rt,_removeServiceInstance:()=>Ct,deleteApp:()=>Jn,getApp:()=>Qn,getApps:()=>Ke,initializeApp:()=>Rn,onLog:()=>hn,registerVersion:()=>pt,setLogLevel:()=>pn});var a=O(8239),R=O(3910),k=O(5422),Q=O(3854);class ie{constructor(qe){this.container=qe}getPlatformInfoString(){return this.container.getProviders().map(mt=>{if(function(rt){const qe=rt.getComponent();return"VERSION"===(null==qe?void 0:qe.type)}(mt)){const Mt=mt.getImmediate();return`${Mt.library}/${Mt.version}`}return null}).filter(mt=>mt).join(" ")}}const ee="@firebase/app",L="0.7.21",U=new k.Yd("@firebase/app"),ct="[DEFAULT]",Oe={[ee]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Fe=new Map,ke=new Map;function We(rt,qe){try{rt.container.addComponent(qe)}catch(mt){U.debug(`Component ${qe.name} failed to register with FirebaseApp ${rt.name}`,mt)}}function Jt(rt,qe){rt.container.addOrOverwriteComponent(qe)}function Rt(rt){const qe=rt.name;if(ke.has(qe))return U.debug(`There were multiple attempts to register component ${qe}.`),!1;ke.set(qe,rt);for(const mt of Fe.values())We(mt,rt);return!0}function vt(rt,qe){const mt=rt.container.getProvider("heartbeat").getImmediate({optional:!0});return mt&&mt.triggerHeartbeat(),rt.container.getProvider(qe)}function Ct(rt,qe,mt=ct){vt(rt,qe).clearInstance(mt)}function Xt(){ke.clear()}const an=new Q.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class In{constructor(qe,mt,Mt){this._isDeleted=!1,this._options=Object.assign({},qe),this._config=Object.assign({},mt),this._name=mt.name,this._automaticDataCollectionEnabled=mt.automaticDataCollectionEnabled,this._container=Mt,this.container.addComponent(new R.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(qe){this.checkDestroyed(),this._automaticDataCollectionEnabled=qe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(qe){this._isDeleted=qe}checkDestroyed(){if(this.isDeleted)throw an.create("app-deleted",{appName:this._name})}}const rr="9.6.11";function Rn(rt,qe={}){"object"!=typeof qe&&(qe={name:qe});const mt=Object.assign({name:ct,automaticDataCollectionEnabled:!1},qe),Mt=mt.name;if("string"!=typeof Mt||!Mt)throw an.create("bad-app-name",{appName:String(Mt)});const Lt=Fe.get(Mt);if(Lt){if((0,Q.vZ)(rt,Lt.options)&&(0,Q.vZ)(mt,Lt.config))return Lt;throw an.create("duplicate-app",{appName:Mt})}const en=new R.H0(Mt);for(const ae of ke.values())en.addComponent(ae);const he=new In(rt,mt,en);return Fe.set(Mt,he),he}function Qn(rt=ct){const qe=Fe.get(rt);if(!qe)throw an.create("no-app",{appName:rt});return qe}function Ke(){return Array.from(Fe.values())}function Jn(rt){return $n.apply(this,arguments)}function $n(){return($n=(0,a.Z)(function*(rt){const qe=rt.name;Fe.has(qe)&&(Fe.delete(qe),yield Promise.all(rt.container.getProviders().map(mt=>mt.delete())),rt.isDeleted=!0)})).apply(this,arguments)}function pt(rt,qe,mt){var Mt;let Lt=null!==(Mt=Oe[rt])&&void 0!==Mt?Mt:rt;mt&&(Lt+=`-${mt}`);const en=Lt.match(/\s|\//),he=qe.match(/\s|\//);if(en||he){const ae=[`Unable to register library "${Lt}" with version "${qe}":`];return en&&ae.push(`library name "${Lt}" contains illegal characters (whitespace or "/")`),en&&he&&ae.push("and"),he&&ae.push(`version name "${qe}" contains illegal characters (whitespace or "/")`),void U.warn(ae.join(" "))}Rt(new R.wA(`${Lt}-version`,()=>({library:Lt,version:qe}),"VERSION"))}function hn(rt,qe){if(null!==rt&&"function"!=typeof rt)throw an.create("invalid-log-argument");(0,k.Am)(rt,qe)}function pn(rt){(0,k.Ub)(rt)}const fr="firebase-heartbeat-store";let cr=null;function Dn(){return cr||(cr=(0,Q.X3)("firebase-heartbeat-database",1,(rt,qe)=>{switch(qe){case 0:rt.createObjectStore(fr)}}).catch(rt=>{throw an.create("storage-open",{originalErrorMessage:rt.message})})),cr}function Cn(){return(Cn=(0,a.Z)(function*(rt){try{return(yield Dn()).transaction(fr).objectStore(fr).get(Nr(rt))}catch(qe){throw an.create("storage-get",{originalErrorMessage:qe.message})}})).apply(this,arguments)}function it(rt,qe){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,a.Z)(function*(rt,qe){try{const Mt=(yield Dn()).transaction(fr,"readwrite");return yield Mt.objectStore(fr).put(qe,Nr(rt)),Mt.complete}catch(mt){throw an.create("storage-set",{originalErrorMessage:mt.message})}})).apply(this,arguments)}function Nr(rt){return`${rt.name}!${rt.options.appId}`}class Nt{constructor(qe){this.container=qe,this._heartbeatsCache=null;const mt=this.container.getProvider("app").getImmediate();this._storage=new cn(mt),this._heartbeatsCachePromise=this._storage.read().then(Mt=>(this._heartbeatsCache=Mt,Mt))}triggerHeartbeat(){var qe=this;return(0,a.Z)(function*(){const Mt=qe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Lt=pr();if(null===qe._heartbeatsCache&&(qe._heartbeatsCache=yield qe._heartbeatsCachePromise),qe._heartbeatsCache.lastSentHeartbeatDate!==Lt&&!qe._heartbeatsCache.heartbeats.some(en=>en.date===Lt))return qe._heartbeatsCache.heartbeats.push({date:Lt,agent:Mt}),qe._heartbeatsCache.heartbeats=qe._heartbeatsCache.heartbeats.filter(en=>{const he=new Date(en.date).valueOf();return Date.now()-he<=2592e6}),qe._storage.overwrite(qe._heartbeatsCache)})()}getHeartbeatsHeader(){var qe=this;return(0,a.Z)(function*(){if(null===qe._heartbeatsCache&&(yield qe._heartbeatsCachePromise),null===qe._heartbeatsCache||0===qe._heartbeatsCache.heartbeats.length)return"";const mt=pr(),{heartbeatsToSend:Mt,unsentEntries:Lt}=function(rt,qe=1024){const mt=[];let Mt=rt.slice();for(const Lt of rt){const en=mt.find(he=>he.agent===Lt.agent);if(en){if(en.dates.push(Lt.date),St(mt)>qe){en.dates.pop();break}}else if(mt.push({agent:Lt.agent,dates:[Lt.date]}),St(mt)>qe){mt.pop();break}Mt=Mt.slice(1)}return{heartbeatsToSend:mt,unsentEntries:Mt}}(qe._heartbeatsCache.heartbeats),en=(0,Q.L)(JSON.stringify({version:2,heartbeats:Mt}));return qe._heartbeatsCache.lastSentHeartbeatDate=mt,Lt.length>0?(qe._heartbeatsCache.heartbeats=Lt,yield qe._storage.overwrite(qe._heartbeatsCache)):(qe._heartbeatsCache.heartbeats=[],qe._storage.overwrite(qe._heartbeatsCache)),en})()}}function pr(){return(new Date).toISOString().substring(0,10)}class cn{constructor(qe){this.app=qe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,a.Z)(function*(){return!!(0,Q.hl)()&&(0,Q.eu)().then(()=>!0).catch(()=>!1)})()}read(){var qe=this;return(0,a.Z)(function*(){return(yield qe._canUseIndexedDBPromise)&&(yield function(rt){return Cn.apply(this,arguments)}(qe.app))||{heartbeats:[]}})()}overwrite(qe){var mt=this;return(0,a.Z)(function*(){var Mt;if(yield mt._canUseIndexedDBPromise){const en=yield mt.read();return it(mt.app,{lastSentHeartbeatDate:null!==(Mt=qe.lastSentHeartbeatDate)&&void 0!==Mt?Mt:en.lastSentHeartbeatDate,heartbeats:qe.heartbeats})}})()}add(qe){var mt=this;return(0,a.Z)(function*(){var Mt;if(yield mt._canUseIndexedDBPromise){const en=yield mt.read();return it(mt.app,{lastSentHeartbeatDate:null!==(Mt=qe.lastSentHeartbeatDate)&&void 0!==Mt?Mt:en.lastSentHeartbeatDate,heartbeats:[...en.heartbeats,...qe.heartbeats]})}})()}}function St(rt){return(0,Q.L)(JSON.stringify({version:2,heartbeats:rt})).length}Rt(new R.wA("platform-logger",qe=>new ie(qe),"PRIVATE")),Rt(new R.wA("heartbeat",qe=>new Nt(qe),"PRIVATE")),pt(ee,L,""),pt(ee,L,"esm2017"),pt("fire-js","")},3910:(Ve,me,O)=>{"use strict";O.d(me,{wA:()=>k,H0:()=>L,zt:()=>ie});var a=O(8239),R=O(3854);class k{constructor(P,N,A){this.name=P,this.instanceFactory=N,this.type=A,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(P){return this.instantiationMode=P,this}setMultipleInstances(P){return this.multipleInstances=P,this}setServiceProps(P){return this.serviceProps=P,this}setInstanceCreatedCallback(P){return this.onInstanceCreated=P,this}}const Q="[DEFAULT]";class ie{constructor(P,N){this.name=P,this.container=N,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(P){const N=this.normalizeInstanceIdentifier(P);if(!this.instancesDeferred.has(N)){const A=new R.BH;if(this.instancesDeferred.set(N,A),this.isInitialized(N)||this.shouldAutoInitialize())try{const B=this.getOrInitializeService({instanceIdentifier:N});B&&A.resolve(B)}catch(B){}}return this.instancesDeferred.get(N).promise}getImmediate(P){var N;const A=this.normalizeInstanceIdentifier(null==P?void 0:P.identifier),B=null!==(N=null==P?void 0:P.optional)&&void 0!==N&&N;if(!this.isInitialized(A)&&!this.shouldAutoInitialize()){if(B)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:A})}catch(z){if(B)return null;throw z}}getComponent(){return this.component}setComponent(P){if(P.name!==this.name)throw Error(`Mismatching Component ${P.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=P,this.shouldAutoInitialize()){if("EAGER"===P.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:Q})}catch(N){}for(const[N,A]of this.instancesDeferred.entries()){const B=this.normalizeInstanceIdentifier(N);try{const z=this.getOrInitializeService({instanceIdentifier:B});A.resolve(z)}catch(z){}}}}clearInstance(P=Q){this.instancesDeferred.delete(P),this.instancesOptions.delete(P),this.instances.delete(P)}delete(){var P=this;return(0,a.Z)(function*(){const N=Array.from(P.instances.values());yield Promise.all([...N.filter(A=>"INTERNAL"in A).map(A=>A.INTERNAL.delete()),...N.filter(A=>"_delete"in A).map(A=>A._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(P=Q){return this.instances.has(P)}getOptions(P=Q){return this.instancesOptions.get(P)||{}}initialize(P={}){const{options:N={}}=P,A=this.normalizeInstanceIdentifier(P.instanceIdentifier);if(this.isInitialized(A))throw Error(`${this.name}(${A}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const B=this.getOrInitializeService({instanceIdentifier:A,options:N});for(const[z,J]of this.instancesDeferred.entries())A===this.normalizeInstanceIdentifier(z)&&J.resolve(B);return B}onInit(P,N){var A;const B=this.normalizeInstanceIdentifier(N),z=null!==(A=this.onInitCallbacks.get(B))&&void 0!==A?A:new Set;z.add(P),this.onInitCallbacks.set(B,z);const J=this.instances.get(B);return J&&P(J,B),()=>{z.delete(P)}}invokeOnInitCallbacks(P,N){const A=this.onInitCallbacks.get(N);if(A)for(const B of A)try{B(P,N)}catch(z){}}getOrInitializeService({instanceIdentifier:P,options:N={}}){let A=this.instances.get(P);if(!A&&this.component&&(A=this.component.instanceFactory(this.container,{instanceIdentifier:(U=P,U===Q?void 0:U),options:N}),this.instances.set(P,A),this.instancesOptions.set(P,N),this.invokeOnInitCallbacks(A,P),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,P,A)}catch(B){}var U;return A||null}normalizeInstanceIdentifier(P=Q){return this.component?this.component.multipleInstances?P:Q:P}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class L{constructor(P){this.name=P,this.providers=new Map}addComponent(P){const N=this.getProvider(P.name);if(N.isComponentSet())throw new Error(`Component ${P.name} has already been registered with ${this.name}`);N.setComponent(P)}addOrOverwriteComponent(P){this.getProvider(P.name).isComponentSet()&&this.providers.delete(P.name),this.addComponent(P)}getProvider(P){if(this.providers.has(P))return this.providers.get(P);const N=new ie(P,this);return this.providers.set(P,N),N}getProviders(){return Array.from(this.providers.values())}}},5422:(Ve,me,O)=>{"use strict";O.d(me,{in:()=>R,Yd:()=>ee,Ub:()=>L,Am:()=>U});const a=[];var R=(()=>{return(P=R||(R={}))[P.DEBUG=0]="DEBUG",P[P.VERBOSE=1]="VERBOSE",P[P.INFO=2]="INFO",P[P.WARN=3]="WARN",P[P.ERROR=4]="ERROR",P[P.SILENT=5]="SILENT",R;var P})();const k={debug:R.DEBUG,verbose:R.VERBOSE,info:R.INFO,warn:R.WARN,error:R.ERROR,silent:R.SILENT},Q=R.INFO,ie={[R.DEBUG]:"log",[R.VERBOSE]:"log",[R.INFO]:"info",[R.WARN]:"warn",[R.ERROR]:"error"},q=(P,N,...A)=>{if(N<P.logLevel)return;const B=(new Date).toISOString(),z=ie[N];if(!z)throw new Error(`Attempted to log a message with an invalid logType (value: ${N})`);console[z](`[${B}]  ${P.name}:`,...A)};class ee{constructor(N){this.name=N,this._logLevel=Q,this._logHandler=q,this._userLogHandler=null,a.push(this)}get logLevel(){return this._logLevel}set logLevel(N){if(!(N in R))throw new TypeError(`Invalid value "${N}" assigned to \`logLevel\``);this._logLevel=N}setLogLevel(N){this._logLevel="string"==typeof N?k[N]:N}get logHandler(){return this._logHandler}set logHandler(N){if("function"!=typeof N)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=N}get userLogHandler(){return this._userLogHandler}set userLogHandler(N){this._userLogHandler=N}debug(...N){this._userLogHandler&&this._userLogHandler(this,R.DEBUG,...N),this._logHandler(this,R.DEBUG,...N)}log(...N){this._userLogHandler&&this._userLogHandler(this,R.VERBOSE,...N),this._logHandler(this,R.VERBOSE,...N)}info(...N){this._userLogHandler&&this._userLogHandler(this,R.INFO,...N),this._logHandler(this,R.INFO,...N)}warn(...N){this._userLogHandler&&this._userLogHandler(this,R.WARN,...N),this._logHandler(this,R.WARN,...N)}error(...N){this._userLogHandler&&this._userLogHandler(this,R.ERROR,...N),this._logHandler(this,R.ERROR,...N)}}function L(P){a.forEach(N=>{N.setLogLevel(P)})}function U(P,N){for(const A of a){let B=null;N&&N.level&&(B=k[N.level]),A.userLogHandler=null===P?null:(z,J,...re)=>{const le=re.map(H=>{if(null==H)return null;if("string"==typeof H)return H;if("number"==typeof H||"boolean"==typeof H)return H.toString();if(H instanceof Error)return H.message;try{return JSON.stringify(H)}catch(Z){return null}}).filter(H=>H).join(" ");J>=(null!=B?B:z.logLevel)&&P({level:R[J].toLowerCase(),message:le,args:re,type:z.name})}}}},8239:(Ve,me,O)=>{"use strict";function a(k,Q,ie,q,ee,L,U){try{var P=k[L](U),N=P.value}catch(A){return void ie(A)}P.done?Q(N):Promise.resolve(N).then(q,ee)}function R(k){return function(){var Q=this,ie=arguments;return new Promise(function(q,ee){var L=k.apply(Q,ie);function U(N){a(L,q,ee,U,P,"next",N)}function P(N){a(L,q,ee,U,P,"throw",N)}U(void 0)})}}O.d(me,{Z:()=>R})}},Ve=>{Ve(Ve.s=8044)}]);