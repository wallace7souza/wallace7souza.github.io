(self.webpackChunkbinance_future_watcher_githubio=self.webpackChunkbinance_future_watcher_githubio||[]).push([[179],{8255:tt=>{function be(V){return Promise.resolve().then(()=>{var h=new Error("Cannot find module '"+V+"'");throw h.code="MODULE_NOT_FOUND",h})}be.keys=()=>[],be.resolve=be,be.id=8255,tt.exports=be},7716:(tt,be,V)=>{"use strict";V.d(be,{deG:()=>Kc,tb:()=>WM,AFp:()=>GM,ip1:()=>MC,CZH:()=>$d,hGG:()=>yA,z2F:()=>Hd,sBO:()=>MD,Sil:()=>fm,_Vd:()=>vr,EJc:()=>WS,SBq:()=>nu,qLn:()=>kl,vpe:()=>ru,gxx:()=>Cd,tBr:()=>$a,XFs:()=>Ze,OlP:()=>kn,zs3:()=>rr,ZZ4:()=>Yg,aQg:()=>Ar,soG:()=>av,YKP:()=>OD,v3s:()=>fv,h0i:()=>Od,PXZ:()=>nA,R0b:()=>xr,FiY:()=>ra,Lbi:()=>qM,g9A:()=>qS,Qsj:()=>xN,FYo:()=>Zg,JOm:()=>xo,Tiy:()=>xD,q3G:()=>nr,tp0:()=>Zr,EAV:()=>uP,Rgc:()=>ac,dDg:()=>KS,DyG:()=>Ua,q4F:()=>Kg,GfV:()=>RD,s_b:()=>kd,ifc:()=>He,eFA:()=>BC,G48:()=>iP,Gpc:()=>G,X6Q:()=>LC,_c5:()=>QC,VLi:()=>wi,c2e:()=>zM,zSh:()=>nn,wAp:()=>yt,vHH:()=>fe,EiD:()=>ad,mCW:()=>Dl,qzn:()=>bl,JVY:()=>Uh,pB0:()=>sd,eBb:()=>Wp,L6k:()=>qp,LAX:()=>sa,cg1:()=>d0,Tjo:()=>YC,kL8:()=>JT,yhl:()=>w_,dqk:()=>wt,sIi:()=>Rg,CqO:()=>hy,QGY:()=>jE,F4k:()=>DT,RDi:()=>ks,AaK:()=>J,z3N:()=>ia,qOj:()=>DE,TTD:()=>zo,_Bn:()=>wD,xp6:()=>Xh,uIk:()=>RE,ekj:()=>my,Suo:()=>gC,Xpm:()=>H,lG2:()=>Un,Yz7:()=>Tt,cJS:()=>mn,oAB:()=>_t,Yjl:()=>zi,Y36:()=>Fg,_UZ:()=>BE,qZA:()=>UE,TgZ:()=>dy,EpF:()=>TT,n5z:()=>vl,Ikx:()=>Sy,LFG:()=>Dn,$8M:()=>wl,NdJ:()=>$E,CRH:()=>IS,oxw:()=>qE,ALo:()=>Ui,xi3:()=>wM,Q6J:()=>cy,iGM:()=>pC,MAs:()=>wf,CHM:()=>Yo,LSH:()=>tg,kYT:()=>tn,YNc:()=>cT,_uU:()=>Ey,Oqu:()=>Cy,hij:()=>by,AsE:()=>Af});var h=V(9765),X=V(5319),L=V(7574),ae=V(6682),re=V(8819);function K(i){for(let s in i)if(i[s]===K)return s;throw Error("Could not find renamed property on target object.")}function me(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function J(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(J).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ne(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const U=K({__forward_ref__:K});function G(i){return i.__forward_ref__=G,i.toString=function(){return J(this())},i}function B(i){return te(i)?i():i}function te(i){return"function"==typeof i&&i.hasOwnProperty(U)&&i.__forward_ref__===G}class fe extends Error{constructor(s,a){super(function(i,s){return`${i?`NG0${i}: `:""}${s}`}(s,a)),this.code=s}}function oe(i){return"string"==typeof i?i:null==i?"":String(i)}function he(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():oe(i)}function Qe(i,s){const a=s?` in ${s}`:"";throw new fe("201",`No provider for ${he(i)} found${a}`)}function Xt(i,s){null==i&&function(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function Tt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function mn(i){return{providers:i.providers||[],imports:i.imports||[]}}function sn(i){return Qn(i,sr)||Qn(i,Me)}function Qn(i,s){return i.hasOwnProperty(s)?i[s]:null}function ro(i){return i&&(i.hasOwnProperty(bi)||i.hasOwnProperty(or))?i[bi]:null}const sr=K({\u0275prov:K}),bi=K({\u0275inj:K}),Me=K({ngInjectableDef:K}),or=K({ngInjectorDef:K});var Ze=(()=>((Ze=Ze||{})[Ze.Default=0]="Default",Ze[Ze.Host=1]="Host",Ze[Ze.Self=2]="Self",Ze[Ze.SkipSelf=4]="SkipSelf",Ze[Ze.Optional=8]="Optional",Ze))();let Jn;function hr(i){const s=Jn;return Jn=i,s}function io(i,s,a){const l=sn(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&Ze.Optional?null:void 0!==s?s:void Qe(J(i),"Injector")}function br(i){return{toString:i}.toString()}var Vn=(()=>((Vn=Vn||{})[Vn.OnPush=0]="OnPush",Vn[Vn.Default=1]="Default",Vn))(),He=(()=>((He=He||{})[He.Emulated=0]="Emulated",He[He.None=2]="None",He[He.ShadowDom=3]="ShadowDom",He))();const gt="undefined"!=typeof globalThis&&globalThis,Rs="undefined"!=typeof window&&window,Ns="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,wt=gt||"undefined"!=typeof global&&global||Rs||Ns,ln={},Pt=[],Dt=K({\u0275cmp:K}),Ke=K({\u0275dir:K}),Ae=K({\u0275pipe:K}),ot=K({\u0275mod:K}),mt=K({\u0275loc:K}),Ut=K({\u0275fac:K}),Qt=K({__NG_ELEMENT_ID__:K});let z=0;function H(i){return br(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Vn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||Pt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||He.Emulated,id:"c",styles:i.styles||Pt,_:null,setInput:null,schemas:i.schemas||null,tView:null},d=i.directives,f=i.features,_=i.pipes;return l.id+=z++,l.inputs=Mr(i.inputs,a),l.outputs=Mr(i.outputs),f&&f.forEach(w=>w(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(_e):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map(se):null,l})}function _e(i){return ct(i)||function(i){return i[Ke]||null}(i)}function se(i){return function(i){return i[Ae]||null}(i)}const je={};function _t(i){return br(()=>{const s={type:i.type,bootstrap:i.bootstrap||Pt,declarations:i.declarations||Pt,imports:i.imports||Pt,exports:i.exports||Pt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(je[i.id]=i.type),s})}function tn(i,s){return br(()=>{const a=Pr(i,!0);a.declarations=s.declarations||Pt,a.imports=s.imports||Pt,a.exports=s.exports||Pt})}function Mr(i,s){if(null==i)return ln;const a={};for(const l in i)if(i.hasOwnProperty(l)){let d=i[l],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=l,s&&(s[d]=f)}return a}const Un=H;function zi(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function ct(i){return i[Dt]||null}function Pr(i,s){const a=i[ot]||null;if(!a&&!0===s)throw new Error(`Type ${J(i)} does not have '\u0275mod' property.`);return a}function Di(i){return Array.isArray(i)&&"object"==typeof i[1]}function _n(i){return Array.isArray(i)&&!0===i[1]}function nl(i){return 0!=(8&i.flags)}function rl(i){return 2==(2&i.flags)}function du(i){return 1==(1&i.flags)}function fs(i){return null!==i.template}function Si(i){return 0!=(512&i[2])}function Wo(i,s){return i.hasOwnProperty(Ut)?i[Ut]:null}class Oc{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function zo(){return ps}function ps(i){return i.type.prototype.ngOnChanges&&(i.setInput=Os),uo}function uo(){const i=kc(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===ln)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function Os(i,s,a,l){const d=kc(i)||function(i,s){return i[Ki]=s}(i,{previous:ln,current:null}),f=d.current||(d.current={}),_=d.previous,w=this.declaredInputs[a],b=_[w];f[w]=new Oc(b&&b.currentValue,s,_===ln),i[l]=s}zo.ngInherit=!0;const Ki="__ngSimpleChanges__";function kc(i){return i[Ki]||null}let ol;function ks(i){ol=i}function Pn(i){return!!i.listen}const Zo={createRenderer:(i,s)=>void 0!==ol?ol:"undefined"!=typeof document?document:void 0};function an(i){for(;Array.isArray(i);)i=i[0];return i}function mu(i,s){return an(s[i])}function pn(i,s){return an(s[i.index])}function _u(i,s){return i.data[s]}function Yi(i,s){return i[s]}function $r(i,s){const a=s[i];return Di(a)?a:a[0]}function yu(i){return 4==(4&i[2])}function vu(i){return 128==(128&i[2])}function Qi(i,s){return null==s?null:i[s]}function Hr(i){i[18]=0}function wu(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const Ct={lFrame:Tp(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function bp(){return Ct.bindingsEnabled}function De(){return Ct.lFrame.lView}function Ht(){return Ct.lFrame.tView}function Yo(i){return Ct.lFrame.contextLView=i,i[8]}function Rn(){let i=Ra();for(;null!==i&&64===i.type;)i=i.parent;return i}function Ra(){return Ct.lFrame.currentTNode}function ei(i,s){const a=Ct.lFrame;a.currentTNode=i,a.isParent=s}function Qo(){return Ct.lFrame.isParent}function Jo(){return Ct.isInCheckNoChangesMode}function Ma(i){Ct.isInCheckNoChangesMode=i}function Gr(){return Ct.lFrame.bindingIndex}function Ai(){return Ct.lFrame.bindingIndex++}function ti(i){const s=Ct.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}function cl(i,s){const a=Ct.lFrame;a.bindingIndex=a.bindingRootIndex=i,Cu(s)}function Cu(i){Ct.lFrame.currentDirectiveIndex=i}function Eh(){return Ct.lFrame.currentQueryIndex}function Fs(i){Ct.lFrame.currentQueryIndex=i}function dl(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function Iu(i,s,a){if(a&Ze.SkipSelf){let d=s,f=i;for(;!(d=d.parent,null!==d||a&Ze.Host||(d=dl(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;s=d,i=f}const l=Ct.lFrame=fl();return l.currentTNode=s,l.lView=i,!0}function hl(i){const s=fl(),a=i[1];Ct.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function fl(){const i=Ct.lFrame,s=null===i?null:i.child;return null===s?Tp(i):s}function Tp(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Tu(){const i=Ct.lFrame;return Ct.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const jc=Tu;function Du(){const i=Tu();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function qr(){return Ct.lFrame.selectedIndex}function go(i){Ct.lFrame.selectedIndex=i}function On(){const i=Ct.lFrame;return _u(i.tView,i.selectedIndex)}function ka(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:w,ngAfterViewInit:b,ngAfterViewChecked:T,ngOnDestroy:R}=f;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),w&&((i.contentHooks||(i.contentHooks=[])).push(a,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,w)),b&&(i.viewHooks||(i.viewHooks=[])).push(-a,b),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=R&&(i.destroyHooks||(i.destroyHooks=[])).push(a,R)}}function Xo(i,s,a){gl(i,s,3,a)}function Bn(i,s,a,l){(3&i[2])===a&&gl(i,s,a,l)}function pl(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function gl(i,s,a,l){const f=null!=l?l:-1,_=s.length-1;let w=0;for(let b=void 0!==l?65535&i[18]:0;b<_;b++)if("number"==typeof s[b+1]){if(w=s[b],null!=l&&w>=l)break}else s[b]<0&&(i[18]+=65536),(w<f||-1==f)&&(xp(i,a,s,b),i[18]=(4294901760&i[18])+b+2),b++}function xp(i,s,a,l){const d=a[l]<0,f=a[l+1],w=i[d?-a[l]:a[l]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(w)}finally{}}}else try{f.call(w)}finally{}}class ea{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function qc(i,s,a){const l=Pn(i);let d=0;for(;d<a.length;){const f=a[d];if("number"==typeof f){if(0!==f)break;d++;const _=a[d++],w=a[d++],b=a[d++];l?i.setAttribute(s,w,b,_):s.setAttributeNS(_,w,b)}else{const _=f,w=a[++d];_s(_)?l&&i.setProperty(s,_,w):l?i.setAttribute(s,_,w):s.setAttribute(_,w),d++}}return d}function Np(i){return 3===i||4===i||6===i}function _s(i){return 64===i.charCodeAt(0)}function Wc(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const d=s[l];"number"==typeof d?a=d:0===a||Mp(i,a,d,null,-1===a||2===a?s[++l]:null)}}return i}function Mp(i,s,a,l,d){let f=0,_=i.length;if(-1===s)_=-1;else for(;f<i.length;){const w=i[f++];if("number"==typeof w){if(w===s){_=-1;break}if(w>s){_=f-1;break}}}for(;f<i.length;){const w=i[f];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==d&&(i[f+1]=d));if(l===i[f+1])return void(i[f+2]=d)}f++,null!==l&&f++,null!==d&&f++}-1!==_&&(i.splice(_,0,s),f=_+1),i.splice(f++,0,a),null!==l&&i.splice(f++,0,l),null!==d&&i.splice(f++,0,d)}function Au(i){return-1!==i}function Fa(i){return 32767&i}function _o(i,s){let a=function(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let ys=!0;function La(i){const s=ys;return ys=i,s}let Ih=0;function Ls(i,s){const a=Gt(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,Dh(l.data,i),Dh(s,null),Dh(l.blueprint,null));const d=at(i,s),f=i.injectorIndex;if(Au(d)){const _=Fa(d),w=_o(d,s),b=w[1].data;for(let T=0;T<8;T++)s[f+T]=w[_+T]|b[_+T]}return s[f+8]=d,f}function Dh(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Gt(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function at(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,d=s;for(;null!==d;){const f=d[1],_=f.type;if(l=2===_?f.declTNode:1===_?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Ri(i,s,a){!function(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Qt)&&(l=a[Qt]),null==l&&(l=a[Qt]=Ih++);const d=255&l;s.data[i+(d>>5)]|=1<<d}(i,s,a)}function yi(i,s,a){if(a&Ze.Optional)return i;Qe(s,"NodeInjector")}function zc(i,s,a,l){if(a&Ze.Optional&&void 0===l&&(l=null),0==(a&(Ze.Self|Ze.Host))){const d=i[9],f=hr(void 0);try{return d?d.get(s,l,a&Ze.Optional):io(s,l,a&Ze.Optional)}finally{hr(f)}}return yi(l,s,a)}function Ji(i,s,a,l=Ze.Default,d){if(null!==i){const f=function(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Qt)?i[Qt]:void 0;return"number"==typeof s?s>=0?255&s:yo:s}(a);if("function"==typeof f){if(!Iu(s,i,l))return l&Ze.Host?yi(d,a,l):zc(s,a,l,d);try{const _=f(l);if(null!=_||l&Ze.Optional)return _;Qe(a)}finally{jc()}}else if("number"==typeof f){let _=null,w=Gt(i,s),b=-1,T=l&Ze.Host?s[16][6]:null;for((-1===w||l&Ze.SkipSelf)&&(b=-1===w?at(i,s):s[w+8],-1!==b&&Ru(l,!1)?(_=s[1],w=Fa(b),s=_o(b,s)):w=-1);-1!==w;){const R=s[1];if(Xn(f,w,R.data)){const P=kp(w,s,a,_,l,T);if(P!==Wr)return P}b=s[w+8],-1!==b&&Ru(l,s[1].data[w+8]===T)&&Xn(f,w,s)?(_=R,w=Fa(b),s=_o(b,s)):w=-1}}}return zc(s,a,l,d)}const Wr={};function yo(){return new vo(Rn(),De())}function kp(i,s,a,l,d,f){const _=s[1],w=_.data[i+8],R=_l(w,_,a,null==l?rl(w)&&ys:l!=_&&0!=(3&w.type),d&Ze.Host&&f===w);return null!==R?jn(s,_,R,w):Wr}function _l(i,s,a,l,d){const f=i.providerIndexes,_=s.data,w=1048575&f,b=i.directiveStart,R=f>>20,F=d?w+R:i.directiveEnd;for(let q=l?w:w+R;q<F;q++){const Y=_[q];if(q<b&&a===Y||q>=b&&Y.type===a)return q}if(d){const q=_[b];if(q&&fs(q)&&q.type===a)return b}return null}function jn(i,s,a,l){let d=i[a];const f=s.data;if(function(i){return i instanceof ea}(d)){const _=d;_.resolving&&function(i,s){throw new fe("200",`Circular dependency in DI detected for ${i}`)}(he(f[a]));const w=La(_.canSeeViewProviders);_.resolving=!0;const b=_.injectImpl?hr(_.injectImpl):null;Iu(i,l,Ze.Default);try{d=i[a]=_.factory(void 0,f,i,l),s.firstCreatePass&&a>=l.directiveStart&&function(i,s,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:f}=s.type.prototype;if(l){const _=ps(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==b&&hr(b),La(w),_.resolving=!1,jc()}}return d}function Xn(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Ru(i,s){return!(i&Ze.Self||i&Ze.Host&&s)}class vo{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return Ji(this._tNode,this._lView,s,l,a)}}function vl(i){return br(()=>{const s=i.prototype.constructor,a=s[Ut]||Nu(s),l=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==l;){const f=d[Ut]||Nu(d);if(f&&f!==a)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function Nu(i){return te(i)?()=>{const s=Nu(B(i));return s&&s()}:Wo(i)}function wl(i){return function(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const f=a[d];if(Np(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(f===s)return a[d+1];d+=2}}}return null}(Rn(),i)}const Ni="__parameters__";function ni(i,s,a){return br(()=>{const l=function(i){return function(...a){if(i){const l=i(...a);for(const d in l)this[d]=l[d]}}}(s);function d(...f){if(this instanceof d)return l.apply(this,f),this;const _=new d(...f);return w.annotation=_,w;function w(b,T,R){const P=b.hasOwnProperty(Ni)?b[Ni]:Object.defineProperty(b,Ni,{value:[]})[Ni];for(;P.length<=R;)P.push(null);return(P[R]=P[R]||[]).push(_),b}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class kn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Tt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Kc=new kn("AnalyzeForEntryComponents"),Ua=Function;function Pi(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),Pi(l,s)):s!==i&&s.push(l)}return s}function Oi(i,s){i.forEach(a=>Array.isArray(a)?Oi(a,s):s(a))}function ws(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Eo(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function $n(i,s,a){let l=Io(i,s);return l>=0?i[1|l]=a:(l=~l,function(i,s,a,l){let d=i.length;if(d==s)i.push(a,l);else if(1===d)i.push(l,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function zr(i,s){const a=Io(i,s);if(a>=0)return i[1|a]}function Io(i,s){return function(i,s,a){let l=0,d=i.length>>a;for(;d!==l;){const f=l+(d-l>>1),_=i[f<<a];if(s===_)return f<<a;_>s?d=f:l=f+1}return~(d<<a)}(i,s,1)}const zt={},At="__NG_DI_FLAG__",Tr="ngTempTokenPath",ja=/\n/gm,na="__source",Do=K({provide:String,useValue:K});let js;function Ot(i){const s=js;return js=i,s}function Vp(i,s=Ze.Default){if(void 0===js)throw new Error("inject() must be called from an injection context");return null===js?io(i,void 0,s):js.get(i,s&Ze.Optional?null:void 0,s)}function Dn(i,s=Ze.Default){return(Jn||Vp)(B(i),s)}function Pu(i){const s=[];for(let a=0;a<i.length;a++){const l=B(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Error("Arguments array must have arguments.");let d,f=Ze.Default;for(let _=0;_<l.length;_++){const w=l[_],b=Bp(w);"number"==typeof b?-1===b?d=w.token:f|=b:d=w}s.push(Dn(d,f))}else s.push(Dn(l))}return s}function Xc(i,s){return i[At]=s,i.prototype[At]=s,i}function Bp(i){return i[At]}function es(i,s,a,l){const d=i[Tr];throw s[na]&&d.unshift(s[na]),i.message=function(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let d=J(s);if(Array.isArray(s))d=s.map(J).join(" -> ");else if("object"==typeof s){let f=[];for(let _ in s)if(s.hasOwnProperty(_)){let w=s[_];f.push(_+":"+("string"==typeof w?JSON.stringify(w):J(w)))}d=`{${f.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${i.replace(ja,"\n  ")}`}("\n"+i.message,d,a,l),i.ngTokenPath=d,i[Tr]=null,i}const $a=Xc(ni("Inject",i=>({token:i})),-1),ra=Xc(ni("Optional"),8),Zr=Xc(ni("SkipSelf"),4);let td;function $s(i){var s;return(null===(s=function(){if(void 0===td&&(td=null,wt.trustedTypes))try{td=wt.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return td}())||void 0===s?void 0:s.createHTML(i))||i}class So{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class yw extends So{getTypeName(){return"HTML"}}class vw extends So{getTypeName(){return"Style"}}class Vh extends So{getTypeName(){return"Script"}}class ww extends So{getTypeName(){return"URL"}}class Ew extends So{getTypeName(){return"ResourceURL"}}function ia(i){return i instanceof So?i.changingThisBreaksApplicationSecurity:i}function bl(i,s){const a=w_(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}function w_(i){return i instanceof So&&i.getTypeName()||null}function Uh(i){return new yw(i)}function qp(i){return new vw(i)}function Wp(i){return new Vh(i)}function sa(i){return new ww(i)}function sd(i){return new Ew(i)}class Zp{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const a=(new window.DOMParser).parseFromString($s(s),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(s):(a.removeChild(a.firstChild),a)}catch(a){return null}}}class Cw{constructor(s){if(this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const l=this.inertDocument.createElement("body");a.appendChild(l)}}getInertBodyElement(s){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=$s(s),a;const l=this.inertDocument.createElement("body");return l.innerHTML=$s(s),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(s){const a=s.attributes;for(let d=a.length-1;0<d;d--){const _=a.item(d).name;("xmlns:ns1"===_||0===_.indexOf("ns1:"))&&s.removeAttribute(_)}let l=s.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const E_=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Tl=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Dl(i){return(i=String(i)).match(E_)||i.match(Tl)?i:"unsafe:"+i}function Hs(i){const s={};for(const a of i.split(","))s[a]=!0;return s}function Wa(...i){const s={};for(const a of i)for(const l in a)a.hasOwnProperty(l)&&(s[l]=!0);return s}const Bh=Hs("area,br,col,hr,img,wbr"),jh=Hs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),od=Hs("rp,rt"),Kp=Wa(Bh,Wa(jh,Hs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Wa(od,Hs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Wa(od,jh)),Al=Hs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),xl=Hs("srcset"),Yp=Wa(Al,xl,Hs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Hs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Qp=Hs("script,style,template");class Jp{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let a=s.firstChild,l=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?l=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,l&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let d=this.checkClobberedElement(a,a.nextSibling);if(d){a=d;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(s){const a=s.nodeName.toLowerCase();if(!Kp.hasOwnProperty(a))return this.sanitizedSomething=!0,!Qp.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const l=s.attributes;for(let d=0;d<l.length;d++){const f=l.item(d),_=f.name,w=_.toLowerCase();if(!Yp.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let b=f.value;Al[w]&&(b=Dl(b)),xl[w]&&(i=b,b=(i=String(i)).split(",").map(s=>Dl(s.trim())).join(", ")),this.buf.push(" ",_,'="',b_(b),'"')}var i;return this.buf.push(">"),!0}endElement(s){const a=s.nodeName.toLowerCase();Kp.hasOwnProperty(a)&&!Bh.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(s){this.buf.push(b_(s))}checkClobberedElement(s,a){if(a&&(s.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return a}}const Xp=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Tw=/([^\#-~ |!])/g;function b_(i){return i.replace(/&/g,"&amp;").replace(Xp,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(Tw,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Vu;function ad(i,s){let a=null;try{Vu=Vu||function(i){const s=new Cw(i);return function(){try{return!!(new window.DOMParser).parseFromString($s(""),"text/html")}catch(i){return!1}}()?new Zp(s):s}(i);let l=s?String(s):"";a=Vu.getInertBodyElement(l);let d=5,f=l;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,l=f,f=a.innerHTML,a=Vu.getInertBodyElement(l)}while(l!==f);return $s((new Jp).sanitizeChildren(eg(a)||a))}finally{if(a){const l=eg(a)||a;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function eg(i){return"content"in i&&function(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var nr=(()=>((nr=nr||{})[nr.NONE=0]="NONE",nr[nr.HTML=1]="HTML",nr[nr.STYLE=2]="STYLE",nr[nr.SCRIPT=3]="SCRIPT",nr[nr.URL=4]="URL",nr[nr.RESOURCE_URL=5]="RESOURCE_URL",nr))();function tg(i){const s=function(){const i=De();return i&&i[12]}();return s?s.sanitize(nr.URL,i)||"":bl(i,"URL")?ia(i):Dl(oe(i))}const Nl="__ngContext__";function kr(i,s){i[Nl]=s}function ag(i){const s=function(i){return i[Nl]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Dr(i){return i.ngOriginalError}function R_(i,...s){i.error(...s)}class kl{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=this._findContext(s),d=(i=s)&&i.ngErrorLogger||R_;var i;d(this._console,"ERROR",s),a&&d(this._console,"ORIGINAL ERROR",a),l&&d(this._console,"ERROR CONTEXT",l)}_findContext(s){return s?s.ngDebugContext||this._findContext(Dr(s)):null}_findOriginalError(s){let a=s&&Dr(s);for(;a&&Dr(a);)a=Dr(a);return a||null}}const Zh=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(wt))();function Gs(i){return i instanceof Function?i():i}var xo=(()=>((xo=xo||{})[xo.Important=1]="Important",xo[xo.DashCase=2]="DashCase",xo))();function Yh(i,s){return undefined(i,s)}function m(i){const s=i[3];return _n(s)?s[3]:s}function N(i){return le(i[13])}function W(i){return le(i[4])}function le(i){for(;null!==i&&!_n(i);)i=i[4];return i}function Re(i,s,a,l,d){if(null!=l){let f,_=!1;_n(l)?f=l:Di(l)&&(_=!0,l=l[0]);const w=an(l);0===i&&null!==a?null==d?dI(s,a,w):Fl(s,a,w,d||null,!0):1===i&&null!==a?Fl(s,a,w,d||null,!0):2===i?function(i,s,a){const l=k_(i,s);l&&function(i,s,a,l){Pn(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,w,_):3===i&&s.destroyNode(w),null!=f&&function(i,s,a,l,d){const f=a[7];f!==an(a)&&Re(s,i,l,f,d);for(let w=10;w<a.length;w++){const b=a[w];md(b[1],b,i,s,l,f)}}(s,i,f,a,d)}}function mr(i,s,a){return Pn(i)?i.createElement(s,a):null===a?i.createElement(s):i.createElementNS(a,s)}function fd(i,s){const a=i[9],l=a.indexOf(s),d=s[3];1024&s[2]&&(s[2]&=-1025,wu(d,-1)),a.splice(l,1)}function pd(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const d=l[17];null!==d&&d!==i&&fd(d,l),s>0&&(i[a-1][4]=l[4]);const f=Eo(i,10+s);!function(i,s){md(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const _=f[19];null!==_&&_.detachView(f[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function Jh(i,s){if(!(256&s[2])){const a=s[11];Pn(a)&&a.destroyNode&&md(i,s,a,3,null,null),function(i){let s=i[13];if(!s)return aa(i[1],i);for(;s;){let a=null;if(Di(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)Di(s)&&aa(s[1],s),s=s[3];null===s&&(s=i),Di(s)&&aa(s[1],s),a=s&&s[4]}s=a}}(s)}}function aa(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const d=s[a[l]];if(!(d instanceof ea)){const f=a[l+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const w=d[f[_]],b=f[_+1];try{b.call(w)}finally{}}else try{f.call(d)}finally{}}}}(i,s),function(i,s){const a=i.cleanup,l=s[7];let d=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const _=a[f+1],w="function"==typeof _?_(s):an(s[_]),b=l[d=a[f+2]],T=a[f+3];"boolean"==typeof T?w.removeEventListener(a[f],b,T):T>=0?l[d=T]():l[d=-T].unsubscribe(),f+=2}else{const _=l[d=a[f+1]];a[f].call(_)}if(null!==l){for(let f=d+1;f<l.length;f++)l[f]();s[7]=null}}(i,s),1===s[1].type&&Pn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&_n(s[3])){a!==s[3]&&fd(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function O_(i,s,a){return function(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const d=i.data[l.directiveStart].encapsulation;if(d===He.None||d===He.Emulated)return null}return pn(l,a)}(i,s.parent,a)}function Fl(i,s,a,l,d){Pn(i)?i.insertBefore(s,a,l,d):s.insertBefore(a,l,d)}function dI(i,s,a){Pn(i)?i.appendChild(s,a):s.appendChild(a)}function hI(i,s,a,l,d){null!==l?Fl(i,s,a,l,d):dI(i,s,a)}function k_(i,s){return Pn(i)?i.parentNode(s):s.parentNode}let gd=function(i,s,a){return 40&i.type?pn(i,a):null};function _g(i,s,a,l){const d=O_(i,l,s),f=s[11],w=function(i,s,a){return gd(i,s,a)}(l.parent||s[6],l,s);if(null!=d)if(Array.isArray(a))for(let b=0;b<a.length;b++)hI(f,d,a[b],w,!1);else hI(f,d,a,w,!1)}function U_(i,s){if(null!==s){const a=s.type;if(3&a)return pn(s,i);if(4&a)return Fw(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return U_(i,l);{const d=i[s.index];return _n(d)?Fw(-1,d):an(d)}}if(32&a)return Yh(s,i)()||an(i[s.index]);{const l=kw(i,s);return null!==l?Array.isArray(l)?l[0]:U_(m(i[16]),l):U_(i,s.next)}}return null}function kw(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Fw(i,s){const a=10+i+1;if(a<s.length){const l=s[a],d=l[1].firstChild;if(null!==d)return U_(l,d)}return s[7]}function B_(i,s,a,l,d,f,_){for(;null!=a;){const w=l[a.index],b=a.type;if(_&&0===s&&(w&&kr(an(w),l),a.flags|=4),64!=(64&a.flags))if(8&b)B_(i,s,a.child,l,d,f,!1),Re(s,i,d,w,f);else if(32&b){const T=Yh(a,l);let R;for(;R=T();)Re(s,i,d,R,f);Re(s,i,d,w,f)}else 16&b?Ll(i,s,l,a,d,f):Re(s,i,d,w,f);a=_?a.projectionNext:a.next}}function md(i,s,a,l,d,f){B_(a,l,i.firstChild,s,d,f,!1)}function Ll(i,s,a,l,d,f){const _=a[16],b=_[6].projection[l.projection];if(Array.isArray(b))for(let T=0;T<b.length;T++)Re(s,i,d,b[T],f);else B_(i,s,b,_[3],d,f,!0)}function gI(i,s,a){Pn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function Vw(i,s,a){Pn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function Uw(i,s,a){let l=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const f=s.length;if(d+f===l||i.charCodeAt(d+f)<=32)return d}a=d+1}}const mI="ng-template";function kx(i,s,a){let l=0;for(;l<i.length;){let d=i[l++];if(a&&"class"===d){if(d=i[l],-1!==Uw(d.toLowerCase(),s,0))return!0}else if(1===d){for(;l<i.length&&"string"==typeof(d=i[l++]);)if(d.toLowerCase()===s)return!0;return!1}}return!1}function Bw(i){return 4===i.type&&i.value!==mI}function Fx(i,s,a){return s===(4!==i.type||a?i.value:mI)}function Lx(i,s,a){let l=4;const d=i.attrs||[],f=function(i){for(let s=0;s<i.length;s++)if(Np(i[s]))return s;return i.length}(d);let _=!1;for(let w=0;w<s.length;w++){const b=s[w];if("number"!=typeof b){if(!_)if(4&l){if(l=2|1&l,""!==b&&!Fx(i,b,a)||""===b&&1===s.length){if(ua(l))return!1;_=!0}}else{const T=8&l?b:s[++w];if(8&l&&null!==i.attrs){if(!kx(i.attrs,T,a)){if(ua(l))return!1;_=!0}continue}const P=jw(8&l?"class":b,d,Bw(i),a);if(-1===P){if(ua(l))return!1;_=!0;continue}if(""!==T){let F;F=P>f?"":d[P+1].toLowerCase();const q=8&l?F:null;if(q&&-1!==Uw(q,T,0)||2&l&&T!==F){if(ua(l))return!1;_=!0}}}}else{if(!_&&!ua(l)&&!ua(b))return!1;if(_&&ua(b))continue;_=!1,l=b|1&l}}return ua(l)||_}function ua(i){return 0==(1&i)}function jw(i,s,a,l){if(null===s)return-1;let d=0;if(l||!a){let f=!1;for(;d<s.length;){const _=s[d];if(_===i)return d;if(3===_||6===_)f=!0;else{if(1===_||2===_){let w=s[++d];for(;"string"==typeof w;)w=s[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=f?1:2}return-1}return function(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function _I(i,s,a=!1){for(let l=0;l<s.length;l++)if(Lx(i,s[l],a))return!0;return!1}function vI(i,s){return i?":not("+s.trim()+")":s}function Bx(i){let s=i[0],a=1,l=2,d="",f=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const w=i[++a];d+="["+_+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?d+="."+_:4&l&&(d+=" "+_);else""!==d&&!ua(_)&&(s+=vI(f,d),d=""),l=_,f=f||!ua(l);a++}return""!==d&&(s+=vI(f,d)),s}const kt={};function Xh(i){wI(Ht(),De(),qr()+i,Jo())}function wI(i,s,a,l){if(!l)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&Xo(s,f,a)}else{const f=i.preOrderHooks;null!==f&&Bn(s,f,0,a)}go(a)}function $_(i,s){return i<<17|s<<2}function la(i){return i>>17&32767}function G_(i){return 2|i}function Uu(i){return(131068&i)>>2}function $w(i,s){return-131069&i|s<<2}function Hw(i){return 1|i}function Zw(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],f=a[l+1];if(-1!==f){const _=i.data[f];Fs(d),_.contentQueries(2,s[f],f)}}}function vg(i,s,a,l,d,f,_,w,b,T){const R=s.blueprint.slice();return R[0]=d,R[2]=140|l,Hr(R),R[3]=R[15]=i,R[8]=a,R[10]=_||i&&i[10],R[11]=w||i&&i[11],R[12]=b||i&&i[12]||null,R[9]=T||i&&i[9]||null,R[6]=f,R[16]=2==s.type?i[16]:R,R}function rf(i,s,a,l,d){let f=i.data[s];if(null===f)f=function(i,s,a,l,d){const f=Ra(),_=Qo(),b=i.data[s]=function(i,s,a,l,d,f){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,a,s,l,d);return null===i.firstChild&&(i.firstChild=b),null!==f&&(_?null==f.child&&null!==b.parent&&(f.child=b):null===f.next&&(f.next=b)),b}(i,s,a,l,d),Ct.lFrame.inI18n&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=l,f.attrs=d;const _=function(){const i=Ct.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return ei(f,!0),f}function sf(i,s,a,l){if(0===a)return-1;const d=s.length;for(let f=0;f<a;f++)s.push(l),i.blueprint.push(l),i.data.push(null);return d}function af(i,s,a){hl(s);try{const l=i.viewQuery;null!==l&&dE(1,l,a);const d=i.template;null!==d&&wd(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Zw(i,s),i.staticViewQueries&&dE(2,i.viewQuery,a);const f=i.components;null!==f&&function(i,s){for(let a=0;a<s.length;a++)rR(i,s[a])}(s,f)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,Du()}}function Vl(i,s,a,l){const d=s[2];if(256==(256&d))return;hl(s);const f=Jo();try{Hr(s),function(i){Ct.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&wd(i,s,a,2,l);const _=3==(3&d);if(!f)if(_){const T=i.preOrderCheckHooks;null!==T&&Xo(s,T,null)}else{const T=i.preOrderHooks;null!==T&&Bn(s,T,0,null),pl(s,0)}if(function(i){for(let s=N(i);null!==s;s=W(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const d=a[l],f=d[3];0==(1024&d[2])&&wu(f,1),d[2]|=1024}}}(s),function(i){for(let s=N(i);null!==s;s=W(s))for(let a=10;a<s.length;a++){const l=s[a],d=l[1];vu(l)&&Vl(d,l,d.template,l[8])}}(s),null!==i.contentQueries&&Zw(i,s),!f)if(_){const T=i.contentCheckHooks;null!==T&&Xo(s,T)}else{const T=i.contentHooks;null!==T&&Bn(s,T,1),pl(s,1)}!function(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)go(~d);else{const f=d,_=a[++l],w=a[++l];cl(_,f),w(2,s[f])}}}finally{go(-1)}}(i,s);const w=i.components;null!==w&&function(i,s){for(let a=0;a<s.length;a++)oE(i,s[a])}(s,w);const b=i.viewQuery;if(null!==b&&dE(2,b,l),!f)if(_){const T=i.viewCheckHooks;null!==T&&Xo(s,T)}else{const T=i.viewHooks;null!==T&&Bn(s,T,2),pl(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),f||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,wu(s[3],-1))}finally{Du()}}function z_(i,s,a,l){const d=s[10],f=!Jo(),_=yu(s);try{f&&!_&&d.begin&&d.begin(),_&&af(i,s,l),Vl(i,s,a,l)}finally{f&&!_&&d.end&&d.end()}}function wd(i,s,a,l,d){const f=qr(),_=2&l;try{go(-1),_&&s.length>20&&wI(i,s,20,Jo()),a(l,d)}finally{go(f)}}function Ed(i,s,a){!bp()||(function(i,s,a,l){const d=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||Ls(a,s),kr(l,s);const _=a.initialInputs;for(let w=d;w<f;w++){const b=i.data[w],T=fs(b);T&&tR(s,a,b);const R=jn(s,i,w,a);kr(R,s),null!==_&&$I(0,w-d,R,b,0,_),T&&($r(a.index,s)[8]=R)}}(i,s,a,pn(a,s)),128==(128&a.flags)&&function(i,s,a){const l=a.directiveStart,d=a.directiveEnd,_=a.index,w=Ct.lFrame.currentDirectiveIndex;try{go(_);for(let b=l;b<d;b++){const T=i.data[b],R=s[b];Cu(b),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&LI(T,R)}}finally{go(-1),Cu(w)}}(i,s,a))}function Yw(i,s,a=pn){const l=s.localNames;if(null!==l){let d=s.index+1;for(let f=0;f<l.length;f+=2){const _=l[f+1],w=-1===_?a(s,i):i[_];i[d++]=w}}}function RI(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Ul(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Ul(i,s,a,l,d,f,_,w,b,T){const R=20+l,P=R+d,F=function(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:kt);return a}(R,P),q="function"==typeof T?T():T;return F[1]={type:i,blueprint:F,template:a,queries:null,viewQuery:w,declTNode:s,data:F.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:b,consts:q,incompleteFirstPass:!1}}function Xw(i,s,a,l){const d=hE(s);null===a?d.push(l):(d.push(a),i.firstCreatePass&&fE(i).push(l,d.length-1))}function eE(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const d=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,d):a[l]=[s,d]}return a}function bs(i,s,a,l,d,f,_,w){const b=pn(s,a);let R,T=s.inputs;!w&&null!=T&&(R=T[l])?(zI(i,a,R,l,d),rl(s)&&function(i,s){const a=$r(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),d=null!=_?_(d,s.value||"",l):d,Pn(f)?f.setProperty(b,l,d):_s(l)||(b.setProperty?b.setProperty(l,d):b[l]=d))}function wg(i,s,a,l){let d=!1;if(bp()){const f=function(i,s,a){const l=i.directiveRegistry;let d=null;if(l)for(let f=0;f<l.length;f++){const _=l[f];_I(a,_.selectors,!1)&&(d||(d=[]),Ri(Ls(a,s),i,_.type),fs(_)?(iE(i,a),d.unshift(_)):d.push(_))}return d}(i,s,a),_=null===l?null:{"":-1};if(null!==f){d=!0,BI(a,i.data.length,f.length);for(let R=0;R<f.length;R++){const P=f[R];P.providersResolver&&P.providersResolver(P)}let w=!1,b=!1,T=sf(i,s,f.length,null);for(let R=0;R<f.length;R++){const P=f[R];a.mergedAttrs=Wc(a.mergedAttrs,P.hostAttrs),jI(i,a,s,T,P),UI(T,P,_),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const F=P.type.prototype;!w&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),w=!0),!b&&(F.ngOnChanges||F.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),b=!0),T++}!function(i,s){const l=s.directiveEnd,d=i.data,f=s.attrs,_=[];let w=null,b=null;for(let T=s.directiveStart;T<l;T++){const R=d[T],P=R.inputs,F=null===f||Bw(s)?null:HI(P,f);_.push(F),w=eE(P,T,w),b=eE(R.outputs,T,b)}null!==w&&(w.hasOwnProperty("class")&&(s.flags|=16),w.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=w,s.outputs=b}(i,a)}_&&function(i,s,a){if(s){const l=i.localNames=[];for(let d=0;d<s.length;d+=2){const f=a[s[d+1]];if(null==f)throw new fe("301",`Export of name '${s[d+1]}' not found!`);l.push(s[d],f)}}}(a,l,_)}return a.mergedAttrs=Wc(a.mergedAttrs,a.attrs),d}function kI(i,s,a,l,d,f){const _=f.hostBindings;if(_){let w=i.hostBindingOpCodes;null===w&&(w=i.hostBindingOpCodes=[]);const b=~s.index;(function(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(w)!=b&&w.push(b),w.push(l,d,_)}}function LI(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function iE(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function UI(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;fs(s)&&(a[""]=i)}}function BI(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function jI(i,s,a,l,d){i.data[l]=d;const f=d.factory||(d.factory=Wo(d.type)),_=new ea(f,fs(d),null);i.blueprint[l]=_,a[l]=_,kI(i,s,0,l,sf(i,a,d.hostVars,kt),d)}function tR(i,s,a){const l=pn(s,i),d=RI(a),f=i[10],_=Bl(i,vg(i,d,null,a.onPush?64:16,l,s,f,f.createRenderer(l,a),null,null));i[s.index]=_}function Ja(i,s,a,l,d,f){const _=pn(i,s);!function(i,s,a,l,d,f,_){if(null==f)Pn(i)?i.removeAttribute(s,d,a):s.removeAttribute(d);else{const w=null==_?oe(f):_(f,l||"",d);Pn(i)?i.setAttribute(s,d,w,a):a?s.setAttributeNS(a,d,w):s.setAttribute(d,w)}}(s[11],_,f,i.value,a,l,d)}function $I(i,s,a,l,d,f){const _=f[s];if(null!==_){const w=l.setInput;for(let b=0;b<_.length;){const T=_[b++],R=_[b++],P=_[b++];null!==w?l.setInput(a,P,T,R):a[R]=P}}}function HI(i,s){let a=null,l=0;for(;l<s.length;){const d=s[l];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],s[l+1])),l+=2}else l+=2;else l+=4}return a}function GI(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function oE(i,s){const a=$r(s,i);if(vu(a)){const l=a[1];80&a[2]?Vl(l,a,l.template,a[8]):a[5]>0&&aE(a)}}function aE(i){for(let l=N(i);null!==l;l=W(l))for(let d=10;d<l.length;d++){const f=l[d];if(1024&f[2]){const _=f[1];Vl(_,f,_.template,f[8])}else f[5]>0&&aE(f)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=$r(a[l],i);vu(d)&&d[5]>0&&aE(d)}}function rR(i,s){const a=$r(s,i),l=a[1];(function(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),af(l,a,a[8])}function Bl(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function Cg(i){for(;i;){i[2]|=64;const s=m(i);if(Si(i)&&!s)return i;i=s}return null}function lE(i,s,a){const l=s[10];l.begin&&l.begin();try{Vl(i,s,i.template,a)}catch(d){throw gE(s,d),d}finally{l.end&&l.end()}}function qI(i){!function(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=ag(a),d=l[1];z_(d,l,d.template,a)}}(i[8])}function dE(i,s,a){Fs(0),s(i,a)}const oR=(()=>Promise.resolve(null))();function hE(i){return i[7]||(i[7]=[])}function fE(i){return i.cleanup||(i.cleanup=[])}function gE(i,s){const a=i[9],l=a?a.get(kl,null):null;l&&l.handleError(s)}function zI(i,s,a,l,d){for(let f=0;f<a.length;){const _=a[f++],w=a[f++],b=s[_],T=i.data[_];null!==T.setInput?T.setInput(b,d,l,w):b[w]=d}}function Xa(i,s,a){const l=mu(s,i);!function(i,s,a){Pn(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function bg(i,s,a){let l=a?i.styles:null,d=a?i.classes:null,f=0;if(null!==s)for(let _=0;_<s.length;_++){const w=s[_];"number"==typeof w?f=w:1==f?d=ne(d,w):2==f&&(l=ne(l,w+": "+s[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=d:i.classesWithoutHost=d}const Cd=new kn("INJECTOR",-1);class Cn{get(s,a=zt){if(a===zt){const l=new Error(`NullInjectorError: No provider for ${J(s)}!`);throw l.name="NullInjectorError",l}return a}}const nn=new kn("Set Injector scope."),qt={},jl={};let Sn;function Y_(){return void 0===Sn&&(Sn=new Cn),Sn}function lf(i,s=null,a=null,l){return new KI(i,a,s||Y_(),l)}class KI{constructor(s,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];a&&Oi(a,w=>this.processProvider(w,s,a)),Oi([s],w=>this.processInjectorType(w,[],f)),this.records.set(Cd,$l(void 0,this));const _=this.records.get(nn);this.scope=null!=_?_.value:null,this.source=d||("object"==typeof s?null:J(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=zt,l=Ze.Default){this.assertNotDestroyed();const d=Ot(this),f=hr(void 0);try{if(!(l&Ze.SkipSelf)){let w=this.records.get(s);if(void 0===w){const b=("function"==typeof(i=s)||"object"==typeof i&&i instanceof kn)&&sn(s);w=b&&this.injectableDefInScope(b)?$l(Hn(s),qt):null,this.records.set(s,w)}if(null!=w)return this.hydrate(s,w)}return(l&Ze.Self?Y_():this.parent).get(s,a=l&Ze.Optional&&a===zt?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[Tr]=_[Tr]||[]).unshift(J(s)),d)throw _;return es(_,s,"R3InjectorError",this.source)}throw _}finally{hr(f),Ot(d)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,d)=>s.push(J(d))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(s,a,l){if(!(s=B(s)))return!1;let d=ro(s);const f=null==d&&s.ngModule||void 0,_=void 0===f?s:f,w=-1!==l.indexOf(_);if(void 0!==f&&(d=ro(f)),null==d)return!1;if(null!=d.imports&&!w){let R;l.push(_);try{Oi(d.imports,P=>{this.processInjectorType(P,a,l)&&(void 0===R&&(R=[]),R.push(P))})}finally{}if(void 0!==R)for(let P=0;P<R.length;P++){const{ngModule:F,providers:q}=R[P];Oi(q,Y=>this.processProvider(Y,F,q||Pt))}}this.injectorDefTypes.add(_);const b=Wo(_)||(()=>new _);this.records.set(_,$l(b,qt));const T=d.providers;if(null!=T&&!w){const R=s;Oi(T,P=>this.processProvider(P,R,T))}return void 0!==f&&void 0!==s.providers}processProvider(s,a,l){let d=cf(s=B(s))?s:B(s&&s.provide);const f=qs(i=s)?$l(void 0,i.useValue):$l(YI(i),qt);var i;if(cf(s)||!0!==s.multi)this.records.get(d);else{let _=this.records.get(d);_||(_=$l(void 0,qt,!0),_.factory=()=>Pu(_.multi),this.records.set(d,_)),d=s,_.multi.push(s)}this.records.set(d,f)}hydrate(s,a){return a.value===qt&&(a.value=jl,a.value=a.factory()),"object"==typeof a.value&&a.value&&null!==(i=a.value)&&"object"==typeof i&&"function"==typeof i.ngOnDestroy&&this.onDestroy.add(a.value),a.value;var i}injectableDefInScope(s){if(!s.providedIn)return!1;const a=B(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Hn(i){const s=sn(i),a=null!==s?s.factory:Wo(i);if(null!==a)return a;if(i instanceof kn)throw new Error(`Token ${J(i)} is missing a \u0275prov definition.`);if(i instanceof Function)return function(i){const s=i.length;if(s>0){const l=function(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?");throw new Error(`Can't resolve all parameters for ${J(i)}: (${l.join(", ")}).`)}const a=function(i){const s=i&&(i[sr]||i[Me]);if(s){const a=function(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Error("unreachable")}function YI(i,s,a){let l;if(cf(i)){const d=B(i);return Wo(d)||Hn(d)}if(qs(i))l=()=>B(i.useValue);else if(function(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...Pu(i.deps||[]));else if(function(i){return!(!i||!i.useExisting)}(i))l=()=>Dn(B(i.useExisting));else{const d=B(i&&(i.useClass||i.provide));if(!function(i){return!!i.deps}(i))return Wo(d)||Hn(d);l=()=>new d(...Pu(i.deps))}return l}function $l(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function qs(i){return null!==i&&"object"==typeof i&&Do in i}function cf(i){return"function"==typeof i}const _E=function(i,s,a){return function(i,s=null,a=null,l){const d=lf(i,s,a,l);return d._resolveInjectorDefTypes(),d}({name:a},s,i,a)};let rr=(()=>{class i{static create(a,l){return Array.isArray(a)?_E(a,l,""):_E(a.providers,a.parent,a.name||"")}}return i.THROW_IF_NOT_FOUND=zt,i.NULL=new Cn,i.\u0275prov=Tt({token:i,providedIn:"any",factory:()=>Dn(Cd)}),i.__NG_ELEMENT_ID__=-1,i})();function IE(i,s){ka(ag(i)[1],Rn())}function DE(i){let s=function(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let d;if(fs(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Error("Directives cannot inherit Components");d=s.\u0275dir}if(d){if(a){l.push(d);const _=i;_.inputs=X_(i.inputs),_.declaredInputs=X_(i.declaredInputs),_.outputs=X_(i.outputs);const w=d.hostBindings;w&&Sg(i,w);const b=d.viewQuery,T=d.contentQueries;if(b&&uT(i,b),T&&ff(i,T),me(i.inputs,d.inputs),me(i.declaredInputs,d.declaredInputs),me(i.outputs,d.outputs),fs(d)&&d.data.animation){const R=i.data;R.animation=(R.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let _=0;_<f.length;_++){const w=f[_];w&&w.ngInherit&&w(i),w===DE&&(a=!1)}}s=Object.getPrototypeOf(s)}!function(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const d=i[l];d.hostVars=s+=d.hostVars,d.hostAttrs=Wc(d.hostAttrs,a=Wc(a,d.hostAttrs))}}(l)}function X_(i){return i===ln?{}:i===Pt?[]:i}function uT(i,s){const a=i.viewQuery;i.viewQuery=a?(l,d)=>{s(l,d),a(l,d)}:s}function ff(i,s){const a=i.contentQueries;i.contentQueries=a?(l,d,f)=>{s(l,d,f),a(l,d,f)}:s}function Sg(i,s){const a=i.hostBindings;i.hostBindings=a?(l,d)=>{s(l,d),a(l,d)}:s}let Gl=null;function pf(){if(!Gl){const i=wt.Symbol;if(i&&i.iterator)Gl=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Gl=l)}}}return Gl}class ga{constructor(s){this.wrapped=s}static wrap(s){return new ga(s)}static unwrap(s){return ga.isWrapped(s)?s.wrapped:s}static isWrapped(s){return s instanceof ga}}function Rg(i){return!!xE(i)&&(Array.isArray(i)||!(i instanceof Map)&&pf()in i)}function xE(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Yr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function ql(i,s,a,l){const d=Yr(i,s,a);return Yr(i,s+1,l)||d}function RE(i,s,a,l){const d=De();return Yr(d,Ai(),s)&&(Ht(),Ja(On(),d,i,s,a,l)),RE}function cT(i,s,a,l,d,f,_,w){const b=De(),T=Ht(),R=i+20,P=T.firstCreatePass?function(i,s,a,l,d,f,_,w,b){const T=s.consts,R=rf(s,i,4,_||null,Qi(T,w));wg(s,a,R,Qi(T,b)),ka(s,R);const P=R.tViews=Ul(2,R,l,d,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,R),P.queries=s.queries.embeddedTView(R)),R}(R,T,b,s,a,l,d,f,_):T.data[R];ei(P,!1);const F=b[11].createComment("");_g(T,b,F,P),kr(F,b),Bl(b,b[R]=GI(F,b,F,P)),du(P)&&Ed(T,b,P),null!=_&&Yw(b,P,w)}function wf(i){return Yi(Ct.lFrame.contextLView,20+i)}function Fg(i,s=Ze.Default){const a=De();return null===a?Dn(i,s):Ji(Rn(),a,B(i),s)}function cy(i,s,a){const l=De();return Yr(l,Ai(),s)&&bs(Ht(),On(),l,i,s,l[11],a,!1),cy}function Cf(i,s,a,l,d){const _=d?"class":"style";zI(i,a,s.inputs[_],_,l)}function dy(i,s,a,l){const d=De(),f=Ht(),_=20+i,w=d[11],b=d[_]=mr(w,s,Ct.lFrame.currentNamespace),T=f.firstCreatePass?function(i,s,a,l,d,f,_){const w=s.consts,T=rf(s,i,2,d,Qi(w,f));return wg(s,a,T,Qi(w,_)),null!==T.attrs&&bg(T,T.attrs,!1),null!==T.mergedAttrs&&bg(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(_,f,d,0,s,a,l):f.data[_];ei(T,!0);const R=T.mergedAttrs;null!==R&&qc(w,b,R);const P=T.classes;null!==P&&Vw(w,b,P);const F=T.styles;null!==F&&gI(w,b,F),64!=(64&T.flags)&&_g(f,d,b,T),0===Ct.lFrame.elementDepthCount&&kr(b,d),Ct.lFrame.elementDepthCount++,du(T)&&(Ed(f,d,T),function(i,s,a){if(nl(s)){const d=s.directiveEnd;for(let f=s.directiveStart;f<d;f++){const _=i.data[f];_.contentQueries&&_.contentQueries(1,a[f],f)}}}(f,T,d)),null!==l&&Yw(d,T)}function UE(){let i=Rn();Qo()?Ct.lFrame.isParent=!1:(i=i.parent,ei(i,!1));const s=i;Ct.lFrame.elementDepthCount--;const a=Ht();a.firstCreatePass&&(ka(a,i),nl(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function(i){return 0!=(16&i.flags)}(s)&&Cf(a,s,De(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function(i){return 0!=(32&i.flags)}(s)&&Cf(a,s,De(),s.stylesWithoutHost,!1)}function BE(i,s,a,l){dy(i,s,a,l),UE()}function TT(){return De()}function jE(i){return!!i&&"function"==typeof i.then}function DT(i){return!!i&&"function"==typeof i.subscribe}const hy=DT;function $E(i,s,a,l){const d=De(),f=Ht(),_=Rn();return function(i,s,a,l,d,f,_,w){const b=du(l),R=i.firstCreatePass&&fE(i),P=s[8],F=hE(s);let q=!0;if(3&l.type||w){const ie=pn(l,s),ke=w?w(ie):ie,Ce=F.length,ut=w?vt=>w(an(vt[l.index])):l.index;if(Pn(a)){let vt=null;if(!w&&b&&(vt=function(i,s,a,l){const d=i.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const _=d[f];if(_===a&&d[f+1]===l){const w=s[7],b=d[f+2];return w.length>b?w[b]:null}"string"==typeof _&&(f+=2)}return null}(i,s,d,l.index)),null!==vt)(vt.__ngLastListenerFn__||vt).__ngNextListenerFn__=f,vt.__ngLastListenerFn__=f,q=!1;else{f=bf(l,s,P,f,!1);const It=a.listen(ke,d,f);F.push(f,It),R&&R.push(d,ut,Ce,Ce+1)}}else f=bf(l,s,P,f,!0),ke.addEventListener(d,f,_),F.push(f),R&&R.push(d,ut,Ce,_)}else f=bf(l,s,P,f,!1);const Y=l.outputs;let de;if(q&&null!==Y&&(de=Y[d])){const ie=de.length;if(ie)for(let ke=0;ke<ie;ke+=2){const Fr=s[de[ke]][de[ke+1]].subscribe(f),Qs=F.length;F.push(f,Fr),R&&R.push(d,l.index,Qs,-(Qs+1))}}}(f,d,d[11],_,i,s,!!a,l),$E}function GE(i,s,a,l){try{return!1!==a(l)}catch(d){return gE(i,d),!1}}function bf(i,s,a,l,d){return function f(_){if(_===Function)return l;const w=2&i.flags?$r(i.index,s):s;0==(32&s[2])&&Cg(w);let b=GE(s,0,l,_),T=f.__ngNextListenerFn__;for(;T;)b=GE(s,0,T,_)&&b,T=T.__ngNextListenerFn__;return d&&!1===b&&(_.preventDefault(),_.returnValue=!1),b}}function qE(i=1){return function(i){return(Ct.lFrame.contextLView=function(i,s){for(;i>0;)s=s[15],i--;return s}(i,Ct.lFrame.contextLView))[8]}(i)}function NT(i,s,a,l,d){const f=i[a+1],_=null===s;let w=l?la(f):Uu(f),b=!1;for(;0!==w&&(!1===b||_);){const R=i[w+1];MT(i[w],s)&&(b=!0,i[w+1]=l?Hw(R):G_(R)),w=l?la(R):Uu(R)}b&&(i[a+1]=l?G_(f):Hw(f))}function MT(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Io(i,s)>=0}function my(i,s){return function(i,s,a,l){const d=De(),f=Ht(),_=ti(2);f.firstUpdatePass&&function(i,s,a,l){const d=i.data;if(null===d[a+1]){const f=d[qr()],_=function(i,s){return s>=i.expandoStartIndex}(i,a);(function(i,s){return 0!=(i.flags&(s?16:32))})(f,l)&&null===s&&!_&&(s=!1),s=function(i,s,a,l){const d=function(i){const s=Ct.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=l?s.residualClasses:s.residualStyles;if(null===d)0===(l?s.classBindings:s.styleBindings)&&(a=Df(a=e0(null,i,s,a,l),s.attrs,l),f=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==d)if(a=e0(d,i,s,a,l),null===f){let b=function(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==Uu(l))return i[la(l)]}(i,s,l);void 0!==b&&Array.isArray(b)&&(b=e0(null,i,s,b[1],l),b=Df(b,s.attrs,l),function(i,s,a,l){i[la(a?s.classBindings:s.styleBindings)]=l}(i,s,l,b))}else f=function(i,s,a){let l;const d=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<d;f++)l=Df(l,i[f].hostAttrs,a);return Df(l,s.attrs,a)}(i,s,l)}return void 0!==f&&(l?s.residualClasses=f:s.residualStyles=f),a}(d,f,s,l),function(i,s,a,l,d,f){let _=f?s.classBindings:s.styleBindings,w=la(_),b=Uu(_);i[l]=a;let R,T=!1;if(Array.isArray(a)){const P=a;R=P[1],(null===R||Io(P,R)>0)&&(T=!0)}else R=a;if(d)if(0!==b){const F=la(i[w+1]);i[l+1]=$_(F,w),0!==F&&(i[F+1]=$w(i[F+1],l)),i[w+1]=function(i,s){return 131071&i|s<<17}(i[w+1],l)}else i[l+1]=$_(w,0),0!==w&&(i[w+1]=$w(i[w+1],l)),w=l;else i[l+1]=$_(b,0),0===w?w=l:i[b+1]=$w(i[b+1],l),b=l;T&&(i[l+1]=G_(i[l+1])),NT(i,R,l,!0),NT(i,R,l,!1),function(i,s,a,l,d){const f=d?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&Io(f,s)>=0&&(a[l+1]=Hw(a[l+1]))}(s,R,i,l,f),_=$_(w,b),f?s.classBindings=_:s.styleBindings=_}(d,f,s,a,_,l)}}(f,i,_,l),s!==kt&&Yr(d,_,s)&&function(i,s,a,l,d,f,_,w){if(!(3&s.type))return;const b=i.data,T=b[w+1];Sf(function(i){return 1==(1&i)}(T)?vy(b,s,a,d,Uu(T),_):void 0)||(Sf(f)||function(i){return 2==(2&i)}(T)&&(f=vy(b,null,a,d,w,_)),function(i,s,a,l,d){const f=Pn(i);if(s)d?f?i.addClass(a,l):a.classList.add(l):f?i.removeClass(a,l):a.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:xo.DashCase;if(null==d)f?i.removeStyle(a,l,_):a.style.removeProperty(l);else{const w="string"==typeof d&&d.endsWith("!important");w&&(d=d.slice(0,-10),_|=xo.Important),f?i.setStyle(a,l,d,_):a.style.setProperty(l,d,w?"important":"")}}}(l,_,mu(qr(),a),d,f))}(f,f.data[qr()],d,d[11],i,d[_+1]=function(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=J(ia(i)))),i}(s,a),l,_)}(i,s,null,!0),my}function e0(i,s,a,l,d){let f=null;const _=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<_&&(f=s[w],l=Df(l,f.hostAttrs,d),f!==i);)w++;return null!==i&&(a.directiveStylingLast=w),l}function Df(i,s,a){const l=a?1:2;let d=-1;if(null!==s)for(let f=0;f<s.length;f++){const _=s[f];"number"==typeof _?d=_:d===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),$n(i,_,!!a||s[++f]))}return void 0===i?null:i}function vy(i,s,a,l,d,f){const _=null===s;let w;for(;d>0;){const b=i[d],T=Array.isArray(b),R=T?b[1]:b,P=null===R;let F=a[d+1];F===kt&&(F=P?Pt:void 0);let q=P?zr(F,l):R===l?F:void 0;if(T&&!Sf(q)&&(q=zr(b,l)),Sf(q)&&(w=q,_))return w;const Y=i[d+1];d=_?la(Y):Uu(Y)}if(null!==s){let b=f?s.residualClasses:s.residualStyles;null!=b&&(w=zr(b,l))}return w}function Sf(i){return void 0!==i}function Ey(i,s=""){const a=De(),l=Ht(),d=i+20,f=l.firstCreatePass?rf(l,d,1,s,null):l.data[d],_=a[d]=function(i,s){return Pn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);_g(l,a,_,f),ei(f,!1)}function Cy(i){return by("",i,""),Cy}function by(i,s,a){const l=De(),d=function(i,s,a,l){return Yr(i,Ai(),a)?s+oe(a)+l:kt}(l,i,s,a);return d!==kt&&Xa(l,qr(),d),by}function Af(i,s,a,l,d){const f=De(),_=function(i,s,a,l,d,f){const w=ql(i,Gr(),a,d);return ti(2),w?s+oe(a)+l+oe(d)+f:kt}(f,i,s,a,l,d);return _!==kt&&Xa(f,qr(),_),Af}function Sy(i,s,a){const l=De();return Yr(l,Ai(),s)&&bs(Ht(),On(),l,i,s,l[11],a,!0),Sy}const Nd=void 0;var Ay=["en",[["a","p"],["AM","PM"],Nd],[["AM","PM"],Nd,Nd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Nd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Nd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Nd,"{1} 'at' {0}",Nd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(i){const s=Math.floor(Math.abs(i)),a=i.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let Nf={};function d0(i){const s=function(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=h0(s);if(a)return a;const l=s.split("-")[0];if(a=h0(l),a)return a;if("en"===l)return Ay;throw new Error(`Missing locale data for the locale "${i}".`)}function JT(i){return d0(i)[yt.PluralCase]}function h0(i){return i in Nf||(Nf[i]=wt.ng&&wt.ng.common&&wt.ng.common.locales&&wt.ng.common.locales[i]),Nf[i]}var yt=(()=>((yt=yt||{})[yt.LocaleId=0]="LocaleId",yt[yt.DayPeriodsFormat=1]="DayPeriodsFormat",yt[yt.DayPeriodsStandalone=2]="DayPeriodsStandalone",yt[yt.DaysFormat=3]="DaysFormat",yt[yt.DaysStandalone=4]="DaysStandalone",yt[yt.MonthsFormat=5]="MonthsFormat",yt[yt.MonthsStandalone=6]="MonthsStandalone",yt[yt.Eras=7]="Eras",yt[yt.FirstDayOfWeek=8]="FirstDayOfWeek",yt[yt.WeekendRange=9]="WeekendRange",yt[yt.DateFormat=10]="DateFormat",yt[yt.TimeFormat=11]="TimeFormat",yt[yt.DateTimeFormat=12]="DateTimeFormat",yt[yt.NumberSymbols=13]="NumberSymbols",yt[yt.NumberFormats=14]="NumberFormats",yt[yt.CurrencyCode=15]="CurrencyCode",yt[yt.CurrencySymbol=16]="CurrencySymbol",yt[yt.CurrencyName=17]="CurrencyName",yt[yt.Currencies=18]="Currencies",yt[yt.Directionality=19]="Directionality",yt[yt.PluralCase=20]="PluralCase",yt[yt.ExtraData=21]="ExtraData",yt))();const xy="en-US";let eD=xy;function tc(i){Xt(i,"Expected localeId to be defined"),"string"==typeof i&&(eD=i.toLowerCase().replace(/_/g,"-"))}function N0(i,s,a,l,d){if(i=B(i),Array.isArray(i))for(let f=0;f<i.length;f++)N0(i[f],s,a,l,d);else{const f=Ht(),_=De();let w=cf(i)?i:B(i.provide),b=YI(i);const T=Rn(),R=1048575&T.providerIndexes,P=T.directiveStart,F=T.providerIndexes>>20;if(cf(i)||!i.multi){const q=new ea(b,d,Fg),Y=P0(w,s,d?R:R+F,P);-1===Y?(Ri(Ls(T,_),f,w),M0(f,i,s.length),s.push(w),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(q),_.push(q)):(a[Y]=q,_[Y]=q)}else{const q=P0(w,s,R+F,P),Y=P0(w,s,R,R+F),de=q>=0&&a[q],ie=Y>=0&&a[Y];if(d&&!ie||!d&&!de){Ri(Ls(T,_),f,w);const ke=function(i,s,a,l,d){const f=new ea(i,a,Fg);return f.multi=[],f.index=s,f.componentProviders=0,vD(f,d,l&&!a),f}(d?b1:C1,a.length,d,l,b);!d&&ie&&(a[Y].providerFactory=ke),M0(f,i,s.length,0),s.push(w),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(ke),_.push(ke)}else M0(f,i,q>-1?q:Y,vD(a[d?Y:q],b,!d&&l));!d&&l&&ie&&a[Y].componentProviders++}}}function M0(i,s,a,l){const d=cf(s);if(d||function(i){return!!i.useClass}(s)){const _=(s.useClass||s).prototype.ngOnDestroy;if(_){const w=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const b=w.indexOf(a);-1===b?w.push(a,[l,_]):w[b+1].push(l,_)}else w.push(a,_)}}}function vD(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function P0(i,s,a,l){for(let d=a;d<l;d++)if(s[d]===i)return d;return-1}function C1(i,s,a,l){return O0(this.multi,[])}function b1(i,s,a,l){const d=this.multi;let f;if(this.providerFactory){const _=this.providerFactory.componentProviders,w=jn(a,a[1],this.providerFactory.index,l);f=w.slice(0,_),O0(d,f);for(let b=_;b<w.length;b++)f.push(w[b])}else f=[],O0(d,f);return f}function O0(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function wD(i,s=[]){return a=>{a.providersResolver=(l,d)=>function(i,s,a){const l=Ht();if(l.firstCreatePass){const d=fs(i);N0(a,l.data,l.blueprint,d,!0),N0(s,l.data,l.blueprint,d,!1)}}(l,d?d(i):i,s)}}class CD{}const ID="ngComponent";class sc{resolveComponentFactory(s){throw function(i){const s=Error(`No component factory found for ${J(i)}. Did you add it to @NgModule.entryComponents?`);return s[ID]=i,s}(s)}}let vr=(()=>{class i{}return i.NULL=new sc,i})();function My(...i){}function kf(i,s){return new nu(pn(i,s))}const AN=function(){return kf(Rn(),De())};let nu=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=AN,i})();function TD(i){return i instanceof nu?i.nativeElement:i}class Zg{}let xN=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>AD(),i})();const AD=function(){const i=De(),a=$r(Rn().index,i);return function(i){return i[11]}(Di(a)?a:i)};let xD=(()=>{class i{}return i.\u0275prov=Tt({token:i,providedIn:"root",factory:()=>null}),i})();class RD{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Kg=new RD("12.2.16");class NN{constructor(){}supports(s){return Rg(s)}create(s){return new MN(s)}}const D1=(i,s)=>s;class MN{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||D1}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,d=0,f=null;for(;a||l;){const _=!l||a&&a.currentIndex<ON(l,d,f)?a:l,w=ON(_,d,f),b=_.currentIndex;if(_===l)d--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)d++;else{f||(f=[]);const T=w-d,R=b-d;if(T!=R){for(let F=0;F<T;F++){const q=F<f.length?f[F]:f[F]=0,Y=q+F;R<=Y&&Y<T&&(f[F]=q+1)}f[_.previousIndex]=R-T}}w!==b&&s(_,w,b)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Rg(s))throw new Error(`Error trying to diff '${J(s)}'. Only arrays and iterables are allowed`);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,f,_,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)f=s[w],_=this._trackByFn(w,f),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,f,_,w)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,_,w),l=!0),a=a._next}else d=0,function(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[pf()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,w=>{_=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,w,_,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,_,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,d){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,d)):s=this._addAfter(new A1(a,l),f,d),s}_verifyReinsertion(s,a,l,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?s=this._reinsertAfter(f,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,f=s._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new PN),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new PN),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class A1{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class x1{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class PN{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new x1,this.map.set(a,l)),l.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ON(i,s,a){const l=i.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+s+d}class kN{constructor(){}supports(s){return s instanceof Map||xE(s)}create(){return new R1}}class R1{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||xE(s)))throw new Error(`Error trying to diff '${J(s)}'. Only maps and objects are allowed`)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const f=d._prev,_=d._next;return f&&(f._next=_),_&&(_._prev=f),d._next=null,d._prev=null,d}const l=new N1(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class N1{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function FN(){return new Yg([new NN])}let Yg=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||FN()),deps:[[i,new Zr,new ra]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Error(`Cannot find a differ supporting object '${a}' of type '${function(i){return i.name||typeof i}(a)}'`)}}return i.\u0275prov=Tt({token:i,providedIn:"root",factory:FN}),i})();function ND(){return new Ar([new kN])}let Ar=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||ND()),deps:[[i,new Zr,new ra]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(l)return l;throw new Error(`Cannot find a differ supporting object '${a}'`)}}return i.\u0275prov=Tt({token:i,providedIn:"root",factory:ND}),i})();function Ts(i,s,a,l,d=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&l.push(an(f)),_n(f))for(let w=10;w<f.length;w++){const b=f[w],T=b[1].firstChild;null!==T&&Ts(b[1],b,T,l)}const _=a.type;if(8&_)Ts(i,s,a.child,l);else if(32&_){const w=Yh(a,s);let b;for(;b=w();)l.push(b)}else if(16&_){const w=kw(s,a);if(Array.isArray(w))l.push(...w);else{const b=m(s[16]);Ts(b[1],b,w,l,!0)}}a=d?a.projectionNext:a.next}return l}class oc{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Ts(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(_n(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(pd(s,l),Eo(a,l))}this._attachedToViewContainer=!1}Jh(this._lView[1],this._lView)}onDestroy(s){Xw(this._lView[1],this._lView,null,s)}markForCheck(){Cg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){lE(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(i,s,a){Ma(!0);try{lE(i,s,a)}finally{Ma(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var s;this._appRef=null,md(this._lView[1],s=this._lView,s[11],2,null,null)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=s}}class k0 extends oc{constructor(s){super(s),this._view=s}detectChanges(){qI(this._view)}checkNoChanges(){!function(i){Ma(!0);try{qI(i)}finally{Ma(!1)}}(this._view)}get context(){return null}}const UN=function(i){return function(i,s,a){if(rl(i)&&!a){const l=$r(i.index,s);return new oc(l,l)}return 47&i.type?new oc(s[16],s):null}(Rn(),De(),16==(16&i))};let MD=(()=>{class i{}return i.__NG_ELEMENT_ID__=UN,i})();const $N=[new kN],ss=new Yg([new NN]),ky=new Ar($N),F0=function(){return Fy(Rn(),De())};let ac=(()=>{class i{}return i.__NG_ELEMENT_ID__=F0,i})();const L0=ac,V0=class extends L0{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=vg(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(l[19]=f.createEmbeddedView(a)),af(a,l,s),new oc(l)}};function Fy(i,s){return 4&i.type?new V0(s,i,kf(i,s)):null}class Od{}class OD{}const kD=function(){return B0(Rn(),De())};let kd=(()=>{class i{}return i.__NG_ELEMENT_ID__=kD,i})();const WN=kd,LD=class extends WN{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return kf(this._hostTNode,this._hostLView)}get injector(){return new vo(this._hostTNode,this._hostLView)}get parentInjector(){const s=at(this._hostTNode,this._hostLView);if(Au(s)){const a=_o(s,this._hostLView),l=Fa(s);return new vo(a[1].data[l+8],a)}return new vo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=VD(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const d=s.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(s,a,l,d,f){const _=l||this.parentInjector;if(!f&&null==s.ngModule&&_){const b=_.get(Od,null);b&&(f=b)}const w=s.create(_,d,void 0,f);return this.insert(w.hostView,a),w}insert(s,a){const l=s._lView,d=l[1];if(_n(l[3])){const R=this.indexOf(s);if(-1!==R)this.detach(R);else{const P=l[3],F=new LD(P,P[6],P[3]);F.detach(F.indexOf(s))}}const f=this._adjustIndex(a),_=this._lContainer;!function(i,s,a,l){const d=10+l,f=a.length;l>0&&(a[d-1][4]=s),l<f-10?(s[4]=a[d],ws(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const w=s[19];null!==w&&w.insertView(i),s[2]|=128}(d,l,_,f);const w=Fw(f,_),b=l[11],T=k_(b,_[7]);return null!==T&&function(i,s,a,l,d,f){l[0]=d,l[6]=s,md(i,l,a,1,d,f)}(d,_[6],b,l,T,w),s.attachToViewContainerRef(),ws(U0(_),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=VD(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=pd(this._lContainer,a);l&&(Eo(U0(this._lContainer),a),Jh(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=pd(this._lContainer,a);return l&&null!=Eo(U0(this._lContainer),a)?new oc(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function VD(i){return i[8]}function U0(i){return i[8]||(i[8]=[])}function B0(i,s){let a;const l=s[i.index];if(_n(l))a=l;else{let d;if(8&i.type)d=an(l);else{const f=s[11];d=f.createComment("");const _=pn(i,s);Fl(f,k_(f,_),d,function(i,s){return Pn(i)?i.nextSibling(s):s.nextSibling}(f,_),!1)}s[i.index]=a=GI(l,s,d,i),Bl(s,a)}return new LD(a,i,s)}const Uo={};class um extends vr{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=ct(s);return new uS(a,this.ngModule)}}function Ku(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}const Vi=new kn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Zh});class uS extends CD{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=s.selectors.map(Bx).join(","),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Ku(this.componentDef.inputs)}get outputs(){return Ku(this.componentDef.outputs)}create(s,a,l,d){const f=(d=d||this.ngModule)?function(i,s){return{get:(a,l,d)=>{const f=i.get(a,Uo,d);return f!==Uo||l===Uo?f:s.get(a,l,d)}}}(s,d.injector):s,_=f.get(Zg,Zo),w=f.get(xD,null),b=_.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",R=l?function(i,s,a){if(Pn(i))return i.selectRootElement(s,a===He.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(b,l,this.componentDef.encapsulation):mr(_.createRenderer(null,this.componentDef),T,function(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(T)),P=this.componentDef.onPush?576:528,F=function(i,s){return{components:[],scheduler:i||Zh,clean:oR,playerHandler:s||null,flags:0}}(),q=Ul(0,null,null,1,0,null,null,null,null,null),Y=vg(null,q,F,P,null,null,_,b,w,f);let de,ie;hl(Y);try{const ke=function(i,s,a,l,d,f){const _=a[1];a[20]=i;const b=rf(_,20,2,"#host",null),T=b.mergedAttrs=s.hostAttrs;null!==T&&(bg(b,T,!0),null!==i&&(qc(d,i,T),null!==b.classes&&Vw(d,i,b.classes),null!==b.styles&&gI(d,i,b.styles)));const R=l.createRenderer(i,s),P=vg(a,RI(s),null,s.onPush?64:16,a[20],b,l,R,f||null,null);return _.firstCreatePass&&(Ri(Ls(b,a),_,s.type),iE(_,b),BI(b,a.length,1)),Bl(a,P),a[20]=P}(R,this.componentDef,Y,_,b);if(R)if(l)qc(b,R,["ng-version",Kg.full]);else{const{attrs:Ce,classes:ut}=function(i){const s=[],a=[];let l=1,d=2;for(;l<i.length;){let f=i[l];if("string"==typeof f)2===d?""!==f&&s.push(f,i[++l]):8===d&&a.push(f);else{if(!ua(d))break;d=f}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Ce&&qc(b,R,Ce),ut&&ut.length>0&&Vw(b,R,ut.join(" "))}if(ie=_u(q,20),void 0!==a){const Ce=ie.projection=[];for(let ut=0;ut<this.ngContentSelectors.length;ut++){const vt=a[ut];Ce.push(null!=vt?Array.from(vt):null)}}de=function(i,s,a,l,d){const f=a[1],_=function(i,s,a){const l=Rn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),jI(i,l,s,sf(i,s,1,null),a));const d=jn(s,i,l.directiveStart,l);kr(d,s);const f=pn(l,s);return f&&kr(f,s),d}(f,a,s);if(l.components.push(_),i[8]=_,d&&d.forEach(b=>b(_,s)),s.contentQueries){const b=Rn();s.contentQueries(1,_,b.directiveStart)}const w=Rn();return!f.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(go(w.index),kI(a[1],w,0,w.directiveStart,w.directiveEnd,s),LI(s,_)),_}(ke,this.componentDef,Y,F,[IE]),af(q,Y,null)}finally{Du()}return new lS(this.componentType,de,kf(ie,Y),Y,ie)}}class lS extends class{}{constructor(s,a,l,d,f){super(),this.location=l,this._rootLView=d,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new k0(d),this.componentType=s}get injector(){return new vo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}const Ud=new Map;class hS extends Od{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new um(this);const l=Pr(s),d=s[mt]||null;d&&tc(d),this._bootstrapComponents=Gs(l.bootstrap),this._r3Injector=lf(s,a,[{provide:Od,useValue:this},{provide:vr,useValue:this.componentFactoryResolver}],J(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=rr.THROW_IF_NOT_FOUND,l=Ze.Default){return s===rr||s===Od||s===Cd?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class qy extends OD{constructor(s){super(),this.moduleType=s,null!==Pr(s)&&function(i){const s=new Set;!function a(l){const d=Pr(l,!0),f=d.id;null!==f&&(function(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${J(s)} vs ${J(s.name)}`)}(f,Ud.get(f),l),Ud.set(f,l));const _=Gs(d.imports);for(const w of _)s.has(w)||(s.add(w),a(w))}(i)}(s)}create(s){return new hS(this.moduleType,s)}}function lm(i,s,a,l,d,f,_){const w=s+a;return ql(i,w,d,f)?function(i,s,a){return i[s]=a}(i,w+2,_?l.call(_,d,f):l(d,f)):function(i,s){const a=i[s];return a===kt?void 0:a}(i,w+2)}function Ui(i,s){const a=Ht();let l;const d=i+20;a.firstCreatePass?(l=function(i,s){if(s)for(let a=s.length-1;a>=0;a--){const l=s[a];if(i===l.name)return l}throw new fe("302",`The pipe '${i}' could not be found!`)}(s,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,l.onDestroy)):l=a.data[d];const f=l.factory||(l.factory=Wo(l.type)),_=hr(Fg);try{const w=La(!1),b=f();return La(w),function(i,s,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=l}(a,De(),d,b),b}finally{hr(_)}}function wM(i,s,a,l){const d=i+20,f=De(),_=Yi(f,d);return function(i,s){ga.isWrapped(s)&&(s=ga.unwrap(s),i[Gr()]=kt);return s}(f,function(i,s){return i[1].data[s].pure}(f,d)?lm(f,function(){const i=Ct.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}(),s,_.transform,a,l,_):_.transform(a,l))}function cm(i){return s=>{setTimeout(i,void 0,s)}}const ru=class extends h.xQ{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var d,f,_;let w=s,b=a||(()=>null),T=l;if(s&&"object"==typeof s){const P=s;w=null===(d=P.next)||void 0===d?void 0:d.bind(P),b=null===(f=P.error)||void 0===f?void 0:f.bind(P),T=null===(_=P.complete)||void 0===_?void 0:_.bind(P)}this.__isAsync&&(b=cm(b),w&&(w=cm(w)),T&&(T=cm(T)));const R=super.subscribe({next:w,error:b,complete:T});return s instanceof X.w&&s.add(R),R}};function X1(){return this._results[pf()]()}class cC{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=pf(),l=cC.prototype;l[a]||(l[a]=X1)}get changes(){return this._changes||(this._changes=new ru)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const d=Pi(s);(this._changesDetected=!function(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let d=i[l],f=s[l];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class CS{constructor(s){this.queryList=s,this.matches=null}clone(){return new CS(this.queryList)}setDirty(){this.queryList.setDirty()}}class dC{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let f=0;f<l;f++){const _=a.getByIndex(f);d.push(this.queries[_.indexInDeclarationView].clone())}return new dC(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==mC(s,a).matches&&this.queries[a].setDirty()}}class dm{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class jd{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,f=this.getByIndex(l).embeddedTView(s,d);f&&(f.indexInDeclarationView=l,null!==a?a.push(f):a=[f])}return null!==a?new jd(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class jf{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new jf(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const f=l[d];this.matchTNodeWithReadOption(s,a,zy(a,f)),this.matchTNodeWithReadOption(s,a,_l(a,s,f,!1,!1))}else l===ac?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,_l(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===nu||d===kd||d===ac&&4&a.type)this.addMatch(a.index,-2);else{const f=_l(a,s,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function zy(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function hC(i,s,a,l){return-1===a?function(i,s){return 11&i.type?kf(i,s):4&i.type?Fy(i,s):null}(s,i):-2===a?function(i,s,a){return a===nu?kf(s,i):a===ac?Fy(s,i):a===kd?B0(s,i):void 0}(i,s,l):jn(i,i[1],a,s)}function bS(i,s,a,l){const d=s[19].queries[l];if(null===d.matches){const f=i.data,_=a.matches,w=[];for(let b=0;b<_.length;b+=2){const T=_[b];w.push(T<0?null:hC(s,f[T],_[b+1],a.metadata.read))}d.matches=w}return d.matches}function fC(i,s,a,l){const d=i.queries.getByIndex(a),f=d.matches;if(null!==f){const _=bS(i,s,d,a);for(let w=0;w<f.length;w+=2){const b=f[w];if(b>0)l.push(_[w/2]);else{const T=f[w+1],R=s[-b];for(let P=10;P<R.length;P++){const F=R[P];F[17]===F[3]&&fC(F[1],F,T,l)}if(null!==R[9]){const P=R[9];for(let F=0;F<P.length;F++){const q=P[F];fC(q[1],q,T,l)}}}}}return l}function pC(i){const s=De(),a=Ht(),l=Eh();Fs(l+1);const d=mC(a,l);if(i.dirty&&yu(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const f=d.crossesNgTemplate?fC(a,s,l,[]):bS(a,s,d,l);i.reset(f,TD),i.notifyOnChanges()}return!0}return!1}function gC(i,s,a,l){const d=Ht();if(d.firstCreatePass){const f=Rn();(function(i,s,a){null===i.queries&&(i.queries=new jd),i.queries.track(new jf(s,a))})(d,new dm(s,a,l),f.index),function(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function(i,s,a){const l=new cC(4==(4&a));Xw(i,s,l,l.destroy),null===s[19]&&(s[19]=new dC),s[19].queries.push(new CS(l))}(d,De(),a)}function IS(){return i=De(),s=Eh(),i[19].queries[s].queryList;var i,s}function mC(i,s){return i.queries.getByIndex(s)}const MC=new kn("Application Initializer");let $d=(()=>{class i{constructor(a){this.appInits=a,this.resolve=My,this.reject=My,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(jE(f))a.push(f);else if(hy(f)){const _=new Promise((w,b)=>{f.subscribe({complete:w,error:b})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Dn(MC,8))},i.\u0275prov=Tt({token:i,factory:i.\u0275fac}),i})();const GM=new kn("AppId"),_F={provide:GM,useFactory:function(){return`${ov()}${ov()}${ov()}`},deps:[]};function ov(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const qS=new kn("Platform Initializer"),qM=new kn("Platform ID"),WM=new kn("appBootstrapListener");let zM=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Tt({token:i,factory:i.\u0275fac}),i})();const av=new kn("LocaleId"),WS=new kn("DefaultCurrencyCode");class KM{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}const PC=function(i){return new qy(i)},YM=PC,QM=function(i){return Promise.resolve(PC(i))},zS=function(i){const s=PC(i),l=Gs(Pr(i).declarations).reduce((d,f)=>{const _=ct(f);return _&&d.push(new uS(_)),d},[]);return new KM(s,l)},JM=zS,XM=function(i){return Promise.resolve(zS(i))};let fm=(()=>{class i{constructor(){this.compileModuleSync=YM,this.compileModuleAsync=QM,this.compileModuleAndAllComponentsSync=JM,this.compileModuleAndAllComponentsAsync=XM}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Tt({token:i,factory:i.\u0275fac}),i})();const tP=(()=>Promise.resolve(0))();function kC(i){"undefined"==typeof Zone?tP.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class xr{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ru(!1),this.onMicrotaskEmpty=new ru(!1),this.onStable=new ru(!1),this.onError=new ru(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function(){let i=wt.requestAnimationFrame,s=wt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function(i){const s=()=>{!function(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(wt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,gm(i),i.isCheckStableRunning=!0,pm(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),gm(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,f,_,w)=>{try{return Gf(i),a.invokeTask(d,f,_,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),ZS(i)}},onInvoke:(a,l,d,f,_,w,b)=>{try{return Gf(i),a.invoke(d,f,_,w,b)}finally{i.shouldCoalesceRunChangeDetection&&s(),ZS(i)}},onHasTask:(a,l,d,f)=>{a.hasTask(d,f),l===d&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,gm(i),pm(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,l,d,f)=>(a.handleError(d,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!xr.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(xr.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,d){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+d,s,Xe,My,My);try{return f.runTask(_,a,l)}finally{f.cancelTask(_)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const Xe={};function pm(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function gm(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Gf(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function ZS(i){i._nesting--,pm(i)}class FC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ru,this.onMicrotaskEmpty=new ru,this.onStable=new ru,this.onError=new ru}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,d){return s.apply(a,l)}}let KS=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{xr.assertNotInAngularZone(),kC(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())kC(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(Dn(xr))},i.\u0275prov=Tt({token:i,factory:i.\u0275fac}),i})(),YS=(()=>{class i{constructor(){this._applications=new Map,qf.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return qf.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Tt({token:i,factory:i.\u0275fac}),i})();class rP{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function wi(i){qf=i}let qf=new rP,oi=!0,Qu=!1;function LC(){return Qu=!0,oi}function iP(){if(Qu)throw new Error("Cannot enable prod mode after platform setup.");oi=!1}let jo;const VC=new kn("AllowMultipleToken");class nA{constructor(s,a){this.name=s,this.token=a}}function BC(i,s,a=[]){const l=`Platform: ${s}`,d=new kn(l);return(f=[])=>{let _=dv();if(!_||_.injector.get(VC,!1))if(i)i(a.concat(f).concat({provide:d,useValue:!0}));else{const w=a.concat(f).concat({provide:d,useValue:!0},{provide:nn,useValue:"platform"});!function(i){if(jo&&!jo.destroyed&&!jo.injector.get(VC,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");jo=i.get(iA);const s=i.get(qS,null);s&&s.forEach(a=>a())}(rr.create({providers:w,name:l}))}return function(i){const s=dv();if(!s)throw new Error("No platform exists!");if(!s.injector.get(i,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return s}(d)}}function dv(){return jo&&!jo.destroyed?jo:null}let iA=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const w=function(i,s){let a;return a="noop"===i?new FC:("zone.js"===i?void 0:i)||new xr({enableLongStackTrace:LC(),shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),b=[{provide:xr,useValue:w}];return w.run(()=>{const T=rr.create({providers:b,parent:this.injector,name:a.moduleType.name}),R=a.create(T),P=R.injector.get(kl,null);if(!P)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return w.runOutsideAngular(()=>{const F=w.onError.subscribe({next:q=>{P.handleError(q)}});R.onDestroy(()=>{hv(this._modules,R),F.unsubscribe()})}),function(i,s,a){try{const l=a();return jE(l)?l.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(P,w,()=>{const F=R.injector.get($d);return F.runInitializers(),F.donePromise.then(()=>(tc(R.injector.get(av,xy)||xy),this._moduleDoBootstrap(R),R))})})}bootstrapModule(a,l=[]){const d=jC({},l);return function(i,s,a){const l=new qy(a);return Promise.resolve(l)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const l=a.injector.get(Hd);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Error(`The module ${J(a.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Dn(rr))},i.\u0275prov=Tt({token:i,factory:i.\u0275fac}),i})();function jC(i,s){return Array.isArray(s)?s.reduce(jC,i):Object.assign(Object.assign({},i),s)}let Hd=(()=>{class i{constructor(a,l,d,f,_){this._zone=a,this._injector=l,this._exceptionHandler=d,this._componentFactoryResolver=f,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new L.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),b=new L.y(T=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{xr.assertNotInAngularZone(),kC(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const P=this._zone.onUnstable.subscribe(()=>{xr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{R.unsubscribe(),P.unsubscribe()}});this.isStable=(0,ae.T)(w,b.pipe((0,re.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let d;d=a instanceof CD?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(d.componentType);const f=function(i){return i.isBoundToModule}(d)?void 0:this._injector.get(Od),w=d.create(rr.NULL,[],l||d.selector,f),b=w.location.nativeElement,T=w.injector.get(KS,null),R=T&&w.injector.get(YS);return T&&R&&R.registerApplication(b,T),w.onDestroy(()=>{this.detachView(w.hostView),hv(this.components,w),R&&R.unregisterApplication(b)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;hv(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(WM,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Dn(xr),Dn(rr),Dn(kl),Dn(vr),Dn($d))},i.\u0275prov=Tt({token:i,factory:i.\u0275fac}),i})();function hv(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}class fv{}class hA{}const aP={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let uP=(()=>{class i{constructor(a,l){this._compiler=a,this._config=l||aP}load(a){return this.loadAndCompile(a)}loadAndCompile(a){let[l,d]=a.split("#");return void 0===d&&(d="default"),V(8255)(l).then(f=>f[d]).then(f=>Ei(f,l,d)).then(f=>this._compiler.compileModuleAsync(f))}loadFactory(a){let[l,d]=a.split("#"),f="NgFactory";return void 0===d&&(d="default",f=""),V(8255)(this._config.factoryPathPrefix+l+this._config.factoryPathSuffix).then(_=>_[d+f]).then(_=>Ei(_,l,d))}}return i.\u0275fac=function(a){return new(a||i)(Dn(fm),Dn(hA,8))},i.\u0275prov=Tt({token:i,factory:i.\u0275fac}),i})();function Ei(i,s,a){if(!i)throw new Error(`Cannot find '${a}' in '${s}'`);return i}const YC=function(i){return null},QC=BC(null,"core",[{provide:qM,useValue:"unknown"},{provide:iA,deps:[rr]},{provide:YS,deps:[]},{provide:zM,deps:[]}]),eb=[{provide:Hd,useClass:Hd,deps:[xr,rr,kl,vr,$d]},{provide:Vi,deps:[xr],useFactory:function(i){let s=[];return i.onStable.subscribe(()=>{for(;s.length;)s.pop()()}),function(a){s.push(a)}}},{provide:$d,useClass:$d,deps:[[new ra,MC]]},{provide:fm,useClass:fm,deps:[]},_F,{provide:Yg,useFactory:function(){return ss},deps:[]},{provide:Ar,useFactory:function(){return ky},deps:[]},{provide:av,useFactory:function(i){return tc(i=i||"undefined"!=typeof $localize&&$localize.locale||xy),i},deps:[[new $a(av),new ra,new Zr]]},{provide:WS,useValue:"USD"}];let yA=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Dn(Hd))},i.\u0275mod=_t({type:i}),i.\u0275inj=mn({providers:eb}),i})()},8939:(tt,be,V)=>{"use strict";V.d(be,{hO:()=>te,xv:()=>ne,Dh:()=>J,GT:()=>K,cc:()=>ue,on:()=>U,pX:()=>re});var h=V(7716),X=V(7841),L=V(8971);tt=V.hmd(tt);const ae=["ngOnDestroy"],re=(oe,he,Oe,$e={})=>new Proxy(oe,{get:(ht,Qe)=>Oe.runOutsideAngular(()=>{var Et;if(oe[Qe])return(null===(Et=null==$e?void 0:$e.spy)||void 0===Et?void 0:Et.get)&&$e.spy.get(Qe,oe[Qe]),oe[Qe];if(ae.indexOf(Qe)>-1)return()=>{};const lt=he.toPromise().then(We=>{const Se=We&&We[Qe];return"function"==typeof Se?Se.bind(We):Se&&Se.then?Se.then(Ee=>Oe.run(()=>Ee)):Oe.run(()=>Se)});return new Proxy(()=>{},{get:(We,Se)=>lt[Se],apply:(We,Se,Ee)=>lt.then(Ue=>{var Ie;const Be=Ue&&Ue(...Ee);return(null===(Ie=null==$e?void 0:$e.spy)||void 0===Ie?void 0:Ie.apply)&&$e.spy.apply(Qe,Ee,Be),Be})})})}),K=(oe,he)=>{he.forEach(Oe=>{Object.getOwnPropertyNames(Oe.prototype||Oe).forEach($e=>{Object.defineProperty(oe.prototype,$e,Object.getOwnPropertyDescriptor(Oe.prototype||Oe,$e))})})};class me{constructor(he){return he}}const J=new h.OlP("angularfire2.app.options"),ne=new h.OlP("angularfire2.app.name");function U(oe,he,Oe){const ht="object"==typeof Oe&&Oe||{};ht.name=ht.name||"string"==typeof Oe&&Oe||"[DEFAULT]";const Et=X.Z.apps.filter(lt=>lt&&lt.name===ht.name)[0]||he.runOutsideAngular(()=>X.Z.initializeApp(oe,ht));try{JSON.stringify(oe)!==JSON.stringify(Et.options)&&G("error",`${Et.name} Firebase App already initialized with different options${tt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(lt){}return new me(Et)}const G=(oe,...he)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[oe](...he)},B={provide:me,useFactory:U,deps:[J,h.R0b,[new h.FiY,ne]]};let te=(()=>{class oe{constructor(Oe){X.Z.registerVersion("angularfire",L.q4.full,"core"),X.Z.registerVersion("angularfire",L.q4.full,"app-compat"),X.Z.registerVersion("angular",h.q4F.full,Oe.toString())}static initializeApp(Oe,$e){return{ngModule:oe,providers:[{provide:J,useValue:Oe},{provide:ne,useValue:$e}]}}}return oe.\u0275fac=function(Oe){return new(Oe||oe)(h.LFG(h.Lbi))},oe.\u0275mod=h.oAB({type:oe}),oe.\u0275inj=h.cJS({providers:[B]}),oe})();function ue(oe,he,Oe,$e,ht){const[,Qe,Et]=globalThis.\u0275AngularfireInstanceCache.find(lt=>lt[0]===oe)||[];if(Qe)return function(oe,he){try{return oe.toString()===he.toString()}catch(Oe){return oe===he}}(ht,Et)||(Fe("error",`${he} was already initialized on the ${Oe} Firebase App with different settings.${pe?" You may need to reload as Firebase is not HMR aware.":""}`),Fe("warn",{is:ht,was:Et})),Qe;{const lt=$e();return globalThis.\u0275AngularfireInstanceCache.push([oe,lt,ht]),lt}}const pe=!!tt.hot,Fe=(oe,...he)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[oe](...he)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8971:(tt,be,V)=>{"use strict";V.d(be,{q4:()=>f_,iC:()=>$n,fc:()=>Fp,HU:()=>Mh,vb:()=>Oi,JM:()=>Pi});var h=V(7716),X=V(2329),L=V(8239),ae=V(8026),re=V(3854),K=V(3910),me=V(5422);const J="@firebase/installations",G="w:0.5.8",B="FIS_v2",oe=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function he(I){return I instanceof re.ZR&&I.code.includes("request-failed")}function Oe({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function $e(I){return{token:I.token,requestStatus:2,expiresIn:Ee(I.expiresIn),creationTime:Date.now()}}function ht(I,A){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,L.Z)(function*(I,A){const j=(yield A.json()).error;return oe.create("request-failed",{requestName:I,serverCode:j.code,serverMessage:j.message,serverStatus:j.status})})).apply(this,arguments)}function Et({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function lt(I,{refreshToken:A}){const M=Et(I);return M.append("Authorization",function(I){return`${B} ${I}`}(A)),M}function We(I){return Se.apply(this,arguments)}function Se(){return(Se=(0,L.Z)(function*(I){const A=yield I();return A.status>=500&&A.status<600?I():A})).apply(this,arguments)}function Ee(I){return Number(I.replace("s","000"))}function Ie(I,A){return Be.apply(this,arguments)}function Be(){return(Be=(0,L.Z)(function*({appConfig:I,heartbeatServiceProvider:A},{fid:M}){const j=Oe(I),ee=Et(I),ce=A.getImmediate({optional:!0});if(ce){const bt=yield ce.getHeartbeatsHeader();bt&&ee.append("x-firebase-client",bt)}const ze={method:"POST",headers:ee,body:JSON.stringify({fid:M,authVersion:B,appId:I.appId,sdkVersion:G})},ft=yield We(()=>fetch(j,ze));if(ft.ok){const bt=yield ft.json();return{fid:bt.fid||M,registrationStatus:2,refreshToken:bt.refreshToken,authToken:$e(bt.authToken)}}throw yield ht("Create Installation",ft)})).apply(this,arguments)}function Te(I){return new Promise(A=>{setTimeout(A,I)})}const hn=/^[cdef][\w-]{21}$/;function An(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const M=function(I){return function(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return hn.test(M)?M:""}catch(I){return""}}function it(I){return`${I.appName}!${I.appId}`}const Nr=new Map;function fi(I,A){const M=it(I);Ln(M,A),function(I,A){const M=(!sn&&"BroadcastChannel"in self&&(sn=new BroadcastChannel("[Firebase] FID Change"),sn.onmessage=I=>{Ln(I.data.key,I.data.fid)}),sn);M&&M.postMessage({key:I,fid:A}),0===Nr.size&&sn&&(sn.close(),sn=null)}(M,A)}function Ln(I,A){const M=Nr.get(I);if(M)for(const j of M)j(A)}let sn=null;const sr="firebase-installations-store";let bi=null;function Me(){return bi||(bi=(0,re.X3)("firebase-installations-database",1,(I,A)=>{switch(A){case 0:I.createObjectStore(sr)}})),bi}function or(I,A){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,L.Z)(function*(I,A){const M=it(I),ee=(yield Me()).transaction(sr,"readwrite"),ce=ee.objectStore(sr),Ne=yield ce.get(M);return yield ce.put(A,M),yield ee.complete,(!Ne||Ne.fid!==A.fid)&&fi(I,A.fid),A})).apply(this,arguments)}function Jn(I){return qn.apply(this,arguments)}function qn(){return(qn=(0,L.Z)(function*(I){const A=it(I),j=(yield Me()).transaction(sr,"readwrite");yield j.objectStore(sr).delete(A),yield j.complete})).apply(this,arguments)}function hr(I,A){return io.apply(this,arguments)}function io(){return(io=(0,L.Z)(function*(I,A){const M=it(I),ee=(yield Me()).transaction(sr,"readwrite"),ce=ee.objectStore(sr),Ne=yield ce.get(M),ze=A(Ne);return void 0===ze?yield ce.delete(M):yield ce.put(ze,M),yield ee.complete,ze&&(!Ne||Ne.fid!==ze.fid)&&fi(I,ze.fid),ze})).apply(this,arguments)}function Cr(I){return br.apply(this,arguments)}function br(){return(br=(0,L.Z)(function*(I){let A;const M=yield hr(I.appConfig,j=>{const ee=Vn(j),ce=el(I,ee);return A=ce.registrationPromise,ce.installationEntry});return""===M.fid?{installationEntry:yield A}:{installationEntry:M,registrationPromise:A}})).apply(this,arguments)}function Vn(I){return pi(I||{fid:An(),registrationStatus:0})}function el(I,A){if(0===A.registrationStatus){if(!navigator.onLine)return{installationEntry:A,registrationPromise:Promise.reject(oe.create("app-offline"))};const M={fid:A.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:M,registrationPromise:function(I,A){return He.apply(this,arguments)}(I,M)}}return 1===A.registrationStatus?{installationEntry:A,registrationPromise:gt(I)}:{installationEntry:A}}function He(){return(He=(0,L.Z)(function*(I,A){try{const M=yield Ie(I,A);return or(I.appConfig,M)}catch(M){throw he(M)&&409===M.customData.serverCode?yield Jn(I.appConfig):yield or(I.appConfig,{fid:A.fid,registrationStatus:0}),M}})).apply(this,arguments)}function gt(I){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,L.Z)(function*(I){let A=yield Ns(I.appConfig);for(;1===A.registrationStatus;)yield Te(100),A=yield Ns(I.appConfig);if(0===A.registrationStatus){const{installationEntry:M,registrationPromise:j}=yield Cr(I);return j||M}return A})).apply(this,arguments)}function Ns(I){return hr(I,A=>{if(!A)throw oe.create("installation-not-found");return pi(A)})}function pi(I){return function(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function on(I,A){return so.apply(this,arguments)}function so(){return(so=(0,L.Z)(function*({appConfig:I,heartbeatServiceProvider:A},M){const j=ln(I,M),ee=lt(I,M),ce=A.getImmediate({optional:!0});if(ce){const bt=yield ce.getHeartbeatsHeader();bt&&ee.append("x-firebase-client",bt)}const ze={method:"POST",headers:ee,body:JSON.stringify({installation:{sdkVersion:G,appId:I.appId}})},ft=yield We(()=>fetch(j,ze));if(ft.ok)return $e(yield ft.json());throw yield ht("Generate Auth Token",ft)})).apply(this,arguments)}function ln(I,{fid:A}){return`${Oe(I)}/${A}/authTokens:generate`}function Pt(I){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,L.Z)(function*(I,A=!1){let M;const j=yield hr(I.appConfig,ce=>{if(!Qt(ce))throw oe.create("not-registered");const Ne=ce.authToken;if(!A&&z(Ne))return ce;if(1===Ne.requestStatus)return M=Ke(I,A),ce;{if(!navigator.onLine)throw oe.create("app-offline");const ze=Q(ce);return M=mt(I,ze),ze}});return M?yield M:j.authToken})).apply(this,arguments)}function Ke(I,A){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,L.Z)(function*(I,A){let M=yield ot(I.appConfig);for(;1===M.authToken.requestStatus;)yield Te(100),M=yield ot(I.appConfig);const j=M.authToken;return 0===j.requestStatus?Pt(I,A):j})).apply(this,arguments)}function ot(I){return hr(I,A=>{if(!Qt(A))throw oe.create("not-registered");return function(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(A.authToken)?Object.assign(Object.assign({},A),{authToken:{requestStatus:0}}):A})}function mt(I,A){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,L.Z)(function*(I,A){try{const M=yield on(I,A),j=Object.assign(Object.assign({},A),{authToken:M});return yield or(I.appConfig,j),M}catch(M){if(!he(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const j=Object.assign(Object.assign({},A),{authToken:{requestStatus:0}});yield or(I.appConfig,j)}else yield Jn(I.appConfig);throw M}})).apply(this,arguments)}function Qt(I){return void 0!==I&&2===I.registrationStatus}function z(I){return 2===I.requestStatus&&!function(I){const A=Date.now();return A<I.creationTime||I.creationTime+I.expiresIn<A+36e5}(I)}function Q(I){const A={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:A})}function je(){return(je=(0,L.Z)(function*(I){const A=I,{installationEntry:M,registrationPromise:j}=yield Cr(A);return j?j.catch(console.error):Pt(A).catch(console.error),M.fid})).apply(this,arguments)}function tn(){return(tn=(0,L.Z)(function*(I,A=!1){const M=I;return yield Mr(M),(yield Pt(M,A)).token})).apply(this,arguments)}function Mr(I){return Un.apply(this,arguments)}function Un(){return(Un=(0,L.Z)(function*(I){const{registrationPromise:A}=yield Cr(I);A&&(yield A)})).apply(this,arguments)}function Bt(I){return oe.create("missing-app-config-values",{valueName:I})}const fn="installations";(0,ae._registerComponent)(new K.wA(fn,I=>{const A=I.getProvider("app").getImmediate();return{app:A,appConfig:function(I){if(!I||!I.options)throw Bt("App Configuration");if(!I.name)throw Bt("App Name");const A=["projectId","apiKey","appId"];for(const M of A)if(!I.options[M])throw Bt(M);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(A),heartbeatServiceProvider:(0,ae._getProvider)(A,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ae._registerComponent)(new K.wA("installations-internal",I=>{const A=I.getProvider("app").getImmediate(),M=(0,ae._getProvider)(A,fn).getImmediate();return{getId:()=>function(I){return je.apply(this,arguments)}(M),getToken:ee=>function(I){return tn.apply(this,arguments)}(M,ee)}},"PRIVATE")),(0,ae.registerVersion)(J,"0.5.8"),(0,ae.registerVersion)(J,"0.5.8","esm2017");const En="@firebase/remote-config",In=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class rl{constructor(A,M,j,ee){this.client=A,this.storage=M,this.storageCache=j,this.logger=ee}isCachedDataFresh(A,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const j=Date.now()-M,ee=j<=A;return this.logger.debug(`Config fetch cache check. Cache age millis: ${j}. Cache max age millis (minimumFetchIntervalMillis setting): ${A}. Is cache hit: ${ee}.`),ee}fetch(A){var M=this;return(0,L.Z)(function*(){const[j,ee]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(ee&&M.isCachedDataFresh(A.cacheMaxAgeMillis,j))return ee;A.eTag=ee&&ee.eTag;const ce=yield M.client.fetch(A),Ne=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ce.status&&Ne.push(M.storage.setLastSuccessfulFetchResponse(ce)),yield Promise.all(Ne),ce})()}}function du(I=navigator){return I.languages&&I.languages[0]||I.language}class fs{constructor(A,M,j,ee,ce,Ne){this.firebaseInstallations=A,this.sdkVersion=M,this.namespace=j,this.projectId=ee,this.apiKey=ce,this.appId=Ne}fetch(A){var M=this;return(0,L.Z)(function*(){const[j,ee]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Ne=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":A.eTag||"*"},ft={sdk_version:M.sdkVersion,app_instance_id:j,app_instance_id_token:ee,app_id:M.appId,language_code:du()},bt={method:"POST",headers:ze,body:JSON.stringify(ft)},zt=fetch(Ne,bt),At=new Promise((To,Do)=>{A.signal.addEventListener(()=>{const js=new Error("The operation was aborted.");js.name="AbortError",Do(js)})});let Tr;try{yield Promise.race([zt,At]),Tr=yield zt}catch(To){let Do="fetch-client-network";throw"AbortError"===To.name&&(Do="fetch-timeout"),In.create(Do,{originalErrorMessage:To.message})}let tr=Tr.status;const ja=Tr.headers.get("ETag")||void 0;let Qc,na;if(200===Tr.status){let To;try{To=yield Tr.json()}catch(Do){throw In.create("fetch-client-parse",{originalErrorMessage:Do.message})}Qc=To.entries,na=To.state}if("INSTANCE_STATE_UNSPECIFIED"===na?tr=500:"NO_CHANGE"===na?tr=304:("NO_TEMPLATE"===na||"EMPTY_CONFIG"===na)&&(Qc={}),304!==tr&&200!==tr)throw In.create("fetch-status",{httpStatus:tr});return{status:tr,eTag:ja,config:Qc}})()}}class Sa{constructor(A,M){this.client=A,this.storage=M}fetch(A){var M=this;return(0,L.Z)(function*(){const j=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(A,j)})()}attemptFetch(A,{throttleEndTimeMillis:M,backoffCount:j}){var ee=this;return(0,L.Z)(function*(){yield function(I,A){return new Promise((M,j)=>{const ee=Math.max(A-Date.now(),0),ce=setTimeout(M,ee);I.addEventListener(()=>{clearTimeout(ce),j(In.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}(A.signal,M);try{const ce=yield ee.client.fetch(A);return yield ee.storage.deleteThrottleMetadata(),ce}catch(ce){if(!function(I){if(!(I instanceof re.ZR&&I.customData))return!1;const A=Number(I.customData.httpStatus);return 429===A||500===A||503===A||504===A}(ce))throw ce;const Ne={throttleEndTimeMillis:Date.now()+(0,re.$s)(j),backoffCount:j+1};return yield ee.storage.setThrottleMetadata(Ne),ee.attemptFetch(A,Ne)}})()}}class Ep{constructor(A,M,j,ee,ce){this.app=A,this._client=M,this._storageCache=j,this._storage=ee,this._logger=ce,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function hu(I,A){const M=I.target.error||void 0;return In.create(A,{originalErrorMessage:M&&M.message})}const Aa="app_namespace_store";class Rc{constructor(A,M,j,ee=function(){return new Promise((I,A)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=j=>{A(hu(j,"storage-open"))},M.onsuccess=j=>{I(j.target.result)},M.onupgradeneeded=j=>{const ee=j.target.result;switch(j.oldVersion){case 0:ee.createObjectStore(Aa,{keyPath:"compositeKey"})}}}catch(M){A(In.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=A,this.appName=M,this.namespace=j,this.openDbPromise=ee}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(A){return this.set("last_fetch_status",A)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(A){return this.set("last_successful_fetch_timestamp_millis",A)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(A){return this.set("last_successful_fetch_response",A)}getActiveConfig(){return this.get("active_config")}setActiveConfig(A){return this.set("active_config",A)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(A){return this.set("active_config_etag",A)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(A){return this.set("throttle_metadata",A)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(A){var M=this;return(0,L.Z)(function*(){const j=yield M.openDbPromise;return new Promise((ee,ce)=>{const ze=j.transaction([Aa],"readonly").objectStore(Aa),ft=M.createCompositeKey(A);try{const bt=ze.get(ft);bt.onerror=zt=>{ce(hu(zt,"storage-get"))},bt.onsuccess=zt=>{const At=zt.target.result;ee(At?At.value:void 0)}}catch(bt){ce(In.create("storage-get",{originalErrorMessage:bt&&bt.message}))}})})()}set(A,M){var j=this;return(0,L.Z)(function*(){const ee=yield j.openDbPromise;return new Promise((ce,Ne)=>{const ft=ee.transaction([Aa],"readwrite").objectStore(Aa),bt=j.createCompositeKey(A);try{const zt=ft.put({compositeKey:bt,value:M});zt.onerror=At=>{Ne(hu(At,"storage-set"))},zt.onsuccess=()=>{ce()}}catch(zt){Ne(In.create("storage-set",{originalErrorMessage:zt&&zt.message}))}})})()}delete(A){var M=this;return(0,L.Z)(function*(){const j=yield M.openDbPromise;return new Promise((ee,ce)=>{const ze=j.transaction([Aa],"readwrite").objectStore(Aa),ft=M.createCompositeKey(A);try{const bt=ze.delete(ft);bt.onerror=zt=>{ce(hu(zt,"storage-delete"))},bt.onsuccess=()=>{ee()}}catch(bt){ce(In.create("storage-delete",{originalErrorMessage:bt&&bt.message}))}})})()}createCompositeKey(A){return[this.appId,this.appName,this.namespace,A].join()}}class fh{constructor(A){this.storage=A}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var A=this;return(0,L.Z)(function*(){const M=A.storage.getLastFetchStatus(),j=A.storage.getLastSuccessfulFetchTimestampMillis(),ee=A.storage.getActiveConfig(),ce=yield M;ce&&(A.lastFetchStatus=ce);const Ne=yield j;Ne&&(A.lastSuccessfulFetchTimestampMillis=Ne);const ze=yield ee;ze&&(A.activeConfig=ze)})()}setLastFetchStatus(A){return this.lastFetchStatus=A,this.storage.setLastFetchStatus(A)}setLastSuccessfulFetchTimestampMillis(A){return this.lastSuccessfulFetchTimestampMillis=A,this.storage.setLastSuccessfulFetchTimestampMillis(A)}setActiveConfig(A){return this.activeConfig=A,this.storage.setActiveConfig(A)}}function gh(){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,L.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(I){return!1}})).apply(this,arguments)}(0,ae._registerComponent)(new K.wA("remote-config",function(A,{instanceIdentifier:M}){const j=A.getProvider("app").getImmediate(),ee=A.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw In.create("registration-window");if(!(0,re.hl)())throw In.create("indexed-db-unavailable");const{projectId:ce,apiKey:Ne,appId:ze}=j.options;if(!ce)throw In.create("registration-project-id");if(!Ne)throw In.create("registration-api-key");if(!ze)throw In.create("registration-app-id");const ft=new Rc(ze,j.name,M=M||"firebase"),bt=new fh(ft),zt=new me.Yd(En);zt.logLevel=me.in.ERROR;const At=new fs(ee,ae.SDK_VERSION,M,ce,Ne,ze),Tr=new Sa(At,ft),tr=new rl(Tr,ft,bt,zt),ja=new Ep(j,tr,bt,ft,zt);return function(I){const A=(0,re.m9)(I);A._initializePromise||(A._initializePromise=A._storageCache.loadFromStorage().then(()=>{A._isInitializationComplete=!0}))}(ja),ja},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(En,"0.3.7"),(0,ae.registerVersion)(En,"0.3.7","esm2017");const il="/firebase-messaging-sw.js",Mc="/firebase-cloud-messaging-push-scope",Pc="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",fu="google.c.a.c_id",Wo="google.c.a.c_l",Oc="google.c.a.ts",zo="google.c.a.e";var uo=(()=>{return(I=uo||(uo={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",uo;var I})();function Os(I){const A=new Uint8Array(I);return btoa(String.fromCharCode(...A)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ki(I){const M=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),j=atob(M),ee=new Uint8Array(j.length);for(let ce=0;ce<j.length;++ce)ee[ce]=j.charCodeAt(ce);return ee}const kc="fcm_token_details_db",Fc="fcm_token_object_Store";function _h(I){return _i.apply(this,arguments)}function _i(){return(_i=(0,L.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ce=>ce.name).includes(kc))return null;let A=null;return(yield(0,re.X3)(kc,5,function(){var j=(0,L.Z)(function*(ee,ce,Ne,ze){var ft;if(ce<2||!ee.objectStoreNames.contains(Fc))return;const bt=ze.objectStore(Fc),zt=yield bt.index("fcmSenderId").get(I);if(yield bt.clear(),zt)if(2===ce){const At=zt;if(!At.auth||!At.p256dh||!At.endpoint)return;A={token:At.fcmToken,createTime:null!==(ft=At.createTime)&&void 0!==ft?ft:Date.now(),subscriptionOptions:{auth:At.auth,p256dh:At.p256dh,endpoint:At.endpoint,swScope:At.swScope,vapidKey:"string"==typeof At.vapidKey?At.vapidKey:Os(At.vapidKey)}}}else if(3===ce){const At=zt;A={token:At.fcmToken,createTime:At.createTime,subscriptionOptions:{auth:Os(At.auth),p256dh:Os(At.p256dh),endpoint:At.endpoint,swScope:At.swScope,vapidKey:Os(At.vapidKey)}}}else if(4===ce){const At=zt;A={token:At.fcmToken,createTime:At.createTime,subscriptionOptions:{auth:Os(At.auth),p256dh:Os(At.p256dh),endpoint:At.endpoint,swScope:At.swScope,vapidKey:Os(At.vapidKey)}}}});return function(ee,ce,Ne,ze){return j.apply(this,arguments)}}())).close(),yield(0,re.Lj)(kc),yield(0,re.Lj)("fcm_vapid_details_db"),yield(0,re.Lj)("undefined"),pu(A)?A:null})).apply(this,arguments)}function pu(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:A}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof A.auth&&A.auth.length>0&&"string"==typeof A.p256dh&&A.p256dh.length>0&&"string"==typeof A.endpoint&&A.endpoint.length>0&&"string"==typeof A.swScope&&A.swScope.length>0&&"string"==typeof A.vapidKey&&A.vapidKey.length>0}const ks="firebase-messaging-store";let gs=null;function vh(){return gs||(gs=(0,re.X3)("firebase-messaging-database",1,(I,A)=>{switch(A){case 0:I.createObjectStore(ks)}})),gs}function Pn(I){return lo.apply(this,arguments)}function lo(){return(lo=(0,L.Z)(function*(I){const A=ho(I),j=yield(yield vh()).transaction(ks).objectStore(ks).get(A);if(j)return j;{const ee=yield _h(I.appConfig.senderId);if(ee)return yield Zo(I,ee),ee}})).apply(this,arguments)}function Zo(I,A){return gu.apply(this,arguments)}function gu(){return(gu=(0,L.Z)(function*(I,A){const M=ho(I),ee=(yield vh()).transaction(ks,"readwrite");return yield ee.objectStore(ks).put(A,M),yield ee.complete,A})).apply(this,arguments)}function an(I){return co.apply(this,arguments)}function co(){return(co=(0,L.Z)(function*(I){const A=ho(I),j=(yield vh()).transaction(ks,"readwrite");yield j.objectStore(ks).delete(A),yield j.complete})).apply(this,arguments)}function ho({appConfig:I}){return I.appId}const pn=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function al(I,A){return _u.apply(this,arguments)}function _u(){return(_u=(0,L.Z)(function*(I,A){const M=yield Qi(I),j=wu(A),ee={method:"POST",headers:M,body:JSON.stringify(j)};let ce;try{ce=yield(yield fetch(Ko(I.appConfig),ee)).json()}catch(Ne){throw pn.create("token-subscribe-failed",{errorInfo:Ne})}if(ce.error)throw pn.create("token-subscribe-failed",{errorInfo:ce.error.message});if(!ce.token)throw pn.create("token-subscribe-no-token");return ce.token})).apply(this,arguments)}function Yi(I,A){return $r.apply(this,arguments)}function $r(){return($r=(0,L.Z)(function*(I,A){const M=yield Qi(I),j=wu(A.subscriptionOptions),ee={method:"PATCH",headers:M,body:JSON.stringify(j)};let ce;try{ce=yield(yield fetch(`${Ko(I.appConfig)}/${A.token}`,ee)).json()}catch(Ne){throw pn.create("token-update-failed",{errorInfo:Ne})}if(ce.error)throw pn.create("token-update-failed",{errorInfo:ce.error.message});if(!ce.token)throw pn.create("token-update-no-token");return ce.token})).apply(this,arguments)}function yu(I,A){return vu.apply(this,arguments)}function vu(){return(vu=(0,L.Z)(function*(I,A){const j={method:"DELETE",headers:yield Qi(I)};try{const ce=yield(yield fetch(`${Ko(I.appConfig)}/${A}`,j)).json();if(ce.error)throw pn.create("token-unsubscribe-failed",{errorInfo:ce.error.message})}catch(ee){throw pn.create("token-unsubscribe-failed",{errorInfo:ee})}})).apply(this,arguments)}function Ko({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function Qi(I){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,L.Z)(function*({appConfig:I,installations:A}){const M=yield A.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function wu({p256dh:I,auth:A,endpoint:M,vapidKey:j}){const ee={web:{endpoint:M,auth:A,p256dh:I}};return j!==Pc&&(ee.web.applicationPubKey=j),ee}const Ct=6048e5;function Lc(I){return xa.apply(this,arguments)}function xa(){return(xa=(0,L.Z)(function*(I){const A=yield Ht(I.swRegistration,I.vapidKey),M={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:A.endpoint,auth:Os(A.getKey("auth")),p256dh:Os(A.getKey("p256dh"))},j=yield Pn(I.firebaseDependencies);if(j){if(Rn(j.subscriptionOptions,M))return Date.now()>=j.createTime+Ct?bp(I,{token:j.token,createTime:Date.now(),subscriptionOptions:M}):j.token;try{yield yu(I.firebaseDependencies,j.token)}catch(ee){console.warn(ee)}return fo(I.firebaseDependencies,M)}return fo(I.firebaseDependencies,M)})).apply(this,arguments)}function Vc(I){return ul.apply(this,arguments)}function ul(){return(ul=(0,L.Z)(function*(I){const A=yield Pn(I.firebaseDependencies);A&&(yield yu(I.firebaseDependencies,A.token),yield an(I.firebaseDependencies));const M=yield I.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function bp(I,A){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,L.Z)(function*(I,A){try{const M=yield Yi(I.firebaseDependencies,A),j=Object.assign(Object.assign({},A),{token:M,createTime:Date.now()});return yield Zo(I.firebaseDependencies,j),M}catch(M){throw yield Vc(I),M}})).apply(this,arguments)}function fo(I,A){return De.apply(this,arguments)}function De(){return(De=(0,L.Z)(function*(I,A){const j={token:yield al(I,A),createTime:Date.now(),subscriptionOptions:A};return yield Zo(I,j),j.token})).apply(this,arguments)}function Ht(I,A){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,L.Z)(function*(I,A){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ki(A)})})).apply(this,arguments)}function Rn(I,A){return A.vapidKey===I.vapidKey&&A.endpoint===I.endpoint&&A.auth===I.auth&&A.p256dh===I.p256dh}function Ra(I){const A={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function(I,A){if(!A.notification)return;I.notification={};const M=A.notification.title;M&&(I.notification.title=M);const j=A.notification.body;j&&(I.notification.body=j);const ee=A.notification.image;ee&&(I.notification.image=ee)}(A,I),function(I,A){!A.data||(I.data=A.data)}(A,I),function(I,A){if(!A.fcmOptions)return;I.fcmOptions={};const M=A.fcmOptions.link;M&&(I.fcmOptions.link=M);const j=A.fcmOptions.analytics_label;j&&(I.fcmOptions.analyticsLabel=j)}(A,I),A}function Na(I){return"object"==typeof I&&!!I&&fu in I}function wh(I,A){const M=[];for(let j=0;j<I.length;j++)M.push(I.charAt(j)),j<A.length&&M.push(A.charAt(j));return M.join("")}function Jo(I){return pn.create("missing-app-config-values",{valueName:I})}wh("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),wh("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ma{constructor(A,M,j){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ee=function(I){if(!I||!I.options)throw Jo("App Configuration Object");if(!I.name)throw Jo("App Name");const A=["projectId","apiKey","appId","messagingSenderId"],{options:M}=I;for(const j of A)if(!M[j])throw Jo(j);return{appName:I.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(A);this.firebaseDependencies={app:A,appConfig:ee,installations:M,analyticsProvider:j}}_delete(){return Promise.resolve()}}function ar(I){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,L.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(il,{scope:Mc}),I.swRegistration.update().catch(()=>{})}catch(A){throw pn.create("failed-service-worker-registration",{browserErrorMessage:A.message})}})).apply(this,arguments)}function Ip(I,A){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,L.Z)(function*(I,A){if(!A&&!I.swRegistration&&(yield ar(I)),A||!I.swRegistration){if(!(A instanceof ServiceWorkerRegistration))throw pn.create("invalid-sw-registration");I.swRegistration=A}})).apply(this,arguments)}function ti(I,A){return ll.apply(this,arguments)}function ll(){return(ll=(0,L.Z)(function*(I,A){A?I.vapidKey=A:I.vapidKey||(I.vapidKey=Pc)})).apply(this,arguments)}function cl(){return(cl=(0,L.Z)(function*(I,A){if(!navigator)throw pn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw pn.create("permission-blocked");return yield ti(I,null==A?void 0:A.vapidKey),yield Ip(I,null==A?void 0:A.serviceWorkerRegistration),Lc(I)})).apply(this,arguments)}function Bc(I,A,M){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,L.Z)(function*(I,A,M){const j=bu(A);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(j,{message_id:M[fu],message_name:M[Wo],message_time:M[Oc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function bu(I){switch(I){case uo.NOTIFICATION_CLICKED:return"notification_open";case uo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Fs(){return(Fs=(0,L.Z)(function*(I,A){const M=A.data;if(!M.isFirebaseMessaging)return;I.onMessageHandler&&M.messageType===uo.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Ra(M)):I.onMessageHandler.next(Ra(M)));const j=M.data;Na(j)&&"1"===j[zo]&&(yield Bc(I,M.messageType,j))})).apply(this,arguments)}const dl="@firebase/messaging";function Tu(){return jc.apply(this,arguments)}function jc(){return(jc=(0,L.Z)(function*(){try{yield(0,re.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ae._registerComponent)(new K.wA("messaging",I=>{const A=new Ma(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function(I,A){return Fs.apply(this,arguments)}(A,M)),A},"PUBLIC")),(0,ae._registerComponent)(new K.wA("messaging-internal",I=>{const A=I.getProvider("messaging").getImmediate();return{getToken:j=>function(I,A){return cl.apply(this,arguments)}(A,j)}},"PRIVATE")),(0,ae.registerVersion)(dl,"0.9.12"),(0,ae.registerVersion)(dl,"0.9.12","esm2017");const Oa="analytics",Ap="firebase_id",ka="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Xo="https://www.googletagmanager.com/gtag/js",Bn=new me.Yd("@firebase/analytics");function pl(I){return Promise.all(I.map(A=>A.catch(M=>M)))}function gl(I,A){const M=document.createElement("script");M.src=`${Xo}?l=${I}&id=${A}`,M.async=!0,document.head.appendChild(M)}function mo(I,A,M,j,ee,ce){return ea.apply(this,arguments)}function ea(){return(ea=(0,L.Z)(function*(I,A,M,j,ee,ce){const Ne=j[ee];try{if(Ne)yield A[Ne];else{const ft=(yield pl(M)).find(bt=>bt.measurementId===ee);ft&&(yield A[ft.appId])}}catch(ze){Bn.error(ze)}I("config",ee,ce)})).apply(this,arguments)}function Ch(I,A,M,j,ee){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,L.Z)(function*(I,A,M,j,ee){try{let ce=[];if(ee&&ee.send_to){let Ne=ee.send_to;Array.isArray(Ne)||(Ne=[Ne]);const ze=yield pl(M);for(const ft of Ne){const bt=ze.find(At=>At.measurementId===ft),zt=bt&&A[bt.appId];if(!zt){ce=[];break}ce.push(zt)}}0===ce.length&&(ce=Object.values(A)),yield Promise.all(ce),I("event",j,ee||{})}catch(ce){Bn.error(ce)}})).apply(this,arguments)}function Rp(){const I=window.document.getElementsByTagName("script");for(const A of Object.values(I))if(A.src&&A.src.includes(Xo))return A;return null}const xi=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),_s=new class{constructor(A={},M=1e3){this.throttleMetadata=A,this.intervalMillis=M}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,M){this.throttleMetadata[A]=M}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}};function Wc(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Mp(I){return Au.apply(this,arguments)}function Au(){return(Au=(0,L.Z)(function*(I){var A;const{appId:M,apiKey:j}=I,ee={method:"GET",headers:Wc(j)},ce=ka.replace("{app-id}",M),Ne=yield fetch(ce,ee);if(200!==Ne.status&&304!==Ne.status){let ze="";try{const ft=yield Ne.json();(null===(A=ft.error)||void 0===A?void 0:A.message)&&(ze=ft.error.message)}catch(ft){}throw xi.create("config-fetch-failed",{httpStatus:Ne.status,responseMessage:ze})}return Ne.json()})).apply(this,arguments)}function Fa(I){return Pp.apply(this,arguments)}function Pp(){return(Pp=(0,L.Z)(function*(I,A=_s,M){const{appId:j,apiKey:ee,measurementId:ce}=I.options;if(!j)throw xi.create("no-app-id");if(!ee){if(ce)return{measurementId:ce,appId:j};throw xi.create("no-api-key")}const Ne=A.getThrottleMetadata(j)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ze=new bh;return setTimeout((0,L.Z)(function*(){ze.abort()}),void 0!==M?M:6e4),_o({appId:j,apiKey:ee,measurementId:ce},Ne,ze,A)})).apply(this,arguments)}function _o(I,A,M){return ys.apply(this,arguments)}function ys(){return(ys=(0,L.Z)(function*(I,{throttleEndTimeMillis:A,backoffCount:M},j,ee=_s){const{appId:ce,measurementId:Ne}=I;try{yield La(j,A)}catch(ze){if(Ne)return Bn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ne} provided in the "measurementId" field in the local Firebase config. [${ze.message}]`),{appId:ce,measurementId:Ne};throw ze}try{const ze=yield Mp(I);return ee.deleteThrottleMetadata(ce),ze}catch(ze){if(!gw(ze)){if(ee.deleteThrottleMetadata(ce),Ne)return Bn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ne} provided in the "measurementId" field in the local Firebase config. [${ze.message}]`),{appId:ce,measurementId:Ne};throw ze}const ft=503===Number(ze.customData.httpStatus)?(0,re.$s)(M,ee.intervalMillis,30):(0,re.$s)(M,ee.intervalMillis),bt={throttleEndTimeMillis:Date.now()+ft,backoffCount:M+1};return ee.setThrottleMetadata(ce,bt),Bn.debug(`Calling attemptFetch again in ${ft} millis`),_o(I,bt,j,ee)}})).apply(this,arguments)}function La(I,A){return new Promise((M,j)=>{const ee=Math.max(A-Date.now(),0),ce=setTimeout(M,ee);I.addEventListener(()=>{clearTimeout(ce),j(xi.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}function gw(I){if(!(I instanceof re.ZR&&I.customData))return!1;const A=Number(I.customData.httpStatus);return 429===A||500===A||503===A||504===A}class bh{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}function Op(){return Ih.apply(this,arguments)}function Ih(){return(Ih=(0,L.Z)(function*(){if(!(0,re.hl)())return Bn.warn(xi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(I){return Bn.warn(xi.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function Ls(){return(Ls=(0,L.Z)(function*(I,A,M,j,ee,ce,Ne){var ze;const ft=Fa(I);ft.then(tr=>{M[tr.measurementId]=tr.appId,I.options.measurementId&&tr.measurementId!==I.options.measurementId&&Bn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${tr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(tr=>Bn.error(tr)),A.push(ft);const bt=Op().then(tr=>{if(tr)return j.getId()}),[zt,At]=yield Promise.all([ft,bt]);Rp()||gl(ce,zt.measurementId),ee("js",new Date);const Tr=null!==(ze=null==Ne?void 0:Ne.config)&&void 0!==ze?ze:{};return Tr.origin="firebase",Tr.update=!0,null!=At&&(Tr[Ap]=At),ee("config",zt.measurementId,Tr),zt.measurementId})).apply(this,arguments)}class Dh{constructor(A){this.app=A}_delete(){return delete Gt[this.app.options.appId],Promise.resolve()}}let Gt={},at=[];const Ri={};let zc,Ji,xu="dataLayer",Wr=!1;function _l(I,A,M){!function(){const I=[];if((0,re.ru)()&&I.push("This is a browser extension environment."),(0,re.zI)()||I.push("Cookies are not available."),I.length>0){const A=I.map((j,ee)=>`(${ee+1}) ${j}`).join(" "),M=xi.create("invalid-analytics-context",{errorInfo:A});Bn.warn(M.message)}}();const j=I.options.appId;if(!j)throw xi.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw xi.create("no-api-key");Bn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Gt[j])throw xi.create("already-exists",{id:j});if(!Wr){!function(I){let A=[];Array.isArray(window[I])?A=window[I]:window[I]=A}(xu);const{wrappedGtag:ce,gtagCore:Ne}=function(I,A,M,j,ee){let ce=function(...Ne){window[j].push(arguments)};return window[ee]&&"function"==typeof window[ee]&&(ce=window[ee]),window[ee]=function(I,A,M,j){function ce(){return(ce=(0,L.Z)(function*(Ne,ze,ft){try{"event"===Ne?yield Ch(I,A,M,ze,ft):"config"===Ne?yield mo(I,A,M,j,ze,ft):I("set",ze)}catch(bt){Bn.error(bt)}})).apply(this,arguments)}return function(Ne,ze,ft){return ce.apply(this,arguments)}}(ce,I,A,M),{gtagCore:ce,wrappedGtag:window[ee]}}(Gt,at,Ri,xu,"gtag");Ji=ce,zc=Ne,Wr=!0}return Gt[j]=function(I,A,M,j,ee,ce,Ne){return Ls.apply(this,arguments)}(I,at,Ri,A,zc,xu,M),new Dh(I)}function yl(){return(yl=(0,L.Z)(function*(I,A,M,j,ee){if(ee&&ee.global)I("event",M,j);else{const ce=yield A;I("event",M,Object.assign(Object.assign({},j),{send_to:ce}))}})).apply(this,arguments)}function Xi(){return ni.apply(this,arguments)}function ni(){return(ni=(0,L.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(I){return!1}})).apply(this,arguments)}const kn="@firebase/analytics";(0,ae._registerComponent)(new K.wA(Oa,(A,{options:M})=>_l(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ae._registerComponent)(new K.wA("analytics-internal",function(A){try{const M=A.getProvider(Oa).getImmediate();return{logEvent:(j,ee,ce)=>function(I,A,M,j){I=(0,re.m9)(I),function(I,A,M,j,ee){return yl.apply(this,arguments)}(Ji,Gt[I.app.options.appId],A,M,j).catch(ee=>Bn.error(ee))}(M,j,ee,ce)}}catch(M){throw xi.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ae.registerVersion)(kn,"0.7.8"),(0,ae.registerVersion)(kn,"0.7.8","esm2017");var Ah=V(7771),h_=V(3637),mw=V(3342),Us=V(309),Va=V(2639);const f_=new h.GfV("7.3.0"),xh="__angularfire_symbol__analyticsIsSupportedValue",Mi="__angularfire_symbol__analyticsIsSupported",Rh="__angularfire_symbol__remoteConfigIsSupportedValue",wo="__angularfire_symbol__remoteConfigIsSupported",Bs="__angularfire_symbol__messagingIsSupportedValue",Wn="__angularfire_symbol__messagingIsSupported";function Pi(I,A,M){if(A){if(1===A.length)return A[0];const ce=A.filter(Ne=>Ne.app===M);if(1===ce.length)return ce[0]}return M.container.getProvider(I).getImmediate({optional:!0})}globalThis[Mi]||(globalThis[Mi]=Xi().then(I=>globalThis[xh]=I).catch(()=>globalThis[xh]=!1)),globalThis[Wn]||(globalThis[Wn]=Tu().then(I=>globalThis[Bs]=I).catch(()=>globalThis[Bs]=!1)),globalThis[wo]||(globalThis[wo]=gh().then(I=>globalThis[Rh]=I).catch(()=>globalThis[Rh]=!1));const Oi=(I,A)=>{const M=A?[A]:(0,X.C6)(),j=[];return M.forEach(ee=>{ee.container.getProvider(I).instances.forEach(Ne=>{j.includes(Ne)||j.push(Ne)})}),j};function ws(){}class Eo{constructor(A,M=Ah.N){this.zone=A,this.delegate=M}now(){return this.delegate.now()}schedule(A,M,j){const ee=this.zone;return this.delegate.schedule(function(Ne){ee.runGuarded(()=>{A.apply(this,[Ne])})},M,j)}}class Co{constructor(A){this.zone=A,this.task=null}call(A,M){const j=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ws,{},ws,ws)),M.pipe((0,mw.b)({next:j,complete:j,error:j})).subscribe(A).add(j)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Mh=(()=>{class I{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new Eo(Zone.current)),this.insideAngular=M.run(()=>new Eo(Zone.current,h_.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(M){return new(M||I)(h.LFG(h.R0b))},I.\u0275prov=h.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function bo(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Fp(I){return I.pipe((0,Us.QV)(bo().outsideAngular))}function $n(I){return bo(),function(I){return function(M){return(M=M.lift(new Co(I.ngZone))).pipe((0,Va.R)(I.outsideAngular),(0,Us.QV)(I.insideAngular))}}(bo())(I)}},3854:(tt,be,V)=>{"use strict";V.d(be,{BH:()=>ue,LL:()=>Rt,ZR:()=>Te,gQ:()=>Me,zI:()=>Ue,hu:()=>L,g5:()=>ae,US:()=>me,tV:()=>U,h$:()=>J,L:()=>ne,$s:()=>wt,r3:()=>Ln,Sg:()=>fe,ne:()=>or,p$:()=>G,vZ:()=>wn,ZB:()=>B,Lj:()=>Ut,gK:()=>Cr,pd:()=>bi,m9:()=>ln,z$:()=>pe,GJ:()=>Tt,jU:()=>he,ru:()=>Oe,d:()=>ht,xb:()=>sn,w1:()=>Qe,hl:()=>Se,uI:()=>Fe,UG:()=>oe,Yr:()=>lt,b$:()=>$e,G6:()=>We,Mn:()=>Et,w9:()=>Gn,cI:()=>An,UI:()=>Qn,X3:()=>mt,xO:()=>ro,zd:()=>sr,DV:()=>mn,ug:()=>He,dS:()=>xn,Pz:()=>Xt,Dv:()=>io,Wj:()=>Vn,lb:()=>el,eu:()=>Ee});var h=V(8239);const L=function(z,H){if(!z)throw ae(H)},ae=function(z){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+z)},re=function(z){const H=[];let Q=0;for(let _e=0;_e<z.length;_e++){let se=z.charCodeAt(_e);se<128?H[Q++]=se:se<2048?(H[Q++]=se>>6|192,H[Q++]=63&se|128):55296==(64512&se)&&_e+1<z.length&&56320==(64512&z.charCodeAt(_e+1))?(se=65536+((1023&se)<<10)+(1023&z.charCodeAt(++_e)),H[Q++]=se>>18|240,H[Q++]=se>>12&63|128,H[Q++]=se>>6&63|128,H[Q++]=63&se|128):(H[Q++]=se>>12|224,H[Q++]=se>>6&63|128,H[Q++]=63&se|128)}return H},me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,H){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Q=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,_e=[];for(let se=0;se<z.length;se+=3){const je=z[se],_t=se+1<z.length,tn=_t?z[se+1]:0,Mr=se+2<z.length,Un=Mr?z[se+2]:0;let Mn=(15&tn)<<2|Un>>6,Ur=63&Un;Mr||(Ur=64,_t||(Mn=64)),_e.push(Q[je>>2],Q[(3&je)<<4|tn>>4],Q[Mn],Q[Ur])}return _e.join("")},encodeString(z,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(z):this.encodeByteArray(re(z),H)},decodeString(z,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(z):function(z){const H=[];let Q=0,_e=0;for(;Q<z.length;){const se=z[Q++];if(se<128)H[_e++]=String.fromCharCode(se);else if(se>191&&se<224){const je=z[Q++];H[_e++]=String.fromCharCode((31&se)<<6|63&je)}else if(se>239&&se<365){const Mr=((7&se)<<18|(63&z[Q++])<<12|(63&z[Q++])<<6|63&z[Q++])-65536;H[_e++]=String.fromCharCode(55296+(Mr>>10)),H[_e++]=String.fromCharCode(56320+(1023&Mr))}else{const je=z[Q++],_t=z[Q++];H[_e++]=String.fromCharCode((15&se)<<12|(63&je)<<6|63&_t)}}return H.join("")}(this.decodeStringToByteArray(z,H))},decodeStringToByteArray(z,H){this.init_();const Q=H?this.charToByteMapWebSafe_:this.charToByteMap_,_e=[];for(let se=0;se<z.length;){const je=Q[z.charAt(se++)],tn=se<z.length?Q[z.charAt(se)]:0;++se;const Un=se<z.length?Q[z.charAt(se)]:64;++se;const ct=se<z.length?Q[z.charAt(se)]:64;if(++se,null==je||null==tn||null==Un||null==ct)throw Error();_e.push(je<<2|tn>>4),64!==Un&&(_e.push(tn<<4&240|Un>>2),64!==ct&&_e.push(Un<<6&192|ct))}return _e},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}},J=function(z){const H=re(z);return me.encodeByteArray(H,!0)},ne=function(z){return J(z).replace(/\./g,"")},U=function(z){try{return me.decodeString(z,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function G(z){return B(void 0,z)}function B(z,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return H}for(const Q in H)!H.hasOwnProperty(Q)||!te(Q)||(z[Q]=B(z[Q],H[Q]));return z}function te(z){return"__proto__"!==z}class ue{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,Q)=>{this.resolve=H,this.reject=Q})}wrapCallback(H){return(Q,_e)=>{Q?this.reject(Q):this.resolve(_e),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(Q):H(Q,_e))}}}function fe(z,H){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const _e=H||"demo-project",se=z.iat||0,je=z.sub||z.user_id;if(!je)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const _t=Object.assign({iss:`https://securetoken.google.com/${_e}`,aud:_e,iat:se,exp:se+3600,auth_time:se,sub:je,user_id:je,firebase:{sign_in_provider:"custom",identities:{}}},z);return[ne(JSON.stringify({alg:"none",type:"JWT"})),ne(JSON.stringify(_t)),""].join(".")}function pe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Fe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pe())}function oe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(z){return!1}}function he(){return"object"==typeof self&&self.self===self}function Oe(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function $e(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ht(){return pe().indexOf("Electron/")>=0}function Qe(){const z=pe();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function Et(){return pe().indexOf("MSAppHost/")>=0}function lt(){return!1}function We(){return!oe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Se(){return"object"==typeof indexedDB}function Ee(){return new Promise((z,H)=>{try{let Q=!0;const _e="validate-browser-context-for-indexeddb-analytics-module",se=self.indexedDB.open(_e);se.onsuccess=()=>{se.result.close(),Q||self.indexedDB.deleteDatabase(_e),z(!0)},se.onupgradeneeded=()=>{Q=!1},se.onerror=()=>{var je;H((null===(je=se.error)||void 0===je?void 0:je.message)||"")}}catch(Q){H(Q)}})}function Ue(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Te extends Error{constructor(H,Q,_e){super(Q),this.code=H,this.customData=_e,this.name="FirebaseError",Object.setPrototypeOf(this,Te.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rt.prototype.create)}}class Rt{constructor(H,Q,_e){this.service=H,this.serviceName=Q,this.errors=_e}create(H,...Q){const _e=Q[0]||{},se=`${this.service}/${H}`,je=this.errors[H],_t=je?function(z,H){return z.replace($t,(Q,_e)=>{const se=H[_e];return null!=se?String(se):`<${_e}?>`})}(je,_e):"Error";return new Te(se,`${this.serviceName}: ${_t} (${se}).`,_e)}}const $t=/\{\$([^}]+)}/g;function An(z){return JSON.parse(z)}function Xt(z){return JSON.stringify(z)}const it=function(z){let H={},Q={},_e={},se="";try{const je=z.split(".");H=An(U(je[0])||""),Q=An(U(je[1])||""),se=je[2],_e=Q.d||{},delete Q.d}catch(je){}return{header:H,claims:Q,data:_e,signature:se}},Gn=function(z){const Q=it(z).claims;return!!Q&&"object"==typeof Q&&Q.hasOwnProperty("iat")},Tt=function(z){const H=it(z).claims;return"object"==typeof H&&!0===H.admin};function Ln(z,H){return Object.prototype.hasOwnProperty.call(z,H)}function mn(z,H){if(Object.prototype.hasOwnProperty.call(z,H))return z[H]}function sn(z){for(const H in z)if(Object.prototype.hasOwnProperty.call(z,H))return!1;return!0}function Qn(z,H,Q){const _e={};for(const se in z)Object.prototype.hasOwnProperty.call(z,se)&&(_e[se]=H.call(Q,z[se],se,z));return _e}function wn(z,H){if(z===H)return!0;const Q=Object.keys(z),_e=Object.keys(H);for(const se of Q){if(!_e.includes(se))return!1;const je=z[se],_t=H[se];if(Tn(je)&&Tn(_t)){if(!wn(je,_t))return!1}else if(je!==_t)return!1}for(const se of _e)if(!Q.includes(se))return!1;return!0}function Tn(z){return null!==z&&"object"==typeof z}function ro(z){const H=[];for(const[Q,_e]of Object.entries(z))Array.isArray(_e)?_e.forEach(se=>{H.push(encodeURIComponent(Q)+"="+encodeURIComponent(se))}):H.push(encodeURIComponent(Q)+"="+encodeURIComponent(_e));return H.length?"&"+H.join("&"):""}function sr(z){const H={};return z.replace(/^\?/,"").split("&").forEach(_e=>{if(_e){const[se,je]=_e.split("=");H[decodeURIComponent(se)]=decodeURIComponent(je)}}),H}function bi(z){const H=z.indexOf("?");if(!H)return"";const Q=z.indexOf("#",H);return z.substring(H,Q>0?Q:void 0)}class Me{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let H=1;H<this.blockSize;++H)this.pad_[H]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(H,Q){Q||(Q=0);const _e=this.W_;if("string"==typeof H)for(let ct=0;ct<16;ct++)_e[ct]=H.charCodeAt(Q)<<24|H.charCodeAt(Q+1)<<16|H.charCodeAt(Q+2)<<8|H.charCodeAt(Q+3),Q+=4;else for(let ct=0;ct<16;ct++)_e[ct]=H[Q]<<24|H[Q+1]<<16|H[Q+2]<<8|H[Q+3],Q+=4;for(let ct=16;ct<80;ct++){const Mn=_e[ct-3]^_e[ct-8]^_e[ct-14]^_e[ct-16];_e[ct]=4294967295&(Mn<<1|Mn>>>31)}let Un,zi,se=this.chain_[0],je=this.chain_[1],_t=this.chain_[2],tn=this.chain_[3],Mr=this.chain_[4];for(let ct=0;ct<80;ct++){ct<40?ct<20?(Un=tn^je&(_t^tn),zi=1518500249):(Un=je^_t^tn,zi=1859775393):ct<60?(Un=je&_t|tn&(je|_t),zi=2400959708):(Un=je^_t^tn,zi=3395469782);const Mn=(se<<5|se>>>27)+Un+Mr+zi+_e[ct]&4294967295;Mr=tn,tn=_t,_t=4294967295&(je<<30|je>>>2),je=se,se=Mn}this.chain_[0]=this.chain_[0]+se&4294967295,this.chain_[1]=this.chain_[1]+je&4294967295,this.chain_[2]=this.chain_[2]+_t&4294967295,this.chain_[3]=this.chain_[3]+tn&4294967295,this.chain_[4]=this.chain_[4]+Mr&4294967295}update(H,Q){if(null==H)return;void 0===Q&&(Q=H.length);const _e=Q-this.blockSize;let se=0;const je=this.buf_;let _t=this.inbuf_;for(;se<Q;){if(0===_t)for(;se<=_e;)this.compress_(H,se),se+=this.blockSize;if("string"==typeof H){for(;se<Q;)if(je[_t]=H.charCodeAt(se),++_t,++se,_t===this.blockSize){this.compress_(je),_t=0;break}}else for(;se<Q;)if(je[_t]=H[se],++_t,++se,_t===this.blockSize){this.compress_(je),_t=0;break}}this.inbuf_=_t,this.total_+=Q}digest(){const H=[];let Q=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let se=this.blockSize-1;se>=56;se--)this.buf_[se]=255&Q,Q/=256;this.compress_(this.buf_);let _e=0;for(let se=0;se<5;se++)for(let je=24;je>=0;je-=8)H[_e]=this.chain_[se]>>je&255,++_e;return H}}function or(z,H){const Q=new Ze(z,H);return Q.subscribe.bind(Q)}class Ze{constructor(H,Q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Q,this.task.then(()=>{H(this)}).catch(_e=>{this.error(_e)})}next(H){this.forEachObserver(Q=>{Q.next(H)})}error(H){this.forEachObserver(Q=>{Q.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,Q,_e){let se;if(void 0===H&&void 0===Q&&void 0===_e)throw new Error("Missing Observer.");se=function(z,H){if("object"!=typeof z||null===z)return!1;for(const Q of["next","error","complete"])if(Q in z&&"function"==typeof z[Q])return!0;return!1}(H)?H:{next:H,error:Q,complete:_e},void 0===se.next&&(se.next=hr),void 0===se.error&&(se.error=hr),void 0===se.complete&&(se.complete=hr);const je=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?se.error(this.finalError):se.complete()}catch(_t){}}),this.observers.push(se),je}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let Q=0;Q<this.observers.length;Q++)this.sendOne(Q,H)}sendOne(H,Q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{Q(this.observers[H])}catch(_e){"undefined"!=typeof console&&console.error&&console.error(_e)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hr(){}const io=function(z,H,Q,_e){let se;if(_e<H?se="at least "+H:_e>Q&&(se=0===Q?"none":"no more than "+Q),se)throw new Error(z+" failed: Was called with "+_e+(1===_e?" argument.":" arguments.")+" Expects "+se+".")};function Cr(z,H){return`${z} failed: ${H} argument `}function Vn(z,H,Q,_e){if((!_e||Q)&&"function"!=typeof Q)throw new Error(Cr(z,H)+"must be a valid function.")}function el(z,H,Q,_e){if((!_e||Q)&&("object"!=typeof Q||null===Q))throw new Error(Cr(z,H)+"must be a valid context object.")}const xn=function(z){const H=[];let Q=0;for(let _e=0;_e<z.length;_e++){let se=z.charCodeAt(_e);if(se>=55296&&se<=56319){const je=se-55296;_e++,L(_e<z.length,"Surrogate pair missing trail surrogate."),se=65536+(je<<10)+(z.charCodeAt(_e)-56320)}se<128?H[Q++]=se:se<2048?(H[Q++]=se>>6|192,H[Q++]=63&se|128):se<65536?(H[Q++]=se>>12|224,H[Q++]=se>>6&63|128,H[Q++]=63&se|128):(H[Q++]=se>>18|240,H[Q++]=se>>12&63|128,H[Q++]=se>>6&63|128,H[Q++]=63&se|128)}return H},He=function(z){let H=0;for(let Q=0;Q<z.length;Q++){const _e=z.charCodeAt(Q);_e<128?H++:_e<2048?H+=2:_e>=55296&&_e<=56319?(H+=4,Q++):H+=3}return H};function wt(z,H=1e3,Q=2){const _e=H*Math.pow(Q,z),se=Math.round(.5*_e*(Math.random()-.5)*2);return Math.min(144e5,_e+se)}function ln(z){return z&&z._delegate?z._delegate:z}function Pt(z,H){return new Promise((Q,_e)=>{z.onsuccess=se=>{Q(se.target.result)},z.onerror=se=>{var je;_e(`${H}: ${null===(je=se.target.error)||void 0===je?void 0:je.message}`)}})}class Dt{constructor(H){this._db=H,this.objectStoreNames=this._db.objectStoreNames}transaction(H,Q="readonly"){return new Ke(this._db.transaction.call(this._db,H,Q))}createObjectStore(H,Q){return new Ae(this._db.createObjectStore(H,Q))}close(){this._db.close()}}class Ke{constructor(H){this._transaction=H,this.complete=new Promise((Q,_e)=>{this._transaction.oncomplete=function(){Q()},this._transaction.onerror=()=>{_e(this._transaction.error)},this._transaction.onabort=()=>{_e(this._transaction.error)}})}objectStore(H){return new Ae(this._transaction.objectStore(H))}}class Ae{constructor(H){this._store=H}index(H){return new ot(this._store.index(H))}createIndex(H,Q,_e){return new ot(this._store.createIndex(H,Q,_e))}get(H){return Pt(this._store.get(H),"Error reading from IndexedDB")}put(H,Q){return Pt(this._store.put(H,Q),"Error writing to IndexedDB")}delete(H){return Pt(this._store.delete(H),"Error deleting from IndexedDB")}clear(){return Pt(this._store.clear(),"Error clearing IndexedDB object store")}}class ot{constructor(H){this._index=H}get(H){return Pt(this._index.get(H),"Error reading from IndexedDB")}}function mt(z,H,Q){return new Promise((_e,se)=>{try{const je=indexedDB.open(z,H);je.onsuccess=_t=>{_e(new Dt(_t.target.result))},je.onerror=_t=>{var tn;se(`Error opening indexedDB: ${null===(tn=_t.target.error)||void 0===tn?void 0:tn.message}`)},je.onupgradeneeded=_t=>{Q(new Dt(je.result),_t.oldVersion,_t.newVersion,new Ke(je.transaction))}}catch(je){se(`Error opening indexedDB: ${je.message}`)}})}function Ut(z){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,h.Z)(function*(z){return new Promise((H,Q)=>{try{const _e=indexedDB.deleteDatabase(z);_e.onsuccess=()=>{H()},_e.onerror=se=>{var je;Q(`Error deleting indexedDB database "${z}": ${null===(je=se.target.error)||void 0===je?void 0:je.message}`)}}catch(_e){Q(`Error deleting indexedDB database "${z}": ${_e.message}`)}})})).apply(this,arguments)}},8873:function(tt){tt.exports=function(){"use strict";var V=6e4,h=36e5,X="millisecond",L="second",ae="minute",re="hour",K="day",me="week",J="month",ne="quarter",U="year",G="date",B="Invalid Date",te=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,ue=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,fe={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},pe=function(We,Se,Ee){var Ue=String(We);return!Ue||Ue.length>=Se?We:""+Array(Se+1-Ue.length).join(Ee)+We},Fe={s:pe,z:function(We){var Se=-We.utcOffset(),Ee=Math.abs(Se),Ue=Math.floor(Ee/60),Ie=Ee%60;return(Se<=0?"+":"-")+pe(Ue,2,"0")+":"+pe(Ie,2,"0")},m:function We(Se,Ee){if(Se.date()<Ee.date())return-We(Ee,Se);var Ue=12*(Ee.year()-Se.year())+(Ee.month()-Se.month()),Ie=Se.clone().add(Ue,J),Be=Ee-Ie<0,Te=Se.clone().add(Ue+(Be?-1:1),J);return+(-(Ue+(Ee-Ie)/(Be?Ie-Te:Te-Ie))||0)},a:function(We){return We<0?Math.ceil(We)||0:Math.floor(We)},p:function(We){return{M:J,y:U,w:me,d:K,D:G,h:re,m:ae,s:L,ms:X,Q:ne}[We]||String(We||"").toLowerCase().replace(/s$/,"")},u:function(We){return void 0===We}},oe="en",he={};he[oe]=fe;var Oe=function(We){return We instanceof Et},$e=function We(Se,Ee,Ue){var Ie;if(!Se)return oe;if("string"==typeof Se){var Be=Se.toLowerCase();he[Be]&&(Ie=Be),Ee&&(he[Be]=Ee,Ie=Be);var Te=Se.split("-");if(!Ie&&Te.length>1)return We(Te[0])}else{var Rt=Se.name;he[Rt]=Se,Ie=Rt}return!Ue&&Ie&&(oe=Ie),Ie||!Ue&&oe},ht=function(We,Se){if(Oe(We))return We.clone();var Ee="object"==typeof Se?Se:{};return Ee.date=We,Ee.args=arguments,new Et(Ee)},Qe=Fe;Qe.l=$e,Qe.i=Oe,Qe.w=function(We,Se){return ht(We,{locale:Se.$L,utc:Se.$u,x:Se.$x,$offset:Se.$offset})};var Et=function(){function We(Ee){this.$L=$e(Ee.locale,null,!0),this.parse(Ee)}var Se=We.prototype;return Se.parse=function(Ee){this.$d=function(Ue){var Ie=Ue.date,Be=Ue.utc;if(null===Ie)return new Date(NaN);if(Qe.u(Ie))return new Date;if(Ie instanceof Date)return new Date(Ie);if("string"==typeof Ie&&!/Z$/i.test(Ie)){var Te=Ie.match(te);if(Te){var Rt=Te[2]-1||0,hn=(Te[7]||"0").substring(0,3);return Be?new Date(Date.UTC(Te[1],Rt,Te[3]||1,Te[4]||0,Te[5]||0,Te[6]||0,hn)):new Date(Te[1],Rt,Te[3]||1,Te[4]||0,Te[5]||0,Te[6]||0,hn)}}return new Date(Ie)}(Ee),this.$x=Ee.x||{},this.init()},Se.init=function(){var Ee=this.$d;this.$y=Ee.getFullYear(),this.$M=Ee.getMonth(),this.$D=Ee.getDate(),this.$W=Ee.getDay(),this.$H=Ee.getHours(),this.$m=Ee.getMinutes(),this.$s=Ee.getSeconds(),this.$ms=Ee.getMilliseconds()},Se.$utils=function(){return Qe},Se.isValid=function(){return this.$d.toString()!==B},Se.isSame=function(Ee,Ue){var Ie=ht(Ee);return this.startOf(Ue)<=Ie&&Ie<=this.endOf(Ue)},Se.isAfter=function(Ee,Ue){return ht(Ee)<this.startOf(Ue)},Se.isBefore=function(Ee,Ue){return this.endOf(Ue)<ht(Ee)},Se.$g=function(Ee,Ue,Ie){return Qe.u(Ee)?this[Ue]:this.set(Ie,Ee)},Se.unix=function(){return Math.floor(this.valueOf()/1e3)},Se.valueOf=function(){return this.$d.getTime()},Se.startOf=function(Ee,Ue){var Ie=this,Be=!!Qe.u(Ue)||Ue,Te=Qe.p(Ee),Rt=function(Gn,Tt){var Ln=Qe.w(Ie.$u?Date.UTC(Ie.$y,Tt,Gn):new Date(Ie.$y,Tt,Gn),Ie);return Be?Ln:Ln.endOf(K)},hn=function(Gn,Tt){return Qe.w(Ie.toDate()[Gn].apply(Ie.toDate("s"),(Be?[0,0,0,0]:[23,59,59,999]).slice(Tt)),Ie)},$t=this.$W,An=this.$M,Xt=this.$D,it="set"+(this.$u?"UTC":"");switch(Te){case U:return Be?Rt(1,0):Rt(31,11);case J:return Be?Rt(1,An):Rt(0,An+1);case me:var Nr=this.$locale().weekStart||0,fi=($t<Nr?$t+7:$t)-Nr;return Rt(Be?Xt-fi:Xt+(6-fi),An);case K:case G:return hn(it+"Hours",0);case re:return hn(it+"Minutes",1);case ae:return hn(it+"Seconds",2);case L:return hn(it+"Milliseconds",3);default:return this.clone()}},Se.endOf=function(Ee){return this.startOf(Ee,!1)},Se.$set=function(Ee,Ue){var Ie,Be=Qe.p(Ee),Te="set"+(this.$u?"UTC":""),Rt=(Ie={},Ie[K]=Te+"Date",Ie[G]=Te+"Date",Ie[J]=Te+"Month",Ie[U]=Te+"FullYear",Ie[re]=Te+"Hours",Ie[ae]=Te+"Minutes",Ie[L]=Te+"Seconds",Ie[X]=Te+"Milliseconds",Ie)[Be],hn=Be===K?this.$D+(Ue-this.$W):Ue;if(Be===J||Be===U){var $t=this.clone().set(G,1);$t.$d[Rt](hn),$t.init(),this.$d=$t.set(G,Math.min(this.$D,$t.daysInMonth())).$d}else Rt&&this.$d[Rt](hn);return this.init(),this},Se.set=function(Ee,Ue){return this.clone().$set(Ee,Ue)},Se.get=function(Ee){return this[Qe.p(Ee)]()},Se.add=function(Ee,Ue){var Ie,Be=this;Ee=Number(Ee);var Te=Qe.p(Ue),Rt=function(An){var Xt=ht(Be);return Qe.w(Xt.date(Xt.date()+Math.round(An*Ee)),Be)};if(Te===J)return this.set(J,this.$M+Ee);if(Te===U)return this.set(U,this.$y+Ee);if(Te===K)return Rt(1);if(Te===me)return Rt(7);var hn=(Ie={},Ie[ae]=V,Ie[re]=h,Ie[L]=1e3,Ie)[Te]||1,$t=this.$d.getTime()+Ee*hn;return Qe.w($t,this)},Se.subtract=function(Ee,Ue){return this.add(-1*Ee,Ue)},Se.format=function(Ee){var Ue=this,Ie=this.$locale();if(!this.isValid())return Ie.invalidDate||B;var Be=Ee||"YYYY-MM-DDTHH:mm:ssZ",Te=Qe.z(this),Rt=this.$H,hn=this.$m,$t=this.$M,An=Ie.weekdays,Xt=Ie.months,it=function(Tt,Ln,mn,sn){return Tt&&(Tt[Ln]||Tt(Ue,Be))||mn[Ln].slice(0,sn)},Nr=function(Tt){return Qe.s(Rt%12||12,Tt,"0")},fi=Ie.meridiem||function(Tt,Ln,mn){var sn=Tt<12?"AM":"PM";return mn?sn.toLowerCase():sn},Gn={YY:String(this.$y).slice(-2),YYYY:this.$y,M:$t+1,MM:Qe.s($t+1,2,"0"),MMM:it(Ie.monthsShort,$t,Xt,3),MMMM:it(Xt,$t),D:this.$D,DD:Qe.s(this.$D,2,"0"),d:String(this.$W),dd:it(Ie.weekdaysMin,this.$W,An,2),ddd:it(Ie.weekdaysShort,this.$W,An,3),dddd:An[this.$W],H:String(Rt),HH:Qe.s(Rt,2,"0"),h:Nr(1),hh:Nr(2),a:fi(Rt,hn,!0),A:fi(Rt,hn,!1),m:String(hn),mm:Qe.s(hn,2,"0"),s:String(this.$s),ss:Qe.s(this.$s,2,"0"),SSS:Qe.s(this.$ms,3,"0"),Z:Te};return Be.replace(ue,function(Tt,Ln){return Ln||Gn[Tt]||Te.replace(":","")})},Se.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},Se.diff=function(Ee,Ue,Ie){var Be,Te=Qe.p(Ue),Rt=ht(Ee),hn=(Rt.utcOffset()-this.utcOffset())*V,$t=this-Rt,An=Qe.m(this,Rt);return An=(Be={},Be[U]=An/12,Be[J]=An,Be[ne]=An/3,Be[me]=($t-hn)/6048e5,Be[K]=($t-hn)/864e5,Be[re]=$t/h,Be[ae]=$t/V,Be[L]=$t/1e3,Be)[Te]||$t,Ie?An:Qe.a(An)},Se.daysInMonth=function(){return this.endOf(J).$D},Se.$locale=function(){return he[this.$L]},Se.locale=function(Ee,Ue){if(!Ee)return this.$L;var Ie=this.clone(),Be=$e(Ee,Ue,!0);return Be&&(Ie.$L=Be),Ie},Se.clone=function(){return Qe.w(this.$d,this)},Se.toDate=function(){return new Date(this.valueOf())},Se.toJSON=function(){return this.isValid()?this.toISOString():null},Se.toISOString=function(){return this.$d.toISOString()},Se.toString=function(){return this.$d.toUTCString()},We}(),lt=Et.prototype;return ht.prototype=lt,[["$ms",X],["$s",L],["$m",ae],["$H",re],["$W",K],["$M",J],["$y",U],["$D",G]].forEach(function(We){lt[We[1]]=function(Se){return this.$g(Se,We[0],We[1])}}),ht.extend=function(We,Se){return We.$i||(We(Se,Et,ht),We.$i=!0),ht},ht.locale=$e,ht.isDayjs=Oe,ht.unix=function(We){return ht(1e3*We)},ht.en=he[oe],ht.Ls=he,ht.p={},ht}()},4292:function(tt){tt.exports=function(){"use strict";var be={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},V=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,h=/\d\d/,X=/\d\d?/,L=/\d*[^\s\d-_:/()]+/,ae={},re=function(B){return(B=+B)+(B>68?1900:2e3)},K=function(B){return function(te){this[B]=+te}},me=[/[+-]\d\d:?(\d\d)?|Z/,function(B){(this.zone||(this.zone={})).offset=function(te){if(!te||"Z"===te)return 0;var ue=te.match(/([+-]|\d\d)/g),fe=60*ue[1]+(+ue[2]||0);return 0===fe?0:"+"===ue[0]?-fe:fe}(B)}],J=function(B){var te=ae[B];return te&&(te.indexOf?te:te.s.concat(te.f))},ne=function(B,te){var ue,fe=ae.meridiem;if(fe){for(var pe=1;pe<=24;pe+=1)if(B.indexOf(fe(pe,0,te))>-1){ue=pe>12;break}}else ue=B===(te?"pm":"PM");return ue},U={A:[L,function(B){this.afternoon=ne(B,!1)}],a:[L,function(B){this.afternoon=ne(B,!0)}],S:[/\d/,function(B){this.milliseconds=100*+B}],SS:[h,function(B){this.milliseconds=10*+B}],SSS:[/\d{3}/,function(B){this.milliseconds=+B}],s:[X,K("seconds")],ss:[X,K("seconds")],m:[X,K("minutes")],mm:[X,K("minutes")],H:[X,K("hours")],h:[X,K("hours")],HH:[X,K("hours")],hh:[X,K("hours")],D:[X,K("day")],DD:[h,K("day")],Do:[L,function(B){var te=ae.ordinal,ue=B.match(/\d+/);if(this.day=ue[0],te)for(var fe=1;fe<=31;fe+=1)te(fe).replace(/\[|\]/g,"")===B&&(this.day=fe)}],M:[X,K("month")],MM:[h,K("month")],MMM:[L,function(B){var te=J("months"),ue=(J("monthsShort")||te.map(function(fe){return fe.slice(0,3)})).indexOf(B)+1;if(ue<1)throw new Error;this.month=ue%12||ue}],MMMM:[L,function(B){var te=J("months").indexOf(B)+1;if(te<1)throw new Error;this.month=te%12||te}],Y:[/[+-]?\d+/,K("year")],YY:[h,function(B){this.year=re(B)}],YYYY:[/\d{4}/,K("year")],Z:me,ZZ:me};return function(B,te,ue){ue.p.customParseFormat=!0,B&&B.parseTwoDigitYear&&(re=B.parseTwoDigitYear);var fe=te.prototype,pe=fe.parse;fe.parse=function(Fe){var oe=Fe.date,he=Fe.utc,Oe=Fe.args;this.$u=he;var $e=Oe[1];if("string"==typeof $e){var ht=!0===Oe[2],Qe=!0===Oe[3],Et=ht||Qe,lt=Oe[2];Qe&&(lt=Oe[2]),ae=this.$locale(),!ht&&lt&&(ae=ue.Ls[lt]),this.$d=function(Ue,Ie,Be){try{if(["x","X"].indexOf(Ie)>-1)return new Date(("X"===Ie?1e3:1)*Ue);var Te=function(B){var ue;ue=ae&&ae.formats;for(var fe=(B=B.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(ht,Qe,Et){var lt=Et&&Et.toUpperCase();return Qe||ue[Et]||be[Et]||ue[lt].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(We,Se,Ee){return Se||Ee.slice(1)})})).match(V),pe=fe.length,Fe=0;Fe<pe;Fe+=1){var oe=fe[Fe],he=U[oe],$e=he&&he[1];fe[Fe]=$e?{regex:he&&he[0],parser:$e}:oe.replace(/^\[|\]$/g,"")}return function(ht){for(var Qe={},Et=0,lt=0;Et<pe;Et+=1){var We=fe[Et];if("string"==typeof We)lt+=We.length;else{var Se=We.regex,Ee=We.parser,Ue=ht.slice(lt),Ie=Se.exec(Ue)[0];Ee.call(Qe,Ie),ht=ht.replace(Ie,"")}}return function(Be){var Te=Be.afternoon;if(void 0!==Te){var Rt=Be.hours;Te?Rt<12&&(Be.hours+=12):12===Rt&&(Be.hours=0),delete Be.afternoon}}(Qe),Qe}}(Ie)(Ue),Rt=Te.year,hn=Te.month,$t=Te.day,An=Te.hours,Xt=Te.minutes,it=Te.seconds,Nr=Te.milliseconds,fi=Te.zone,Gn=new Date,Tt=$t||(Rt||hn?1:Gn.getDate()),Ln=Rt||Gn.getFullYear(),mn=0;Rt&&!hn||(mn=hn>0?hn-1:Gn.getMonth());var sn=An||0,Qn=Xt||0,wn=it||0,Tn=Nr||0;return fi?new Date(Date.UTC(Ln,mn,Tt,sn,Qn,wn,Tn+60*fi.offset*1e3)):Be?new Date(Date.UTC(Ln,mn,Tt,sn,Qn,wn,Tn)):new Date(Ln,mn,Tt,sn,Qn,wn,Tn)}catch(ro){return new Date("")}}(oe,$e,he),this.init(),lt&&!0!==lt&&(this.$L=this.locale(lt).$L),Et&&oe!=this.format($e)&&(this.$d=new Date("")),ae={}}else if($e instanceof Array)for(var We=$e.length,Se=1;Se<=We;Se+=1){Oe[1]=$e[Se-1];var Ee=ue.apply(this,Oe);if(Ee.isValid()){this.$d=Ee.$d,this.$L=Ee.$L,this.init();break}Se===We&&(this.$d=new Date(""))}else pe.call(this,Fe)}}}()},2329:(tt,be,V)=>{"use strict";V.d(be,{Mq:()=>h.getApp,C6:()=>h.getApps});var h=V(8026);(0,h.registerVersion)("firebase","9.6.11","app")},7841:(tt,be,V)=>{"use strict";V.d(be,{Z:()=>h.Z});var h=V(3394);h.Z.registerVersion("firebase","9.6.11","app-compat")},3259:(tt,be,V)=>{"use strict";V.r(be);var h=V(8239),X=V(3394),L=V(3854),ae=V(8026);function J(v,p){var m={};for(var E in v)Object.prototype.hasOwnProperty.call(v,E)&&p.indexOf(E)<0&&(m[E]=v[E]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var D=0;for(E=Object.getOwnPropertySymbols(v);D<E.length;D++)p.indexOf(E[D])<0&&Object.prototype.propertyIsEnumerable.call(v,E[D])&&(m[E[D]]=v[E[D]])}return m}var Te=V(5422),Rt=V(3910);const Gn=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Tt=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ln=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),sn=new Te.Yd("@firebase/auth");function Qn(v,...p){sn.logLevel<=Te.in.ERROR&&sn.error(`Auth (${ae.SDK_VERSION}): ${v}`,...p)}function wn(v,...p){throw bi(v,...p)}function Tn(v,...p){return bi(v,...p)}function ro(v,p,m){const E=Object.assign(Object.assign({},Tt()),{[p]:m});return new L.LL("auth","Firebase",E).create(p,{appName:v.name})}function sr(v,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&wn(v,"argument-error"),ro(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function bi(v,...p){if("string"!=typeof v){const m=p[0],E=[...p.slice(1)];return E[0]&&(E[0].appName=v.name),v._errorFactory.create(m,...E)}return Ln.create(v,...p)}function Me(v,p,...m){if(!v)throw bi(p,...m)}function or(v){const p="INTERNAL ASSERTION FAILED: "+v;throw Qn(p),new Error(p)}function Ze(v,p){v||or(p)}const Jn=new Map;function qn(v){Ze(v instanceof Function,"Expected a class definition");let p=Jn.get(v);return p?(Ze(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,Jn.set(v,p),p)}function Cr(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function br(){return"http:"===Vn()||"https:"===Vn()}function Vn(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class He{constructor(p,m){this.shortDelay=p,this.longDelay=m,Ze(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(br()||(0,L.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function gt(v,p){Ze(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class Rs{static initialize(p,m,E){this.fetchImpl=p,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ns={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},pi=new He(3e4,6e4);function wt(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function on(v,p,m,E){return so.apply(this,arguments)}function so(){return(so=(0,h.Z)(function*(v,p,m,E,D={}){return ln(v,D,(0,h.Z)(function*(){let N={},W={};E&&("GET"===p?W=E:N={body:JSON.stringify(E)});const le=(0,L.xO)(Object.assign({key:v.config.apiKey},W)).slice(1),Le=yield v._getAdditionalHeaders();return Le["Content-Type"]="application/json",v.languageCode&&(Le["X-Firebase-Locale"]=v.languageCode),Rs.fetch()(Ae(v,v.config.apiHost,m,le),Object.assign({method:p,headers:Le,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function ln(v,p,m){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,h.Z)(function*(v,p,m){v._canInitEmulator=!1;const E=Object.assign(Object.assign({},Ns),p);try{const D=new ot(v),N=yield Promise.race([m(),D.promise]);D.clearNetworkTimeout();const W=yield N.json();if("needConfirmation"in W)throw mt(v,"account-exists-with-different-credential",W);if(N.ok&&!("errorMessage"in W))return W;{const le=N.ok?W.errorMessage:W.error.message,[Le,Re]=le.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw mt(v,"credential-already-in-use",W);if("EMAIL_EXISTS"===Le)throw mt(v,"email-already-in-use",W);const Je=E[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if(Re)throw ro(v,Je,Re);wn(v,Je)}}catch(D){if(D instanceof L.ZR)throw D;wn(v,"network-request-failed")}})).apply(this,arguments)}function Dt(v,p,m,E){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,h.Z)(function*(v,p,m,E,D={}){const N=yield on(v,p,m,E,D);return"mfaPendingCredential"in N&&wn(v,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function Ae(v,p,m,E){const D=`${p}${m}?${E}`;return v.config.emulator?gt(v.config,D):`${v.config.apiScheme}://${D}`}class ot{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(Tn(this.auth,"network-request-failed")),pi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function mt(v,p,m){const E={appName:v.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const D=Tn(v,p,E);return D.customData._tokenResponse=m,D}function Qt(){return(Qt=(0,h.Z)(function*(v,p){return on(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function z(v,p){return H.apply(this,arguments)}function H(){return(H=(0,h.Z)(function*(v,p){return on(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Q(v,p){return _e.apply(this,arguments)}function _e(){return(_e=(0,h.Z)(function*(v,p){return on(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function se(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function tn(){return(tn=(0,h.Z)(function*(v,p=!1){const m=(0,L.m9)(v),E=yield m.getIdToken(p),D=Un(E);Me(D&&D.exp&&D.auth_time&&D.iat,m.auth,"internal-error");const N="object"==typeof D.firebase?D.firebase:void 0,W=null==N?void 0:N.sign_in_provider;return{claims:D,token:E,authTime:se(Mr(D.auth_time)),issuedAtTime:se(Mr(D.iat)),expirationTime:se(Mr(D.exp)),signInProvider:W||null,signInSecondFactor:(null==N?void 0:N.sign_in_second_factor)||null}})).apply(this,arguments)}function Mr(v){return 1e3*Number(v)}function Un(v){const[p,m,E]=v.split(".");if(void 0===p||void 0===m||void 0===E)return Qn("JWT malformed, contained fewer than 3 sections"),null;try{const D=(0,L.tV)(m);return D?JSON.parse(D):(Qn("Failed to decode base64 JWT payload"),null)}catch(D){return Qn("Caught error parsing JWT payload as JSON",D),null}}function ct(v,p){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,h.Z)(function*(v,p,m=!1){if(m)return p;try{return yield p}catch(E){throw E instanceof L.ZR&&Ur(E)&&v.auth.currentUser===v&&(yield v.auth.signOut()),E}})).apply(this,arguments)}function Ur({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Pr{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const D=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,D)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(p);this.timerId=setTimeout((0,h.Z)(function*(){yield m.iteration()}),E)}iteration(){var p=this;return(0,h.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&p.schedule(!0))}p.schedule()})()}}class vp{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=se(this.lastLoginAt),this.creationTime=se(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ir(v){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,h.Z)(function*(v){var p;const m=v.auth,E=yield v.getIdToken(),D=yield ct(v,Q(m,{idToken:E}));Me(null==D?void 0:D.users.length,m,"internal-error");const N=D.users[0];v._notifyReloadListener(N);const W=(null===(p=N.providerUserInfo)||void 0===p?void 0:p.length)?Go(N.providerUserInfo):[],le=gi(v.providerData,W),Je=!!v.isAnonymous&&!(v.email&&N.passwordHash||(null==le?void 0:le.length)),nt={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:le,metadata:new vp(N.createdAt,N.lastLoginAt),isAnonymous:Je};Object.assign(v,nt)})).apply(this,arguments)}function fn(){return(fn=(0,h.Z)(function*(v){const p=(0,L.m9)(v);yield Ir(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function gi(v,p){return[...v.filter(E=>!p.some(D=>D.providerId===E.providerId)),...p]}function Go(v){return v.map(p=>{var{providerId:m}=p,E=J(p,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Zi(){return(Zi=(0,h.Z)(function*(v,p){const m=yield ln(v,{},(0,h.Z)(function*(){const E=(0,L.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:D,apiKey:N}=v.config,W=Ae(v,D,"/v1/token",`key=${N}`),le=yield v._getAdditionalHeaders();return le["Content-Type"]="application/x-www-form-urlencoded",Rs.fetch()(W,{method:"POST",headers:le,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class En{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){Me(p.idToken,"internal-error"),Me(void 0!==p.idToken,"internal-error"),Me(void 0!==p.refreshToken,"internal-error");const m="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function(v){const p=Un(v);return Me(p,"internal-error"),Me(void 0!==p.exp,"internal-error"),Me(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var E=this;return(0,h.Z)(function*(){return Me(!E.accessToken||E.refreshToken,p,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(p,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var E=this;return(0,h.Z)(function*(){const{accessToken:D,refreshToken:N,expiresIn:W}=yield function(v,p){return Zi.apply(this,arguments)}(p,m);E.updateTokensAndExpiration(D,N,Number(W))})()}updateTokensAndExpiration(p,m,E){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(p,m){const{refreshToken:E,accessToken:D,expirationTime:N}=m,W=new En;return E&&(Me("string"==typeof E,"internal-error",{appName:p}),W.refreshToken=E),D&&(Me("string"==typeof D,"internal-error",{appName:p}),W.accessToken=D),N&&(Me("number"==typeof N,"internal-error",{appName:p}),W.expirationTime=N),W}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new En,this.toJSON())}_performRefresh(){return or("not implemented")}}function mi(v,p){Me("string"==typeof v||void 0===v,"internal-error",{appName:p})}class Ii{constructor(p){var{uid:m,auth:E,stsTokenManager:D}=p,N=J(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Pr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=D,this.accessToken=D.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new vp(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,h.Z)(function*(){const E=yield ct(m,m.stsTokenManager.getToken(m.auth,p));return Me(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(p){return function(v){return tn.apply(this,arguments)}(this,p)}reload(){return function(v){return fn.apply(this,arguments)}(this)}_assign(p){this!==p&&(Me(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new Ii(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var E=this;return(0,h.Z)(function*(){let D=!1;p.idToken&&p.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(p),D=!0),m&&(yield Ir(E)),yield E.auth._persistUserIfCurrent(E),D&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var p=this;return(0,h.Z)(function*(){const m=yield p.getIdToken();return yield ct(p,function(v,p){return Qt.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var E,D,N,W,le,Le,Re,Je;const nt=null!==(E=m.displayName)&&void 0!==E?E:void 0,en=null!==(D=m.email)&&void 0!==D?D:void 0,mr=null!==(N=m.phoneNumber)&&void 0!==N?N:void 0,Qa=null!==(W=m.photoURL)&&void 0!==W?W:void 0,Qh=null!==(le=m.tenantId)&&void 0!==le?le:void 0,hd=null!==(Le=m._redirectEventId)&&void 0!==Le?Le:void 0,M_=null!==(Re=m.createdAt)&&void 0!==Re?Re:void 0,P_=null!==(Je=m.lastLoginAt)&&void 0!==Je?Je:void 0,{uid:gg,emailVerified:fd,isAnonymous:pd,providerData:Jh,stsTokenManager:aa}=m;Me(gg&&aa,p,"internal-error");const Pw=En.fromJSON(this.name,aa);Me("string"==typeof gg,p,"internal-error"),mi(nt,p.name),mi(en,p.name),Me("boolean"==typeof fd,p,"internal-error"),Me("boolean"==typeof pd,p,"internal-error"),mi(mr,p.name),mi(Qa,p.name),mi(Qh,p.name),mi(hd,p.name),mi(M_,p.name),mi(P_,p.name);const mg=new Ii({uid:gg,auth:p,email:en,emailVerified:fd,displayName:nt,isAnonymous:pd,photoURL:Qa,phoneNumber:mr,tenantId:Qh,stsTokenManager:Pw,createdAt:M_,lastLoginAt:P_});return Jh&&Array.isArray(Jh)&&(mg.providerData=Jh.map(O_=>Object.assign({},O_))),hd&&(mg._redirectEventId=hd),mg}static _fromIdTokenResponse(p,m,E=!1){return(0,h.Z)(function*(){const D=new En;D.updateFromServerResponse(m);const N=new Ii({uid:m.localId,auth:p,stsTokenManager:D,isAnonymous:E});return yield Ir(N),N})()}}const Ti=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(m,E){var D=this;return(0,h.Z)(function*(){D.storage[m]=E})()}_get(m){var E=this;return(0,h.Z)(function*(){const D=E.storage[m];return void 0===D?null:D})()}_remove(m){var E=this;return(0,h.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return v.type="NONE",v})();function In(v,p,m){return`firebase:${v}:${p}:${m}`}class oo{constructor(p,m,E){this.persistence=p,this.auth=m,this.userKey=E;const{config:D,name:N}=this.auth;this.fullUserKey=In(this.userKey,D.apiKey,N),this.fullPersistenceKey=In("persistence",D.apiKey,N),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,h.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?Ii._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,h.Z)(function*(){if(m.persistence===p)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,E="authUser"){return(0,h.Z)(function*(){if(!m.length)return new oo(qn(Ti),p,E);const D=(yield Promise.all(m.map(function(){var Re=(0,h.Z)(function*(Je){if(yield Je._isAvailable())return Je});return function(Je){return Re.apply(this,arguments)}}()))).filter(Re=>Re);let N=D[0]||qn(Ti);const W=In(E,p.config.apiKey,p.name);let le=null;for(const Re of m)try{const Je=yield Re._get(W);if(Je){const nt=Ii._fromJSON(p,Je);Re!==N&&(le=nt),N=Re;break}}catch(Je){}const Le=D.filter(Re=>Re._shouldAllowMigration);return N._shouldAllowMigration&&Le.length?(N=Le[0],le&&(yield N._set(W,le.toJSON())),yield Promise.all(m.map(function(){var Re=(0,h.Z)(function*(Je){if(Je!==N)try{yield Je._remove(W)}catch(nt){}});return function(Je){return Re.apply(this,arguments)}}())),new oo(N,p,E)):new oo(N,p,E)})()}}function Da(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Xr(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(Br(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Sc(p))return"Blackberry";if(tl(p))return"Webos";if(Ms(p))return"Safari";if((p.includes("chrome/")||qo(p))&&!p.includes("edge/"))return"Chrome";if(cn(p))return"Android";{const E=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function Br(v=(0,L.z$)()){return/firefox\//i.test(v)}function Ms(v=(0,L.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function qo(v=(0,L.z$)()){return/crios\//i.test(v)}function Xr(v=(0,L.z$)()){return/iemobile/i.test(v)}function cn(v=(0,L.z$)()){return/android/i.test(v)}function Sc(v=(0,L.z$)()){return/blackberry/i.test(v)}function tl(v=(0,L.z$)()){return/webos/i.test(v)}function hs(v=(0,L.z$)()){return/iphone|ipad|ipod/i.test(v)}function Ps(v=(0,L.z$)()){return hs(v)||cn(v)||tl(v)||Sc(v)||/windows phone/i.test(v)||Xr(v)}function wp(v,p=[]){let m;switch(v){case"Browser":m=Da((0,L.z$)());break;case"Worker":m=`${Da((0,L.z$)())}-${v}`;break;default:m=v}const E=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${ae.SDK_VERSION}/${E}`}class Di{constructor(p,m,E){this.app=p,this.heartbeatServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nl(this),this.idTokenSubscription=new nl(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ln,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(p,m){var E=this;return m&&(this._popupRedirectResolver=qn(m)),this._initializationPromise=this.queue((0,h.Z)(function*(){var D,N;if(!E._deleted&&(E.persistenceManager=yield oo.create(E,p),!E._deleted)){if(null===(D=E._popupRedirectResolver)||void 0===D?void 0:D._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(W){}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(N=E.currentUser)||void 0===N?void 0:N.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,h.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m)}})()}initializeCurrentUser(p){var m=this;return(0,h.Z)(function*(){var E;let D=yield m.assertedPersistence.getCurrentUser();if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const N=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,W=null==D?void 0:D._redirectEventId,le=yield m.tryRedirectSignIn(p);(!N||N===W)&&(null==le?void 0:le.user)&&(D=le.user)}return D?D._redirectEventId?(Me(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===D._redirectEventId?m.directlySetCurrentUser(D):m.reloadAndSetCurrentUserOrClear(D)):m.reloadAndSetCurrentUserOrClear(D):m.directlySetCurrentUser(null)})()}tryRedirectSignIn(p){var m=this;return(0,h.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch(D){yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,h.Z)(function*(){try{yield Ir(p)}catch(E){if("auth/network-request-failed"!==E.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,h.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,h.Z)(function*(){const E=p?(0,L.m9)(p):null;return E&&Me(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(p){var m=this;return(0,h.Z)(function*(){if(!m._deleted)return p&&Me(m.tenantId===p.tenantId,m,"tenant-id-mismatch"),m.queue((0,h.Z)(function*(){yield m.directlySetCurrentUser(p),m.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,h.Z)(function*(){return(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null)})()}setPersistence(p){var m=this;return this.queue((0,h.Z)(function*(){yield m.assertedPersistence.setPersistence(qn(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new L.LL("auth","Firebase",p())}onAuthStateChanged(p,m,E){return this.registerStateListener(this.authStateSubscription,p,m,E)}onIdTokenChanged(p,m,E){return this.registerStateListener(this.idTokenSubscription,p,m,E)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var E=this;return(0,h.Z)(function*(){const D=yield E.getOrInitRedirectPersistenceManager(m);return null===p?D.removeCurrentUser():D.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,h.Z)(function*(){if(!m.redirectPersistenceManager){const E=p&&qn(p)||m._popupRedirectResolver;Me(E,m,"argument-error"),m.redirectPersistenceManager=yield oo.create(m,[qn(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,h.Z)(function*(){var E,D;return m._isInitialized&&(yield m.queue((0,h.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===p?m._currentUser:(null===(D=m.redirectUser)||void 0===D?void 0:D._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,h.Z)(function*(){if(p===m.currentUser)return m.queue((0,h.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,E,D){if(this._deleted)return()=>{};const N="function"==typeof m?m:m.next.bind(m),W=this._isInitialized?Promise.resolve():this._initializationPromise;return Me(W,this,"internal-error"),W.then(()=>N(this.currentUser)),"function"==typeof m?p.addObserver(m,E,D):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,h.Z)(function*(){m.currentUser&&m.currentUser!==p&&(m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh()),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=wp(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,h.Z)(function*(){var m;const E={"X-Client-Version":p.clientVersion};p.app.options.appId&&(E["X-Firebase-gmpid"]=p.app.options.appId);const D=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return D&&(E["X-Firebase-Client"]=D),E})()}}function _n(v){return(0,L.m9)(v)}class nl{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,L.ne)(m=>this.observer=m)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function du(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function Si(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class Sa{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return or("not implemented")}_getIdTokenResponse(p){return or("not implemented")}_linkToIdToken(p,m){return or("not implemented")}_getReauthenticationResolver(p){return or("not implemented")}}function ch(v,p){return dh.apply(this,arguments)}function dh(){return(dh=(0,h.Z)(function*(v,p){return on(v,"POST","/v1/accounts:resetPassword",wt(v,p))})).apply(this,arguments)}function Ep(v,p){return hu.apply(this,arguments)}function hu(){return(hu=(0,h.Z)(function*(v,p){return on(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Aa(v,p){return hh.apply(this,arguments)}function hh(){return(hh=(0,h.Z)(function*(v,p){return on(v,"POST","/v1/accounts:update",wt(v,p))})).apply(this,arguments)}function xc(){return(xc=(0,h.Z)(function*(v,p){return Dt(v,"POST","/v1/accounts:signInWithPassword",wt(v,p))})).apply(this,arguments)}function Rc(v,p){return fh.apply(this,arguments)}function fh(){return(fh=(0,h.Z)(function*(v,p){return on(v,"POST","/v1/accounts:sendOobCode",wt(v,p))})).apply(this,arguments)}function c_(v,p){return Cp.apply(this,arguments)}function Cp(){return(Cp=(0,h.Z)(function*(v,p){return Rc(v,p)})).apply(this,arguments)}function ph(v,p){return gh.apply(this,arguments)}function gh(){return(gh=(0,h.Z)(function*(v,p){return Rc(v,p)})).apply(this,arguments)}function Nc(v,p){return il.apply(this,arguments)}function il(){return(il=(0,h.Z)(function*(v,p){return Rc(v,p)})).apply(this,arguments)}function Mc(v,p){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,h.Z)(function*(v,p){return Rc(v,p)})).apply(this,arguments)}function fu(){return(fu=(0,h.Z)(function*(v,p){return Dt(v,"POST","/v1/accounts:signInWithEmailLink",wt(v,p))})).apply(this,arguments)}function Oc(){return(Oc=(0,h.Z)(function*(v,p){return Dt(v,"POST","/v1/accounts:signInWithEmailLink",wt(v,p))})).apply(this,arguments)}class zo extends Sa{constructor(p,m,E,D=null){super("password",E),this._email=p,this._password=m,this._tenantId=D}static _fromEmailAndPassword(p,m){return new zo(p,m,"password")}static _fromEmailAndCode(p,m,E=null){return new zo(p,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,h.Z)(function*(){switch(m.signInMethod){case"password":return function(v,p){return xc.apply(this,arguments)}(p,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function(v,p){return fu.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:wn(p,"internal-error")}})()}_linkToIdToken(p,m){var E=this;return(0,h.Z)(function*(){switch(E.signInMethod){case"password":return Ep(p,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function(v,p){return Oc.apply(this,arguments)}(p,{idToken:m,email:E._email,oobCode:E._password});default:wn(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function ps(v,p){return uo.apply(this,arguments)}function uo(){return(uo=(0,h.Z)(function*(v,p){return Dt(v,"POST","/v1/accounts:signInWithIdp",wt(v,p))})).apply(this,arguments)}class Ki extends Sa{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new Ki(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):wn("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:D}=m,N=J(m,["providerId","signInMethod"]);if(!E||!D)return null;const W=new Ki(E,D);return W.idToken=N.idToken||void 0,W.accessToken=N.accessToken||void 0,W.secret=N.secret,W.nonce=N.nonce,W.pendingToken=N.pendingToken||null,W}_getIdTokenResponse(p){return ps(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,ps(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,ps(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,L.xO)(m)}return p}}function kc(v,p){return sl.apply(this,arguments)}function sl(){return(sl=(0,h.Z)(function*(v,p){return on(v,"POST","/v1/accounts:sendVerificationCode",wt(v,p))})).apply(this,arguments)}function _h(){return(_h=(0,h.Z)(function*(v,p){return Dt(v,"POST","/v1/accounts:signInWithPhoneNumber",wt(v,p))})).apply(this,arguments)}function pu(){return(pu=(0,h.Z)(function*(v,p){const m=yield Dt(v,"POST","/v1/accounts:signInWithPhoneNumber",wt(v,p));if(m.temporaryProof)throw mt(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const yh={USER_NOT_FOUND:"user-not-found"};function ks(){return(ks=(0,h.Z)(function*(v,p){return Dt(v,"POST","/v1/accounts:signInWithPhoneNumber",wt(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),yh)})).apply(this,arguments)}class gs extends Sa{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new gs({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new gs({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function(v,p){return _h.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function(v,p){return pu.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function(v,p){return ks.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:E,verificationCode:D}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:E,code:D}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:E,phoneNumber:D,temporaryProof:N}=p;return E||m||D||N?new gs({verificationId:m,verificationCode:E,phoneNumber:D,temporaryProof:N}):null}}class lo{constructor(p){var m,E,D,N,W,le;const Le=(0,L.zd)((0,L.pd)(p)),Re=null!==(m=Le.apiKey)&&void 0!==m?m:null,Je=null!==(E=Le.oobCode)&&void 0!==E?E:null,nt=function(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(D=Le.mode)&&void 0!==D?D:null);Me(Re&&Je&&nt,"argument-error"),this.apiKey=Re,this.operation=nt,this.code=Je,this.continueUrl=null!==(N=Le.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(W=Le.languageCode)&&void 0!==W?W:null,this.tenantId=null!==(le=Le.tenantId)&&void 0!==le?le:null}static parseLink(p){const m=function(v){const p=(0,L.zd)((0,L.pd)(v)).link,m=p?(0,L.zd)((0,L.pd)(p)).deep_link_id:null,E=(0,L.zd)((0,L.pd)(v)).deep_link_id;return(E?(0,L.zd)((0,L.pd)(E)).link:null)||E||m||p||v}(p);try{return new lo(m)}catch(E){return null}}}let gu=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,E){return zo._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const D=lo.parseLink(E);return Me(D,"argument-error"),zo._fromEmailAndCode(m,D.code,D.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class an{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class co extends an{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class ho extends co{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return Me("providerId"in m&&"signInMethod"in m,"argument-error"),Ki._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return Me(p.idToken||p.accessToken,"argument-error"),Ki._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return ho.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return ho.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:D,pendingToken:N,nonce:W,providerId:le}=p;if(!E&&!D&&!m&&!N||!le)return null;try{return new ho(le)._credential({idToken:m,accessToken:E,nonce:W,pendingToken:N})}catch(Le){return null}}}let mu=(()=>{class v extends co{constructor(){super("facebook.com")}static credential(m){return Ki._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(E){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),pn=(()=>{class v extends co{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return Ki._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:D}=m;if(!E&&!D)return null;try{return v.credential(E,D)}catch(N){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),al=(()=>{class v extends co{constructor(){super("github.com")}static credential(m){return Ki._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(E){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Yi extends Sa{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return ps(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,ps(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,ps(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:D,pendingToken:N}=m;return E&&D&&N&&E===D?new Yi(E,N):null}static _create(p,m){return new Yi(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class yu extends an{constructor(p){Me(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return yu.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return yu.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=Yi.fromJSON(p);return Me(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:E}=p;if(!m||!E)return null;try{return Yi._create(E,m)}catch(D){return null}}}let vu=(()=>{class v extends co{constructor(){super("twitter.com")}static credential(m,E){return Ki._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:D}=m;if(!E||!D)return null;try{return v.credential(E,D)}catch(N){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Ko(v,p){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,h.Z)(function*(v,p){return Dt(v,"POST","/v1/accounts:signUp",wt(v,p))})).apply(this,arguments)}class Hr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,E,D=!1){return(0,h.Z)(function*(){const N=yield Ii._fromIdTokenResponse(p,E,D),W=wu(E);return new Hr({user:N,providerId:W,_tokenResponse:E,operationType:m})})()}static _forOperation(p,m,E){return(0,h.Z)(function*(){yield p._updateTokensIfNecessary(E,!0);const D=wu(E);return new Hr({user:p,providerId:D,_tokenResponse:E,operationType:m})})()}}function wu(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Lc(){return(Lc=(0,h.Z)(function*(v){var p;const m=_n(v);if(yield m._initializationPromise,null===(p=m.currentUser)||void 0===p?void 0:p.isAnonymous)return new Hr({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield Ko(m,{returnSecureToken:!0}),D=yield Hr._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(D.user),D})).apply(this,arguments)}class xa extends L.ZR{constructor(p,m,E,D){var N;super(m.code,m.message),this.operationType=E,this.user=D,Object.setPrototypeOf(this,xa.prototype),this.customData={appName:p.name,tenantId:null!==(N=p.tenantId)&&void 0!==N?N:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(p,m,E,D){return new xa(p,m,E,D)}}function Vc(v,p,m,E){return("reauthenticate"===p?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?xa._fromErrorAndOperation(v,N,p,E):N})}function ul(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function Eu(){return(Eu=(0,h.Z)(function*(v,p){const m=(0,L.m9)(v);yield Ht(!0,m,p);const{providerUserInfo:E}=yield z(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),D=ul(E||[]);return m.providerData=m.providerData.filter(N=>D.has(N.providerId)),D.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function fo(v,p){return De.apply(this,arguments)}function De(){return(De=(0,h.Z)(function*(v,p,m=!1){const E=yield ct(v,p._linkToIdToken(v.auth,yield v.getIdToken()),m);return Hr._forOperation(v,"link",E)})).apply(this,arguments)}function Ht(v,p,m){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,h.Z)(function*(v,p,m){yield Ir(p);const D=!1===v?"provider-already-linked":"no-such-provider";Me(ul(p.providerData).has(m)===v,p.auth,D)})).apply(this,arguments)}function Rn(v,p){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,h.Z)(function*(v,p,m=!1){const{auth:E}=v,D="reauthenticate";try{const N=yield ct(v,Vc(E,D,p,v),m);Me(N.idToken,E,"internal-error");const W=Un(N.idToken);Me(W,E,"internal-error");const{sub:le}=W;return Me(v.uid===le,E,"user-mismatch"),Hr._forOperation(v,D,N)}catch(N){throw"auth/user-not-found"===(null==N?void 0:N.code)&&wn(E,"user-mismatch"),N}})).apply(this,arguments)}function po(v,p){return ei.apply(this,arguments)}function ei(){return(ei=(0,h.Z)(function*(v,p,m=!1){const E="signIn",D=yield Vc(v,E,p),N=yield Hr._fromIdTokenResponse(v,E,D);return m||(yield v._updateCurrentUser(N.user)),N})).apply(this,arguments)}function Qo(v,p){return Na.apply(this,arguments)}function Na(){return(Na=(0,h.Z)(function*(v,p){return po(_n(v),p)})).apply(this,arguments)}function wh(v,p){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,h.Z)(function*(v,p){const m=(0,L.m9)(v);return yield Ht(!1,m,p.providerId),fo(m,p)})).apply(this,arguments)}function Jo(v,p){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,h.Z)(function*(v,p){return Rn((0,L.m9)(v),p)})).apply(this,arguments)}function ar(v,p){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,h.Z)(function*(v,p){return Dt(v,"POST","/v1/accounts:signInWithCustomToken",wt(v,p))})).apply(this,arguments)}function Ai(){return(Ai=(0,h.Z)(function*(v,p){const m=_n(v),E=yield ar(m,{token:p,returnSecureToken:!0}),D=yield Hr._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(D.user),D})).apply(this,arguments)}class ti{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?ll._fromServerResponse(p,m):wn(p,"internal-error")}}class ll extends ti{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new ll(m)}}function Pa(v,p,m){var E;Me((null===(E=m.url)||void 0===E?void 0:E.length)>0,v,"invalid-continue-uri"),Me(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(Me(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(Me(m.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function Bc(){return(Bc=(0,h.Z)(function*(v,p,m){const E=(0,L.m9)(v),D={requestType:"PASSWORD_RESET",email:p};m&&Pa(E,D,m),yield ph(E,D)})).apply(this,arguments)}function bu(){return(bu=(0,h.Z)(function*(v,p,m){yield ch((0,L.m9)(v),{oobCode:p,newPassword:m})})).apply(this,arguments)}function Fs(){return(Fs=(0,h.Z)(function*(v,p){yield Aa((0,L.m9)(v),{oobCode:p})})).apply(this,arguments)}function dl(v,p){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,h.Z)(function*(v,p){const m=(0,L.m9)(v),E=yield ch(m,{oobCode:p}),D=E.requestType;switch(Me(D,m,"internal-error"),D){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Me(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Me(E.mfaInfo,m,"internal-error");default:Me(E.email,m,"internal-error")}let N=null;return E.mfaInfo&&(N=ti._fromServerResponse(_n(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:N},operation:D}})).apply(this,arguments)}function fl(){return(fl=(0,h.Z)(function*(v,p){const{data:m}=yield dl((0,L.m9)(v),p);return m.email})).apply(this,arguments)}function Tu(){return(Tu=(0,h.Z)(function*(v,p,m){const E=_n(v),D=yield Ko(E,{returnSecureToken:!0,email:p,password:m}),N=yield Hr._fromIdTokenResponse(E,"signIn",D);return yield E._updateCurrentUser(N.user),N})).apply(this,arguments)}function Su(){return(Su=(0,h.Z)(function*(v,p,m){const E=(0,L.m9)(v),D={requestType:"EMAIL_SIGNIN",email:p};Me(m.handleCodeInApp,E,"argument-error"),m&&Pa(E,D,m),yield Nc(E,D)})).apply(this,arguments)}function go(){return(go=(0,h.Z)(function*(v,p,m){const E=(0,L.m9)(v),D=gu.credentialWithLink(p,m||Cr());return Me(D._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Qo(E,D)})).apply(this,arguments)}function On(v,p){return Sp.apply(this,arguments)}function Sp(){return(Sp=(0,h.Z)(function*(v,p){return on(v,"POST","/v1/accounts:createAuthUri",wt(v,p))})).apply(this,arguments)}function Oa(){return(Oa=(0,h.Z)(function*(v,p){const E={identifier:p,continueUri:br()?Cr():"http://localhost"},{signinMethods:D}=yield On((0,L.m9)(v),E);return D||[]})).apply(this,arguments)}function $c(){return($c=(0,h.Z)(function*(v,p){const m=(0,L.m9)(v),D={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&Pa(m.auth,D,p);const{email:N}=yield c_(m.auth,D);N!==v.email&&(yield v.reload())})).apply(this,arguments)}function ka(){return(ka=(0,h.Z)(function*(v,p,m){const E=(0,L.m9)(v),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};m&&Pa(E.auth,N,m);const{email:W}=yield Mc(E.auth,N);W!==v.email&&(yield v.reload())})).apply(this,arguments)}function Xo(v,p){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,h.Z)(function*(v,p){return on(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function gl(){return(gl=(0,h.Z)(function*(v,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const E=(0,L.m9)(v),N={idToken:yield E.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},W=yield ct(E,Xo(E.auth,N));E.displayName=W.displayName||null,E.photoURL=W.photoUrl||null;const le=E.providerData.find(({providerId:Le})=>"password"===Le);le&&(le.displayName=E.displayName,le.photoURL=E.photoURL),yield E._updateTokensIfNecessary(W)})).apply(this,arguments)}function ea(v,p,m){return Ch.apply(this,arguments)}function Ch(){return(Ch=(0,h.Z)(function*(v,p,m){const{auth:E}=v,N={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(N.email=p),m&&(N.password=m);const W=yield ct(v,Ep(E,N));yield v._updateTokensIfNecessary(W,!0)})).apply(this,arguments)}class ms{constructor(p,m,E={}){this.isNewUser=p,this.providerId=m,this.profile=E}}class ml extends ms{constructor(p,m,E,D){super(p,m,E),this.username=D}}class Rp extends ms{constructor(p,m){super(p,"facebook.com",m)}}class d_ extends ml{constructor(p,m){super(p,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class xi extends ms{constructor(p,m){super(p,"google.com",m)}}class pw extends ml{constructor(p,m,E){super(p,"twitter.com",m,E)}}function qc(v){const{user:p,_tokenResponse:m}=v;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function(v){var p,m;if(!v)return null;const{providerId:E}=v,D=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},N=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!E&&(null==v?void 0:v.idToken)){const W=null===(m=null===(p=Un(v.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(W)return new ms(N,"anonymous"!==W&&"custom"!==W?W:null)}if(!E)return null;switch(E){case"facebook.com":return new Rp(N,D);case"github.com":return new d_(N,D);case"google.com":return new xi(N,D);case"twitter.com":return new pw(N,D,v.screenName||null);case"custom":case"anonymous":return new ms(N,null);default:return new ms(N,E,D)}}(m)}class ys{constructor(p,m){this.type=p,this.credential=m}static _fromIdtoken(p){return new ys("enroll",p)}static _fromMfaPendingCredential(p){return new ys("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,E;if(null==p?void 0:p.multiFactorSession){if(null===(m=p.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return ys._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(E=p.multiFactorSession)||void 0===E?void 0:E.idToken)return ys._fromIdtoken(p.multiFactorSession.idToken)}return null}}class La{constructor(p,m,E){this.session=p,this.hints=m,this.signInResolver=E}static _fromError(p,m){const E=_n(p),D=m.customData._serverResponse,N=(D.mfaInfo||[]).map(le=>ti._fromServerResponse(E,le));Me(D.mfaPendingCredential,E,"internal-error");const W=ys._fromMfaPendingCredential(D.mfaPendingCredential);return new La(W,N,function(){var le=(0,h.Z)(function*(Le){const Re=yield Le._process(E,W);delete D.mfaInfo,delete D.mfaPendingCredential;const Je=Object.assign(Object.assign({},D),{idToken:Re.idToken,refreshToken:Re.refreshToken});switch(m.operationType){case"signIn":const nt=yield Hr._fromIdTokenResponse(E,m.operationType,Je);return yield E._updateCurrentUser(nt.user),nt;case"reauthenticate":return Me(m.user,E,"internal-error"),Hr._forOperation(m.user,m.operationType,Je);default:wn(E,"internal-error")}});return function(Le){return le.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,h.Z)(function*(){return m.signInResolver(p)})()}}function bh(v,p){return on(v,"POST","/v2/accounts/mfaEnrollment:start",wt(v,p))}class Th{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>ti._fromServerResponse(p.auth,E)))})}static _fromUser(p){return new Th(p)}getSession(){var p=this;return(0,h.Z)(function*(){return ys._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,m){var E=this;return(0,h.Z)(function*(){const D=p,N=yield E.getSession(),W=yield ct(E.user,D._process(E.user.auth,N,m));return yield E.user._updateTokensIfNecessary(W),E.user.reload()})()}unenroll(p){var m=this;return(0,h.Z)(function*(){const E="string"==typeof p?p:p.uid,D=yield m.user.getIdToken(),N=yield ct(m.user,function(v,p){return on(v,"POST","/v2/accounts/mfaEnrollment:withdraw",wt(v,p))}(m.user.auth,{idToken:D,mfaEnrollmentId:E}));m.enrolledFactors=m.enrolledFactors.filter(({uid:W})=>W!==E),yield m.user._updateTokensIfNecessary(N);try{yield m.user.reload()}catch(W){if("auth/user-token-expired"!==W.code)throw W}})()}}const Ls=new WeakMap,Gt="__sak";class at{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Gt,"1"),this.storage.removeItem(Gt),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ji=(()=>{class v extends at{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const v=(0,L.z$)();return Ms(v)||hs(v)}()&&function(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=Ps(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const D=this.storage.getItem(E),N=this.localCache[E];D!==N&&m(E,N,D)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((le,Le,Re)=>{this.notifyListeners(le,Re)});const D=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const le=this.storage.getItem(D);if(m.newValue!==le)null!==m.newValue?this.storage.setItem(D,m.newValue):this.storage.removeItem(D);else if(this.localCache[D]===m.newValue&&!E)return}const N=()=>{const le=this.storage.getItem(D);!E&&this.localCache[D]===le||this.notifyListeners(D,le)},W=this.storage.getItem(D);(0,L.w1)()&&10===document.documentMode&&W!==m.newValue&&m.newValue!==m.oldValue?setTimeout(N,10):N()}notifyListeners(m,E){this.localCache[m]=E;const D=this.listeners[m];if(D)for(const N of Array.from(D))N(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,D)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:D}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var D=()=>super._set,N=this;return(0,h.Z)(function*(){yield D().call(N,m,E),N.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,D=this;return(0,h.Z)(function*(){const N=yield E().call(D,m);return D.localCache[m]=JSON.stringify(N),N})()}_remove(m){var E=()=>super._remove,D=this;return(0,h.Z)(function*(){yield E().call(D,m),delete D.localCache[m]})()}}return v.type="LOCAL",v})(),yo=(()=>{class v extends at{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return v.type="SESSION",v})();let _l=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(N=>N.isListeningto(m));if(E)return E;const D=new v(m);return this.receivers.push(D),D}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,h.Z)(function*(){const D=m,{eventId:N,eventType:W,data:le}=D.data,Le=E.handlersMap[W];if(!(null==Le?void 0:Le.size))return;D.ports[0].postMessage({status:"ack",eventId:N,eventType:W});const Re=Array.from(Le).map(function(){var nt=(0,h.Z)(function*(en){return en(D.origin,le)});return function(en){return nt.apply(this,arguments)}}()),Je=yield function(v){return Promise.all(v.map(function(){var p=(0,h.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return p.apply(this,arguments)}}()))}(Re);D.ports[0].postMessage({status:"done",eventId:N,eventType:W,response:Je})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function jn(v="",p=10){let m="";for(let E=0;E<p;E++)m+=Math.floor(10*Math.random());return v+m}class yl{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,E=50){var D=this;return(0,h.Z)(function*(){const N="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let W,le;return new Promise((Le,Re)=>{const Je=jn("",20);N.port1.start();const nt=setTimeout(()=>{Re(new Error("unsupported_event"))},E);le={messageChannel:N,onMessage(en){const mr=en;if(mr.data.eventId===Je)switch(mr.data.status){case"ack":clearTimeout(nt),W=setTimeout(()=>{Re(new Error("timeout"))},3e3);break;case"done":clearTimeout(W),Le(mr.data.response);break;default:clearTimeout(nt),clearTimeout(W),Re(new Error("invalid_response"))}}},D.handlers.add(le),N.port1.addEventListener("message",le.onMessage),D.target.postMessage({eventType:p,eventId:Je,data:m},[N.port2])}).finally(()=>{le&&D.removeMessageHandler(le)})})()}}function Xn(){return window}function vo(){return void 0!==Xn().WorkerGlobalScope&&"function"==typeof Xn().importScripts}function Nu(){return(Nu=(0,h.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const Ni="firebaseLocalStorageDb",vs="firebaseLocalStorage",Xi="fbase_key";class ni{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Sh(v,p){return v.transaction([vs],p?"readwrite":"readonly").objectStore(vs)}function ta(){const v=indexedDB.open(Ni,1);return new Promise((p,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const E=v.result;try{E.createObjectStore(vs,{keyPath:Xi})}catch(D){m(D)}}),v.addEventListener("success",(0,h.Z)(function*(){const E=v.result;E.objectStoreNames.contains(vs)?p(E):(E.close(),yield function(){const v=indexedDB.deleteDatabase(Ni);return new ni(v).toPromise()}(),p(yield ta()))}))})}function pr(v,p,m){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,h.Z)(function*(v,p,m){const E=Sh(v,!0).put({[Xi]:p,value:m});return new ni(E).toPromise()})).apply(this,arguments)}function Kc(){return(Kc=(0,h.Z)(function*(v,p){const m=Sh(v,!1).get(p),E=yield new ni(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function El(v,p){const m=Sh(v,!0).delete(p);return new ni(m).toPromise()}const Us=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,h.Z)(function*(){return m.db||(m.db=yield ta()),m.db})()}_withRetries(m){var E=this;return(0,h.Z)(function*(){let D=0;for(;;)try{const N=yield E._openDb();return yield m(N)}catch(N){if(D++>3)throw N;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,h.Z)(function*(){return vo()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,h.Z)(function*(){m.receiver=_l._getInstance(vo()?self:null),m.receiver._subscribe("keyChanged",function(){var E=(0,h.Z)(function*(D,N){return{keyProcessed:(yield m._poll()).includes(N.key)}});return function(D,N){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,h.Z)(function*(D,N){return["keyChanged"]});return function(D,N){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,h.Z)(function*(){var E,D;if(m.activeServiceWorker=yield function(){return Nu.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new yl(m.activeServiceWorker);const N=yield m.sender._send("ping",{},800);!N||(null===(E=N[0])||void 0===E?void 0:E.fulfilled)&&(null===(D=N[0])||void 0===D?void 0:D.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,h.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch(D){}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const m=yield ta();return yield pr(m,Gt,"1"),yield El(m,Gt),!0}catch(m){}return!1})()}_withPendingWrite(m){var E=this;return(0,h.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var D=this;return(0,h.Z)(function*(){return D._withPendingWrite((0,h.Z)(function*(){return yield D._withRetries(N=>pr(N,m,E)),D.localCache[m]=E,D.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,h.Z)(function*(){const D=yield E._withRetries(N=>function(v,p){return Kc.apply(this,arguments)}(N,m));return E.localCache[m]=D,D})()}_remove(m){var E=this;return(0,h.Z)(function*(){return E._withPendingWrite((0,h.Z)(function*(){return yield E._withRetries(D=>El(D,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,h.Z)(function*(){const E=yield m._withRetries(W=>{const le=Sh(W,!1).getAll();return new ni(le).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const D=[],N=new Set;for(const{fbase_key:W,value:le}of E)N.add(W),JSON.stringify(m.localCache[W])!==JSON.stringify(le)&&(m.notifyListeners(W,le),D.push(W));for(const W of Object.keys(m.localCache))m.localCache[W]&&!N.has(W)&&(m.notifyListeners(W,null),D.push(W));return D})()}notifyListeners(m,E){this.localCache[m]=E;const D=this.listeners[m];if(D)for(const N of Array.from(D))N(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Va(v,p){return on(v,"POST","/v2/accounts/mfaSignIn:start",wt(v,p))}function Mi(){return(Mi=(0,h.Z)(function*(v){return(yield on(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function wo(v){return new Promise((p,m)=>{const E=document.createElement("script");E.setAttribute("src",v),E.onload=p,E.onerror=D=>{const N=Tn("internal-error");N.customData=D,m(N)},E.type="text/javascript",E.charset="UTF-8",function(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(E)})}function Bs(v){return`__${v}${Math.floor(1e6*Math.random())}`}const er=1e12;class Yc{constructor(p){this.auth=p,this.counter=er,this._widgets=new Map}render(p,m){const E=this.counter;return this._widgets.set(E,new Nh(p,this.auth.name,m||{})),this.counter++,E}reset(p){var m;const E=p||er;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(p){var m;return(null===(m=this._widgets.get(p||er))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,h.Z)(function*(){var E;return null===(E=m._widgets.get(p||er))||void 0===E||E.execute(),""})()}}class Nh{constructor(p,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const D="string"==typeof p?document.getElementById(p):p;Me(D,"argument-error",{appName:m}),this.container=D,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(v){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<50;E++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}();const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Oi=Bs("rcb"),ws=new He(3e4,6e4);class Co{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Xn().grecaptcha}load(p,m=""){return Me((v=m).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v),p,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Xn().grecaptcha):new Promise((E,D)=>{const N=Xn().setTimeout(()=>{D(Tn(p,"network-request-failed"))},ws.get());Xn()[Oi]=()=>{Xn().clearTimeout(N),delete Xn()[Oi];const le=Xn().grecaptcha;if(!le)return void D(Tn(p,"internal-error"));const Le=le.render;le.render=(Re,Je)=>{const nt=Le(Re,Je);return this.counter++,nt},this.hostLanguage=m,E(le)},wo(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:Oi,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(N),D(Tn(p,"internal-error"))})});var v}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!Xn().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class bo{load(p){return(0,h.Z)(function*(){return new Yc(p)})()}clearedOneInstance(){}}const Ph="recaptcha",Ba={theme:"light",type:"image"};class Fp{constructor(p,m=Object.assign({},Ba),E){this.parameters=m,this.type=Ph,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=_n(E),this.isInvisible="invisible"===this.parameters.size,Me("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const D="string"==typeof p?document.getElementById(p):p;Me(D,this.auth,"argument-error"),this.container=D,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new bo:new Co,this.validateStartingState()}verify(){var p=this;return(0,h.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),E=p.getAssertedRecaptcha();return E.getResponse(m)||new Promise(N=>{const W=le=>{!le||(p.tokenChangeListeners.delete(W),N(le))};p.tokenChangeListeners.add(W),p.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){Me(!this.parameters.sitekey,this.auth,"argument-error"),Me(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Me("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof p)p(m);else if("string"==typeof p){const E=Xn()[p];"function"==typeof E&&E(m)}}}assertNotDestroyed(){Me(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,h.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,h.Z)(function*(){Me(br()&&!vo(),p.auth,"internal-error"),yield function(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function(v){return Mi.apply(this,arguments)}(p.auth);Me(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return Me(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class $n{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=gs._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function Io(){return(Io=(0,h.Z)(function*(v,p,m){const E=_n(v),D=yield j(E,p,(0,L.m9)(m));return new $n(D,N=>Qo(E,N))})).apply(this,arguments)}function I(){return(I=(0,h.Z)(function*(v,p,m){const E=(0,L.m9)(v);yield Ht(!1,E,"phone");const D=yield j(E.auth,p,(0,L.m9)(m));return new $n(D,N=>wh(E,N))})).apply(this,arguments)}function M(){return(M=(0,h.Z)(function*(v,p,m){const E=(0,L.m9)(v),D=yield j(E.auth,p,(0,L.m9)(m));return new $n(D,N=>Jo(E,N))})).apply(this,arguments)}function j(v,p,m){return ee.apply(this,arguments)}function ee(){return(ee=(0,h.Z)(function*(v,p,m){var E;const D=yield m.verify();try{let N;if(Me("string"==typeof D,v,"argument-error"),Me(m.type===Ph,v,"argument-error"),N="string"==typeof p?{phoneNumber:p}:p,"session"in N){const W=N.session;if("phoneNumber"in N)return Me("enroll"===W.type,v,"internal-error"),(yield bh(v,{idToken:W.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:D}})).phoneSessionInfo.sessionInfo;{Me("signin"===W.type,v,"internal-error");const le=(null===(E=N.multiFactorHint)||void 0===E?void 0:E.uid)||N.multiFactorUid;return Me(le,v,"missing-multi-factor-info"),(yield Va(v,{mfaPendingCredential:W.credential,mfaEnrollmentId:le,phoneSignInInfo:{recaptchaToken:D}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:W}=yield kc(v,{phoneNumber:N.phoneNumber,recaptchaToken:D});return W}}finally{m._reset()}})).apply(this,arguments)}function Ne(){return(Ne=(0,h.Z)(function*(v,p){yield fo((0,L.m9)(v),p)})).apply(this,arguments)}let ze=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=_n(m)}verifyPhoneNumber(m,E){return j(this.auth,m,(0,L.m9)(E))}static credential(m,E){return gs._fromVerification(m,E)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:D}=m;return E&&D?gs._fromTokenResponse(E,D):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function ft(v,p){return p?qn(p):(Me(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class bt extends Sa{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return ps(p,this._buildIdpRequest())}_linkToIdToken(p,m){return ps(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return ps(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function zt(v){return po(v.auth,new bt(v),v.bypassAuthState)}function At(v){const{auth:p,user:m}=v;return Me(m,p,"internal-error"),Rn(m,new bt(v),v.bypassAuthState)}function Tr(v){return tr.apply(this,arguments)}function tr(){return(tr=(0,h.Z)(function*(v){const{auth:p,user:m}=v;return Me(m,p,"internal-error"),fo(m,new bt(v),v.bypassAuthState)})).apply(this,arguments)}class ja{constructor(p,m,E,D,N=!1){this.auth=p,this.resolver=E,this.user=D,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,h.Z)(function*(E,D){p.pendingPromise={resolve:E,reject:D};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(N){p.reject(N)}});return function(E,D){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,h.Z)(function*(){const{urlResponse:E,sessionId:D,postBody:N,tenantId:W,error:le,type:Le}=p;if(le)return void m.reject(le);const Re={auth:m.auth,requestUri:E,sessionId:D,tenantId:W||void 0,postBody:N||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Le)(Re))}catch(Je){m.reject(Je)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return zt;case"linkViaPopup":case"linkViaRedirect":return Tr;case"reauthViaPopup":case"reauthViaRedirect":return At;default:wn(this.auth,"internal-error")}}resolve(p){Ze(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Ze(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Qc=new He(2e3,1e4);function To(){return(To=(0,h.Z)(function*(v,p,m){const E=_n(v);sr(v,p,an);const D=ft(E,m);return new Dn(E,"signInViaPopup",p,D).executeNotNull()})).apply(this,arguments)}function js(){return(js=(0,h.Z)(function*(v,p,m){const E=(0,L.m9)(v);sr(E.auth,p,an);const D=ft(E.auth,m);return new Dn(E.auth,"reauthViaPopup",p,D,E).executeNotNull()})).apply(this,arguments)}function Vp(){return(Vp=(0,h.Z)(function*(v,p,m){const E=(0,L.m9)(v);sr(E.auth,p,an);const D=ft(E.auth,m);return new Dn(E.auth,"linkViaPopup",p,D,E).executeNotNull()})).apply(this,arguments)}let Dn=(()=>{class v extends ja{constructor(m,E,D,N,W){super(m,E,N,W),this.provider=D,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,h.Z)(function*(){const E=yield m.execute();return Me(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,h.Z)(function*(){Ze(1===m.filter.length,"Popup operations only handle one event");const E=jn();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(D=>{m.reject(D)}),m.resolver._isIframeWebStorageSupported(m.auth,D=>{D||m.reject(Tn(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Tn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,D;this.pollId=(null===(D=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===D?void 0:D.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Tn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,Qc.get())};m()}}return v.currentPopupAction=null,v})();const Jc=new Map;class Pu extends ja{constructor(p,m,E=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,h.Z)(function*(){let E=Jc.get(m.auth._key());if(!E){try{const N=(yield function(v,p){return Bp.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;E=()=>Promise.resolve(N)}catch(D){E=()=>Promise.reject(D)}Jc.set(m.auth._key(),E)}return m.bypassAuthState||Jc.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,E=this;return(0,h.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(E,p);if("unknown"!==p.type){if(p.eventId){const D=yield E.auth._redirectUserForId(p.eventId);if(D)return E.user=D,m().call(E,p);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function Bp(){return(Bp=(0,h.Z)(function*(v,p){const m=ra(p),E=$a(v);if(!(yield E._isAvailable()))return!1;const D="true"===(yield E._get(m));return yield E._remove(m),D})).apply(this,arguments)}function es(v,p){return ed.apply(this,arguments)}function ed(){return(ed=(0,h.Z)(function*(v,p){return $a(v)._set(ra(p),"true")})).apply(this,arguments)}function $a(v){return qn(v._redirectPersistence)}function ra(v){return In("pendingRedirect",v.config.apiKey,v.name)}function jp(){return(jp=(0,h.Z)(function*(v,p,m){const E=_n(v);sr(v,p,an);const D=ft(E,m);return yield es(D,E),D._openRedirect(E,p,"signInViaRedirect")})).apply(this,arguments)}function Ou(){return(Ou=(0,h.Z)(function*(v,p,m){const E=(0,L.m9)(v);sr(E.auth,p,an);const D=ft(E.auth,m);yield es(D,E.auth);const N=yield Zt(E);return D._openRedirect(E.auth,p,"reauthViaRedirect",N)})).apply(this,arguments)}function $p(){return($p=(0,h.Z)(function*(v,p,m){const E=(0,L.m9)(v);sr(E.auth,p,an);const D=ft(E.auth,m);yield Ht(!1,E,p.providerId),yield es(D,E.auth);const N=yield Zt(E);return D._openRedirect(E.auth,p,"linkViaRedirect",N)})).apply(this,arguments)}function Ha(){return(Ha=(0,h.Z)(function*(v,p){return yield _n(v)._initializationPromise,Fu(v,p,!1)})).apply(this,arguments)}function Fu(v,p){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,h.Z)(function*(v,p,m=!1){const E=_n(v),D=ft(E,p),W=yield new Pu(E,D,m).execute();return W&&!m&&(delete W.user._redirectEventId,yield E._persistUserIfCurrent(W.user),yield E._setRedirectUser(null,p)),W})).apply(this,arguments)}function Zt(v){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,h.Z)(function*(v){const p=jn(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class qa{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(p,E)&&(m=!0,this.sendToConsumer(p,E),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kh(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var E;if(p.error&&!kh(p)){const D=(null===(E=p.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(Tn(this.auth,D))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const E=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&E}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(y_(p))}saveEventToCache(p){this.cachedEventUids.add(y_(p)),this.lastProcessedEventTime=Date.now()}}function y_(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function kh({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===(null==p?void 0:p.code)}function Fh(v){return $s.apply(this,arguments)}function $s(){return($s=(0,h.Z)(function*(v,p={}){return on(v,"GET","/v1/projects",p)})).apply(this,arguments)}const nd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,v_=/^https?/;function Cl(){return(Cl=(0,h.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield Fh(v);for(const m of p)try{if(rd(m))return}catch(E){}wn(v,"unauthorized-domain")})).apply(this,arguments)}function rd(v){const p=Cr(),{protocol:m,hostname:E}=new URL(p);if(v.startsWith("chrome-extension://")){const W=new URL(v);return""===W.hostname&&""===E?"chrome-extension:"===m&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&W.hostname===E}if(!v_.test(m))return!1;if(nd.test(v))return E===v;const D=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+D+"|"+D+")$","i").test(E)}const id=new He(3e4,6e4);function Lh(){const v=Xn().___jsl;if(null==v?void 0:v.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let So=null;function yw(v){return So=So||function(v){return new Promise((p,m)=>{var E,D,N;function W(){Lh(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Lh(),m(Tn(v,"network-request-failed"))},timeout:id.get()})}if(null===(D=null===(E=Xn().gapi)||void 0===E?void 0:E.iframes)||void 0===D?void 0:D.Iframe)p(gapi.iframes.getContext());else{if(!(null===(N=Xn().gapi)||void 0===N?void 0:N.load)){const le=Bs("iframefcb");return Xn()[le]=()=>{gapi.load?W():m(Tn(v,"network-request-failed"))},wo(`https://apis.google.com/js/api.js?onload=${le}`).catch(Le=>m(Le))}W()}}).catch(p=>{throw So=null,p})}(v),So}const vw=new He(5e3,15e3),Ew={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ia=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bl(v){const p=v.config;Me(p.authDomain,v,"auth-domain-config-required");const m=p.emulator?gt(p,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,E={apiKey:p.apiKey,appName:v.name,v:ae.SDK_VERSION},D=ia.get(v.config.apiHost);D&&(E.eid=D);const N=v._getFrameworks();return N.length&&(E.fw=N.join(",")),`${m}?${(0,L.xO)(E).slice(1)}`}function Uh(){return(Uh=(0,h.Z)(function*(v){const p=yield yw(v),m=Xn().gapi;return Me(m,v,"internal-error"),p.open({where:document.body,url:bl(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ew,dontclear:!0},E=>new Promise(function(){var D=(0,h.Z)(function*(N,W){yield E.restyle({setHideOnLeave:!1});const le=Tn(v,"network-request-failed"),Le=Xn().setTimeout(()=>{W(le)},vw.get());function Re(){Xn().clearTimeout(Le),N(E)}E.ping(Re).then(Re,()=>{W(le)})});return function(N,W){return D.apply(this,arguments)}}()))})).apply(this,arguments)}const qp={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Zp{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function Tl(v,p,m,E,D,N){Me(v.config.authDomain,v,"auth-domain-config-required"),Me(v.config.apiKey,v,"invalid-api-key");const W={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:E,v:ae.SDK_VERSION,eventId:D};if(p instanceof an){p.setDefaultLanguage(v.languageCode),W.providerId=p.providerId||"",(0,L.xb)(p.getCustomParameters())||(W.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Le,Re]of Object.entries(N||{}))W[Le]=Re}if(p instanceof co){const Le=p.getScopes().filter(Re=>""!==Re);Le.length>0&&(W.scopes=Le.join(","))}v.tenantId&&(W.tid=v.tenantId);const le=W;for(const Le of Object.keys(le))void 0===le[Le]&&delete le[Le];return`${function({config:v}){return v.emulator?gt(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,L.xO)(le).slice(1)}`}const Sl="webStorageSupport";class jh extends class{constructor(p){this.factorId=p}_process(p,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,E);case"signin":return this._finalizeSignIn(p,m.credential);default:return or("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new jh(p)}_finalizeEnroll(p,m,E){return function(v,p){return on(v,"POST","/v2/accounts/mfaEnrollment:finalize",wt(v,p))}(p,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function(v,p){return on(v,"POST","/v2/accounts/mfaSignIn:finalize",wt(v,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let od=(()=>{class v{constructor(){}static assertion(m){return jh._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var v,C_="@firebase/auth",bw="0.19.12";class oI{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,h.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(E=>{var D;p((null===(D=E)||void 0===D?void 0:D.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);!m||(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function za(){return window}function Qp(){return(Qp=(0,h.Z)(function*(v,p,m){var E;const{BuildInfo:D}=za();Ze(p.sessionId,"AuthEvent did not contain a session ID");const N=yield eg(p.sessionId),W={};return hs()?W.ibi=D.packageName:cn()?W.apn=D.packageName:wn(v,"operation-not-supported-in-this-environment"),D.displayName&&(W.appDisplayName=D.displayName),W.sessionId=N,Tl(v,m,p.type,void 0,null!==(E=p.eventId)&&void 0!==E?E:void 0,W)})).apply(this,arguments)}function Xp(){return(Xp=(0,h.Z)(function*(v){const{BuildInfo:p}=za(),m={};hs()?m.iosBundleId=p.packageName:cn()?m.androidPackageName=p.packageName:wn(v,"operation-not-supported-in-this-environment"),yield Fh(v,m)})).apply(this,arguments)}function Vu(){return(Vu=(0,h.Z)(function*(v,p,m){const{cordova:E}=za();let D=()=>{};try{yield new Promise((N,W)=>{let le=null;function Le(){var nt;N();const en=null===(nt=E.plugins.browsertab)||void 0===nt?void 0:nt.close;"function"==typeof en&&en(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function Re(){le||(le=window.setTimeout(()=>{W(Tn(v,"redirect-cancelled-by-user"))},2e3))}function Je(){"visible"===(null==document?void 0:document.visibilityState)&&Re()}p.addPassiveListener(Le),document.addEventListener("resume",Re,!1),cn()&&document.addEventListener("visibilitychange",Je,!1),D=()=>{p.removePassiveListener(Le),document.removeEventListener("resume",Re,!1),document.removeEventListener("visibilitychange",Je,!1),le&&window.clearTimeout(le)}})}finally{D()}})).apply(this,arguments)}function eg(v){return ud.apply(this,arguments)}function ud(){return(ud=(0,h.Z)(function*(v){const p=nr(v),m=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(m)).map(D=>D.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function nr(v){if(Ze(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(v);const p=new ArrayBuffer(v.length),m=new Uint8Array(p);for(let E=0;E<v.length;E++)m[E]=v.charCodeAt(E);return m}v="Browser",(0,ae._registerComponent)(new Rt.wA("auth",(p,{options:m})=>{const E=p.getProvider("app").getImmediate(),D=p.getProvider("heartbeat"),{apiKey:N,authDomain:W}=E.options;return((le,Le)=>{Me(N&&!N.includes(":"),"invalid-api-key",{appName:le.name}),Me(!(null==W?void 0:W.includes(":")),"argument-error",{appName:le.name});const Re={apiKey:N,authDomain:W,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wp(v)},Je=new Di(le,Le,Re);return function(v,p){const m=(null==p?void 0:p.persistence)||[],E=(Array.isArray(m)?m:[m]).map(qn);(null==p?void 0:p.errorMap)&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(E,null==p?void 0:p.popupRedirectResolver)}(Je,m),Je})(E,D)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,E)=>{p.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new Rt.wA("auth-internal",p=>{const m=_n(p.getProvider("auth").getImmediate());return new oI(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(C_,bw,void 0),(0,ae.registerVersion)(C_,bw,"esm2017");class T_ extends qa{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(p)),super.onEvent(p)}initialized(){var p=this;return(0,h.Z)(function*(){yield p.initPromise})()}}function ng(v){return rg.apply(this,arguments)}function rg(){return(rg=(0,h.Z)(function*(v){const p=yield sg()._get(Ka(v));return p&&(yield sg()._remove(Ka(v))),p})).apply(this,arguments)}function Za(){const v=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const E=Math.floor(Math.random()*p.length);v.push(p.charAt(E))}return v.join("")}function sg(){return qn(Ji)}function Ka(v){return In("authEvent",v.config.apiKey,v.name)}function Or(v){if(!(null==v?void 0:v.includes("?")))return{};const[p,...m]=v.split("?");return(0,L.zd)(m.join("?"))}function kr(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Tn("no-auth-event")}}function ri(){var v;return(null===(v=null==self?void 0:self.location)||void 0===v?void 0:v.protocol)||null}function $h(v=(0,L.z$)()){return!("file:"!==ri()&&"ionic:"!==ri()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function A_(){try{const v=self.localStorage,p=jn();if(v)return v.setItem(p,"1"),v.removeItem(p),!function(v=(0,L.z$)()){return(0,L.w1)()&&11===(null==document?void 0:document.documentMode)||function(v=(0,L.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,L.hl)()}catch(v){return Gh()&&(0,L.hl)()}return!1}function Gh(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ya(){return("http:"===ri()||"https:"===ri()||(0,L.ru)()||$h())&&!((0,L.b$)()||(0,L.UG)())&&A_()&&!Gh()}function qh(){return $h()&&"undefined"!=typeof document}function Pl(){return(Pl=(0,h.Z)(function*(){return!!qh()&&new Promise(v=>{const p=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),v(!0)})})})).apply(this,arguments)}const Dr={LOCAL:"local",NONE:"none",SESSION:"session"},Ol=Me,R_="persistence";function cg(v){return dg.apply(this,arguments)}function dg(){return(dg=(0,h.Z)(function*(v){yield v._initializationPromise;const p=Wh(),m=In(R_,v.config.apiKey,v.name);p&&p.setItem(m,v._getPersistence())})).apply(this,arguments)}function Wh(){var v;try{return(null===(v="undefined"!=typeof window?window:null)||void 0===v?void 0:v.sessionStorage)||null}catch(p){return null}}const Rw=Me;class Es{constructor(){this.browserResolver=qn(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yo,this._completeRedirectFn=Fu}_openPopup(p,m,E,D){var N=this;return(0,h.Z)(function*(){var W;Ze(null===(W=N.eventManagers[p._key()])||void 0===W?void 0:W.manager,"_initialize() not called before _openPopup()");const le=Tl(p,m,E,Cr(),D);return function(v,p,m,E=500,D=600){const N=Math.max((window.screen.availHeight-D)/2,0).toString(),W=Math.max((window.screen.availWidth-E)/2,0).toString();let le="";const Le=Object.assign(Object.assign({},qp),{width:E.toString(),height:D.toString(),top:N,left:W}),Re=(0,L.z$)().toLowerCase();m&&(le=qo(Re)?"_blank":m),Br(Re)&&(p=p||"http://localhost",Le.scrollbars="yes");const Je=Object.entries(Le).reduce((en,[mr,Qa])=>`${en}${mr}=${Qa},`,"");if(function(v=(0,L.z$)()){var p;return hs(v)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(Re)&&"_self"!==le)return function(v,p){const m=document.createElement("a");m.href=v,m.target=p;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(p||"",le),new Zp(null);const nt=window.open(p||"",le,Je);Me(nt,v,"popup-blocked");try{nt.focus()}catch(en){}return new Zp(nt)}(p,le,jn())})()}_openRedirect(p,m,E,D){var N=this;return(0,h.Z)(function*(){return yield N._originValidation(p),v=Tl(p,m,E,Cr(),D),Xn().location.href=v,new Promise(()=>{});var v})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:D,promise:N}=this.eventManagers[m];return D?Promise.resolve(D):(Ze(N,"If manager is not set, promise should be"),N)}const E=this.initAndGetManager(p);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(p){var m=this;return(0,h.Z)(function*(){const E=yield function(v){return Uh.apply(this,arguments)}(p),D=new qa(p);return E.register("authEvent",N=>(Me(null==N?void 0:N.authEvent,p,"invalid-auth-event"),{status:D.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:D},m.iframes[p._key()]=E,D})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(Sl,{type:Sl},D=>{var N;const W=null===(N=null==D?void 0:D[0])||void 0===N?void 0:N[Sl];void 0!==W&&m(!!W),wn(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function(v){return Cl.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return Ps()||Ms()||hs()}}),this.cordovaResolver=qn(class{constructor(){this._redirectPersistence=yo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Fu}_initialize(p){var m=this;return(0,h.Z)(function*(){const E=p._key();let D=m.eventManagers.get(E);return D||(D=new T_(p),m.eventManagers.set(E,D),m.attachCallbackListeners(p,D)),D})()}_openPopup(p){wn(p,"operation-not-supported-in-this-environment")}_openRedirect(p,m,E,D){var N=this;return(0,h.Z)(function*(){!function(v){var p,m,E,D,N,W,le,Le,Re,Je;const nt=za();Me("function"==typeof(null===(p=null==nt?void 0:nt.universalLinks)||void 0===p?void 0:p.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Me(void 0!==(null===(m=null==nt?void 0:nt.BuildInfo)||void 0===m?void 0:m.packageName),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Me("function"==typeof(null===(N=null===(D=null===(E=null==nt?void 0:nt.cordova)||void 0===E?void 0:E.plugins)||void 0===D?void 0:D.browsertab)||void 0===N?void 0:N.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Me("function"==typeof(null===(Le=null===(le=null===(W=null==nt?void 0:nt.cordova)||void 0===W?void 0:W.plugins)||void 0===le?void 0:le.browsertab)||void 0===Le?void 0:Le.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Me("function"==typeof(null===(Je=null===(Re=null==nt?void 0:nt.cordova)||void 0===Re?void 0:Re.InAppBrowser)||void 0===Je?void 0:Je.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const W=yield N._initialize(p);yield W.initialized(),W.resetRedirect(),Jc.clear(),yield N._originValidation(p);const le=function(v,p,m=null){return{type:p,eventId:m,urlResponse:null,sessionId:Za(),postBody:null,tenantId:v.tenantId,error:Tn(v,"no-auth-event")}}(p,E,D);yield function(v,p){return sg()._set(Ka(v),p)}(p,le);const Le=yield function(v,p,m){return Qp.apply(this,arguments)}(p,le,m),Re=yield function(v){const{cordova:p}=za();return new Promise(m=>{p.plugins.browsertab.isAvailable(E=>{let D=null;E?p.plugins.browsertab.openUrl(v):D=p.InAppBrowser.open(v,function(v=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),m(D)})})}(Le);return function(v,p,m){return Vu.apply(this,arguments)}(p,W,Re)})()}_isIframeWebStorageSupported(p,m){throw new Error("Method not implemented.")}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function(v){return Xp.apply(this,arguments)}(p)),this.originValidationPromises[m]}attachCallbackListeners(p,m){const{universalLinks:E,handleOpenURL:D,BuildInfo:N}=za(),W=setTimeout((0,h.Z)(function*(){yield ng(p),m.onEvent(kr())}),500),le=function(){var Je=(0,h.Z)(function*(nt){clearTimeout(W);const en=yield ng(p);let mr=null;en&&(null==nt?void 0:nt.url)&&(mr=function(v,p){var m,E;const D=function(v){const p=Or(v),m=p.link?decodeURIComponent(p.link):void 0,E=Or(m).link,D=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return Or(D).link||D||E||m||v}(p);if(D.includes("/__/auth/callback")){const N=Or(D),W=N.firebaseError?function(v){try{return JSON.parse(v)}catch(p){return null}}(decodeURIComponent(N.firebaseError)):null,le=null===(E=null===(m=null==W?void 0:W.code)||void 0===m?void 0:m.split("auth/"))||void 0===E?void 0:E[1],Le=le?Tn(le):null;return Le?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Le,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:D,postBody:null}}return null}(en,nt.url)),m.onEvent(mr||kr())});return function(en){return Je.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,le);const Le=D,Re=`${N.packageName.toLowerCase()}://`;za().handleOpenURL=function(){var Je=(0,h.Z)(function*(nt){if(nt.toLowerCase().startsWith(Re)&&le({url:nt}),"function"==typeof Le)try{Le(nt)}catch(en){console.error(en)}});return function(nt){return Je.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=yo,this._completeRedirectFn=Fu}_initialize(p){var m=this;return(0,h.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,m,E,D){var N=this;return(0,h.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(p,m,E,D)})()}_openRedirect(p,m,E,D){var N=this;return(0,h.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(p,m,E,D)})()}_isIframeWebStorageSupported(p,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,m)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return qh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Rw(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,h.Z)(function*(){if(p.underlyingResolver)return;const m=yield function(){return Pl.apply(this,arguments)}();p.underlyingResolver=m?p.cordovaResolver:p.browserResolver})()}}function ii(v){return v.unwrap()}function Nw(v){return hg(v)}function hg(v){const{_tokenResponse:p}=v instanceof L.ZR?v.customData:v;if(!p)return null;if(!(v instanceof L.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return ze.credentialFromResult(v);const m=p.providerId;if(!m||"password"===m)return null;let E;switch(m){case"google.com":E=pn;break;case"facebook.com":E=mu;break;case"github.com":E=al;break;case"twitter.com":E=vu;break;default:const{oauthIdToken:D,oauthAccessToken:N,oauthTokenSecret:W,pendingToken:le,nonce:Le}=p;return N||W||D||le?le?m.startsWith("saml.")?Yi._create(m,le):Ki._fromParams({providerId:m,signInMethod:m,pendingToken:le,idToken:D,accessToken:N}):new ho(m).credential({idToken:D,accessToken:N,rawNonce:Le}):null}return v instanceof L.ZR?E.credentialFromError(v):E.credentialFromResult(v)}function Kr(v,p){return p.catch(m=>{throw m instanceof L.ZR&&function(v,p){var m;const E=null===(m=p.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===p.code)p.resolver=new dd(v,function(v,p){var m;const E=(0,L.m9)(v),D=p;return Me(p.customData.operationType,E,"argument-error"),Me(null===(m=D.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),La._fromError(E,D)}(v,p));else if(E){const D=hg(p),N=p;D&&(N.credential=D,N.tenantId=E.tenantId||void 0,N.email=E.email||void 0,N.phoneNumber=E.phoneNumber||void 0)}}(v,m),m}).then(m=>{const D=m.user;return{operationType:m.operationType,credential:Nw(m),additionalUserInfo:qc(m),user:oa.getOrCreate(D)}})}function Zh(v,p){return fg.apply(this,arguments)}function fg(){return(fg=(0,h.Z)(function*(v,p){const m=yield p;return{verificationId:m.verificationId,confirm:E=>Kr(v,m.confirm(E))}})).apply(this,arguments)}class dd{constructor(p,m){this.resolver=m,this.auth=function(v){return v.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return Kr(ii(this.auth),this.resolver.resolveSignIn(p))}}class oa{constructor(p){this._delegate=p,this.multiFactor=function(v){const p=(0,L.m9)(v);return Ls.has(p)||Ls.set(p,Th._fromUser(p)),Ls.get(p)}(p)}static getOrCreate(p){return oa.USER_MAP.has(p)||oa.USER_MAP.set(p,new oa(p)),oa.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var m=this;return(0,h.Z)(function*(){return Kr(m.auth,wh(m._delegate,p))})()}linkWithPhoneNumber(p,m){var E=this;return(0,h.Z)(function*(){return Zh(E.auth,function(v,p,m){return I.apply(this,arguments)}(E._delegate,p,m))})()}linkWithPopup(p){var m=this;return(0,h.Z)(function*(){return Kr(m.auth,function(v,p,m){return Vp.apply(this,arguments)}(m._delegate,p,Es))})()}linkWithRedirect(p){var m=this;return(0,h.Z)(function*(){return yield cg(_n(m.auth)),function(v,p,m){return function(v,p,m){return $p.apply(this,arguments)}(v,p,m)}(m._delegate,p,Es)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var m=this;return(0,h.Z)(function*(){return Kr(m.auth,Jo(m._delegate,p))})()}reauthenticateWithPhoneNumber(p,m){return Zh(this.auth,function(v,p,m){return M.apply(this,arguments)}(this._delegate,p,m))}reauthenticateWithPopup(p){return Kr(this.auth,function(v,p,m){return js.apply(this,arguments)}(this._delegate,p,Es))}reauthenticateWithRedirect(p){var m=this;return(0,h.Z)(function*(){return yield cg(_n(m.auth)),function(v,p,m){return function(v,p,m){return Ou.apply(this,arguments)}(v,p,m)}(m._delegate,p,Es)})()}sendEmailVerification(p){return function(v,p){return $c.apply(this,arguments)}(this._delegate,p)}unlink(p){var m=this;return(0,h.Z)(function*(){return yield function(v,p){return Eu.apply(this,arguments)}(m._delegate,p),m})()}updateEmail(p){return function(v,p){return ea((0,L.m9)(v),p,null)}(this._delegate,p)}updatePassword(p){return function(v,p){return ea((0,L.m9)(v),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function(v,p){return Ne.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function(v,p){return gl.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,m){return function(v,p,m){return ka.apply(this,arguments)}(this._delegate,p,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}oa.USER_MAP=new WeakMap;const Ao=Me;let Gs=(()=>{class v{constructor(m,E){if(this.app=m,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:D}=m.options;Ao(D,"invalid-api-key",{appName:m.name}),Ao(D,"invalid-api-key",{appName:m.name});const N="undefined"!=typeof window?Es:void 0;this._delegate=E.initialize({options:{persistence:uI(D,m.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(Gn),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?oa.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,E){!function(v,p,m){const E=_n(v);Me(E._canInitEmulator,E,"emulator-config-failed"),Me(/^https?:\/\//.test(p),E,"invalid-emulator-scheme");const D=!!(null==m?void 0:m.disableWarnings),N=du(p),{host:W,port:le}=function(v){const p=du(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",D=/^(\[[^\]]+\])(:|$)/.exec(E);if(D){const N=D[1];return{host:N,port:Si(E.substr(N.length+1))}}{const[N,W]=E.split(":");return{host:N,port:Si(W)}}}(p);E.config.emulator={url:`${N}//${W}${null===le?"":`:${le}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:W,port:le,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:D})}),D||function(){function v(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,m,E)}applyActionCode(m){return function(v,p){return Fs.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return dl(this._delegate,m)}confirmPasswordReset(m,E){return function(v,p,m){return bu.apply(this,arguments)}(this._delegate,m,E)}createUserWithEmailAndPassword(m,E){var D=this;return(0,h.Z)(function*(){return Kr(D._delegate,function(v,p,m){return Tu.apply(this,arguments)}(D._delegate,m,E))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function(v,p){return Oa.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function(v,p){const m=lo.parseLink(p);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,h.Z)(function*(){Ao(Ya(),m._delegate,"operation-not-supported-in-this-environment");const E=yield function(v,p){return Ha.apply(this,arguments)}(m._delegate,Es);return E?Kr(m._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function(v,p){_n(v)._logFramework(p)}(this._delegate,m)}onAuthStateChanged(m,E,D){const{next:N,error:W,complete:le}=Mw(m,E,D);return this._delegate.onAuthStateChanged(N,W,le)}onIdTokenChanged(m,E,D){const{next:N,error:W,complete:le}=Mw(m,E,D);return this._delegate.onIdTokenChanged(N,W,le)}sendSignInLinkToEmail(m,E){return function(v,p,m){return Su.apply(this,arguments)}(this._delegate,m,E)}sendPasswordResetEmail(m,E){return function(v,p,m){return Bc.apply(this,arguments)}(this._delegate,m,E||void 0)}setPersistence(m){var E=this;return(0,h.Z)(function*(){let D;switch(function(v,p){Ol(Object.values(Dr).includes(p),v,"invalid-persistence-type"),(0,L.b$)()?Ol(p!==Dr.SESSION,v,"unsupported-persistence-type"):(0,L.UG)()?Ol(p===Dr.NONE,v,"unsupported-persistence-type"):Gh()?Ol(p===Dr.NONE||p===Dr.LOCAL&&(0,L.hl)(),v,"unsupported-persistence-type"):Ol(p===Dr.NONE||A_(),v,"unsupported-persistence-type")}(E._delegate,m),m){case Dr.SESSION:D=yo;break;case Dr.LOCAL:D=(yield qn(Us)._isAvailable())?Us:Ji;break;case Dr.NONE:D=Ti;break;default:return wn("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(D)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return Kr(this._delegate,function(v){return Lc.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return Kr(this._delegate,Qo(this._delegate,m))}signInWithCustomToken(m){return Kr(this._delegate,function(v,p){return Ai.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,E){return Kr(this._delegate,function(v,p,m){return Qo((0,L.m9)(v),gu.credential(p,m))}(this._delegate,m,E))}signInWithEmailLink(m,E){return Kr(this._delegate,function(v,p,m){return go.apply(this,arguments)}(this._delegate,m,E))}signInWithPhoneNumber(m,E){return Zh(this._delegate,function(v,p,m){return Io.apply(this,arguments)}(this._delegate,m,E))}signInWithPopup(m){var E=this;return(0,h.Z)(function*(){return Ao(Ya(),E._delegate,"operation-not-supported-in-this-environment"),Kr(E._delegate,function(v,p,m){return To.apply(this,arguments)}(E._delegate,m,Es))})()}signInWithRedirect(m){var E=this;return(0,h.Z)(function*(){return Ao(Ya(),E._delegate,"operation-not-supported-in-this-environment"),yield cg(E._delegate),function(v,p,m){return function(v,p,m){return jp.apply(this,arguments)}(v,p,m)}(E._delegate,m,Es)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function(v,p){return fl.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Dr,v})();function Mw(v,p,m){let E=v;"function"!=typeof v&&({next:E,error:p,complete:m}=v);const D=E;return{next:W=>D(W&&oa.getOrCreate(W)),error:p,complete:m}}function uI(v,p){const m=function(v,p){const m=Wh();if(!m)return[];const E=In(R_,v,p);switch(m.getItem(E)){case Dr.NONE:return[Ti];case Dr.LOCAL:return[Us,yo];case Dr.SESSION:return[yo];default:return[]}}(v,p);if("undefined"!=typeof self&&!m.includes(Us)&&m.push(Us),"undefined"!=typeof window)for(const E of[Ji,yo])m.includes(E)||m.push(E);return m.includes(Ti)||m.push(Ti),m}class Kh{constructor(){this.providerId="phone",this._delegate=new ze(ii(X.Z.auth()))}static credential(p,m){return ze.credential(p,m)}verifyPhoneNumber(p,m){return this._delegate.verifyPhoneNumber(p,m)}unwrap(){return this._delegate}}Kh.PHONE_SIGN_IN_METHOD=ze.PHONE_SIGN_IN_METHOD,Kh.PROVIDER_ID=ze.PROVIDER_ID;const lI=Me;class xo{constructor(p,m,E=X.Z.app()){var D;lI(null===(D=E.options)||void 0===D?void 0:D.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Fp(p,m,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(v){v.INTERNAL.registerComponent(new Rt.wA("auth-compat",p=>{const m=p.getProvider("app-compat").getImmediate(),E=p.getProvider("auth");return new Gs(m,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:gu,FacebookAuthProvider:mu,GithubAuthProvider:al,GoogleAuthProvider:pn,OAuthProvider:ho,SAMLAuthProvider:yu,PhoneAuthProvider:Kh,PhoneMultiFactorGenerator:od,RecaptchaVerifier:xo,TwitterAuthProvider:vu,Auth:Gs,AuthCredential:Sa,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.12")}(X.Z)},7574:(tt,be,V)=>{"use strict";V.d(be,{y:()=>G});var h=V(7393),L=V(9181),ae=V(6490),K=V(6554),me=V(4487);var U=V(2494);let G=(()=>{class te{constructor(fe){this._isScalar=!1,fe&&(this._subscribe=fe)}lift(fe){const pe=new te;return pe.source=this,pe.operator=fe,pe}subscribe(fe,pe,Fe){const{operator:oe}=this,he=function(te,ue,fe){if(te){if(te instanceof h.L)return te;if(te[L.b])return te[L.b]()}return te||ue||fe?new h.L(te,ue,fe):new h.L(ae.c)}(fe,pe,Fe);if(he.add(oe?oe.call(he,this.source):this.source||U.v.useDeprecatedSynchronousErrorHandling&&!he.syncErrorThrowable?this._subscribe(he):this._trySubscribe(he)),U.v.useDeprecatedSynchronousErrorHandling&&he.syncErrorThrowable&&(he.syncErrorThrowable=!1,he.syncErrorThrown))throw he.syncErrorValue;return he}_trySubscribe(fe){try{return this._subscribe(fe)}catch(pe){U.v.useDeprecatedSynchronousErrorHandling&&(fe.syncErrorThrown=!0,fe.syncErrorValue=pe),function(te){for(;te;){const{closed:ue,destination:fe,isStopped:pe}=te;if(ue||pe)return!1;te=fe&&fe instanceof h.L?fe:null}return!0}(fe)?fe.error(pe):console.warn(pe)}}forEach(fe,pe){return new(pe=B(pe))((Fe,oe)=>{let he;he=this.subscribe(Oe=>{try{fe(Oe)}catch($e){oe($e),he&&he.unsubscribe()}},oe,Fe)})}_subscribe(fe){const{source:pe}=this;return pe&&pe.subscribe(fe)}[K.L](){return this}pipe(...fe){return 0===fe.length?this:function(te){return 0===te.length?me.y:1===te.length?te[0]:function(fe){return te.reduce((pe,Fe)=>Fe(pe),fe)}}(fe)(this)}toPromise(fe){return new(fe=B(fe))((pe,Fe)=>{let oe;this.subscribe(he=>oe=he,he=>Fe(he),()=>pe(oe))})}}return te.create=ue=>new te(ue),te})();function B(te){if(te||(te=U.v.Promise||Promise),!te)throw new Error("no Promise impl found");return te}},6490:(tt,be,V)=>{"use strict";V.d(be,{c:()=>L});var h=V(2494),X=V(4449);const L={closed:!0,next(ae){},error(ae){if(h.v.useDeprecatedSynchronousErrorHandling)throw ae;(0,X.z)(ae)},complete(){}}},9765:(tt,be,V)=>{"use strict";V.d(be,{Yc:()=>me,xQ:()=>J});var h=V(7574),X=V(7393),L=V(5319),ae=V(7971),re=V(8858),K=V(9181);class me extends X.L{constructor(G){super(G),this.destination=G}}let J=(()=>{class U extends h.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[K.b](){return new me(this)}lift(B){const te=new ne(this,this);return te.operator=B,te}next(B){if(this.closed)throw new ae.N;if(!this.isStopped){const{observers:te}=this,ue=te.length,fe=te.slice();for(let pe=0;pe<ue;pe++)fe[pe].next(B)}}error(B){if(this.closed)throw new ae.N;this.hasError=!0,this.thrownError=B,this.isStopped=!0;const{observers:te}=this,ue=te.length,fe=te.slice();for(let pe=0;pe<ue;pe++)fe[pe].error(B);this.observers.length=0}complete(){if(this.closed)throw new ae.N;this.isStopped=!0;const{observers:B}=this,te=B.length,ue=B.slice();for(let fe=0;fe<te;fe++)ue[fe].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(B){if(this.closed)throw new ae.N;return super._trySubscribe(B)}_subscribe(B){if(this.closed)throw new ae.N;return this.hasError?(B.error(this.thrownError),L.w.EMPTY):this.isStopped?(B.complete(),L.w.EMPTY):(this.observers.push(B),new re.W(this,B))}asObservable(){const B=new h.y;return B.source=this,B}}return U.create=(G,B)=>new ne(G,B),U})();class ne extends J{constructor(G,B){super(),this.destination=G,this.source=B}next(G){const{destination:B}=this;B&&B.next&&B.next(G)}error(G){const{destination:B}=this;B&&B.error&&this.destination.error(G)}complete(){const{destination:G}=this;G&&G.complete&&this.destination.complete()}_subscribe(G){const{source:B}=this;return B?this.source.subscribe(G):L.w.EMPTY}}},8858:(tt,be,V)=>{"use strict";V.d(be,{W:()=>X});var h=V(5319);class X extends h.w{constructor(ae,re){super(),this.subject=ae,this.subscriber=re,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ae=this.subject,re=ae.observers;if(this.subject=null,!re||0===re.length||ae.isStopped||ae.closed)return;const K=re.indexOf(this.subscriber);-1!==K&&re.splice(K,1)}}},7393:(tt,be,V)=>{"use strict";V.d(be,{L:()=>me});var h=V(9105),X=V(6490),L=V(5319),ae=V(9181),re=V(2494),K=V(4449);class me extends L.w{constructor(U,G,B){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=X.c;break;case 1:if(!U){this.destination=X.c;break}if("object"==typeof U){U instanceof me?(this.syncErrorThrowable=U.syncErrorThrowable,this.destination=U,U.add(this)):(this.syncErrorThrowable=!0,this.destination=new J(this,U));break}default:this.syncErrorThrowable=!0,this.destination=new J(this,U,G,B)}}[ae.b](){return this}static create(U,G,B){const te=new me(U,G,B);return te.syncErrorThrowable=!1,te}next(U){this.isStopped||this._next(U)}error(U){this.isStopped||(this.isStopped=!0,this._error(U))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(U){this.destination.next(U)}_error(U){this.destination.error(U),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:U}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=U,this}}class J extends me{constructor(U,G,B,te){super(),this._parentSubscriber=U;let ue,fe=this;(0,h.m)(G)?ue=G:G&&(ue=G.next,B=G.error,te=G.complete,G!==X.c&&(fe=Object.create(G),(0,h.m)(fe.unsubscribe)&&this.add(fe.unsubscribe.bind(fe)),fe.unsubscribe=this.unsubscribe.bind(this))),this._context=fe,this._next=ue,this._error=B,this._complete=te}next(U){if(!this.isStopped&&this._next){const{_parentSubscriber:G}=this;re.v.useDeprecatedSynchronousErrorHandling&&G.syncErrorThrowable?this.__tryOrSetError(G,this._next,U)&&this.unsubscribe():this.__tryOrUnsub(this._next,U)}}error(U){if(!this.isStopped){const{_parentSubscriber:G}=this,{useDeprecatedSynchronousErrorHandling:B}=re.v;if(this._error)B&&G.syncErrorThrowable?(this.__tryOrSetError(G,this._error,U),this.unsubscribe()):(this.__tryOrUnsub(this._error,U),this.unsubscribe());else if(G.syncErrorThrowable)B?(G.syncErrorValue=U,G.syncErrorThrown=!0):(0,K.z)(U),this.unsubscribe();else{if(this.unsubscribe(),B)throw U;(0,K.z)(U)}}}complete(){if(!this.isStopped){const{_parentSubscriber:U}=this;if(this._complete){const G=()=>this._complete.call(this._context);re.v.useDeprecatedSynchronousErrorHandling&&U.syncErrorThrowable?(this.__tryOrSetError(U,G),this.unsubscribe()):(this.__tryOrUnsub(G),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(U,G){try{U.call(this._context,G)}catch(B){if(this.unsubscribe(),re.v.useDeprecatedSynchronousErrorHandling)throw B;(0,K.z)(B)}}__tryOrSetError(U,G,B){if(!re.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{G.call(this._context,B)}catch(te){return re.v.useDeprecatedSynchronousErrorHandling?(U.syncErrorValue=te,U.syncErrorThrown=!0,!0):((0,K.z)(te),!0)}return!1}_unsubscribe(){const{_parentSubscriber:U}=this;this._context=null,this._parentSubscriber=null,U.unsubscribe()}}},5319:(tt,be,V)=>{"use strict";V.d(be,{w:()=>K});var h=V(9796),X=V(1555),L=V(9105);const re=(()=>{function J(ne){return Error.call(this),this.message=ne?`${ne.length} errors occurred during unsubscription:\n${ne.map((U,G)=>`${G+1}) ${U.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ne,this}return J.prototype=Object.create(Error.prototype),J})();class K{constructor(ne){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,ne&&(this._ctorUnsubscribe=!0,this._unsubscribe=ne)}unsubscribe(){let ne;if(this.closed)return;let{_parentOrParents:U,_ctorUnsubscribe:G,_unsubscribe:B,_subscriptions:te}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,U instanceof K)U.remove(this);else if(null!==U)for(let ue=0;ue<U.length;++ue)U[ue].remove(this);if((0,L.m)(B)){G&&(this._unsubscribe=void 0);try{B.call(this)}catch(ue){ne=ue instanceof re?me(ue.errors):[ue]}}if((0,h.k)(te)){let ue=-1,fe=te.length;for(;++ue<fe;){const pe=te[ue];if((0,X.K)(pe))try{pe.unsubscribe()}catch(Fe){ne=ne||[],Fe instanceof re?ne=ne.concat(me(Fe.errors)):ne.push(Fe)}}}if(ne)throw new re(ne)}add(ne){let U=ne;if(!ne)return K.EMPTY;switch(typeof ne){case"function":U=new K(ne);case"object":if(U===this||U.closed||"function"!=typeof U.unsubscribe)return U;if(this.closed)return U.unsubscribe(),U;if(!(U instanceof K)){const te=U;U=new K,U._subscriptions=[te]}break;default:throw new Error("unrecognized teardown "+ne+" added to Subscription.")}let{_parentOrParents:G}=U;if(null===G)U._parentOrParents=this;else if(G instanceof K){if(G===this)return U;U._parentOrParents=[G,this]}else{if(-1!==G.indexOf(this))return U;G.push(this)}const B=this._subscriptions;return null===B?this._subscriptions=[U]:B.push(U),U}remove(ne){const U=this._subscriptions;if(U){const G=U.indexOf(ne);-1!==G&&U.splice(G,1)}}}var J;function me(J){return J.reduce((ne,U)=>ne.concat(U instanceof re?U.errors:U),[])}K.EMPTY=((J=new K).closed=!0,J)},2494:(tt,be,V)=>{"use strict";V.d(be,{v:()=>X});let h=!1;const X={Promise:void 0,set useDeprecatedSynchronousErrorHandling(L){if(L){const ae=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ae.stack)}else h&&console.log("RxJS: Back to a better error behavior. Thank you. <3");h=L},get useDeprecatedSynchronousErrorHandling(){return h}}},5345:(tt,be,V)=>{"use strict";V.d(be,{IY:()=>ae,Ds:()=>K,ft:()=>J});var h=V(7393),X=V(7574),L=V(7444);class ae extends h.L{constructor(U){super(),this.parent=U}_next(U){this.parent.notifyNext(U)}_error(U){this.parent.notifyError(U),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class K extends h.L{notifyNext(U){this.destination.next(U)}notifyError(U){this.destination.error(U)}notifyComplete(){this.destination.complete()}}function J(ne,U){if(U.closed)return;if(ne instanceof X.y)return ne.subscribe(U);let G;try{G=(0,L.s)(ne)(U)}catch(B){U.error(B)}return G}},2441:(tt,be,V)=>{"use strict";V.d(be,{c:()=>re,N:()=>K});var h=V(9765),X=V(7574),L=V(5319),ae=V(1307);class re extends X.y{constructor(G,B){super(),this.source=G,this.subjectFactory=B,this._refCount=0,this._isComplete=!1}_subscribe(G){return this.getSubject().subscribe(G)}getSubject(){const G=this._subject;return(!G||G.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let G=this._connection;return G||(this._isComplete=!1,G=this._connection=new L.w,G.add(this.source.subscribe(new me(this.getSubject(),this))),G.closed&&(this._connection=null,G=L.w.EMPTY)),G}refCount(){return(0,ae.x)()(this)}}const K=(()=>{const U=re.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:U._subscribe},_isComplete:{value:U._isComplete,writable:!0},getSubject:{value:U.getSubject},connect:{value:U.connect},refCount:{value:U.refCount}}})();class me extends h.Yc{constructor(G,B){super(G),this.connectable=B}_error(G){this._unsubscribe(),super._error(G)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const G=this.connectable;if(G){this.connectable=null;const B=G._connection;G._refCount=0,G._subject=null,G._connection=null,B&&B.unsubscribe()}}}},9193:(tt,be,V)=>{"use strict";V.d(be,{E:()=>X,c:()=>L});var h=V(7574);const X=new h.y(re=>re.complete());function L(re){return re?function(re){return new h.y(K=>re.schedule(()=>K.complete()))}(re):X}},4402:(tt,be,V)=>{"use strict";V.d(be,{D:()=>fe});var h=V(7574),X=V(7444),L=V(5319),ae=V(6554),me=V(4087),J=V(377),G=V(4072),B=V(9489);function fe(pe,Fe){return Fe?function(pe,Fe){if(null!=pe){if(function(pe){return pe&&"function"==typeof pe[ae.L]}(pe))return function(pe,Fe){return new h.y(oe=>{const he=new L.w;return he.add(Fe.schedule(()=>{const Oe=pe[ae.L]();he.add(Oe.subscribe({next($e){he.add(Fe.schedule(()=>oe.next($e)))},error($e){he.add(Fe.schedule(()=>oe.error($e)))},complete(){he.add(Fe.schedule(()=>oe.complete()))}}))})),he})}(pe,Fe);if((0,G.t)(pe))return function(pe,Fe){return new h.y(oe=>{const he=new L.w;return he.add(Fe.schedule(()=>pe.then(Oe=>{he.add(Fe.schedule(()=>{oe.next(Oe),he.add(Fe.schedule(()=>oe.complete()))}))},Oe=>{he.add(Fe.schedule(()=>oe.error(Oe)))}))),he})}(pe,Fe);if((0,B.z)(pe))return(0,me.r)(pe,Fe);if(function(pe){return pe&&"function"==typeof pe[J.hZ]}(pe)||"string"==typeof pe)return function(pe,Fe){if(!pe)throw new Error("Iterable cannot be null");return new h.y(oe=>{const he=new L.w;let Oe;return he.add(()=>{Oe&&"function"==typeof Oe.return&&Oe.return()}),he.add(Fe.schedule(()=>{Oe=pe[J.hZ](),he.add(Fe.schedule(function(){if(oe.closed)return;let $e,ht;try{const Qe=Oe.next();$e=Qe.value,ht=Qe.done}catch(Qe){return void oe.error(Qe)}ht?oe.complete():(oe.next($e),this.schedule())}))})),he})}(pe,Fe)}throw new TypeError((null!==pe&&typeof pe||pe)+" is not observable")}(pe,Fe):pe instanceof h.y?pe:new h.y((0,X.s)(pe))}},6693:(tt,be,V)=>{"use strict";V.d(be,{n:()=>ae});var h=V(7574),X=V(5015),L=V(4087);function ae(re,K){return K?(0,L.r)(re,K):new h.y((0,X.V)(re))}},6682:(tt,be,V)=>{"use strict";V.d(be,{T:()=>re});var h=V(7574),X=V(4869),L=V(3282),ae=V(6693);function re(...K){let me=Number.POSITIVE_INFINITY,J=null,ne=K[K.length-1];return(0,X.K)(ne)?(J=K.pop(),K.length>1&&"number"==typeof K[K.length-1]&&(me=K.pop())):"number"==typeof ne&&(me=K.pop()),null===J&&1===K.length&&K[0]instanceof h.y?K[0]:(0,L.J)(me)((0,ae.n)(K,J))}},5917:(tt,be,V)=>{"use strict";V.d(be,{of:()=>ae});var h=V(4869),X=V(6693),L=V(4087);function ae(...re){let K=re[re.length-1];return(0,h.K)(K)?(re.pop(),(0,L.r)(re,K)):(0,X.n)(re)}},8002:(tt,be,V)=>{"use strict";V.d(be,{U:()=>X});var h=V(7393);function X(re,K){return function(J){if("function"!=typeof re)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return J.lift(new L(re,K))}}class L{constructor(K,me){this.project=K,this.thisArg=me}call(K,me){return me.subscribe(new ae(K,this.project,this.thisArg))}}class ae extends h.L{constructor(K,me,J){super(K),this.project=me,this.count=0,this.thisArg=J||this}_next(K){let me;try{me=this.project.call(this.thisArg,K,this.count++)}catch(J){return void this.destination.error(J)}this.destination.next(me)}}},3282:(tt,be,V)=>{"use strict";V.d(be,{J:()=>L});var h=V(9773),X=V(4487);function L(ae=Number.POSITIVE_INFINITY){return(0,h.zg)(X.y,ae)}},9773:(tt,be,V)=>{"use strict";V.d(be,{zg:()=>ae});var h=V(8002),X=V(4402),L=V(5345);function ae(J,ne,U=Number.POSITIVE_INFINITY){return"function"==typeof ne?G=>G.pipe(ae((B,te)=>(0,X.D)(J(B,te)).pipe((0,h.U)((ue,fe)=>ne(B,ue,te,fe))),U)):("number"==typeof ne&&(U=ne),G=>G.lift(new re(J,U)))}class re{constructor(ne,U=Number.POSITIVE_INFINITY){this.project=ne,this.concurrent=U}call(ne,U){return U.subscribe(new K(ne,this.project,this.concurrent))}}class K extends L.Ds{constructor(ne,U,G=Number.POSITIVE_INFINITY){super(ne),this.project=U,this.concurrent=G,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(ne){this.active<this.concurrent?this._tryNext(ne):this.buffer.push(ne)}_tryNext(ne){let U;const G=this.index++;try{U=this.project(ne,G)}catch(B){return void this.destination.error(B)}this.active++,this._innerSub(U)}_innerSub(ne){const U=new L.IY(this),G=this.destination;G.add(U);const B=(0,L.ft)(ne,U);B!==U&&G.add(B)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(ne){this.destination.next(ne)}notifyComplete(){const ne=this.buffer;this.active--,ne.length>0?this._next(ne.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(tt,be,V)=>{"use strict";V.d(be,{ht:()=>G,QV:()=>ne});var h=V(7393),X=V(9193),L=V(5917),ae=V(7574);class J{constructor(ue,fe,pe){this.kind=ue,this.value=fe,this.error=pe,this.hasValue="N"===ue}observe(ue){switch(this.kind){case"N":return ue.next&&ue.next(this.value);case"E":return ue.error&&ue.error(this.error);case"C":return ue.complete&&ue.complete()}}do(ue,fe,pe){switch(this.kind){case"N":return ue&&ue(this.value);case"E":return fe&&fe(this.error);case"C":return pe&&pe()}}accept(ue,fe,pe){return ue&&"function"==typeof ue.next?this.observe(ue):this.do(ue,fe,pe)}toObservable(){switch(this.kind){case"N":return(0,L.of)(this.value);case"E":return te=this.error,new ae.y(fe=>fe.error(te));case"C":return(0,X.c)()}var te;throw new Error("unexpected notification kind value")}static createNext(ue){return void 0!==ue?new J("N",ue):J.undefinedValueNotification}static createError(ue){return new J("E",void 0,ue)}static createComplete(){return J.completeNotification}}function ne(te,ue=0){return function(pe){return pe.lift(new U(te,ue))}}J.completeNotification=new J("C"),J.undefinedValueNotification=new J("N",void 0);class U{constructor(ue,fe=0){this.scheduler=ue,this.delay=fe}call(ue,fe){return fe.subscribe(new G(ue,this.scheduler,this.delay))}}class G extends h.L{constructor(ue,fe,pe=0){super(ue),this.scheduler=fe,this.delay=pe}static dispatch(ue){const{notification:fe,destination:pe}=ue;fe.observe(pe),this.unsubscribe()}scheduleMessage(ue){this.destination.add(this.scheduler.schedule(G.dispatch,this.delay,new B(ue,this.destination)))}_next(ue){this.scheduleMessage(J.createNext(ue))}_error(ue){this.scheduleMessage(J.createError(ue)),this.unsubscribe()}_complete(){this.scheduleMessage(J.createComplete()),this.unsubscribe()}}class B{constructor(ue,fe){this.notification=ue,this.destination=fe}}},1307:(tt,be,V)=>{"use strict";V.d(be,{x:()=>X});var h=V(7393);function X(){return function(K){return K.lift(new L(K))}}class L{constructor(K){this.connectable=K}call(K,me){const{connectable:J}=this;J._refCount++;const ne=new ae(K,J),U=me.subscribe(ne);return ne.closed||(ne.connection=J.connect()),U}}class ae extends h.L{constructor(K,me){super(K),this.connectable=me}_unsubscribe(){const{connectable:K}=this;if(!K)return void(this.connection=null);this.connectable=null;const me=K._refCount;if(me<=0)return void(this.connection=null);if(K._refCount=me-1,me>1)return void(this.connection=null);const{connection:J}=this,ne=K._connection;this.connection=null,ne&&(!J||ne===J)&&ne.unsubscribe()}}},8819:(tt,be,V)=>{"use strict";V.d(be,{B:()=>me});var h=V(2441);var ae=V(1307),re=V(9765);function K(){return new re.xQ}function me(){return J=>(0,ae.x)()(function(J,ne){return function(G){let B;B="function"==typeof J?J:function(){return J};const te=Object.create(G,h.N);return te.source=G,te.subjectFactory=B,te}}(K)(J))}},2639:(tt,be,V)=>{"use strict";V.d(be,{R:()=>pe});var h=V(7574);let X=1;const L=Promise.resolve(),ae={};function re(oe){return oe in ae&&(delete ae[oe],!0)}const K={setImmediate(oe){const he=X++;return ae[he]=!0,L.then(()=>re(he)&&oe()),he},clearImmediate(oe){re(oe)}};var J=V(6465),U=V(6102);const te=new class extends U.v{flush(he){this.active=!0,this.scheduled=void 0;const{actions:Oe}=this;let $e,ht=-1,Qe=Oe.length;he=he||Oe.shift();do{if($e=he.execute(he.state,he.delay))break}while(++ht<Qe&&(he=Oe.shift()));if(this.active=!1,$e){for(;++ht<Qe&&(he=Oe.shift());)he.unsubscribe();throw $e}}}(class extends J.o{constructor(he,Oe){super(he,Oe),this.scheduler=he,this.work=Oe}requestAsyncId(he,Oe,$e=0){return null!==$e&&$e>0?super.requestAsyncId(he,Oe,$e):(he.actions.push(this),he.scheduled||(he.scheduled=K.setImmediate(he.flush.bind(he,null))))}recycleAsyncId(he,Oe,$e=0){if(null!==$e&&$e>0||null===$e&&this.delay>0)return super.recycleAsyncId(he,Oe,$e);0===he.actions.length&&(K.clearImmediate(Oe),he.scheduled=void 0)}});var ue=V(6561);class fe extends h.y{constructor(he,Oe=0,$e=te){super(),this.source=he,this.delayTime=Oe,this.scheduler=$e,(!(0,ue.k)(Oe)||Oe<0)&&(this.delayTime=0),(!$e||"function"!=typeof $e.schedule)&&(this.scheduler=te)}static create(he,Oe=0,$e=te){return new fe(he,Oe,$e)}static dispatch(he){const{source:Oe,subscriber:$e}=he;return this.add(Oe.subscribe($e))}_subscribe(he){return this.scheduler.schedule(fe.dispatch,this.delayTime,{source:this.source,subscriber:he})}}function pe(oe,he=0){return function($e){return $e.lift(new Fe(oe,he))}}class Fe{constructor(he,Oe){this.scheduler=he,this.delay=Oe}call(he,Oe){return new fe(Oe,this.delay,this.scheduler).subscribe(he)}}},3342:(tt,be,V)=>{"use strict";V.d(be,{b:()=>ae});var h=V(7393);function X(){}var L=V(9105);function ae(me,J,ne){return function(G){return G.lift(new re(me,J,ne))}}class re{constructor(J,ne,U){this.nextOrObserver=J,this.error=ne,this.complete=U}call(J,ne){return ne.subscribe(new K(J,this.nextOrObserver,this.error,this.complete))}}class K extends h.L{constructor(J,ne,U,G){super(J),this._tapNext=X,this._tapError=X,this._tapComplete=X,this._tapError=U||X,this._tapComplete=G||X,(0,L.m)(ne)?(this._context=this,this._tapNext=ne):ne&&(this._context=ne,this._tapNext=ne.next||X,this._tapError=ne.error||X,this._tapComplete=ne.complete||X)}_next(J){try{this._tapNext.call(this._context,J)}catch(ne){return void this.destination.error(ne)}this.destination.next(J)}_error(J){try{this._tapError.call(this._context,J)}catch(ne){return void this.destination.error(ne)}this.destination.error(J)}_complete(){try{this._tapComplete.call(this._context)}catch(J){return void this.destination.error(J)}return this.destination.complete()}}},4087:(tt,be,V)=>{"use strict";V.d(be,{r:()=>L});var h=V(7574),X=V(5319);function L(ae,re){return new h.y(K=>{const me=new X.w;let J=0;return me.add(re.schedule(function(){J!==ae.length?(K.next(ae[J++]),K.closed||me.add(this.schedule())):K.complete()})),me})}},6465:(tt,be,V)=>{"use strict";V.d(be,{o:()=>L});var h=V(5319);class X extends h.w{constructor(re,K){super()}schedule(re,K=0){return this}}class L extends X{constructor(re,K){super(re,K),this.scheduler=re,this.work=K,this.pending=!1}schedule(re,K=0){if(this.closed)return this;this.state=re;const me=this.id,J=this.scheduler;return null!=me&&(this.id=this.recycleAsyncId(J,me,K)),this.pending=!0,this.delay=K,this.id=this.id||this.requestAsyncId(J,this.id,K),this}requestAsyncId(re,K,me=0){return setInterval(re.flush.bind(re,this),me)}recycleAsyncId(re,K,me=0){if(null!==me&&this.delay===me&&!1===this.pending)return K;clearInterval(K)}execute(re,K){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const me=this._execute(re,K);if(me)return me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(re,K){let J,me=!1;try{this.work(re)}catch(ne){me=!0,J=!!ne&&ne||new Error(ne)}if(me)return this.unsubscribe(),J}_unsubscribe(){const re=this.id,K=this.scheduler,me=K.actions,J=me.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==J&&me.splice(J,1),null!=re&&(this.id=this.recycleAsyncId(K,re,null)),this.delay=null}}},6102:(tt,be,V)=>{"use strict";V.d(be,{v:()=>X});let h=(()=>{class L{constructor(re,K=L.now){this.SchedulerAction=re,this.now=K}schedule(re,K=0,me){return new this.SchedulerAction(this,re).schedule(me,K)}}return L.now=()=>Date.now(),L})();class X extends h{constructor(ae,re=h.now){super(ae,()=>X.delegate&&X.delegate!==this?X.delegate.now():re()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ae,re=0,K){return X.delegate&&X.delegate!==this?X.delegate.schedule(ae,re,K):super.schedule(ae,re,K)}flush(ae){const{actions:re}=this;if(this.active)return void re.push(ae);let K;this.active=!0;do{if(K=ae.execute(ae.state,ae.delay))break}while(ae=re.shift());if(this.active=!1,K){for(;ae=re.shift();)ae.unsubscribe();throw K}}}},3637:(tt,be,V)=>{"use strict";V.d(be,{z:()=>L,P:()=>ae});var h=V(6465);const L=new(V(6102).v)(h.o),ae=L},7771:(tt,be,V)=>{"use strict";V.d(be,{c:()=>K,N:()=>re});var h=V(6465),L=V(6102);const re=new class extends L.v{}(class extends h.o{constructor(J,ne){super(J,ne),this.scheduler=J,this.work=ne}schedule(J,ne=0){return ne>0?super.schedule(J,ne):(this.delay=ne,this.state=J,this.scheduler.flush(this),this)}execute(J,ne){return ne>0||this.closed?super.execute(J,ne):this._execute(J,ne)}requestAsyncId(J,ne,U=0){return null!==U&&U>0||null===U&&this.delay>0?super.requestAsyncId(J,ne,U):J.flush(this)}}),K=re},377:(tt,be,V)=>{"use strict";V.d(be,{hZ:()=>X});const X="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(tt,be,V)=>{"use strict";V.d(be,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(tt,be,V)=>{"use strict";V.d(be,{b:()=>h});const h="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(tt,be,V)=>{"use strict";V.d(be,{N:()=>X});const X=(()=>{function L(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return L.prototype=Object.create(Error.prototype),L})()},4449:(tt,be,V)=>{"use strict";function h(X){setTimeout(()=>{throw X},0)}V.d(be,{z:()=>h})},4487:(tt,be,V)=>{"use strict";function h(X){return X}V.d(be,{y:()=>h})},9796:(tt,be,V)=>{"use strict";V.d(be,{k:()=>h});const h=Array.isArray||(X=>X&&"number"==typeof X.length)},9489:(tt,be,V)=>{"use strict";V.d(be,{z:()=>h});const h=X=>X&&"number"==typeof X.length&&"function"!=typeof X},9105:(tt,be,V)=>{"use strict";function h(X){return"function"==typeof X}V.d(be,{m:()=>h})},6561:(tt,be,V)=>{"use strict";V.d(be,{k:()=>X});var h=V(9796);function X(L){return!(0,h.k)(L)&&L-parseFloat(L)+1>=0}},1555:(tt,be,V)=>{"use strict";function h(X){return null!==X&&"object"==typeof X}V.d(be,{K:()=>h})},4072:(tt,be,V)=>{"use strict";function h(X){return!!X&&"function"!=typeof X.subscribe&&"function"==typeof X.then}V.d(be,{t:()=>h})},4869:(tt,be,V)=>{"use strict";function h(X){return X&&"function"==typeof X.schedule}V.d(be,{K:()=>h})},7444:(tt,be,V)=>{"use strict";V.d(be,{s:()=>G});var h=V(5015),X=V(4449),ae=V(377),K=V(6554),J=V(9489),ne=V(4072),U=V(1555);const G=B=>{if(B&&"function"==typeof B[K.L])return(B=>te=>{const ue=B[K.L]();if("function"!=typeof ue.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return ue.subscribe(te)})(B);if((0,J.z)(B))return(0,h.V)(B);if((0,ne.t)(B))return(B=>te=>(B.then(ue=>{te.closed||(te.next(ue),te.complete())},ue=>te.error(ue)).then(null,X.z),te))(B);if(B&&"function"==typeof B[ae.hZ])return(B=>te=>{const ue=B[ae.hZ]();for(;;){let fe;try{fe=ue.next()}catch(pe){return te.error(pe),te}if(fe.done){te.complete();break}if(te.next(fe.value),te.closed)break}return"function"==typeof ue.return&&te.add(()=>{ue.return&&ue.return()}),te})(B);{const ue=`You provided ${(0,U.K)(B)?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(ue)}}},5015:(tt,be,V)=>{"use strict";V.d(be,{V:()=>h});const h=X=>L=>{for(let ae=0,re=X.length;ae<re&&!L.closed;ae++)L.next(X[ae]);L.complete()}},1301:(tt,be,V)=>{"use strict";var h=V(7716);let X=null;function L(){return X}const me=new h.OlP("DocumentToken");let J=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,h.Yz7)({factory:ne,token:n,providedIn:"platform"}),n})();function ne(){return(0,h.LFG)(G)}const U=new h.OlP("Location Initialized");let G=(()=>{class n extends J{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){B()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){B()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(me))},n.\u0275prov=(0,h.Yz7)({factory:te,token:n,providedIn:"platform"}),n})();function B(){return!!window.history.pushState}function te(){return new G((0,h.LFG)(me))}function ue(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function fe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function pe(n){return n&&"?"!==n[0]?"?"+n:n}let Fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,h.Yz7)({factory:oe,token:n,providedIn:"root"}),n})();function oe(n){const e=(0,h.LFG)(me).location;return new Oe((0,h.LFG)(J),e&&e.origin||"")}const he=new h.OlP("appBaseHref");let Oe=(()=>{class n extends Fe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ue(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+pe(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const c=this.prepareExternalUrl(o+pe(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,o,u){const c=this.prepareExternalUrl(o+pe(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(J),h.LFG(he,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),$e=(()=>{class n extends Fe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=ue(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let c=this.prepareExternalUrl(o+pe(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,o,u){let c=this.prepareExternalUrl(o+pe(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(J),h.LFG(he,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),ht=(()=>{class n{constructor(t,r){this._subject=new h.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=fe(lt(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+pe(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,lt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+pe(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+pe(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Fe),h.LFG(J))},n.normalizeQueryParams=pe,n.joinWithSlash=ue,n.stripTrailingSlash=fe,n.\u0275prov=(0,h.Yz7)({factory:Qe,token:n,providedIn:"root"}),n})();function Qe(){return new ht((0,h.LFG)(Fe),(0,h.LFG)(J))}function lt(n){return n.replace(/\/index.html$/,"")}var Ee=(()=>((Ee=Ee||{})[Ee.Zero=0]="Zero",Ee[Ee.One=1]="One",Ee[Ee.Two=2]="Two",Ee[Ee.Few=3]="Few",Ee[Ee.Many=4]="Many",Ee[Ee.Other=5]="Other",Ee))(),Ue=(()=>((Ue=Ue||{})[Ue.Format=0]="Format",Ue[Ue.Standalone=1]="Standalone",Ue))(),Ie=(()=>((Ie=Ie||{})[Ie.Narrow=0]="Narrow",Ie[Ie.Abbreviated=1]="Abbreviated",Ie[Ie.Wide=2]="Wide",Ie[Ie.Short=3]="Short",Ie))(),Be=(()=>((Be=Be||{})[Be.Short=0]="Short",Be[Be.Medium=1]="Medium",Be[Be.Long=2]="Long",Be[Be.Full=3]="Full",Be))(),Te=(()=>((Te=Te||{})[Te.Decimal=0]="Decimal",Te[Te.Group=1]="Group",Te[Te.List=2]="List",Te[Te.PercentSign=3]="PercentSign",Te[Te.PlusSign=4]="PlusSign",Te[Te.MinusSign=5]="MinusSign",Te[Te.Exponential=6]="Exponential",Te[Te.SuperscriptingExponent=7]="SuperscriptingExponent",Te[Te.PerMille=8]="PerMille",Te[Te.Infinity=9]="Infinity",Te[Te.NaN=10]="NaN",Te[Te.TimeSeparator=11]="TimeSeparator",Te[Te.CurrencyDecimal=12]="CurrencyDecimal",Te[Te.CurrencyGroup=13]="CurrencyGroup",Te))();function Gn(n,e){return Jn((0,h.cg1)(n)[h.wAp.DateFormat],e)}function Tt(n,e){return Jn((0,h.cg1)(n)[h.wAp.TimeFormat],e)}function Ln(n,e){return Jn((0,h.cg1)(n)[h.wAp.DateTimeFormat],e)}function mn(n,e){const t=(0,h.cg1)(n),r=t[h.wAp.NumberSymbols][e];if(void 0===r){if(e===Te.CurrencyDecimal)return t[h.wAp.NumberSymbols][Te.Decimal];if(e===Te.CurrencyGroup)return t[h.wAp.NumberSymbols][Te.Group]}return r}const sr=h.kL8;function bi(n){if(!n[h.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[h.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Jn(n,e){for(let t=e;t>-1;t--)if(void 0!==n[t])return n[t];throw new Error("Locale data API: locale data undefined")}function qn(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const br=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Vn={},el=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var xn=(()=>((xn=xn||{})[xn.Short=0]="Short",xn[xn.ShortGMT=1]="ShortGMT",xn[xn.Long=2]="Long",xn[xn.Extended=3]="Extended",xn))(),He=(()=>((He=He||{})[He.FullYear=0]="FullYear",He[He.Month=1]="Month",He[He.Date=2]="Date",He[He.Hours=3]="Hours",He[He.Minutes=4]="Minutes",He[He.Seconds=5]="Seconds",He[He.FractionalSeconds=6]="FractionalSeconds",He[He.Day=7]="Day",He))(),gt=(()=>((gt=gt||{})[gt.DayPeriods=0]="DayPeriods",gt[gt.Days=1]="Days",gt[gt.Months=2]="Months",gt[gt.Eras=3]="Eras",gt))();function Rs(n,e,t,r){let o=function(n){if(Un(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[o,u=1,c=1]=n.split("-").map(g=>+g);return Ns(o,u-1,c)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(br))return function(n){const e=new Date(0);let t=0,r=0;const o=n[8]?e.setUTCFullYear:e.setFullYear,u=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),o.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const c=Number(n[4]||0)-t,g=Number(n[5]||0)-r,y=Number(n[6]||0),C=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return u.call(e,c,g,y,C),e}(r)}const e=new Date(n);if(!Un(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=pi(t,e)||e;let g,c=[];for(;e;){if(g=el.exec(e),!g){c.push(e);break}{c=c.concat(g.slice(1));const S=c.pop();if(!S)break;e=S}}let y=o.getTimezoneOffset();r&&(y=se(r,y),o=function(n,e,t){const o=n.getTimezoneOffset();return function(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,-1*(se(e,o)-o))}(o,r));let C="";return c.forEach(S=>{const x=function(n){if(Q[n])return Q[n];let e;switch(n){case"G":case"GG":case"GGG":e=Dt(gt.Eras,Ie.Abbreviated);break;case"GGGG":e=Dt(gt.Eras,Ie.Wide);break;case"GGGGG":e=Dt(gt.Eras,Ie.Narrow);break;case"y":e=ln(He.FullYear,1,0,!1,!0);break;case"yy":e=ln(He.FullYear,2,0,!0,!0);break;case"yyy":e=ln(He.FullYear,3,0,!1,!0);break;case"yyyy":e=ln(He.FullYear,4,0,!1,!0);break;case"Y":e=H(1);break;case"YY":e=H(2,!0);break;case"YYY":e=H(3);break;case"YYYY":e=H(4);break;case"M":case"L":e=ln(He.Month,1,1);break;case"MM":case"LL":e=ln(He.Month,2,1);break;case"MMM":e=Dt(gt.Months,Ie.Abbreviated);break;case"MMMM":e=Dt(gt.Months,Ie.Wide);break;case"MMMMM":e=Dt(gt.Months,Ie.Narrow);break;case"LLL":e=Dt(gt.Months,Ie.Abbreviated,Ue.Standalone);break;case"LLLL":e=Dt(gt.Months,Ie.Wide,Ue.Standalone);break;case"LLLLL":e=Dt(gt.Months,Ie.Narrow,Ue.Standalone);break;case"w":e=z(1);break;case"ww":e=z(2);break;case"W":e=z(1,!0);break;case"d":e=ln(He.Date,1);break;case"dd":e=ln(He.Date,2);break;case"c":case"cc":e=ln(He.Day,1);break;case"ccc":e=Dt(gt.Days,Ie.Abbreviated,Ue.Standalone);break;case"cccc":e=Dt(gt.Days,Ie.Wide,Ue.Standalone);break;case"ccccc":e=Dt(gt.Days,Ie.Narrow,Ue.Standalone);break;case"cccccc":e=Dt(gt.Days,Ie.Short,Ue.Standalone);break;case"E":case"EE":case"EEE":e=Dt(gt.Days,Ie.Abbreviated);break;case"EEEE":e=Dt(gt.Days,Ie.Wide);break;case"EEEEE":e=Dt(gt.Days,Ie.Narrow);break;case"EEEEEE":e=Dt(gt.Days,Ie.Short);break;case"a":case"aa":case"aaa":e=Dt(gt.DayPeriods,Ie.Abbreviated);break;case"aaaa":e=Dt(gt.DayPeriods,Ie.Wide);break;case"aaaaa":e=Dt(gt.DayPeriods,Ie.Narrow);break;case"b":case"bb":case"bbb":e=Dt(gt.DayPeriods,Ie.Abbreviated,Ue.Standalone,!0);break;case"bbbb":e=Dt(gt.DayPeriods,Ie.Wide,Ue.Standalone,!0);break;case"bbbbb":e=Dt(gt.DayPeriods,Ie.Narrow,Ue.Standalone,!0);break;case"B":case"BB":case"BBB":e=Dt(gt.DayPeriods,Ie.Abbreviated,Ue.Format,!0);break;case"BBBB":e=Dt(gt.DayPeriods,Ie.Wide,Ue.Format,!0);break;case"BBBBB":e=Dt(gt.DayPeriods,Ie.Narrow,Ue.Format,!0);break;case"h":e=ln(He.Hours,1,-12);break;case"hh":e=ln(He.Hours,2,-12);break;case"H":e=ln(He.Hours,1);break;case"HH":e=ln(He.Hours,2);break;case"m":e=ln(He.Minutes,1);break;case"mm":e=ln(He.Minutes,2);break;case"s":e=ln(He.Seconds,1);break;case"ss":e=ln(He.Seconds,2);break;case"S":e=ln(He.FractionalSeconds,1);break;case"SS":e=ln(He.FractionalSeconds,2);break;case"SSS":e=ln(He.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Ae(xn.Short);break;case"ZZZZZ":e=Ae(xn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Ae(xn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Ae(xn.Long);break;default:return null}return Q[n]=e,e}(S);C+=x?x(o,t,y):"''"===S?"'":S.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),C}function Ns(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function pi(n,e){const t=function(n){return(0,h.cg1)(n)[h.wAp.LocaleId]}(n);if(Vn[t]=Vn[t]||{},Vn[t][e])return Vn[t][e];let r="";switch(e){case"shortDate":r=Gn(n,Be.Short);break;case"mediumDate":r=Gn(n,Be.Medium);break;case"longDate":r=Gn(n,Be.Long);break;case"fullDate":r=Gn(n,Be.Full);break;case"shortTime":r=Tt(n,Be.Short);break;case"mediumTime":r=Tt(n,Be.Medium);break;case"longTime":r=Tt(n,Be.Long);break;case"fullTime":r=Tt(n,Be.Full);break;case"short":const o=pi(n,"shortTime"),u=pi(n,"shortDate");r=wt(Ln(n,Be.Short),[o,u]);break;case"medium":const c=pi(n,"mediumTime"),g=pi(n,"mediumDate");r=wt(Ln(n,Be.Medium),[c,g]);break;case"long":const y=pi(n,"longTime"),C=pi(n,"longDate");r=wt(Ln(n,Be.Long),[y,C]);break;case"full":const S=pi(n,"fullTime"),x=pi(n,"fullDate");r=wt(Ln(n,Be.Full),[S,x])}return r&&(Vn[t][e]=r),r}function wt(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function on(n,e,t="-",r,o){let u="";(n<0||o&&n<=0)&&(o?n=1-n:(n=-n,u=t));let c=String(n);for(;c.length<e;)c="0"+c;return r&&(c=c.substr(c.length-e)),u+c}function ln(n,e,t=0,r=!1,o=!1){return function(u,c){let g=function(n,e){switch(n){case He.FullYear:return e.getFullYear();case He.Month:return e.getMonth();case He.Date:return e.getDate();case He.Hours:return e.getHours();case He.Minutes:return e.getMinutes();case He.Seconds:return e.getSeconds();case He.FractionalSeconds:return e.getMilliseconds();case He.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,u);if((t>0||g>-t)&&(g+=t),n===He.Hours)0===g&&-12===t&&(g=12);else if(n===He.FractionalSeconds)return function(n,e){return on(n,3).substr(0,e)}(g,e);const y=mn(c,Te.MinusSign);return on(g,e,y,r,o)}}function Dt(n,e,t=Ue.Format,r=!1){return function(o,u){return function(n,e,t,r,o,u){switch(t){case gt.Months:return function(n,e,t){const r=(0,h.cg1)(n),u=Jn([r[h.wAp.MonthsFormat],r[h.wAp.MonthsStandalone]],e);return Jn(u,t)}(e,o,r)[n.getMonth()];case gt.Days:return function(n,e,t){const r=(0,h.cg1)(n),u=Jn([r[h.wAp.DaysFormat],r[h.wAp.DaysStandalone]],e);return Jn(u,t)}(e,o,r)[n.getDay()];case gt.DayPeriods:const c=n.getHours(),g=n.getMinutes();if(u){const C=function(n){const e=(0,h.cg1)(n);return bi(e),(e[h.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?qn(r):[qn(r[0]),qn(r[1])])}(e),S=function(n,e,t){const r=(0,h.cg1)(n);bi(r);const u=Jn([r[h.wAp.ExtraData][0],r[h.wAp.ExtraData][1]],e)||[];return Jn(u,t)||[]}(e,o,r),x=C.findIndex(O=>{if(Array.isArray(O)){const[$,Z]=O,ye=c>=$.hours&&g>=$.minutes,xe=c<Z.hours||c===Z.hours&&g<Z.minutes;if($.hours<Z.hours){if(ye&&xe)return!0}else if(ye||xe)return!0}else if(O.hours===c&&O.minutes===g)return!0;return!1});if(-1!==x)return S[x]}return function(n,e,t){const r=(0,h.cg1)(n),u=Jn([r[h.wAp.DayPeriodsFormat],r[h.wAp.DayPeriodsStandalone]],e);return Jn(u,t)}(e,o,r)[c<12?0:1];case gt.Eras:return function(n,e){return Jn((0,h.cg1)(n)[h.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(o,u,n,e,t,r)}}function Ae(n){return function(e,t,r){const o=-1*r,u=mn(t,Te.MinusSign),c=o>0?Math.floor(o/60):Math.ceil(o/60);switch(n){case xn.Short:return(o>=0?"+":"")+on(c,2,u)+on(Math.abs(o%60),2,u);case xn.ShortGMT:return"GMT"+(o>=0?"+":"")+on(c,1,u);case xn.Long:return"GMT"+(o>=0?"+":"")+on(c,2,u)+":"+on(Math.abs(o%60),2,u);case xn.Extended:return 0===r?"Z":(o>=0?"+":"")+on(c,2,u)+":"+on(Math.abs(o%60),2,u);default:throw new Error(`Unknown zone width "${n}"`)}}}function Qt(n){return Ns(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function z(n,e=!1){return function(t,r){let o;if(e){const u=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,c=t.getDate();o=1+Math.floor((c+u)/7)}else{const u=Qt(t),c=function(n){const e=Ns(n,0,1).getDay();return Ns(n,0,1+(e<=4?4:11)-e)}(u.getFullYear()),g=u.getTime()-c.getTime();o=1+Math.round(g/6048e5)}return on(o,n,mn(r,Te.MinusSign))}}function H(n,e=!1){return function(t,r){return on(Qt(t).getFullYear(),n,mn(r,Te.MinusSign),e)}}const Q={};function se(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Un(n){return n instanceof Date&&!isNaN(n.valueOf())}class Ti{}let oo=(()=>{class n extends Ti{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(sr(r||this.locale)(t)){case Ee.Zero:return"zero";case Ee.One:return"one";case Ee.Two:return"two";case Ee.Few:return"few";case Ee.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.soG))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Ms=(()=>{class n{constructor(t,r,o,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=o,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,h.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,h.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.ZZ4),h.Y36(h.aQg),h.Y36(h.SBq),h.Y36(h.Qsj))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class Xr{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let cn=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=[];t.forEachOperation((o,u,c)=>{if(null==o.previousIndex){const g=this._viewContainer.createEmbeddedView(this._template,new Xr(null,this._ngForOf,-1,-1),null===c?void 0:c),y=new Sc(o,g);r.push(y)}else if(null==c)this._viewContainer.remove(null===u?void 0:u);else if(null!==u){const g=this._viewContainer.get(u);this._viewContainer.move(g,c);const y=new Sc(o,g);r.push(y)}});for(let o=0;o<r.length;o++)this._perViewChange(r[o].view,r[o].record);for(let o=0,u=this._viewContainer.length;o<u;o++){const c=this._viewContainer.get(o);c.context.index=o,c.context.count=u,c.context.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{this._viewContainer.get(o.currentIndex).context.$implicit=o.item})}_perViewChange(t,r){t.context.$implicit=r.item}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class Sc{constructor(e,t){this.record=e,this.view=t}}let hs=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Ac,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ao("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ao("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Ac{constructor(){this.$implicit=null,this.ngIf=null}}function ao(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}let xc=(()=>{class n{constructor(t){this.locale=t}transform(t,r="mediumDate",o,u){if(null==t||""===t||t!=t)return null;try{return Rs(t,r,u||this.locale,o)}catch(c){throw function(n,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${(0,h.AaK)(n)}'`)}(n,c.message)}}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.soG,16))},n.\u0275pipe=h.Yjl({name:"date",type:n,pure:!0}),n})(),zo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[{provide:Ti,useClass:oo}]}),n})();function sl(n){return"server"===n}let pu=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new yh((0,h.LFG)(me),window)}),n})();class yh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ol(this.window.history)||ol(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function ol(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class lo extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new lo,X||(X=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(Zo=Zo||document.querySelector("base"),Zo?Zo.getAttribute("href"):null);return null==t?null:function(n){an=an||document.createElement("a"),an.setAttribute("href",n);const e=an.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Zo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let an,Zo=null;const ho=new h.OlP("TRANSITION_ID"),pn=[{provide:h.ip1,useFactory:function(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=L(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[ho,me,h.zs3],multi:!0}];class al{static init(){(0,h.VLi)(new al)}addToWindow(e){h.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const o=h.dqk.getAllAngularTestabilities();let u=o.length,c=!1;const g=function(y){c=c||y,u--,0==u&&r(c)};o.forEach(function(y){y.whenStable(g)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let _u=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const fo=new h.OlP("EventManagerPlugins");let De=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const c=o[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fo),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Ht{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=L().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Yo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Rn=(()=>{class n extends Yo{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,o.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ra),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ra))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(me))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Ra(n){L().remove(n)}const po={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ei=/%COMP%/g;function ar(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?ar(n,o,t):(o=o.replace(ei,n),t.push(o))}return t}function Gr(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ai=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new ti(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Bc(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case h.ifc.ShadowDom:return new Cu(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=ar(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(De),h.LFG(Rn),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class ti{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(po[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=po[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=po[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,o&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Gr(r)):this.eventManager.addEventListener(e,t,Gr(r))}}class Bc extends ti{constructor(e,t,r,o){super(e),this.component=r;const u=ar(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr="_ngcontent-%COMP%".replace(ei,o+"-"+r.id),this.hostAttr="_nghost-%COMP%".replace(ei,o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Cu extends ti{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=ar(o.id,o.styles,[]);for(let c=0;c<u.length;c++){const g=document.createElement("style");g.textContent=u[c],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let bu=(()=>{class n extends Ht{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(me))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Du=["alt","control","meta","shift"],Dp={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Oa={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ap=(()=>{class n extends Ht{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let c="";if(Du.forEach(y=>{const C=r.indexOf(y);C>-1&&(r.splice(C,1),c+=y+".")}),c+=u,0!=r.length||0===u.length)return null;const g={};return g.domEventName=o,g.fullKey=c,g}static getEventFullKey(t){let r="",o=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&qr.hasOwnProperty(e)&&(e=qr[e]))}return Dp[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Du.forEach(u=>{u!=o&&Oa[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(me))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const ms=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function(){lo.makeCurrent(),al.init()},multi:!0},{provide:me,useFactory:function(){return(0,h.RDi)(document),document},deps:[]}]),ml=[[],{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function(){return new h.qLn},deps:[]},{provide:fo,useClass:bu,multi:!0,deps:[me,h.R0b,h.Lbi]},{provide:fo,useClass:Ap,multi:!0,deps:[me]},[],{provide:Ai,useClass:Ai,deps:[De,Rn,h.AFp]},{provide:h.FYo,useExisting:Ai},{provide:Yo,useExisting:Rn},{provide:Rn,useClass:Rn,deps:[me]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b]},{provide:De,useClass:De,deps:[fo,h.R0b]},{provide:class{},useClass:_u,deps:[]},[]];let Rp=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:ho,useExisting:h.AFp},pn]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(n,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:ml,imports:[zo,h.hGG]}),n})();"undefined"!=typeof window&&window;var Gt=V(4402),at=V(5917),Ri=V(9765),xu=V(7971);class yi extends Ri.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new xu.N;return this._value}next(e){super.next(this._value=e)}}var zc=V(4869),Ji=V(9796),Wr=V(7393);class yo extends Wr.L{notifyNext(e,t,r,o,u){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class kp extends Wr.L{constructor(e,t,r){super(),this.parent=e,this.outerValue=t,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var _l=V(7444),jn=V(7574);function yl(n,e,t,r,o=new kp(n,t,r)){if(!o.closed)return e instanceof jn.y?e.subscribe(o):(0,_l.s)(e)(o)}var Xn=V(6693);const Ru={};class vl{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new Nu(e,this.resultSelector))}}class Nu extends yo{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(Ru),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let r=0;r<t;r++)this.add(yl(this,e[r],void 0,r))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,r){const o=this.values,c=this.toRespond?o[r]===Ru?--this.toRespond:this.toRespond:0;o[r]=t,0===c&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}const Vs=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var Ni=V(3282);function vs(...n){return(0,Ni.J)(1)((0,at.of)(...n))}var Xi=V(9193);function ni(n){return new jn.y(e=>{let t;try{t=n()}catch(o){return void e.error(o)}return(t?(0,Gt.D)(t):(0,Xi.c)()).subscribe(e)})}var Sh=V(2441),St=V(8002),ta=V(5345);function pr(n,e){return"function"==typeof e?t=>t.pipe(pr((r,o)=>(0,Gt.D)(n(r,o)).pipe((0,St.U)((u,c)=>e(r,u,o,c))))):t=>t.lift(new Zc(n))}class Zc{constructor(e){this.project=e}call(e,t){return t.subscribe(new kn(e,this.project))}}class kn extends ta.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(o){return void this.destination.error(o)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const r=new ta.IY(this),o=this.destination;o.add(r),this.innerSubscription=(0,ta.ft)(e,r),this.innerSubscription!==r&&o.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const El=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function Ah(n){return e=>0===n?(0,Xi.c)():e.lift(new h_(n))}class h_{constructor(e){if(this.total=e,this.total<0)throw new El}call(e,t){return t.subscribe(new mw(e,this.total))}}class mw extends Wr.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))}}function Us(...n){const e=n[n.length-1];return(0,zc.K)(e)?(n.pop(),t=>vs(n,t,e)):t=>vs(n,t)}function Va(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(o){return o.lift(new f_(n,e,t))}}class f_{constructor(e,t,r=!1){this.accumulator=e,this.seed=t,this.hasSeed=r}call(e,t){return t.subscribe(new xh(e,this.accumulator,this.seed,this.hasSeed))}}class xh extends Wr.L{constructor(e,t,r,o){super(e),this.accumulator=t,this._seed=r,this.hasSeed=o,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let r;try{r=this.accumulator(this.seed,e,t)}catch(o){this.destination.error(o)}this.seed=r,this.destination.next(r)}}function Mi(n,e){return function(r){return r.lift(new Rh(n,e))}}class Rh{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new wo(e,this.predicate,this.thisArg))}}class wo extends Wr.L{constructor(e,t,r){super(e),this.predicate=t,this.thisArg=r,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}function Bs(n){return function(t){const r=new Wn(n),o=t.lift(r);return r.caught=o}}class Wn{constructor(e){this.selector=e}call(e,t){return t.subscribe(new Ua(e,this.selector,this.caught))}}class Ua extends ta.Ds{constructor(e,t,r){super(e),this.selector=t,this.caught=r}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(u){return void super.error(u)}this._unsubscribeAndRecycle();const r=new ta.IY(this);this.add(r);const o=(0,ta.ft)(t,r);o!==r&&this.add(o)}}}var er=V(9773);function Yc(n,e){return(0,er.zg)(n,e,1)}function Nh(n){return function(t){return 0===n?(0,Xi.c)():t.lift(new Pi(n))}}class Pi{constructor(e){if(this.total=e,this.total<0)throw new El}call(e,t){return t.subscribe(new Oi(e,this.total))}}class Oi extends Wr.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,r=this.total,o=this.count++;t.length<r?t.push(e):t[o%r]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const r=this.count>=this.total?this.total:this.count,o=this.ring;for(let u=0;u<r;u++){const c=t++%r;e.next(o[c])}}e.complete()}}function ws(n=Mh){return e=>e.lift(new Eo(n))}class Eo{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new Co(e,this.errorFactory))}}class Co extends Wr.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function Mh(){return new Vs}function bo(n=null){return e=>e.lift(new Ph(n))}class Ph{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new Ba(e,this.defaultValue))}}class Ba extends Wr.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Fp=V(4487);function $n(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Mi((o,u)=>n(o,u,r)):Fp.y,Ah(1),t?bo(e):ws(()=>new Vs))}var zr=V(3342),Io=V(1307),p_=V(5319);class A{constructor(e){this.callback=e}call(e,t){return t.subscribe(new M(e,this.callback))}}class M extends Wr.L{constructor(e,t){super(e),this.add(new p_.w(t))}}class j{constructor(e,t){this.id=e,this.url=t}}class ee extends j{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ce extends j{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ne extends j{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ze extends j{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ft extends j{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bt extends j{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zt extends j{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class At extends j{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tr extends j{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tr{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ja{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Qc{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class na{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class To{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Do{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class js{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ot="primary";class Vp{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Dn(n){return new Vp(n)}const Up="ngNavigationCancelingError";function Jc(n){const e=Error("NavigationCancelingError: "+n);return e[Up]=!0,e}function Xc(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const c=r[u],g=n[u];if(c.startsWith(":"))o[c.substring(1)]=g;else if(c!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function es(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!ed(n[o],e[o]))return!1;return!0}function ed(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function _w(n){return Array.prototype.concat.apply([],n)}function $a(n){return n.length>0?n[n.length-1]:null}function gr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Zr(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,Gt.D)(Promise.resolve(n)):(0,at.of)(n)}const g_={exact:function __(n,e,t){if(!qa(n.segments,e.segments)||!Fu(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!__(n.children[r],e.children[r],t))return!1;return!0},subset:ku},Oh={exact:function(n,e){return es(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ed(n[t],e[t]))},ignored:()=>!0};function Ou(n,e,t){return g_[t.paths](n.root,e.root,t.matrixParams)&&Oh[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function ku(n,e,t){return Ha(n,e,e.segments,t)}function Ha(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!qa(o,t)||e.hasChildren()||!Fu(o,t,r))}if(n.segments.length===t.length){if(!qa(n.segments,t)||!Fu(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!ku(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(qa(n.segments,o)&&Fu(n.segments,o,r)&&n.children[Ot])&&Ha(n.children[Ot],e,u,r)}}function Fu(n,e,t){return e.every((r,o)=>Oh[t](n[o].parameters,r.parameters))}class Ga{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Dn(this.queryParams)),this._queryParamMap}toString(){return Fh.serialize(this)}}class Zt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,gr(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $s(this)}}class Lu{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Dn(this.parameters)),this._parameterMap}toString(){return Gp(this)}}function qa(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class kh{}class td{parse(e){const t=new w_(e);return new Ga(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var n;return`${`/${nd(e.root,!0)}`}${function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Hp(t)}=${Hp(o)}`).join("&"):`${Hp(t)}=${Hp(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const Fh=new td;function $s(n){return n.segments.map(e=>Gp(e)).join("/")}function nd(n,e){if(!n.hasChildren())return $s(n);if(e){const t=n.children[Ot]?nd(n.children[Ot],!1):"",r=[];return gr(n.children,(o,u)=>{u!==Ot&&r.push(`${u}:${nd(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return gr(n.children,(r,o)=>{o===Ot&&(t=t.concat(e(r,o)))}),gr(n.children,(r,o)=>{o!==Ot&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Ot?[nd(n.children[Ot],!1)]:[`${o}:${nd(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ot]?`${$s(n)}/${t[0]}`:`${$s(n)}/(${t.join("//")})`}}function v_(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hp(n){return v_(n).replace(/%3B/gi,";")}function rd(n){return v_(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function id(n){return decodeURIComponent(n)}function Lh(n){return id(n.replace(/\+/g,"%20"))}function Gp(n){return`${rd(n.path)}${function(n){return Object.keys(n).map(e=>`;${rd(e)}=${rd(n[e])}`).join("")}(n.parameters)}`}const vw=/^[^\/()?;=#]+/;function Vh(n){const e=n.match(vw);return e?e[0]:""}const ww=/^[^=?&#]+/,ia=/^[^?&#]+/;class w_{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Zt([],{}):new Zt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ot]=new Zt(e,t)),r}parseSegment(){const e=Vh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Lu(id(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Vh(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Vh(this.remaining);o&&(r=o,this.capture(r))}e[id(t)]=id(r)}parseQueryParam(e){const t=function(n){const e=n.match(ww);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function(n){const e=n.match(ia);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const o=Lh(t),u=Lh(r);if(e.hasOwnProperty(o)){let c=e[o];Array.isArray(c)||(c=[c],e[o]=c),c.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Vh(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Ot);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[Ot]:new Zt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Uh{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=qp(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=qp(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Wp(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Wp(e,this._root).map(t=>t.value)}}function qp(n,e){if(n===e.value)return e;for(const t of e.children){const r=qp(n,t);if(r)return r}return null}function Wp(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Wp(n,t);if(r.length)return r.unshift(e),r}return[]}class sa{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function sd(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class zp extends Uh{constructor(e,t){super(e),this.snapshot=t,Sl(this,e)}toString(){return this.snapshot.toString()}}function Zp(n,e){const t=function(n,e){const c=new Tl([],{},{},"",{},Ot,e,null,n.root,-1,{});return new Dl("",new sa(c,[]))}(n,e),r=new yi([new Lu("",{})]),o=new yi({}),u=new yi({}),c=new yi({}),g=new yi(""),y=new Il(r,o,c,g,u,Ot,e,t.root);return y.snapshot=t.root,new zp(new sa(y,[]),t)}class Il{constructor(e,t,r,o,u,c,g,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=c,this.component=g,this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,St.U)(e=>Dn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,St.U)(e=>Dn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function E_(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Tl{constructor(e,t,r,o,u,c,g,y,C,S,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=c,this.component=g,this.routeConfig=y,this._urlSegment=C,this._lastPathIndex=S,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Dn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Dn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Dl extends Uh{constructor(e,t){super(t),this.url=e,Sl(this,t)}toString(){return Hs(this._root)}}function Sl(n,e){e.value._routerState=n,e.children.forEach(t=>Sl(n,t))}function Hs(n){const e=n.children.length>0?` { ${n.children.map(Hs).join(", ")} } `:"";return`${n.value}${e}`}function Wa(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,es(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),es(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!es(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),es(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Bh(n,e){return es(n.params,e.params)&&function(n,e){return qa(n,e)&&n.every((t,r)=>es(t.parameters,e[r].parameters))}(n.url,e.url)&&!(!n.parent!=!e.parent)&&(!n.parent||Bh(n.parent,e.parent))}function od(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return od(n,r,o);return od(n,r)})}(n,e,t);return new sa(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return C_(e,c),c}}const r=function(n){return new Il(new yi(n.url),new yi(n.params),new yi(n.queryParams),new yi(n.fragment),new yi(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>od(n,u));return new sa(r,o)}}function C_(n,e){if(n.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=n.value;for(let t=0;t<n.children.length;++t)C_(n.children[t],e.children[t])}function Al(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function xl(n){return"object"==typeof n&&null!=n&&n.outlets}function za(n,e,t,r,o){let u={};return r&&gr(r,(c,g)=>{u[g]=Array.isArray(c)?c.map(y=>`${y}`):`${c}`}),new Ga(t.root===n?e:Iw(t.root,n,e),u,o)}function Iw(n,e,t){const r={};return gr(n.children,(o,u)=>{r[u]=o===e?t:Iw(o,e,t)}),new Zt(n.segments,r)}class Yp{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Al(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(xl);if(o&&o!==$a(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Jp{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Vu(n,e,t){if(n||(n=new Zt([],{})),0===n.segments.length&&n.hasChildren())return ad(n,e,t);const r=function(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const c=n.segments[o],g=t[r];if(xl(g))break;const y=`${g}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===y)break;if(y&&C&&"object"==typeof C&&void 0===C.outlets){if(!T_(y,C,c))return u;r+=2}else{if(!T_(y,{},c))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Zt(n.segments.slice(0,r.pathIndex),{});return u.children[Ot]=new Zt(n.segments.slice(r.pathIndex),n.children),ad(u,0,o)}return r.match&&0===o.length?new Zt(n.segments,{}):r.match&&!n.hasChildren()?ud(n,e,t):r.match?ad(n,0,o):ud(n,e,t)}function ad(n,e,t){if(0===t.length)return new Zt(n.segments,{});{const r=function(n){return xl(n[0])?n[0].outlets:{[Ot]:n}}(t),o={};return gr(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[c]=Vu(n.children[c],e,u))}),gr(n.children,(u,c)=>{void 0===r[c]&&(o[c]=u)}),new Zt(n.segments,o)}}function ud(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(xl(u)){const y=nr(u.outlets);return new Zt(r,y)}if(0===o&&Al(t[0])){r.push(new Lu(n.segments[e].path,I_(t[0]))),o++;continue}const c=xl(u)?u.outlets[Ot]:`${u}`,g=o<t.length-1?t[o+1]:null;c&&g&&Al(g)?(r.push(new Lu(c,I_(g))),o+=2):(r.push(new Lu(c,{})),o++)}return new Zt(r,{})}function nr(n){const e={};return gr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=ud(new Zt([],{}),0,t))}),e}function I_(n){const e={};return gr(n,(t,r)=>e[r]=`${t}`),e}function T_(n,e,t){return n==t.path&&es(e,t.parameters)}class D_{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Wa(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=sd(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,o[c],r),delete o[c]}),gr(o,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const c=r.getContext(o.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet);if(r&&r.outlet){const o=r.outlet.detach(),u=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:u})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=sd(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=sd(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new Do(u.value.snapshot))}),e.children.length&&this.forwardEvent(new na(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(Wa(o),o===u)if(o.component){const c=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const c=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const g=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),c.children.onOutletReAttached(g.contexts),c.attachRef=g.componentRef,c.route=g.route.value,c.outlet&&c.outlet.attach(g.componentRef,g.route.value),ng(g.route)}else{const g=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),y=g?g.module.componentFactoryResolver:null;c.attachRef=null,c.route=o,c.resolver=y,c.outlet&&c.outlet.activateWith(o,y),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}function ng(n){Wa(n.value),n.children.forEach(ng)}class ig{constructor(e,t){this.routes=e,this.module=t}}function Za(n){return"function"==typeof n}function Ka(n){return n instanceof Ga}const Rl=Symbol("INITIAL_VALUE");function Nl(){return pr(n=>function(...n){let e,t;return(0,zc.K)(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&(0,Ji.k)(n[0])&&(n=n[0]),(0,Xn.n)(n,t).lift(new vl(e))}(n.map(e=>e.pipe(Ah(1),Us(Rl)))).pipe(Va((e,t)=>{let r=!1;return t.reduce((o,u,c)=>o!==Rl?o:(u===Rl&&(r=!0),r||!1!==u&&c!==t.length-1&&!Ka(u)?o:u),e)},Rl),Mi(e=>e!==Rl),(0,St.U)(e=>Ka(e)?e:!0===e),Ah(1)))}let kr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},directives:function(){return[_g]},encapsulation:2}),n})();function Ml(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];ag(r,Dw(e,r))}}function ag(n,e){n.children&&Ml(n.children,e)}function Dw(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function ug(n){const e=n.children&&n.children.map(ug),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ot&&(t.component=kr),t}function ri(n){return n.outlet||Ot}function S_(n,e){const t=n.filter(r=>ri(r)===e);return t.push(...n.filter(r=>ri(r)!==e)),t}const $h={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Hh(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},$h):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const u=(e.matcher||Xc)(t,n,e);if(!u)return Object.assign({},$h);const c={};gr(u.posParams,(y,C)=>{c[C]=y.path});const g=u.consumed.length>0?Object.assign(Object.assign({},c),u.consumed[u.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:u.consumed,lastChild:u.consumed.length,parameters:g,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function cd(n,e,t,r,o="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>Ya(n,e,r)&&ri(r)!==Ot)}(n,t,r)){const c=new Zt(e,function(n,e,t,r){const o={};o[Ot]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&ri(u)!==Ot){const c=new Zt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,o[ri(u)]=c}return o}(n,e,r,new Zt(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>Ya(n,e,r))}(n,t,r)){const c=new Zt(n.segments,function(n,e,t,r,o,u){const c={};for(const g of r)if(Ya(n,t,g)&&!o[ri(g)]){const y=new Zt([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[ri(g)]=y}return Object.assign(Object.assign({},o),c)}(n,e,t,r,n.children,o));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new Zt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Ya(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function qh(n,e,t,r){return!!(ri(n)===r||r!==Ot&&Ya(e,t,n))&&("**"===n.path||Hh(e,n,t).matched)}function x_(n,e,t){return 0===e.length&&!n.children[t]}class Pl{constructor(e){this.segmentGroup=e||null}}class lg{constructor(e){this.urlTree=e}}function Dr(n){return new jn.y(e=>e.error(new Pl(n)))}function Ol(n){return new jn.y(e=>e.error(new lg(n)))}function R_(n){return new jn.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class dg{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(h.h0i)}apply(){const e=cd(this.urlTree.root,[],[],this.config).segmentGroup,t=new Zt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Ot).pipe((0,St.U)(u=>this.createUrlTree(Wh(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Bs(u=>{if(u instanceof lg)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Pl?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Ot).pipe((0,St.U)(o=>this.createUrlTree(Wh(o),e.queryParams,e.fragment))).pipe(Bs(o=>{throw o instanceof Pl?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new Zt([],{[Ot]:e}):e;return new Ga(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,St.U)(u=>new Zt([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,Gt.D)(o).pipe(Yc(u=>{const c=r.children[u],g=S_(t,u);return this.expandSegmentGroup(e,g,c,u).pipe((0,St.U)(y=>({segment:y,outlet:u})))}),Va((u,c)=>(u[c.outlet]=c.segment,u),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Mi((o,u)=>n(o,u,r)):Fp.y,Nh(1),t?bo(e):ws(()=>new Vs))}())}expandSegment(e,t,r,o,u,c){return(0,Gt.D)(r).pipe(Yc(g=>this.expandSegmentAgainstRoute(e,t,r,g,o,u,c).pipe(Bs(C=>{if(C instanceof Pl)return(0,at.of)(null);throw C}))),$n(g=>!!g),Bs((g,y)=>{if(g instanceof Vs||"EmptyError"===g.name){if(x_(t,o,u))return(0,at.of)(new Zt([],{}));throw new Pl(t)}throw g}))}expandSegmentAgainstRoute(e,t,r,o,u,c,g){return qh(o,t,u,c)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,c):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c):Dr(t):Dr(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Ol(u):this.lineralizeSegments(r,u).pipe((0,er.zg)(c=>{const g=new Zt(c,{});return this.expandSegment(e,g,t,c,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c){const{matched:g,consumedSegments:y,lastChild:C,positionalParamSegments:S}=Hh(t,o,u);if(!g)return Dr(t);const x=this.applyRedirectCommands(y,o.redirectTo,S);return o.redirectTo.startsWith("/")?Ol(x):this.lineralizeSegments(o,x).pipe((0,er.zg)(O=>this.expandSegment(e,t,r,O.concat(u.slice(C)),c,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?(0,at.of)(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,St.U)(O=>(r._loadedConfig=O,new Zt(o,{})))):(0,at.of)(new Zt(o,{}));const{matched:c,consumedSegments:g,lastChild:y}=Hh(t,r,o);if(!c)return Dr(t);const C=o.slice(y);return this.getChildConfig(e,r,o).pipe((0,er.zg)(x=>{const O=x.module,$=x.routes,{segmentGroup:Z,slicedSegments:ye}=cd(t,g,C,$),xe=new Zt(Z.segments,Z.children);if(0===ye.length&&xe.hasChildren())return this.expandChildren(O,$,xe).pipe((0,St.U)(rt=>new Zt(g,rt)));if(0===$.length&&0===ye.length)return(0,at.of)(new Zt(g,{}));const pt=ri(r)===u;return this.expandSegment(O,xe,$,ye,pt?Ot:u,!0).pipe((0,St.U)(et=>new Zt(g.concat(et.segments),et.children)))}))}getChildConfig(e,t,r){return t.children?(0,at.of)(new ig(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,at.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,er.zg)(o=>{return o?this.configLoader.load(e.injector,t).pipe((0,St.U)(u=>(t._loadedConfig=u,u))):(n=t,new jn.y(e=>e.error(Jc(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):(0,at.of)(new ig([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;if(!o||0===o.length)return(0,at.of)(!0);const u=o.map(c=>{const g=e.get(c);let y;if((n=g)&&Za(n.canLoad))y=g.canLoad(t,r);else{if(!Za(g))throw new Error("Invalid CanLoad guard");y=g(t,r)}var n;return Zr(y)});return(0,at.of)(u).pipe(Nl(),(0,zr.b)(c=>{if(!Ka(c))return;const g=Jc(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw g.url=c,g}),(0,St.U)(c=>!0===c))}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return(0,at.of)(r);if(o.numberOfChildren>1||!o.children[Ot])return R_(e.redirectTo);o=o.children[Ot]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Ga(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return gr(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const g=o.substring(1);r[u]=t[g]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let c={};return gr(t.children,(g,y)=>{c[y]=this.createSegmentGroup(e,g,r,o)}),new Zt(u,c)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function Wh(n){const e={};for(const r of Object.keys(n.children)){const u=Wh(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function(n){if(1===n.numberOfChildren&&n.children[Ot]){const e=n.children[Ot];return new Zt(n.segments.concat(e.segments),e.children)}return n}(new Zt(n.segments,e))}class Es{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ii{constructor(e,t){this.component=e,this.route=t}}function N_(n,e,t){const r=n._root;return Kr(r,e?e._root:null,t,[r.value])}function zh(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Kr(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=sd(e);return n.children.forEach(c=>{(function(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const y=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!qa(n.url,e.url);case"pathParamsOrQueryParamsChange":return!qa(n.url,e.url)||!es(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Bh(n,e)||!es(n.queryParams,e.queryParams);case"paramsChange":default:return!Bh(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);y?o.canActivateChecks.push(new Es(r)):(u.data=c.data,u._resolvedData=c._resolvedData),Kr(n,e,u.component?g?g.children:null:t,r,o),y&&g&&g.outlet&&g.outlet.isActivated&&o.canDeactivateChecks.push(new ii(g.outlet.component,c))}else c&&dd(e,g,o),o.canActivateChecks.push(new Es(r)),Kr(n,null,u.component?g?g.children:null:t,r,o)})(c,u[c.value.outlet],t,r.concat([c.value]),o),delete u[c.value.outlet]}),gr(u,(c,g)=>dd(c,t.getContext(g),o)),o}function dd(n,e,t){const r=sd(n),o=n.value;gr(r,(u,c)=>{dd(u,o.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new ii(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class pg{}function Yh(n){return new jn.y(e=>e.error(n))}class p{constructor(e,t,r,o,u,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=c}recognize(){const e=cd(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Ot);if(null===t)return null;const r=new Tl([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ot,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new sa(r,t),u=new Dl(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=E_(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const c=t.children[u],g=S_(e,u),y=this.processSegmentGroup(g,c,u);if(null===y)return null;r.push(...y)}const o=N(r);return o.sort((e,t)=>e.value.outlet===Ot?-1:t.value.outlet===Ot?1:e.value.outlet.localeCompare(t.value.outlet)),o}processSegment(e,t,r,o){for(const u of e){const c=this.processSegmentAgainstRoute(u,t,r,o);if(null!==c)return c}return x_(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!qh(e,t,r,o))return null;let u,c=[],g=[];if("**"===e.path){const $=r.length>0?$a(r).parameters:{};u=new Tl(r,$,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Re(e),ri(e),e.component,e,le(t),Le(t)+r.length,Je(e))}else{const $=Hh(t,e,r);if(!$.matched)return null;c=$.consumedSegments,g=r.slice($.lastChild),u=new Tl(c,$.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Re(e),ri(e),e.component,e,le(t),Le(t)+c.length,Je(e))}const y=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:C,slicedSegments:S}=cd(t,c,g,y.filter($=>void 0===$.redirectTo),this.relativeLinkResolution);var n;if(0===S.length&&C.hasChildren()){const $=this.processChildren(y,C);return null===$?null:[new sa(u,$)]}if(0===y.length&&0===S.length)return[new sa(u,[])];const x=ri(e)===o,O=this.processSegment(y,C,S,x?Ot:o);return null===O?null:[new sa(u,O)]}}function D(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function N(n){const e=[],t=new Set;for(const r of n){if(!D(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=N(r.children);e.push(new sa(r.value,o))}return e.filter(r=>!t.has(r))}function le(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Le(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Re(n){return n.data||{}}function Je(n){return n.resolve||{}}function hd(n){return pr(e=>{const t=n(e);return t?(0,Gt.D)(t).pipe((0,St.U)(()=>e)):(0,at.of)(e)})}class gg extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const fd=new h.OlP("ROUTES");class pd{constructor(e,t,r,o){this.loader=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,St.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=u.create(e);return new ig(_w(c.injector.get(fd,void 0,h.XFs.Self|h.XFs.Optional)).map(ug),c)}),Bs(u=>{throw t._loader$=void 0,u}));return t._loader$=new Sh.c(o,()=>new Ri.xQ).pipe((0,Io.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,Gt.D)(this.loader.load(e)):Zr(e()).pipe((0,er.zg)(t=>t instanceof h.YKP?(0,at.of)(t):(0,Gt.D)(this.compiler.compileModuleAsync(t))))}}class Jh{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new aa,this.attachRef=null}}class aa{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Jh,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class mg{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function O_(n){throw n}function cI(n,e,t){return e.parse("/")}function Fl(n,e){return(0,at.of)(null)}const dI={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hI={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Cs=(()=>{class n{constructor(t,r,o,u,c,g,y,C){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=C,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ri.xQ,this.errorHandler=O_,this.malformedUriErrorHandler=cI,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Fl,afterPreactivation:Fl},this.urlHandlingStrategy=new mg,this.routeReuseStrategy=new gg,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(h.h0i),this.console=c.get(h.c2e);const O=c.get(h.R0b);this.isNgZoneEnabled=O instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(C),this.currentUrlTree=new Ga(new Zt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new pd(g,y,$=>this.triggerEvent(new tr($)),$=>this.triggerEvent(new ja($))),this.routerState=Zp(this.currentUrlTree,this.rootComponentType),this.transitions=new yi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Mi(o=>0!==o.id),(0,St.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),pr(o=>{let u=!1,c=!1;return(0,at.of)(o).pipe((0,zr.b)(g=>{this.currentNavigation={id:g.id,initialUrl:g.currentRawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),pr(g=>{const y=this.browserUrlTree.toString(),C=!this.navigated||g.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return F_(g.source)&&(this.browserUrlTree=g.extractedUrl),(0,at.of)(g).pipe(pr(x=>{const O=this.transitions.getValue();return r.next(new ee(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),O!==this.transitions.getValue()?Xi.E:Promise.resolve(x)}),function(n,e,t,r){return pr(o=>function(n,e,t,r,o){return new dg(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,St.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,zr.b)(x=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:x.urlAfterRedirects})}),function(n,e,t,r,o){return(0,er.zg)(u=>function(n,e,t,r,o="emptyOnly",u="legacy"){try{const c=new p(n,e,t,r,o,u).recognize();return null===c?Yh(new pg):(0,at.of)(c)}catch(c){return Yh(c)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,St.U)(c=>Object.assign(Object.assign({},u),{targetSnapshot:c}))))}(this.rootComponentType,this.config,x=>this.serializeUrl(x),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,zr.b)(x=>{"eager"===this.urlUpdateStrategy&&(x.extras.skipLocationChange||this.setBrowserUrl(x.urlAfterRedirects,x),this.browserUrlTree=x.urlAfterRedirects);const O=new ft(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);r.next(O)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:O,extractedUrl:$,source:Z,restoredState:ye,extras:xe}=g,pt=new ee(O,this.serializeUrl($),Z,ye);r.next(pt);const dt=Zp($,this.rootComponentType).snapshot;return(0,at.of)(Object.assign(Object.assign({},g),{targetSnapshot:dt,urlAfterRedirects:$,extras:Object.assign(Object.assign({},xe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=g.rawUrl,this.browserUrlTree=g.urlAfterRedirects,g.resolve(null),Xi.E}),hd(g=>{const{targetSnapshot:y,id:C,extractedUrl:S,rawUrl:x,extras:{skipLocationChange:O,replaceUrl:$}}=g;return this.hooks.beforePreactivation(y,{navigationId:C,appliedUrlTree:S,rawUrlTree:x,skipLocationChange:!!O,replaceUrl:!!$})}),(0,zr.b)(g=>{const y=new bt(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(y)}),(0,St.U)(g=>Object.assign(Object.assign({},g),{guards:N_(g.targetSnapshot,g.currentSnapshot,this.rootContexts)})),function(n,e){return(0,er.zg)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?(0,at.of)(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,e,t,r){return(0,Gt.D)(n).pipe((0,er.zg)(o=>function(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!u||0===u.length)return(0,at.of)(!0);const c=u.map(g=>{const y=zh(g,e,o);let C;if(function(n){return n&&Za(n.canDeactivate)}(y))C=Zr(y.canDeactivate(n,e,t,r));else{if(!Za(y))throw new Error("Invalid CanDeactivate guard");C=Zr(y(n,e,t,r))}return C.pipe($n())});return(0,at.of)(c).pipe(Nl())}(o.component,o.route,t,e,r)),$n(o=>!0!==o,!0))}(c,r,o,n).pipe((0,er.zg)(g=>g&&function(n){return"boolean"==typeof n}(g)?function(n,e,t,r){return(0,Gt.D)(e).pipe(Yc(o=>vs(function(n,e){return null!==n&&e&&e(new Qc(n)),(0,at.of)(!0)}(o.route.parent,r),function(n,e){return null!==n&&e&&e(new To(n)),(0,at.of)(!0)}(o.route,r),function(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>ni(()=>{const g=c.guards.map(y=>{const C=zh(y,c.node,t);let S;if(function(n){return n&&Za(n.canActivateChild)}(C))S=Zr(C.canActivateChild(r,n));else{if(!Za(C))throw new Error("Invalid CanActivateChild guard");S=Zr(C(r,n))}return S.pipe($n())});return(0,at.of)(g).pipe(Nl())}));return(0,at.of)(u).pipe(Nl())}(n,o.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,at.of)(!0);const o=r.map(u=>ni(()=>{const c=zh(u,e,t);let g;if(function(n){return n&&Za(n.canActivate)}(c))g=Zr(c.canActivate(e,n));else{if(!Za(c))throw new Error("Invalid CanActivate guard");g=Zr(c(e,n))}return g.pipe($n())}));return(0,at.of)(o).pipe(Nl())}(n,o.route,t))),$n(o=>!0!==o,!0))}(r,u,n,e):(0,at.of)(g)),(0,St.U)(g=>Object.assign(Object.assign({},t),{guardsResult:g})))})}(this.ngModule.injector,g=>this.triggerEvent(g)),(0,zr.b)(g=>{if(Ka(g.guardsResult)){const C=Jc(`Redirecting to "${this.serializeUrl(g.guardsResult)}"`);throw C.url=g.guardsResult,C}const y=new zt(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.triggerEvent(y)}),Mi(g=>!!g.guardsResult||(this.restoreHistory(g),this.cancelNavigationTransition(g,""),!1)),hd(g=>{if(g.guards.canActivateChecks.length)return(0,at.of)(g).pipe((0,zr.b)(y=>{const C=new At(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(C)}),pr(y=>{let C=!1;return(0,at.of)(y).pipe(function(n,e){return(0,er.zg)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return(0,at.of)(t);let u=0;return(0,Gt.D)(o).pipe(Yc(c=>function(n,e,t,r){return function(n,e,t,r){const o=Object.keys(n);if(0===o.length)return(0,at.of)({});const u={};return(0,Gt.D)(o).pipe((0,er.zg)(c=>function(n,e,t,r){const o=zh(n,e,r);return Zr(o.resolve?o.resolve(e,t):o(e,t))}(n[c],e,t,r).pipe((0,zr.b)(g=>{u[c]=g}))),Nh(1),(0,er.zg)(()=>Object.keys(u).length===o.length?(0,at.of)(u):Xi.E))}(n._resolve,n,e,r).pipe((0,St.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),E_(n,t).resolve),null)))}(c.route,r,n,e)),(0,zr.b)(()=>u++),Nh(1),(0,er.zg)(c=>u===o.length?(0,at.of)(t):Xi.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,zr.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(y),this.cancelNavigationTransition(y,"At least one route resolver didn't emit any value."))}}))}),(0,zr.b)(y=>{const C=new Tr(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(C)}))}),hd(g=>{const{targetSnapshot:y,id:C,extractedUrl:S,rawUrl:x,extras:{skipLocationChange:O,replaceUrl:$}}=g;return this.hooks.afterPreactivation(y,{navigationId:C,appliedUrlTree:S,rawUrlTree:x,skipLocationChange:!!O,replaceUrl:!!$})}),(0,St.U)(g=>{const y=function(n,e,t){const r=od(n,e._root,t?t._root:void 0);return new zp(r,e)}(this.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return Object.assign(Object.assign({},g),{targetRouterState:y})}),(0,zr.b)(g=>{this.currentUrlTree=g.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),this.routerState=g.targetRouterState,"deferred"===this.urlUpdateStrategy&&(g.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,g),this.browserUrlTree=g.urlAfterRedirects)}),((n,e,t)=>(0,St.U)(r=>(new D_(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,g=>this.triggerEvent(g)),(0,zr.b)({next(){u=!0},complete(){u=!0}}),function(n){return e=>e.lift(new A(n))}(()=>{var g;if(!u&&!c){const y=`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(o),this.cancelNavigationTransition(o,y)):this.cancelNavigationTransition(o,y)}(null===(g=this.currentNavigation)||void 0===g?void 0:g.id)===o.id&&(this.currentNavigation=null)}),Bs(g=>{if(c=!0,function(n){return n&&n[Up]}(g)){const y=Ka(g.url);y||(this.navigated=!0,this.restoreHistory(o,!0));const C=new Ne(o.id,this.serializeUrl(o.extractedUrl),g.message);r.next(C),y?setTimeout(()=>{const S=this.urlHandlingStrategy.merge(g.url,this.rawUrlTree),x={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||F_(o.source)};this.scheduleNavigation(S,"imperative",null,x,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const y=new ze(o.id,this.serializeUrl(o.extractedUrl),g);r.next(y);try{o.resolve(this.errorHandler(g))}catch(C){o.reject(C)}}return Xi.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:o,state:u,urlTree:c}=r,g={replaceUrl:!0};if(u){const y=Object.assign({},u);delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(g.state=y)}this.scheduleNavigation(c,o,u,g)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(t){var r;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,r){if(!t)return!0;const o=r.urlTree.toString()===t.urlTree.toString();return r.transitionId!==t.transitionId||!o||!("hashchange"===r.source&&"popstate"===t.source||"popstate"===r.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Ml(t),this.config=t.map(ug),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:c,queryParamsHandling:g,preserveFragment:y}=r,C=o||this.routerState.root,S=y?this.currentUrlTree.fragment:c;let x=null;switch(g){case"merge":x=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=u||null}return null!==x&&(x=this.removeEmptyProps(x)),function(n,e,t,r,o){if(0===t.length)return za(e.root,e.root,e,r,o);const u=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Yp(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return gr(u.outlets,(y,C)=>{g[C]="string"==typeof y?y.split("/"):y}),[...o,{outlets:g}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===c?(u.split("/").forEach((g,y)=>{0==y&&"."===g||(0==y&&""===g?t=!0:".."===g?e++:""!=g&&o.push(g))}),o):[...o,u]},[]);return new Yp(t,e,r)}(t);if(u.toRoot())return za(e.root,new Zt([],{}),e,r,o);const c=function(n,e,t){if(n.isAbsolute)return new Jp(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new Jp(u,u===e.root,0)}const r=Al(n.commands[0])?0:1;return function(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new Jp(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),g=c.processChildren?ad(c.segmentGroup,c.index,u.commands):Vu(c.segmentGroup,c.index,u.commands);return za(c.segmentGroup,g,e,r,o)}(C,this.currentUrlTree,t,x,null!=S?S:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Ka(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},dI):!1===r?Object.assign({},hI):r,Ka(t))return Ou(this.currentUrlTree,t,o);const u=this.parseUrl(t);return Ou(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ce(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,c){var g,y;if(this.disposed)return Promise.resolve(!1);const C=this.getTransition(),S=F_(r)&&C&&!F_(C.source),$=(this.lastSuccessfulId===C.id||this.currentNavigation?C.rawUrl:C.urlAfterRedirects).toString()===t.toString();if(S&&$)return Promise.resolve(!0);let Z,ye,xe;c?(Z=c.resolve,ye=c.reject,xe=c.promise):xe=new Promise((et,rt)=>{Z=et,ye=rt});const pt=++this.navigationId;let dt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),dt=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(g=this.browserPageId)&&void 0!==g?g:0:(null!==(y=this.browserPageId)&&void 0!==y?y:0)+1):dt=0,this.setTransition({id:pt,targetPageId:dt,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:Z,reject:ye,promise:xe,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),xe.catch(et=>Promise.reject(et))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===c?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new Ne(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.DyG),h.LFG(kh),h.LFG(aa),h.LFG(ht),h.LFG(h.zs3),h.LFG(h.v3s),h.LFG(h.Sil),h.LFG(void 0))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function F_(n){return"imperative"!==n}let _g=(()=>{class n{constructor(t,r,o,u,c){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.name=u||Ot,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),g=this.parentContexts.getOrCreateContext(this.name).children,y=new U_(t,g,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,y),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(aa),h.Y36(h.s_b),h.Y36(h._Vd),h.$8M("name"),h.Y36(h.sBO))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class U_{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Il?this.route:e===aa?this.childContexts:this.parent.get(e,t)}}class kw{}class Lw{preload(e,t){return(0,at.of)(null)}}let B_=(()=>{class n{constructor(t,r,o,u,c){this.router=t,this.injector=u,this.preloadingStrategy=c,this.loader=new pd(r,o,C=>t.triggerEvent(new tr(C)),C=>t.triggerEvent(new ja(C)))}setUpPreloading(){this.subscription=this.router.events.pipe(Mi(t=>t instanceof ce),Yc(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(h.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const c=u._loadedConfig;o.push(this.processRoutes(c.module,c.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,Gt.D)(o).pipe((0,Ni.J)(),(0,St.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?(0,at.of)(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,er.zg)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Cs),h.LFG(h.v3s),h.LFG(h.Sil),h.LFG(h.zs3),h.LFG(kw))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),md=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ee?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ce&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof js&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new js(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Cs),h.LFG(pu),h.LFG(void 0))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Ll=new h.OlP("ROUTER_CONFIGURATION"),pI=new h.OlP("ROUTER_FORROOT_GUARD"),gI=[ht,{provide:kh,useClass:td},{provide:Cs,useFactory:function(n,e,t,r,o,u,c,g={},y,C){const S=new Cs(null,n,e,t,r,o,u,_w(c));return y&&(S.urlHandlingStrategy=y),C&&(S.routeReuseStrategy=C),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy)}(g,S),g.enableTracing&&S.events.subscribe(x=>{var O,$;null===(O=console.group)||void 0===O||O.call(console,`Router Event: ${x.constructor.name}`),console.log(x.toString()),console.log(x),null===($=console.groupEnd)||void 0===$||$.call(console)}),S},deps:[kh,aa,ht,h.zs3,h.v3s,h.Sil,fd,Ll,[class{},new h.FiY],[class{},new h.FiY]]},aa,{provide:Il,useFactory:function(n){return n.routerState.root},deps:[Cs]},{provide:h.v3s,useClass:h.EAV},B_,Lw,class{preload(e,t){return t().pipe(Bs(()=>(0,at.of)(null)))}},{provide:Ll,useValue:{enableTracing:!1}}];function Vw(){return new h.PXZ("Router",Cs)}let Uw=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[gI,Bw(t),{provide:pI,useFactory:kx,deps:[[Cs,new h.FiY,new h.tp0]]},{provide:Ll,useValue:r||{}},{provide:Fe,useFactory:mI,deps:[J,[new h.tBr(he),new h.FiY],Ll]},{provide:md,useFactory:Xk,deps:[Cs,pu,Ll]},{provide:kw,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Lw},{provide:h.PXZ,multi:!0,useFactory:Vw},[jw,{provide:h.ip1,multi:!0,useFactory:_I,deps:[jw]},{provide:yI,useFactory:Vx,deps:[jw]},{provide:h.tb,multi:!0,useExisting:yI}]]}}static forChild(t){return{ngModule:n,providers:[Bw(t)]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(pI,8),h.LFG(Cs,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function Xk(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new md(n,e,t)}function mI(n,e,t={}){return t.useHash?new $e(n,e):new Oe(n,e)}function kx(n){return"guarded"}function Bw(n){return[{provide:h.deG,multi:!0,useValue:n},{provide:fd,multi:!0,useValue:n}]}let jw=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ri.xQ}appInitializer(){return this.injector.get(U,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(g=>r=g),u=this.injector.get(Cs),c=this.injector.get(Ll);return"disabled"===c.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?(0,at.of)(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(Ll),o=this.injector.get(B_),u=this.injector.get(md),c=this.injector.get(Cs),g=this.injector.get(h.z2F);t===g.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),o.setUpPreloading(),u.init(),c.resetRootComponentType(g.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function _I(n){return n.appInitializer.bind(n)}function Vx(n){return n.bootstrapListener.bind(n)}const yI=new h.OlP("Router Initializer"),vI=[];let Bx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[Uw.forRoot(vI)],Uw]}),n})();var we=V(8239),j_=V(8873),kt=V(4292),Xh=V(3637),wI=V(6561);function la(n){const{subscriber:e,counter:t,period:r}=n;e.next(t),this.schedule({subscriber:e,counter:t+1,period:r},r)}var H_=V(6682),jx=V(8819);function G_(n,e){return t=>t.lift(new Uu(n,e))}class Uu{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new $w(e,this.compare,this.keySelector))}}class $w extends Wr.L{constructor(e,t,r){super(e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:o}=this;t=o?o(e):e}catch(o){return this.destination.error(o)}let r=!1;if(this.hasKey)try{const{compare:o}=this;r=o(this.key,t)}catch(o){return this.destination.error(o)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}class Hw{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new t1(e,this.observables,this.project))}}class t1 extends yo{constructor(e,t,r){super(e),this.observables=t,this.project=r,this.toRespond=[];const o=t.length;this.values=new Array(o);for(let u=0;u<o;u++)this.toRespond.push(u);for(let u=0;u<o;u++)this.add(yl(this,t[u],void 0,u))}notifyNext(e,t,r){this.values[r]=t;const o=this.toRespond;if(o.length>0){const u=o.indexOf(r);-1!==u&&o.splice(u,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}class n1{constructor(e){this.predicate=e}call(e,t){return t.subscribe(new Bu(e,this.predicate))}}class Bu extends Wr.L{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(t){this.destination.error(t)}}}var dn=V(8971),_r=V(8939),II=(V(3259),V(3394)),ca=V(3910),ki=V(8026),k=V(3854),da=V(5422);const $x="@firebase/database";let q_="";function TI(n){q_=n}class qw{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class r1{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Hx=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new qw(e)}}catch(e){}return new r1},ef=Hx("localStorage"),DI=Hx("sessionStorage"),yg=new da.Yd("@firebase/database"),Gx=function(){let n=1;return function(){return n++}}(),qx=function(n){const e=(0,k.dS)(n),t=new k.gQ;t.update(e);const r=t.digest();return k.US.encodeByteArray(r)},W_=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=W_.apply(null,r):e+="object"==typeof r?(0,k.Pz)(r):r,e+=" "}return e};let tf=null,Wx=!0;const zx=function(n,e){(0,k.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(yg.logLevel=da.in.VERBOSE,tf=yg.log.bind(yg),e&&DI.set("logging_enabled",!0)):"function"==typeof n?tf=n:(tf=null,DI.remove("logging_enabled"))},zn=function(...n){if(!0===Wx&&(Wx=!1,null===tf&&!0===DI.get("logging_enabled")&&zx(!0)),tf){const e=W_.apply(null,n);tf(e)}},_d=function(n){return function(...e){zn(n,...e)}},Ww=function(...n){const e="FIREBASE INTERNAL ERROR: "+W_(...n);yg.error(e)},ha=function(...n){const e=`FIREBASE FATAL ERROR: ${W_(...n)}`;throw yg.error(e),new Error(e)},vi=function(...n){const e="FIREBASE WARNING: "+W_(...n);yg.warn(e)},nf=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Fi="[MIN_NAME]",fa="[MAX_NAME]",yd=function(n,e){if(n===e)return 0;if(n===Fi||e===fa)return-1;if(e===Fi||n===fa)return 1;{const t=z_(n),r=z_(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},i1=function(n,e){return n===e?0:n<e?-1:1},vd=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.Pz)(e))},zw=function(n){if("object"!=typeof n||null===n)return(0,k.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,k.Pz)(e[r]),t+=":",t+=zw(n[e[r]]);return t+="}",t},Zw=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let o=0;o<t;o+=e)r.push(n.substring(o,o+e>t?t:o+e));return r};function si(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const AI=function(n){(0,k.hu)(!nf(n),"Invalid JSON number");const r=1023;let o,u,c,g,y;0===n?(u=0,c=0,o=1/n==-1/0?1:0):(o=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(g=Math.min(Math.floor(Math.log(n)/Math.LN2),r),u=g+r,c=Math.round(n*Math.pow(2,52-g)-Math.pow(2,52))):(u=0,c=Math.round(n/Math.pow(2,-1074))));const C=[];for(y=52;y;y-=1)C.push(c%2?1:0),c=Math.floor(c/2);for(y=11;y;y-=1)C.push(u%2?1:0),u=Math.floor(u/2);C.push(o?1:0),C.reverse();const S=C.join("");let x="";for(y=0;y<64;y+=8){let O=parseInt(S.substr(y,8),2).toString(16);1===O.length&&(O="0"+O),x+=O}return x.toLowerCase()},sf=new RegExp("^-?(0*)\\d{1,10}$"),af=-2147483648,Vl=2147483647,z_=function(n){if(sf.test(n)){const e=Number(n);if(e>=af&&e<=Vl)return e}return null},wd=function(n){try{n()}catch(e){setTimeout(()=>{throw vi("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Ed=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class Yw{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){vi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class RI{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(zn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',vi(e)}}let Ul=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const NI=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,bs="websocket",MI="long_polling";class nE{constructor(e,t,r,o,u=!1,c="",g=!1){this.secure=t,this.namespace=r,this.webSocketOnly=o,this.nodeAdmin=u,this.persistenceKey=c,this.includeNamespaceInQueryParams=g,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ef.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ef.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Qx(n,e,t){let r;if((0,k.hu)("string"==typeof e,"typeof type must == string"),(0,k.hu)("object"==typeof t,"typeof params must == object"),e===bs)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==MI)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const o=[];return si(t,(u,c)=>{o.push(u+"="+c)}),r+o.join("&")}class PI{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.p$)(this.counters_)}}const OI={},rE={};function wg(n){const e=n.toString();return OI[e]||(OI[e]=new PI),OI[e]}class Jx{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<r.length;++o)r[o]&&wd(()=>{this.onMessage_(r[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class uf{constructor(e,t,r,o,u,c,g){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=o,this.authToken=u,this.transportSessionId=c,this.lastSessionId=g,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=_d(e),this.stats_=wg(t),this.urlFn=y=>(this.appCheckToken&&(y.ac=this.appCheckToken),Qx(t,MI,y))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Jx(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new oE((...u)=>{const[c,g,y,C,S]=u;if(this.incrementIncomingBytes_(u),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=g,this.password=y;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);g?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(g,()=>{this.onClosed_()})):this.onClosed_()}},(...u)=>{const[c,g]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(c,g)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&NI.test(location.hostname)&&(r.r="f");const o=this.urlFn(r);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){uf.forceAllow_=!0}static forceDisallow(){uf.forceDisallow_=!0}static isAvailable(){return!((0,k.Yr)()||!uf.forceAllow_&&(uf.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,k.h$)(t),o=Zw(r,1840);for(let u=0;u<o.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[u]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class oE{constructor(e,t,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Gx(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=oE.createIFrame_();let u="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(u='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(g){zn("frame writing exception"),g.stack&&zn(g.stack),zn(g)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||zn("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+o+"="+c.seg+"&ts"+o+"="+c.ts+"&d"+o+"="+c.d,o++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},o=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(o),r()})}addTag(e,t){(0,k.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const o=r.readyState;(!o||"loaded"===o||"complete"===o)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{zn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let Eg=null;"undefined"!=typeof MozWebSocket?Eg=MozWebSocket:"undefined"!=typeof WebSocket&&(Eg=WebSocket);let Bl=(()=>{class n{constructor(t,r,o,u,c,g,y){this.connId=t,this.applicationId=o,this.appCheckToken=u,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=_d(this.connId),this.stats_=wg(r),this.connURL=n.connectionURL_(r,g,y,u),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,o,u){const c={v:"5"};return!(0,k.Yr)()&&"undefined"!=typeof location&&location.hostname&&NI.test(location.hostname)&&(c.r="f"),r&&(c.s=r),o&&(c.ls=o),u&&(c.ac=u),Qx(t,bs,c)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ef.set("previous_websocket_failure",!0);try{if((0,k.Yr)()){const u={headers:{"User-Agent":`Firebase/5/${q_}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(u.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(u.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,g=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;g&&(u.proxy={origin:g}),this.mySock=new Eg(this.connURL,[],u)}else this.mySock=new Eg(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(o){this.log_("Error instantiating WebSocket.");const u=o.message||o.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const u=o.message||o.data;u&&this.log_(u),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const o=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);o&&o.length>1&&parseFloat(o[1])<4.4&&(t=!0)}return!t&&null!==Eg&&!n.forceDisallow_}static previouslyFailed(){return ef.isInMemoryStorage||!0===ef.get("previous_websocket_failure")}markConnectionHealthy(){ef.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const o=(0,k.cI)(r);this.onMessage(o)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const o=this.extractFrameCount_(r);null!==o&&this.appendFrame_(o)}}send(t){this.resetKeepAlive();const r=(0,k.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const o=Zw(r,16384);o.length>1&&this.sendString_(String(o.length));for(let u=0;u<o.length;u++)this.sendString_(o[u])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class Cg{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[uf,Bl]}initTransports_(e){const t=Bl&&Bl.isAvailable();let r=t&&!Bl.previouslyFailed();if(e.webSocketOnly&&(t||vi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Bl];else{const o=this.transports_=[];for(const u of Cg.ALL_TRANSPORTS)u&&u.isAvailable()&&o.push(u)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class Xa{constructor(e,t,r,o,u,c,g,y,C,S){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=o,this.authToken_=u,this.onMessage_=c,this.onReady_=g,this.onDisconnect_=y,this.onKill_=C,this.lastSessionId=S,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=_d("c:"+this.id+":"),this.transportManager_=new Cg(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=Ed(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=vd("t",e),r=vd("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=vd("t",e),r=vd("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=vd("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?Ww("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ww("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&vi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Ed(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ed(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ef.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class bg{put(e,t,r,o){}merge(e,t,r,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class ZI{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let o=0;o<r.length;o++)r[o].callback.apply(r[o].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const o=this.getInitialEvent(e);o&&t.apply(r,o)}off(e,t,r){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let u=0;u<o.length;u++)if(o[u].callback===t&&(!r||r===o[u].context))return void o.splice(u,1)}validateEventType_(e){(0,k.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class K_ extends ZI{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,k.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new K_}getInitialEvent(e){return(0,k.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Cn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[r]=this.pieces_[o],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function nn(){return new Cn("")}function qt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function jl(n){return n.pieces_.length-n.pieceNum_}function Sn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Cn(n.pieces_,e)}function Y_(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function lf(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function KI(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Cn(e,0)}function Hn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Cn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let o=0;o<r.length;o++)r[o].length>0&&t.push(r[o])}return new Cn(t,0)}function Jt(n){return n.pieceNum_>=n.pieces_.length}function ts(n,e){const t=qt(n),r=qt(e);if(null===t)return e;if(t===r)return ts(Sn(n),Sn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function YI(n,e){const t=lf(n,0),r=lf(e,0);for(let o=0;o<t.length&&o<r.length;o++){const u=yd(t[o],r[o]);if(0!==u)return u}return t.length===r.length?0:t.length<r.length?-1:1}function $l(n,e){if(jl(n)!==jl(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function qs(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(jl(n)>jl(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class lR{constructor(e,t){this.errorPrefix_=t,this.parts_=lf(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,k.ug)(this.parts_[r]);QI(this)}}function QI(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+bd(n))}function bd(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class mE extends ZI{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new mE}getInitialEvent(e){return(0,k.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Ig=1e3;let Q_,ju=(()=>{class n extends bg{constructor(t,r,o,u,c,g,y,C){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=o,this.onConnectStatus_=u,this.onServerInfoUpdate_=c,this.authTokenProvider_=g,this.appCheckTokenProvider_=y,this.authOverride_=C,this.id=n.nextPersistentConnectionId_++,this.log_=_d("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ig,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,C&&!(0,k.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");mE.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&K_.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,o){const u=++this.requestNumber_,c={r:u,a:t,b:r};this.log_((0,k.Pz)(c)),(0,k.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),o&&(this.requestCBHash_[u]=o)}get(t){this.initConnection_();const r=new k.BH,o={p:t._path.toString(),q:t._queryObject},u={action:"g",request:o,onComplete:g=>{const y=g.d;"ok"===g.s?(this.onDataUpdate_(o.p,y,!1,null),r.resolve(y)):r.reject(y)}};this.outstandingGets_.push(u),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const g=this.outstandingGets_[c];void 0===g||u!==g||(delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+c+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(c),r.promise}listen(t,r,o,u){this.initConnection_();const c=t._queryIdentifier,g=t._path.toString();this.log_("Listen called for "+g+" "+c),this.listens.has(g)||this.listens.set(g,new Map),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.hu)(!this.listens.get(g).has(c),"listen() called twice for same path/queryId.");const y={onComplete:u,hashFn:r,query:t,tag:o};this.listens.get(g).set(c,y),this.connected_&&this.sendListen_(y)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,o=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(o)})}sendListen_(t){const r=t.query,o=r._path.toString(),u=r._queryIdentifier;this.log_("Listen on "+o+" for "+u);const c={p:o};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,y=>{const C=y.d,S=y.s;n.warnOnListenWarnings_(C,r),(this.listens.get(o)&&this.listens.get(o).get(u))===t&&(this.log_("listen response",y),"ok"!==S&&this.removeListen_(o,u),t.onComplete&&t.onComplete(S,C))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,k.r3)(t,"w")){const o=(0,k.DV)(t,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const u='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();vi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${u} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,k.w9)(t)?"auth":"gauth",o={cred:t};null===this.authOverride_?o.noauth=!0:"object"==typeof this.authOverride_&&(o.authvar=this.authOverride_),this.sendRequest(r,o,u=>{const c=u.s,g=u.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,g))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,o=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,o)})}unlisten(t,r){const o=t._path.toString(),u=t._queryIdentifier;this.log_("Unlisten called for "+o+" "+u),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,u)&&this.connected_&&this.sendUnlisten_(o,u,t._queryObject,r)}sendUnlisten_(t,r,o,u){this.log_("Unlisten on "+t+" for "+r);const c={p:t};u&&(c.q=o,c.t=u),this.sendRequest("n",c)}onDisconnectPut(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:o})}onDisconnectMerge(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:o})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,o,u){const c={p:r,d:o};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,g=>{u&&setTimeout(()=>{u(g.s,g.d)},Math.floor(0))})}put(t,r,o,u){this.putInternal("p",t,r,o,u)}merge(t,r,o,u){this.putInternal("m",t,r,o,u)}putInternal(t,r,o,u,c){this.initConnection_();const g={p:r,d:o};void 0!==c&&(g.h=c),this.outstandingPuts_.push({action:t,request:g,onComplete:u}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,o=this.outstandingPuts_[t].request,u=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,o,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),u&&u(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,o=>{"ok"!==o.s&&this.log_("reportStats","Error sending stats: "+o.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.Pz)(t));const r=t.r,o=this.requestCBHash_[r];o&&(delete this.requestCBHash_[r],o(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):Ww("Unrecognized action received from server: "+(0,k.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ig,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Ig,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ig),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,we.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),o=t.onReady_.bind(t),u=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,g=t.lastSessionId;let y=!1,C=null;const S=function(){C?C.close():(y=!0,u())};t.realtime_={close:S,sendRequest:function($){(0,k.hu)(C,"sendRequest call when we're not connected not allowed."),C.sendRequest($)}};const O=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[$,Z]=yield Promise.all([t.authTokenProvider_.getToken(O),t.appCheckTokenProvider_.getToken(O)]);y?zn("getToken() completed but was canceled"):(zn("getToken() completed. Creating connection."),t.authToken_=$&&$.accessToken,t.appCheckToken_=Z&&Z.token,C=new Xa(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,o,u,ye=>{vi(ye+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},g))}catch($){t.log_("Failed to get token: "+$),y||(t.repoInfo_.nodeAdmin&&vi($),S())}}})()}interrupt(t){zn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){zn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Ig,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let o;o=r?r.map(c=>zw(c)).join("$"):"default";const u=this.removeListen_(t,o);u&&u.onComplete&&u.onComplete("permission_denied")}removeListen_(t,r){const o=new Cn(t).toString();let u;if(this.listens.has(o)){const c=this.listens.get(o);u=c.get(r),c.delete(r),0===c.size&&this.listens.delete(o)}else u=void 0;return u}onAuthRevoked_(t,r){zn("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){zn("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,k.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+q_.replace(/\./g,"-")]=1,(0,k.uI)()?t["framework.cordova"]=1:(0,k.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=K_.getInstance().currentlyOnline();return(0,k.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Kt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Kt(e,t)}}class vE{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Kt(Fi,e),o=new Kt(Fi,t);return 0!==this.compare(r,o)}minPost(){return Kt.MIN}}class JI extends vE{static get __EMPTY_NODE(){return Q_}static set __EMPTY_NODE(e){Q_=e}compare(e,t){return yd(e.name,t.name)}isDefinedOn(e){throw(0,k.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Kt.MIN}maxPost(){return new Kt(fa,Q_)}makePost(e,t){return(0,k.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Kt(e,Q_)}toString(){return".key"}}const pa=new JI;class Tg{constructor(e,t,r,o,u=null){this.isReverse_=o,this.resultGenerator_=u,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?r(e.key,t):1,o&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Dg,Ro=(()=>{class n{constructor(t,r,o,u,c){this.key=t,this.value=r,this.color=null!=o?o:n.RED,this.left=null!=u?u:Is.EMPTY_NODE,this.right=null!=c?c:Is.EMPTY_NODE}copy(t,r,o,u,c){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=o?o:this.color,null!=u?u:this.left,null!=c?c:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,o){let u=this;const c=o(t,u.key);return u=c<0?u.copy(null,null,null,u.left.insert(t,r,o),null):0===c?u.copy(null,r,null,null,null):u.copy(null,null,null,null,u.right.insert(t,r,o)),u.fixUp_()}removeMin_(){if(this.left.isEmpty())return Is.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let o,u;if(o=this,r(t,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(t,r),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),0===r(t,o.key)){if(o.right.isEmpty())return Is.EMPTY_NODE;u=o.right.min_(),o=o.copy(u.key,u.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(t,r))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Is{constructor(e,t=Is.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Is(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ro.BLACK,null,null))}remove(e){return new Is(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ro.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,o=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(o=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Tg(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Tg(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Tg(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Tg(this.root_,null,this.comparator_,!0,e)}}function hR(n,e){return yd(n.name,e.name)}function Id(n,e){return yd(n,e)}Is.EMPTY_NODE=new class{copy(e,t,r,o,u){return this}insert(e,t,r){return new Ro(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const wE=function(n){return"number"==typeof n?"number:"+AI(n):"string:"+n},EE=function(n){if(n.isLeafNode()){const e=n.val();(0,k.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.r3)(e,".sv"),"Priority must be a string or number.")}else(0,k.hu)(n===Dg||n.isEmpty(),"priority of unexpected type.");(0,k.hu)(n===Dg||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let CE,tT,nT,df=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,k.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),EE(this.priorityNode_)}static set __childrenNodeConstructor(t){CE=t}static get __childrenNodeConstructor(){return CE}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Jt(t)?this:".priority"===qt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const o=qt(t);return null===o?r:r.isEmpty()&&".priority"!==o?this:((0,k.hu)(".priority"!==o||1===jl(t),".priority must be the last token in a path"),this.updateImmediateChild(o,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Sn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+wE(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?AI(this.value_):this.value_,this.lazyHash_=qx(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,o=typeof this.value_,u=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(o);return(0,k.hu)(u>=0,"Unknown leaf type: "+r),(0,k.hu)(c>=0,"Unknown leaf type: "+o),u===c?"object"===o?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-u}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Fn=new class extends vE{compare(e,t){const r=e.node.getPriority(),o=t.node.getPriority(),u=r.compareTo(o);return 0===u?yd(e.name,t.name):u}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Kt.MIN}maxPost(){return new Kt(fa,new df("[PRIORITY-POST]",nT))}makePost(e,t){const r=tT(e);return new Kt(t,new df("[PRIORITY-POST]",r))}toString(){return".priority"}},pR=Math.log(2);class gR{constructor(e){this.count=parseInt(Math.log(e+1)/pR,10),this.current_=this.count-1;const o=(u=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const bE=function(n,e,t,r){n.sort(e);const o=function(y,C){const S=C-y;let x,O;if(0===S)return null;if(1===S)return x=n[y],O=t?t(x):x,new Ro(O,x.node,Ro.BLACK,null,null);{const $=parseInt(S/2,10)+y,Z=o(y,$),ye=o($+1,C);return x=n[$],O=t?t(x):x,new Ro(O,x.node,Ro.BLACK,Z,ye)}},g=function(y){let C=null,S=null,x=n.length;const O=function(Z,ye){const xe=x-Z,pt=x;x-=Z;const dt=o(xe+1,pt),et=n[xe],rt=t?t(et):et;$(new Ro(rt,et.node,ye,null,dt))},$=function(Z){C?(C.left=Z,C=Z):(S=Z,C=Z)};for(let Z=0;Z<y.count;++Z){const ye=y.nextBitIsOne(),xe=Math.pow(2,y.count-(Z+1));ye?O(xe,Ro.BLACK):(O(xe,Ro.BLACK),O(xe,Ro.RED))}return S}(new gR(n.length));return new Is(r||e,g)};let iT;const Hl={};class $u{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.hu)(Hl&&Fn,"ChildrenNode.ts has not been loaded"),iT=iT||new $u({".priority":Hl},{".priority":Fn}),iT}get(e){const t=(0,k.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Is?t:null}hasIndex(e){return(0,k.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.hu)(e!==pa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let o=!1;const u=t.getIterator(Kt.Wrap);let g,c=u.getNext();for(;c;)o=o||e.isDefinedOn(c.node),r.push(c),c=u.getNext();g=o?bE(r,e.getCompare()):Hl;const y=e.toString(),C=Object.assign({},this.indexSet_);C[y]=e;const S=Object.assign({},this.indexes_);return S[y]=g,new $u(S,C)}addToIndexes(e,t){const r=(0,k.UI)(this.indexes_,(o,u)=>{const c=(0,k.DV)(this.indexSet_,u);if((0,k.hu)(c,"Missing index implementation for "+u),o===Hl){if(c.isDefinedOn(e.node)){const g=[],y=t.getIterator(Kt.Wrap);let C=y.getNext();for(;C;)C.name!==e.name&&g.push(C),C=y.getNext();return g.push(e),bE(g,c.getCompare())}return Hl}{const g=t.get(e.name);let y=o;return g&&(y=y.remove(new Kt(e.name,g))),y.insert(e,e.node)}});return new $u(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,k.UI)(this.indexes_,o=>{if(o===Hl)return o;{const u=t.get(e.name);return u?o.remove(new Kt(e.name,u)):o}});return new $u(r,this.indexSet_)}}let hf,jt=(()=>{class n{constructor(t,r,o){this.children_=t,this.priorityNode_=r,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&EE(this.priorityNode_),this.children_.isEmpty()&&(0,k.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return hf||(hf=new n(new Is(Id),null,$u.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||hf}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?hf:r}}getChild(t){const r=qt(t);return null===r?this:this.getImmediateChild(r).getChild(Sn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,k.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const o=new Kt(t,r);let u,c;r.isEmpty()?(u=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(o,this.children_)):(u=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(o,this.children_));const g=u.isEmpty()?hf:this.priorityNode_;return new n(u,g,c)}}updateChild(t,r){const o=qt(t);if(null===o)return r;{(0,k.hu)(".priority"!==qt(t)||1===jl(t),".priority must be the last token in a path");const u=this.getImmediateChild(o).updateChild(Sn(t),r);return this.updateImmediateChild(o,u)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let o=0,u=0,c=!0;if(this.forEachChild(Fn,(g,y)=>{r[g]=y.val(t),o++,c&&n.INTEGER_REGEXP_.test(g)?u=Math.max(u,Number(g)):c=!1}),!t&&c&&u<2*o){const g=[];for(const y in r)g[y]=r[y];return g}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+wE(this.getPriority().val())+":"),this.forEachChild(Fn,(r,o)=>{const u=o.hash();""!==u&&(t+=":"+r+":"+u)}),this.lazyHash_=""===t?"":qx(t)}return this.lazyHash_}getPredecessorChildName(t,r,o){const u=this.resolveIndex_(o);if(u){const c=u.getPredecessorKey(new Kt(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.minKey();return o&&o.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Kt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.maxKey();return o&&o.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Kt(r,this.children_.get(r)):null}forEachChild(t,r){const o=this.resolveIndex_(t);return o?o.inorderTraversal(u=>r(u.name,u.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getIteratorFrom(t,u=>u);{const u=this.children_.getIteratorFrom(t.name,Kt.Wrap);let c=u.peek();for(;null!=c&&r.compare(c,t)<0;)u.getNext(),c=u.peek();return u}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getReverseIteratorFrom(t,u=>u);{const u=this.children_.getReverseIteratorFrom(t.name,Kt.Wrap);let c=u.peek();for(;null!=c&&r.compare(c,t)>0;)u.getNext(),c=u.peek();return u}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ns?-1:0}withIndex(t){if(t===pa||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===pa||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const o=this.getIterator(Fn),u=r.getIterator(Fn);let c=o.getNext(),g=u.getNext();for(;c&&g;){if(c.name!==g.name||!c.node.equals(g.node))return!1;c=o.getNext(),g=u.getNext()}return null===c&&null===g}return!1}return!1}}resolveIndex_(t){return t===pa?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const ns=new class extends jt{constructor(){super(new Is(Id),jt.EMPTY_NODE,$u.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return jt.EMPTY_NODE}isEmpty(){return!1}};function yr(n,e=null){if(null===n)return jt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new df(n,yr(e));if(n instanceof Array){let t=jt.EMPTY_NODE;return si(n,(r,o)=>{if((0,k.r3)(n,r)&&"."!==r.substring(0,1)){const u=yr(o);(u.isLeafNode()||!u.isEmpty())&&(t=t.updateImmediateChild(r,u))}}),t.updatePriority(yr(e))}{const t=[];let r=!1;if(si(n,(c,g)=>{if("."!==c.substring(0,1)){const y=yr(g);y.isEmpty()||(r=r||!y.getPriority().isEmpty(),t.push(new Kt(c,y)))}}),0===t.length)return jt.EMPTY_NODE;const u=bE(t,hR,c=>c.name,Id);if(r){const c=bE(t,Fn.getCompare());return new jt(u,yr(e),new $u({".priority":c},{".priority":Fn}))}return new jt(u,yr(e),$u.Default)}}Object.defineProperties(Kt,{MIN:{value:new Kt(Fi,jt.EMPTY_NODE)},MAX:{value:new Kt(fa,ns)}}),JI.__EMPTY_NODE=jt.EMPTY_NODE,df.__childrenNodeConstructor=jt,Dg=ns,nT=ns,function(n){tT=n}(yr);class sT extends vE{constructor(e){super(),this.indexPath_=e,(0,k.hu)(!Jt(e)&&".priority"!==qt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),o=this.extractChild(t.node),u=r.compareTo(o);return 0===u?yd(e.name,t.name):u}makePost(e,t){const r=yr(e),o=jt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Kt(t,o)}maxPost(){const e=jt.EMPTY_NODE.updateChild(this.indexPath_,ns);return new Kt(fa,e)}toString(){return lf(this.indexPath_,0).join("/")}}const J_=new class extends vE{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?yd(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Kt.MIN}maxPost(){return Kt.MAX}makePost(e,t){const r=yr(e);return new Kt(t,r)}toString(){return".value"}},Td="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",DE=function(){let n=0;const e=[];return function(t){const r=t===n;let o;n=t;const u=new Array(8);for(o=7;o>=0;o--)u[o]=Td.charAt(t%64),t=Math.floor(t/64);(0,k.hu)(0===t,"Cannot push at time == 0");let c=u.join("");if(r){for(o=11;o>=0&&63===e[o];o--)e[o]=0;e[o]++}else for(o=0;o<12;o++)e[o]=Math.floor(64*Math.random());for(o=0;o<12;o++)c+=Td.charAt(e[o]);return(0,k.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),aT=function(n){if(n===""+Vl)return"-";const e=z_(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let c=0;c<t.length;c++)t[c]=n.charAt(c);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return fa;const u=Td.charAt(Td.indexOf(t[r])+1);return t[r]=u,t.slice(0,r+1).join("")},X_=function(n){if(n===""+af)return Fi;const e=z_(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+Vl:(delete t[t.length-1],t.join("")):(t[t.length-1]=Td.charAt(Td.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function uT(n){return{type:"value",snapshotNode:n}}function ff(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Sg(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Ag(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class SE{constructor(e){this.index_=e}updateChild(e,t,r,o,u,c){(0,k.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const g=e.getImmediateChild(t);return g.getChild(o).equals(r.getChild(o))&&g.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(Sg(t,g)):(0,k.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):g.isEmpty()?c.trackChildChange(ff(t,r)):c.trackChildChange(Ag(t,r,g))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Fn,(o,u)=>{t.hasChild(o)||r.trackChildChange(Sg(o,u))}),t.isLeafNode()||t.forEachChild(Fn,(o,u)=>{if(e.hasChild(o)){const c=e.getImmediateChild(o);c.equals(u)||r.trackChildChange(Ag(o,u,c))}else r.trackChildChange(ff(o,u))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?jt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Gl{constructor(e){this.indexedFilter_=new SE(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Gl.getStartPost_(e),this.endPost_=Gl.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,o,u,c){return this.matches(new Kt(t,r))||(r=jt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,o,u,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=jt.EMPTY_NODE);let o=t.withIndex(this.index_);o=o.updatePriority(jt.EMPTY_NODE);const u=this;return t.forEachChild(Fn,(c,g)=>{u.matches(new Kt(c,g))||(o=o.updateImmediateChild(c,jt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class pf{constructor(e){this.rangedFilter_=new Gl(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,o,u,c){return this.rangedFilter_.matches(new Kt(t,r))||(r=jt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,o,u,c):this.fullLimitUpdateChild_(e,t,r,u,c)}updateFullNode(e,t,r){let o;if(t.isLeafNode()||t.isEmpty())o=jt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let u;o=jt.EMPTY_NODE.withIndex(this.index_),u=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;u.hasNext()&&c<this.limit_;){const g=u.getNext();let y;if(y=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),g)<=0:this.index_.compare(g,this.rangedFilter_.getEndPost())<=0,!y)break;o=o.updateImmediateChild(g.name,g.node),c++}}else{let u,c,g,y;if(o=t.withIndex(this.index_),o=o.updatePriority(jt.EMPTY_NODE),this.reverse_){y=o.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const x=this.index_.getCompare();g=(O,$)=>x($,O)}else y=o.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),g=this.index_.getCompare();let C=0,S=!1;for(;y.hasNext();){const x=y.getNext();!S&&g(u,x)<=0&&(S=!0),S&&C<this.limit_&&g(x,c)<=0?C++:o=o.updateImmediateChild(x.name,jt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,o,u){let c;if(this.reverse_){const x=this.index_.getCompare();c=(O,$)=>x($,O)}else c=this.index_.getCompare();const g=e;(0,k.hu)(g.numChildren()===this.limit_,"");const y=new Kt(t,r),C=this.reverse_?g.getFirstChild(this.index_):g.getLastChild(this.index_),S=this.rangedFilter_.matches(y);if(g.hasChild(t)){const x=g.getImmediateChild(t);let O=o.getChildAfterChild(this.index_,C,this.reverse_);for(;null!=O&&(O.name===t||g.hasChild(O.name));)O=o.getChildAfterChild(this.index_,O,this.reverse_);const $=null==O?1:c(O,y);if(S&&!r.isEmpty()&&$>=0)return null!=u&&u.trackChildChange(Ag(t,r,x)),g.updateImmediateChild(t,r);{null!=u&&u.trackChildChange(Sg(t,x));const ye=g.updateImmediateChild(t,jt.EMPTY_NODE);return null!=O&&this.rangedFilter_.matches(O)?(null!=u&&u.trackChildChange(ff(O.name,O.node)),ye.updateImmediateChild(O.name,O.node)):ye}}return r.isEmpty()?e:S&&c(C,y)>=0?(null!=u&&(u.trackChildChange(Sg(C.name,C.node)),u.trackChildChange(ff(t,r))),g.updateImmediateChild(t,r).updateImmediateChild(C.name,jt.EMPTY_NODE)):e}}class xg{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Fn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Fi}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:fa}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Fn}copy(){const e=new xg;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function AE(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function No(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function Yr(n,e){const t=n.copy();return t.index_=e,t}function ql(n){const e={};if(n.isDefault())return e;let t;return n.index_===Fn?t="$priority":n.index_===J_?t="$value":n.index_===pa?t="$key":((0,k.hu)(n.index_ instanceof sT,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.Pz)(t),n.startSet_&&(e.startAt=(0,k.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,k.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,k.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,k.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Mg(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Fn&&(e.i=n.index_.toString()),e}class rs extends bg{constructor(e,t,r,o){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=o,this.log_=_d("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,o){const u=e._path.toString();this.log_("Listen called for "+u+" "+e._queryIdentifier);const c=rs.getListenId_(e,r),g={};this.listens_[c]=g;const y=ql(e._queryParams);this.restRequest_(u+".json",y,(C,S)=>{let x=S;if(404===C&&(x=null,C=null),null===C&&this.onDataUpdate_(u,x,!1,r),(0,k.DV)(this.listens_,c)===g){let O;O=C?401===C?"permission_denied":"rest_error:"+C:"ok",o(O,null)}})}unlisten(e,t){const r=rs.getListenId_(e,t);delete this.listens_[r]}get(e){const t=ql(e._queryParams),r=e._path.toString(),o=new k.BH;return this.restRequest_(r+".json",t,(u,c)=>{let g=c;404===u&&(g=null,u=null),null===u?(this.onDataUpdate_(r,g,!1,null),o.resolve(g)):o.reject(new Error(g))}),o.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,u])=>{o&&o.accessToken&&(t.auth=o.accessToken),u&&u.token&&(t.ac=u.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.xO)(t);this.log_("Sending REST request for "+c);const g=new XMLHttpRequest;g.onreadystatechange=()=>{if(r&&4===g.readyState){this.log_("REST Response for "+c+" received. status:",g.status,"response:",g.responseText);let y=null;if(g.status>=200&&g.status<300){try{y=(0,k.cI)(g.responseText)}catch(C){vi("Failed to parse JSON response for "+c+": "+g.responseText)}r(null,y)}else 401!==g.status&&404!==g.status&&vi("Got unsuccessful REST response for "+c+" Status: "+g.status),r(g.status);r=null}},g.open("GET",c,!0),g.send()})}}class RE{constructor(){this.rootNode_=jt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Hu(){return{value:null,children:new Map}}function ma(n,e,t){if(Jt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=qt(e);n.children.has(r)||n.children.set(r,Hu()),ma(n.children.get(r),e=Sn(e),t)}}function Wl(n,e){if(Jt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Fn,(r,o)=>{ma(n,new Cn(r),o)}),Wl(n,e)}}if(n.children.size>0){const t=qt(e);return e=Sn(e),n.children.has(t)&&Wl(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function zl(n,e,t){null!==n.value?t(e,n.value):function(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,o)=>{zl(o,new Cn(e.toString()+"/"+r),t)})}class mf{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&si(this.last_,(r,o)=>{t[r]=t[r]-o}),this.last_=e,t}}class lT{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new mf(e);const r=1e4+2e4*Math.random();Ed(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;si(e,(o,u)=>{u>0&&(0,k.r3)(this.statsToReport_,o)&&(t[o]=u,r=!0)}),r&&this.server_.reportStats(t),Ed(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ws=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ws||(Ws={})),Ws))();function ny(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Pg{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ws.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Jt(this.path)){if(null!=this.affectedTree.value)return(0,k.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Cn(e));return new Pg(nn(),t,this.revert)}}return(0,k.hu)(qt(this.path)===e,"operationForChild called for unrelated child."),new Pg(Sn(this.path),this.affectedTree,this.revert)}}class vf{constructor(e,t){this.source=e,this.path=t,this.type=Ws.LISTEN_COMPLETE}operationForChild(e){return Jt(this.path)?new vf(this.source,nn()):new vf(this.source,Sn(this.path))}}class Zl{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ws.OVERWRITE}operationForChild(e){return Jt(this.path)?new Zl(this.source,nn(),this.snap.getImmediateChild(e)):new Zl(this.source,Sn(this.path),this.snap)}}class Sd{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ws.MERGE}operationForChild(e){if(Jt(this.path)){const t=this.children.subtree(new Cn(e));return t.isEmpty()?null:t.value?new Zl(this.source,nn(),t.value):new Sd(this.source,nn(),t)}return(0,k.hu)(qt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Sd(this.source,Sn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Kl{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Jt(e))return this.isFullyInitialized()&&!this.filtered_;const t=qt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class cT{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function wf(n,e,t,r,o,u){const c=r.filter(g=>g.type===t);c.sort((g,y)=>function(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.g5)("Should only compare child_ events.");const r=new Kt(e.childName,e.snapshotNode),o=new Kt(t.childName,t.snapshotNode);return n.index_.compare(r,o)}(n,g,y)),c.forEach(g=>{const y=function(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,g,u);o.forEach(C=>{C.respondsTo(g.type)&&e.push(C.createEvent(y,n.query_))})})}function NE(n,e){return{eventCache:n,serverCache:e}}function Og(n,e,t,r){return NE(new Kl(e,t,r),n.serverCache)}function ME(n,e,t,r){return NE(n.eventCache,new Kl(e,t,r))}function ry(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Yl(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let PE;class Zn{constructor(e,t=(()=>(PE||(PE=new Is(i1)),PE))()){this.value=e,this.children=t}static fromObject(e){let t=new Zn(null);return si(e,(r,o)=>{t=t.set(new Cn(r),o)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:nn(),value:this.value};if(Jt(e))return null;{const r=qt(e),o=this.children.get(r);if(null!==o){const u=o.findRootMostMatchingPathAndValue(Sn(e),t);return null!=u?{path:Hn(new Cn(r),u.path),value:u.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Jt(e))return this;{const t=qt(e),r=this.children.get(t);return null!==r?r.subtree(Sn(e)):new Zn(null)}}set(e,t){if(Jt(e))return new Zn(t,this.children);{const r=qt(e),u=(this.children.get(r)||new Zn(null)).set(Sn(e),t),c=this.children.insert(r,u);return new Zn(this.value,c)}}remove(e){if(Jt(e))return this.children.isEmpty()?new Zn(null):new Zn(null,this.children);{const t=qt(e),r=this.children.get(t);if(r){const o=r.remove(Sn(e));let u;return u=o.isEmpty()?this.children.remove(t):this.children.insert(t,o),null===this.value&&u.isEmpty()?new Zn(null):new Zn(this.value,u)}return this}}get(e){if(Jt(e))return this.value;{const t=qt(e),r=this.children.get(t);return r?r.get(Sn(e)):null}}setTree(e,t){if(Jt(e))return t;{const r=qt(e),u=(this.children.get(r)||new Zn(null)).setTree(Sn(e),t);let c;return c=u.isEmpty()?this.children.remove(r):this.children.insert(r,u),new Zn(this.value,c)}}fold(e){return this.fold_(nn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((o,u)=>{r[o]=u.fold_(Hn(e,o),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,nn(),t)}findOnPath_(e,t,r){const o=!!this.value&&r(t,this.value);if(o)return o;if(Jt(e))return null;{const u=qt(e),c=this.children.get(u);return c?c.findOnPath_(Sn(e),Hn(t,u),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,nn(),t)}foreachOnPath_(e,t,r){if(Jt(e))return this;{this.value&&r(t,this.value);const o=qt(e),u=this.children.get(o);return u?u.foreachOnPath_(Sn(e),Hn(t,o),r):new Zn(null)}}foreach(e){this.foreach_(nn(),e)}foreach_(e,t){this.children.inorderTraversal((r,o)=>{o.foreach_(Hn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class _a{constructor(e){this.writeTree_=e}static empty(){return new _a(new Zn(null))}}function Ef(n,e,t){if(Jt(e))return new _a(new Zn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const o=r.path;let u=r.value;const c=ts(o,e);return u=u.updateChild(c,t),new _a(n.writeTree_.set(o,u))}{const o=new Zn(t),u=n.writeTree_.setTree(e,o);return new _a(u)}}}function hT(n,e,t){let r=n;return si(t,(o,u)=>{r=Ef(r,Hn(e,o),u)}),r}function CR(n,e){if(Jt(e))return _a.empty();{const t=n.writeTree_.setTree(e,new Zn(null));return new _a(t)}}function fT(n,e){return null!=Ad(n,e)}function Ad(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(ts(t.path,e)):null}function bR(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Fn,(r,o)=>{e.push(new Kt(r,o))}):n.writeTree_.children.inorderTraversal((r,o)=>{null!=o.value&&e.push(new Kt(r,o.value))}),e}function Ql(n,e){if(Jt(e))return n;{const t=Ad(n,e);return new _a(null!=t?new Zn(t):n.writeTree_.subtree(e))}}function OE(n){return n.writeTree_.isEmpty()}function Jl(n,e){return iy(nn(),n.writeTree_,e)}function iy(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((o,u)=>{".priority"===o?((0,k.hu)(null!==u.value,"Priority writes must always be leaf nodes"),r=u.value):t=iy(Hn(n,o),u,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Hn(n,".priority"),r)),t}}function sy(n,e){return FE(e,n)}function pT(n,e){if(n.snap)return qs(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&qs(Hn(n.path,t),e))return!0;return!1}function TR(n){return n.visible}function xd(n,e,t){let r=_a.empty();for(let o=0;o<n.length;++o){const u=n[o];if(e(u)){const c=u.path;let g;if(u.snap)qs(t,c)?(g=ts(t,c),r=Ef(r,g,u.snap)):qs(c,t)&&(g=ts(c,t),r=Ef(r,nn(),u.snap.getChild(g)));else{if(!u.children)throw(0,k.g5)("WriteRecord should have .snap or .children");if(qs(t,c))g=ts(t,c),r=hT(r,g,u.children);else if(qs(c,t))if(g=ts(c,t),Jt(g))r=hT(r,nn(),u.children);else{const y=(0,k.DV)(u.children,qt(g));if(y){const C=y.getChild(Sn(g));r=Ef(r,nn(),C)}}}}}return r}function gT(n,e,t,r,o){if(r||o){const u=Ql(n.visibleWrites,e);return!o&&OE(u)?t:o||null!=t||fT(u,nn())?Jl(xd(n.allWrites,function(C){return(C.visible||o)&&(!r||!~r.indexOf(C.writeId))&&(qs(C.path,e)||qs(e,C.path))},e),t||jt.EMPTY_NODE):null}{const u=Ad(n.visibleWrites,e);if(null!=u)return u;{const c=Ql(n.visibleWrites,e);return OE(c)?t:null!=t||fT(c,nn())?Jl(c,t||jt.EMPTY_NODE):null}}}function ay(n,e,t,r){return gT(n.writeTree,n.treePath,e,t,r)}function kE(n,e){return function(n,e,t){let r=jt.EMPTY_NODE;const o=Ad(n.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(Fn,(u,c)=>{r=r.updateImmediateChild(u,c)}),r;if(t){const u=Ql(n.visibleWrites,e);return t.forEachChild(Fn,(c,g)=>{const y=Jl(Ql(u,new Cn(c)),g);r=r.updateImmediateChild(c,y)}),bR(u).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return bR(Ql(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function vT(n,e,t,r){return function(n,e,t,r,o){(0,k.hu)(r||o,"Either existingEventSnap or existingServerSnap must exist");const u=Hn(e,t);if(fT(n.visibleWrites,u))return null;{const c=Ql(n.visibleWrites,u);return OE(c)?o.getChild(t):Jl(c,o.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function uy(n,e){return function(n,e){return Ad(n.visibleWrites,e)}(n.writeTree,Hn(n.treePath,e))}function ly(n,e,t){return function(n,e,t,r){const o=Hn(e,t),u=Ad(n.visibleWrites,o);return null!=u?u:r.isCompleteForChild(t)?Jl(Ql(n.visibleWrites,o),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function wT(n,e){return FE(Hn(n.treePath,e),n.writeTree)}function FE(n,e){return{treePath:n,writeTree:e}}class ET{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,k.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const o=this.changeMap.get(r);if(o){const u=o.type;if("child_added"===t&&"child_removed"===u)this.changeMap.set(r,Ag(r,e.snapshotNode,o.snapshotNode));else if("child_removed"===t&&"child_added"===u)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===u)this.changeMap.set(r,Sg(r,o.oldSnap));else if("child_changed"===t&&"child_added"===u)this.changeMap.set(r,ff(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==u)throw(0,k.g5)("Illegal combination of changes: "+e+" occurred after "+o);this.changeMap.set(r,Ag(r,e.snapshotNode,o.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const xR=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class kg{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Kl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ly(this.writes_,e,r)}}getChildAfterChild(e,t,r){const o=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Yl(this.viewCache_),u=function(n,e,t,r,o,u){return function(n,e,t,r,o,u,c){let g;const y=Ql(n.visibleWrites,e),C=Ad(y,nn());if(null!=C)g=C;else{if(null==t)return[];g=Jl(y,t)}if(g=g.withIndex(c),g.isEmpty()||g.isLeafNode())return[];{const S=[],x=c.getCompare(),O=u?g.getReverseIteratorFrom(r,c):g.getIteratorFrom(r,c);let $=O.getNext();for(;$&&S.length<o;)0!==x($,r)&&S.push($),$=O.getNext();return S}}(n.writeTree,n.treePath,e,t,r,o,u)}(this.writes_,o,t,1,r,e);return 0===u.length?null:u[0]}}function cy(n,e,t,r,o,u){const c=e.eventCache;if(null!=uy(r,t))return e;{let g,y;if(Jt(t))if((0,k.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const C=Yl(e),x=kE(r,C instanceof jt?C:jt.EMPTY_NODE);g=n.filter.updateFullNode(e.eventCache.getNode(),x,u)}else{const C=ay(r,Yl(e));g=n.filter.updateFullNode(e.eventCache.getNode(),C,u)}else{const C=qt(t);if(".priority"===C){(0,k.hu)(1===jl(t),"Can't have a priority with additional path components");const S=c.getNode();y=e.serverCache.getNode();const x=vT(r,t,S,y);g=null!=x?n.filter.updatePriority(S,x):c.getNode()}else{const S=Sn(t);let x;if(c.isCompleteForChild(C)){y=e.serverCache.getNode();const O=vT(r,t,c.getNode(),y);x=null!=O?c.getNode().getImmediateChild(C).updateChild(S,O):c.getNode().getImmediateChild(C)}else x=ly(r,C,e.serverCache);g=null!=x?n.filter.updateChild(c.getNode(),C,x,S,o,u):c.getNode()}}return Og(e,g,c.isFullyInitialized()||Jt(t),n.filter.filtersNodes())}}function Cf(n,e,t,r,o,u,c,g){const y=e.serverCache;let C;const S=c?n.filter:n.filter.getIndexedFilter();if(Jt(t))C=S.updateFullNode(y.getNode(),r,null);else if(S.filtersNodes()&&!y.isFiltered()){const $=y.getNode().updateChild(t,r);C=S.updateFullNode(y.getNode(),$,null)}else{const $=qt(t);if(!y.isCompleteForPath(t)&&jl(t)>1)return e;const Z=Sn(t),xe=y.getNode().getImmediateChild($).updateChild(Z,r);C=".priority"===$?S.updatePriority(y.getNode(),xe):S.updateChild(y.getNode(),$,xe,Z,xR,null)}const x=ME(e,C,y.isFullyInitialized()||Jt(t),S.filtersNodes());return cy(n,x,t,o,new kg(o,x,u),g)}function VE(n,e,t,r,o,u,c){const g=e.eventCache;let y,C;const S=new kg(o,e,u);if(Jt(t))C=n.filter.updateFullNode(e.eventCache.getNode(),r,c),y=Og(e,C,!0,n.filter.filtersNodes());else{const x=qt(t);if(".priority"===x)C=n.filter.updatePriority(e.eventCache.getNode(),r),y=Og(e,C,g.isFullyInitialized(),g.isFiltered());else{const O=Sn(t),$=g.getNode().getImmediateChild(x);let Z;if(Jt(O))Z=r;else{const ye=S.getCompleteChild(x);Z=null!=ye?".priority"===Y_(O)&&ye.getChild(KI(O)).isEmpty()?ye:ye.updateChild(O,r):jt.EMPTY_NODE}y=$.equals(Z)?e:Og(e,n.filter.updateChild(g.getNode(),x,Z,O,S,c),g.isFullyInitialized(),n.filter.filtersNodes())}}return y}function dy(n,e){return n.eventCache.isCompleteForChild(e)}function BE(n,e,t){return t.foreach((r,o)=>{e=e.updateChild(r,o)}),e}function CT(n,e,t,r,o,u,c,g){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let C,y=e;C=Jt(t)?r:new Zn(null).setTree(t,r);const S=e.serverCache.getNode();return C.children.inorderTraversal((x,O)=>{if(S.hasChild(x)){const Z=BE(0,e.serverCache.getNode().getImmediateChild(x),O);y=Cf(n,y,new Cn(x),Z,o,u,c,g)}}),C.children.inorderTraversal((x,O)=>{const $=!e.serverCache.isCompleteForChild(x)&&void 0===O.value;if(!S.hasChild(x)&&!$){const ye=BE(0,e.serverCache.getNode().getImmediateChild(x),O);y=Cf(n,y,new Cn(x),ye,o,u,c,g)}}),y}class PR{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,o=new SE(r.getIndex()),u=function(n){return n.loadsAllData()?new SE(n.getIndex()):n.hasLimit()?new pf(n):new Gl(n)}(r);this.processor_=function(n){return{filter:n}}(u);const c=t.serverCache,g=t.eventCache,y=o.updateFullNode(jt.EMPTY_NODE,c.getNode(),null),C=u.updateFullNode(jt.EMPTY_NODE,g.getNode(),null),S=new Kl(y,c.isFullyInitialized(),o.filtersNodes()),x=new Kl(C,g.isFullyInitialized(),u.filtersNodes());this.viewCache_=NE(x,S),this.eventGenerator_=new cT(this.query_)}get query(){return this.query_}}function DT(n,e){const t=Yl(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Jt(e)&&!t.getImmediateChild(qt(e)).isEmpty())?t.getChild(e):null}function hy(n){return 0===n.eventRegistrations_.length}function HE(n,e,t){const r=[];if(t){(0,k.hu)(null==e,"A cancel should cancel all event registrations.");const o=n.query._path;n.eventRegistrations_.forEach(u=>{const c=u.createCancelEvent(t,o);c&&r.push(c)})}if(e){let o=[];for(let u=0;u<n.eventRegistrations_.length;++u){const c=n.eventRegistrations_[u];if(c.matches(e)){if(e.hasAnyCallback()){o=o.concat(n.eventRegistrations_.slice(u+1));break}}else o.push(c)}n.eventRegistrations_=o}else n.eventRegistrations_=[];return r}function ST(n,e,t,r){e.type===Ws.MERGE&&null!==e.source.queryId&&((0,k.hu)(Yl(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.hu)(ry(n.viewCache_),"Missing event cache, even though we have a server cache"));const o=n.viewCache_,u=function(n,e,t,r,o){const u=new ET;let c,g;if(t.type===Ws.OVERWRITE){const C=t;C.source.fromUser?c=VE(n,e,C.path,C.snap,r,o,u):((0,k.hu)(C.source.fromServer,"Unknown source."),g=C.source.tagged||e.serverCache.isFiltered()&&!Jt(C.path),c=Cf(n,e,C.path,C.snap,r,o,g,u))}else if(t.type===Ws.MERGE){const C=t;C.source.fromUser?c=function(n,e,t,r,o,u,c){let g=e;return r.foreach((y,C)=>{const S=Hn(t,y);dy(e,qt(S))&&(g=VE(n,g,S,C,o,u,c))}),r.foreach((y,C)=>{const S=Hn(t,y);dy(e,qt(S))||(g=VE(n,g,S,C,o,u,c))}),g}(n,e,C.path,C.children,r,o,u):((0,k.hu)(C.source.fromServer,"Unknown source."),g=C.source.tagged||e.serverCache.isFiltered(),c=CT(n,e,C.path,C.children,r,o,g,u))}else if(t.type===Ws.ACK_USER_WRITE){const C=t;c=C.revert?function(n,e,t,r,o,u){let c;if(null!=uy(r,t))return e;{const g=new kg(r,e,o),y=e.eventCache.getNode();let C;if(Jt(t)||".priority"===qt(t)){let S;if(e.serverCache.isFullyInitialized())S=ay(r,Yl(e));else{const x=e.serverCache.getNode();(0,k.hu)(x instanceof jt,"serverChildren would be complete if leaf node"),S=kE(r,x)}S=S,C=n.filter.updateFullNode(y,S,u)}else{const S=qt(t);let x=ly(r,S,e.serverCache);null==x&&e.serverCache.isCompleteForChild(S)&&(x=y.getImmediateChild(S)),C=null!=x?n.filter.updateChild(y,S,x,Sn(t),g,u):e.eventCache.getNode().hasChild(S)?n.filter.updateChild(y,S,jt.EMPTY_NODE,Sn(t),g,u):y,C.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=ay(r,Yl(e)),c.isLeafNode()&&(C=n.filter.updateFullNode(C,c,u)))}return c=e.serverCache.isFullyInitialized()||null!=uy(r,nn()),Og(e,C,c,n.filter.filtersNodes())}}(n,e,C.path,r,o,u):function(n,e,t,r,o,u,c){if(null!=uy(o,t))return e;const g=e.serverCache.isFiltered(),y=e.serverCache;if(null!=r.value){if(Jt(t)&&y.isFullyInitialized()||y.isCompleteForPath(t))return Cf(n,e,t,y.getNode().getChild(t),o,u,g,c);if(Jt(t)){let C=new Zn(null);return y.getNode().forEachChild(pa,(S,x)=>{C=C.set(new Cn(S),x)}),CT(n,e,t,C,o,u,g,c)}return e}{let C=new Zn(null);return r.foreach((S,x)=>{const O=Hn(t,S);y.isCompleteForPath(O)&&(C=C.set(S,y.getNode().getChild(O)))}),CT(n,e,t,C,o,u,g,c)}}(n,e,C.path,C.affectedTree,r,o,u)}else{if(t.type!==Ws.LISTEN_COMPLETE)throw(0,k.g5)("Unknown operation type: "+t.type);c=function(n,e,t,r,o){const u=e.serverCache;return cy(n,ME(e,u.getNode(),u.isFullyInitialized()||Jt(t),u.isFiltered()),t,r,xR,o)}(n,e,t.path,r,u)}const y=u.getChanges();return function(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const o=r.getNode().isLeafNode()||r.getNode().isEmpty(),u=ry(n);(t.length>0||!n.eventCache.isFullyInitialized()||o&&!r.getNode().equals(u)||!r.getNode().getPriority().equals(u.getPriority()))&&t.push(uT(ry(e)))}}(e,c,y),{viewCache:c,changes:y}}(n.processor_,o,e,t,r);return function(n,e){(0,k.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,u.viewCache),(0,k.hu)(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=u.viewCache,GE(n,u.changes,u.viewCache.eventCache.getNode(),null)}function GE(n,e,t,r){return function(n,e,t,r){const o=[],u=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&u.push(function(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),wf(n,o,"child_removed",e,r,t),wf(n,o,"child_added",e,r,t),wf(n,o,"child_moved",u,r,t),wf(n,o,"child_changed",e,r,t),wf(n,o,"value",e,r,t),o}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let bf,KE;class qE{constructor(){this.views=new Map}}function fy(n,e,t,r){const o=e.source.queryId;if(null!==o){const u=n.views.get(o);return(0,k.hu)(null!=u,"SyncTree gave us an op for an invalid query."),ST(u,e,t,r)}{let u=[];for(const c of n.views.values())u=u.concat(ST(c,e,t,r));return u}}function py(n,e,t,r,o){const c=n.views.get(e._queryIdentifier);if(!c){let g=ay(t,o?r:null),y=!1;g?y=!0:r instanceof jt?(g=kE(t,r),y=!1):(g=jt.EMPTY_NODE,y=!1);const C=NE(new Kl(g,y,!1),new Kl(r,o,!1));return new PR(e,C)}return c}function WE(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Gu(n,e){let t=null;for(const r of n.views.values())t=t||DT(r,e);return t}function zE(n,e){return e._queryParams.loadsAllData()?Lg(n):n.views.get(e._queryIdentifier)}function ZE(n,e){return null!=zE(n,e)}function qu(n){return null!=Lg(n)}function Lg(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let NT=1;class MT{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Zn(null),this.pendingWriteTree_={visibleWrites:_a.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Sr(n,e,t,r,o){return function(n,e,t,r,o){(0,k.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:o}),o&&(n.visibleWrites=Ef(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,o),o?Rd(n,new Zl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Xl(n,e,t=!1){const r=function(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function(n,e){const t=n.allWrites.findIndex(g=>g.writeId===e);(0,k.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let o=r.visible,u=!1,c=n.allWrites.length-1;for(;o&&c>=0;){const g=n.allWrites[c];g.visible&&(c>=t&&pT(g,r.path)?o=!1:qs(r.path,g.path)&&(u=!0)),c--}return!!o&&(u?(function(n){n.visibleWrites=xd(n.allWrites,TR,nn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=CR(n.visibleWrites,r.path):si(r.children,y=>{n.visibleWrites=CR(n.visibleWrites,Hn(r.path,y))}),!0))}(n.pendingWriteTree_,e)){let u=new Zn(null);return null!=r.snap?u=u.set(nn(),!0):si(r.children,c=>{u=u.set(new Cn(c),!0)}),Rd(n,new Pg(r.path,u,t))}return[]}function Vg(n,e,t){return Rd(n,new Zl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function gy(n,e,t,r){const o=e._path,u=n.syncPointTree_.get(o);let c=[];if(u&&("default"===e._queryIdentifier||ZE(u,e))){const g=function(n,e,t,r){const o=e._queryIdentifier,u=[];let c=[];const g=qu(n);if("default"===o)for(const[y,C]of n.views.entries())c=c.concat(HE(C,t,r)),hy(C)&&(n.views.delete(y),C.query._queryParams.loadsAllData()||u.push(C.query));else{const y=n.views.get(o);y&&(c=c.concat(HE(y,t,r)),hy(y)&&(n.views.delete(o),y.query._queryParams.loadsAllData()||u.push(y.query)))}return g&&!qu(n)&&u.push(new((0,k.hu)(bf,"Reference.ts has not been loaded"),bf)(e._repo,e._path)),{removed:u,events:c}}(u,e,t,r);(function(n){return 0===n.views.size})(u)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const y=g.removed;c=g.events;const C=-1!==y.findIndex(x=>x._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(o,(x,O)=>qu(O));if(C&&!S){const x=n.syncPointTree_.subtree(o);if(!x.isEmpty()){const O=function(n){return n.fold((e,t,r)=>{if(t&&qu(t))return[Lg(t)];{let o=[];return t&&(o=WE(t)),si(r,(u,c)=>{o=o.concat(c)}),o}})}(x);for(let $=0;$<O.length;++$){const Z=O[$],ye=Z.query,xe=my(n,Z);n.listenProvider_.startListening(Tf(ye),zs(n,ye),xe.hashFn,xe.onComplete)}}}if(!S&&y.length>0&&!r)if(C){const x=null;n.listenProvider_.stopListening(Tf(e),x)}else y.forEach(x=>{const O=n.queryToTagMap.get(_y(x));n.listenProvider_.stopListening(Tf(x),O)});!function(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const o=_y(r),u=n.queryToTagMap.get(o);n.queryToTagMap.delete(o),n.tagToQueryMap.delete(u)}}}(n,y)}return c}function FT(n,e,t){const r=e._path;let o=null,u=!1;n.syncPointTree_.foreachOnPath(r,(x,O)=>{const $=ts(x,r);o=o||Gu(O,$),u=u||qu(O)});let g,c=n.syncPointTree_.get(r);c?(u=u||qu(c),o=o||Gu(c,nn())):(c=new qE,n.syncPointTree_=n.syncPointTree_.set(r,c)),null!=o?g=!0:(g=!1,o=jt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((O,$)=>{const Z=Gu($,nn());Z&&(o=o.updateImmediateChild(O,Z))}));const y=ZE(c,e);if(!y&&!e._queryParams.loadsAllData()){const x=_y(e);(0,k.hu)(!n.queryToTagMap.has(x),"View does not exist, but we have a tag");const O=NT++;n.queryToTagMap.set(x,O),n.tagToQueryMap.set(O,x)}let S=function(n,e,t,r,o,u){const c=py(n,e,r,o,u);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function(n,e){n.eventRegistrations_.push(e)}(c,t),function(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Fn,(u,c)=>{r.push(ff(u,c))}),t.isFullyInitialized()&&r.push(uT(t.getNode())),GE(n,r,t.getNode(),e)}(c,t)}(c,e,t,sy(n.pendingWriteTree_,r),o,g);if(!y&&!u){const x=zE(c,e);S=S.concat(function(n,e,t){const r=e._path,o=zs(n,e),u=my(n,t),c=n.listenProvider_.startListening(Tf(e),o,u.hashFn,u.onComplete),g=n.syncPointTree_.subtree(r);if(o)(0,k.hu)(!qu(g.value),"If we're adding a query, it shouldn't be shadowed");else{const y=g.fold((C,S,x)=>{if(!Jt(C)&&S&&qu(S))return[Lg(S).query];{let O=[];return S&&(O=O.concat(WE(S).map($=>$.query))),si(x,($,Z)=>{O=O.concat(Z)}),O}});for(let C=0;C<y.length;++C){const S=y[C];n.listenProvider_.stopListening(Tf(S),zs(n,S))}}return c}(n,e,x))}return S}function Ug(n,e,t){const o=n.pendingWriteTree_,u=n.syncPointTree_.findOnPath(e,(c,g)=>{const C=Gu(g,ts(c,e));if(C)return C});return gT(o,e,u,t,!0)}function Rd(n,e){return $R(e,n.syncPointTree_,null,sy(n.pendingWriteTree_,nn()))}function $R(n,e,t,r){if(Jt(n.path))return YE(n,e,t,r);{const o=e.get(nn());null==t&&null!=o&&(t=Gu(o,nn()));let u=[];const c=qt(n.path),g=n.operationForChild(c),y=e.children.get(c);if(y&&g){const C=t?t.getImmediateChild(c):null,S=wT(r,c);u=u.concat($R(g,y,C,S))}return o&&(u=u.concat(fy(o,n,r,t))),u}}function YE(n,e,t,r){const o=e.get(nn());null==t&&null!=o&&(t=Gu(o,nn()));let u=[];return e.children.inorderTraversal((c,g)=>{const y=t?t.getImmediateChild(c):null,C=wT(r,c),S=n.operationForChild(c);S&&(u=u.concat(YE(S,g,y,C)))}),o&&(u=u.concat(fy(o,n,r,t))),u}function my(n,e){const t=e.query,r=zs(n,t);return{hashFn:()=>(function(n){return n.viewCache_.serverCache.getNode()}(e)||jt.EMPTY_NODE).hash(),onComplete:o=>{if("ok"===o)return r?function(n,e,t){const r=QE(n,t);if(r){const o=Mo(r),u=o.path,c=o.queryId,g=ts(u,e);return Zs(n,u,new vf(ny(c),g))}return[]}(n,t._path,r):function(n,e){return Rd(n,new vf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const u=function(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(o,t);return gy(n,t,null,u)}}}}function zs(n,e){const t=_y(e);return n.queryToTagMap.get(t)}function _y(n){return n._path.toString()+"$"+n._queryIdentifier}function QE(n,e){return n.tagToQueryMap.get(e)}function Mo(n){const e=n.indexOf("$");return(0,k.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Cn(n.substr(0,e))}}function Zs(n,e,t){const r=n.syncPointTree_.get(e);return(0,k.hu)(r,"Missing sync point for query tag that we're tracking"),fy(r,t,sy(n.pendingWriteTree_,e),null)}function Tf(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new((0,k.hu)(KE,"Reference.ts has not been loaded"),KE)(n._repo,n._path):n}class JE{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new JE(t)}node(){return this.node_}}class XE{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Hn(this.path_,e);return new XE(this.syncTree_,t)}node(){return Ug(this.syncTree_,this.path_)}}const Df=function(n,e,t){return n&&"object"==typeof n?((0,k.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?qR(n[".sv"],e,t):"object"==typeof n[".sv"]?VT(n[".sv"],e):void(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},qR=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:(0,k.hu)(!1,"Unexpected server value: "+n)}},VT=function(n,e,t){n.hasOwnProperty("increment")||(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,k.hu)(!1,"Unexpected increment value: "+r);const o=e.node();if((0,k.hu)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;const c=o.getValue();return"number"!=typeof c?r:c+r},UT=function(n,e,t,r){return vy(e,new XE(t,n),r)},yy=function(n,e,t){return vy(n,new JE(e),t)};function vy(n,e,t){const r=n.getPriority().val(),o=Df(r,e.getImmediateChild(".priority"),t);let u;if(n.isLeafNode()){const c=n,g=Df(c.getValue(),e,t);return g!==c.getValue()||o!==c.getPriority().val()?new df(g,yr(o)):n}{const c=n;return u=c,o!==c.getPriority().val()&&(u=u.updatePriority(new df(o))),c.forEachChild(Fn,(g,y)=>{const C=vy(y,e.getImmediateChild(g),t);C!==y&&(u=u.updateImmediateChild(g,C))}),u}}class Sf{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function wy(n,e){let t=e instanceof Cn?e:new Cn(e),r=n,o=qt(t);for(;null!==o;){const u=(0,k.DV)(r.node.children,o)||{children:{},childCount:0};r=new Sf(o,r,u),t=Sn(t),o=qt(t)}return r}function ec(n){return n.node.value}function Ey(n,e){n.node.value=e,Iy(n)}function Cy(n){return n.node.childCount>0}function Af(n,e){si(n.node.children,(t,r)=>{e(new Sf(t,n,r))})}function t0(n,e,t,r){t&&!r&&e(n),Af(n,o=>{t0(o,e,!0,r)}),t&&r&&e(n)}function xf(n){return new Cn(null===n.parent?n.name:xf(n.parent)+"/"+n.name)}function Iy(n){null!==n.parent&&function(n,e,t){const r=function(n){return void 0===ec(n)&&!Cy(n)}(t),o=(0,k.r3)(n.node.children,e);r&&o?(delete n.node.children[e],n.node.childCount--,Iy(n)):!r&&!o&&(n.node.children[e]=t.node,n.node.childCount++,Iy(n))}(n.parent,n.name,n)}const $T=/[\[\].#$\/\u0000-\u001F\u007F]/,HT=/[\[\].#$\u0000-\u001F\u007F]/,n0=10485760,Ty=function(n){return"string"==typeof n&&0!==n.length&&!$T.test(n)},GT=function(n){return"string"==typeof n&&0!==n.length&&!HT.test(n)},Bg=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!nf(n)||n&&"object"==typeof n&&(0,k.r3)(n,".sv")},tu=function(n,e,t,r){r&&void 0===e||jg((0,k.gK)(n,"value"),e,t)},jg=function(n,e,t){const r=t instanceof Cn?new lR(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+bd(r));if("function"==typeof e)throw new Error(n+"contains a function "+bd(r)+" with contents = "+e.toString());if(nf(e))throw new Error(n+"contains "+e.toString()+" "+bd(r));if("string"==typeof e&&e.length>n0/3&&(0,k.ug)(e)>n0)throw new Error(n+"contains a string greater than "+n0+" utf8 bytes "+bd(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let o=!1,u=!1;if(si(e,(c,g)=>{if(".value"===c)o=!0;else if(".priority"!==c&&".sv"!==c&&(u=!0,!Ty(c)))throw new Error(n+" contains an invalid key ("+c+") "+bd(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.ug)(e),QI(n)})(r,c),jg(n,g,r),function(n){const e=n.parts_.pop();n.byteLength_-=(0,k.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),o&&u)throw new Error(n+' contains ".value" child '+bd(r)+" in addition to actual children.")}},qT=function(n,e,t,r){if(r&&void 0===e)return;const o=(0,k.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");const u=[];si(e,(c,g)=>{const y=new Cn(c);if(jg(o,g,Hn(t,y)),".priority"===Y_(y)&&!Bg(g))throw new Error(o+"contains an invalid value for '"+y.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");u.push(y)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const u=lf(r);for(let c=0;c<u.length;c++)if((".priority"!==u[c]||c!==u.length-1)&&!Ty(u[c]))throw new Error(n+"contains an invalid key ("+u[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(YI);let o=null;for(t=0;t<e.length;t++){if(r=e[t],null!==o&&qs(o,r))throw new Error(n+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(o,u)},r0=function(n,e,t){if(!t||void 0!==e){if(nf(e))throw new Error((0,k.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Bg(e))throw new Error((0,k.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},$g=function(n,e,t,r){if(!(r&&void 0===t||Ty(t)))throw new Error((0,k.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Hg=function(n,e,t,r){if(!(r&&void 0===t||GT(t)))throw new Error((0,k.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Po=function(n,e){if(".info"===qt(e))throw new Error(n+" failed = Can't modify data under /.info/")},WT=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Ty(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),GT(n)}(t))throw new Error((0,k.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class KR{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Dy(n,e){let t=null;for(let r=0;r<e.length;r++){const o=e[r],u=o.getPath();null!==t&&!$l(u,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:u}),t.events.push(o)}t&&n.eventLists_.push(t)}function s0(n,e,t){Dy(n,t),o0(n,r=>$l(r,e))}function Ks(n,e,t){Dy(n,t),o0(n,r=>qs(r,e)||qs(e,r))}function o0(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const o=n.eventLists_[r];o&&(e(o.path)?(zT(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function zT(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();tf&&zn("event: "+t.toString()),wd(r)}}}const a0="repo_interrupt";class KT{constructor(e,t,r,o){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new KR,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Hu(),this.transactionQueueTree_=new Sf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function u0(n){const t=n.infoData_.getNode(new Cn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Rf(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:u0(n)})}function Sy(n,e,t,r,o){n.dataUpdateCount++;const u=new Cn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(o)if(r){const y=(0,k.UI)(t,C=>yr(C));c=function(n,e,t,r){const o=QE(n,r);if(o){const u=Mo(o),c=u.path,g=u.queryId,y=ts(c,e),C=Zn.fromObject(t);return Zs(n,c,new Sd(ny(g),y,C))}return[]}(n.serverSyncTree_,u,y,o)}else{const y=yr(t);c=function(n,e,t,r){const o=QE(n,r);if(null!=o){const u=Mo(o),c=u.path,g=u.queryId,y=ts(c,e);return Zs(n,c,new Zl(ny(g),y,t))}return[]}(n.serverSyncTree_,u,y,o)}else if(r){const y=(0,k.UI)(t,C=>yr(C));c=function(n,e,t){const r=Zn.fromObject(t);return Rd(n,new Sd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,u,y)}else{const y=yr(t);c=Vg(n.serverSyncTree_,u,y)}let g=u;c.length>0&&(g=tc(n,u)),Ks(n.eventQueue_,g,c)}function l0(n,e){c0(n,"connected",e),!1===e&&function(n){Mf(n,"onDisconnectEvents");const e=Rf(n),t=Hu();zl(n.onDisconnect_,nn(),(o,u)=>{const c=UT(o,u,n.serverSyncTree_,e);ma(t,o,c)});let r=[];zl(t,nn(),(o,u)=>{r=r.concat(Vg(n.serverSyncTree_,o,u));const c=y0(n,o);tc(n,c)}),n.onDisconnect_=Hu(),Ks(n.eventQueue_,nn(),r)}(n)}function c0(n,e,t){const r=new Cn("/.info/"+e),o=yr(t);n.infoData_.updateSnapshot(r,o);const u=Vg(n.infoSyncTree_,r,o);Ks(n.eventQueue_,r,u)}function Ay(n){return n.nextWriteId_++}function QT(n,e,t,r,o){Mf(n,"set",{path:e.toString(),value:t,priority:r});const u=Rf(n),c=yr(t,r),g=Ug(n.serverSyncTree_,e),y=yy(c,g,u),C=Ay(n),S=Sr(n.serverSyncTree_,e,y,C,!0);Dy(n.eventQueue_,S),n.server_.put(e.toString(),c.val(!0),(O,$)=>{const Z="ok"===O;Z||vi("set at "+e+" failed: "+O);const ye=Xl(n.serverSyncTree_,C,!Z);Ks(n.eventQueue_,e,ye),va(0,o,O,$)});const x=y0(n,e);tc(n,x),Ks(n.eventQueue_,x,[])}function JT(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,o)=>{"ok"===r&&Wl(n.onDisconnect_,e),va(0,t,r,o)})}function h0(n,e,t,r){const o=yr(t);n.server_.onDisconnectPut(e.toString(),o.val(!0),(u,c)=>{"ok"===u&&ma(n.onDisconnect_,e,o),va(0,r,u,c)})}function f0(n,e,t){let r;r=".info"===qt(e._path)?gy(n.infoSyncTree_,e,t):gy(n.serverSyncTree_,e,t),s0(n.eventQueue_,e._path,r)}function XT(n){n.persistentConnection_&&n.persistentConnection_.interrupt(a0)}function Mf(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),zn(t,...e)}function va(n,e,t,r){e&&wd(()=>{if("ok"===t)e(null);else{const o=(t||"error").toUpperCase();let u=o;r&&(u+=": "+r);const c=new Error(u);c.code=o,e(c)}})}function ir(n,e,t){return Ug(n.serverSyncTree_,e,t)||jt.EMPTY_NODE}function p0(n,e=n.transactionQueueTree_){if(e||Gg(n,e),ec(e)){const t=m0(n,e);(0,k.hu)(t.length>0,"Sending zero length transaction queue"),t.every(o=>0===o.status)&&function(n,e,t){const r=t.map(C=>C.currentWriteId),o=ir(n,e,r);let u=o;const c=o.hash();for(let C=0;C<t.length;C++){const S=t[C];(0,k.hu)(0===S.status,"tryToSendTransactionQueue_: items in queue should all be run."),S.status=1,S.retryCount++;const x=ts(e,S.path);u=u.updateChild(x,S.currentOutputSnapshotRaw)}const g=u.val(!0),y=e;n.server_.put(y.toString(),g,C=>{Mf(n,"transaction put response",{path:y.toString(),status:C});let S=[];if("ok"===C){const x=[];for(let O=0;O<t.length;O++)t[O].status=2,S=S.concat(Xl(n.serverSyncTree_,t[O].currentWriteId)),t[O].onComplete&&x.push(()=>t[O].onComplete(null,!0,t[O].currentOutputSnapshotResolved)),t[O].unwatcher();Gg(n,wy(n.transactionQueueTree_,e)),p0(n,n.transactionQueueTree_),Ks(n.eventQueue_,e,S);for(let O=0;O<x.length;O++)wd(x[O])}else{if("datastale"===C)for(let x=0;x<t.length;x++)t[x].status=3===t[x].status?4:0;else{vi("transaction at "+y.toString()+" failed: "+C);for(let x=0;x<t.length;x++)t[x].status=4,t[x].abortReason=C}tc(n,e)}},c)}(n,xf(e),t)}else Cy(e)&&Af(e,t=>{p0(n,t)})}function tc(n,e){const t=g0(n,e),r=xf(t);return function(n,e,t){if(0===e.length)return;const r=[];let o=[];const c=e.filter(g=>0===g.status).map(g=>g.currentWriteId);for(let g=0;g<e.length;g++){const y=e[g],C=ts(t,y.path);let x,S=!1;if((0,k.hu)(null!==C,"rerunTransactionsUnderNode_: relativePath should not be null."),4===y.status)S=!0,x=y.abortReason,o=o.concat(Xl(n.serverSyncTree_,y.currentWriteId,!0));else if(0===y.status)if(y.retryCount>=25)S=!0,x="maxretry",o=o.concat(Xl(n.serverSyncTree_,y.currentWriteId,!0));else{const O=ir(n,y.path,c);y.currentInputSnapshot=O;const $=e[g].update(O.val());if(void 0!==$){jg("transaction failed: Data returned ",$,y.path);let Z=yr($);"object"==typeof $&&null!=$&&(0,k.r3)($,".priority")||(Z=Z.updatePriority(O.getPriority()));const xe=y.currentWriteId,pt=Rf(n),dt=yy(Z,O,pt);y.currentOutputSnapshotRaw=Z,y.currentOutputSnapshotResolved=dt,y.currentWriteId=Ay(n),c.splice(c.indexOf(xe),1),o=o.concat(Sr(n.serverSyncTree_,y.path,dt,y.currentWriteId,y.applyLocally)),o=o.concat(Xl(n.serverSyncTree_,xe,!0))}else S=!0,x="nodata",o=o.concat(Xl(n.serverSyncTree_,y.currentWriteId,!0))}Ks(n.eventQueue_,t,o),o=[],S&&(e[g].status=2,setTimeout(e[g].unwatcher,Math.floor(0)),e[g].onComplete&&r.push("nodata"===x?()=>e[g].onComplete(null,!1,e[g].currentInputSnapshot):()=>e[g].onComplete(new Error(x),!1,null)))}Gg(n,n.transactionQueueTree_);for(let g=0;g<r.length;g++)wd(r[g]);p0(n,n.transactionQueueTree_)}(n,m0(n,t),r),r}function g0(n,e){let t,r=n.transactionQueueTree_;for(t=qt(e);null!==t&&void 0===ec(r);)r=wy(r,t),t=qt(e=Sn(e));return r}function m0(n,e){const t=[];return _0(n,e,t),t.sort((r,o)=>r.order-o.order),t}function _0(n,e,t){const r=ec(e);if(r)for(let o=0;o<r.length;o++)t.push(r[o]);Af(e,o=>{_0(n,o,t)})}function Gg(n,e){const t=ec(e);if(t){let r=0;for(let o=0;o<t.length;o++)2!==t[o].status&&(t[r]=t[o],r++);t.length=r,Ey(e,t.length>0?t:void 0)}Af(e,r=>{Gg(n,r)})}function y0(n,e){const t=xf(g0(n,e)),r=wy(n.transactionQueueTree_,e);return function(n,e,t){let r=n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,o=>{v0(n,o)}),v0(n,r),t0(r,o=>{v0(n,o)}),t}function v0(n,e){const t=ec(e);if(t){const r=[];let o=[],u=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,k.hu)(u===c-1,"All SENT items should be at beginning of queue."),u=c,t[c].status=3,t[c].abortReason="set"):((0,k.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),o=o.concat(Xl(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===u?Ey(e,void 0):t.length=u+1,Ks(n.eventQueue_,xf(e),o);for(let c=0;c<r.length;c++)wd(r[c])}}const w0=function(n,e){const t=XR(n),r=t.namespace;return"firebase.com"===t.domain&&ha(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&ha("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&vi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new nE(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Cn(t.pathString)}},XR=function(n){let e="",t="",r="",o="",u="",c=!0,g="https",y=443;if("string"==typeof n){let C=n.indexOf("//");C>=0&&(g=n.substring(0,C-1),n=n.substring(C+2));let S=n.indexOf("/");-1===S&&(S=n.length);let x=n.indexOf("?");-1===x&&(x=n.length),e=n.substring(0,Math.min(S,x)),S<x&&(o=function(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let o=t[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch(u){}e+="/"+o}return e}(n.substring(S,x)));const O=function(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):vi(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,x)));C=e.indexOf(":"),C>=0?(c="https"===g||"wss"===g,y=parseInt(e.substring(C+1),10)):C=e.length;const $=e.slice(0,C);if("localhost"===$.toLowerCase())t="localhost";else if($.split(".").length<=2)t=$;else{const Z=e.indexOf(".");r=e.substring(0,Z).toLowerCase(),t=e.substring(Z+1),u=r}"ns"in O&&(u=O.ns)}return{host:e,port:y,domain:t,subdomain:r,secure:c,scheme:g,pathString:o,namespace:u}};class tD{constructor(e,t,r,o){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=o}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.Pz)(this.snapshot.exportVal())}}class Wg{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class E0{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class C0{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new k.BH;return JT(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Po("OnDisconnect.remove",this._path);const e=new k.BH;return h0(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Po("OnDisconnect.set",this._path),tu("OnDisconnect.set",e,this._path,!1);const t=new k.BH;return h0(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Po("OnDisconnect.setWithPriority",this._path),tu("OnDisconnect.setWithPriority",e,this._path,!1),r0("OnDisconnect.setWithPriority",t,!1);const r=new k.BH;return function(n,e,t,r,o){const u=yr(t,r);n.server_.onDisconnectPut(e.toString(),u.val(!0),(c,g)=>{"ok"===c&&ma(n.onDisconnect_,e,u),va(0,o,c,g)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Po("OnDisconnect.update",this._path),qT("OnDisconnect.update",e,this._path,!1);const t=new k.BH;return function(n,e,t,r){if((0,k.xb)(t))return zn("onDisconnect().update() called with empty data.  Don't do anything."),void va(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(o,u)=>{"ok"===o&&si(t,(c,g)=>{const y=yr(g);ma(n.onDisconnect_,Hn(e,c),y)}),va(0,r,o,u)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class is{constructor(e,t,r,o){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=o}get key(){return Jt(this._path)?null:Y_(this._path)}get ref(){return new ko(this._repo,this._path)}get _queryIdentifier(){const e=Mg(this._queryParams),t=zw(e);return"{}"===t?"default":t}get _queryObject(){return Mg(this._queryParams)}isEqual(e){if(!((e=(0,k.m9)(e))instanceof is))return!1;const t=this._repo===e._repo,r=$l(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function Ny(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Oo(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===pa){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Fi)throw new Error(r);if("string"!=typeof e)throw new Error(o)}if(n.hasEnd()){if(n.getIndexEndName()!==fa)throw new Error(r);if("string"!=typeof t)throw new Error(o)}}else if(n.getIndex()===Fn){if(null!=e&&!Bg(e)||null!=t&&!Bg(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,k.hu)(n.getIndex()instanceof sT||n.getIndex()===J_,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function nc(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ko extends is{constructor(e,t){super(e,t,new xg,!1)}get parent(){const e=KI(this._path);return null===e?null:new ko(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Md{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Cn(e),r=rc(this.ref,e);return new Md(this._node.getChild(t),r,Fn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,o)=>e(new Md(o,rc(this.ref,r),Fn)))}hasChild(e){const t=new Cn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function nD(n,e){return(n=(0,k.m9)(n))._checkNotDeleted("ref"),void 0!==e?rc(n._root,e):n._root}function b0(n,e){(n=(0,k.m9)(n))._checkNotDeleted("refFromURL");const t=w0(e,n._repo.repoInfo_.nodeAdmin);WT("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&ha("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),nD(n,t.path.toString())}function rc(n,e){return null===qt((n=(0,k.m9)(n))._path)?((t=e)&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Hg("child","path",t,!1)):Hg("child","path",e,!1),new ko(n._repo,Hn(n._path,e));var t}function I0(n,e){n=(0,k.m9)(n),Po("set",n._path),tu("set",e,n._path,!1);const t=new k.BH;return QT(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function w1(n,e){qT("update",e,n._path,!1);const t=new k.BH;return function(n,e,t,r){Mf(n,"update",{path:e.toString(),value:t});let o=!0;const u=Rf(n),c={};if(si(t,(g,y)=>{o=!1,c[g]=UT(Hn(e,g),yr(y),n.serverSyncTree_,u)}),o)zn("update() called with empty data.  Don't do anything."),va(0,r,"ok",void 0);else{const g=Ay(n),y=function(n,e,t,r){!function(n,e,t,r){(0,k.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=hT(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const o=Zn.fromObject(t);return Rd(n,new Sd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,o))}(n.serverSyncTree_,e,c,g);Dy(n.eventQueue_,y),n.server_.merge(e.toString(),t,(C,S)=>{const x="ok"===C;x||vi("update at "+e+" failed: "+C);const O=Xl(n.serverSyncTree_,g,!x),$=O.length>0?tc(n,e):e;Ks(n.eventQueue_,$,O),va(0,r,C,S)}),si(t,C=>{const S=y0(n,Hn(e,C));tc(n,S)}),Ks(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function E1(n){return function(n,e){const t=function(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(C,S)=>{const x=ts(C,t);r=r||Gu(S,x)});let o=n.syncPointTree_.get(t);o?r=r||Gu(o,nn()):(o=new qE,n.syncPointTree_=n.syncPointTree_.set(t,o));const u=null!=r,c=u?new Kl(r,!0,!1):null;return function(n){return ry(n.viewCache_)}(py(o,e,sy(n.pendingWriteTree_,e._path),u?c.getNode():jt.EMPTY_NODE,u))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const o=yr(r).withIndex(e._queryParams.getIndex()),u=Vg(n.serverSyncTree_,e._path,o);return s0(n.eventQueue_,e._path,u),Promise.resolve(o)},r=>(Mf(n,"get for query "+(0,k.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,k.m9)(n))._repo,n).then(e=>new Md(e,new ko(n._repo,n._path),n._queryParams.getIndex()))}class T0{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new tD("value",this,new Md(e.snapshotNode,new ko(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Wg(this,e,t):null}matches(e){return e instanceof T0&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class zg{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Wg(this,e,t):null}createEvent(e,t){(0,k.hu)(null!=e.childName,"Child events should have a childName.");const r=rc(new ko(t._repo,t._path),e.childName),o=t._queryParams.getIndex();return new tD(e.type,this,new Md(e.snapshotNode,r,o),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof zg&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function ic(n,e,t,r,o){let u;if("object"==typeof r&&(u=void 0,o=r),"function"==typeof r&&(u=r),o&&o.onlyOnce){const y=t,C=(S,x)=>{f0(n._repo,n,g),y(S,x)};C.userCallback=t.userCallback,C.context=t.context,t=C}const c=new E0(t,u||void 0),g="value"===e?new T0(c):new zg(e,c);return function(n,e,t){let r;r=".info"===qt(e._path)?FT(n.infoSyncTree_,e,t):FT(n.serverSyncTree_,e,t),s0(n.eventQueue_,e._path,r)}(n._repo,n,g),()=>f0(n._repo,n,g)}function D0(n,e,t,r){return ic(n,"value",e,t,r)}function iD(n,e,t,r){return ic(n,"child_added",e,t,r)}function S0(n,e,t,r){return ic(n,"child_changed",e,t,r)}function Pf(n,e,t,r){return ic(n,"child_moved",e,t,r)}function sD(n,e,t,r){return ic(n,"child_removed",e,t,r)}function oD(n,e,t){let r=null;const o=t?new E0(t):null;"value"===e?r=new T0(o):e&&(r=new zg(e,o)),f0(n._repo,n,r)}class wa{}class aD extends wa{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){tu("endAt",this._value,e._path,!0);const t=No(e._queryParams,this._value,this._key);if(nc(t),Oo(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new is(e._repo,e._path,t,e._orderByCalled)}}class uD extends wa{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){tu("endBefore",this._value,e._path,!1);const t=function(n,e,t){let r,o;return n.index_===pa?("string"==typeof e&&(e=X_(e)),o=No(n,e,t)):(r=null==t?Fi:X_(t),o=No(n,e,r)),o.endBeforeSet_=!0,o}(e._queryParams,this._value,this._key);if(nc(t),Oo(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new is(e._repo,e._path,t,e._orderByCalled)}}class lD extends wa{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){tu("startAt",this._value,e._path,!0);const t=AE(e._queryParams,this._value,this._key);if(nc(t),Oo(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new is(e._repo,e._path,t,e._orderByCalled)}}class sN extends wa{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){tu("startAfter",this._value,e._path,!1);const t=function(n,e,t){let r;if(n.index_===pa)"string"==typeof e&&(e=aT(e)),r=AE(n,e,t);else{let o;o=null==t?fa:aT(t),r=AE(n,e,o)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(nc(t),Oo(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new is(e._repo,e._path,t,e._orderByCalled)}}class oN extends wa{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new is(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class aN extends wa{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new is(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class uN extends wa{constructor(e){super(),this._path=e}_apply(e){Ny(e,"orderByChild");const t=new Cn(this._path);if(Jt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new sT(t),o=Yr(e._queryParams,r);return Oo(o),new is(e._repo,e._path,o,!0)}}class lN extends wa{_apply(e){Ny(e,"orderByKey");const t=Yr(e._queryParams,pa);return Oo(t),new is(e._repo,e._path,t,!0)}}class pD extends wa{_apply(e){Ny(e,"orderByPriority");const t=Yr(e._queryParams,Fn);return Oo(t),new is(e._repo,e._path,t,!0)}}class dN extends wa{_apply(e){Ny(e,"orderByValue");const t=Yr(e._queryParams,J_);return Oo(t),new is(e._repo,e._path,t,!0)}}class x0 extends wa{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(tu("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new aD(this._value,this._key)._apply(new lD(this._value,this._key)._apply(e))}}function Fo(n,...e){let t=(0,k.m9)(n);for(const r of e)t=r._apply(t);return t}(function(n){(0,k.hu)(!bf,"__referenceConstructor has already been defined"),bf=n})(ko),function(n){(0,k.hu)(!KE,"__referenceConstructor has already been defined"),KE=n}(ko);const R0={};function mD(n,e,t,r,o){let u=r||n.options.databaseURL;void 0===u&&(n.options.projectId||ha("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),zn("Using default host for project ",n.options.projectId),u=`${n.options.projectId}-default-rtdb.firebaseio.com`);let y,C,c=w0(u,o),g=c.repoInfo;"undefined"!=typeof process&&process.env&&(C=process.env.FIREBASE_DATABASE_EMULATOR_HOST),C?(y=!0,u=`http://${C}?ns=${g.namespace}`,c=w0(u,o),g=c.repoInfo):y=!c.repoInfo.secure;const S=o&&y?new Ul(Ul.OWNER):new RI(n.name,n.options,e);WT("Invalid Firebase Database URL",c),Jt(c.path)||ha("Database URL must point to the root of a Firebase Database (not including a child path).");const x=function(n,e,t,r){let o=R0[e.name];o||(o={},R0[e.name]=o);let u=o[n.toURLString()];return u&&ha("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new KT(n,false,t,r),o[n.toURLString()]=u,u}(g,n,S,new Yw(n.name,t));return new _D(x,n)}class _D{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,e,t){if(n.stats_=wg(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new rs(n.repoInfo_,(r,o,u,c)=>{Sy(n,r,o,u,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>l0(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new ju(n.repoInfo_,e,(r,o,u,c)=>{Sy(n,r,o,u,c)},r=>{l0(n,r)},r=>{!function(n,e){si(e,(t,r)=>{c0(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function(n,e){const t=n.toString();return rE[t]||(rE[t]=e()),rE[t]}(n.repoInfo_,()=>new lT(n.stats_,n.server_)),n.infoData_=new RE,n.infoSyncTree_=new MT({startListening:(r,o,u,c)=>{let g=[];const y=n.infoData_.getNode(r._path);return y.isEmpty()||(g=Vg(n.infoSyncTree_,r._path,y),setTimeout(()=>{c("ok")},0)),g},stopListening:()=>{}}),c0(n,"connected",!1),n.serverSyncTree_=new MT({startListening:(r,o,u,c)=>(n.server_.listen(r,u,o,(g,y)=>{const C=c(g,y);Ks(n.eventQueue_,r._path,C)}),[]),stopListening:(r,o)=>{n.server_.unlisten(r,o)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ko(this._repo,nn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,e){const t=R0[e];(!t||t[n.key]!==n)&&ha(`Database ${e}(${n.repoInfo_}) has already been deleted.`),XT(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ha("Cannot call "+e+" on a deleted database.")}}function CN(n,e){zx(n,e)}class vD{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}ju.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},ju.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},TI(ki.SDK_VERSION),(0,ki._registerComponent)(new ca.wA("database",(e,{instanceIdentifier:t})=>mD(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,ki.registerVersion)($x,"0.12.8",void 0),(0,ki.registerVersion)($x,"0.12.8","esm2017");const wD=new da.Yd("@firebase/database-compat"),ED=function(n){wD.warn("FIREBASE WARNING: "+n)};class ID{constructor(e){this._delegate=e}cancel(e){(0,k.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,k.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,k.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,k.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,k.Dv)("OnDisconnect.set",1,2,arguments.length),(0,k.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),o=>t(o)),r}setWithPriority(e,t,r){(0,k.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,k.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const o=this._delegate.setWithPriority(e,t);return r&&o.then(()=>r(null),u=>r(u)),o}update(e,t){if((0,k.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const o={};for(let u=0;u<e.length;++u)o[""+u]=e[u];e=o,ED("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,k.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),o=>t(o)),r}}class I1{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,k.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class sc{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,k.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,k.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,k.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,k.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,k.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Hg("DataSnapshot.child","path",e,!1),new sc(this._database,this._delegate.child(e))}hasChild(e){return(0,k.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Hg("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,k.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,k.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,k.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new sc(this._database,t)))}hasChildren(){return(0,k.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,k.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,k.Dv)("DataSnapshot.ref",0,0,arguments.length),new Lo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class vr{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,o){var u;(0,k.Dv)("Query.on",2,4,arguments.length),(0,k.Wj)("Query.on","callback",t,!1);const c=vr.getCancelAndContextArgs_("Query.on",r,o),g=(C,S)=>{t.call(c.context,new sc(this.database,C),S)};g.userCallback=t,g.context=c.context;const y=null===(u=c.cancel)||void 0===u?void 0:u.bind(c.context);switch(e){case"value":return D0(this._delegate,g,y),t;case"child_added":return iD(this._delegate,g,y),t;case"child_removed":return sD(this._delegate,g,y),t;case"child_changed":return S0(this._delegate,g,y),t;case"child_moved":return Pf(this._delegate,g,y),t;default:throw new Error((0,k.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,k.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,k.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,k.Wj)("Query.off","callback",t,!0),(0,k.lb)("Query.off","context",r,!0),t){const o=()=>{};o.userCallback=t,o.context=r,oD(this._delegate,e,o)}else oD(this._delegate,e)}get(){return E1(this._delegate).then(e=>new sc(this.database,e))}once(e,t,r,o){(0,k.Dv)("Query.once",1,4,arguments.length),(0,k.Wj)("Query.once","callback",t,!0);const u=vr.getCancelAndContextArgs_("Query.once",r,o),c=new k.BH,g=(C,S)=>{const x=new sc(this.database,C);t&&t.call(u.context,x,S),c.resolve(x)};g.userCallback=t,g.context=u.context;const y=C=>{u.cancel&&u.cancel.call(u.context,C),c.reject(C)};switch(e){case"value":D0(this._delegate,g,y,{onlyOnce:!0});break;case"child_added":iD(this._delegate,g,y,{onlyOnce:!0});break;case"child_removed":sD(this._delegate,g,y,{onlyOnce:!0});break;case"child_changed":S0(this._delegate,g,y,{onlyOnce:!0});break;case"child_moved":Pf(this._delegate,g,y,{onlyOnce:!0});break;default:throw new Error((0,k.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,k.Dv)("Query.limitToFirst",1,1,arguments.length),new vr(this.database,Fo(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new oN(n)}(e)))}limitToLast(e){return(0,k.Dv)("Query.limitToLast",1,1,arguments.length),new vr(this.database,Fo(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new aN(n)}(e)))}orderByChild(e){return(0,k.Dv)("Query.orderByChild",1,1,arguments.length),new vr(this.database,Fo(this._delegate,function(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Hg("orderByChild","path",n,!1),new uN(n)}(e)))}orderByKey(){return(0,k.Dv)("Query.orderByKey",0,0,arguments.length),new vr(this.database,Fo(this._delegate,new lN))}orderByPriority(){return(0,k.Dv)("Query.orderByPriority",0,0,arguments.length),new vr(this.database,Fo(this._delegate,new pD))}orderByValue(){return(0,k.Dv)("Query.orderByValue",0,0,arguments.length),new vr(this.database,Fo(this._delegate,new dN))}startAt(e=null,t){return(0,k.Dv)("Query.startAt",0,2,arguments.length),new vr(this.database,Fo(this._delegate,function(n=null,e){return $g("startAt","key",e,!0),new lD(n,e)}(e,t)))}startAfter(e=null,t){return(0,k.Dv)("Query.startAfter",0,2,arguments.length),new vr(this.database,Fo(this._delegate,function(n,e){return $g("startAfter","key",e,!0),new sN(n,e)}(e,t)))}endAt(e=null,t){return(0,k.Dv)("Query.endAt",0,2,arguments.length),new vr(this.database,Fo(this._delegate,function(n,e){return $g("endAt","key",e,!0),new aD(n,e)}(e,t)))}endBefore(e=null,t){return(0,k.Dv)("Query.endBefore",0,2,arguments.length),new vr(this.database,Fo(this._delegate,function(n,e){return $g("endBefore","key",e,!0),new uD(n,e)}(e,t)))}equalTo(e,t){return(0,k.Dv)("Query.equalTo",1,2,arguments.length),new vr(this.database,Fo(this._delegate,function(n,e){return $g("equalTo","key",e,!0),new x0(n,e)}(e,t)))}toString(){return(0,k.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,k.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,k.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof vr))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const o={cancel:void 0,context:void 0};if(t&&r)o.cancel=t,(0,k.Wj)(e,"cancel",o.cancel,!0),o.context=r,(0,k.lb)(e,"context",o.context,!0);else if(t)if("object"==typeof t&&null!==t)o.context=t;else{if("function"!=typeof t)throw new Error((0,k.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");o.cancel=t}return o}get ref(){return new Lo(this.database,new ko(this._delegate._repo,this._delegate._path))}}class Lo extends vr{constructor(e,t){super(e,new is(t._repo,t._path,new xg,!1)),this.database=e,this._delegate=t}getKey(){return(0,k.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,k.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Lo(this.database,rc(this._delegate,e))}getParent(){(0,k.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Lo(this.database,e):null}getRoot(){return(0,k.Dv)("Reference.root",0,0,arguments.length),new Lo(this.database,this._delegate.root)}set(e,t){(0,k.Dv)("Reference.set",1,2,arguments.length),(0,k.Wj)("Reference.set","onComplete",t,!0);const r=I0(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}update(e,t){if((0,k.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const o={};for(let u=0;u<e.length;++u)o[""+u]=e[u];e=o,ED("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Po("Reference.update",this._delegate._path),(0,k.Wj)("Reference.update","onComplete",t,!0);const r=w1(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}setWithPriority(e,t,r){(0,k.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,k.Wj)("Reference.setWithPriority","onComplete",r,!0);const o=function(n,e,t){if(Po("setWithPriority",n._path),tu("setWithPriority",e,n._path,!1),r0("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new k.BH;return QT(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&o.then(()=>r(null),u=>r(u)),o}remove(e){(0,k.Dv)("Reference.remove",0,1,arguments.length),(0,k.Wj)("Reference.remove","onComplete",e,!0);const t=function(n){return Po("remove",n._path),I0(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,k.Dv)("Reference.transaction",1,3,arguments.length),(0,k.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,k.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,k.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const o=function(n,e,t){var r;if(n=(0,k.m9)(n),Po("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const o=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,u=new k.BH,g=D0(n,()=>{});return function(n,e,t,r,o,u){Mf(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:Gx(),applyLocally:u,retryCount:0,unwatcher:o,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},g=ir(n,e,void 0);c.currentInputSnapshot=g;const y=c.update(g.val());if(void 0===y)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{jg("transaction failed: Data returned ",y,c.path),c.status=0;const C=wy(n.transactionQueueTree_,e),S=ec(C)||[];let x;S.push(c),Ey(C,S),"object"==typeof y&&null!==y&&(0,k.r3)(y,".priority")?(x=(0,k.DV)(y,".priority"),(0,k.hu)(Bg(x),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):x=(Ug(n.serverSyncTree_,e)||jt.EMPTY_NODE).getPriority().val();const O=Rf(n),$=yr(y,x),Z=yy($,g,O);c.currentOutputSnapshotRaw=$,c.currentOutputSnapshotResolved=Z,c.currentWriteId=Ay(n);const ye=Sr(n.serverSyncTree_,e,Z,c.currentWriteId,c.applyLocally);Ks(n.eventQueue_,e,ye),p0(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(y,C,S)=>{let x=null;y?u.reject(y):(x=new Md(S,new ko(n._repo,n._path),Fn),u.resolve(new vD(C,x)))},g,o),u.promise}(this._delegate,e,{applyLocally:r}).then(u=>new I1(u.committed,new sc(this.database,u.snapshot)));return t&&o.then(u=>t(null,u.committed,u.snapshot),u=>t(u,!1,null)),o}setPriority(e,t){(0,k.Dv)("Reference.setPriority",1,2,arguments.length),(0,k.Wj)("Reference.setPriority","onComplete",t,!0);const r=function(n,e){n=(0,k.m9)(n),Po("setPriority",n._path),r0("setPriority",e,!1);const t=new k.BH;return QT(n._repo,Hn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}push(e,t){(0,k.Dv)("Reference.push",0,2,arguments.length),(0,k.Wj)("Reference.push","onComplete",t,!0);const r=function(n,e){n=(0,k.m9)(n),Po("push",n._path),tu("push",e,n._path,!0);const t=u0(n._repo),r=DE(t),o=rc(n,r),u=rc(n,r);let c;return c=null!=e?I0(u,e).then(()=>u):Promise.resolve(u),o.then=c.then.bind(c),o.catch=c.then.bind(c,void 0),o}(this._delegate,e),o=r.then(c=>new Lo(this.database,c));t&&o.then(()=>t(null),c=>t(c));const u=new Lo(this.database,r);return u.then=o.then.bind(o),u.catch=o.catch.bind(o,void 0),u}onDisconnect(){return Po("Reference.onDisconnect",this._delegate._path),new ID(new C0(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Pd{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function(n,e,t,r={}){(n=(0,k.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&ha("Cannot call useEmulator() after instance has already been initialized.");const o=n._repoInternal;let u;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&ha('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new Ul(Ul.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,k.Sg)(r.mockUserToken,n.app.options.projectId);u=new Ul(c)}!function(n,e,t,r){n.repoInfo_=new nE(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(o,e,t,u)}(this._delegate,e,t,r)}ref(e){if((0,k.Dv)("database.ref",0,1,arguments.length),e instanceof Lo){const t=b0(this._delegate,e.toString());return new Lo(this,t)}{const t=nD(this._delegate,e);return new Lo(this,t)}}refFromURL(e){(0,k.Dv)("database.refFromURL",1,1,arguments.length);const r=b0(this._delegate,e);return new Lo(this,r)}goOffline(){return(0,k.Dv)("database.goOffline",0,0,arguments.length),function(n){(n=(0,k.m9)(n))._checkNotDeleted("goOffline"),XT(n._repo)}(this._delegate)}goOnline(){return(0,k.Dv)("database.goOnline",0,0,arguments.length),function(n){(n=(0,k.m9)(n))._checkNotDeleted("goOnline"),function(n){n.persistentConnection_&&n.persistentConnection_.resume(a0)}(n._repo)}(this._delegate)}}Pd.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:n=>function(n){return{".sv":{increment:n}}}(n)};var DN=Object.freeze({__proto__:null,initStandalone:function({app:n,url:e,version:t,customAuthImpl:r,namespace:o,nodeAdmin:u=!1}){TI(t);const c=new ca.zt("auth-internal",new ca.H0("database-standalone"));return c.setComponent(new ca.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Pd(mD(n,c,void 0,e,u),n),namespace:o}}});const kf=Pd.ServerValue;!function(n){n.INTERNAL.registerComponent(new ca.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),o=e.getProvider("database").getImmediate({identifier:t});return new Pd(o,r)},"PUBLIC").setServiceProps({Reference:Lo,Query:vr,Database:Pd,DataSnapshot:sc,enableLogging:CN,INTERNAL:DN,ServerValue:kf}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.8")}(II.Z);var Py=V(309),AN=V(7771),nu=V(8858);class TD extends Ri.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new T1(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,r=t?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,u=r.length;let c;if(this.closed)throw new xu.N;if(this.isStopped||this.hasError?c=p_.w.EMPTY:(this.observers.push(e),c=new nu.W(this,e)),o&&e.add(e=new Py.ht(e,o)),t)for(let g=0;g<u&&!e.closed;g++)e.next(r[g]);else for(let g=0;g<u&&!e.closed;g++)e.next(r[g].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),c}_getNow(){return(this.scheduler||AN.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,r=this._windowTime,o=this._events,u=o.length;let c=0;for(;c<u&&!(e-o[c].time<r);)c++;return u>t&&(c=Math.max(c,u-t)),c>0&&o.splice(0,c),o}}class T1{constructor(e,t){this.time=e,this.value=t}}function Zg(n,e,t){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},o=>o.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:r}){let o,c,u=0,g=!1,y=!1;return function(S){let x;u++,!o||g?(g=!1,o=new TD(n,e,r),x=o.subscribe(this),c=S.subscribe({next(O){o.next(O)},error(O){g=!0,o.error(O)},complete(){y=!0,c=void 0,o.complete()}}),y&&(c=void 0)):x=o.subscribe(this),this.add(()=>{u--,x.unsubscribe(),x=void 0,c&&!y&&t&&0===u&&(c.unsubscribe(),c=void 0,o=void 0)})}}(r))}function DD(n,e){return e?pr(()=>n,e):pr(()=>n)}var SD=V(2639);V(2329);const Yg=new Map,LN={activated:!1,tokenObservers:[]},ND={initialized:!1,enabled:!1};function Ar(n){return Yg.get(n)||LN}function Ts(n,e){Yg.set(n,e)}function oc(){return ND}class jN{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,we.Z)(function*(){t.stop();try{t.pending=new k.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new k.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ss=new k.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function PD(n){if(!Ar(n).activated)throw ss.create("use-before-activation",{appName:n.name})}function L0(n,e){return V0.apply(this,arguments)}function V0(){return(V0=(0,we.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const x=yield o.getHeartbeatsHeader();x&&(r["X-Firebase-Client"]=x)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,g;try{c=yield fetch(n,u)}catch(x){throw ss.create("fetch-network-error",{originalErrorMessage:x.message})}if(200!==c.status)throw ss.create("fetch-status-error",{httpStatus:c.status});try{g=yield c.json()}catch(x){throw ss.create("fetch-parse-error",{originalErrorMessage:x.message})}const y=g.ttl.match(/^([\d.]+)(s)$/);if(!y||!y[2]||isNaN(Number(y[1])))throw ss.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const C=1e3*Number(y[1]),S=Date.now();return{token:g.attestationToken,expireTimeMillis:S+C,issuedAtTimeMillis:S}})).apply(this,arguments)}function Od(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const Ly="firebase-app-check-store";let kd=null;function FD(){return kd||(kd=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(ss.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{const o=r.target.result;switch(r.oldVersion){case 0:o.createObjectStore(Ly,{keyPath:"compositeKey"})}}}catch(t){e(ss.create("storage-open",{originalErrorMessage:t.message}))}}),kd)}function Vy(){return(Vy=(0,we.Z)(function*(n,e){const r=(yield FD()).transaction(Ly,"readwrite"),u=r.objectStore(Ly).put({compositeKey:n,value:e});return new Promise((c,g)=>{u.onsuccess=y=>{c()},r.onerror=y=>{var C;g(ss.create("storage-set",{originalErrorMessage:null===(C=y.target.error)||void 0===C?void 0:C.message}))}})})).apply(this,arguments)}const Qg=new da.Yd("@firebase/app-check");function Jg(n,e){return(0,k.hl)()?function(n,e){return function(n,e){return Vy.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Qg.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function bn(){return oc().enabled}function Wu(){return uc.apply(this,arguments)}function uc(){return(uc=(0,we.Z)(function*(){const n=oc();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const k1={error:"UNKNOWN_ERROR"};function Ft(n){return k.US.encodeString(JSON.stringify(n),!1)}function os(n){return em.apply(this,arguments)}function em(){return(em=(0,we.Z)(function*(n,e=!1){const t=n.app;PD(t);const r=Ar(t);let u,o=r.token;if(!o){const y=yield r.cachedTokenPromise;y&&Uy(y)&&(o=y)}if(!e&&o&&Uy(o))return{token:o.token};let g,c=!1;if(bn()){r.exchangeTokenPromise||(r.exchangeTokenPromise=L0(Od(t,yield Wu()),n.heartbeatServiceProvider).then(C=>(r.exchangeTokenPromise=void 0,C)),c=!0);const y=yield r.exchangeTokenPromise;return yield Jg(t,y),Ts(t,Object.assign(Object.assign({},r),{token:y})),{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(y=>(r.exchangeTokenPromise=void 0,y)),c=!0),o=yield r.exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?Qg.warn(y.message):Qg.error(y),u=y}return o?(g={token:o.token},Ts(t,Object.assign(Object.assign({},r),{token:o})),yield Jg(t,o)):g=ZN(u),c&&zN(t,g),g})).apply(this,arguments)}function jD(n,e){const t=Ar(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ts(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function H0(n){const{app:e}=n,t=Ar(e);let r=t.tokenRefresher;r||(r=function(n){const{app:e}=n;return new jN((0,we.Z)(function*(){let r;if(r=Ar(e).token?yield os(n,!0):yield os(n),r.error)throw r.error}),()=>!0,()=>{const t=Ar(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ts(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function zN(n,e){const t=Ar(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function Uy(n){return n.expireTimeMillis-Date.now()>0}function ZN(n){return{token:Ft(k1),error:n}}class Vo{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ar(this.app);for(const t of e)jD(this.app,t.next);return Promise.resolve()}}const QN="app-check-internal";(0,ki._registerComponent)(new ca.wA("app-check",n=>function(n,e){return new Vo(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(QN).initialize()})),(0,ki._registerComponent)(new ca.wA(QN,n=>function(n){return{getToken:e=>os(n,e),addTokenListener:e=>function(n,e,t,r){const{app:o}=n,u=Ar(o),c={next:t,error:r,type:e};if(Ts(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&Uy(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),H0(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>H0(n))}(n,"INTERNAL",e),removeTokenListener:e=>jD(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ki.registerVersion)("@firebase/app-check","0.5.6");class sm{constructor(){return(0,dn.vb)("app-check")}}"undefined"!=typeof window&&window;var om=V(7841);const Q0=new h.OlP("angularfire2.auth.use-emulator"),$y=new h.OlP("angularfire2.auth.settings"),am=new h.OlP("angularfire2.auth.tenant-id"),J0=new h.OlP("angularfire2.auth.langugage-code"),YD=new h.OlP("angularfire2.auth.use-device-language"),X0=new h.OlP("angularfire.auth.persistence"),eC=(n,e,t,r,o,u,c,g)=>(0,_r.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=o,u&&y.useDeviceLanguage(),c)for(const[C,S]of Object.entries(c))y.settings[C]=S;return g&&y.setPersistence(g),y},[t,r,o,u,c,g]);let Hy=(()=>{class n{constructor(t,r,o,u,c,g,y,C,S,x,O,$){const Z=new Ri.xQ,ye=(0,at.of)(void 0).pipe((0,Py.QV)(c.outsideAngular),pr(()=>u.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,3259)))),(0,St.U)(()=>(0,_r.on)(t,u,r)),(0,St.U)(xe=>eC(xe,u,g,C,S,x,y,O)),Zg({bufferSize:1,refCount:!1}));if(sl(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,at.of)(null);else{ye.pipe($n()).subscribe();const pt=ye.pipe(pr(rt=>rt.getRedirectResult().then(Wt=>Wt,()=>null)),dn.iC,Zg({bufferSize:1,refCount:!1})),dt=ye.pipe(pr(rt=>new jn.y(Wt=>({unsubscribe:u.runOutsideAngular(()=>rt.onAuthStateChanged(rn=>Wt.next(rn),rn=>Wt.error(rn),()=>Wt.complete()))})))),et=ye.pipe(pr(rt=>new jn.y(Wt=>({unsubscribe:u.runOutsideAngular(()=>rt.onIdTokenChanged(rn=>Wt.next(rn),rn=>Wt.error(rn),()=>Wt.complete()))}))));this.authState=pt.pipe(DD(dt),(0,SD.R)(c.outsideAngular),(0,Py.QV)(c.insideAngular)),this.user=pt.pipe(DD(et),(0,SD.R)(c.outsideAngular),(0,Py.QV)(c.insideAngular)),this.idToken=this.user.pipe(pr(rt=>rt?(0,Gt.D)(rt.getIdToken()):(0,at.of)(null))),this.idTokenResult=this.user.pipe(pr(rt=>rt?(0,Gt.D)(rt.getIdTokenResult()):(0,at.of)(null))),this.credential=(0,H_.T)(pt,Z,this.authState.pipe(Mi(rt=>!rt))).pipe((0,St.U)(rt=>(null==rt?void 0:rt.user)?rt:null),(0,SD.R)(c.outsideAngular),(0,Py.QV)(c.insideAngular))}return(0,_r.pX)(this,ye,u,{spy:{apply:(xe,pt,dt)=>{(xe.startsWith("signIn")||xe.startsWith("createUser"))&&dt.then(et=>Z.next(et))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(_r.Dh),h.LFG(_r.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(dn.HU),h.LFG(Q0,8),h.LFG($y,8),h.LFG(am,8),h.LFG(J0,8),h.LFG(YD,8),h.LFG(X0,8),h.LFG(sm,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),nM=(()=>{class n{constructor(){om.Z.registerVersion("angularfire",dn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[Hy]}),n})();function Vf(n){return null==n}function QD(n){return"function"==typeof n.set}function JD(n,e){return QD(e)?e:n.ref(e)}function tC(n,e){if(function(n){return"string"==typeof n}(n))return e.stringCase();if(QD(n))return e.firebaseCase();if(function(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Zu(n,e,t="on",r=Xh.z){return new jn.y(o=>{let u=null;return u=n[t](e,(c,g)=>{r.schedule(()=>{o.next({snapshot:c,prevKey:g})}),"once"===t&&r.schedule(()=>o.complete())},c=>{r.schedule(()=>o.error(c))}),"on"===t?{unsubscribe(){null!=u&&n.off(e,u)}}:{unsubscribe(){}}}).pipe((0,St.U)(o=>{const{snapshot:u,prevKey:c}=o;let g=null;return u.exists()&&(g=u.key),{type:e,payload:u,prevKey:c,key:g}}),(0,jx.B)())}function nC(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function oM(n,e){const{payload:t,prevKey:r,key:o}=e,u=nC(n,o),c=function(n,e){if(Vf(e))return 0;{const t=nC(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let g=null;e.payload.forEach(y=>{const C={payload:y,type:"value",prevKey:g,key:y.key};return g=y.key,n=[...n,C],!1})}return n;case"child_added":if(u>-1){const g=n[u-1];(g&&g.key||null)!==r&&(n=n.filter(y=>y.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(g=>g.payload.key!==t.key);case"child_changed":return n.map(g=>g.payload.key===o?e:g);case"child_moved":if(u>-1){const g=n.splice(u,1)[0];return(n=n.slice()).splice(c,0,g),n}return n;default:return n}}function XD(n){return(Vf(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function eS(n,e,t){return function(n,e,t){return Zu(n,"value","once",t).pipe(pr(r=>{const o=[(0,at.of)(r)];return e.forEach(u=>o.push(Zu(n,u,"on",t))),(0,H_.T)(...o).pipe(Va(oM,[]))}),G_())}(n,e=XD(e),t)}function tS(n,e,t){const r=(e=XD(e)).map(o=>Zu(n,o,"on",t));return(0,H_.T)(...r)}function lM(n,e){return function(r,o){return tC(r,{stringCase:()=>n.child(r)[e](o),firebaseCase:()=>r[e](o),snapshotCase:()=>r.ref[e](o)})}}function Z1(n){return function(t){return t?tC(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function Gy(n,e){return function(){return Zu(n,"value","on",e)}}const dM=new h.OlP("angularfire2.realtimeDatabaseURL"),hM=new h.OlP("angularfire2.database.use-emulator");let fM=(()=>{class n{constructor(t,r,o,u,c,g,y,C,S,x,O,$,Z,ye,xe){this.schedulers=g;const pt=y,dt=(0,_r.on)(t,c,r);C&&eC(dt,c,S,O,$,Z,x,ye),this.database=(0,_r.cc)(`${dt.name}.database.${o}`,"AngularFireDatabase",dt.name,()=>{const et=c.runOutsideAngular(()=>dt.database(o||void 0));return pt&&et.useEmulator(...pt),et},[pt])}list(t,r){const o=this.schedulers.ngZone.runOutsideAngular(()=>JD(this.database,t));let u=o;return r&&(u=r(o)),function(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:lM(r,"update"),set:lM(r,"set"),push:o=>r.push(o),remove:Z1(r),snapshotChanges:o=>eS(n,o,t).pipe(dn.iC),stateChanges:o=>tS(n,o,t).pipe(dn.iC),auditTrail:o=>function(n,e,t){return function(n,e,t){return function(n,e){return Zu(n,"value","on",e).pipe((0,St.U)(t=>{let r;return t.payload.forEach(o=>(r=o.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function(...n){return e=>{let t;return"function"==typeof n[n.length-1]&&(t=n.pop()),e.lift(new Hw(n,t))}}(e),(0,St.U)(([o,u])=>{const c=o.lastKeyToLoad,g=u.map(y=>y.key);return{actions:u,lastKeyToLoad:c,loadedKeys:g}}),function(n){return e=>e.lift(new n1(n))}(o=>-1===o.loadedKeys.indexOf(o.lastKeyToLoad)),(0,St.U)(o=>o.actions))}(n,tS(n,e).pipe(Va((o,u)=>[...o,u],[])),t)}(n,o,t).pipe(dn.iC),valueChanges:(o,u)=>eS(n,o,t).pipe((0,St.U)(g=>g.map(y=>u&&u.idField?Object.assign(Object.assign({},y.payload.val()),{[u.idField]:y.key}):y.payload.val())),dn.iC)}}(u,this)}object(t){return function(n,e){return{query:n,snapshotChanges:()=>Gy(n,e.schedulers.outsideAngular)().pipe(dn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Gy(n,e.schedulers.outsideAngular)().pipe(dn.iC,(0,St.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>JD(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(_r.Dh),h.LFG(_r.xv,8),h.LFG(dM,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(dn.HU),h.LFG(hM,8),h.LFG(Hy,8),h.LFG(Q0,8),h.LFG($y,8),h.LFG(am,8),h.LFG(J0,8),h.LFG(YD,8),h.LFG(X0,8),h.LFG(sm,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var pM=V(1555);function Uf(n,e){return new jn.y(t=>{const r=n.length;if(0===r)return void t.complete();const o=new Array(r);let u=0,c=0;for(let g=0;g<r;g++){const y=(0,Gt.D)(n[g]);let C=!1;t.add(y.subscribe({next:S=>{C||(C=!0,c++),o[g]=S},error:S=>t.error(S),complete:()=>{u++,(u===r||!C)&&(c===r&&t.next(e?e.reduce((S,x,O)=>(S[x]=o[O],S),{}):o),t.complete())}}))}})}let iS=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),Uo=(()=>{class n extends iS{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const Kn=new h.OlP("NgValueAccessor"),rC={provide:Kn,useExisting:(0,h.Gpc)(()=>um),multi:!0},oS=new h.OlP("CompositionEventMode");let um=(()=>{class n extends iS{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=L()?L().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(oS,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[h._Bn([rC]),h.qOj]}),n})();const Vi=new h.OlP("NgValidators"),cc=new h.OlP("NgAsyncValidators");function hS(n){return null!=n}function qy(n){const e=(0,h.QGY)(n)?(0,Gt.D)(n):n;return(0,h.CqO)(e),e}function fS(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function pS(n,e){return e.map(t=>t(n))}function gS(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function sC(n){return null!=n?function(n){if(!n)return null;const e=n.filter(hS);return 0==e.length?null:function(t){return fS(pS(t,e))}}(gS(n)):null}function oC(n){return null!=n?function(n){if(!n)return null;const e=n.filter(hS);return 0==e.length?null:function(t){return function(...n){if(1===n.length){const e=n[0];if((0,Ji.k)(e))return Uf(e,null);if((0,pM.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Uf(t.map(r=>e[r]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return Uf(n=1===n.length&&(0,Ji.k)(n[0])?n[0]:n,null).pipe((0,St.U)(t=>e(...t)))}return Uf(n,null)}(pS(t,e).map(qy)).pipe((0,St.U)(fS))}}(gS(n)):null}function yS(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Wy(n){return n?Array.isArray(n)?n:[n]:[]}function lm(n,e){return Array.isArray(n)?n.includes(e):n===e}function aC(n,e){const t=Wy(e);return Wy(n).forEach(o=>{lm(t,o)||t.push(o)}),t}function uC(n,e){return Wy(e).filter(t=>!lm(n,t))}let lC=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=sC(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=oC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,r){return!!this.control&&this.control.hasError(t,r)}getError(t,r){return this.control?this.control.getError(t,r):null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n}),n})(),Ui=(()=>{class n extends lC{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();class dc extends lC{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let ES=(()=>{class n extends class{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(dc,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[h.qOj]}),n})();function jd(n,e){(function(n,e){const t=function(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(yS(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(yS(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();zy(e._rawValidators,o),zy(e._rawAsyncValidators,o)})(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&pC(n,e)})}(n,e),function(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&pC(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function zy(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function pC(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function yC(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const iu="VALID",Yy="INVALID",$f="PENDING",Qy="DISABLED";function vC(n){return(CC(n)?n.validators:n)||null}function Jy(n){return Array.isArray(n)?sC(n):n||null}function wC(n,e){return(CC(e)?e.asyncValidators:n)||null}function EC(n){return Array.isArray(n)?oC(n):n||null}function CC(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class bC{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Jy(this._rawValidators),this._composedAsyncValidatorFn=EC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===iu}get invalid(){return this.status===Yy}get pending(){return this.status==$f}get disabled(){return this.status===Qy}get enabled(){return this.status!==Qy}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Jy(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=EC(e)}addValidators(e){this.setValidators(aC(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(aC(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(uC(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(uC(e,this._rawAsyncValidators))}hasValidator(e){return lm(this._rawValidators,e)}hasAsyncValidator(e){return lm(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=$f,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Qy,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=iu,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===iu||this.status===$f)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Qy:iu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=$f,this._hasOwnPendingAsyncValidator=!0;const t=qy(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=r instanceof Xy?r.controls.hasOwnProperty(o)?r.controls[o]:null:r instanceof DS&&r.at(o)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?Qy:this.errors?Yy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus($f)?$f:this._anyControlsHaveStatus(Yy)?Yy:iu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){CC(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Hf extends bC{constructor(e=null,t,r){super(vC(t),wC(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){yC(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){yC(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Xy extends bC{constructor(e,t,r){super(vC(t),wC(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof Hf?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class DS extends bC{constructor(e,t,r){super(vC(t),wC(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,o)=>{this._throwIfControlMissing(o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof Hf?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const AM={provide:dc,useExisting:(0,h.Gpc)(()=>iv)},DC=(()=>Promise.resolve(null))();let iv=(()=>{class n extends dc{constructor(t,r,o,u){super(),this.control=new Hf,this._registered=!1,this.update=new h.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===um?t=u:function(n){return Object.getPrototypeOf(n.constructor)===Uo}(u)?r=u:o=u}),o||r||t||null}(0,u)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(n,e){return[...e.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){jd(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){DC.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=""===r||r&&"false"!==r;DC.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ui,9),h.Y36(Vi,10),h.Y36(cc,10),h.Y36(Kn,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([AM]),h.qOj,h.TTD]}),n})(),NS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const uF={provide:Kn,useExisting:(0,h.Gpc)(()=>RC),multi:!0};function PM(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let RC=(()=>{class n extends Uo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const r=this._getOptionId(t);null==r&&this.setProperty("selectedIndex",-1);const o=PM(r,t);this.setProperty("value",o)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&h.NdJ("change",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[h._Bn([uF]),h.qOj]}),n})(),OM=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(PM(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(RC,9))},n.\u0275dir=h.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const cF={provide:Kn,useExisting:(0,h.Gpc)(()=>BS),multi:!0};function kM(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let BS=(()=>{class n extends Uo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const o=t.map(u=>this._getOptionId(u));r=(u,c)=>{u._setSelected(o.indexOf(c.toString())>-1)}}else r=(o,u)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const o=[];if(void 0!==r.selectedOptions){const u=r.selectedOptions;for(let c=0;c<u.length;c++){const g=u.item(c),y=this._getOptionValue(g.value);o.push(y)}}else{const u=r.options;for(let c=0;c<u.length;c++){const g=u.item(c);if(g.selected){const y=this._getOptionValue(g.value);o.push(y)}}}this.value=o,t(o)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&h.NdJ("change",function(u){return r.onChange(u.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[h._Bn([cF]),h.qOj]}),n})(),FM=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(kM(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(kM(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(BS,9))},n.\u0275dir=h.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),ov=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[NS]]}),n})(),qS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[ov]}),n})();function av(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",19),h.TgZ(1,"div",20),h.TgZ(2,"input",21),h.NdJ("ngModelChange",function(o){return h.CHM(t).$implicit.valor=o}),h.qZA(),h.qZA(),h.TgZ(3,"div",20),h.TgZ(4,"input",22),h.NdJ("ngModelChange",function(o){return h.CHM(t).$implicit.descricao=o}),h.qZA(),h.qZA(),h.qZA()}if(2&n){const t=e.$implicit;h.xp6(2),h.Q6J("ngModel",t.valor),h.xp6(2),h.Q6J("ngModel",t.descricao)}}function WS(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",8),h.TgZ(1,"div",9),h.TgZ(2,"label",10),h._uU(3,"Data"),h.qZA(),h.TgZ(4,"input",11),h.NdJ("ngModelChange",function(o){return h.CHM(t),h.oxw().sinalModel.data=o}),h.qZA(),h.qZA(),h.TgZ(5,"div",9),h.TgZ(6,"label",10),h._uU(7,"Moeda"),h.qZA(),h.TgZ(8,"input",12),h.NdJ("ngModelChange",function(o){return h.CHM(t),h.oxw().sinalModel.moeda=o}),h.qZA(),h.qZA(),h.TgZ(9,"div",9),h.TgZ(10,"label",10),h._uU(11,"Tipo"),h.qZA(),h.TgZ(12,"select",13),h.NdJ("ngModelChange",function(o){return h.CHM(t),h.oxw().sinalModel.tipo=o}),h.TgZ(13,"option",14),h._uU(14,"LONG"),h.qZA(),h.TgZ(15,"option",15),h._uU(16,"SHORT"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(17,"div",9),h.TgZ(18,"label",10),h._uU(19,"Entradas"),h.qZA(),h.YNc(20,av,5,2,"div",16),h.qZA(),h.TgZ(21,"div",9),h.TgZ(22,"button",17),h.NdJ("click",function(){return h.CHM(t),h.oxw().salvarEntrada()}),h._uU(23,"Salvar"),h.qZA(),h.TgZ(24,"button",18),h.NdJ("click",function(){return h.CHM(t),h.oxw().showFormNovoSinal=!1}),h._uU(25,"Cancelar"),h.qZA(),h.qZA(),h.qZA()}if(2&n){const t=h.oxw();h.xp6(4),h.Q6J("ngModel",t.sinalModel.data),h.xp6(4),h.Q6J("ngModel",t.sinalModel.moeda),h.xp6(4),h.Q6J("ngModel",t.sinalModel.tipo),h.xp6(8),h.Q6J("ngForOf",t.sinalModel.entradas)}}function yF(n,e){if(1&n&&(h.TgZ(0,"span"),h._uU(1),h.qZA()),2&n){const t=h.oxw().$implicit,r=h.oxw(2);h.xp6(1),h.hij("$: ",null==r.PriceCoinMap[t.moeda]?null:r.PriceCoinMap[t.moeda].price,"")}}function vF(n,e){if(1&n&&(h.TgZ(0,"div",41),h.TgZ(1,"span"),h._uU(2),h.qZA(),h._UZ(3,"br"),h.qZA()),2&n){const t=h.oxw().$implicit;h.xp6(2),h.hij(" Sugest\xe3o entrada ",t.sugestao,"")}}function wF(n,e){if(1&n&&(h.TgZ(0,"div",44),h._UZ(1,"i",45),h.TgZ(2,"small"),h._uU(3),h.qZA(),h.qZA()),2&n){const t=h.oxw(2).$implicit,r=h.oxw(2);h.xp6(3),h.Oqu(null==r.PriceCoinMap[t.moeda]?null:r.PriceCoinMap[t.moeda].price)}}function ZM(n,e){if(1&n&&(h.TgZ(0,"div",44),h._UZ(1,"i",45),h.TgZ(2,"small"),h._uU(3),h.qZA(),h.qZA()),2&n){const t=h.oxw(2).$implicit,r=h.oxw(2);h.xp6(3),h.Oqu(null==r.PriceCoinMap[t.moeda]?null:r.PriceCoinMap[t.moeda].price)}}function EF(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"li"),h.YNc(1,wF,4,1,"div",42),h.TgZ(2,"div"),h.TgZ(3,"i",43),h.NdJ("click",function(){const u=h.CHM(t).$implicit;return h.oxw(3).toggleAlcancado(u)}),h.qZA(),h._uU(4),h.qZA(),h.YNc(5,ZM,4,1,"div",42),h._UZ(6,"div"),h.qZA()}if(2&n){const t=e.$implicit,r=e.index,o=h.oxw().$implicit,u=h.oxw(2);h.xp6(1),h.Q6J("ngIf",u.PriceCoinMap[o.moeda]&&o.indexPricePosition===r),h.xp6(2),h.Q6J("ngClass",t.alcancado?"fa-flag text-success":"fa-caret-right"),h.xp6(1),h.AsE(" ",t.valor," - ",t.descricao," "),h.xp6(1),h.Q6J("ngIf",u.PriceCoinMap[o.moeda]&&r==o.entradas.length-1&&("LONG"===o.tipo&&u.castPrice(null==u.PriceCoinMap[o.moeda]?null:u.PriceCoinMap[o.moeda].price)>u.castPrice(t.valor)||"SHORT"===o.tipo&&u.castPrice(null==u.PriceCoinMap[o.moeda]?null:u.PriceCoinMap[o.moeda].price)<u.castPrice(t.valor)))}}function uv(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",27),h.TgZ(1,"div",28),h.TgZ(2,"span",29),h.TgZ(3,"i",30),h.NdJ("click",function(){const u=h.CHM(t).$implicit;return h.oxw(2).togglePinWatcher(u)}),h.qZA(),h.qZA(),h.TgZ(4,"h5",31),h.TgZ(5,"strong"),h._uU(6),h.qZA(),h.qZA(),h.TgZ(7,"h5"),h.YNc(8,yF,2,1,"span",32),h.qZA(),h.TgZ(9,"h6",33),h._uU(10),h.ALo(11,"date"),h.qZA(),h.YNc(12,vF,4,1,"div",34),h.TgZ(13,"div"),h.TgZ(14,"ul",35),h.YNc(15,EF,7,5,"li",36),h.qZA(),h.qZA(),h.TgZ(16,"div"),h.TgZ(17,"span",29),h.TgZ(18,"button",37),h.NdJ("click",function(){const o=h.CHM(t),u=o.$implicit,c=o.index;return h.oxw(2).editarSinal(u,c)}),h._UZ(19,"i",38),h.qZA(),h.TgZ(20,"button",39),h.NdJ("click",function(){const o=h.CHM(t),u=o.$implicit,c=o.index;return h.oxw(2).excluirSinal(u,c)}),h._UZ(21,"i",40),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()}if(2&n){const t=e.$implicit,r=h.oxw(2);h.Q6J("ngClass","LONG"===t.tipo?"border-long":"border-short"),h.xp6(3),h.Q6J("ngClass",r.watchersIDPinnedList.indexOf(t.id)>-1?"fa-star text-danger":"fa-star-o"),h.xp6(3),h.Oqu(t.moeda),h.xp6(2),h.Q6J("ngIf",r.PriceCoinMap[t.moeda]),h.xp6(1),h.Q6J("ngClass","LONG"===t.tipo?"text-success":"text-danger"),h.xp6(1),h.AsE(" ",t.tipo," - ",h.xi3(11,9,t.data,"dd/MM/yyyy")," "),h.xp6(2),h.Q6J("ngIf",t.sugestao),h.xp6(3),h.Q6J("ngForOf",t.entradas)}}function KM(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",2),h.TgZ(1,"h3",23),h._uU(2,"Favoritados "),h.TgZ(3,"button",24),h.NdJ("click",function(){return h.CHM(t),h.MAs(5).classList.toggle("hidden")}),h.qZA(),h.qZA(),h.TgZ(4,"div",19,25),h.YNc(6,uv,22,12,"div",26),h.qZA(),h.qZA()}if(2&n){const t=h.oxw();h.xp6(6),h.Q6J("ngForOf",t.watchersPinnedList)}}function CF(n,e){if(1&n&&(h.TgZ(0,"span"),h._uU(1),h.qZA()),2&n){const t=h.oxw().$implicit,r=h.oxw(2);h.xp6(1),h.hij("$: ",null==r.PriceCoinMap[t.moeda]?null:r.PriceCoinMap[t.moeda].price,"")}}function bF(n,e){if(1&n&&(h.TgZ(0,"div",41),h.TgZ(1,"span"),h._uU(2),h.qZA(),h._UZ(3,"br"),h.qZA()),2&n){const t=h.oxw().$implicit;h.xp6(2),h.hij(" Sugest\xe3o entrada ",t.sugestao,"")}}function PC(n,e){if(1&n&&(h.TgZ(0,"div",44),h._UZ(1,"i",45),h.TgZ(2,"small"),h._uU(3),h.qZA(),h.qZA()),2&n){const t=h.oxw(2).$implicit,r=h.oxw(2);h.xp6(3),h.Oqu(null==r.PriceCoinMap[t.moeda]?null:r.PriceCoinMap[t.moeda].price)}}function YM(n,e){if(1&n&&(h.TgZ(0,"div",44),h._UZ(1,"i",45),h.TgZ(2,"small"),h._uU(3),h.qZA(),h.qZA()),2&n){const t=h.oxw(2).$implicit,r=h.oxw(2);h.xp6(3),h.Oqu(null==r.PriceCoinMap[t.moeda]?null:r.PriceCoinMap[t.moeda].price)}}function IF(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"li"),h.YNc(1,PC,4,1,"div",42),h.TgZ(2,"div"),h.TgZ(3,"i",43),h.NdJ("click",function(){const u=h.CHM(t).$implicit;return h.oxw(3).toggleAlcancado(u)}),h.qZA(),h._uU(4),h.qZA(),h.YNc(5,YM,4,1,"div",42),h._UZ(6,"div"),h.qZA()}if(2&n){const t=e.$implicit,r=e.index,o=h.oxw().$implicit,u=h.oxw(2);h.xp6(1),h.Q6J("ngIf",u.PriceCoinMap[o.moeda]&&o.indexPricePosition===r),h.xp6(2),h.Q6J("ngClass",t.alcancado?"fa-flag text-success":"fa-caret-right"),h.xp6(1),h.AsE(" ",t.valor," - ",t.descricao," "),h.xp6(1),h.Q6J("ngIf",u.PriceCoinMap[o.moeda]&&r==o.entradas.length-1&&("LONG"===o.tipo&&u.castPrice(null==u.PriceCoinMap[o.moeda]?null:u.PriceCoinMap[o.moeda].price)>u.castPrice(t.valor)||"SHORT"===o.tipo&&u.castPrice(null==u.PriceCoinMap[o.moeda]?null:u.PriceCoinMap[o.moeda].price)<u.castPrice(t.valor)))}}function TF(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",27),h.TgZ(1,"div",28),h.TgZ(2,"span",29),h.TgZ(3,"i",30),h.NdJ("click",function(){const u=h.CHM(t).$implicit;return h.oxw(2).togglePinWatcher(u)}),h.qZA(),h.qZA(),h.TgZ(4,"h5",31),h.TgZ(5,"strong"),h._uU(6),h.qZA(),h.qZA(),h.TgZ(7,"h5"),h.YNc(8,CF,2,1,"span",32),h.qZA(),h.TgZ(9,"h6",33),h._uU(10),h.ALo(11,"date"),h.qZA(),h.YNc(12,bF,4,1,"div",34),h.TgZ(13,"div"),h.TgZ(14,"ul",35),h.YNc(15,IF,7,5,"li",36),h.qZA(),h.qZA(),h.TgZ(16,"div"),h.TgZ(17,"span",29),h.TgZ(18,"button",37),h.NdJ("click",function(){const o=h.CHM(t),u=o.$implicit,c=o.index;return h.oxw(2).editarSinal(u,c)}),h._UZ(19,"i",38),h.qZA(),h.TgZ(20,"button",39),h.NdJ("click",function(){const o=h.CHM(t),u=o.$implicit,c=o.index;return h.oxw(2).excluirSinal(u,c)}),h._UZ(21,"i",40),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()}if(2&n){const t=e.$implicit,r=h.oxw(2);h.Q6J("ngClass","LONG"===t.tipo?"border-long":"border-short"),h.xp6(3),h.Q6J("ngClass",r.watchersIDPinnedList.indexOf(t.id)>-1?"fa-star text-danger":"fa-star-o"),h.xp6(3),h.Oqu(t.moeda),h.xp6(2),h.Q6J("ngIf",r.PriceCoinMap[t.moeda]),h.xp6(1),h.Q6J("ngClass","LONG"===t.tipo?"text-success":"text-danger"),h.xp6(1),h.AsE(" ",t.tipo," - ",h.xi3(11,9,t.data,"dd/MM/yyyy")," "),h.xp6(2),h.Q6J("ngIf",t.sugestao),h.xp6(3),h.Q6J("ngForOf",t.entradas)}}function QM(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",2),h.TgZ(1,"h3",23),h._uU(2,"Sinais na entrada "),h.TgZ(3,"button",24),h.NdJ("click",function(){return h.CHM(t),h.MAs(5).classList.toggle("hidden")}),h.qZA(),h.qZA(),h.TgZ(4,"div",19,46),h.YNc(6,TF,22,12,"div",26),h.qZA(),h.qZA()}if(2&n){const t=h.oxw();h.xp6(6),h.Q6J("ngForOf",t.watchersEntradaList)}}function DF(n,e){if(1&n&&(h.TgZ(0,"span"),h._uU(1),h.qZA()),2&n){const t=h.oxw().$implicit,r=h.oxw(2);h.xp6(1),h.hij("$: ",null==r.PriceCoinMap[t.moeda]?null:r.PriceCoinMap[t.moeda].price,"")}}function zS(n,e){if(1&n&&(h.TgZ(0,"div",41),h.TgZ(1,"span"),h._uU(2),h.qZA(),h._UZ(3,"br"),h.qZA()),2&n){const t=h.oxw().$implicit;h.xp6(2),h.hij(" Sugest\xe3o entrada ",t.sugestao,"")}}function JM(n,e){if(1&n&&(h.TgZ(0,"div",44),h._UZ(1,"i",45),h.TgZ(2,"small"),h._uU(3),h.qZA(),h.qZA()),2&n){const t=h.oxw(2).$implicit,r=h.oxw(2);h.xp6(3),h.Oqu(null==r.PriceCoinMap[t.moeda]?null:r.PriceCoinMap[t.moeda].price)}}function SF(n,e){if(1&n&&(h.TgZ(0,"div",44),h._UZ(1,"i",45),h.TgZ(2,"small"),h._uU(3),h.qZA(),h.qZA()),2&n){const t=h.oxw(2).$implicit,r=h.oxw(2);h.xp6(3),h.Oqu(null==r.PriceCoinMap[t.moeda]?null:r.PriceCoinMap[t.moeda].price)}}function AF(n,e){if(1&n&&(h.TgZ(0,"li"),h.YNc(1,JM,4,1,"div",42),h.TgZ(2,"div"),h._UZ(3,"i",48),h._uU(4),h.qZA(),h.YNc(5,SF,4,1,"div",42),h._UZ(6,"div"),h.qZA()),2&n){const t=e.$implicit,r=e.index,o=h.oxw().$implicit,u=h.oxw(2);h.xp6(1),h.Q6J("ngIf",u.PriceCoinMap[o.moeda]&&o.indexPricePosition===r),h.xp6(2),h.Q6J("ngClass",t.alcancado?"fa-flag text-success":"fa-caret-right"),h.xp6(1),h.AsE(" ",t.valor," - ",t.descricao," "),h.xp6(1),h.Q6J("ngIf",u.PriceCoinMap[o.moeda]&&r==o.entradas.length-1&&("LONG"===o.tipo&&u.castPrice(null==u.PriceCoinMap[o.moeda]?null:u.PriceCoinMap[o.moeda].price)>u.castPrice(t.valor)||"SHORT"===o.tipo&&u.castPrice(null==u.PriceCoinMap[o.moeda]?null:u.PriceCoinMap[o.moeda].price)<u.castPrice(t.valor)))}}function XM(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",27),h.TgZ(1,"div",28),h.TgZ(2,"span",29),h.TgZ(3,"i",30),h.NdJ("click",function(){const u=h.CHM(t).$implicit;return h.oxw(2).togglePinWatcher(u)}),h.qZA(),h.qZA(),h.TgZ(4,"h5",31),h.TgZ(5,"strong"),h._uU(6),h.qZA(),h.qZA(),h.TgZ(7,"h5"),h.YNc(8,DF,2,1,"span",32),h.qZA(),h.TgZ(9,"h6",33),h._uU(10),h.ALo(11,"date"),h.qZA(),h.YNc(12,zS,4,1,"div",34),h.TgZ(13,"div"),h.TgZ(14,"ul",35),h.YNc(15,AF,7,5,"li",36),h.qZA(),h.qZA(),h.TgZ(16,"div"),h.TgZ(17,"span",29),h.TgZ(18,"button",37),h.NdJ("click",function(){const o=h.CHM(t),u=o.$implicit,c=o.index;return h.oxw(2).editarSinal(u,c)}),h._UZ(19,"i",38),h.qZA(),h.TgZ(20,"button",39),h.NdJ("click",function(){const o=h.CHM(t),u=o.$implicit,c=o.index;return h.oxw(2).excluirSinal(u,c)}),h._UZ(21,"i",40),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()}if(2&n){const t=e.$implicit,r=h.oxw(2);h.Q6J("ngClass","LONG"===t.tipo?"border-long":"border-short"),h.xp6(3),h.Q6J("ngClass",r.watchersIDPinnedList.indexOf(t.id)>-1?"fa-star text-danger":"fa-star-o"),h.xp6(3),h.Oqu(t.moeda),h.xp6(2),h.Q6J("ngIf",r.PriceCoinMap[t.moeda]),h.xp6(1),h.Q6J("ngClass","LONG"===t.tipo?"text-success":"text-danger"),h.xp6(1),h.AsE(" ",t.tipo," - ",h.xi3(11,9,t.data,"dd/MM/yyyy")," "),h.xp6(2),h.Q6J("ngIf",t.sugestao),h.xp6(3),h.Q6J("ngForOf",t.entradas)}}function fm(n,e){if(1&n&&(h.TgZ(0,"div",47),h.TgZ(1,"h3",23),h._uU(2,"Lista de Sinais"),h.qZA(),h.TgZ(3,"div",19),h.YNc(4,XM,22,12,"div",26),h.qZA(),h.qZA()),2&n){const t=h.oxw();h.xp6(4),h.Q6J("ngForOf",t.watchersList)}}j_.extend(kt);let eP=(()=>{class n{constructor(t){this.db=t,this.title="binance-future-watcher-githubio",this.loading=!1,this.showFormNovoSinal=!1,this.BINANCE_FUTURE_ENDPOINT="https://fapi.binance.com/fapi/v1",this.PriceCoinMap={},this.PriceCoinList=[],this.storage=window.localStorage,this.watchersList=[],this.watchersPinnedList=[],this.watchersIDPinnedList=[],this.watchersEntradaList=[],this.myHeaders=new Headers,this.myInit=null,this.sinalModel={data:null,moeda:null,tipo:null,entradas:[],alert:!1,indexPricePosition:-1},this.entradaModel={valor:0,descricao:null,alcancado:!1,dataAlcancado:null},this.editandoSinalIdx=-1,this.myHeaders.append("content-type","application/json"),this.myInit={method:"GET",headers:this.myHeaders}}ngOnInit(){this.startPriceWatcher(),this.loadWatcherList()}startPriceWatcher(){const r=function(n=0,e=Xh.P){return(!(0,wI.k)(n)||n<0)&&(n=0),(!e||"function"!=typeof e.schedule)&&(e=Xh.P),new jn.y(t=>(t.add(e.schedule(la,n,{subscriber:t,counter:0,period:n})),t))}(5e3);this.populatePriceCoinMap(),r.subscribe(o=>this.populatePriceCoinMap())}populatePriceCoinMap(){this.BINANCE_FUTURE_ENDPOINT&&fetch(`${this.BINANCE_FUTURE_ENDPOINT}/ticker/price`,this.myInit).then(r=>{if(r.ok)return r.json()}).then(r=>{this.PriceCoinList=[];let o=[];r.forEach(c=>{this.PriceCoinMap[c.symbol]={price:c.price},o.push(c.symbol)});let u=this;o.sort(),o.forEach(c=>{u.PriceCoinList.push({symbol:c,price:this.PriceCoinMap[c].price})}),this.setOrderSinais()})}setOrderSinais(){this.watchersList&&this.watchersList.length>0&&(this.watchersList.forEach((t,r)=>{let o=0;try{o=parseFloat(this.PriceCoinMap[t.moeda].price)}catch(u){}if(o){let u=-1;for(let c=0;c<t.entradas.length;c++){let y=parseFloat(t.entradas[c].valor);if("LONG"===t.tipo){if(0==c||c===t.entradas.length-1){if(o<=y){u=c,0==c&&(t.alert=!0);break}if(c===t.entradas.length-1&&o>y){u=1e3;break}continue}if(o>=parseFloat(t.entradas[c-1].valor)&&o<=y){u=c,t.alert&&(this.playAlert(),t.alert=!1);break}}else if("SHORT"===t.tipo){if(0==c||c===t.entradas.length-1){if(o>=y){u=c,0==c&&(t.alert=!0);break}continue}if(o<=parseFloat(t.entradas[c-1].valor)&&o>=y){u=c,t.alert&&(this.playAlert(),t.alert=!1);break}}}this.watchersList[r].indexPricePosition=u}}),this.watchersEntradaList=[],this.watchersList.forEach(t=>{1===t.indexPricePosition&&this.watchersEntradaList.push(t)}),console.log(this.watchersList))}castPrice(t){return parseFloat(t)}novoSinal(){let t=j_().format("YYYY-MM-DD");console.log(t),this.editandoSinalIdx=-1,this.sinalModel={data:t,tipo:null,entradas:[]};let r=["Entrada","40%","60%","80%","100%"];for(let o=0;o<5;o++){let u=Object.assign({},this.entradaModel);u.descricao=r[o],this.sinalModel.entradas.push(u)}this.showFormNovoSinal=!0}loadWatcherList(){this.watchersObservable=this.db.list("/sinais").valueChanges(),this.watchersObservable.subscribe(t=>{console.log(t),this.watchersList=t,this.watchersList&&this.watchersList.length>0&&(this.watchersList.forEach(r=>{if(r.entradas&&r.entradas.length>0){let o=parseFloat(r.entradas[0].valor),u=parseFloat(r.entradas[1].valor);if(r.sugestao="LONG"===r.tipo?o+(u-o)/4:o-(o-u)/4,r.sugestao){let c=r.entradas[r.entradas.length-1].valor,g=c.indexOf(".")-1,y=c.substr(g).length;r.sugestao=r.sugestao.toFixed(y)}}}),this.watchersList.sort((r,o)=>j_(r.data)>j_(o.data)?-1:1)),this.loadWatchersFavoritos(),this.setOrderSinais()})}salvarEntrada(){console.log(this.sinalModel);let t=Object.assign({},this.sinalModel);t.entradas.length>0&&t.entradas.forEach(o=>{o.valor=o.valor.trim()});let r=t.id?t.id:"_"+Math.random().toString().replace(".","");this.editandoSinalIdx>-1||(t.id=r,t.moeda=t.moeda.toUpperCase()),this.db.object("/sinais/"+r).set(t).then(()=>{this.showFormNovoSinal=!1})}editarSinal(t,r){this.editandoSinalIdx=r,this.sinalModel=Object.assign({},t),this.showFormNovoSinal=!0,window.scrollTo(0,0)}excluirSinal(t,r){var o=this;return(0,we.Z)(function*(){window.confirm("Realmente deseja excluir o sinal?")&&(yield o.db.object("/sinais/"+t.id).remove())})()}playAlert(){notificationAudio.play()}toggleAlcancado(t){t.alcancado=!t.alcancado||!t.alcancado}togglePinWatcher(t){let r=this.watchersIDPinnedList.indexOf(t.id);if(r>-1){this.watchersIDPinnedList.splice(r,1);for(let o=0;o<this.watchersPinnedList.length;o++)if(this.watchersPinnedList[o].id===t.id){this.watchersPinnedList.splice(o,1);break}}else this.watchersIDPinnedList.push(t.id),this.watchersPinnedList.push(t);window.localStorage.setItem("watchers_favoritos",JSON.stringify(this.watchersIDPinnedList))}loadWatchersFavoritos(){this.watchersPinnedList=[];let t=window.localStorage.getItem("watchers_favoritos");t&&(this.watchersIDPinnedList=JSON.parse(t),this.watchersIDPinnedList.forEach(r=>{this.watchersList.forEach(o=>{o.id===r&&this.watchersPinnedList.push(o)})}))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(fM))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:10,vars:4,consts:[["role","main"],[1,""],[1,"container"],[1,"text-center"],[1,"btn","btn-success","my-2",3,"click"],["class","col-md-6",4,"ngIf"],["class","container",4,"ngIf"],["class","container mt-4",4,"ngIf"],[1,"col-md-6"],[1,"mb-3"],["for","",1,"form-label","text-white"],["type","date","placeholder","First name","aria-label","First name",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","","aria-label","First name",1,"form-control","text-uppercase",3,"ngModel","ngModelChange"],["aria-label","Default select example",1,"form-control","form-select",3,"ngModel","ngModelChange"],["value","LONG"],["value","SHORT"],["class","row",4,"ngFor","ngForOf"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"row"],[1,"col"],["type","text","placeholder","Valor","aria-label","Valor",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Descri\xe7\xe3o","aria-label","descri\xe7\xe3o",1,"form-control",3,"ngModel","ngModelChange"],[1,"text-white"],[1,"btn","bt-sm","btn-outline-secondary","fa","fa-chevron-up",3,"click"],["divPinnedList",""],["class","card m-1 col-md-4 col-lg-3 col-xl-3",3,"ngClass",4,"ngFor","ngForOf"],[1,"card","m-1","col-md-4","col-lg-3","col-xl-3",3,"ngClass"],[1,"card-body"],[1,"float-right"],[1,"fa","clickable",3,"ngClass","click"],[1,"card-title"],[4,"ngIf"],[1,"card-subtitle","mb-2",3,"ngClass"],["class","alert alert-primary",4,"ngIf"],[1,"price-list"],["style"," ",4,"ngFor","ngForOf"],[1,"btn","btn-link",3,"click"],[1,"fa","fa-pencil"],[1,"btn","btn-link","text-danger",3,"click"],[1,"fa","fa-trash"],[1,"alert","alert-primary"],["class","ml-4",4,"ngIf"],[1,"clickable","fa",3,"ngClass","click"],[1,"ml-4"],[1,"fa","fa-caret-right","text-success"],["divWatchersEntrada",""],[1,"container","mt-4"],[1,"clickable","fa",3,"ngClass"]],template:function(t,r){1&t&&(h.TgZ(0,"main",0),h.TgZ(1,"section",1),h.TgZ(2,"div",2),h.TgZ(3,"p",3),h.TgZ(4,"button",4),h.NdJ("click",function(){return r.novoSinal()}),h._uU(5,"Novo sinal"),h.qZA(),h.qZA(),h.YNc(6,WS,26,4,"div",5),h.qZA(),h.YNc(7,KM,7,1,"div",6),h.YNc(8,QM,7,1,"div",6),h.YNc(9,fm,5,1,"div",7),h.qZA(),h.qZA()),2&t&&(h.xp6(6),h.Q6J("ngIf",r.showFormNovoSinal),h.xp6(1),h.Q6J("ngIf",r.watchersPinnedList&&r.watchersPinnedList.length>0),h.xp6(1),h.Q6J("ngIf",r.watchersEntradaList&&r.watchersEntradaList.length>0),h.xp6(1),h.Q6J("ngIf",r.watchersList&&r.watchersList.length>0))},directives:[hs,um,ES,iv,RC,OM,FM,cn,Ms],pipes:[xc],styles:[".text-white[_ngcontent-%COMP%]{color:#fff}.hidden[_ngcontent-%COMP%]{display:none}.text-red[_ngcontent-%COMP%]{color:#fff}.text-yellow[_ngcontent-%COMP%]{color:#ff0}.border-long[_ngcontent-%COMP%]{border-color:#28a745!important;border-width:10px}.clickable[_ngcontent-%COMP%]{cursor:pointer}.border-short[_ngcontent-%COMP%]{border-color:red;border-width:10px}.price-list[_ngcontent-%COMP%]{list-style:none;padding-left:10px}.slidecontainer[_ngcontent-%COMP%]{width:100%}.slider[_ngcontent-%COMP%]{-webkit-appearance:none;appearance:none;width:100%;height:25px;background:#d3d3d3;outline:none;opacity:.7;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:25px;height:25px;background:#04AA6D;cursor:pointer}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:25px;height:25px;background:#04AA6D;cursor:pointer}.slider-square[_ngcontent-%COMP%]{-webkit-appearance:none;width:100%;height:24px;background:#d3d3d3;outline:none;opacity:.7;transition:opacity .15s ease-in-out}"]}),n})();function OC(){return n=>n.lift(new tP)}class tP{call(e,t){return t.subscribe(new kC(e))}}class kC extends Wr.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}var Xe,nP="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},xr={},pm=pm||{},Lt=nP||self;function lv(){}function gm(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Gf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var FC="closure_uid_"+(1e9*Math.random()>>>0),KS=0;function YS(n,e,t){return n.call.apply(n.bind,arguments)}function rP(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function wi(n,e,t){return(wi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?YS:rP).apply(null,arguments)}function qf(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function oi(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var c=Array(arguments.length-2),g=2;g<arguments.length;g++)c[g-2]=arguments[g];return e.prototype[o].apply(r,c)}}function Qu(){this.s=this.s,this.o=this.o}var iP={};Qu.prototype.s=!1,Qu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,FC)&&n[FC]||(n[FC]=++KS)}(this);delete iP[n]}},Qu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const jo=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},QS=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function JS(n){return Array.prototype.concat.apply([],arguments)}function XS(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function cv(n){return/^[\s\xa0]*$/.test(n)}var us,eA=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function as(n,e){return-1!=n.indexOf(e)}function tA(n,e){return n<e?-1:n>e?1:0}e:{var VC=Lt.navigator;if(VC){var nA=VC.userAgent;if(nA){us=nA;break e}}us=""}function UC(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function BC(n){const e={};for(const t in n)e[t]=n[t];return e}var rA="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function sP(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<rA.length;u++)t=rA[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function dv(n){return dv[" "](n),n}dv[" "]=lv;var fv,oP=as(us,"Opera"),Wf=as(us,"Trident")||as(us,"MSIE"),jC=as(us,"Edge"),Hd=jC||Wf,hv=as(us,"Gecko")&&!(as(us.toLowerCase(),"webkit")&&!as(us,"Edge"))&&!(as(us,"Trident")||as(us,"MSIE"))&&!as(us,"Edge"),sA=as(us.toLowerCase(),"webkit")&&!as(us,"Edge");function oA(){var n=Lt.document;return n?n.documentMode:void 0}e:{var aA="",uA=function(){var n=us;return hv?/rv:([^\);]+)(\)|;)/.exec(n):jC?/Edge\/([\d\.]+)/.exec(n):Wf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):sA?/WebKit\/(\S+)/.exec(n):oP?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(uA&&(aA=uA?uA[1]:""),Wf){var lA=oA();if(null!=lA&&lA>parseFloat(aA)){fv=String(lA);break e}}fv=aA}var cA={};function dA(){return e=cA,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=eA(String(fv)).split("."),t=eA("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var o=e[c]||"",u=t[c]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=tA(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||tA(0==o[2].length,0==u[2].length)||tA(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n}();var e}var aP=Lt.document&&Wf&&(oA()||parseInt(fv,10))||void 0,uP=function(){if(!Lt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Lt.addEventListener("test",lv,e),Lt.removeEventListener("test",lv,e)}catch(t){}return n}();function Ei(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function pv(n,e){if(Ei.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(hv){e:{try{dv(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:RF[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&pv.Z.h.call(this)}}Ei.prototype.h=function(){this.defaultPrevented=!0},oi(pv,Ei);var RF={2:"touch",3:"pen",4:"mouse"};pv.prototype.h=function(){pv.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var mm="closure_listenable_"+(1e6*Math.random()|0),HC=0;function ai(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++HC,this.ca=this.fa=!1}function GC(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function _m(n){this.src=n,this.g={},this.h=0}function gv(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=jo(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(GC(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function qC(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}_m.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=qC(n,e,r,o);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new ai(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var zf="closure_lm_"+(1e6*Math.random()|0),WC={};function fA(n,e,t,r,o){if(r&&r.once)return ZC(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)fA(n,e[u],t,r,o);return null}return t=yv(t),n&&n[mm]?n.N(e,t,Gf(r)?!!r.capture:!!r,o):zC(n,e,t,!1,r,o)}function zC(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var c=Gf(o)?!!o.capture:!!o,g=KC(n);if(g||(n[zf]=g=new _m(n)),(t=g.add(e,t,r,c,u)).proxy)return t;if(r=function(){var e=_v;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)uP||(o=c),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(pA(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function ZC(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)ZC(n,e[u],t,r,o);return null}return t=yv(t),n&&n[mm]?n.O(e,t,Gf(r)?!!r.capture:!!r,o):zC(n,e,t,!0,r,o)}function mv(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)mv(n,e[u],t,r,o);else r=Gf(r)?!!r.capture:!!r,t=yv(t),n&&n[mm]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=qC(u=n.g[e],t,r,o))&&(GC(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=KC(n))&&(e=n.g[e.toString()],n=-1,e&&(n=qC(e,t,r,o)),(t=-1<n?e[n]:null)&&ym(t))}function ym(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[mm])gv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(pA(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=KC(e))?(gv(t,n),0==t.h&&(t.src=null,e[zf]=null)):GC(n)}}}function pA(n){return n in WC?WC[n]:WC[n]="on"+n}function _v(n,e){if(n.ca)n=!0;else{e=new pv(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&ym(n),n=t.call(r,e)}return n}function KC(n){return(n=n[zf])instanceof _m?n:null}var vm="__closure_events_fn_"+(1e9*Math.random()>>>0);function yv(n){return"function"==typeof n?n:(n[vm]||(n[vm]=function(e){return n.handleEvent(e)}),n[vm])}function un(){Qu.call(this),this.i=new _m(this),this.P=this,this.I=null}function Bi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Ei(e,n);else if(e instanceof Ei)e.target=e.target||n;else{var o=e;sP(e=new Ei(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];o=vv(c,r,!0,e)&&o}if(o=vv(c=e.g=n,r,!0,e)&&o,o=vv(c,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=vv(c=e.g=t[u],r,!1,e)&&o}function vv(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var g=c.listener,y=c.ia||c.src;c.fa&&gv(n.i,c),o=!1!==g.call(y,r)&&o}}return o&&!r.defaultPrevented}oi(un,Qu),un.prototype[mm]=!0,un.prototype.removeEventListener=function(n,e,t,r){mv(this,n,e,t,r)},un.prototype.M=function(){if(un.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)GC(t[r]);delete n.g[e],n.h--}}this.I=null},un.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},un.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var YC=Lt.JSON.stringify;function NF(){var n=_A;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var QC,gA=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new MF,n=>n.reset());class MF{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function PF(n){Lt.setTimeout(()=>{throw n},0)}function mA(n,e){QC||function(){var n=Lt.Promise.resolve(void 0);QC=function(){n.then(cP)}}(),JC||(QC(),JC=!0),_A.add(n,e)}var JC=!1,_A=new class{constructor(){this.h=this.g=null}add(e,t){const r=gA.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function cP(){for(var n;n=NF();){try{n.h.call(n.g)}catch(t){PF(t)}var e=gA;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}JC=!1}function XC(n,e){un.call(this),this.h=n||1,this.g=e||Lt,this.j=wi(this.kb,this),this.l=Date.now()}function eb(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function tb(n,e,t){if("function"==typeof n)t&&(n=wi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=wi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Lt.setTimeout(n,e||0)}function yA(n){n.g=tb(()=>{n.g=null,n.i&&(n.i=!1,yA(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}oi(XC,un),(Xe=XC.prototype).da=!1,Xe.S=null,Xe.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Bi(this,"tick"),this.da&&(eb(this),this.start()))}},Xe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Xe.M=function(){XC.Z.M.call(this),eb(this),delete this.g};class OF extends Qu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:yA(this)}M(){super.M(),this.g&&(Lt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ev(n){Qu.call(this),this.h=n,this.g={}}oi(Ev,Qu);var vA=[];function wA(n,e,t,r){Array.isArray(t)||(t&&(vA[0]=t.toString()),t=vA);for(var o=0;o<t.length;o++){var u=fA(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function EA(n){UC(n.g,function(e,t){this.g.hasOwnProperty(t)&&ym(e)},n),n.g={}}function Cv(){this.g=!0}function Zf(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<o.length;c++)o[c]=""}}}return YC(t)}catch(g){return e}}(n,t)+(r?" "+r:"")})}Ev.prototype.M=function(){Ev.Z.M.call(this),EA(this)},Ev.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Cv.prototype.Aa=function(){this.g=!1},Cv.prototype.info=function(){};var qd={},pP=null;function bv(){return pP=pP||new un}function CA(n){Ei.call(this,qd.Ma,n)}function wm(n){const e=bv();Bi(e,new CA(e,n))}function Kf(n,e){Ei.call(this,qd.STAT_EVENT,n),this.stat=e}function ji(n){const e=bv();Bi(e,new Kf(e,n))}function gP(n,e){Ei.call(this,qd.Na,n),this.size=e}function Em(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Lt.setTimeout(function(){n()},e)}qd.Ma="serverreachability",oi(CA,Ei),qd.STAT_EVENT="statevent",oi(Kf,Ei),qd.Na="timingevent",oi(gP,Ei);var nb={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},mP={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function bA(){}function IA(){}bA.prototype.h=null;var ib,Cm={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function rb(){Ei.call(this,"d")}function TA(){Ei.call(this,"c")}function Tv(){}function bm(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Ev(this),this.P=kF,this.W=new XC(n=Hd?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new $o}function $o(){this.i=null,this.g="",this.h=!1}oi(rb,Ei),oi(TA,Ei),oi(Tv,bA),Tv.prototype.g=function(){return new XMLHttpRequest},Tv.prototype.i=function(){return{}},ib=new Tv;var kF=45e3,Dv={},Sv={};function Av(n,e,t){n.K=1,n.v=Qd(Ys(e)),n.s=t,n.U=!0,sb(n,null)}function sb(n,e){n.F=Date.now(),Wd(n),n.A=Ys(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Pv(t.h,"t",r),n.C=0,t=n.l.H,n.h=new $o,n.g=Ce(n.l,t?e:null,!n.s),0<n.O&&(n.L=new OF(wi(n.Ia,n,n.g),n.O)),wA(n.V,n.g,"readystatechange",n.gb),e=n.H?BC(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),wm(1),function(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var c="",g=u.split("&"),y=0;y<g.length;y++){var C=g[y].split("=");if(1<C.length){var S=C[0];C=C[1];var x=S.split("_");c=2<=x.length&&"type"==x[1]?c+(S+"=")+C+"&":c+(S+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function ob(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function xv(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=ab(n,t),o==Sv){4==e&&(n.o=4,ji(14),r=!1),Zf(n.j,n.m,null,"[Incomplete Response]");break}if(o==Dv){n.o=4,ji(15),Zf(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Zf(n.j,n.m,o,null),ub(n,o)}ob(n)&&o!=Sv&&o!=Dv&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ji(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),R(e),e.L=!0,ji(11))):(Zf(n.j,n.m,t,"[Invalid Chunked Response]"),fc(n),Yf(n))}function ab(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Sv:(t=Number(e.substring(t,r)),isNaN(t)?Dv:(r+=1)+t>e.length?Sv:(e=e.substr(r,t),n.C=r+t,e))}function Wd(n){n.Y=Date.now()+n.P,Im(n,n.P)}function Im(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Em(wi(n.eb,n),e)}function zd(n){n.B&&(Lt.clearTimeout(n.B),n.B=null)}function Yf(n){0==n.l.G||n.I||q(n.l,n)}function fc(n){zd(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,eb(n.W),EA(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function ub(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Xd(t.i,n)))if(t.I=n.N,!n.J&&Xd(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(C){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Em(wi(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;F(t),i(t)}T(t),ji(18)}if(1>=su(t.i)&&t.ka){try{t.ka()}catch(C){}t.ka=void 0}}else de(t,11)}else if((n.J||t.g==n)&&F(t),!cv(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.U=C[0],C=C[1],2==t.G)if("c"==C[0]){t.J=C[1],t.la=C[2];const S=C[3];null!=S&&(t.ma=S,t.h.info("VER="+t.ma));const x=C[4];null!=x&&(t.za=x,t.h.info("SVER="+t.za));const O=C[5];null!=O&&"number"==typeof O&&0<O&&(t.K=r=1.5*O,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const $=n.g;if($){const Z=$.g?$.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Z){var u=r.i;!u.g&&(as(Z,"spdy")||as(Z,"quic")||as(Z,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(mc(u,u.h),u.h=null))}if(r.D){const ye=$.g?$.g.getResponseHeader("X-HTTP-Session-Id"):null;ye&&(r.sa=ye,Yn(r.F,r.D,ye))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=ke(r,r.H?r.la:null,r.W),c.J){xm(r.i,c);var g=c,y=r.K;y&&g.setTimeout(y),g.B&&(zd(g),Wd(g)),r.g=c}else b(r);0<t.l.length&&l(t)}else"stop"!=C[0]&&"close"!=C[0]||de(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?de(t,7):BA(t):"noop"!=C[0]&&t.j&&t.j.wa(C),t.A=0)}wm(4)}catch(C){}}function Rv(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(gm(n)||"string"==typeof n)QS(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(gm(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;o=(r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(gm(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n)).length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function Qf(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Qf)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function lb(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Zd(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)Zd(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function Zd(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Xe=bm.prototype).setTimeout=function(n){this.P=n},Xe.gb=function(n){n=n.target;const e=this.L;e&&3==_c(n)?e.l():this.Ia(n)},Xe.Ia=function(n){try{if(n==this.g)e:{const S=_c(this.g);var e=this.g.Da();const x=this.g.ba();if(!(3>S)&&(3!=S||Hd||this.g&&(this.h.h||this.g.ga()||xP(this.g)))){this.I||4!=S||7==e||wm(8==e||0>=x?3:2),zd(this);var t=this.g.ba();this.N=t;t:if(ob(this)){var r=xP(this.g);n="";var o=r.length,u=4==_c(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){fc(this),Yf(this);var c="";break t}this.h.i=new Lt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function(n,e,t,r,o,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,S,t),this.i){if(this.$&&!this.J){t:{if(this.g){var g,y=this.g;if((g=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!cv(g)){var C=g;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,ji(12),fc(this),Yf(this);break e}Zf(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ub(this,t)}this.U?(xv(this,S,c),Hd&&this.i&&3==S&&(wA(this.V,this.W,"tick",this.fb),this.W.start())):(Zf(this.j,this.m,c,null),ub(this,c)),4==S&&fc(this),this.i&&!this.I&&(4==S?q(this.l,this):(this.i=!1,Wd(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,ji(12)):(this.o=0,ji(13)),fc(this),Yf(this)}}}catch(S){}},Xe.fb=function(){if(this.g){var n=_c(this.g),e=this.g.ga();this.C<e.length&&(zd(this),xv(this,n,e),this.i&&4!=n&&Wd(this))}},Xe.cancel=function(){this.I=!0,fc(this)},Xe.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(wm(3),ji(17)),fc(this),this.o=2,Yf(this)):Im(this,this.Y-n)},(Xe=Qf.prototype).R=function(){lb(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Xe.T=function(){return lb(this),this.g.concat()},Xe.get=function(n,e){return Zd(this.h,n)?this.h[n]:e},Xe.set=function(n,e){Zd(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Xe.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var Nv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Rr(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Rr){this.g=void 0!==e?e:n.g,Kd(this,n.j),this.s=n.s,Tm(this,n.i),Yd(this,n.m),this.l=n.l,e=n.h;var t=new Jd;t.i=e.i,e.g&&(t.g=new Qf(e.g),t.h=e.h),Mv(this,t),this.o=n.o}else n&&(t=String(n).match(Nv))?(this.g=!!e,Kd(this,t[1]||"",!0),this.s=Dm(t[2]||""),Tm(this,t[3]||"",!0),Yd(this,t[4]),this.l=Dm(t[5]||"",!0),Mv(this,t[6]||"",!0),this.o=Dm(t[7]||"")):(this.g=!!e,this.h=new Jd(null,this.g))}function Ys(n){return new Rr(n)}function Kd(n,e,t){n.j=t?Dm(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Tm(n,e,t){n.i=t?Dm(e,!0):e}function Yd(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Mv(n,e,t){e instanceof Jd?(n.h=e,function(n,e){e&&!n.j&&(gc(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(AA(this,r),Pv(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Sm(e,pc)),n.h=new Jd(e,n.g))}function Yn(n,e,t){n.h.set(e,t)}function Qd(n){return Yn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Dm(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Sm(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,DA),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function DA(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Rr.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Sm(e,SA,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Sm(e,SA,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Sm(t,"/"==t.charAt(0)?CP:EP,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Sm(t,Am)),n.join("")};var SA=/[#\/\?@]/g,EP=/[#\?:]/g,CP=/[#\?]/g,pc=/[#\?@]/g,Am=/#/g;function Jd(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function gc(n){n.g||(n.g=new Qf,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function AA(n,e){gc(n),e=Jf(n,e),Zd(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Zd((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&lb(n)))}function xA(n,e){return gc(n),e=Jf(n,e),Zd(n.g.h,e)}function Pv(n,e,t){AA(n,e),0<t.length&&(n.i=null,n.g.set(Jf(n,e),XS(t)),n.h+=t.length)}function Jf(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function MA(n){this.l=n||bP,n=Lt.PerformanceNavigationTiming?0<(n=Lt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Lt.g&&Lt.g.Ea&&Lt.g.Ea()&&Lt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Xe=Jd.prototype).add=function(n,e){gc(this),this.i=null,n=Jf(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Xe.forEach=function(n,e){gc(this),this.g.forEach(function(t,r){QS(t,function(o){n.call(e,o,r,this)},this)},this)},Xe.T=function(){gc(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},Xe.R=function(n){gc(this);var e=[];if("string"==typeof n)xA(this,n)&&(e=JS(e,this.g.get(Jf(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=JS(e,n[t])}return e},Xe.set=function(n,e){return gc(this),this.i=null,xA(this,n=Jf(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Xe.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Xe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=o;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var bP=10;function PA(n){return!!n.h||!!n.g&&n.g.size>=n.j}function su(n){return n.h?1:n.g?n.g.size:0}function Xd(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function mc(n,e){n.g?n.g.add(e):n.h=e}function xm(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function eh(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return XS(n.i)}function cb(){}function IP(){this.g=new cb}function TP(n,e,t){const r=t||"";try{Rv(n,function(o,u){let c=o;Gf(o)&&(c=YC(o)),e.push(r+u+"="+encodeURIComponent(c))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Rm(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function Xf(n){this.l=n.$b||null,this.j=n.ib||!1}function Nm(n,e){un.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Mm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}MA.prototype.cancel=function(){if(this.i=eh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},cb.prototype.stringify=function(n){return Lt.JSON.stringify(n,void 0)},cb.prototype.parse=function(n){return Lt.JSON.parse(n,void 0)},oi(Xf,bA),Xf.prototype.g=function(){return new Nm(this.l,this.j)},Xf.prototype.i=function(n){return function(){return n}}({}),oi(Nm,un);var Mm=0;function kA(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Pm(n){n.readyState=4,n.l=null,n.j=null,n.A=null,ep(n)}function ep(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Xe=Nm.prototype).open=function(n,e){if(this.readyState!=Mm)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,ep(this)},Xe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Lt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Xe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pm(this)),this.readyState=Mm},Xe.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,ep(this)),this.g&&(this.readyState=3,ep(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Lt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;kA(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Xe.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Pm(this):ep(this),3==this.readyState&&kA(this)}},Xe.Ua=function(n){this.g&&(this.response=this.responseText=n,Pm(this))},Xe.Ta=function(n){this.g&&(this.response=n,Pm(this))},Xe.ha=function(){this.g&&Pm(this)},Xe.setRequestHeader=function(n,e){this.v.append(n,e)},Xe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Xe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Nm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var th=Lt.JSON.parse;function wr(n){un.call(this),this.headers=new Qf,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=FA,this.K=this.L=!1}oi(wr,un);var FA="",DP=/^https?$/i,FF=["POST","PUT"];function VF(n){return"content-type"==n.toLowerCase()}function SP(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,LA(n),db(n)}function LA(n){n.D||(n.D=!0,Bi(n,"complete"),Bi(n,"error"))}function VA(n){if(n.h&&void 0!==pm&&(!n.C[1]||4!=_c(n)||2!=n.ba()))if(n.v&&4==_c(n))tb(n.Fa,0,n);else if(Bi(n,"readystatechange"),4==_c(n)){n.h=!1;try{const g=n.ba();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===g){var o=String(n.H).match(Nv)[1]||null;if(!o&&Lt.self&&Lt.self.location){var u=Lt.self.location.protocol;o=u.substr(0,u.length-1)}r=!DP.test(o?o.toLowerCase():"")}t=r}if(t)Bi(n,"complete"),Bi(n,"success");else{n.m=6;try{var c=2<_c(n)?n.g.statusText:""}catch(y){c=""}n.j=c+" ["+n.ba()+"]",LA(n)}}finally{db(n)}}}function db(n,e){if(n.g){AP(n);const t=n.g,r=n.C[0]?lv:null;n.g=null,n.C=null,e||Bi(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function AP(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Lt.clearTimeout(n.A),n.A=null)}function _c(n){return n.g?n.g.readyState:0}function xP(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case FA:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function UA(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function(n){let e="";return UC(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Yn(n,e,t))}function Ov(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function NP(n){this.za=0,this.l=[],this.h=new Cv,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ov("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ov("baseRetryDelayMs",5e3,n),this.$a=Ov("retryDelaySeedMs",1e4,n),this.Ya=Ov("forwardChannelMaxRetries",2,n),this.ra=Ov("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new MA(n&&n.concurrentRequestLimit),this.Ca=new IP,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function BA(n){if(s(n),3==n.G){var e=n.V++,t=Ys(n.F);Yn(t,"SID",n.J),Yn(t,"RID",e),Yn(t,"TYPE","terminate"),_(n,t),(e=new bm(n,n.h,e,void 0)).K=2,e.v=Qd(Ys(t)),t=!1,Lt.navigator&&Lt.navigator.sendBeacon&&(t=Lt.navigator.sendBeacon(e.v.toString(),"")),!t&&Lt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Ce(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Wd(e)}ie(n)}function i(n){n.g&&(R(n),n.g.cancel(),n.g=null)}function s(n){i(n),n.u&&(Lt.clearTimeout(n.u),n.u=null),F(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Lt.clearTimeout(n.m),n.m=null)}function a(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&l(n)}function l(n){PA(n.i)||n.m||(n.m=!0,mA(n.Ha,n),n.C=0)}function f(n,e){var t;t=e?e.m:n.V++;const r=Ys(n.F);Yn(r,"SID",n.J),Yn(r,"RID",t),Yn(r,"AID",n.U),_(n,r),n.o&&n.s&&UA(r,n.o,n.s),t=new bm(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=w(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),mc(n.i,t),Av(t,r,e)}function _(n,e){n.j&&Rv({},function(t,r){Yn(e,r,t)})}function w(n,e,t){t=Math.min(n.l.length,t);var r=n.j?wi(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=o[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let g=!0;for(let y=0;y<t;y++){let C=o[y].h;const S=o[y].g;if(C-=u,0>C)u=Math.max(0,o[y].h-100),g=!1;else try{TP(S,c,"req"+C+"_")}catch(x){r&&r(S)}}if(g){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function b(n){n.g||n.u||(n.Y=1,mA(n.Ga,n),n.A=0)}function T(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Em(wi(n.Ga,n),Y(n,n.A)),n.A++,0))}function R(n){null!=n.B&&(Lt.clearTimeout(n.B),n.B=null)}function P(n){n.g=new bm(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Ys(n.oa);Yn(e,"RID","rpc"),Yn(e,"SID",n.J),Yn(e,"CI",n.N?"0":"1"),Yn(e,"AID",n.U),_(n,e),Yn(e,"TYPE","xmlhttp"),n.o&&n.s&&UA(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Qd(Ys(e)),t.s=null,t.U=!0,sb(t,n)}function F(n){null!=n.v&&(Lt.clearTimeout(n.v),n.v=null)}function q(n,e){var t=null;if(n.g==e){F(n),R(n),n.g=null;var r=2}else{if(!Xd(n.i,e))return;t=e.D,xm(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Bi(r=bv(),new gP(r,t,e,o)),l(n)}else b(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function(n,e){return!(su(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Em(wi(n.Ha,n,e),Y(n,n.C)),n.C++,0)))}(n,e)||2==r&&T(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:de(n,5);break;case 4:de(n,10);break;case 3:de(n,6);break;default:de(n,2)}}function Y(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function de(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=wi(n.jb,n);t||(t=new Rr("//www.google.com/images/cleardot.gif"),Lt.location&&"http"==Lt.location.protocol||Kd(t,"https"),Qd(t)),function(n,e){const t=new Cv;if(Lt.Image){const r=new Image;r.onload=qf(Rm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=qf(Rm,t,r,"TestLoadImage: error",!1,e),r.onabort=qf(Rm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=qf(Rm,t,r,"TestLoadImage: timeout",!1,e),Lt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ji(2);n.G=0,n.j&&n.j.va(e),ie(n),s(n)}function ie(n){n.G=0,n.I=-1,n.j&&((0!=eh(n.i).length||0!=n.l.length)&&(n.i.i.length=0,XS(n.l),n.l.length=0),n.j.ua())}function ke(n,e,t){let r=function(n){return n instanceof Rr?Ys(n):new Rr(n,void 0)}(t);if(""!=r.i)e&&Tm(r,e+"."+r.i),Yd(r,r.m);else{const o=Lt.location;r=function(n,e,t,r){var o=new Rr(null,void 0);return n&&Kd(o,n),e&&Tm(o,e),t&&Yd(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&UC(n.aa,function(o,u){Yn(r,u,o)}),t=n.sa,(e=n.D)&&t&&Yn(r,e,t),Yn(r,"VER",n.ma),_(n,r),r}function Ce(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new wr(t&&n.Ba&&!n.qa?new Xf({ib:!0}):n.qa)).L=n.H,e}function ut(){}function vt(){if(Wf&&!(10<=Number(aP)))throw Error("Environmental error: no available transport.")}function It(n,e){un.call(this),this.g=new NP(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!cv(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!cv(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ou(this)}function Fr(n){rb.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Qs(){TA.call(this),this.status=1}function ou(n){this.g=n}(Xe=wr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ib.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:ib),this.g.onreadystatechange=wi(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void SP(this,u)}n=t||"";const o=new Qf(this.headers);r&&Rv(r,function(u,c){o.set(c,u)}),r=function(n){e:{var e=VF;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=Lt.FormData&&n instanceof Lt.FormData,!(0<=jo(FF,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{AP(this),0<this.B&&((this.K=function(n){return Wf&&dA()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=wi(this.pa,this)):this.A=tb(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){SP(this,u)}},Xe.pa=function(){void 0!==pm&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Bi(this,"timeout"),this.abort(8))},Xe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Bi(this,"complete"),Bi(this,"abort"),db(this))},Xe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),db(this,!0)),wr.Z.M.call(this)},Xe.Fa=function(){this.s||(this.F||this.v||this.l?VA(this):this.cb())},Xe.cb=function(){VA(this)},Xe.ba=function(){try{return 2<_c(this)?this.g.status:-1}catch(n){return-1}},Xe.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Xe.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),th(e)}},Xe.Da=function(){return this.m},Xe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Xe=NP.prototype).ma=8,Xe.G=1,Xe.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Xe.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new bm(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=BC(u),sP(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=w(this,o,e),Yn(t=Ys(this.F),"RID",n),Yn(t,"CVER",22),this.D&&Yn(t,"X-HTTP-Session-Id",this.D),_(this,t),this.o&&u&&UA(t,this.o,u),mc(this.i,o),this.Ra&&Yn(t,"TYPE","init"),this.ja?(Yn(t,"$req",e),Yn(t,"SID","null"),o.$=!0,Av(o,t,null)):Av(o,t,e),this.G=2}}else 3==this.G&&(n?f(this,n):0==this.l.length||PA(this.i)||f(this))},Xe.Ga=function(){if(this.u=null,P(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Em(wi(this.bb,this),n)}},Xe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ji(10),i(this),P(this))},Xe.ab=function(){null!=this.v&&(this.v=null,i(this),T(this),ji(19))},Xe.jb=function(n){n?(this.h.info("Successfully pinged google.com"),ji(2)):(this.h.info("Failed to ping google.com"),ji(1))},(Xe=ut.prototype).xa=function(){},Xe.wa=function(){},Xe.va=function(){},Xe.ua=function(){},Xe.Oa=function(){},vt.prototype.g=function(n,e){return new It(n,e)},oi(It,un),It.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),mA(wi(n.hb,n,e))),ji(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=ke(n,null,n.W),l(n)},It.prototype.close=function(){BA(this.g)},It.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,a(this.g,e)}else this.v?((e={}).__data__=YC(n),a(this.g,e)):a(this.g,n)},It.prototype.M=function(){this.g.j=null,delete this.j,BA(this.g),delete this.g,It.Z.M.call(this)},oi(Fr,rb),oi(Qs,TA),oi(ou,ut),ou.prototype.xa=function(){Bi(this.g,"a")},ou.prototype.wa=function(n){Bi(this.g,new Fr(n))},ou.prototype.va=function(n){Bi(this.g,new Qs(n))},ou.prototype.ua=function(){Bi(this.g,"b")},vt.prototype.createWebChannel=vt.prototype.g,It.prototype.send=It.prototype.u,It.prototype.open=It.prototype.m,It.prototype.close=It.prototype.close,nb.NO_ERROR=0,nb.TIMEOUT=8,nb.HTTP_ERROR=6,mP.COMPLETE="complete",IA.EventType=Cm,Cm.OPEN="a",Cm.CLOSE="b",Cm.ERROR="c",Cm.MESSAGE="d",un.prototype.listen=un.prototype.N,wr.prototype.listenOnce=wr.prototype.O,wr.prototype.getLastError=wr.prototype.La,wr.prototype.getLastErrorCode=wr.prototype.Da,wr.prototype.getStatus=wr.prototype.ba,wr.prototype.getResponseJson=wr.prototype.Qa,wr.prototype.getResponseText=wr.prototype.ga,wr.prototype.send=wr.prototype.ea;var tp=xr.createWebChannelTransport=function(){return new vt},np=xr.getStatEventTarget=function(){return bv()},yc=xr.ErrorCode=nb,hb=xr.EventType=mP,fb=xr.Event=qd,kv=xr.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},pb=xr.FetchXmlHttpFactory=Xf,rp=xr.WebChannel=IA,H2=xr.XhrIo=wr;const UF="@firebase/firestore";class ls{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ls.UNAUTHENTICATED=new ls(null),ls.GOOGLE_CREDENTIALS=new ls("google-credentials-uid"),ls.FIRST_PARTY=new ls("first-party-uid"),ls.MOCK_USER=new ls("mock-user");let Fv="9.6.11";const ip=new da.Yd("@firebase/firestore");function MP(){return ip.logLevel}function Ve(n,...e){if(ip.logLevel<=da.in.DEBUG){const t=e.map(PP);ip.debug(`Firestore (${Fv}): ${n}`,...t)}}function ui(n,...e){if(ip.logLevel<=da.in.ERROR){const t=e.map(PP);ip.error(`Firestore (${Fv}): ${n}`,...t)}}function gb(n,...e){if(ip.logLevel<=da.in.WARN){const t=e.map(PP);ip.warn(`Firestore (${Fv}): ${n}`,...t)}}function PP(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function st(n="Unexpected state"){const e=`FIRESTORE (${Fv}) INTERNAL ASSERTION FAILED: `+n;throw ui(e),new Error(e)}function Vt(n,e){n||st()}function Ye(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends k.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class $i{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class BF{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class W2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ls.UNAUTHENTICATED))}shutdown(){}}class z2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Z2{constructor(e){this.t=e,this.currentUser=ls.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let c=new $i;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new $i,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const C=c;e.enqueueRetryable((0,we.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},y=C=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(C=>y(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?y(C):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new $i)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Vt("string"==typeof r.accessToken),new BF(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Vt(null===e||"string"==typeof e),new ls(e)}}class K2{constructor(e,t,r){this.type="FirstParty",this.user=ls.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class Y2{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new K2(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ls.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jF{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Q2{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.p;return this.p=u.token,Ve("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Vt("string"==typeof t.token),this.p=t.token,new jF(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class ba{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function J2(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}ba.A=-1;class $F{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=J2(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Yt(n,e){return n<e?-1:n>e?1:0}function Lv(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function HF(n){return n+"\0"}class Qr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pe(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qr.fromMillis(Date.now())}static fromDate(e){return Qr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Qr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Yt(this.nanoseconds,e.nanoseconds):Yt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class xt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new xt(e)}static min(){return new xt(new Qr(0,0))}static max(){return new xt(new Qr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function GF(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Om(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function qF(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class mb{constructor(e,t,r){void 0===t?t=0:t>e.length&&st(),void 0===r?r=e.length-t:r>e.length-t&&st(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===mb.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof mb?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),c=t.get(o);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class yn extends mb{construct(e,t,r){return new yn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new yn(t)}static emptyPath(){return new yn([])}}const X2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hi extends mb{construct(e,t,r){return new Hi(e,t,r)}static isValidIdentifier(e){return X2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Hi(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Pe(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const g=e[o];if("\\"===g){if(o+1===e.length)throw new Pe(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new Pe(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,o+=2}else"`"===g?(c=!c,o++):"."!==g||c?(r+=g,o++):(u(),o++)}if(u(),c)throw new Pe(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Hi(t)}static emptyPath(){return new Hi([])}}class Vv{constructor(e){this.fields=e,e.sort(Hi.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Lv(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ci{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ci(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Ci(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Yt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ci.EMPTY_BYTE_STRING=new Ci("");const tB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sp(n){if(Vt(!!n),"string"==typeof n){let e=0;const t=tB.exec(n);if(Vt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Lr(n.seconds),nanos:Lr(n.nanos)}}function Lr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function km(n){return"string"==typeof n?Ci.fromBase64String(n):Ci.fromUint8Array(n)}function OP(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function WF(n){const e=n.mapValue.fields.__previous_value__;return OP(e)?WF(e):e}function _b(n){const e=sp(n.mapValue.fields.__local_write_time__.timestampValue);return new Qr(e.seconds,e.nanos)}class nB{constructor(e,t,r,o,u,c,g,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=g,this.useFetchStreams=y}}class nh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new nh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof nh&&e.projectId===this.projectId&&e.database===this.database}}function Fm(n){return null==n}function yb(n){return 0===n&&1/n==-1/0}function zF(n){return"number"==typeof n&&Number.isInteger(n)&&!yb(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class qe{constructor(e){this.path=e}static fromPath(e){return new qe(yn.fromString(e))}static fromName(e){return new qe(yn.fromString(e).popFirst(5))}static empty(){return new qe(yn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===yn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return yn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new yn(e.slice()))}}const ZF={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},KF={nullValue:"NULL_VALUE"};function Lm(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?OP(n)?4:XF(n)?9:10:st()}function vc(n,e){if(n===e)return!0;const t=Lm(n);if(t!==Lm(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return _b(n).isEqual(_b(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=sp(r.timestampValue),c=sp(o.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,km(n.bytesValue).isEqual(km(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Lr(r.geoPointValue.latitude)===Lr(o.geoPointValue.latitude)&&Lr(r.geoPointValue.longitude)===Lr(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Lr(r.integerValue)===Lr(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Lr(r.doubleValue),c=Lr(o.doubleValue);return u===c?yb(u)===yb(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return Lv(n.arrayValue.values||[],e.arrayValue.values||[],vc);case 10:return function(r,o){const u=r.mapValue.fields||{},c=o.mapValue.fields||{};if(GF(u)!==GF(c))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===c[g]||!vc(u[g],c[g])))return!1;return!0}(n,e);default:return st()}var o}function vb(n,e){return void 0!==(n.values||[]).find(t=>vc(t,e))}function op(n,e){if(n===e)return 0;const t=Lm(n),r=Lm(e);if(t!==r)return Yt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Yt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const c=Lr(o.integerValue||o.doubleValue),g=Lr(u.integerValue||u.doubleValue);return c<g?-1:c>g?1:c===g?0:isNaN(c)?isNaN(g)?0:-1:1}(n,e);case 3:return YF(n.timestampValue,e.timestampValue);case 4:return YF(_b(n),_b(e));case 5:return Yt(n.stringValue,e.stringValue);case 6:return function(o,u){const c=km(o),g=km(u);return c.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const c=o.split("/"),g=u.split("/");for(let y=0;y<c.length&&y<g.length;y++){const C=Yt(c[y],g[y]);if(0!==C)return C}return Yt(c.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const c=Yt(Lr(o.latitude),Lr(u.latitude));return 0!==c?c:Yt(Lr(o.longitude),Lr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const c=o.values||[],g=u.values||[];for(let y=0;y<c.length&&y<g.length;++y){const C=op(c[y],g[y]);if(C)return C}return Yt(c.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){const c=o.fields||{},g=Object.keys(c),y=u.fields||{},C=Object.keys(y);g.sort(),C.sort();for(let S=0;S<g.length&&S<C.length;++S){const x=Yt(g[S],C[S]);if(0!==x)return x;const O=op(c[g[S]],y[C[S]]);if(0!==O)return O}return Yt(g.length,C.length)}(n.mapValue,e.mapValue);default:throw st()}}function YF(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Yt(n,e);const t=sp(n),r=sp(e),o=Yt(t.seconds,r.seconds);return 0!==o?o:Yt(t.nanos,r.nanos)}function Uv(n){return kP(n)}function kP(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=sp(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?km(n.bytesValue).toBase64():"referenceValue"in n?qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const c of r.values||[])u?u=!1:o+=",",o+=kP(c);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const g of o)c?c=!1:u+=",",u+=`${g}:${kP(r.fields[g])}`;return u+"}"}(n.mapValue):st();var e}function Vm(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function FP(n){return!!n&&"integerValue"in n}function wb(n){return!!n&&"arrayValue"in n}function QF(n){return!!n&&"nullValue"in n}function JF(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function jA(n){return!!n&&"mapValue"in n}function Eb(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Om(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Eb(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Eb(n.arrayValue.values[t]);return e}return Object.assign({},n)}function XF(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function rB(n){return"nullValue"in n?KF:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Vm(nh.empty(),qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:st()}function iB(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Vm(nh.empty(),qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ZF:st()}function eL(n,e){return void 0===n?e:void 0===e||op(n,e)>0?n:e}function tL(n,e){return void 0===n?e:void 0===e||op(n,e)<0?n:e}class Ss{constructor(e){this.value=e}static empty(){return new Ss({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!jA(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Eb(t)}setAll(e){let t=Hi.emptyPath(),r={},o=[];e.forEach((c,g)=>{if(!t.isImmediateParentOf(g)){const y=this.getFieldsMap(t);this.applyChanges(y,r,o),r={},o=[],t=g.popLast()}c?r[g.lastSegment()]=Eb(c):o.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());jA(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];jA(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Om(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Ss(Eb(this.value))}}function nL(n){const e=[];return Om(n.fields,(t,r)=>{const o=new Hi([t]);if(jA(r)){const u=nL(r.mapValue).fields;if(0===u.length)e.push(o);else for(const c of u)e.push(o.child(c))}else e.push(o)}),new Vv(e)}class lr{constructor(e,t,r,o,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=c}static newInvalidDocument(e){return new lr(e,0,xt.min(),xt.min(),Ss.empty(),0)}static newFoundDocument(e,t,r){return new lr(e,1,t,xt.min(),r,0)}static newNoDocument(e,t){return new lr(e,2,t,xt.min(),Ss.empty(),0)}static newUnknownDocument(e,t){return new lr(e,3,t,xt.min(),Ss.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ss.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ss.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof lr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new lr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class $A{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function LP(n){return n.fields.find(e=>2===e.kind)}function Um(n){return n.fields.filter(e=>2!==e.kind)}$A.UNKNOWN_ID=-1;class HA{constructor(e,t){this.fieldPath=e,this.kind=t}}class Cb{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Cb(0,rh.min())}}function rL(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=xt.fromTimestamp(1e9===r?new Qr(t+1,0):new Qr(t,r));return new rh(o,qe.empty(),e)}function sB(n){return new rh(n.readTime,n.key,-1)}class rh{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new rh(xt.min(),qe.empty(),-1)}static max(){return new rh(xt.max(),qe.empty(),-1)}}function oB(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=qe.comparator(n.documentKey,e.documentKey),0!==t?t:Yt(n.largestBatchId,e.largestBatchId))}class aB{constructor(e,t=null,r=[],o=[],u=null,c=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=c,this.endAt=g,this.P=null}}function iL(n,e=null,t=[],r=[],o=null,u=null,c=null){return new aB(n,e,t,r,o,u,c)}function Bm(n){const e=Ye(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Uv(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Fm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Uv(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Uv(r)).join(",")),e.P=t}return e.P}function bb(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!mB(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!vc(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!lL(n.startAt,e.startAt)&&lL(n.endAt,e.endAt)}function GA(n){return qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function qA(n,e){return n.filters.filter(t=>t instanceof cs&&t.field.isEqual(e))}function sL(n,e,t){let r,o=!0;for(const u of qA(n,e)){let c,g=!0;switch(u.op){case"<":case"<=":c=rB(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,g=!1;break;case"!=":case"not-in":c=KF}eL(r,c)===c&&(r=c,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];eL(r,c)===c&&(r=c,o=t.inclusive);break}return{value:r,inclusive:o}}function oL(n,e,t){let r,o=!0;for(const u of qA(n,e)){let c,g=!0;switch(u.op){case">=":case">":c=iB(u.value),g=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,g=!1;break;case"!=":case"not-in":c=ZF}tL(r,c)===c&&(r=c,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];tL(r,c)===c&&(r=c,o=t.inclusive);break}return{value:r,inclusive:o}}class cs extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new lB(e,t,r):"array-contains"===t?new hB(e,r):"in"===t?new fB(e,r):"not-in"===t?new pB(e,r):"array-contains-any"===t?new gB(e,r):new cs(e,t,r)}static V(e,t,r){return"in"===t?new cB(e,r):new dB(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(op(t,this.value)):null!==t&&Lm(this.value)===Lm(t)&&this.v(op(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class lB extends cs{constructor(e,t,r){super(e,t,r),this.key=qe.fromName(r.referenceValue)}matches(e){const t=qe.comparator(e.key,this.key);return this.v(t)}}class cB extends cs{constructor(e,t){super(e,"in",t),this.keys=aL(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class dB extends cs{constructor(e,t){super(e,"not-in",t),this.keys=aL(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function aL(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>qe.fromName(r.referenceValue))}class hB extends cs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wb(t)&&vb(t.arrayValue,this.value)}}class fB extends cs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&vb(this.value.arrayValue,t)}}class pB extends cs{constructor(e,t){super(e,"not-in",t)}matches(e){if(vb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!vb(this.value.arrayValue,t)}}class gB extends cs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wb(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>vb(this.value.arrayValue,r))}}class ap{constructor(e,t){this.position=e,this.inclusive=t}}class Bv{constructor(e,t="asc"){this.field=e,this.dir=t}}function mB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function uL(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],c=n.position[o];if(r=u.field.isKeyField()?qe.comparator(qe.fromName(c.referenceValue),t.key):op(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function lL(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!vc(n.position[t],e.position[t]))return!1;return!0}class ih{constructor(e,t=null,r=[],o=[],u=null,c="F",g=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=c,this.startAt=g,this.endAt=y,this.D=null,this.C=null}}function cL(n,e,t,r,o,u,c,g){return new ih(n,e,t,r,o,u,c,g)}function jv(n){return new ih(n)}function WA(n){return!Fm(n.limit)&&"F"===n.limitType}function zA(n){return!Fm(n.limit)&&"L"===n.limitType}function VP(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function UP(n){for(const e of n.filters)if(e.S())return e.field;return null}function BP(n){return null!==n.collectionGroup}function $v(n){const e=Ye(n);if(null===e.D){e.D=[];const t=UP(e),r=VP(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Bv(t)),e.D.push(new Bv(Hi.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Bv(Hi.keyField(),u))}}}return e.D}function au(n){const e=Ye(n);if(!e.C)if("F"===e.limitType)e.C=iL(e.path,e.collectionGroup,$v(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of $v(e))t.push(new Bv(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new ap(e.endAt.position,!e.endAt.inclusive):null,o=e.startAt?new ap(e.startAt.position,!e.startAt.inclusive):null;e.C=iL(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function dL(n,e,t){return new ih(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ib(n,e){return bb(au(n),au(e))&&n.limitType===e.limitType}function hL(n){return`${Bm(au(n))}|lt:${n.limitType}`}function jP(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Uv(r.value)}`;var r}).join(", ")}]`),Fm(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Uv(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Uv(t)).join(",")),`Target(${e})`}(au(n))}; limitType=${n.limitType})`}function $P(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):qe.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,c){const g=uL(o,u,c);return o.inclusive?g<=0:g<0}(t.startAt,$v(t),r)||t.endAt&&!function(o,u,c){const g=uL(o,u,c);return o.inclusive?g>=0:g>0}(t.endAt,$v(t),r)));var t,r}function fL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function pL(n){return(e,t)=>{let r=!1;for(const o of $v(n)){const u=_B(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function _B(n,e,t){const r=n.field.isKeyField()?qe.comparator(e.key,t.key):function(o,u,c){const g=u.data.field(o),y=c.data.field(o);return null!==g&&null!==y?op(g,y):st()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}function gL(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yb(e)?"-0":e}}function mL(n){return{integerValue:""+n}}function _L(n,e){return zF(e)?mL(e):gL(n,e)}class ZA{constructor(){this._=void 0}}function yB(n,e,t){return n instanceof Hv?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof jm?vL(n,e):n instanceof $m?wL(n,e):function(r,o){const u=yL(r,o),c=EL(u)+EL(r.k);return FP(u)&&FP(r.k)?mL(c):gL(r.M,c)}(n,e)}function vB(n,e,t){return n instanceof jm?vL(n,e):n instanceof $m?wL(n,e):t}function yL(n,e){return n instanceof Gv?FP(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Hv extends ZA{}class jm extends ZA{constructor(e){super(),this.elements=e}}function vL(n,e){const t=CL(e);for(const r of n.elements)t.some(o=>vc(o,r))||t.push(r);return{arrayValue:{values:t}}}class $m extends ZA{constructor(e){super(),this.elements=e}}function wL(n,e){let t=CL(e);for(const r of n.elements)t=t.filter(o=>!vc(o,r));return{arrayValue:{values:t}}}class Gv extends ZA{constructor(e,t){super(),this.M=e,this.k=t}}function EL(n){return Lr(n.integerValue||n.doubleValue)}function CL(n){return wb(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Tb{constructor(e,t){this.field=e,this.transform=t}}class EB{constructor(e,t){this.version=e,this.transformResults=t}}class li{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new li}static exists(e){return new li(void 0,e)}static updateTime(e){return new li(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function KA(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class YA{}function CB(n,e,t){n instanceof Db?function(r,o,u){const c=r.value.clone(),g=DL(r.fieldTransforms,o,u.transformResults);c.setAll(g),o.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Hm?function(r,o,u){if(!KA(r.precondition,o))return void o.convertToUnknownDocument(u.version);const c=DL(r.fieldTransforms,o,u.transformResults),g=o.data;g.setAll(TL(r)),g.setAll(c),o.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function HP(n,e,t){var o;n instanceof Db?function(r,o,u){if(!KA(r.precondition,o))return;const c=r.value.clone(),g=SL(r.fieldTransforms,u,o);c.setAll(g),o.convertToFoundDocument(IL(o),c).setHasLocalMutations()}(n,e,t):n instanceof Hm?function(r,o,u){if(!KA(r.precondition,o))return;const c=SL(r.fieldTransforms,u,o),g=o.data;g.setAll(TL(r)),g.setAll(c),o.convertToFoundDocument(IL(o),g).setHasLocalMutations()}(n,e,t):KA(n.precondition,o=e)&&o.convertToNoDocument(xt.min())}function bB(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=yL(r.transform,o||null);null!=u&&(null==t&&(t=Ss.empty()),t.set(r.field,u))}return t||null}function bL(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Lv(t,r,(o,u)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof jm&&r instanceof jm||t instanceof $m&&r instanceof $m?Lv(t.elements,r.elements,vc):t instanceof Gv&&r instanceof Gv?vc(t.k,r.k):t instanceof Hv&&r instanceof Hv);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function IL(n){return n.isFoundDocument()?n.version:xt.min()}class Db extends YA{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class Hm extends YA{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function TL(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function DL(n,e,t){const r=new Map;Vt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],c=u.transform,g=e.data.field(u.field);r.set(u.field,vB(c,g,t[o]))}return r}function SL(n,e,t){const r=new Map;for(const o of n){const u=o.transform,c=t.data.field(o.field);r.set(o.field,yB(u,c,e))}return r}class Sb extends YA{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class GP extends YA{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class IB{constructor(e){this.count=e}}var ci,vn;function AL(n){switch(n){default:return st();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function xL(n){if(void 0===n)return ui("GRPC error has no .code"),ge.UNKNOWN;switch(n){case ci.OK:return ge.OK;case ci.CANCELLED:return ge.CANCELLED;case ci.UNKNOWN:return ge.UNKNOWN;case ci.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case ci.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case ci.INTERNAL:return ge.INTERNAL;case ci.UNAVAILABLE:return ge.UNAVAILABLE;case ci.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case ci.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case ci.NOT_FOUND:return ge.NOT_FOUND;case ci.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case ci.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case ci.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case ci.ABORTED:return ge.ABORTED;case ci.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case ci.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case ci.DATA_LOSS:return ge.DATA_LOSS;default:return st()}}(vn=ci||(ci={}))[vn.OK=0]="OK",vn[vn.CANCELLED=1]="CANCELLED",vn[vn.UNKNOWN=2]="UNKNOWN",vn[vn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vn[vn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vn[vn.NOT_FOUND=5]="NOT_FOUND",vn[vn.ALREADY_EXISTS=6]="ALREADY_EXISTS",vn[vn.PERMISSION_DENIED=7]="PERMISSION_DENIED",vn[vn.UNAUTHENTICATED=16]="UNAUTHENTICATED",vn[vn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vn[vn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vn[vn.ABORTED=10]="ABORTED",vn[vn.OUT_OF_RANGE=11]="OUT_OF_RANGE",vn[vn.UNIMPLEMENTED=12]="UNIMPLEMENTED",vn[vn.INTERNAL=13]="INTERNAL",vn[vn.UNAVAILABLE=14]="UNAVAILABLE",vn[vn.DATA_LOSS=15]="DATA_LOSS";class up{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Om(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return qF(this.inner)}size(){return this.innerSize}}class Jr{constructor(e,t){this.comparator=e,this.root=t||ds.EMPTY}insert(e,t){return new Jr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ds.BLACK,null,null))}remove(e){return new Jr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ds.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new QA(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new QA(this.root,e,this.comparator,!1)}getReverseIterator(){return new QA(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new QA(this.root,e,this.comparator,!0)}}class QA{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ds{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:ds.RED,this.left=null!=o?o:ds.EMPTY,this.right=null!=u?u:ds.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new ds(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return ds.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return ds.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ds.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ds.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}ds.EMPTY=null,ds.RED=!0,ds.BLACK=!1,ds.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(n,e,t,r,o){return this}insert(n,e,t){return new ds(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class cr{constructor(e){this.comparator=e,this.data=new Jr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new RL(this.data.getIterator())}getIteratorFrom(e){return new RL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof cr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new cr(this.comparator);return t.data=e,t}}class RL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function qv(n){return n.hasNext()?n.getNext():void 0}const TB=new Jr(qe.comparator);function uu(){return TB}const DB=new Jr(qe.comparator);function qP(){return DB}function Ab(){return new up(n=>n.toString(),(n,e)=>n.isEqual(e))}const SB=new Jr(qe.comparator),AB=new cr(qe.comparator);function Nn(...n){let e=AB;for(const t of n)e=e.add(t);return e}const xB=new cr(Yt);function JA(){return xB}class xb{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Rb.createSynthesizedTargetChangeForCurrentChange(e,t)),new xb(xt.min(),r,JA(),uu(),Nn())}}class Rb{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Rb(Ci.EMPTY_BYTE_STRING,t,Nn(),Nn(),Nn())}}class XA{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class NL{constructor(e,t){this.targetId=e,this.$=t}}class ML{constructor(e,t,r=Ci.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class PL{constructor(){this.B=0,this.L=kL(),this.U=Ci.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Nn(),t=Nn(),r=Nn();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:st()}}),new Rb(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=kL()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class RB{constructor(e){this.nt=e,this.st=new Map,this.it=uu(),this.rt=OL(),this.ot=new cr(Yt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const u=o.target;if(GA(u))if(0===r){const c=new qe(u.path);this.ct(t,c,lr.newNoDocument(c,xt.min()))}else Vt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,c)=>{const g=this.wt(c);if(g){if(u.current&&GA(g.target)){const y=new qe(g.target.path);null!==this.it.get(y)||this.It(c,y)||this.ct(c,y,lr.newNoDocument(y,e))}u.j&&(t.set(c,u.H()),u.J())}});let r=Nn();this.rt.forEach((u,c)=>{let g=!0;c.forEachWhile(y=>{const C=this.wt(y);return!C||2===C.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.it.forEach((u,c)=>c.setReadTime(e));const o=new xb(e,t,this.ot,this.it,r);return this.it=uu(),this.rt=OL(),this.ot=new cr(Yt),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new PL,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new cr(Yt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new PL),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function OL(){return new Jr(qe.comparator)}function kL(){return new Jr(qe.comparator)}const NB={asc:"ASCENDING",desc:"DESCENDING"},MB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class PB{constructor(e,t){this.databaseId=e,this.N=t}}function Nb(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function FL(n,e){return n.N?e.toBase64():e.toUint8Array()}function OB(n,e){return Nb(n,e.toTimestamp())}function Gi(n){return Vt(!!n),xt.fromTimestamp(function(e){const t=sp(e);return new Qr(t.seconds,t.nanos)}(n))}function WP(n,e){return(t=n,new yn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function LL(n){const e=yn.fromString(n);return Vt(WL(e)),e}function Mb(n,e){return WP(n.databaseId,e.path)}function wc(n,e){const t=LL(e);if(t.get(1)!==n.databaseId.projectId)throw new Pe(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Pe(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new qe(UL(t))}function zP(n,e){return WP(n.databaseId,e)}function VL(n){const e=LL(n);return 4===e.length?yn.emptyPath():UL(e)}function Pb(n){return new yn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function UL(n){return Vt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function BL(n,e,t){return{name:Mb(n,e),fields:t.value.mapValue.fields}}function jL(n,e,t){const r=wc(n,e.name),o=Gi(e.updateTime),u=new Ss({mapValue:{fields:e.fields}}),c=lr.newFoundDocument(r,o,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function Ob(n,e){let t;if(e instanceof Db)t={update:BL(n,e.key,e.value)};else if(e instanceof Sb)t={delete:Mb(n,e.key)};else if(e instanceof Hm)t={update:BL(n,e.key,e.data),updateMask:HB(e.fieldMask)};else{if(!(e instanceof GP))return st();t={verify:Mb(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const c=u.transform;if(c instanceof Hv)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof jm)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof $m)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Gv)return{fieldPath:u.field.canonicalString(),increment:c.k};throw st()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:OB(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:st()),t;var o}function ZP(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?li.updateTime(Gi(o.updateTime)):void 0!==o.exists?li.exists(o.exists):li.none():li.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,c){let g=null;"setToServerValue"in c?(Vt("REQUEST_TIME"===c.setToServerValue),g=new Hv):"appendMissingElements"in c?g=new jm(c.appendMissingElements.values||[]):"removeAllFromArray"in c?g=new $m(c.removeAllFromArray.values||[]):"increment"in c?g=new Gv(u,c.increment):st();const y=Hi.fromServerFormat(c.fieldPath);return new Tb(y,g)}(n,o)):[];var o;if(e.update){const o=wc(n,e.update.name),u=new Ss({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Vv((e.updateMask.fieldPaths||[]).map(C=>Hi.fromServerFormat(C)));return new Hm(o,u,c,t,r)}return new Db(o,u,t,r)}if(e.delete){const o=wc(n,e.delete);return new Sb(o,t)}if(e.verify){const o=wc(n,e.verify);return new GP(o,t)}return st()}function $L(n,e){return{documents:[zP(n,e.path)]}}function HL(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=zP(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=zP(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(y){if(0===y.length)return;const C=y.map(S=>function(x){if("=="===x.op){if(JF(x.value))return{unaryFilter:{field:Wv(x.field),op:"IS_NAN"}};if(QF(x.value))return{unaryFilter:{field:Wv(x.field),op:"IS_NULL"}}}else if("!="===x.op){if(JF(x.value))return{unaryFilter:{field:Wv(x.field),op:"IS_NOT_NAN"}};if(QF(x.value))return{unaryFilter:{field:Wv(x.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wv(x.field),op:BB(x.op),value:x.value}}}(S));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(y){if(0!==y.length)return y.map(C=>{return{field:Wv((S=C).field),direction:UB(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(C=e.limit,n.N||Fm(C)?C:{value:C});var C,g,y;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function GL(n){let e=VL(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Vt(1===r);const S=t.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=qL(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(S=>{return new Bv(zv((x=S).field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let g=null;t.limit&&(g=function(S){let x;return x="object"==typeof S?S.value:S,Fm(x)?null:x}(t.limit));let y=null;var S;t.startAt&&(y=new ap((S=t.startAt).values||[],!!S.before));let C=null;return t.endAt&&(C=function(S){return new ap(S.values||[],!S.before)}(t.endAt)),cL(e,o,c,u,g,"F",y,C)}function qL(n){return n?void 0!==n.unaryFilter?[$B(n)]:void 0!==n.fieldFilter?[jB(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>qL(e)).reduce((e,t)=>e.concat(t)):st():[]}function UB(n){return NB[n]}function BB(n){return MB[n]}function Wv(n){return{fieldPath:n.canonicalString()}}function zv(n){return Hi.fromServerFormat(n.fieldPath)}function jB(n){return cs.create(zv(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(n.fieldFilter.op),n.fieldFilter.value)}function $B(n){switch(n.unaryFilter.op){case"IS_NAN":const e=zv(n.unaryFilter.field);return cs.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=zv(n.unaryFilter.field);return cs.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=zv(n.unaryFilter.field);return cs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=zv(n.unaryFilter.field);return cs.create(o,"!=",{nullValue:"NULL_VALUE"});default:return st()}}function HB(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function WL(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Js(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=zL(e)),e=GB(n.get(t),e);return zL(e)}function GB(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function zL(n){return n+"\x01\x01"}function Ec(n){const e=n.length;if(Vt(e>=2),2===e)return Vt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),yn.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&st(),n.charAt(c+1)){case"\x01":const g=n.substring(u,c);let y;0===o.length?y=g:(o+=g,y=o,o=""),r.push(y);break;case"\x10":o+=n.substring(u,c),o+="\0";break;case"\x11":o+=n.substring(u,c+1);break;default:st()}u=c+2}return new yn(r)}const ZL=["userId","batchId"];function ex(n,e){return[n,Js(e)]}function KL(n,e,t){return[n,Js(e),t]}const qB={},WB=["prefixPath","collectionGroup","readTime","documentId"],zB=["prefixPath","collectionGroup","documentId"],ZB=["collectionGroup","readTime","prefixPath","documentId"],KB=["canonicalId","targetId"],YB=["targetId","path"],QB=["path","targetId"],JB=["collectionId","parent"],XB=["indexId","uid"],ej=["uid","sequenceNumber"],tj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],nj=["indexId","uid","orderedDocumentKey"],rj=["userId","collectionPath","documentId"],ij=["userId","collectionPath","largestBatchId"],sj=["userId","collectionGroup","largestBatchId"],YL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],oj=[...YL,"documentOverlays"],QL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],aj=[...QL,"indexConfiguration","indexState","indexEntries"],JL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class XL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ve{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ve((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ve?t:ve.resolve(t)}catch(t){return ve.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ve.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ve.reject(t)}static resolve(e){return new ve((t,r)=>{t(e)})}static reject(e){return new ve((t,r)=>{r(e)})}static waitFor(e){return new ve((t,r)=>{let o=0,u=0,c=!1;e.forEach(g=>{++o,g.next(()=>{++u,c&&u===o&&t()},y=>r(y))}),c=!0,u===o&&t()})}static or(e){let t=ve.resolve(!1);for(const r of e)t=t.next(o=>o?ve.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class tx{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new $i,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new kb(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=KP(r.target.error);this.At.reject(new kb(e,o))}}static open(e,t,r,o){try{return new tx(t,e.transaction(o,r))}catch(u){throw new kb(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new lj(t)}}class Ju{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===Ju.Vt((0,k.z$)())&&ui("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ve("SimpleDb","Removing database:",e),qm(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,k.hl)())return!1;if(Ju.St())return!0;const e=(0,k.z$)(),t=Ju.Vt(e),r=0<t&&t<10,o=Ju.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,we.Z)(function*(){return t.db||(Ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{o(new kb(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const g=c.target.error;o("VersionError"===g.name?new Pe(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new Pe(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new kb(e,g))},u.onupgradeneeded=c=>{Ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.bt.kt(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,we.Z)(function*(){const c="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.Nt(e);const y=tx.open(u.db,e,c?"readonly":"readwrite",r),C=o(y).next(S=>(y.Pt(),S)).catch(S=>(y.abort(S),ve.reject(S))).toPromise();return C.catch(()=>{}),yield y.Rt,C}catch(y){const C="FirebaseError"!==y.name&&g<3;if(Ve("SimpleDb","Transaction failed with error:",y.message,"Retrying:",C),u.close(),!C)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class uj{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return qm(this.Ft.delete())}}class kb extends Pe{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Gm(n){return"IndexedDbTransactionError"===n.name}class lj{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ve("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),qm(r)}add(e){return Ve("SimpleDb","ADD",this.store.name,e,e),qm(this.store.add(e))}get(e){return qm(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ve("SimpleDb","DELETE",this.store.name,e),qm(this.store.delete(e))}count(){return Ve("SimpleDb","COUNT",this.store.name),qm(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Kt(o,(c,g)=>{u.push(g)}).next(()=>u)}{const o=this.store.getAll(r.range);return new ve((u,c)=>{o.onerror=g=>{c(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ve((o,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{o(c.target.result)}})}Qt(e,t){Ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(u,c,g)=>g.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}zt(e){const t=this.cursor({});return new ve((r,o)=>{t.onerror=u=>{const c=KP(u.target.error);o(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(g=>{g?c.continue():r()}):r()}})}Kt(e,t){const r=[];return new ve((o,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const g=c.target.result;if(!g)return void o();const y=new uj(g),C=t(g.primaryKey,g.value,y);if(C instanceof ve){const S=C.catch(x=>(y.done(),ve.reject(x)));r.push(S)}y.isDone?o():null===y.Lt?g.continue():g.continue(y.Lt)}}).next(()=>ve.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function qm(n){return new ve((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=KP(r.target.error);t(o)}})}let eV=!1;function KP(n){const e=Ju.Vt((0,k.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return eV||(eV=!0,setTimeout(()=>{throw r},0)),r}}return n}class tV extends XL{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function qi(n,e){const t=Ye(n);return Ju.xt(t.Ht,e)}class YP{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&CB(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&HP(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&HP(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(xt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Nn())}isEqual(e){return this.batchId===e.batchId&&Lv(this.mutations,e.mutations,(t,r)=>bL(t,r))&&Lv(this.baseMutations,e.baseMutations,(t,r)=>bL(t,r))}}class QP{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Vt(e.mutations.length===r.length);let o=SB;const u=e.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,r[c].version);return new QP(e,t,r,o)}}class JP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class lp{constructor(e,t,r,o,u=xt.min(),c=xt.min(),g=Ci.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=g}withSequenceNumber(e){return new lp(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new lp(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new lp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class nV{constructor(e){this.Jt=e}}function rV(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:nx(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Mb(o=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Nb(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Wm(e.version)};else{if(!e.isUnknownDocument())return st();r.unknownDocument={path:t.path.toArray(),version:Wm(e.version)}}var o,u;return r}function nx(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Wm(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function zm(n){const e=new Qr(n.seconds,n.nanoseconds);return xt.fromTimestamp(e)}function Zv(n,e){const t=(e.baseMutations||[]).map(u=>ZP(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>ZP(n.Jt,u)),o=Qr.fromMillis(e.localWriteTimeMs);return new YP(e.batchId,o,t,r)}function Fb(n){const e=zm(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?zm(n.lastLimboFreeSnapshotVersion):xt.min();let r;var o;return void 0!==n.query.documents?(Vt(1===(o=n.query).documents.length),r=au(jv(VL(o.documents[0])))):r=au(GL(n.query)),new lp(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Ci.fromBase64String(n.resumeToken))}function iV(n,e){const t=Wm(e.snapshotVersion),r=Wm(e.lastLimboFreeSnapshotVersion);let o;o=GA(e.target)?$L(n.Jt,e.target):HL(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Bm(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function XP(n){const e=GL({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?dL(e,e.limit,"L"):e}function eO(n,e){return new JP(e.largestBatchId,ZP(n.Jt,e.overlayMutation))}function sV(n,e){const t=e.path.lastSegment();return[n,Js(e.path.popLast()),t]}class dj{getBundleMetadata(e,t){return oV(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:zm(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return oV(e).put({bundleId:(r=t).id,createTime:Wm(Gi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return aV(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:XP(o.bundledQuery),readTime:zm(o.readTime)};var o})}saveNamedQuery(e,t){return aV(e).put({name:(r=t).name,readTime:Wm(Gi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function oV(n){return qi(n,"bundles")}function aV(n){return qi(n,"namedQueries")}class tO{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new tO(e,t.uid||"")}getOverlay(e,t){return Lb(e).get(sV(this.userId,t)).next(r=>r?eO(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((u,c)=>{const g=new JP(t,c);o.push(this.Xt(e,g))}),ve.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(c=>o.add(Js(c.getCollectionPath())));const u=[];return o.forEach(c=>{const g=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(Lb(e).Qt("collectionPathOverlayIndex",g))}),ve.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Ab(),u=Js(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Lb(e).qt("collectionPathOverlayIndex",c).next(g=>{for(const y of g){const C=eO(this.M,y);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Ab();let c;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Lb(e).Wt({index:"collectionGroupOverlayIndex",range:g},(y,C,S)=>{const x=eO(this.M,C);u.size()<o||x.largestBatchId===c?(u.set(x.getKey(),x),c=x.largestBatchId):S.done()}).next(()=>u)}Xt(e,t){return Lb(e).put(function(r,o,u){const[c,g,y]=sV(o,u.mutation.key);return{userId:o,collectionPath:g,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Ob(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function Lb(n){return qi(n,"documentOverlays")}class Zm{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Lr(e.integerValue));else if("doubleValue"in e){const r=Lr(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),yb(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(km(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?XF(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):st()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),qe.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function hj(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function uV(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=hj(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Zm.fe=new Zm;class fj{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=uV(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=uV(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class pj{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class gj{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Vb{constructor(){this.De=new fj,this.Ce=new pj(this.De),this.xe=new gj(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class cp{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new cp(this.indexId,this.documentKey,this.arrayValue,r)}}function Km(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=lV(n.arrayValue,e.arrayValue),0!==t?t:(t=lV(n.directionalValue,e.directionalValue),0!==t?t:qe.comparator(n.documentKey,e.documentKey)))}function lV(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class mj{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=LP(e);if(void 0!==t&&!this.Be(t))return!1;const r=Um(e);let o=0,u=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const c=r[o];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[u++],c))return!1;++o}for(;o<r.length;++o){const c=r[o];if(u>=this.Me.length||!this.Ue(this.Me[u++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class _j{constructor(){this.qe=new nO}addToCollectionParentIndex(e,t){return this.qe.add(t),ve.resolve()}getCollectionParents(e,t){return ve.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return ve.resolve()}deleteFieldIndex(e,t){return ve.resolve()}getDocumentsMatchingTarget(e,t){return ve.resolve(null)}getFieldIndex(e,t){return ve.resolve(null)}getFieldIndexes(e,t){return ve.resolve([])}getNextCollectionGroupToUpdate(e){return ve.resolve(null)}updateCollectionGroup(e,t,r){return ve.resolve()}updateIndexEntries(e,t){return ve.resolve()}}class nO{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new cr(yn.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new cr(yn.comparator)).toArray()}}const Kv=new Uint8Array(0);class yj{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new nO,this.Ge=new up(r=>Bm(r),(r,o)=>bb(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:Js(o)};return cV(e).put(u)}return ve.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[HF(t),""],!1,!0);return cV(e).qt(o).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Ec(c.parent))}return r})}addFieldIndex(e,t){const r=rx(e),o={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=rx(e),o=ix(e),u=Ub(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Ub(e);let o=!0;const u=new Map;return ve.forEach(this.Qe(t),c=>this.getFieldIndex(e,c).next(g=>{o&&(o=!!g),u.set(c,g)})).next(()=>{if(o){let c=Nn();const g=[];return ve.forEach(u,(y,C)=>{var S;Ve("IndexedDbIndexManager",`Using index ${S=y,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(et=>`${et.fieldPath}:${et.kind}`).join(",")}`} to execute ${Bm(t)}`);const x=function(et,rt){const Wt=LP(rt);if(void 0===Wt)return null;for(const rn of qA(et,Wt.fieldPath))switch(rn.op){case"array-contains-any":return rn.value.arrayValue.values||[];case"array-contains":return[rn.value]}return null}(C,y),O=function(et,rt){const Wt=new Map;for(const rn of Um(rt))for(const hi of qA(et,rn.fieldPath))switch(hi.op){case"==":case"in":Wt.set(rn.fieldPath.canonicalString(),hi.value);break;case"not-in":case"!=":return Wt.set(rn.fieldPath.canonicalString(),hi.value),Array.from(Wt.values())}return null}(C,y),$=function(et,rt){const Wt=[];let rn=!0;for(const hi of Um(rt)){const Ta=0===hi.kind?sL(et,hi.fieldPath,et.startAt):oL(et,hi.fieldPath,et.startAt);if(!Ta.value)return null;Wt.push(Ta.value),rn&&(rn=Ta.inclusive)}return new ap(Wt,rn)}(C,y),Z=function(et,rt){const Wt=[];let rn=!0;for(const hi of Um(rt)){const Ta=0===hi.kind?oL(et,hi.fieldPath,et.endAt):sL(et,hi.fieldPath,et.endAt);if(!Ta.value)return null;Wt.push(Ta.value),rn&&(rn=Ta.inclusive)}return new ap(Wt,rn)}(C,y),ye=this.je(y,C,$),xe=this.je(y,C,Z),pt=this.We(y,C,O),dt=this.ze(y.indexId,x,ye,!!$&&$.inclusive,xe,!!Z&&Z.inclusive,pt);return ve.forEach(dt,et=>r.Gt(et,t.limit).next(rt=>{rt.forEach(Wt=>{const rn=qe.fromSegments(Wt.documentKey);c.has(rn)||(c=c.add(rn),g.push(rn))})}))}).next(()=>g)}return ve.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,r,o,u,c,g){const y=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=u?u.length:1),C=y/(null!=t?t.length:1),S=[];for(let x=0;x<y;++x){const O=t?this.He(t[x/C]):Kv,$=r?this.Je(e,O,r[x%C],o):this.Ye(e),Z=u?this.Xe(e,O,u[x%C],c):this.Ye(e+1);S.push(...this.createRange($,Z,g.map(ye=>this.Je(e,O,ye,!0))))}return S}Je(e,t,r,o){const u=new cp(e,qe.empty(),t,r);return o?u:u.ke()}Xe(e,t,r,o){const u=new cp(e,qe.empty(),t,r);return o?u.ke():u}Ye(e){return new cp(e,qe.empty(),Kv,Kv)}getFieldIndex(e,t){const r=new mj(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{const c=u.filter(g=>r.$e(g));return c.sort((g,y)=>y.fields.length-g.fields.length),c.length>0?c[0]:null})}Ze(e,t){const r=new Vb;for(const o of Um(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const c=r.Ne(o.kind);Zm.fe.Zt(u,c)}return r.Se()}He(e){const t=new Vb;return Zm.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new Vb;return Zm.fe.Zt(Vm(this.databaseId,t),r.Ne(function(o){const u=Um(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}We(e,t,r){if(null===r)return[];let o=[];o.push(new Vb);let u=0;for(const c of Um(e)){const g=r[u++];for(const y of o)if(this.en(t,c.fieldPath)&&wb(g))o=this.nn(o,c,g);else{const C=y.Ne(c.kind);Zm.fe.Zt(g,C)}}return this.sn(o)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const o=[...e],u=[];for(const c of r.arrayValue.values||[])for(const g of o){const y=new Vb;y.seed(g.Se()),Zm.fe.Zt(c,y.Ne(t.kind)),u.push(y)}return u}en(e,t){return!!e.filters.find(r=>r instanceof cs&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=rx(e),o=ix(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const c=[];return ve.forEach(u,g=>o.get([g.indexId,this.uid]).next(y=>{c.push(function(C,S){const x=S?new Cb(S.sequenceNumber,new rh(zm(S.readTime),new qe(Ec(S.documentKey)),S.largestBatchId)):Cb.empty(),O=C.fields.map(([$,Z])=>new HA(Hi.fromServerFormat($),Z));return new $A(C.indexId,C.collectionGroup,O,x)}(g,y))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Yt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=rx(e),u=ix(e);return this.rn(e).next(c=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>ve.forEach(g,y=>{return u.put({indexId:y.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:Wm((O=r).readTime),documentKey:Js(O.documentKey.path),largestBatchId:O.largestBatchId});var O})))}updateIndexEntries(e,t){const r=new Map;return ve.forEach(t,(o,u)=>{const c=r.get(o.collectionGroup);return(c?ve.resolve(c):this.getFieldIndexes(e,o.collectionGroup)).next(g=>(r.set(o.collectionGroup,g),ve.forEach(g,y=>this.on(e,o,y).next(C=>{const S=this.un(u,y);return C.isEqual(S)?ve.resolve():this.an(e,u,y,C,S)}))))})}cn(e,t,r,o){return Ub(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,o){return Ub(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const o=Ub(e);let u=new cr(Km);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(c,g)=>{u=u.add(new cp(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}un(e,t){let r=new cr(Km);const o=this.Ze(t,e);if(null==o)return r;const u=LP(t);if(null!=u){const c=e.data.field(u.fieldPath);if(wb(c))for(const g of c.arrayValue.values||[])r=r.add(new cp(t.indexId,e.key,this.He(g),o))}else r=r.add(new cp(t.indexId,e.key,Kv,o));return r}an(e,t,r,o,u){Ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(g,y,C,S,x){const O=g.getIterator(),$=y.getIterator();let Z=qv(O),ye=qv($);for(;Z||ye;){let xe=!1,pt=!1;if(Z&&ye){const dt=C(Z,ye);dt<0?pt=!0:dt>0&&(xe=!0)}else null!=Z?pt=!0:xe=!0;xe?(S(ye),ye=qv($)):pt?(x(Z),Z=qv(O)):(Z=qv(O),ye=qv($))}}(o,u,Km,g=>{c.push(this.cn(e,t,r,g))},g=>{c.push(this.hn(e,t,r,g))}),ve.waitFor(c)}rn(e){let t=1;return ix(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,g)=>Km(c,g)).filter((c,g,y)=>!g||0!==Km(c,y[g-1]));const o=[];o.push(e);for(const c of r){const g=Km(c,e),y=Km(c,t);if(0===g)o[0]=e.ke();else if(g>0&&y<0)o.push(c),o.push(c.ke());else if(y>0)break}o.push(t);const u=[];for(let c=0;c<o.length;c+=2)u.push(IDBKeyRange.bound([o[c].indexId,this.uid,o[c].arrayValue,o[c].directionalValue,Kv,[]],[o[c+1].indexId,this.uid,o[c+1].arrayValue,o[c+1].directionalValue,Kv,[]]));return u}}function cV(n){return qi(n,"collectionParents")}function Ub(n){return qi(n,"indexEntries")}function rx(n){return qi(n,"indexConfiguration")}function ix(n){return qi(n,"indexState")}const dV={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ho{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ho(e,Ho.DEFAULT_COLLECTION_PERCENTILE,Ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function hV(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let g=0;const y=r.Wt({range:c},(S,x,O)=>(g++,O.delete()));u.push(y.next(()=>{Vt(1===g)}));const C=[];for(const S of t.mutations){const x=KL(e,S.key.path,t.batchId);u.push(o.delete(x)),C.push(S.key)}return ve.waitFor(u).next(()=>C)}function sx(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw st();e=n.noDocument}return JSON.stringify(e).length}Ho.DEFAULT_COLLECTION_PERCENTILE=10,Ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ho.DEFAULT=new Ho(41943040,Ho.DEFAULT_COLLECTION_PERCENTILE,Ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ho.DISABLED=new Ho(-1,0,0);class rO{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.ln={}}static Yt(e,t,r,o){Vt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new rO(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return dp(e).Wt({index:"userMutationsIndex",range:r},(o,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Yv(e),c=dp(e);return c.add({}).next(g=>{Vt("number"==typeof g);const y=new YP(g,t,r,o),C=function(O,$,Z){const ye=Z.baseMutations.map(pt=>Ob(O.Jt,pt)),xe=Z.mutations.map(pt=>Ob(O.Jt,pt));return{userId:$,batchId:Z.batchId,localWriteTimeMs:Z.localWriteTime.toMillis(),baseMutations:ye,mutations:xe}}(this.M,this.userId,y),S=[];let x=new cr((O,$)=>Yt(O.canonicalString(),$.canonicalString()));for(const O of o){const $=KL(this.userId,O.key.path,g);x=x.add(O.key.path.popLast()),S.push(c.put(C)),S.push(u.put($,qB))}return x.forEach(O=>{S.push(this.indexManager.addToCollectionParentIndex(e,O))}),e.addOnCommittedListener(()=>{this.ln[g]=y.keys()}),ve.waitFor(S).next(()=>y)})}lookupMutationBatch(e,t){return dp(e).get(t).next(r=>r?(Vt(r.userId===this.userId),Zv(this.M,r)):null)}fn(e,t){return this.ln[t]?ve.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.ln[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return dp(e).Wt({index:"userMutationsIndex",range:o},(c,g,y)=>{g.userId===this.userId&&(Vt(g.batchId>=r),u=Zv(this.M,g)),y.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return dp(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return dp(e).qt("userMutationsIndex",t).next(r=>r.map(o=>Zv(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=ex(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Yv(e).Wt({range:o},(c,g,y)=>{const[C,S,x]=c,O=Ec(S);if(C===this.userId&&t.path.isEqual(O))return dp(e).get(x).next($=>{if(!$)throw st();Vt($.userId===this.userId),u.push(Zv(this.M,$))});y.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new cr(Yt);const o=[];return t.forEach(u=>{const c=ex(this.userId,u.path),g=IDBKeyRange.lowerBound(c),y=Yv(e).Wt({range:g},(C,S,x)=>{const[O,$,Z]=C,ye=Ec($);O===this.userId&&u.path.isEqual(ye)?r=r.add(Z):x.done()});o.push(y)}),ve.waitFor(o).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=ex(this.userId,r),c=IDBKeyRange.lowerBound(u);let g=new cr(Yt);return Yv(e).Wt({range:c},(y,C,S)=>{const[x,O,$]=y,Z=Ec(O);x===this.userId&&r.isPrefixOf(Z)?Z.length===o&&(g=g.add($)):S.done()}).next(()=>this.dn(e,g))}dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(dp(e).get(u).next(c=>{if(null===c)throw st();Vt(c.userId===this.userId),r.push(Zv(this.M,c))}))}),ve.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return hV(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),ve.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ve.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Yv(e).Wt({range:r},(u,c,g)=>{if(u[0]===this.userId){const y=Ec(u[1]);o.push(y)}else g.done()}).next(()=>{Vt(0===o.length)})})}containsKey(e,t){return fV(e,this.userId,t)}wn(e){return pV(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function fV(n,e,t){const r=ex(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Yv(n).Wt({range:u,jt:!0},(g,y,C)=>{const[S,x,O]=g;S===e&&x===o&&(c=!0),C.done()}).next(()=>c)}function dp(n){return qi(n,"mutations")}function Yv(n){return qi(n,"documentMutations")}function pV(n){return qi(n,"mutationQueues")}class Ym{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Ym(0)}static yn(){return new Ym(-1)}}class vj{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new Ym(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>xt.fromTimestamp(new Qr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.In(e,o)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Qv(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(Vt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Qv(e).Wt((c,g)=>{const y=Fb(g);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(o++,u.push(this.removeTargetData(e,y)))}).next(()=>ve.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Qv(e).Wt((r,o)=>{const u=Fb(o);t(u)})}pn(e){return gV(e).get("targetGlobalKey").next(t=>(Vt(null!==t),t))}In(e,t){return gV(e).put("targetGlobalKey",t)}Tn(e,t){return Qv(e).put(iV(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Bm(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Qv(e).Wt({range:o,index:"queryTargetsIndex"},(c,g,y)=>{const C=Fb(g);bb(t,C.target)&&(u=C,y.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=hp(e);return t.forEach(c=>{const g=Js(c.path);o.push(u.put({targetId:r,path:g})),o.push(this.referenceDelegate.addReference(e,r,c))}),ve.waitFor(o)}removeMatchingKeys(e,t,r){const o=hp(e);return ve.forEach(t,u=>{const c=Js(u.path);return ve.waitFor([o.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=hp(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=hp(e);let u=Nn();return o.Wt({range:r,jt:!0},(c,g,y)=>{const C=Ec(c[1]),S=new qe(C);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=Js(t.path),o=IDBKeyRange.bound([r],[HF(r)],!1,!0);let u=0;return hp(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([c,g],y,C)=>{0!==c&&(u++,C.done())}).next(()=>u>0)}Et(e,t){return Qv(e).get(t).next(r=>r?Fb(r):null)}}function Qv(n){return qi(n,"targets")}function gV(n){return qi(n,"targetGlobal")}function hp(n){return qi(n,"targetDocuments")}function Qm(n){return iO.apply(this,arguments)}function iO(){return(iO=(0,we.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==JL)throw n;Ve("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function mV([n,e],[t,r]){const o=Yt(n,t);return 0===o?Yt(e,r):o}class wj{constructor(e){this.An=e,this.buffer=new cr(mV),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();mV(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ej{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Ve("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,we.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){Gm(o)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Qm(o)}yield t.Sn(e)}))}}class Cj{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ve.resolve(ba.A);const r=new wj(t);return this.Dn.forEachTarget(e,o=>r.bn(o.sequenceNumber)).next(()=>this.Dn.xn(e,o=>r.bn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),ve.resolve(dV)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dV):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,o,u,c,g,y,C;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),o=this.params.maximumSequenceNumbersToCollect):o=x,c=Date.now(),this.nthSequenceNumber(e,o))).next(x=>(r=x,g=Date.now(),this.removeTargets(e,r,t))).next(x=>(u=x,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(C=Date.now(),MP()<=da.in.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-S}ms\n\tDetermined least recently used ${o} in `+(g-c)+`ms\n\tRemoved ${u} targets in `+(y-g)+`ms\n\tRemoved ${x} documents in `+(C-y)+`ms\nTotal Duration: ${C-S}ms`),ve.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:x})))}}class bj{constructor(e,t){this.db=e,this.garbageCollector=new Cj(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,o)=>t(o))}addReference(e,t,r){return ox(e,r)}removeReference(e,t,r){return ox(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ox(e,t)}On(e,t){return function(r,o){let u=!1;return pV(r).zt(c=>fV(r,c,o).next(g=>(g&&(u=!0),ve.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Mn(e,(c,g)=>{if(g<=t){const y=this.On(e,c).next(C=>{if(!C)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,xt.min()),hp(e).delete([0,Js(c.path)])))});o.push(y)}}).next(()=>ve.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ox(e,t)}Mn(e,t){const r=hp(e);let o,u=ba.A;return r.Wt({index:"documentTargetsIndex"},([c,g],{path:y,sequenceNumber:C})=>{0===c?(u!==ba.A&&t(new qe(Ec(o)),u),u=C,o=y):u=ba.A}).next(()=>{u!==ba.A&&t(new qe(Ec(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ox(n,e){return hp(n).put((r=n.currentSequenceNumber,{targetId:0,path:Js(e.path),sequenceNumber:r}));var r}class _V{constructor(){this.changes=new up(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,lr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ve.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ij{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Jm(e).put(r)}removeEntry(e,t,r){return Jm(e).delete(function(o,u){const c=o.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],nx(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=lr.newInvalidDocument(t);return Jm(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Bb(t))},(o,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:lr.newInvalidDocument(t)};return Jm(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Bb(t))},(o,u)=>{r={document:this.$n(t,u),size:sx(u)}}).next(()=>r)}getEntries(e,t){let r=uu();return this.Ln(e,t,(o,u)=>{const c=this.$n(o,u);r=r.insert(o,c)}).next(()=>r)}Un(e,t){let r=uu(),o=new Jr(qe.comparator);return this.Ln(e,t,(u,c)=>{const g=this.$n(u,c);r=r.insert(u,g),o=o.insert(u,sx(c))}).next(()=>({documents:r,qn:o}))}Ln(e,t,r){if(t.isEmpty())return ve.resolve();let o=new cr(wV);t.forEach(y=>o=o.add(y));const u=IDBKeyRange.bound(Bb(o.first()),Bb(o.last())),c=o.getIterator();let g=c.getNext();return Jm(e).Wt({index:"documentKeyIndex",range:u},(y,C,S)=>{const x=qe.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;g&&wV(g,x)<0;)r(g,null),g=c.getNext();g&&g.isEqual(x)&&(r(g,C),g=c.hasNext()?c.getNext():null),g?S.Ut(Bb(g)):S.done()}).next(()=>{for(;g;)r(g,null),g=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),nx(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Jm(e).qt(IDBKeyRange.bound(o,u,!0)).next(c=>{let g=uu();for(const y of c){const C=this.$n(qe.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);g=g.insert(C.key,C)}return g})}getAllFromCollectionGroup(e,t,r,o){let u=uu();const c=vV(t,r),g=vV(t,rh.max());return Jm(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,g,!0)},(y,C,S)=>{const x=this.$n(qe.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(x.key,x),u.size===o&&S.done()}).next(()=>u)}newChangeBuffer(e){return new Tj(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return yV(e).get("remoteDocumentGlobalKey").next(t=>(Vt(!!t),t))}Fn(e,t){return yV(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function(n,e){let t;if(e.document)t=jL(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=qe.fromSegments(e.noDocument.path),o=zm(e.noDocument.readTime);t=lr.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return st();{const r=qe.fromSegments(e.unknownDocument.path),o=zm(e.unknownDocument.version);t=lr.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Qr(r[0],r[1]);return xt.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(xt.min()))return r}return lr.newInvalidDocument(e)}}class Tj extends _V{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new up(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new cr((u,c)=>Yt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const g=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,g.readTime)),c.isValidDocument()){const y=rV(this.Kn.M,c);o=o.add(u.path.popLast()),r+=sx(y)-g.size,t.push(this.Kn.addEntry(e,u,y))}else if(r-=g.size,this.trackRemovals){const y=rV(this.Kn.M,c.convertToNoDocument(xt.min()));t.push(this.Kn.addEntry(e,u,y))}}),o.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),ve.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:o})=>(o.forEach((u,c)=>{this.Gn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function yV(n){return qi(n,"remoteDocumentGlobal")}function Jm(n){return qi(n,"remoteDocumentsV14")}function Bb(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function vV(n,e){const t=e.documentKey.path.toArray();return[n,nx(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function wV(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Yt(t[u],r[u]),o)return o;return o=Yt(t.length,r.length),o||(o=Yt(t[t.length-2],r[r.length-2]),o||Yt(t[t.length-1],r[r.length-1]))}class Dj{constructor(e){this.M=e}kt(e,t,r,o){const u=new tx("createOrUpgrade",t);var g;r<1&&o>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ZL,{unique:!0}),g.createObjectStore("documentMutations"),EV(e),function(g){g.createObjectStore("remoteDocuments")}(e));let c=ve.resolve();return r<3&&o>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),EV(e)),c=c.next(()=>function(g){const y=g.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:xt.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",C)}(u))),r<4&&o>=4&&(0!==r&&(c=c.next(()=>function(g,y){return y.store("mutations").qt().next(C=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ZL,{unique:!0});const S=y.store("mutations"),x=C.map(O=>S.put(O));return ve.waitFor(x)})}(e,u))),c=c.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(c=c.next(()=>this.Qn(u))),r<6&&o>=6&&(c=c.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&o>=7&&(c=c.next(()=>this.Wn(u))),r<8&&o>=8&&(c=c.next(()=>this.zn(e,u))),r<9&&o>=9&&(c=c.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(c=c.next(()=>this.Hn(u))),r<11&&o>=11&&(c=c.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(c=c.next(()=>{!function(g){const y=g.createObjectStore("documentOverlays",{keyPath:rj});y.createIndex("collectionPathOverlayIndex",ij,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",sj,{unique:!1})}(e)})),r<13&&o>=13&&(c=c.next(()=>function(g){const y=g.createObjectStore("remoteDocumentsV14",{keyPath:WB});y.createIndex("documentKeyIndex",zB),y.createIndex("collectionGroupIndex",ZB)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(c=c.next(()=>{!function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:XB}).createIndex("sequenceNumberIndex",ej,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:tj}).createIndex("documentKeyIndex",nj,{unique:!1})}(e)})),c}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=sx(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>ve.forEach(o,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(g=>ve.forEach(g,y=>{Vt(y.userId===u.userId);const C=Zv(this.M,y);return hV(e,u.userId,C).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Wt((c,g)=>{const y=new yn(c),C=[0,Js(y)];u.push(t.get(C).next(S=>S?ve.resolve():t.put({targetId:0,path:Js(y),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>ve.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:JB});const r=t.store("collectionParents"),o=new nO,u=c=>{if(o.add(c)){const g=c.lastSegment(),y=c.popLast();return r.put({collectionId:g,parent:Js(y)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,g)=>{const y=new yn(c);return u(y.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,g,y],C)=>{const S=Ec(g);return u(S.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,o)=>{const u=Fb(o),c=iV(this.M,u);return t.put(c)})}Jn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((u,c)=>{const g=t.store("remoteDocumentsV14"),y=(C=c,C.document?new qe(yn.fromString(C.document.name).popFirst(5)):C.noDocument?qe.fromSegments(C.noDocument.path):C.unknownDocument?qe.fromSegments(C.unknownDocument.path):st()).path.toArray();var C;const S={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(g.put(S))}).next(()=>ve.waitFor(o))}}function EV(n){n.createObjectStore("targetDocuments",{keyPath:YB}).createIndex("documentTargetsIndex",QB,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",KB,{unique:!0}),n.createObjectStore("targetGlobal")}const sO="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class oO{constructor(e,t,r,o,u,c,g,y,C,S,x=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=c,this.document=g,this.Xn=C,this.Zn=S,this.ts=x,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=O=>Promise.resolve(),!oO.vt())throw new Pe(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new bj(this,o),this.hs=t+"main",this.M=new nV(y),this.ls=new Ju(this.hs,this.ts,new Dj(this.M)),this.fs=new vj(this.referenceDelegate,this.M),this.ds=new Ij(this.M),this._s=new dj,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===S&&ui("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(ge.FAILED_PRECONDITION,sO);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new ba(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,we.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,we.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,we.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ax(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if(Gm(e))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return jb(e).get("owner").next(t=>ve.resolve(this.bs(t)))}Vs(e){return ax(e).delete(this.clientId)}vs(){var e=this;return(0,we.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=qi(r,"clientMetadata");return o.qt().next(u=>{const c=e.Ds(u,18e5),g=u.filter(y=>-1===c.indexOf(y));return ve.forEach(g,y=>o.delete(y.clientId)).next(()=>g)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?ve.resolve(!0):jb(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Pe(ge.FAILED_PRECONDITION,sO);return!1}}return!(!this.networkEnabled||!this.inForeground)||ax(e).qt().next(r=>void 0===this.Ds(r,5e3).find(o=>{if(this.clientId!==o.clientId){const c=!this.inForeground&&o.inForeground,g=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||c&&g)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,we.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new tV(t,ba.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>ax(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return rO.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new yj(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return tO.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Ve("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=14===(c=this.ts)?aj:13===c?QL:12===c?oj:11===c?YL:void st();var c;let g;return this.ls.runTransaction(e,o,u,y=>(g=new tV(y,this.es?this.es.next():ba.A),"readwrite-primary"===t?this.Es(g).next(C=>!!C||this.As(g)).next(C=>{if(!C)throw ui(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Pe(ge.FAILED_PRECONDITION,JL);return r(g)}).next(C=>this.Ps(g).next(()=>C)):this.$s(g).next(()=>r(g)))).then(y=>(g.raiseOnCommittedEvent(),y))}$s(e){return jb(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Pe(ge.FAILED_PRECONDITION,sO)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return jb(e).put("owner",t)}static vt(){return Ju.vt()}Rs(e){const t=jb(e);return t.get("owner").next(r=>this.bs(r)?(Ve("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ve.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(ui(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,k.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ui("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){ui("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function jb(n){return qi(n,"owner")}function ax(n){return qi(n,"clientMetadata")}function aO(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Sj{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}qs(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return qe.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.js(e,t.path):BP(t)?this.Ws(e,t,r):this.zs(e,t,r);var o}js(e,t){return this.Ls(e,new qe(t)).next(r=>{let o=qP();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ws(e,t,r){const o=t.collectionGroup;let u=qP();return this.indexManager.getCollectionParents(e,o).next(c=>ve.forEach(c,g=>{const y=(C=t,S=g.child(o),new ih(S,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,S;return this.zs(e,y,r).next(C=>{C.forEach((S,x)=>{u=u.insert(S,x)})})}).next(()=>u))}zs(e,t,r){let o;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const c of u)for(const g of c.mutations){const y=g.key;let C=o.get(y);null==C&&(C=lr.newInvalidDocument(y),o=o.insert(y,C)),HP(g,C,c.localWriteTime),C.isFoundDocument()||(o=o.remove(y))}}).next(()=>(o.forEach((u,c)=>{$P(t,c)||(o=o.remove(u))}),o))}}class uO{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=o}static Ys(e,t){let r=Nn(),o=Nn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new uO(e,t.fromCache,r,o)}}class CV{Xs(e){this.Zs=e}Qs(e,t,r,o){return 0===(u=t).filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())||r.isEqual(xt.min())?this.ti(e,t):this.Zs.Ks(e,o).next(u=>{const c=this.ei(t,u);return(WA(t)||zA(t))&&this.ni(t.limitType,c,o,r)?this.ti(e,t):(MP()<=da.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),jP(t)),this.Zs.Qs(e,t,rL(r,-1)).next(g=>(c.forEach(y=>{g=g.insert(y.key,y)}),g)))});var u}ei(e,t){let r=new cr(pL(e));return t.forEach((o,u)=>{$P(e,u)&&(r=r.add(u))}),r}ni(e,t,r,o){if(r.size!==t.size)return!0;const u="F"===e?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ti(e,t){return MP()<=da.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",jP(t)),this.Zs.Qs(e,t,rh.min())}}class Aj{constructor(e,t,r,o){this.persistence=e,this.si=t,this.M=o,this.ii=new Jr(Yt),this.ri=new up(u=>Bm(u),bb),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(r)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new Sj(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function bV(n,e,t,r){return new Aj(n,e,t,r)}function IV(n,e){return lO.apply(this,arguments)}function lO(){return(lO=(0,we.Z)(function*(n,e){const t=Ye(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.Bs.getAllMutationBatches(r).next(u=>(o=u,t.ai(e),t.Bs.getAllMutationBatches(r))).next(u=>{const c=[],g=[];let y=Nn();for(const C of o){c.push(C.batchId);for(const S of C.mutations)y=y.add(S.key)}for(const C of u){g.push(C.batchId);for(const S of C.mutations)y=y.add(S.key)}return t.ci.Ks(r,y).next(C=>({hi:C,removedBatchIds:c,addedBatchIds:g}))})})})).apply(this,arguments)}function xj(n,e){const t=Ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.ui.newChangeBuffer({trackRemovals:!0});return function(c,g,y,C){const S=y.batch,x=S.keys();let O=ve.resolve();return x.forEach($=>{O=O.next(()=>C.getEntry(g,$)).next(Z=>{const ye=y.docVersions.get($);Vt(null!==ye),Z.version.compareTo(ye)<0&&(S.applyToRemoteDocument(Z,y),Z.isValidDocument()&&(Z.setReadTime(y.commitVersion),C.addEntry(Z)))})}),O.next(()=>c.Bs.removeMutationBatch(g,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.ci.Ks(r,o))})}function TV(n){const e=Ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function Rj(n,e){const t=Ye(n),r=e.snapshotVersion;let o=t.ii;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.ui.newChangeBuffer({trackRemovals:!0});o=t.ii;const g=[];e.targetChanges.forEach((C,S)=>{const x=o.get(S);if(!x)return;g.push(t.fs.removeMatchingKeys(u,C.removedDocuments,S).next(()=>t.fs.addMatchingKeys(u,C.addedDocuments,S)));let O=x.withSequenceNumber(u.currentSequenceNumber);var $,Z,ye;e.targetMismatches.has(S)?O=O.withResumeToken(Ci.EMPTY_BYTE_STRING,xt.min()).withLastLimboFreeSnapshotVersion(xt.min()):C.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(C.resumeToken,r)),o=o.insert(S,O),Z=O,ye=C,(0===($=x).resumeToken.approximateByteSize()||Z.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=3e8||ye.addedDocuments.size+ye.modifiedDocuments.size+ye.removedDocuments.size>0)&&g.push(t.fs.updateTargetData(u,O))});let y=uu();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,C))}),g.push(DV(u,c,e.documentUpdates).next(C=>{y=C})),!r.isEqual(xt.min())){const C=t.fs.getLastRemoteSnapshotVersion(u).next(S=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(C)}return ve.waitFor(g).next(()=>c.apply(u)).next(()=>t.ci.Gs(u,y)).next(()=>y)}).then(u=>(t.ii=o,u))}function DV(n,e,t){let r=Nn();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=uu();return t.forEach((c,g)=>{const y=o.get(c);g.isNoDocument()&&g.version.isEqual(xt.min())?(e.removeEntry(c,g.readTime),u=u.insert(c,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||0===g.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(g),u=u.insert(c,g)):Ve("LocalStore","Ignoring outdated watch update for ",c,". Current version:",y.version," Watch version:",g.version)}),u})}function Nj(n,e){const t=Ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function Jv(n,e){const t=Ye(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.fs.getTargetData(r,e).next(u=>u?(o=u,ve.resolve(o)):t.fs.allocateTargetId(r).next(c=>(o=new lp(e,c,0,r.currentSequenceNumber),t.fs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.ii.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.ii=t.ii.insert(r.targetId,r),t.ri.set(e,r.targetId)),r})}function Xv(n,e,t){return cO.apply(this,arguments)}function cO(){return(cO=(0,we.Z)(function*(n,e,t){const r=Ye(n),o=r.ii.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Gm(c))throw c;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.ii=r.ii.remove(e),r.ri.delete(o.target)})).apply(this,arguments)}function ux(n,e,t){const r=Ye(n);let o=xt.min(),u=Nn();return r.persistence.runTransaction("Execute query","readonly",c=>function(g,y,C){const S=Ye(g),x=S.ri.get(C);return void 0!==x?ve.resolve(S.ii.get(x)):S.fs.getTargetData(y,C)}(r,c,au(e)).next(g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(c,g.targetId).next(y=>{u=y})}).next(()=>r.si.Qs(c,e,t?o:xt.min(),t?u:Nn())).next(g=>(xV(r,fL(e),g),{documents:g,li:u})))}function SV(n,e){const t=Ye(n),r=Ye(t.fs),o=t.ii.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(c=>c?c.target:null))}function AV(n,e){const t=Ye(n),r=t.oi.get(e)||xt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.ui.getAllFromCollectionGroup(o,e,rL(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(xV(t,e,o),o))}function xV(n,e,t){let r=xt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.oi.set(e,r)}function dO(){return(dO=(0,we.Z)(function*(n,e,t,r){const o=Ye(n);let u=Nn(),c=uu();for(const C of t){const S=e.fi(C.metadata.name);C.document&&(u=u.add(S));const x=e.di(C);x.setReadTime(e._i(C.metadata.readTime)),c=c.insert(S,x)}const g=o.ui.newChangeBuffer({trackRemovals:!0}),y=yield Jv(o,(C=r,au(jv(yn.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>DV(C,g,c).next(S=>(g.apply(C),S)).next(S=>o.fs.removeMatchingKeysForTargetId(C,y.targetId).next(()=>o.fs.addMatchingKeys(C,u,y.targetId)).next(()=>o.ci.Gs(C,S)).next(()=>S)))})).apply(this,arguments)}function Pj(n,e){return hO.apply(this,arguments)}function hO(){return(hO=(0,we.Z)(function*(n,e,t=Nn()){const r=yield Jv(n,au(XP(e.bundledQuery))),o=Ye(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const c=Gi(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return o._s.saveNamedQuery(u,e);const g=r.withResumeToken(Ci.EMPTY_BYTE_STRING,c);return o.ii=o.ii.insert(g.targetId,g),o.fs.updateTargetData(u,g).next(()=>o.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.fs.addMatchingKeys(u,t,r.targetId)).next(()=>o._s.saveNamedQuery(u,e))})})).apply(this,arguments)}class Oj{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return ve.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var r;return this.wi.set(t.id,{id:(r=t).id,version:r.version,createTime:Gi(r.createTime)}),ve.resolve()}getNamedQuery(e,t){return ve.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,{name:(r=t).name,query:XP(r.bundledQuery),readTime:Gi(r.readTime)}),ve.resolve();var r}}class kj{constructor(){this.overlays=new Jr(qe.comparator),this.gi=new Map}getOverlay(e,t){return ve.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.Xt(e,t,u)}),ve.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.gi.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.gi.delete(r)),ve.resolve()}getOverlaysForCollection(e,t,r){const o=Ab(),u=t.length+1,c=new qe(t.child("")),g=this.overlays.getIteratorFrom(c);for(;g.hasNext();){const y=g.getNext().value,C=y.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&y.largestBatchId>r&&o.set(y.getKey(),y)}return ve.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Jr((C,S)=>C-S);const c=this.overlays.getIterator();for(;c.hasNext();){const C=c.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let S=u.get(C.largestBatchId);null===S&&(S=Ab(),u=u.insert(C.largestBatchId,S)),S.set(C.getKey(),C)}}const g=Ab(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((C,S)=>g.set(C,S)),!(g.size()>=o)););return ve.resolve(g)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const c=this.gi.get(o.largestBatchId).delete(r.key);this.gi.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new JP(t,r));let u=this.gi.get(t);void 0===u&&(u=Nn(),this.gi.set(t,u)),this.gi.set(t,u.add(r.key))}}class fO{constructor(){this.yi=new cr(Wi.pi),this.Ii=new cr(Wi.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const r=new Wi(e,t);this.yi=this.yi.add(r),this.Ii=this.Ii.add(r)}Ei(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ai(new Wi(e,t))}Ri(e,t){e.forEach(r=>this.removeReference(r,t))}Pi(e){const t=new qe(new yn([])),r=new Wi(t,e),o=new Wi(t,e+1),u=[];return this.Ii.forEachInRange([r,o],c=>{this.Ai(c),u.push(c.key)}),u}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new qe(new yn([])),r=new Wi(t,e),o=new Wi(t,e+1);let u=Nn();return this.Ii.forEachInRange([r,o],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new Wi(e,0),r=this.yi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Wi{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return qe.comparator(e.key,t.key)||Yt(e.vi,t.vi)}static Ti(e,t){return Yt(e.vi,t.vi)||qe.comparator(e.key,t.key)}}class Fj{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new cr(Wi.pi)}checkEmpty(e){return ve.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,o){const u=this.Si;this.Si++;const c=new YP(u,t,r,o);this.Bs.push(c);for(const g of o)this.Di=this.Di.add(new Wi(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ve.resolve(c)}lookupMutationBatch(e,t){return ve.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.xi(t+1),u=o<0?0:o;return ve.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return ve.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return ve.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Wi(t,0),o=new Wi(t,Number.POSITIVE_INFINITY),u=[];return this.Di.forEachInRange([r,o],c=>{const g=this.Ci(c.vi);u.push(g)}),ve.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new cr(Yt);return t.forEach(o=>{const u=new Wi(o,0),c=new Wi(o,Number.POSITIVE_INFINITY);this.Di.forEachInRange([u,c],g=>{r=r.add(g.vi)})}),ve.resolve(this.Ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;qe.isDocumentKey(u)||(u=u.child(""));const c=new Wi(new qe(u),0);let g=new cr(Yt);return this.Di.forEachWhile(y=>{const C=y.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(g=g.add(y.vi)),!0)},c),ve.resolve(this.Ni(g))}Ni(e){const t=[];return e.forEach(r=>{const o=this.Ci(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){Vt(0===this.ki(t.batchId,"removed")),this.Bs.shift();let r=this.Di;return ve.forEach(t.mutations,o=>{const u=new Wi(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Di=r})}_n(e){}containsKey(e,t){const r=new Wi(t,0),o=this.Di.firstAfterOrEqual(r);return ve.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return ve.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class Lj{constructor(e){this.Mi=e,this.docs=new Jr(qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,c=this.Mi(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ve.resolve(r?r.document.mutableCopy():lr.newInvalidDocument(t))}getEntries(e,t){let r=uu();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():lr.newInvalidDocument(o))}),ve.resolve(r)}getAllFromCollection(e,t,r){let o=uu();const u=new qe(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:g,value:{document:y}}=c.getNext();if(!t.isPrefixOf(g.path))break;g.path.length>t.length+1||oB(sB(y),r)<=0||(o=o.insert(y.key,y.mutableCopy()))}return ve.resolve(o)}getAllFromCollectionGroup(e,t,r,o){st()}Oi(e,t){return ve.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Vj(this)}getSize(e){return ve.resolve(this.size)}}class Vj extends _V{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Kn.addEntry(e,o)):this.Kn.removeEntry(r)}),ve.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class Uj{constructor(e){this.persistence=e,this.Fi=new up(t=>Bm(t),bb),this.lastRemoteSnapshotVersion=xt.min(),this.highestTargetId=0,this.$i=0,this.Bi=new fO,this.targetCount=0,this.Li=Ym.gn()}forEachTarget(e,t){return this.Fi.forEach((r,o)=>t(o)),ve.resolve()}getLastRemoteSnapshotVersion(e){return ve.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ve.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),ve.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$i&&(this.$i=t),ve.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new Ym(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,ve.resolve()}updateTargetData(e,t){return this.Tn(t),ve.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,ve.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Fi.forEach((c,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.Fi.delete(c),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)}),ve.waitFor(u).next(()=>o)}getTargetCount(e){return ve.resolve(this.targetCount)}getTargetData(e,t){const r=this.Fi.get(t)||null;return ve.resolve(r)}addMatchingKeys(e,t,r){return this.Bi.Ei(t,r),ve.resolve()}removeMatchingKeys(e,t,r){this.Bi.Ri(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(c=>{u.push(o.markPotentiallyOrphaned(e,c))}),ve.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),ve.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Bi.Vi(t);return ve.resolve(r)}containsKey(e,t){return ve.resolve(this.Bi.containsKey(t))}}class Bj{constructor(e,t){this.Ui={},this.overlays={},this.es=new ba(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new Uj(this),this.indexManager=new _j,this.ds=new Lj(r=>this.referenceDelegate.qi(r)),this.M=new nV(t),this._s=new Oj(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new kj,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ui[e.toKey()];return r||(r=new Fj(t,this.referenceDelegate),this.Ui[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Ve("MemoryPersistence","Starting transaction:",e);const o=new jj(this.es.next());return this.referenceDelegate.Ki(),r(o).next(u=>this.referenceDelegate.Gi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Qi(e,t){return ve.or(Object.values(this.Ui).map(r=>()=>r.containsKey(e,t)))}}class jj extends XL{constructor(e){super(),this.currentSequenceNumber=e}}class pO{constructor(e){this.persistence=e,this.ji=new fO,this.Wi=null}static zi(e){return new pO(e)}get Hi(){if(this.Wi)return this.Wi;throw st()}addReference(e,t,r){return this.ji.addReference(r,t),this.Hi.delete(r.toString()),ve.resolve()}removeReference(e,t,r){return this.ji.removeReference(r,t),this.Hi.add(r.toString()),ve.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),ve.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(o=>this.Hi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Hi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ve.forEach(this.Hi,r=>{const o=qe.fromPath(r);return this.Ji(e,o).next(u=>{u||t.removeEntry(o,xt.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(r=>{r?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return ve.or([()=>ve.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function RV(n,e){return`firestore_clients_${n}_${e}`}function NV(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function gO(n,e){return`firestore_targets_${n}_${e}`}class lx{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Yi(e,t,r){const o=JSON.parse(r);let u,c="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return c&&o.error&&(c="string"==typeof o.error.message&&"string"==typeof o.error.code,c&&(u=new Pe(o.error.code,o.error.message))),c?new lx(e,t,o.state,u):(ui("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $b{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Yi(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Pe(r.error.code,r.error.message))),u?new $b(e,r.state,o):(ui("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class cx{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=JA();for(let c=0;o&&c<r.activeTargetIds.length;++c)o=zF(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return o?new cx(e,u):(ui("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class mO{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new mO(t.clientId,t.onlineState):(ui("SharedClientState",`Failed to parse online state: ${e}`),null)}}class _O{constructor(){this.activeTargetIds=JA()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yO{constructor(e,t,r,o,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.er=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new Jr(Yt),this.started=!1,this.rr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ur=RV(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new _O),this.cr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,we.Z)(function*(){const t=yield e.syncEngine.Fs();for(const o of t){if(o===e.er)continue;const u=e.getItem(RV(e.persistenceKey,o));if(u){const c=cx.Yi(o,u);c&&(e.ir=e.ir.insert(c.clientId,c))}}e.wr();const r=e.storage.getItem(e.dr);if(r){const o=e.mr(r);o&&e.gr(o)}for(const o of e.rr)e.sr(o);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,r){this.pr(e,t,r),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(gO(this.persistenceKey,e));if(r){const o=$b.Yi(e,r);o&&(t=o.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(gO(this.persistenceKey,e))}updateQueryState(e,t,r){this.Er(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ir(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ve("SharedClientState","READ",e,t),t}setItem(e,t){Ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ur)return void ui("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,we.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const o=t.Pr(r.key);return t.br(o,null)}{const o=t.Vr(r.key,r.newValue);if(o)return t.br(o.clientId,o)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const o=t.vr(r.key,r.newValue);if(o)return t.Sr(o)}}else if(t.lr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(r.key===t.dr){if(null!==r.newValue){const o=t.mr(r.newValue);if(o)return t.gr(o)}}else if(r.key===t.ar){const o=function(u){let c=ba.A;if(null!=u)try{const g=JSON.parse(u);Vt("number"==typeof g),c=g}catch(g){ui("SharedClientState","Failed to read sequence number from WebStorage",g)}return c}(r.newValue);o!==ba.A&&t.sequenceNumberHandler(o)}else if(r.key===t._r){const o=t.Nr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.kr(u)))}}else t.rr.push(r)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,r){const o=new lx(this.currentUser,e,t,r),u=NV(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Xi())}Ir(e){const t=NV(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,r){const o=gO(this.persistenceKey,e),u=new $b(e,t,r);this.setItem(o,u.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const r=this.Pr(e);return cx.Yi(r,t)}vr(e,t){const r=this.hr.exec(e),o=Number(r[1]);return lx.Yi(new ls(void 0!==r[2]?r[2]:null),o,t)}Dr(e,t){const r=this.lr.exec(e),o=Number(r[1]);return $b.Yi(o,t)}mr(e){return mO.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,we.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.ir.insert(e,t):this.ir.remove(e),o=this.yr(this.ir),u=this.yr(r),c=[],g=[];return u.forEach(y=>{o.has(y)||c.push(y)}),o.forEach(y=>{u.has(y)||g.push(y)}),this.syncEngine.Fr(c,g).then(()=>{this.ir=r})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=JA();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class MV{constructor(){this.$r=new _O,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,r){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new _O,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class $j{Lr(e){}shutdown(){}}class PV{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Hj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Gj{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class qj extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,r,o,u){const c=this.uo(e,t);Ve("RestConnection","Sending: ",c,r);const g={};return this.ao(g,o,u),this.co(e,c,g,r).then(y=>(Ve("RestConnection","Received: ",y),y),y=>{throw gb("RestConnection",`${e} failed with error: `,y,"url: ",c,"request:",r),y})}ho(e,t,r,o,u){return this.oo(e,t,r,o,u)}ao(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Fv,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}uo(e,t){return`${this.io}/v1/${t}:${Hj[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,o){return new Promise((u,c)=>{const g=new H2;g.listenOnce(hb.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case yc.NO_ERROR:const C=g.getResponseJson();Ve("Connection","XHR received:",JSON.stringify(C)),u(C);break;case yc.TIMEOUT:Ve("Connection",'RPC "'+e+'" timed out'),c(new Pe(ge.DEADLINE_EXCEEDED,"Request time out"));break;case yc.HTTP_ERROR:const S=g.getStatus();if(Ve("Connection",'RPC "'+e+'" failed with status:',S,"response text:",g.getResponseText()),S>0){const x=g.getResponseJson().error;if(x&&x.status&&x.message){const O=function($){const Z=$.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(Z)>=0?Z:ge.UNKNOWN}(x.status);c(new Pe(O,x.message))}else c(new Pe(ge.UNKNOWN,"Server responded with status "+g.getStatus()))}else c(new Pe(ge.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{Ve("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(o);g.send(t,"POST",y,r,15)})}lo(e,t,r){const o=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=tp(),c=np(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new pb({})),this.ao(g.initMessageHeaders,t,r),(0,k.uI)()||(0,k.b$)()||(0,k.d)()||(0,k.w1)()||(0,k.Mn)()||(0,k.ru)()||(g.httpHeadersOverwriteParam="$httpHeaders");const y=o.join("");Ve("Connection","Creating WebChannel: "+y,g);const C=u.createWebChannel(y,g);let S=!1,x=!1;const O=new Gj({Wr:Z=>{x?Ve("Connection","Not sending because WebChannel is closed:",Z):(S||(Ve("Connection","Opening WebChannel transport."),C.open(),S=!0),Ve("Connection","WebChannel sending:",Z),C.send(Z))},zr:()=>C.close()}),$=(Z,ye,xe)=>{Z.listen(ye,pt=>{try{xe(pt)}catch(dt){setTimeout(()=>{throw dt},0)}})};return $(C,rp.EventType.OPEN,()=>{x||Ve("Connection","WebChannel transport opened.")}),$(C,rp.EventType.CLOSE,()=>{x||(x=!0,Ve("Connection","WebChannel transport closed"),O.no())}),$(C,rp.EventType.ERROR,Z=>{x||(x=!0,gb("Connection","WebChannel transport errored:",Z),O.no(new Pe(ge.UNAVAILABLE,"The operation could not be completed")))}),$(C,rp.EventType.MESSAGE,Z=>{var ye;if(!x){const xe=Z.data[0];Vt(!!xe);const pt=xe,dt=pt.error||(null===(ye=pt[0])||void 0===ye?void 0:ye.error);if(dt){Ve("Connection","WebChannel received error:",dt);const et=dt.status;let rt=function(rn){const hi=ci[rn];if(void 0!==hi)return xL(hi)}(et),Wt=dt.message;void 0===rt&&(rt=ge.INTERNAL,Wt="Unknown error status: "+et+" with message "+dt.message),x=!0,O.no(new Pe(rt,Wt)),C.close()}else Ve("Connection","WebChannel received:",xe),O.so(xe)}}),$(c,fb.STAT_EVENT,Z=>{Z.stat===kv.PROXY?Ve("Connection","Detected buffering proxy"):Z.stat===kv.NOPROXY&&Ve("Connection","Detected no buffering proxy")}),setTimeout(()=>{O.eo()},0),O}}function OV(){return"undefined"!=typeof window?window:null}function dx(){return"undefined"!=typeof document?document:null}function Hb(n){return new PB(n,!0)}class vO{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Yn=e,this.timerId=t,this.fo=r,this._o=o,this.wo=u,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),o=Math.max(0,t-r);o>0&&Ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,o,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class kV{constructor(e,t,r,o,u,c,g,y){this.Yn=e,this.Ro=r,this.Po=o,this.bo=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=g,this.listener=y,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new vO(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,we.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,we.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var r=this;return(0,we.Z)(function*(){r.$o(),r.Bo(),r.Do.cancel(),r.Vo++,4!==e?r.Do.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(ui(t.toString()),ui("Using maximum backoff delay to prevent overloading the backend."),r.Do.Io()):t&&t.code===ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Lo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Vo===t&&this.qo(r,o)},r=>{e(()=>{const o=new Pe(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ko(o)})})}qo(e,t){const r=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{r(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(o=>{r(()=>this.Ko(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}No(){var e=this;this.state=5,this.Do.To((0,we.Z)(function*(){e.state=0,e.start()}))}Ko(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Wj extends kV{constructor(e,t,r,o,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.M=u}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:st(),o=e.targetChange.targetIds||[],u=function(y,C){return y.N?(Vt(void 0===C||"string"==typeof C),Ci.fromBase64String(C||"")):(Vt(void 0===C||C instanceof Uint8Array),Ci.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,g=c&&function(y){const C=void 0===y.code?ge.UNKNOWN:xL(y.code);return new Pe(C,y.message||"")}(c);t=new ML(r,o,u,g||null)}else if("documentChange"in e){const r=e.documentChange,o=wc(n,r.document.name),u=Gi(r.document.updateTime),c=new Ss({mapValue:{fields:r.document.fields}}),g=lr.newFoundDocument(o,u,c);t=new XA(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,o=wc(n,r.document),u=r.readTime?Gi(r.readTime):xt.min(),c=lr.newNoDocument(o,u);t=new XA([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,o=wc(n,r.document);t=new XA([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return st();{const r=e.filter,u=new IB(r.count||0);t=new NL(r.targetId,u)}}var y;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return xt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?xt.min():u.readTime?Gi(u.readTime):xt.min()}(e);return this.listener.Qo(t,r)}jo(e){const t={};t.database=Pb(this.M),t.addTarget=function(o,u){let c;const g=u.target;return c=GA(g)?{documents:$L(o,g)}:{query:HL(o,g)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=FL(o,u.resumeToken):u.snapshotVersion.compareTo(xt.min())>0&&(c.readTime=Nb(o,u.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return st()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Fo(t)}Wo(e){const t={};t.database=Pb(this.M),t.removeTarget=e,this.Fo(t)}}class zj extends kV{constructor(e,t,r,o,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.M=u,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(Vt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function(n,e){return n&&n.length>0?(Vt(void 0!==e),n.map(t=>function(r,o){let u=Gi(r.updateTime?r.updateTime:o);return u.isEqual(xt.min())&&(u=Gi(o)),new EB(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Gi(e.commitTime);return this.listener.Yo(r,t)}return Vt(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=Pb(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Ob(this.M,r))};this.Fo(t)}}class Zj extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=o,this.tu=!1}eu(){if(this.tu)throw new Pe(ge.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.oo(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Pe(ge.UNKNOWN,o.toString())})}ho(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.ho(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Pe(ge.UNKNOWN,o.toString())})}terminate(){this.tu=!0}}class Kj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(ui(t),this.iu=!1):Ve("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class Yj{constructor(e,t,r,o,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=u,this._u.Lr(g=>{r.enqueueAndForget((0,we.Z)(function*(){var y;fp(c)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,we.Z)(function*(C){const S=Ye(C);S.fu.add(4),yield ew(S),S.wu.set("Unknown"),S.fu.delete(4),yield Gb(S)}),function(C){return y.apply(this,arguments)})(c))}))}),this.wu=new Kj(r,o)}}function Gb(n){return wO.apply(this,arguments)}function wO(){return(wO=(0,we.Z)(function*(n){if(fp(n))for(const e of n.du)yield e(!0)})).apply(this,arguments)}function ew(n){return EO.apply(this,arguments)}function EO(){return(EO=(0,we.Z)(function*(n){for(const e of n.du)yield e(!1)})).apply(this,arguments)}function hx(n,e){const t=Ye(n);t.lu.has(e.targetId)||(t.lu.set(e.targetId,e),IO(t)?bO(t):nw(t).xo()&&CO(t,e))}function qb(n,e){const t=Ye(n),r=nw(t);t.lu.delete(e),r.xo()&&FV(t,e),0===t.lu.size&&(r.xo()?r.Mo():fp(t)&&t.wu.set("Unknown"))}function CO(n,e){n.mu.Z(e.targetId),nw(n).jo(e)}function FV(n,e){n.mu.Z(e),nw(n).Wo(e)}function bO(n){n.mu=new RB({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.lu.get(e)||null}),nw(n).start(),n.wu.ru()}function IO(n){return fp(n)&&!nw(n).Co()&&n.lu.size>0}function fp(n){return 0===Ye(n).fu.size}function LV(n){n.mu=void 0}function Qj(n){return TO.apply(this,arguments)}function TO(){return(TO=(0,we.Z)(function*(n){n.lu.forEach((e,t)=>{CO(n,e)})})).apply(this,arguments)}function Jj(n,e){return DO.apply(this,arguments)}function DO(){return(DO=(0,we.Z)(function*(n,e){LV(n),IO(n)?(n.wu.au(e),bO(n)):n.wu.set("Unknown")})).apply(this,arguments)}function Xj(n,e,t){return SO.apply(this,arguments)}function SO(){return(SO=(0,we.Z)(function*(n,e,t){if(n.wu.set("Online"),e instanceof ML&&2===e.state&&e.cause)try{yield(r=(0,we.Z)(function*(o,u){const c=u.cause;for(const g of u.targetIds)o.lu.has(g)&&(yield o.remoteSyncer.rejectListen(g,c),o.lu.delete(g),o.mu.removeTarget(g))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield fx(n,r)}else if(e instanceof XA?n.mu.ut(e):e instanceof NL?n.mu._t(e):n.mu.ht(e),!t.isEqual(xt.min()))try{const r=yield TV(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const c=o.mu.yt(u);return c.targetChanges.forEach((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const C=o.lu.get(y);C&&o.lu.set(y,C.withResumeToken(g.resumeToken,u))}}),c.targetMismatches.forEach(g=>{const y=o.lu.get(g);if(!y)return;o.lu.set(g,y.withResumeToken(Ci.EMPTY_BYTE_STRING,y.snapshotVersion)),FV(o,g);const C=new lp(y.target,g,1,y.sequenceNumber);CO(o,C)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Ve("RemoteStore","Failed to raise snapshot:",r),yield fx(n,r)}var r})).apply(this,arguments)}function fx(n,e,t){return AO.apply(this,arguments)}function AO(){return(AO=(0,we.Z)(function*(n,e,t){if(!Gm(e))throw e;n.fu.add(1),yield ew(n),n.wu.set("Offline"),t||(t=()=>TV(n.localStore)),n.asyncQueue.enqueueRetryable((0,we.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield t(),n.fu.delete(1),yield Gb(n)}))})).apply(this,arguments)}function VV(n,e){return e().catch(t=>fx(n,t,e))}function tw(n){return xO.apply(this,arguments)}function xO(){return(xO=(0,we.Z)(function*(n){const e=Ye(n),t=pp(e);let r=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;e$(e);)try{const o=yield Nj(e.localStore,r);if(null===o){0===e.hu.length&&t.Mo();break}r=o.batchId,t$(e,o)}catch(o){yield fx(e,o)}UV(e)&&BV(e)})).apply(this,arguments)}function e$(n){return fp(n)&&n.hu.length<10}function t$(n,e){n.hu.push(e);const t=pp(n);t.xo()&&t.Ho&&t.Jo(e.mutations)}function UV(n){return fp(n)&&!pp(n).Co()&&n.hu.length>0}function BV(n){pp(n).start()}function n$(n){return RO.apply(this,arguments)}function RO(){return(RO=(0,we.Z)(function*(n){pp(n).Zo()})).apply(this,arguments)}function r$(n){return NO.apply(this,arguments)}function NO(){return(NO=(0,we.Z)(function*(n){const e=pp(n);for(const t of n.hu)e.Jo(t.mutations)})).apply(this,arguments)}function i$(n,e,t){return MO.apply(this,arguments)}function MO(){return(MO=(0,we.Z)(function*(n,e,t){const r=n.hu.shift(),o=QP.from(r,e,t);yield VV(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield tw(n)})).apply(this,arguments)}function s$(n,e){return PO.apply(this,arguments)}function PO(){return(PO=(0,we.Z)(function*(n,e){var t;e&&pp(n).Ho&&(yield(t=(0,we.Z)(function*(r,o){if(AL(u=o.code)&&u!==ge.ABORTED){const c=r.hu.shift();pp(r).ko(),yield VV(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o)),yield tw(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),UV(n)&&BV(n)})).apply(this,arguments)}function jV(n,e){return OO.apply(this,arguments)}function OO(){return(OO=(0,we.Z)(function*(n,e){const t=Ye(n);t.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const r=fp(t);t.fu.add(3),yield ew(t),r&&t.wu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.fu.delete(3),yield Gb(t)})).apply(this,arguments)}function kO(n,e){return FO.apply(this,arguments)}function FO(){return(FO=(0,we.Z)(function*(n,e){const t=Ye(n);e?(t.fu.delete(2),yield Gb(t)):e||(t.fu.add(2),yield ew(t),t.wu.set("Unknown"))})).apply(this,arguments)}function nw(n){return n.gu||(n.gu=function(e,t,r){const o=Ye(e);return o.eu(),new Wj(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Hr:Qj.bind(null,n),Yr:Jj.bind(null,n),Qo:Xj.bind(null,n)}),n.du.push(function(){var e=(0,we.Z)(function*(t){t?(n.gu.ko(),IO(n)?bO(n):n.wu.set("Unknown")):(yield n.gu.stop(),LV(n))});return function(t){return e.apply(this,arguments)}}())),n.gu}function pp(n){return n.yu||(n.yu=function(e,t,r){const o=Ye(e);return o.eu(),new zj(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Hr:n$.bind(null,n),Yr:s$.bind(null,n),Xo:r$.bind(null,n),Yo:i$.bind(null,n)}),n.du.push(function(){var e=(0,we.Z)(function*(t){t?(n.yu.ko(),yield tw(n)):(yield n.yu.stop(),n.hu.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.hu.length} pending writes`),n.hu=[]))});return function(t){return e.apply(this,arguments)}}())),n.yu}class LO{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new $i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,o,u){const c=Date.now()+r,g=new LO(e,t,c,o,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rw(n,e){if(ui("AsyncQueue",`${e}: ${n}`),Gm(n))return new Pe(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class iw{constructor(e){this.comparator=e?(t,r)=>e(t,r)||qe.comparator(t.key,r.key):(t,r)=>qe.comparator(t.key,r.key),this.keyedMap=qP(),this.sortedSet=new Jr(this.comparator)}static emptySet(e){return new iw(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof iw)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new iw;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class $V{constructor(){this.pu=new Jr(qe.comparator)}track(e){const t=e.doc.key,r=this.pu.get(t);r?0!==e.type&&3===r.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==r.type?this.pu=this.pu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.pu=this.pu.remove(t):1===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):st():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,r)=>{e.push(r)}),e}}class sw{constructor(e,t,r,o,u,c,g,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=g,this.excludesMetadataChanges=y}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new sw(e,t,iw.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ib(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class o${constructor(){this.Tu=void 0,this.listeners=[]}}class a${constructor(){this.queries=new up(e=>hL(e),Ib),this.onlineState="Unknown",this.Eu=new Set}}function VO(n,e){return UO.apply(this,arguments)}function UO(){return(UO=(0,we.Z)(function*(n,e){const t=Ye(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new o$),o)try{u.Tu=yield t.onListen(r)}catch(c){const g=rw(c,`Initialization of query '${jP(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.Au(t.onlineState),u.Tu&&e.Ru(u.Tu)&&$O(t)})).apply(this,arguments)}function BO(n,e){return jO.apply(this,arguments)}function jO(){return(jO=(0,we.Z)(function*(n,e){const t=Ye(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)})).apply(this,arguments)}function u$(n,e){const t=Ye(n);let r=!1;for(const o of e){const c=t.queries.get(o.query);if(c){for(const g of c.listeners)g.Ru(o)&&(r=!0);c.Tu=o}}r&&$O(t)}function l$(n,e,t){const r=Ye(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function $O(n){n.Eu.forEach(e=>{e.next()})}class HO{constructor(e,t,r){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}Ru(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new sw(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=sw.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class c${constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class HV{constructor(e){this.M=e}fi(e){return wc(this.M,e)}di(e){return e.metadata.exists?jL(this.M,e.document,!1):lr.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return Gi(e)}}class d${constructor(e,t,r){this.Nu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=GV(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=yn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,r=new HV(this.M);for(const o of e)if(o.metadata.queries){const u=r.fi(o.metadata.name);for(const c of o.metadata.queries){const g=(t.get(c)||Nn()).add(u);t.set(c,g)}}return t}complete(){var e=this;return(0,we.Z)(function*(){const t=yield function(n,e,t,r){return dO.apply(this,arguments)}(e.localStore,new HV(e.M),e.documents,e.Nu.id),r=e.Mu(e.documents);for(const o of e.queries)yield Pj(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function GV(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class qV{constructor(e){this.key=e}}class WV{constructor(e){this.key=e}}class zV{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=Nn(),this.mutatedKeys=Nn(),this.Uu=pL(e),this.qu=new iw(this.Uu)}get Ku(){return this.$u}Gu(e,t){const r=t?t.Qu:new $V,o=t?t.qu:this.qu;let u=t?t.mutatedKeys:this.mutatedKeys,c=o,g=!1;const y=WA(this.query)&&o.size===this.query.limit?o.last():null,C=zA(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((S,x)=>{const O=o.get(S),$=$P(this.query,x)?x:null,Z=!!O&&this.mutatedKeys.has(O.key),ye=!!$&&($.hasLocalMutations||this.mutatedKeys.has($.key)&&$.hasCommittedMutations);let xe=!1;O&&$?O.data.isEqual($.data)?Z!==ye&&(r.track({type:3,doc:$}),xe=!0):this.ju(O,$)||(r.track({type:2,doc:$}),xe=!0,(y&&this.Uu($,y)>0||C&&this.Uu($,C)<0)&&(g=!0)):!O&&$?(r.track({type:0,doc:$}),xe=!0):O&&!$&&(r.track({type:1,doc:O}),xe=!0,(y||C)&&(g=!0)),xe&&($?(c=c.add($),u=ye?u.add(S):u.delete(S)):(c=c.delete(S),u=u.delete(S)))}),WA(this.query)||zA(this.query))for(;c.size>this.query.limit;){const S=WA(this.query)?c.last():c.first();c=c.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{qu:c,Qu:r,ni:g,mutatedKeys:u}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const u=e.Qu.Iu();u.sort((C,S)=>function(x,O){const $=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return $(x)-$(O)}(C.type,S.type)||this.Uu(C.doc,S.doc)),this.Wu(r);const c=t?this.zu():[],g=0===this.Lu.size&&this.current?1:0,y=g!==this.Bu;return this.Bu=g,0!==u.length||y?{snapshot:new sw(this.query,e.qu,o,u,e.mutatedKeys,0===g,y,!1),Hu:c}:{Hu:c}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new $V,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=Nn(),this.qu.forEach(r=>{this.Ju(r.key)&&(this.Lu=this.Lu.add(r.key))});const t=[];return e.forEach(r=>{this.Lu.has(r)||t.push(new WV(r))}),this.Lu.forEach(r=>{e.has(r)||t.push(new qV(r))}),t}Yu(e){this.$u=e.li,this.Lu=Nn();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return sw.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class h${constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class f${constructor(e){this.key=e,this.Zu=!1}}class p${constructor(e,t,r,o,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.ta={},this.ea=new up(g=>hL(g),Ib),this.na=new Map,this.sa=new Set,this.ia=new Jr(qe.comparator),this.ra=new Map,this.oa=new fO,this.ua={},this.aa=new Map,this.ca=Ym.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function g$(n,e){return GO.apply(this,arguments)}function GO(){return(GO=(0,we.Z)(function*(n,e){const t=fk(n);let r,o;const u=t.ea.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.Xu();else{const c=yield Jv(t.localStore,au(e));t.isPrimaryClient&&hx(t.remoteStore,c);const g=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,o=yield qO(t,e,r,"current"===g)}return o})).apply(this,arguments)}function qO(n,e,t,r){return WO.apply(this,arguments)}function WO(){return(WO=(0,we.Z)(function*(n,e,t,r){n.la=(S,x,O)=>{return($=(0,we.Z)(function*(Z,ye,xe,pt){let dt=ye.view.Gu(xe);dt.ni&&(dt=yield ux(Z.localStore,ye.query,!1).then(({documents:Wt})=>ye.view.Gu(Wt,dt)));const et=pt&&pt.targetChanges.get(ye.targetId),rt=ye.view.applyChanges(dt,Z.isPrimaryClient,et);return nk(Z,ye.targetId,rt.Hu),rt.snapshot}),function(Z,ye,xe,pt){return $.apply(this,arguments)})(n,S,x,O);var $};const o=yield ux(n.localStore,e,!0),u=new zV(e,o.li),c=u.Gu(o.documents),g=Rb.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),y=u.applyChanges(c,n.isPrimaryClient,g);nk(n,t,y.Hu);const C=new h$(e,t,u);return n.ea.set(e,C),n.na.has(t)?n.na.get(t).push(e):n.na.set(t,[e]),y.snapshot})).apply(this,arguments)}function m$(n,e){return zO.apply(this,arguments)}function zO(){return(zO=(0,we.Z)(function*(n,e){const t=Ye(n),r=t.ea.get(e),o=t.na.get(r.targetId);if(o.length>1)return t.na.set(r.targetId,o.filter(u=>!Ib(u,e))),void t.ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Xv(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),qb(t.remoteStore,r.targetId),ow(t,r.targetId)}).catch(Qm))):(ow(t,r.targetId),yield Xv(t.localStore,r.targetId,!0))})).apply(this,arguments)}function ZO(){return(ZO=(0,we.Z)(function*(n,e,t){const r=pk(n);try{const o=yield function(u,c){const g=Ye(u),y=Qr.now(),C=c.reduce((x,O)=>x.add(O.key),Nn());let S;return g.persistence.runTransaction("Locally write mutations","readwrite",x=>g.ci.Ks(x,C).next(O=>{S=O;const $=[];for(const Z of c){const ye=bB(Z,S.get(Z.key));null!=ye&&$.push(new Hm(Z.key,ye,nL(ye.value.mapValue),li.exists(!0)))}return g.Bs.addMutationBatch(x,y,$,c)})).then(x=>(x.applyToLocalDocumentSet(S),{batchId:x.batchId,changes:S}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,c,g){let y=u.ua[u.currentUser.toKey()];y||(y=new Jr(Yt)),y=y.insert(c,g),u.ua[u.currentUser.toKey()]=y}(r,o.batchId,t),yield sh(r,o.changes),yield tw(r.remoteStore)}catch(o){const u=rw(o,"Failed to persist write");t.reject(u)}})).apply(this,arguments)}function ZV(n,e){return KO.apply(this,arguments)}function KO(){return(KO=(0,we.Z)(function*(n,e){const t=Ye(n);try{const r=yield Rj(t.localStore,e);e.targetChanges.forEach((o,u)=>{const c=t.ra.get(u);c&&(Vt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?c.Zu=!0:o.modifiedDocuments.size>0?Vt(c.Zu):o.removedDocuments.size>0&&(Vt(c.Zu),c.Zu=!1))}),yield sh(t,r,e)}catch(r){yield Qm(r)}})).apply(this,arguments)}function KV(n,e,t){const r=Ye(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ea.forEach((u,c)=>{const g=c.view.Au(e);g.snapshot&&o.push(g.snapshot)}),function(u,c){const g=Ye(u);g.onlineState=c;let y=!1;g.queries.forEach((C,S)=>{for(const x of S.listeners)x.Au(c)&&(y=!0)}),y&&$O(g)}(r.eventManager,e),o.length&&r.ta.Qo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function y$(n,e,t){return YO.apply(this,arguments)}function YO(){return(YO=(0,we.Z)(function*(n,e,t){const r=Ye(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.ra.get(e),u=o&&o.key;if(u){let c=new Jr(qe.comparator);c=c.insert(u,lr.newNoDocument(u,xt.min()));const g=Nn().add(u),y=new xb(xt.min(),new Map,new cr(Yt),c,g);yield ZV(r,y),r.ia=r.ia.remove(u),r.ra.delete(e),rk(r)}else yield Xv(r.localStore,e,!1).then(()=>ow(r,e,t)).catch(Qm)})).apply(this,arguments)}function v$(n,e){return QO.apply(this,arguments)}function QO(){return(QO=(0,we.Z)(function*(n,e){const t=Ye(n),r=e.batch.batchId;try{const o=yield xj(t.localStore,e);tk(t,r,null),ek(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield sh(t,o)}catch(o){yield Qm(o)}})).apply(this,arguments)}function w$(n,e,t){return JO.apply(this,arguments)}function JO(){return(JO=(0,we.Z)(function*(n,e,t){const r=Ye(n);try{const o=yield function(u,c){const g=Ye(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let C;return g.Bs.lookupMutationBatch(y,c).next(S=>(Vt(null!==S),C=S.keys(),g.Bs.removeMutationBatch(y,S))).next(()=>g.Bs.performConsistencyCheck(y)).next(()=>g.ci.Ks(y,C))})}(r.localStore,e);tk(r,e,t),ek(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield sh(r,o)}catch(o){yield Qm(o)}})).apply(this,arguments)}function XO(){return(XO=(0,we.Z)(function*(n,e){const t=Ye(n);fp(t.remoteStore)||Ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=Ye(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>c.Bs.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const o=t.aa.get(r)||[];o.push(e),t.aa.set(r,o)}catch(r){const o=rw(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}})).apply(this,arguments)}function ek(n,e){(n.aa.get(e)||[]).forEach(t=>{t.resolve()}),n.aa.delete(e)}function tk(n,e,t){const r=Ye(n);let o=r.ua[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ua[r.currentUser.toKey()]=o}}function ow(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.na.get(e))n.ea.delete(r),t&&n.ta.fa(r,t);n.na.delete(e),n.isPrimaryClient&&n.oa.Pi(e).forEach(r=>{n.oa.containsKey(r)||YV(n,r)})}function YV(n,e){n.sa.delete(e.path.canonicalString());const t=n.ia.get(e);null!==t&&(qb(n.remoteStore,t),n.ia=n.ia.remove(e),n.ra.delete(t),rk(n))}function nk(n,e,t){for(const r of t)r instanceof qV?(n.oa.addReference(r.key,e),C$(n,r)):r instanceof WV?(Ve("SyncEngine","Document no longer in limbo: "+r.key),n.oa.removeReference(r.key,e),n.oa.containsKey(r.key)||YV(n,r.key)):st()}function C$(n,e){const t=e.key,r=t.path.canonicalString();n.ia.get(t)||n.sa.has(r)||(Ve("SyncEngine","New document in limbo: "+t),n.sa.add(r),rk(n))}function rk(n){for(;n.sa.size>0&&n.ia.size<n.maxConcurrentLimboResolutions;){const e=n.sa.values().next().value;n.sa.delete(e);const t=new qe(yn.fromString(e)),r=n.ca.next();n.ra.set(r,new f$(t)),n.ia=n.ia.insert(t,r),hx(n.remoteStore,new lp(au(jv(t.path)),r,2,ba.A))}}function sh(n,e,t){return ik.apply(this,arguments)}function ik(){return(ik=(0,we.Z)(function*(n,e,t){const r=Ye(n),o=[],u=[],c=[];var g;r.ea.isEmpty()||(r.ea.forEach((g,y)=>{c.push(r.la(y,e,t).then(C=>{if(C){r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,C.fromCache?"not-current":"current"),o.push(C);const S=uO.Ys(y.targetId,C);u.push(S)}}))}),yield Promise.all(c),r.ta.Qo(o),yield(g=(0,we.Z)(function*(y,C){const S=Ye(y);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>ve.forEach(C,O=>ve.forEach(O.Hs,$=>S.persistence.referenceDelegate.addReference(x,O.targetId,$)).next(()=>ve.forEach(O.Js,$=>S.persistence.referenceDelegate.removeReference(x,O.targetId,$)))))}catch(x){if(!Gm(x))throw x;Ve("LocalStore","Failed to update sequence numbers: "+x)}for(const x of C){const O=x.targetId;if(!x.fromCache){const $=S.ii.get(O),ye=$.withLastLimboFreeSnapshotVersion($.snapshotVersion);S.ii=S.ii.insert(O,ye)}}}),function(y,C){return g.apply(this,arguments)})(r.localStore,u))})).apply(this,arguments)}function b$(n,e){return sk.apply(this,arguments)}function sk(){return(sk=(0,we.Z)(function*(n,e){const t=Ye(n);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const r=yield IV(t.localStore,e);t.currentUser=e,(o=t).aa.forEach(c=>{c.forEach(g=>{g.reject(new Pe(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.aa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield sh(t,r.hi)}var o})).apply(this,arguments)}function I$(n,e){const t=Ye(n),r=t.ra.get(e);if(r&&r.Zu)return Nn().add(r.key);{let o=Nn();const u=t.na.get(e);if(!u)return o;for(const c of u){const g=t.ea.get(c);o=o.unionWith(g.view.Ku)}return o}}function T$(n,e){return ok.apply(this,arguments)}function ok(){return(ok=(0,we.Z)(function*(n,e){const t=Ye(n),r=yield ux(t.localStore,e.query,!0),o=e.view.Yu(r);return t.isPrimaryClient&&nk(t,e.targetId,o.Hu),o})).apply(this,arguments)}function D$(n,e){return ak.apply(this,arguments)}function ak(){return(ak=(0,we.Z)(function*(n,e){const t=Ye(n);return AV(t.localStore,e).then(r=>sh(t,r))})).apply(this,arguments)}function S$(n,e,t,r){return uk.apply(this,arguments)}function uk(){return(uk=(0,we.Z)(function*(n,e,t,r){const o=Ye(n),u=yield function(c,g){const y=Ye(c),C=Ye(y.Bs);return y.persistence.runTransaction("Lookup mutation documents","readonly",S=>C.fn(S,g).next(x=>x?y.ci.Ks(S,x):ve.resolve(null)))}(o.localStore,e);var g;null!==u?("pending"===t?yield tw(o.remoteStore):"acknowledged"===t||"rejected"===t?(tk(o,e,r||null),ek(o,e),g=e,Ye(Ye(o.localStore).Bs)._n(g)):st(),yield sh(o,u)):Ve("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function lk(){return(lk=(0,we.Z)(function*(n,e){const t=Ye(n);if(fk(t),pk(t),!0===e&&!0!==t.ha){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield QV(t,r.toArray());t.ha=!0,yield kO(t.remoteStore,!0);for(const u of o)hx(t.remoteStore,u)}else if(!1===e&&!1!==t.ha){const r=[];let o=Promise.resolve();t.na.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):o=o.then(()=>(ow(t,c),Xv(t.localStore,c,!0))),qb(t.remoteStore,c)}),yield o,yield QV(t,r),function(u){const c=Ye(u);c.ra.forEach((g,y)=>{qb(c.remoteStore,y)}),c.oa.bi(),c.ra=new Map,c.ia=new Jr(qe.comparator)}(t),t.ha=!1,yield kO(t.remoteStore,!1)}})).apply(this,arguments)}function QV(n,e,t){return ck.apply(this,arguments)}function ck(){return(ck=(0,we.Z)(function*(n,e,t){const r=Ye(n),o=[],u=[];for(const c of e){let g;const y=r.na.get(c);if(y&&0!==y.length){g=yield Jv(r.localStore,au(y[0]));for(const C of y){const S=r.ea.get(C),x=yield T$(r,S);x.snapshot&&u.push(x.snapshot)}}else{const C=yield SV(r.localStore,c);g=yield Jv(r.localStore,C),yield qO(r,JV(C),c,!1)}o.push(g)}return r.ta.Qo(u),o})).apply(this,arguments)}function JV(n){return cL(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function x$(n){const e=Ye(n);return Ye(Ye(e.localStore).persistence).Fs()}function R$(n,e,t,r){return dk.apply(this,arguments)}function dk(){return(dk=(0,we.Z)(function*(n,e,t,r){const o=Ye(n);if(o.ha)return void Ve("SyncEngine","Ignoring unexpected query state notification.");const u=o.na.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield AV(o.localStore,fL(u[0])),g=xb.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield sh(o,c,g);break}case"rejected":yield Xv(o.localStore,e,!0),ow(o,e,r);break;default:st()}})).apply(this,arguments)}function N$(n,e,t){return hk.apply(this,arguments)}function hk(){return(hk=(0,we.Z)(function*(n,e,t){const r=fk(n);if(r.ha){for(const o of e){if(r.na.has(o)){Ve("SyncEngine","Adding an already active target "+o);continue}const u=yield SV(r.localStore,o),c=yield Jv(r.localStore,u);yield qO(r,JV(u),c.targetId,!1),hx(r.remoteStore,c)}for(const o of t)r.na.has(o)&&(yield Xv(r.localStore,o,!1).then(()=>{qb(r.remoteStore,o),ow(r,o)}).catch(Qm))}})).apply(this,arguments)}function fk(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=I$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=y$.bind(null,e),e.ta.Qo=u$.bind(null,e.eventManager),e.ta.fa=l$.bind(null,e.eventManager),e}function pk(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=v$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=w$.bind(null,e),e}class XV{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,we.Z)(function*(){t.M=Hb(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return bV(this.persistence,new CV,e.initialUser,this.M)}wa(e){return new Bj(pO.zi,this.M)}_a(e){return new MV}terminate(){var e=this;return(0,we.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class eU extends XV{constructor(e,t,r){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield t().call(r,e),yield r.ya.initialize(r,e),yield pk(r.ya.syncEngine),yield tw(r.ya.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ga(e){return bV(this.persistence,new CV,e.initialUser,this.M)}ma(e){return new Ej(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=aO(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ho.withCacheSize(this.cacheSizeBytes):Ho.DEFAULT;return new oO(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,OV(),dx(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new MV}}class P$ extends eU{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield t().call(r,e);const o=r.ya.syncEngine;r.sharedClientState instanceof yO&&(r.sharedClientState.syncEngine={Mr:S$.bind(null,o),Or:R$.bind(null,o),Fr:N$.bind(null,o),Fs:x$.bind(null,o),kr:D$.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,we.Z)(function*(c){yield function(n,e){return lk.apply(this,arguments)}(r.ya.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}_a(e){const t=OV();if(!yO.vt(t))throw new Pe(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=aO(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new yO(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class gk{initialize(e,t){var r=this;return(0,we.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>KV(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=b$.bind(null,r.syncEngine),yield kO(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new a$}createDatastore(e){const t=Hb(e.databaseInfo.databaseId),r=new qj(e.databaseInfo);return new Zj(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=g=>KV(this.syncEngine,g,0),c=PV.vt()?new PV:new $j,new Yj(t,r,o,u,c);var t,r,o,u,c}createSyncEngine(e,t){return function(r,o,u,c,g,y,C){const S=new p$(r,o,u,c,g,y);return C&&(S.ha=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,we.Z)(function*(t){const r=Ye(t);Ve("RemoteStore","RemoteStore shutting down."),r.fu.add(5),yield ew(r),r._u.shutdown(),r.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function tU(n,e=10240){let t=0;return{read:()=>(0,we.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,we.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class px{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class O${constructor(e,t){this.Ta=e,this.M=t,this.metadata=new $i,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(r=>{r&&r.xu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,we.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,we.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,we.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const r=e.Ea.decode(t),o=Number(r);isNaN(o)&&e.Pa(`length string (${r}) is not valid number`);const u=yield e.ba(o);return new c$(JSON.parse(u),t.length+o)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,we.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,we.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const r=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,we.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class k${constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,we.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Pe(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,we.Z)(function*(u,c){const g=Ye(u),y=Pb(g.M)+"/documents",C={documents:c.map($=>Mb(g.M,$))},S=yield g.ho("BatchGetDocuments",y,C),x=new Map;S.forEach($=>{const Z=function(n,e){return"found"in e?function(t,r){Vt(!!r.found);const o=wc(t,r.found.name),u=Gi(r.found.updateTime),c=new Ss({mapValue:{fields:r.found.fields}});return lr.newFoundDocument(o,u,c)}(n,e):"missing"in e?function(t,r){Vt(!!r.missing),Vt(!!r.readTime);const o=wc(t,r.missing),u=Gi(r.readTime);return lr.newNoDocument(o,u)}(n,e):st()}(g.M,$);x.set(Z.key.toString(),Z)});const O=[];return c.forEach($=>{const Z=x.get($.toString());Vt(!!Z),O.push(Z)}),O}),function(u,c){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Sb(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,we.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=qe.fromPath(o);e.mutations.push(new GP(u,e.precondition(u)))}),yield(r=(0,we.Z)(function*(o,u){const c=Ye(o),g=Pb(c.M)+"/documents",y={writes:u.map(C=>Ob(c.M,C))};yield c.oo("Commit",g,y)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=xt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Pe(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?li.updateTime(t):li.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(xt.min()))throw new Pe(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return li.updateTime(t)}return li.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class F${constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.Sa=5,this.Do=new vO(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,we.Z)(function*(){const t=new k$(e.datastore),r=e.Ca(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.xa(u)}))}).catch(o=>{e.xa(o)})}))}Ca(e){try{const t=this.updateFunction(e);return!Fm(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!AL(t)}return!1}}class L${constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=ls.UNAUTHENTICATED,this.clientId=$F.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,we.Z)(function*(g){Ve("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Ve("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,we.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new $i;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=rw(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function nU(n,e){return mk.apply(this,arguments)}function mk(){return(mk=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,we.Z)(function*(u){r.isEqual(u)||(yield IV(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e})).apply(this,arguments)}function rU(n,e){return _k.apply(this,arguments)}function _k(){return(_k=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield yk(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>jV(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>jV(e.remoteStore,u)),n.onlineComponents=e})).apply(this,arguments)}function yk(n){return vk.apply(this,arguments)}function vk(){return(vk=(0,we.Z)(function*(n){return n.offlineComponents||(Ve("FirestoreClient","Using default OfflineComponentProvider"),yield nU(n,new XV)),n.offlineComponents})).apply(this,arguments)}function gx(n){return wk.apply(this,arguments)}function wk(){return(wk=(0,we.Z)(function*(n){return n.onlineComponents||(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield rU(n,new gk)),n.onlineComponents})).apply(this,arguments)}function iU(n){return yk(n).then(e=>e.persistence)}function Ek(n){return yk(n).then(e=>e.localStore)}function sU(n){return gx(n).then(e=>e.remoteStore)}function Ck(n){return gx(n).then(e=>e.syncEngine)}function aw(n){return bk.apply(this,arguments)}function bk(){return(bk=(0,we.Z)(function*(n){const e=yield gx(n),t=e.eventManager;return t.onListen=g$.bind(null,e.syncEngine),t.onUnlisten=m$.bind(null,e.syncEngine),t})).apply(this,arguments)}function oU(n,e,t={}){const r=new $i;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(o,u,c,g,y){const C=new px({next:x=>{u.enqueueAndForget(()=>BO(o,S));const O=x.docs.has(c);!O&&x.fromCache?y.reject(new Pe(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&x.fromCache&&g&&"server"===g.source?y.reject(new Pe(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(x)},error:x=>y.reject(x)}),S=new HO(jv(c.path),C,{includeMetadataChanges:!0,Cu:!0});return VO(o,S)}(yield aw(n),n.asyncQueue,e,t,r)})),r.promise}function aU(n,e,t={}){const r=new $i;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(o,u,c,g,y){const C=new px({next:x=>{u.enqueueAndForget(()=>BO(o,S)),x.fromCache&&"server"===g.source?y.reject(new Pe(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(x)},error:x=>y.reject(x)}),S=new HO(c,C,{includeMetadataChanges:!0,Cu:!0});return VO(o,S)}(yield aw(n),n.asyncQueue,e,t,r)})),r.promise}const uU=new Map;function Ik(n,e,t){if(!t)throw new Pe(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function lU(n,e,t,r){if(!0===e&&!0===r)throw new Pe(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function cU(n){if(!qe.isDocumentKey(n))throw new Pe(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function dU(n){if(qe.isDocumentKey(n))throw new Pe(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function mx(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":st()}function gn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Pe(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=mx(n);throw new Pe(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function hU(n,e){if(e<=0)throw new Pe(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class fU{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Pe(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pe(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,lU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wb{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fU({}),this._settingsFrozen=!1,e instanceof nh?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Pe(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nh(o.options.projectId)}(e))}get app(){if(!this._app)throw new Pe(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pe(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fU(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new W2;switch(t.type){case"gapi":const r=t.client;return Vt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new Y2(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Pe(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=uU.get(e);t&&(Ve("ComponentProvider","Removing Datastore"),uU.delete(e),t.terminate())}(this),Promise.resolve()}}class dr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dr(this.firestore,e,this._key)}}class As{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new As(this.firestore,e,this._query)}}class Cc extends As{constructor(e,t,r){super(e,t,jv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dr(this.firestore,null,new qe(e))}withConverter(e){return new Cc(this.firestore,e,this._path)}}function pU(n,e,...t){if(n=(0,k.m9)(n),Ik("collection","path",e),n instanceof Wb){const r=yn.fromString(e,...t);return dU(r),new Cc(n,null,r)}{if(!(n instanceof dr||n instanceof Cc))throw new Pe(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(yn.fromString(e,...t));return dU(r),new Cc(n.firestore,null,r)}}function _x(n,e,...t){if(n=(0,k.m9)(n),1===arguments.length&&(e=$F.R()),Ik("doc","path",e),n instanceof Wb){const r=yn.fromString(e,...t);return cU(r),new dr(n,null,new qe(r))}{if(!(n instanceof dr||n instanceof Cc))throw new Pe(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(yn.fromString(e,...t));return cU(r),new dr(n.firestore,n instanceof Cc?n.converter:null,new qe(r))}}function gU(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),(n instanceof dr||n instanceof Cc)&&(e instanceof dr||e instanceof Cc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function mU(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),n instanceof As&&e instanceof As&&n.firestore===e.firestore&&Ib(n._query,e._query)&&n.converter===e.converter}class Z${constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new vO(this,"async_queue_retry"),this.qa=()=>{const t=dx();t&&Ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const e=dx();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=dx();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new $i;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,we.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(t){if(!Gm(t))throw t;Ve("AsyncQueue","Operation failed with retryable error: "+t)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(r=>{throw this.$a=r,this.Ba=!1,ui("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.Ba=!1,r))));return this.ka=t,t}enqueueAfterDelay(e,t,r){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const o=LO.createAndSchedule(this,e,t,r,u=>this.ja(u));return this.Fa.push(o),o}Ka(){this.$a&&st()}verifyOperationInProgress(){}Wa(){var e=this;return(0,we.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function Tk(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class K${constructor(){this._progressObserver={},this._taskCompletionResolver=new $i,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Er extends Wb{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new Z$,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||_U(this),this._firestoreClient.terminate()}}function di(n){return n._firestoreClient||_U(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function _U(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new nB(n._databaseId,u,n._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var u,g;n._firestoreClient=new L$(n._authCredentials,n._appCheckCredentials,n._queue,r)}function yU(n,e,t){const r=new $i;return n.asyncQueue.enqueue((0,we.Z)(function*(){try{yield nU(n,t),yield rU(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===ge.FAILED_PRECONDITION||u.code===ge.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function vU(n){if(n._initialized||n._terminated)throw new Pe(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class oh{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pe(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class bc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bc(Ci.fromBase64String(e))}catch(t){throw new Pe(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new bc(Ci.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Xm{constructor(e){this._methodName=e}}class yx{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Yt(this._lat,e._lat)||Yt(this._long,e._long)}}const sH=/^__.*__$/;class oH{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Hm(e,this.data,this.fieldMask,t,this.fieldTransforms):new Db(e,this.data,t,this.fieldTransforms)}}class wU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Hm(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function EU(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class vx{constructor(e,t,r,o,u,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===u&&this.Ya(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new vx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Za({path:r,ec:!1});return o.nc(e),o}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Za({path:r,ec:!1});return o.Ya(),o}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return Cx(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(EU(this.Xa)&&sH.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class aH{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Hb(e)}ac(e,t,r,o=!1){return new vx({Xa:e,methodName:t,uc:r,path:Hi.emptyPath(),ec:!1,oc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function e_(n){const e=n._freezeSettings(),t=Hb(n._databaseId);return new aH(n._databaseId,!!e.ignoreUndefinedProperties,t)}function wx(n,e,t,r,o,u={}){const c=n.ac(u.merge||u.mergeFields?2:0,e,t,o);xk("Data must be an object, but it was:",c,r);const g=IU(r,c);let y,C;if(u.merge)y=new Vv(c.fieldMask),C=c.fieldTransforms;else if(u.mergeFields){const S=[];for(const x of u.mergeFields){const O=Rk(e,x,t);if(!c.contains(O))throw new Pe(ge.INVALID_ARGUMENT,`Field '${O}' is specified in your field mask but missing from your input data.`);DU(S,O)||S.push(O)}y=new Vv(S),C=c.fieldTransforms.filter(x=>y.covers(x.field))}else y=null,C=c.fieldTransforms;return new oH(new Ss(g),y,C)}class zb extends Xm{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zb}}function CU(n,e,t){return new vx({Xa:3,uc:e.settings.uc,methodName:n._methodName,ec:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class Dk extends Xm{_toFieldTransform(e){return new Tb(e.path,new Hv)}isEqual(e){return e instanceof Dk}}class uH extends Xm{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=CU(this,e,!0),r=this.cc.map(u=>t_(u,t)),o=new jm(r);return new Tb(e.path,o)}isEqual(e){return this===e}}class lH extends Xm{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=CU(this,e,!0),r=this.cc.map(u=>t_(u,t)),o=new $m(r);return new Tb(e.path,o)}isEqual(e){return this===e}}class cH extends Xm{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new Gv(e.M,_L(e.M,this.hc));return new Tb(e.path,t)}isEqual(e){return this===e}}function Sk(n,e,t,r){const o=n.ac(1,e,t);xk("Data must be an object, but it was:",o,r);const u=[],c=Ss.empty();Om(r,(y,C)=>{const S=Ex(e,y,t);C=(0,k.m9)(C);const x=o.sc(S);if(C instanceof zb)u.push(S);else{const O=t_(C,x);null!=O&&(u.push(S),c.set(S,O))}});const g=new Vv(u);return new wU(c,g,o.fieldTransforms)}function Ak(n,e,t,r,o,u){const c=n.ac(1,e,t),g=[Rk(e,r,t)],y=[o];if(u.length%2!=0)throw new Pe(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let O=0;O<u.length;O+=2)g.push(Rk(e,u[O])),y.push(u[O+1]);const C=[],S=Ss.empty();for(let O=g.length-1;O>=0;--O)if(!DU(C,g[O])){const $=g[O];let Z=y[O];Z=(0,k.m9)(Z);const ye=c.sc($);if(Z instanceof zb)C.push($);else{const xe=t_(Z,ye);null!=xe&&(C.push($),S.set($,xe))}}const x=new Vv(C);return new wU(S,x,c.fieldTransforms)}function bU(n,e,t,r=!1){return t_(t,n.ac(r?4:3,e))}function t_(n,e){if(TU(n=(0,k.m9)(n)))return xk("Unsupported field value:",e,n),IU(n,e);if(n instanceof Xm)return function(t,r){if(!EU(r.Xa))throw r.rc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.rc(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const c of t){let g=t_(c,r.ic(u));null==g&&(g={nullValue:"NULL_VALUE"}),o.push(g),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,k.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return _L(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Qr.fromDate(t);return{timestampValue:Nb(r.M,o)}}if(t instanceof Qr){const o=new Qr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Nb(r.M,o)}}if(t instanceof yx)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof bc)return{bytesValue:FL(r.M,t._byteString)};if(t instanceof dr){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.rc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:WP(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.rc(`Unsupported field value: ${mx(t)}`)}(n,e)}function IU(n,e){const t={};return qF(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Om(n,(r,o)=>{const u=t_(o,e.tc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function TU(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Qr||n instanceof yx||n instanceof bc||n instanceof dr||n instanceof Xm)}function xk(n,e,t){if(!TU(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=mx(t);throw e.rc("an object"===r?n+" a custom object":n+" "+r)}var r}function Rk(n,e,t){if((e=(0,k.m9)(e))instanceof oh)return e._internalPath;if("string"==typeof e)return Ex(n,e);throw Cx("Field path arguments must be of type string or ",n,!1,void 0,t)}const dH=new RegExp("[~\\*/\\[\\]]");function Ex(n,e,t){if(e.search(dH)>=0)throw Cx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new oh(...e.split("."))._internalPath}catch(r){throw Cx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Cx(n,e,t,r,o){const u=r&&!r.isEmpty(),c=void 0!==o;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let y="";return(u||c)&&(y+=" (found",u&&(y+=` in field ${r}`),c&&(y+=` in document ${o}`),y+=")"),new Pe(ge.INVALID_ARGUMENT,g+n+y)}function DU(n,e){return n.some(t=>t.isEqual(e))}class Zb{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new dr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new hH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(bx("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class hH extends Zb{data(){return super.data()}}function bx(n,e){return"string"==typeof e?Ex(n,e):e instanceof oh?e._internalPath:e._delegate._internalPath}class n_{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ah extends Zb{constructor(e,t,r,o,u,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Kb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(bx("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Kb extends ah{data(e={}){return super.data(e)}}class gp{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new n_(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Kb(this._firestore,this._userDataWriter,r.key,r,new n_(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new Kb(r._firestore,r._userDataWriter,c.doc.key,c.doc,new n_(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>o||3!==c.type).map(c=>{const g=new Kb(r._firestore,r._userDataWriter,c.doc.key,c.doc,new n_(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,C=-1;return 0!==c.type&&(y=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),C=u.indexOf(c.doc.key)),{type:fH(c.type),doc:g,oldIndex:y,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function fH(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function SU(n,e){return n instanceof ah&&e instanceof ah?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof gp&&e instanceof gp&&n._firestore===e._firestore&&mU(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function AU(n){if(zA(n)&&0===n.explicitOrderBy.length)throw new Pe(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yb{}function mp(n,...e){for(const t of e)n=t._apply(n);return n}class pH extends Yb{constructor(e,t,r){super(),this.lc=e,this.fc=t,this.dc=r,this.type="where"}_apply(e){const t=e_(e.firestore),r=function(o,u,c,g,y,C,S){let x;if(y.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new Pe(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){OU(S,C);const $=[];for(const Z of S)$.push(PU(g,o,Z));x={arrayValue:{values:$}}}else x=PU(g,o,S)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||OU(S,C),x=bU(c,"where",S,"in"===C||"not-in"===C);const O=cs.create(y,C,x);return function($,Z){if(Z.S()){const xe=UP($);if(null!==xe&&!xe.isEqual(Z.field))throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${xe.toString()}' and '${Z.field.toString()}'`);const pt=VP($);null!==pt&&kU(0,Z.field,pt)}const ye=function(xe,pt){for(const dt of xe.filters)if(pt.indexOf(dt.op)>=0)return dt.op;return null}($,function(xe){switch(xe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Z.op));if(null!==ye)throw new Pe(ge.INVALID_ARGUMENT,ye===Z.op?`Invalid query. You cannot use more than one '${Z.op.toString()}' filter.`:`Invalid query. You cannot use '${Z.op.toString()}' filters with '${ye.toString()}' filters.`)}(o,O),O}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new As(e.firestore,e.converter,function(o,u){const c=o.filters.concat([u]);return new ih(o.path,o.collectionGroup,o.explicitOrderBy.slice(),c,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class mH extends Yb{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Pe(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Pe(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Bv(o,u);return function(g,y){if(null===VP(g)){const C=UP(g);null!==C&&kU(0,C,y.field)}}(r,c),c}(e._query,this.lc,this._c);return new As(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new ih(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class xU extends Yb{constructor(e,t,r){super(),this.type=e,this.wc=t,this.mc=r}_apply(e){return new As(e.firestore,e.converter,dL(e._query,this.wc,this.mc))}}class RU extends Yb{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=MU(e,this.type,this.gc,this.yc);return new As(e.firestore,e.converter,(o=t,new ih((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class NU extends Yb{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=MU(e,this.type,this.gc,this.yc);return new As(e.firestore,e.converter,(o=t,new ih((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function MU(n,e,t,r){if(t[0]=(0,k.m9)(t[0]),t[0]instanceof Zb)return function(o,u,c,g,y){if(!g)throw new Pe(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const C=[];for(const S of $v(o))if(S.field.isKeyField())C.push(Vm(u,g.key));else{const x=g.data.field(S.field);if(OP(x))throw new Pe(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const O=S.field.canonicalString();throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${O}' (used as the orderBy) does not exist.`)}C.push(x)}return new ap(C,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=e_(n.firestore);return function(u,c,g,y,C,S){const x=u.explicitOrderBy;if(C.length>x.length)throw new Pe(ge.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const O=[];for(let $=0;$<C.length;$++){const Z=C[$];if(x[$].field.isKeyField()){if("string"!=typeof Z)throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof Z}`);if(!BP(u)&&-1!==Z.indexOf("/"))throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${Z}' contains a slash.`);const ye=u.path.child(yn.fromString(Z));if(!qe.isDocumentKey(ye))throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${ye}' is not because it contains an odd number of segments.`);const xe=new qe(ye);O.push(Vm(c,xe))}else{const ye=bU(g,y,Z);O.push(ye)}}return new ap(O,S)}(n._query,n.firestore._databaseId,o,e,t,r)}}function PU(n,e,t){if("string"==typeof(t=(0,k.m9)(t))){if(""===t)throw new Pe(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BP(e)&&-1!==t.indexOf("/"))throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(yn.fromString(t));if(!qe.isDocumentKey(r))throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Vm(n,new qe(r))}if(t instanceof dr)return Vm(n,t._key);throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mx(t)}.`)}function OU(n,e){if(!Array.isArray(n)||0===n.length)throw new Pe(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Pe(ge.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function kU(n,e,t){if(!t.isEqual(e))throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Nk{convertValue(e,t="none"){switch(Lm(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Lr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(km(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}}convertObject(e,t){const r={};return Om(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new yx(Lr(e.latitude),Lr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=WF(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(_b(e));default:return null}}convertTimestamp(e){const t=sp(e);return new Qr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=yn.fromString(e);Vt(WL(r));const o=new nh(r.get(1),r.get(3)),u=new qe(r.popFirst(5));return o.isEqual(t)||ui(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function Ix(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class IH extends Nk{constructor(e){super(),this.firestore=e}convertBytes(e){return new bc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dr(this.firestore,null,t)}}class FU{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=e_(e)}set(e,t,r){this._verifyNotCommitted();const o=_p(e,this._firestore),u=Ix(o.converter,t,r),c=wx(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(c.toMutation(o._key,li.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=_p(e,this._firestore);let c;return c="string"==typeof(t=(0,k.m9)(t))||t instanceof oh?Ak(this._dataReader,"WriteBatch.update",u._key,t,r,o):Sk(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,li.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=_p(e,this._firestore);return this._mutations=this._mutations.concat(new Sb(t._key,li.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _p(n,e){if((n=(0,k.m9)(n)).firestore!==e)throw new Pe(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class r_ extends Nk{constructor(e){super(),this.firestore=e}convertBytes(e){return new bc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dr(this.firestore,null,t)}}function LU(n,e,t){n=gn(n,dr);const r=gn(n.firestore,Er),o=Ix(n.converter,e,t);return uw(r,[wx(e_(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,li.none())])}function VU(n,e,t,...r){n=gn(n,dr);const o=gn(n.firestore,Er),u=e_(o);let c;return c="string"==typeof(e=(0,k.m9)(e))||e instanceof oh?Ak(u,"updateDoc",n._key,e,t,r):Sk(u,"updateDoc",n._key,e),uw(o,[c.toMutation(n._key,li.exists(!0))])}function UU(n,...e){var t,r,o;n=(0,k.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||Tk(e[c])||(u=e[c],c++);const g={includeMetadataChanges:u.includeMetadataChanges};if(Tk(e[c])){const x=e[c];e[c]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[c+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[c+2]=null===(o=x.complete)||void 0===o?void 0:o.bind(x)}let y,C,S;if(n instanceof dr)C=gn(n.firestore,Er),S=jv(n._key.path),y={next:x=>{e[c]&&e[c](Mk(C,n,x))},error:e[c+1],complete:e[c+2]};else{const x=gn(n,As);C=gn(x.firestore,Er),S=x._query;const O=new r_(C);y={next:$=>{e[c]&&e[c](new gp(C,O,x,$))},error:e[c+1],complete:e[c+2]},AU(n._query)}return function(x,O,$,Z){const ye=new px(Z),xe=new HO(O,ye,$);return x.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return VO(yield aw(x),xe)})),()=>{ye.Ia(),x.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return BO(yield aw(x),xe)}))}}(di(C),S,g,y)}function uw(n,e){return function(t,r){const o=new $i;return t.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(n,e,t){return ZO.apply(this,arguments)}(yield Ck(t),r,o)})),o.promise}(di(n),e)}function Mk(n,e,t){const r=t.docs.get(e._key),o=new r_(n);return new ah(n,o,e._key,r,new n_(t.hasPendingWrites,t.fromCache),e.converter)}class OH extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=e_(e)}get(e){const t=_p(e,this._firestore),r=new IH(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return st();const u=o[0];if(u.isFoundDocument())return new Zb(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Zb(this._firestore,r,t._key,null,t.converter);throw st()})}set(e,t,r){const o=_p(e,this._firestore),u=Ix(o.converter,t,r),c=wx(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,c),this}update(e,t,r,...o){const u=_p(e,this._firestore);let c;return c="string"==typeof(t=(0,k.m9)(t))||t instanceof oh?Ak(this._dataReader,"Transaction.update",u._key,t,r,o):Sk(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=_p(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=_p(e,this._firestore),r=new r_(this._firestore);return super.get(e).then(o=>new ah(this._firestore,r,t._key,o._document,new n_(!1,!1),t.converter))}}function Pk(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function jU(){if("undefined"==typeof Uint8Array)throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function $U(){if("undefined"==typeof atob)throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Fv=ki.SDK_VERSION,(0,ki._registerComponent)(new ca.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new Er(o,new Z2(t.getProvider("auth-internal")),new Q2(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,ki.registerVersion)(UF,"3.4.8",n),(0,ki.registerVersion)(UF,"3.4.8","esm2017")}();class Qb{constructor(e){this._delegate=e}static fromBase64String(e){return $U(),new Qb(bc.fromBase64String(e))}static fromUint8Array(e){return jU(),new Qb(bc.fromUint8Array(e))}toBase64(){return $U(),this._delegate.toBase64()}toUint8Array(){return jU(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ok(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class GH{enableIndexedDbPersistence(e,t){return function(n,e){vU(n=gn(n,Er));const t=di(n),r=n._freezeSettings(),o=new gk;return yU(t,o,new eU(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){vU(n=gn(n,Er));const e=di(n),t=n._freezeSettings(),r=new gk;return yU(e,r,new P$(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new Pe(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new $i;return n._queue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{yield(t=(0,we.Z)(function*(r){if(!Ju.vt())return Promise.resolve();const o=r+"main";yield Ju.delete(o)}),function(r){return t.apply(this,arguments)})(aO(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class HU{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof nh||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&gb("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var o;const u=(n=gn(n,Wb))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&gb("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,g;if("string"==typeof r.mockUserToken)c=r.mockUserToken,g=ls.MOCK_USER;else{c=(0,k.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Pe(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new ls(y)}n._authCredentials=new z2(new BF(c,g))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield iU(n),t=yield sU(n);return e.setNetworkEnabled(!0),function(r){const o=Ye(r);return o.fu.delete(0),Gb(o)}(t)}))}(di(n=gn(n,Er)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield iU(n),t=yield sU(n);return e.setNetworkEnabled(!1),(r=(0,we.Z)(function*(o){const u=Ye(o);u.fu.add(0),yield ew(u),u.wu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(di(n=gn(n,Er)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,lU("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new $i;return e.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(n,e){return XO.apply(this,arguments)}(yield Ck(e),t)})),t.promise}(di(n=gn(n,Er)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new px(e);return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield aw(n),o=t,Ye(r).Eu.add(o),void o.next();var r,o})),()=>{t.Ia(),n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield aw(n),o=t,void Ye(r).Eu.delete(o);var r,o}))}}(di(n=gn(n,Er)),Tk(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new lw(this,pU(this._delegate,e))}catch(t){throw Xs(t,"collection()","Firestore.collection()")}}doc(e){try{return new lu(this,_x(this._delegate,e))}catch(t){throw Xs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new eo(this,function(n,e){if(n=gn(n,Wb),Ik("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Pe(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new As(n,null,(t=e,new ih(yn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Xs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e){return function(n,e){const t=new $i;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){const r=yield(o=n,gx(o).then(u=>u.datastore));var o;new F$(n.asyncQueue,r,e,t).run()})),t.promise}(di(n=gn(n,Er)),t=>e(new OH(n,t)))}(this._delegate,t=>e(new GU(this,t)))}batch(){return di(this._delegate),new qU(new FU(this._delegate,e=>uw(this._delegate,e)))}loadBundle(e){return function(n,e){const t=di(n=gn(n,Er)),r=new K$;return function(n,e,t,r){const o=function(u,c){let g;return g="string"==typeof u?(new TextEncoder).encode(u):u,y=function(y,C){if(y instanceof Uint8Array)return tU(y,C);if(y instanceof ArrayBuffer)return tU(new Uint8Array(y),C);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new O$(y,c);var y}(t,Hb(e));n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){!function(n,e,t){const r=Ye(n);var o;(o=(0,we.Z)(function*(u,c,g){try{const y=yield c.getMetadata();if(yield function(O,$){const Z=Ye(O),ye=Gi($.createTime);return Z.persistence.runTransaction("hasNewerBundle","readonly",xe=>Z._s.getBundleMetadata(xe,$.id)).then(xe=>!!xe&&xe.createTime.compareTo(ye)>=0)}(u.localStore,y))return yield c.close(),g._completeWith({taskState:"Success",documentsLoaded:(O=y).totalDocuments,bytesLoaded:O.totalBytes,totalDocuments:O.totalDocuments,totalBytes:O.totalBytes}),Promise.resolve(new Set);g._updateProgress(GV(y));const C=new d$(y,u.localStore,c.M);let S=yield c.da();for(;S;){const O=yield C.ku(S);O&&g._updateProgress(O),S=yield c.da()}const x=yield C.complete();return yield sh(u,x.Fu,void 0),yield function(O,$){const Z=Ye(O);return Z.persistence.runTransaction("Save bundle","readwrite",ye=>Z._s.saveBundleMetadata(ye,$))}(u.localStore,y),g._completeWith(x.progress),Promise.resolve(x.Ou)}catch(y){return gb("SyncEngine",`Loading bundle failed with ${y}`),g._failWith(y),Promise.resolve(new Set)}var O}),function(u,c,g){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield Ck(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,we.Z)(function*(){return function(t,r){const o=Ye(t);return o.persistence.runTransaction("Get named query","readonly",u=>o._s.getNamedQuery(u,r))}(yield Ek(n),e)}))}(di(n=gn(n,Er)),e).then(t=>t?new As(n,null,t.query):null)}(this._delegate,e).then(t=>t?new eo(this,t):null)}}class Tx extends Nk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qb(new bc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return lu.forKey(t,this.firestore,null)}}class GU{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Tx(e)}get(e){const t=s_(e);return this._delegate.get(t).then(r=>new Jb(this._firestore,new ah(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=s_(e);return r?(Pk("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=s_(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=s_(e);return this._delegate.delete(t),this}}class qU{constructor(e){this._delegate=e}set(e,t,r){const o=s_(e);return r?(Pk("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=s_(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=s_(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class i_{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Kb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Xb(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=i_.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new i_(e,new Tx(e),t),o.set(t,u)),u}}i_.INSTANCES=new WeakMap;class lu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Tx(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new lu(t,new dr(t._delegate,r,new qe(e)))}static forKey(e,t,r){return new lu(t,new dr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new lw(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new lw(this.firestore,pU(this._delegate,e))}catch(t){throw Xs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,k.m9)(e))instanceof dr&&gU(this._delegate,e)}set(e,t){t=Pk("DocumentReference.set",t);try{return t?LU(this._delegate,e,t):LU(this._delegate,e)}catch(r){throw Xs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?VU(this._delegate,e):VU(this._delegate,e,t,...r)}catch(o){throw Xs(o,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return uw(gn(n.firestore,Er),[new Sb(n._key,li.none())])}(this._delegate)}onSnapshot(...e){const t=WU(e),r=zU(e,o=>new Jb(this.firestore,new ah(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return UU(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=gn(n,dr);const e=gn(n.firestore,Er),t=di(e),r=new r_(e);return function(n,e){const t=new $i;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(o,u,c){try{const g=yield function(y,C){const S=Ye(y);return S.persistence.runTransaction("read document","readonly",x=>S.ci.Ls(x,C))}(o,u);g.isFoundDocument()?c.resolve(g):g.isNoDocument()?c.resolve(null):c.reject(new Pe(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const y=rw(g,`Failed to get document '${u} from cache`);c.reject(y)}}),function(o,u,c){return r.apply(this,arguments)})(yield Ek(n),e,t);var r})),t.promise}(t,n._key).then(o=>new ah(e,r,n._key,o,new n_(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=gn(n,dr);const e=gn(n.firestore,Er);return oU(di(e),n._key,{source:"server"}).then(t=>Mk(e,n,t))}(this._delegate):function(n){n=gn(n,dr);const e=gn(n.firestore,Er);return oU(di(e),n._key).then(t=>Mk(e,n,t))}(this._delegate),t.then(r=>new Jb(this.firestore,new ah(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new lu(this.firestore,this._delegate.withConverter(e?i_.getInstance(this.firestore,e):null))}}function Xs(n,e,t){return n.message=n.message.replace(e,t),n}function WU(n){for(const e of n)if("object"==typeof e&&!Ok(e))return e;return{}}function zU(n,e){var t,r;let o;return o=Ok(n[0])?n[0]:Ok(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class Jb{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new lu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return SU(this._delegate,e._delegate)}}class Xb extends Jb{data(e){const t=this._delegate.data(e);return function(n,e){n||st()}(void 0!==t),t}}class eo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Tx(e)}where(e,t,r){try{return new eo(this.firestore,mp(this._delegate,function(n,e,t){const r=e,o=bx("where",n);return new pH(o,r,t)}(e,t,r)))}catch(o){throw Xs(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new eo(this.firestore,mp(this._delegate,function(n,e="asc"){const t=e,r=bx("orderBy",n);return new mH(r,t)}(e,t)))}catch(r){throw Xs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new eo(this.firestore,mp(this._delegate,function(n){return hU("limit",n),new xU("limit",n,"F")}(e)))}catch(t){throw Xs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new eo(this.firestore,mp(this._delegate,function(n){return hU("limitToLast",n),new xU("limitToLast",n,"L")}(e)))}catch(t){throw Xs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new eo(this.firestore,mp(this._delegate,function(...n){return new RU("startAt",n,!0)}(...e)))}catch(t){throw Xs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new eo(this.firestore,mp(this._delegate,function(...n){return new RU("startAfter",n,!1)}(...e)))}catch(t){throw Xs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new eo(this.firestore,mp(this._delegate,function(...n){return new NU("endBefore",n,!1)}(...e)))}catch(t){throw Xs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new eo(this.firestore,mp(this._delegate,function(...n){return new NU("endAt",n,!0)}(...e)))}catch(t){throw Xs(t,"endAt()","Query.endAt()")}}isEqual(e){return mU(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=gn(n,As);const e=gn(n.firestore,Er),t=di(e),r=new r_(e);return function(n,e){const t=new $i;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(o,u,c){try{const g=yield ux(o,u,!0),y=new zV(u,g.li),C=y.Gu(g.documents),S=y.applyChanges(C,!1);c.resolve(S.snapshot)}catch(g){const y=rw(g,`Failed to execute query '${u} against cache`);c.reject(y)}}),function(o,u,c){return r.apply(this,arguments)})(yield Ek(n),e,t);var r})),t.promise}(t,n._query).then(o=>new gp(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=gn(n,As);const e=gn(n.firestore,Er),t=di(e),r=new r_(e);return aU(t,n._query,{source:"server"}).then(o=>new gp(e,r,n,o))}(this._delegate):function(n){n=gn(n,As);const e=gn(n.firestore,Er),t=di(e),r=new r_(e);return AU(n._query),aU(t,n._query).then(o=>new gp(e,r,n,o))}(this._delegate),t.then(r=>new kk(this.firestore,new gp(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=WU(e),r=zU(e,o=>new kk(this.firestore,new gp(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return UU(this._delegate,t,r)}withConverter(e){return new eo(this.firestore,this._delegate.withConverter(e?i_.getInstance(this.firestore,e):null))}}class WH{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Xb(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class kk{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new eo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Xb(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new WH(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Xb(this._firestore,r))})}isEqual(e){return SU(this._delegate,e._delegate)}}class lw extends eo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new lu(this.firestore,e):null}doc(e){try{return new lu(this.firestore,void 0===e?_x(this._delegate):_x(this._delegate,e))}catch(t){throw Xs(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=gn(n.firestore,Er),r=_x(n),o=Ix(n.converter,e);return uw(t,[wx(e_(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,li.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new lu(this.firestore,t))}isEqual(e){return gU(this._delegate,e._delegate)}withConverter(e){return new lw(this.firestore,this._delegate.withConverter(e?i_.getInstance(this.firestore,e):null))}}function s_(n){return gn(n,dr)}class Fk{constructor(...e){this._delegate=new oh(...e)}static documentId(){return new Fk(Hi.keyField().canonicalString())}isEqual(e){return(e=(0,k.m9)(e))instanceof oh&&this._delegate._internalPath.isEqual(e._internalPath)}}class o_{constructor(e){this._delegate=e}static serverTimestamp(){const e=new Dk("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new o_(e)}static delete(){const e=new zb("deleteField");return e._methodName="FieldValue.delete",new o_(e)}static arrayUnion(...e){const t=function(...n){return new uH("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new o_(t)}static arrayRemove(...e){const t=function(...n){return new lH("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new o_(t)}static increment(e){const t=function(n){return new cH("increment",n)}(e);return t._methodName="FieldValue.increment",new o_(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const zH={Firestore:HU,GeoPoint:yx,Timestamp:Qr,Blob:Qb,Transaction:GU,WriteBatch:qU,DocumentReference:lu,DocumentSnapshot:Jb,Query:eo,QueryDocumentSnapshot:Xb,QuerySnapshot:kk,CollectionReference:lw,FieldPath:Fk,FieldValue:o_,setLogLevel:function(n){!function(n){ip.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function ZU(n,e){return function(n,e=Xh.z){return new jn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function Lk(n,e){return ZU(n,e).pipe((0,St.U)(t=>({payload:t,type:"query"})))}function Dx(n,e){return Lk(n,e).pipe(Us(void 0),OC(),(0,St.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,g)=>{const y=o.find(S=>S.doc.ref.isEqual(c.ref)),C=null==t?void 0:t.payload.docs.find(S=>S.ref.isEqual(c.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(c.metadata)||!y&&C&&JSON.stringify(C.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:c}})}),u}))}function KU(n,e,t){return Dx(n,t).pipe(Va((r,o)=>function(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Vk(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Vk(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Vk(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),G_(),(0,St.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function Vk(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function YU(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function(n){(function(n,e){n.INTERNAL.registerComponent(new ca.wA("firestore-compat",t=>((e,t)=>new HU(e,t,new GH))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},zH)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.17")}(II.Z);class QU{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Dx(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,St.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Us(void 0),OC(),Mi(([r,o])=>o.length>0||!r),(0,St.U)(([r,o])=>o),dn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Va((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=YU(e);return KU(this.query,t,this.afs.schedulers.outsideAngular).pipe(dn.iC)}valueChanges(e={}){return Lk(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),dn.iC)}get(e){return(0,Gt.D)(this.query.get(e)).pipe(dn.iC)}add(e){return this.ref.add(e)}doc(e){return new JU(this.ref.doc(e),this.afs)}}class JU{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=t2(r,t);return new QU(o,u,this.afs)}snapshotChanges(){return function(n,e){return ZU(n,e).pipe(Us(void 0),OC(),(0,St.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(dn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,St.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Gt.D)(this.ref.get(e)).pipe(dn.iC)}}class e3{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Dx(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Mi(t=>t.length>0),dn.iC):Dx(this.query,this.afs.schedulers.outsideAngular).pipe(dn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Va((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=YU(e);return KU(this.query,t,this.afs.schedulers.outsideAngular).pipe(dn.iC)}valueChanges(e={}){return Lk(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),dn.iC)}get(e){return(0,Gt.D)(this.query.get(e)).pipe(dn.iC)}}const XU=new h.OlP("angularfire2.enableFirestorePersistence"),e2=new h.OlP("angularfire2.firestore.persistenceSettings"),t3=new h.OlP("angularfire2.firestore.settings"),n3=new h.OlP("angularfire2.firestore.use-emulator");function t2(n,e=(t=>t)){return{query:e(n),ref:n}}let r3=(()=>{class n{constructor(t,r,o,u,c,g,y,C,S,x,O,$,Z,ye,xe,pt,dt){this.schedulers=y;const et=(0,_r.on)(t,g,r),rt=S;x&&eC(et,g,O,Z,ye,xe,$,pt),[this.firestore,this.persistenceEnabled$]=(0,_r.cc)(`${et.name}.firestore`,"AngularFirestore",et.name,()=>{const Wt=g.runOutsideAngular(()=>et.firestore());if(u&&Wt.settings(u),rt&&Wt.useEmulator(...rt),o&&!sl(c)){const rn=()=>{try{return(0,Gt.D)(Wt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(hi){return"undefined"!=typeof console&&console.warn(hi),(0,at.of)(!1)}};return[Wt,g.runOutsideAngular(rn)]}return[Wt,(0,at.of)(!1)]},[u,rt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=t2(o,r),g=this.schedulers.ngZone.run(()=>u);return new QU(g,c,this)}collectionGroup(t,r){const o=r||(c=>c),u=this.firestore.collectionGroup(t);return new e3(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new JU(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(_r.Dh),h.LFG(_r.xv,8),h.LFG(XU,8),h.LFG(t3,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(dn.HU),h.LFG(e2,8),h.LFG(n3,8),h.LFG(Hy,8),h.LFG(Q0,8),h.LFG($y,8),h.LFG(am,8),h.LFG(J0,8),h.LFG(YD,8),h.LFG(X0,8),h.LFG(sm,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),i3=(()=>{class n{constructor(){om.Z.registerVersion("angularfire",dn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:XU,useValue:!0},{provide:e2,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[r3]}),n})();class o3{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new a3(e,this.dueTime,this.scheduler))}}class a3 extends Wr.L{constructor(e,t,r){super(e),this.dueTime=t,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(u3,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function u3(n){n.debouncedNext()}const n2="firebasestorage.googleapis.com",r2="storageBucket";class Vr extends k.ZR{constructor(e,t){super(Uk(e),`Firebase Storage: ${t} (${Uk(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Vr.prototype)}_codeEquals(e){return Uk(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Uk(n){return"storage/"+n}function Bk(){return new Vr("unknown","An unknown error occurred, please check the error payload for server response.")}function i2(){return new Vr("canceled","User canceled the upload/download.")}function s2(){return new Vr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function cw(n){return new Vr("invalid-argument",n)}function o2(){return new Vr("app-deleted","The Firebase app was deleted.")}function a2(n){return new Vr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function eI(n,e){return new Vr("invalid-format","String does not match format '"+n+"': "+e)}function tI(n){throw new Vr("internal-error","Internal error: "+n)}class xs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=xs.makeFromUrl(e,t)}catch(o){return new xs(e,"")}if(""===r.path)return r;throw function(n){return new Vr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const o="([A-Za-z0-9.\\-_]+)",g=new RegExp("^gs://"+o+"(/(.*))?$","i");function C(rt){rt.path_=decodeURIComponent(rt.path)}const x=t.replace(/[.]/g,"\\."),et=[{regex:g,indices:{bucket:1,path:3},postModify:function(rt){"/"===rt.path.charAt(rt.path.length-1)&&(rt.path_=rt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${x}/v[A-Za-z0-9_]+/b/${o}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:C},{regex:new RegExp(`^https?://${t===n2?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${o}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:C}];for(let rt=0;rt<et.length;rt++){const Wt=et[rt],rn=Wt.regex.exec(e);if(rn){let Ta=rn[Wt.indices.path];Ta||(Ta=""),r=new xs(rn[Wt.indices.bucket],Ta),Wt.postModify(r);break}}if(null==r)throw function(n){return new Vr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class C3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Sx(n){return"string"==typeof n||n instanceof String}function u2(n){return jk()&&n instanceof Blob}function jk(){return"undefined"!=typeof Blob}function $k(n,e,t,r){if(r<e)throw cw(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw cw(`Invalid value for '${n}'. Expected ${t} or less.`)}function uh(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function l2(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var yp=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(yp||(yp={})),yp))();class A3{constructor(e,t,r,o,u,c,g,y,C,S,x){this.url_=e,this.method_=t,this.headers_=r,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=c,this.callback_=g,this.errorCallback_=y,this.timeout_=C,this.progressCallback_=S,this.connectionFactory_=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((O,$)=>{this.resolve_=O,this.reject_=$,this.start_()})}start_(){const t=(r,o)=>{const u=this.resolve_,c=this.reject_,g=o.connection;if(o.wasSuccessCode)try{const y=this.callback_(g,g.getResponse());!function(n){return void 0!==n}(y)?u():u(y)}catch(y){c(y)}else if(null!==g){const y=Bk();y.serverResponse=g.getErrorText(),c(this.errorCallback_?this.errorCallback_(g,y):y)}else c(o.canceled?this.appDelete_?o2():i2():new Vr("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?t(0,new Ax(!1,null,!0)):this.backoffId_=function(n,e,t){let r=1,o=null,u=null,c=!1,g=0;function y(){return 2===g}let C=!1;function S(...xe){C||(C=!0,e.apply(null,xe))}function x(xe){o=setTimeout(()=>{o=null,n($,y())},xe)}function O(){u&&clearTimeout(u)}function $(xe,...pt){if(C)return void O();if(xe)return O(),void S.call(null,xe,...pt);if(y()||c)return O(),void S.call(null,xe,...pt);let et;r<64&&(r*=2),1===g?(g=2,et=0):et=1e3*(r+Math.random()),x(et)}let Z=!1;function ye(xe){Z||(Z=!0,O(),!C&&(null!==o?(xe||(g=2),clearTimeout(o),x(0)):xe||(g=1)))}return x(0),u=setTimeout(()=>{c=!0,ye(!0)},t),ye}((r,o)=>{if(o)return void r(!1,new Ax(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const c=g=>{null!==this.progressCallback_&&this.progressCallback_(g.loaded,g.lengthComputable?g.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(c),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(c),this.pendingConnection_=null;const g=u.getErrorCode()===yp.NO_ERROR,y=u.getStatus();if(!g||this.isRetryStatusCode_(y)){const S=u.getErrorCode()===yp.ABORT;return void r(!1,new Ax(!1,null,S))}const C=-1!==this.successCodes_.indexOf(y);r(!0,new Ax(C,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,o=-1!==[408,429].indexOf(e),u=-1!==this.additionalRetryCodes_.indexOf(e);return t||o||u}}class Ax{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function k3(...n){const e="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(jk())return new Blob(n);throw new Vr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Ia={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Hk{constructor(e,t){this.data=e,this.contentType=t||null}}function Gk(n,e){switch(n){case Ia.RAW:return new Hk(c2(e));case Ia.BASE64:case Ia.BASE64URL:return new Hk(d2(n,e));case Ia.DATA_URL:return new Hk(function(n){const e=new h2(n);return e.base64?d2(Ia.BASE64,e.rest):function(n){let e;try{e=decodeURIComponent(n)}catch(t){throw eI(Ia.DATA_URL,"Malformed data URL.")}return c2(e)}(e.rest)}(e),function(n){return new h2(n).contentType}(e))}throw Bk()}function c2(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function d2(n,e){switch(n){case Ia.BASE64:{const o=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(o||u)throw eI(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Ia.BASE64URL:{const o=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(o||u)throw eI(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function(n){return atob(n)}(e)}catch(o){throw eI(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}class h2{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw eI(Ia.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=e.substring(e.indexOf(",")+1)}}class Ic{constructor(e,t){let r=0,o="";u2(e)?(this.data_=e,r=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(u2(this.data_)){const o=function(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===o?null:new Ic(o)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Ic(r,!0)}}static getBlob(...e){if(jk()){const t=e.map(r=>r instanceof Ic?r.data_:r);return new Ic(k3.apply(null,t))}{const t=e.map(c=>Sx(c)?Gk(Ia.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const o=new Uint8Array(r);let u=0;return t.forEach(c=>{for(let g=0;g<c.length;g++)o[u++]=c[g]}),new Ic(o,!0)}}uploadData(){return this.data_}}function qk(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function f2(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function G3(n,e){return e}class to{constructor(e,t,r,o){this.server=e,this.local=t||e,this.writable=!!r,this.xform=o||G3}}let xx=null;function nI(){if(xx)return xx;const n=[];n.push(new to("bucket")),n.push(new to("generation")),n.push(new to("metageneration")),n.push(new to("name","fullPath",!0));const t=new to("name");t.xform=function(u,c){return function(n){return!Sx(n)||n.length<2?n:f2(n)}(c)},n.push(t);const o=new to("size");return o.xform=function(u,c){return void 0!==c?Number(c):c},n.push(o),n.push(new to("timeCreated")),n.push(new to("updated")),n.push(new to("md5Hash",null,!0)),n.push(new to("cacheControl",null,!0)),n.push(new to("contentDisposition",null,!0)),n.push(new to("contentEncoding",null,!0)),n.push(new to("contentLanguage",null,!0)),n.push(new to("contentType",null,!0)),n.push(new to("metadata","customMetadata",!0)),xx=n,xx}function p2(n,e,t){const r=qk(e);return null===r?null:function(n,e,t){const r={type:"file"},o=t.length;for(let u=0;u<o;u++){const c=t[u];r[c.local]=c.xform(r,e[c.server])}return function(n,e){Object.defineProperty(n,"ref",{get:function(){const u=new xs(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function Wk(n,e){const t={},r=e.length;for(let o=0;o<r;o++){const u=e[o];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const g2="prefixes";class Tc{constructor(e,t,r,o){this.url=e,this.method=t,this.handler=r,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Dc(n){if(!n)throw Bk()}function Rx(n,e){return function(r,o){const u=p2(n,o,e);return Dc(null!==u),u}}function dw(n){return function(t,r){let o;return o=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?new Vr("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Vr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?function(n){return new Vr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function(n){return new Vr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,o.serverResponse=r.serverResponse,o}}function rI(n){const e=dw(n);return function(r,o){let u=e(r,o);return 404===r.getStatus()&&(u=function(n){return new Vr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=o.serverResponse,u}}function _2(n,e,t){const o=uh(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,g=new Tc(o,"GET",Rx(n,t),c);return g.errorHandler=rI(e),g}function X3(n,e,t,r,o){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),o&&(u.maxResults=o);const g=uh(e.bucketOnlyServerUrl(),n.host,n._protocol),C=n.maxOperationRetryTime,S=new Tc(g,"GET",function(n,e){return function(r,o){const u=function(n,e,t){const r=qk(t);return null===r?null:function(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[g2])for(const o of t[g2]){const u=o.replace(/\/$/,""),c=n._makeStorageReference(new xs(e,u));r.prefixes.push(c)}if(t.items)for(const o of t.items){const u=n._makeStorageReference(new xs(e,o.name));r.items.push(u)}return r}(n,e,r)}(n,e,o);return Dc(null!==u),u}}(n,e.bucket),C);return S.urlParams=u,S.errorHandler=dw(e),S}function v2(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function(n,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}class Nx{constructor(e,t,r,o){this.current=e,this.total=t,this.finalized=!!r,this.metadata=o||null}}function zk(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(o){Dc(!1)}return Dc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const aG={STATE_CHANGED:"state_changed"},no={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Zk(n){switch(n){case"running":case"pausing":case"canceling":return no.RUNNING;case"paused":return no.PAUSED;case"success":return no.SUCCESS;case"canceled":return no.CANCELED;case"error":default:return no.ERROR}}class uG{constructor(e,t,r){if(function(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function hw(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class cG extends class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=yp.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=yp.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=yp.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,o){if(this.sent_)throw tI("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==o)for(const u in o)o.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,o[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw tI("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw tI("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw tI("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw tI("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Xu(){return new cG}class b2{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=nI(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=o=>{this._request=void 0,this._chunkMultiplier=1,o._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=o,this._transition("error"))},this._metadataErrorHandler=o=>{this._request=void 0,o._codeEquals("canceled")?this.completeTransitions_():(this._error=o,this._transition("error"))},this._promise=new Promise((o,u)=>{this._resolve=o,this._reject=u,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function(n,e,t,r,o){const u=e.bucketOnlyServerUrl(),c=v2(e,r,o),g={name:c.fullPath},y=uh(u,n.host,n._protocol),S={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},x=Wk(c,t),Z=new Tc(y,"POST",function(ye){let xe;zk(ye);try{xe=ye.getResponseHeader("X-Goog-Upload-URL")}catch(pt){Dc(!1)}return Dc(Sx(xe)),xe},n.maxUploadRetryTime);return Z.urlParams=g,Z.headers=S,Z.body=x,Z.errorHandler=dw(e),Z}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,Xu,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const o=function(n,e,t,r){const y=new Tc(t,"POST",function(C){const S=zk(C,["active","final"]);let x=null;try{x=C.getResponseHeader("X-Goog-Upload-Size-Received")}catch($){Dc(!1)}x||Dc(!1);const O=Number(x);return Dc(!isNaN(O)),new Nx(O,r.size(),"final"===S)},n.maxUploadRetryTime);return y.headers={"X-Goog-Upload-Command":"query"},y.errorHandler=dw(e),y}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(o,Xu,t,r);this._request=u,u.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Nx(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((o,u)=>{let c;try{c=function(n,e,t,r,o,u,c,g){const y=new Nx(0,0);if(c?(y.current=c.current,y.total=c.total):(y.current=0,y.total=r.size()),r.size()!==y.total)throw new Vr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const C=y.total-y.current;let S=C;o>0&&(S=Math.min(S,o));const x=y.current,Z={"X-Goog-Upload-Command":S===C?"upload, finalize":"upload","X-Goog-Upload-Offset":`${y.current}`},ye=r.slice(x,x+S);if(null===ye)throw s2();const et=new Tc(t,"POST",function(rt,Wt){const rn=zk(rt,["active","final"]),hi=y.current+S,Ta=r.size();let Qk;return Qk="final"===rn?Rx(e,u)(rt,Wt):null,new Nx(hi,Ta,"final"===rn,Qk)},e.maxUploadRetryTime);return et.headers=Z,et.body=ye.uploadData(),et.progressCallback=g||null,et.errorHandler=dw(n),et}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(y){return this._error=y,void this._transition("error")}const g=this._ref.storage._makeRequest(c,Xu,o,u);this._request=g,g.getPromise().then(y=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(y.current),y.finalized?(this._metadata=y.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=_2(this._ref.storage,this._ref._location,this._mappings),o=this._ref.storage._makeRequest(r,Xu,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function(n,e,t,r,o){const u=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},y=function(){let et="";for(let rt=0;rt<2;rt++)et+=Math.random().toString().slice(2);return et}();c["Content-Type"]="multipart/related; boundary="+y;const C=v2(e,r,o),S=Wk(C,t),$=Ic.getBlob("--"+y+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+S+"\r\n--"+y+"\r\nContent-Type: "+C.contentType+"\r\n\r\n",r,"\r\n--"+y+"--");if(null===$)throw s2();const Z={name:C.fullPath},ye=uh(u,n.host,n._protocol),pt=n.maxUploadRetryTime,dt=new Tc(ye,"POST",Rx(n,t),pt);return dt.urlParams=Z,dt.headers=c,dt.body=$.uploadData(),dt.errorHandler=dw(e),dt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,Xu,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=i2(),this._state=e,this._notifyObservers();break;case"error":case"success":this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Zk(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,o){const u=new uG(t||void 0,r||void 0,o||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Zk(this._state)){case no.SUCCESS:hw(this._resolve.bind(null,this.snapshot))();break;case no.CANCELED:case no.ERROR:hw(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Zk(this._state)){case no.RUNNING:case no.PAUSED:e.next&&hw(e.next.bind(e,this.snapshot))();break;case no.SUCCESS:e.complete&&hw(e.complete.bind(e))();break;case no.CANCELED:case no.ERROR:e.error&&hw(e.error.bind(e,this._error))();break;default:e.error&&hw(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class a_{constructor(e,t){this._service=e,this._location=t instanceof xs?t:xs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new a_(e,t)}get root(){const e=new xs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return f2(this._location.path)}get storage(){return this._service}get parent(){const e=function(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new xs(this._location.bucket,e);return new a_(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw a2(e)}}function T2(n,e,t){return Kk.apply(this,arguments)}function Kk(){return(Kk=(0,we.Z)(function*(n,e,t){const o=yield D2(n,{pageToken:t});e.prefixes.push(...o.prefixes),e.items.push(...o.items),null!=o.nextPageToken&&(yield T2(n,e,o.nextPageToken))})).apply(this,arguments)}function D2(n,e){null!=e&&"number"==typeof e.maxResults&&$k("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=X3(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Xu)}function CG(n){n._throwIfRoot("getDownloadURL");const e=function(n,e,t){const o=uh(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,g=new Tc(o,"GET",function(n,e){return function(r,o){const u=p2(n,o,e);return Dc(null!==u),function(n,e,t,r){const o=qk(e);if(null===o||!Sx(o.downloadTokens))return null;const u=o.downloadTokens;if(0===u.length)return null;const c=encodeURIComponent;return u.split(",").map(C=>{const x=n.fullPath;return uh("/b/"+c(n.bucket)+"/o/"+c(x),t,r)+l2({alt:"media",token:C})})[0]}(u,o,n.host,n._protocol)}}(n,t),c);return g.errorHandler=rI(e),g}(n.storage,n._location,nI());return n.storage.makeRequestWithTokens(e,Xu).then(t=>{if(null===t)throw new Vr("no-download-url","The given file does not have any download URLs.");return t})}function S2(n,e){const t=function(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new xs(n._location.bucket,t);return new a_(n.storage,r)}function A2(n,e){if(n instanceof Yk){const t=n;if(null==t._bucket)throw new Vr("no-default-bucket","No default bucket found. Did you set the '"+r2+"' property when initializing the app?");const r=new a_(t,t._bucket);return null!=e?A2(r,e):r}return void 0!==e?S2(n,e):n}function DG(n,e){if(e&&function(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof Yk)return function(n,e){return new a_(n,e)}(n,e);throw cw("To use ref(service, url), the first argument must be a Storage instance.")}return A2(n,e)}function x2(n,e){const t=null==e?void 0:e[r2];return null==t?null:xs.makeFromBucketSpec(t,n)}class Yk{constructor(e,t,r,o,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=o,this._firebaseVersion=u,this._bucket=null,this._host=n2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=o?xs.makeFromBucketSpec(o,this._host):x2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?xs.makeFromBucketSpec(this._url,e):x2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){$k("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){$k("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,we.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,we.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new a_(this,e)}_makeRequest(e,t,r,o){if(this._deleted)return new C3(o2());{const u=function(n,e,t,r,o,u){const c=l2(n.urlParams),g=n.url+c,y=Object.assign({},n.headers);return function(n,e){e&&(n["X-Firebase-GMPID"]=e)}(y,e),function(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(y,t),function(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(y,u),function(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(y,r),new A3(g,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o)}(e,this._appId,r,o,t,this._firebaseVersion);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,we.Z)(function*(){const[o,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,o,u).getPromise()})()}}const R2="@firebase/storage";function P2(n,e){return DG(n=(0,k.m9)(n),e)}(0,ki._registerComponent)(new ca.wA("storage",function(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new Yk(t,r,o,e,ki.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,ki.registerVersion)(R2,"0.9.5",""),(0,ki.registerVersion)(R2,"0.9.5","esm2017");class Mx{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class O2{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Mx(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new Mx(r,this,this._ref))},t)}on(e,t,r,o){let u;return t&&(u="function"==typeof t?c=>t(new Mx(c,this,this._ref)):{next:t.next?c=>t.next(new Mx(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,o||void 0)}}class k2{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new lh(e,this._service))}get items(){return this._delegate.items.map(e=>new lh(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class lh{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(n,e){return S2(n,e)}(this._delegate,e);return new lh(t,this.storage)}get root(){return new lh(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new lh(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new O2(function(n,e,t){return function(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new b2(n,new Ic(e),t)}(n=(0,k.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Ia.RAW,r){this._throwIfRoot("putString");const o=Gk(t,e),u=Object.assign({},r);return null==u.contentType&&null!=o.contentType&&(u.contentType=o.contentType),new O2(new b2(this._delegate,new Ic(o.data,!0),u),this)}listAll(){return function(n){return function(n){const e={prefixes:[],items:[]};return T2(n,e).then(()=>e)}(n=(0,k.m9)(n))}(this._delegate).then(e=>new k2(e,this.storage))}list(e){return function(n,e){return D2(n=(0,k.m9)(n),e)}(this._delegate,e||void 0).then(t=>new k2(t,this.storage))}getMetadata(){return function(n){return function(n){n._throwIfRoot("getMetadata");const e=_2(n.storage,n._location,nI());return n.storage.makeRequestWithTokens(e,Xu)}(n=(0,k.m9)(n))}(this._delegate)}updateMetadata(e){return function(n,e){return function(n,e){n._throwIfRoot("updateMetadata");const t=function(n,e,t,r){const u=uh(e.fullServerUrl(),n.host,n._protocol),g=Wk(t,r),C=n.maxOperationRetryTime,S=new Tc(u,"PATCH",Rx(n,r),C);return S.headers={"Content-Type":"application/json; charset=utf-8"},S.body=g,S.errorHandler=rI(e),S}(n.storage,n._location,e,nI());return n.storage.makeRequestWithTokens(t,Xu)}(n=(0,k.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function(n){return CG(n=(0,k.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(n){return function(n){n._throwIfRoot("deleteObject");const e=function(n,e){const r=uh(e.fullServerUrl(),n.host,n._protocol),g=new Tc(r,"DELETE",function(y,C){},n.maxOperationRetryTime);return g.successCodes=[200,204],g.errorHandler=rI(e),g}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Xu)}(n=(0,k.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw a2(e)}}class F2{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(L2(e))throw cw("ref() expected a child path but got a URL, use refFromURL instead.");return new lh(P2(this._delegate,e),this)}refFromURL(e){if(!L2(e))throw cw("refFromURL() expected a full URL but got a child path, use ref() instead.");try{xs.makeFromUrl(e,this._delegate.host)}catch(t){throw cw("refFromUrl() expected a valid full URL but got an invalid one.")}return new lh(P2(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function(n,e,t,r={}){!function(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken="string"==typeof o?o:(0,k.Sg)(o,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function L2(n){return/^[A-Za-z]+:\/\//.test(n)}function $G(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new F2(t,r)}function V2(n){const e=function(n){return new jn.y(e=>{const t=c=>e.next(c);t(n.snapshot);const u=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){u()}}).pipe(function(n,e=Xh.P){return t=>t.lift(new o3(n,e))}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,St.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function Px(n){return{getDownloadURL:()=>(0,at.of)(void 0).pipe(dn.fc,pr(()=>n.getDownloadURL()),dn.iC),getMetadata:()=>(0,at.of)(void 0).pipe(dn.fc,pr(()=>n.getMetadata()),dn.iC),delete:()=>(0,Gt.D)(n.delete()),child:e=>Px(n.child(e)),updateMetadata:e=>(0,Gt.D)(n.updateMetadata(e)),put:(e,t)=>V2(n.put(e,t)),putString:(e,t,r)=>V2(n.putString(e,t,r)),list:e=>(0,Gt.D)(n.list(e)),listAll:()=>(0,Gt.D)(n.listAll())}}!function(n){const e={TaskState:no,TaskEvent:aG,StringFormat:Ia,Storage:F2,Reference:lh};n.INTERNAL.registerComponent(new ca.wA("storage-compat",$G,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.13")}(II.Z);const qG=new h.OlP("angularfire2.storageBucket"),WG=new h.OlP("angularfire2.storage.maxUploadRetryTime"),zG=new h.OlP("angularfire2.storage.maxOperationRetryTime"),ZG=new h.OlP("angularfire2.storage.use-emulator");let KG=(()=>{class n{constructor(t,r,o,u,c,g,y,C,S,x){const O=(0,_r.on)(t,c,r);this.storage=(0,_r.cc)(`${O.name}.storage.${o}`,"AngularFireStorage",O.name,()=>{const $=c.runOutsideAngular(()=>O.storage(o||void 0)),Z=S;return Z&&$.useEmulator(...Z),y&&$.setMaxUploadRetryTime(y),C&&$.setMaxOperationRetryTime(C),$},[y,C])}ref(t){return Px(this.storage.ref(t))}refFromURL(t){return Px(this.storage.refFromURL(t))}upload(t,r,o){return Px(this.storage.ref(t)).put(r,o)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(_r.Dh),h.LFG(_r.xv,8),h.LFG(qG,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(dn.HU),h.LFG(WG,8),h.LFG(zG,8),h.LFG(ZG,8),h.LFG(sm,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),YG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),QG=(()=>{class n{constructor(){om.Z.registerVersion("angularfire",dn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[KG],imports:[YG]}),n})();const JG={apiKey:"AIzaSyBtM7cE86rnFziMJRWOgI6Btf2WbOFj5vE",authDomain:"binance-watcher-4ca0e.firebaseapp.com",databaseURl:"https://binance-watcher-4ca0e-default-rtdb.firebaseio.com/",projectId:"binance-watcher-4ca0e",storageBucket:"binance-watcher-4ca0e.appspot.com",messagingSenderId:"585627053132",appId:"1:585627053132:web:273c98cb792fe3e2d818e9"};let XG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[eP]}),n.\u0275inj=h.cJS({providers:[],imports:[[Rp,Bx,qS,_r.hO.initializeApp(JG),i3,nM,QG]]}),n})();(0,h.G48)(),ms().bootstrapModule(XG).catch(n=>console.error(n))},3394:(tt,be,V)=>{"use strict";V.d(be,{Z:()=>fe});var h=V(3854),X=V(3910),L=V(8026),ae=V(5422);class re{constructor(Fe,oe){this._delegate=Fe,this.firebase=oe,(0,L._addComponent)(Fe,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=Fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Fe){this._delegate.automaticDataCollectionEnabled=Fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Fe=>{this._delegate.checkDestroyed(),Fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(Fe,oe=L._DEFAULT_ENTRY_NAME){var he;this._delegate.checkDestroyed();const Oe=this._delegate.container.getProvider(Fe);return!Oe.isInitialized()&&"EXPLICIT"===(null===(he=Oe.getComponent())||void 0===he?void 0:he.instantiationMode)&&Oe.initialize(),Oe.getImmediate({identifier:oe})}_removeServiceInstance(Fe,oe=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Fe).clearInstance(oe)}_addComponent(Fe){(0,L._addComponent)(this._delegate,Fe)}_addOrOverwriteComponent(Fe){(0,L._addOrOverwriteComponent)(this._delegate,Fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const me=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function ne(){const pe=function(pe){const Fe={},oe={__esModule:!0,initializeApp:function(lt,We={}){const Se=L.initializeApp(lt,We);if((0,h.r3)(Fe,Se.name))return Fe[Se.name];const Ee=new pe(Se,oe);return Fe[Se.name]=Ee,Ee},app:Oe,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function(lt){const We=lt.name,Se=We.replace("-compat","");if(L._registerComponent(lt)&&"PUBLIC"===lt.type){const Ee=(Ue=Oe())=>{if("function"!=typeof Ue[Se])throw me.create("invalid-app-argument",{appName:We});return Ue[Se]()};void 0!==lt.serviceProps&&(0,h.ZB)(Ee,lt.serviceProps),oe[Se]=Ee,pe.prototype[Se]=function(...Ue){return this._getService.bind(this,We).apply(this,lt.multipleInstances?Ue:[])}}return"PUBLIC"===lt.type?oe[Se]:null},removeApp:function(lt){delete Fe[lt]},useAsService:function(lt,We){return"serverAuth"===We?null:We},modularAPIs:L}};function Oe(lt){if(!(0,h.r3)(Fe,lt=lt||L._DEFAULT_ENTRY_NAME))throw me.create("no-app",{appName:lt});return Fe[lt]}return oe.default=oe,Object.defineProperty(oe,"apps",{get:function(){return Object.keys(Fe).map(lt=>Fe[lt])}}),Oe.App=pe,oe}(re);return pe.INTERNAL=Object.assign(Object.assign({},pe.INTERNAL),{createFirebaseNamespace:ne,extendNamespace:function(oe){(0,h.ZB)(pe,oe)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),pe}(),G=new ae.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const pe=self.firebase.SDK_VERSION;pe&&pe.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const fe=U;(0,L.registerVersion)("@firebase/app-compat","0.1.22",undefined)},8026:(tt,be,V)=>{"use strict";V.r(be),V.d(be,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Tn,_DEFAULT_ENTRY_NAME:()=>$t,_addComponent:()=>Nr,_addOrOverwriteComponent:()=>fi,_apps:()=>Xt,_clearComponents:()=>mn,_components:()=>it,_getProvider:()=>Tt,_registerComponent:()=>Gn,_removeServiceInstance:()=>Ln,deleteApp:()=>Me,getApp:()=>sr,getApps:()=>bi,initializeApp:()=>ro,onLog:()=>Jn,registerVersion:()=>Ze,setLogLevel:()=>qn});var h=V(8239),X=V(3910),L=V(5422),ae=V(3854);class re{constructor(Ae){this.container=Ae}getPlatformInfoString(){return this.container.getProviders().map(ot=>{if(function(Ke){const Ae=Ke.getComponent();return"VERSION"===(null==Ae?void 0:Ae.type)}(ot)){const mt=ot.getImmediate();return`${mt.library}/${mt.version}`}return null}).filter(ot=>ot).join(" ")}}const me="@firebase/app",J="0.7.21",ne=new L.Yd("@firebase/app"),$t="[DEFAULT]",An={[me]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Xt=new Map,it=new Map;function Nr(Ke,Ae){try{Ke.container.addComponent(Ae)}catch(ot){ne.debug(`Component ${Ae.name} failed to register with FirebaseApp ${Ke.name}`,ot)}}function fi(Ke,Ae){Ke.container.addOrOverwriteComponent(Ae)}function Gn(Ke){const Ae=Ke.name;if(it.has(Ae))return ne.debug(`There were multiple attempts to register component ${Ae}.`),!1;it.set(Ae,Ke);for(const ot of Xt.values())Nr(ot,Ke);return!0}function Tt(Ke,Ae){const ot=Ke.container.getProvider("heartbeat").getImmediate({optional:!0});return ot&&ot.triggerHeartbeat(),Ke.container.getProvider(Ae)}function Ln(Ke,Ae,ot=$t){Tt(Ke,Ae).clearInstance(ot)}function mn(){it.clear()}const Qn=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class wn{constructor(Ae,ot,mt){this._isDeleted=!1,this._options=Object.assign({},Ae),this._config=Object.assign({},ot),this._name=ot.name,this._automaticDataCollectionEnabled=ot.automaticDataCollectionEnabled,this._container=mt,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ae){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ae}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ae){this._isDeleted=Ae}checkDestroyed(){if(this.isDeleted)throw Qn.create("app-deleted",{appName:this._name})}}const Tn="9.6.11";function ro(Ke,Ae={}){"object"!=typeof Ae&&(Ae={name:Ae});const ot=Object.assign({name:$t,automaticDataCollectionEnabled:!1},Ae),mt=ot.name;if("string"!=typeof mt||!mt)throw Qn.create("bad-app-name",{appName:String(mt)});const Ut=Xt.get(mt);if(Ut){if((0,ae.vZ)(Ke,Ut.options)&&(0,ae.vZ)(ot,Ut.config))return Ut;throw Qn.create("duplicate-app",{appName:mt})}const Qt=new X.H0(mt);for(const H of it.values())Qt.addComponent(H);const z=new wn(Ke,ot,Qt);return Xt.set(mt,z),z}function sr(Ke=$t){const Ae=Xt.get(Ke);if(!Ae)throw Qn.create("no-app",{appName:Ke});return Ae}function bi(){return Array.from(Xt.values())}function Me(Ke){return or.apply(this,arguments)}function or(){return(or=(0,h.Z)(function*(Ke){const Ae=Ke.name;Xt.has(Ae)&&(Xt.delete(Ae),yield Promise.all(Ke.container.getProviders().map(ot=>ot.delete())),Ke.isDeleted=!0)})).apply(this,arguments)}function Ze(Ke,Ae,ot){var mt;let Ut=null!==(mt=An[Ke])&&void 0!==mt?mt:Ke;ot&&(Ut+=`-${ot}`);const Qt=Ut.match(/\s|\//),z=Ae.match(/\s|\//);if(Qt||z){const H=[`Unable to register library "${Ut}" with version "${Ae}":`];return Qt&&H.push(`library name "${Ut}" contains illegal characters (whitespace or "/")`),Qt&&z&&H.push("and"),z&&H.push(`version name "${Ae}" contains illegal characters (whitespace or "/")`),void ne.warn(H.join(" "))}Gn(new X.wA(`${Ut}-version`,()=>({library:Ut,version:Ae}),"VERSION"))}function Jn(Ke,Ae){if(null!==Ke&&"function"!=typeof Ke)throw Qn.create("invalid-log-argument");(0,L.Am)(Ke,Ae)}function qn(Ke){(0,L.Ub)(Ke)}const Cr="firebase-heartbeat-store";let br=null;function Vn(){return br||(br=(0,ae.X3)("firebase-heartbeat-database",1,(Ke,Ae)=>{switch(Ae){case 0:Ke.createObjectStore(Cr)}}).catch(Ke=>{throw Qn.create("storage-open",{originalErrorMessage:Ke.message})})),br}function xn(){return(xn=(0,h.Z)(function*(Ke){try{return(yield Vn()).transaction(Cr).objectStore(Cr).get(Rs(Ke))}catch(Ae){throw Qn.create("storage-get",{originalErrorMessage:Ae.message})}})).apply(this,arguments)}function He(Ke,Ae){return gt.apply(this,arguments)}function gt(){return(gt=(0,h.Z)(function*(Ke,Ae){try{const mt=(yield Vn()).transaction(Cr,"readwrite");return yield mt.objectStore(Cr).put(Ae,Rs(Ke)),mt.complete}catch(ot){throw Qn.create("storage-set",{originalErrorMessage:ot.message})}})).apply(this,arguments)}function Rs(Ke){return`${Ke.name}!${Ke.options.appId}`}class wt{constructor(Ae){this.container=Ae,this._heartbeatsCache=null;const ot=this.container.getProvider("app").getImmediate();this._storage=new ln(ot),this._heartbeatsCachePromise=this._storage.read().then(mt=>(this._heartbeatsCache=mt,mt))}triggerHeartbeat(){var Ae=this;return(0,h.Z)(function*(){const mt=Ae.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ut=on();if(null===Ae._heartbeatsCache&&(Ae._heartbeatsCache=yield Ae._heartbeatsCachePromise),Ae._heartbeatsCache.lastSentHeartbeatDate!==Ut&&!Ae._heartbeatsCache.heartbeats.some(Qt=>Qt.date===Ut))return Ae._heartbeatsCache.heartbeats.push({date:Ut,agent:mt}),Ae._heartbeatsCache.heartbeats=Ae._heartbeatsCache.heartbeats.filter(Qt=>{const z=new Date(Qt.date).valueOf();return Date.now()-z<=2592e6}),Ae._storage.overwrite(Ae._heartbeatsCache)})()}getHeartbeatsHeader(){var Ae=this;return(0,h.Z)(function*(){if(null===Ae._heartbeatsCache&&(yield Ae._heartbeatsCachePromise),null===Ae._heartbeatsCache||0===Ae._heartbeatsCache.heartbeats.length)return"";const ot=on(),{heartbeatsToSend:mt,unsentEntries:Ut}=function(Ke,Ae=1024){const ot=[];let mt=Ke.slice();for(const Ut of Ke){const Qt=ot.find(z=>z.agent===Ut.agent);if(Qt){if(Qt.dates.push(Ut.date),Pt(ot)>Ae){Qt.dates.pop();break}}else if(ot.push({agent:Ut.agent,dates:[Ut.date]}),Pt(ot)>Ae){ot.pop();break}mt=mt.slice(1)}return{heartbeatsToSend:ot,unsentEntries:mt}}(Ae._heartbeatsCache.heartbeats),Qt=(0,ae.L)(JSON.stringify({version:2,heartbeats:mt}));return Ae._heartbeatsCache.lastSentHeartbeatDate=ot,Ut.length>0?(Ae._heartbeatsCache.heartbeats=Ut,yield Ae._storage.overwrite(Ae._heartbeatsCache)):(Ae._heartbeatsCache.heartbeats=[],Ae._storage.overwrite(Ae._heartbeatsCache)),Qt})()}}function on(){return(new Date).toISOString().substring(0,10)}class ln{constructor(Ae){this.app=Ae,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ae=this;return(0,h.Z)(function*(){return(yield Ae._canUseIndexedDBPromise)&&(yield function(Ke){return xn.apply(this,arguments)}(Ae.app))||{heartbeats:[]}})()}overwrite(Ae){var ot=this;return(0,h.Z)(function*(){var mt;if(yield ot._canUseIndexedDBPromise){const Qt=yield ot.read();return He(ot.app,{lastSentHeartbeatDate:null!==(mt=Ae.lastSentHeartbeatDate)&&void 0!==mt?mt:Qt.lastSentHeartbeatDate,heartbeats:Ae.heartbeats})}})()}add(Ae){var ot=this;return(0,h.Z)(function*(){var mt;if(yield ot._canUseIndexedDBPromise){const Qt=yield ot.read();return He(ot.app,{lastSentHeartbeatDate:null!==(mt=Ae.lastSentHeartbeatDate)&&void 0!==mt?mt:Qt.lastSentHeartbeatDate,heartbeats:[...Qt.heartbeats,...Ae.heartbeats]})}})()}}function Pt(Ke){return(0,ae.L)(JSON.stringify({version:2,heartbeats:Ke})).length}Gn(new X.wA("platform-logger",Ae=>new re(Ae),"PRIVATE")),Gn(new X.wA("heartbeat",Ae=>new wt(Ae),"PRIVATE")),Ze(me,J,""),Ze(me,J,"esm2017"),Ze("fire-js","")},3910:(tt,be,V)=>{"use strict";V.d(be,{wA:()=>L,H0:()=>J,zt:()=>re});var h=V(8239),X=V(3854);class L{constructor(U,G,B){this.name=U,this.instanceFactory=G,this.type=B,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const ae="[DEFAULT]";class re{constructor(U,G){this.name=U,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const G=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(G)){const B=new X.BH;if(this.instancesDeferred.set(G,B),this.isInitialized(G)||this.shouldAutoInitialize())try{const te=this.getOrInitializeService({instanceIdentifier:G});te&&B.resolve(te)}catch(te){}}return this.instancesDeferred.get(G).promise}getImmediate(U){var G;const B=this.normalizeInstanceIdentifier(null==U?void 0:U.identifier),te=null!==(G=null==U?void 0:U.optional)&&void 0!==G&&G;if(!this.isInitialized(B)&&!this.shouldAutoInitialize()){if(te)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:B})}catch(ue){if(te)return null;throw ue}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if("EAGER"===U.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ae})}catch(G){}for(const[G,B]of this.instancesDeferred.entries()){const te=this.normalizeInstanceIdentifier(G);try{const ue=this.getOrInitializeService({instanceIdentifier:te});B.resolve(ue)}catch(ue){}}}}clearInstance(U=ae){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,h.Z)(function*(){const G=Array.from(U.instances.values());yield Promise.all([...G.filter(B=>"INTERNAL"in B).map(B=>B.INTERNAL.delete()),...G.filter(B=>"_delete"in B).map(B=>B._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=ae){return this.instances.has(U)}getOptions(U=ae){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:G={}}=U,B=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(B))throw Error(`${this.name}(${B}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const te=this.getOrInitializeService({instanceIdentifier:B,options:G});for(const[ue,fe]of this.instancesDeferred.entries())B===this.normalizeInstanceIdentifier(ue)&&fe.resolve(te);return te}onInit(U,G){var B;const te=this.normalizeInstanceIdentifier(G),ue=null!==(B=this.onInitCallbacks.get(te))&&void 0!==B?B:new Set;ue.add(U),this.onInitCallbacks.set(te,ue);const fe=this.instances.get(te);return fe&&U(fe,te),()=>{ue.delete(U)}}invokeOnInitCallbacks(U,G){const B=this.onInitCallbacks.get(G);if(B)for(const te of B)try{te(U,G)}catch(ue){}}getOrInitializeService({instanceIdentifier:U,options:G={}}){let B=this.instances.get(U);if(!B&&this.component&&(B=this.component.instanceFactory(this.container,{instanceIdentifier:(ne=U,ne===ae?void 0:ne),options:G}),this.instances.set(U,B),this.instancesOptions.set(U,G),this.invokeOnInitCallbacks(B,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,B)}catch(te){}var ne;return B||null}normalizeInstanceIdentifier(U=ae){return this.component?this.component.multipleInstances?U:ae:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class J{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const G=this.getProvider(U.name);if(G.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);G.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const G=new re(U,this);return this.providers.set(U,G),G}getProviders(){return Array.from(this.providers.values())}}},5422:(tt,be,V)=>{"use strict";V.d(be,{in:()=>X,Yd:()=>me,Ub:()=>J,Am:()=>ne});const h=[];var X=(()=>{return(U=X||(X={}))[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",X;var U})();const L={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},ae=X.INFO,re={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},K=(U,G,...B)=>{if(G<U.logLevel)return;const te=(new Date).toISOString(),ue=re[G];if(!ue)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[ue](`[${te}]  ${U.name}:`,...B)};class me{constructor(G){this.name=G,this._logLevel=ae,this._logHandler=K,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in X))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?L[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...G),this._logHandler(this,X.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...G),this._logHandler(this,X.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,X.INFO,...G),this._logHandler(this,X.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,X.WARN,...G),this._logHandler(this,X.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...G),this._logHandler(this,X.ERROR,...G)}}function J(U){h.forEach(G=>{G.setLogLevel(U)})}function ne(U,G){for(const B of h){let te=null;G&&G.level&&(te=L[G.level]),B.userLogHandler=null===U?null:(ue,fe,...pe)=>{const Fe=pe.map(oe=>{if(null==oe)return null;if("string"==typeof oe)return oe;if("number"==typeof oe||"boolean"==typeof oe)return oe.toString();if(oe instanceof Error)return oe.message;try{return JSON.stringify(oe)}catch(he){return null}}).filter(oe=>oe).join(" ");fe>=(null!=te?te:ue.logLevel)&&U({level:X[fe].toLowerCase(),message:Fe,args:pe,type:ue.name})}}}},8239:(tt,be,V)=>{"use strict";function h(L,ae,re,K,me,J,ne){try{var U=L[J](ne),G=U.value}catch(B){return void re(B)}U.done?ae(G):Promise.resolve(G).then(K,me)}function X(L){return function(){var ae=this,re=arguments;return new Promise(function(K,me){var J=L.apply(ae,re);function ne(G){h(J,K,me,ne,U,"next",G)}function U(G){h(J,K,me,ne,U,"throw",G)}ne(void 0)})}}V.d(be,{Z:()=>X})}},tt=>{tt(tt.s=1301)}]);