(self.webpackChunkbinance_future_watcher_githubio=self.webpackChunkbinance_future_watcher_githubio||[]).push([[179],{8255:nt=>{function Ce(V){return Promise.resolve().then(()=>{var m=new Error("Cannot find module '"+V+"'");throw m.code="MODULE_NOT_FOUND",m})}Ce.keys=()=>[],Ce.resolve=Ce,Ce.id=8255,nt.exports=Ce},7716:(nt,Ce,V)=>{"use strict";V.d(Ce,{deG:()=>Yc,tb:()=>$M,AFp:()=>BM,ip1:()=>Cb,CZH:()=>Hd,hGG:()=>pv,z2F:()=>Fr,sBO:()=>FD,Sil:()=>Gd,_Vd:()=>br,EJc:()=>YS,SBq:()=>nu,qLn:()=>Vl,vpe:()=>ru,gxx:()=>Cd,tBr:()=>$a,XFs:()=>Ke,OlP:()=>kn,zs3:()=>rr,ZZ4:()=>Gg,aQg:()=>Rr,soG:()=>Qy,YKP:()=>VD,v3s:()=>nP,h0i:()=>kd,PXZ:()=>rv,R0b:()=>Sn,FiY:()=>ra,Lbi:()=>jM,g9A:()=>ZS,Qsj:()=>TN,FYo:()=>$g,JOm:()=>xo,Tiy:()=>PD,q3G:()=>nr,tp0:()=>Zr,EAV:()=>dA,Rgc:()=>cc,dDg:()=>am,DyG:()=>Ua,q4F:()=>Hg,GfV:()=>OD,s_b:()=>Fd,ifc:()=>He,eFA:()=>iv,G48:()=>nA,Gpc:()=>G,X6Q:()=>um,_c5:()=>fv,VLi:()=>xb,c2e:()=>HM,zSh:()=>nn,wAp:()=>vt,vHH:()=>fe,EiD:()=>ud,mCW:()=>xl,qzn:()=>Dl,JVY:()=>Uh,pB0:()=>od,eBb:()=>Up,L6k:()=>Vp,LAX:()=>sa,cg1:()=>t0,Tjo:()=>Zb,kL8:()=>nD,yhl:()=>d_,dqk:()=>Et,sIi:()=>Cg,CqO:()=>ny,QGY:()=>Mw,F4k:()=>RT,RDi:()=>ks,AaK:()=>J,z3N:()=>ia,qOj:()=>_w,TTD:()=>zo,_Bn:()=>ID,xp6:()=>Xh,uIk:()=>ww,ekj:()=>oy,Suo:()=>ob,Xpm:()=>H,lG2:()=>Un,Yz7:()=>Dt,cJS:()=>gn,oAB:()=>_t,Yjl:()=>zi,Y36:()=>Rg,_UZ:()=>Nw,qZA:()=>Rw,TgZ:()=>ty,EpF:()=>xT,n5z:()=>bl,Ikx:()=>_y,LFG:()=>Tn,$8M:()=>Cl,NdJ:()=>Pw,CRH:()=>AS,oxw:()=>Fw,ALo:()=>ji,xi3:()=>mM,Q6J:()=>ey,iGM:()=>sb,CHM:()=>Yo,LSH:()=>Kp,kYT:()=>tn,YNc:()=>pT,_uU:()=>dy,Oqu:()=>hy,hij:()=>fy,AsE:()=>Sf});var m=V(9765),X=V(5319),L=V(7574),ae=V(6682),re=V(8819);function Z(i){for(let s in i)if(i[s]===Z)return s;throw Error("Could not find renamed property on target object.")}function me(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function J(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(J).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ne(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const U=Z({__forward_ref__:Z});function G(i){return i.__forward_ref__=G,i.toString=function(){return J(this())},i}function B(i){return te(i)?i():i}function te(i){return"function"==typeof i&&i.hasOwnProperty(U)&&i.__forward_ref__===G}class fe extends Error{constructor(s,a){super(function(i,s){return`${i?`NG0${i}: `:""}${s}`}(s,a)),this.code=s}}function oe(i){return"string"==typeof i?i:null==i?"":String(i)}function he(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():oe(i)}function Qe(i,s){const a=s?` in ${s}`:"";throw new fe("201",`No provider for ${he(i)} found${a}`)}function Xt(i,s){null==i&&function(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function Dt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function gn(i){return{providers:i.providers||[],imports:i.imports||[]}}function sn(i){return Qn(i,ar)||Qn(i,Me)}function Qn(i,s){return i.hasOwnProperty(s)?i[s]:null}function ro(i){return i&&(i.hasOwnProperty(Ti)||i.hasOwnProperty(ur))?i[Ti]:null}const ar=Z({\u0275prov:Z}),Ti=Z({\u0275inj:Z}),Me=Z({ngInjectableDef:Z}),ur=Z({ngInjectorDef:Z});var Ke=(()=>((Ke=Ke||{})[Ke.Default=0]="Default",Ke[Ke.Host=1]="Host",Ke[Ke.Self=2]="Self",Ke[Ke.SkipSelf=4]="SkipSelf",Ke[Ke.Optional=8]="Optional",Ke))();let Jn;function gr(i){const s=Jn;return Jn=i,s}function io(i,s,a){const l=sn(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&Ke.Optional?null:void 0!==s?s:void Qe(J(i),"Injector")}function Tr(i){return{toString:i}.toString()}var Vn=(()=>((Vn=Vn||{})[Vn.OnPush=0]="OnPush",Vn[Vn.Default=1]="Default",Vn))(),He=(()=>((He=He||{})[He.Emulated=0]="Emulated",He[He.None=2]="None",He[He.ShadowDom=3]="ShadowDom",He))();const gt="undefined"!=typeof globalThis&&globalThis,Rs="undefined"!=typeof window&&window,Ns="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Et=gt||"undefined"!=typeof global&&global||Rs||Ns,un={},kt=[],St=Z({\u0275cmp:Z}),Ze=Z({\u0275dir:Z}),Ae=Z({\u0275pipe:Z}),ot=Z({\u0275mod:Z}),mt=Z({\u0275loc:Z}),Ut=Z({\u0275fac:Z}),Qt=Z({__NG_ELEMENT_ID__:Z});let z=0;function H(i){return Tr(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Vn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||kt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||He.Emulated,id:"c",styles:i.styles||kt,_:null,setInput:null,schemas:i.schemas||null,tView:null},d=i.directives,h=i.features,_=i.pipes;return l.id+=z++,l.inputs=Mr(i.inputs,a),l.outputs=Mr(i.outputs),h&&h.forEach(E=>E(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(_e):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map(se):null,l})}function _e(i){return lt(i)||function(i){return i[Ze]||null}(i)}function se(i){return function(i){return i[Ae]||null}(i)}const je={};function _t(i){return Tr(()=>{const s={type:i.type,bootstrap:i.bootstrap||kt,declarations:i.declarations||kt,imports:i.imports||kt,exports:i.exports||kt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(je[i.id]=i.type),s})}function tn(i,s){return Tr(()=>{const a=Pr(i,!0);a.declarations=s.declarations||kt,a.imports=s.imports||kt,a.exports=s.exports||kt})}function Mr(i,s){if(null==i)return un;const a={};for(const l in i)if(i.hasOwnProperty(l)){let d=i[l],h=d;Array.isArray(d)&&(h=d[1],d=d[0]),a[d]=l,s&&(s[d]=h)}return a}const Un=H;function zi(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function lt(i){return i[St]||null}function Pr(i,s){const a=i[ot]||null;if(!a&&!0===s)throw new Error(`Type ${J(i)} does not have '\u0275mod' property.`);return a}function Ai(i){return Array.isArray(i)&&"object"==typeof i[1]}function mn(i){return Array.isArray(i)&&!0===i[1]}function sl(i){return 0!=(8&i.flags)}function ol(i){return 2==(2&i.flags)}function du(i){return 1==(1&i.flags)}function fs(i){return null!==i.template}function xi(i){return 0!=(512&i[2])}function qo(i,s){return i.hasOwnProperty(Ut)?i[Ut]:null}class kc{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function zo(){return ps}function ps(i){return i.type.prototype.ngOnChanges&&(i.setInput=Os),uo}function uo(){const i=Fc(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===un)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function Os(i,s,a,l){const d=Fc(i)||function(i,s){return i[Zi]=s}(i,{previous:un,current:null}),h=d.current||(d.current={}),_=d.previous,E=this.declaredInputs[a],C=_[E];h[E]=new kc(C&&C.currentValue,s,_===un),i[l]=s}zo.ngInherit=!0;const Zi="__ngSimpleChanges__";function Fc(i){return i[Zi]||null}let ll;function ks(i){ll=i}function Pn(i){return!!i.listen}const Ko={createRenderer:(i,s)=>void 0!==ll?ll:"undefined"!=typeof document?document:void 0};function an(i){for(;Array.isArray(i);)i=i[0];return i}function mu(i,s){return an(s[i])}function fn(i,s){return an(s[i.index])}function _u(i,s){return i.data[s]}function Hr(i,s){const a=s[i];return Ai(a)?a:a[0]}function yu(i){return 4==(4&i[2])}function vu(i){return 128==(128&i[2])}function Qi(i,s){return null==s?null:i[s]}function Gr(i){i[18]=0}function Eu(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const bt={lFrame:yp(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function mp(){return bt.bindingsEnabled}function De(){return bt.lFrame.lView}function Ht(){return bt.lFrame.tView}function Yo(i){return bt.lFrame.contextLView=i,i[8]}function Rn(){let i=Ra();for(;null!==i&&64===i.type;)i=i.parent;return i}function Ra(){return bt.lFrame.currentTNode}function ri(i,s){const a=bt.lFrame;a.currentTNode=i,a.isParent=s}function Qo(){return bt.lFrame.isParent}function Jo(){return bt.isInCheckNoChangesMode}function Ma(i){bt.isInCheckNoChangesMode=i}function Wr(){return bt.lFrame.bindingIndex}function Ri(){return bt.lFrame.bindingIndex++}function ii(i){const s=bt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}function fl(i,s){const a=bt.lFrame;a.bindingIndex=a.bindingRootIndex=i,bu(s)}function bu(i){bt.lFrame.currentDirectiveIndex=i}function wh(){return bt.lFrame.currentQueryIndex}function Fs(i){bt.lFrame.currentQueryIndex=i}function pl(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function Iu(i,s,a){if(a&Ke.SkipSelf){let d=s,h=i;for(;!(d=d.parent,null!==d||a&Ke.Host||(d=pl(h),null===d||(h=h[15],10&d.type))););if(null===d)return!1;s=d,i=h}const l=bt.lFrame=ml();return l.currentTNode=s,l.lView=i,!0}function gl(i){const s=ml(),a=i[1];bt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function ml(){const i=bt.lFrame,s=null===i?null:i.child;return null===s?yp(i):s}function yp(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Tu(){const i=bt.lFrame;return bt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const $c=Tu;function Du(){const i=Tu();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function qr(){return bt.lFrame.selectedIndex}function go(i){bt.lFrame.selectedIndex=i}function On(){const i=bt.lFrame;return _u(i.tView,i.selectedIndex)}function ka(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const h=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:C,ngAfterViewChecked:T,ngOnDestroy:R}=h;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),C&&(i.viewHooks||(i.viewHooks=[])).push(-a,C),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=R&&(i.destroyHooks||(i.destroyHooks=[])).push(a,R)}}function Xo(i,s,a){yl(i,s,3,a)}function Bn(i,s,a,l){(3&i[2])===a&&yl(i,s,a,l)}function _l(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function yl(i,s,a,l){const h=null!=l?l:-1,_=s.length-1;let E=0;for(let C=void 0!==l?65535&i[18]:0;C<_;C++)if("number"==typeof s[C+1]){if(E=s[C],null!=l&&E>=l)break}else s[C]<0&&(i[18]+=65536),(E<h||-1==h)&&(bp(i,a,s,C),i[18]=(4294901760&i[18])+C+2),C++}function bp(i,s,a,l){const d=a[l]<0,h=a[l+1],E=i[d?-a[l]:a[l]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{h.call(E)}finally{}}}else try{h.call(E)}finally{}}class ea{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function qc(i,s,a){const l=Pn(i);let d=0;for(;d<a.length;){const h=a[d];if("number"==typeof h){if(0!==h)break;d++;const _=a[d++],E=a[d++],C=a[d++];l?i.setAttribute(s,E,C,_):s.setAttributeNS(_,E,C)}else{const _=h,E=a[++d];_s(_)?l&&i.setProperty(s,_,E):l?i.setAttribute(s,_,E):s.setAttribute(_,E),d++}}return d}function Ip(i){return 3===i||4===i||6===i}function _s(i){return 64===i.charCodeAt(0)}function zc(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const d=s[l];"number"==typeof d?a=d:0===a||Tp(i,a,d,null,-1===a||2===a?s[++l]:null)}}return i}function Tp(i,s,a,l,d){let h=0,_=i.length;if(-1===s)_=-1;else for(;h<i.length;){const E=i[h++];if("number"==typeof E){if(E===s){_=-1;break}if(E>s){_=h-1;break}}}for(;h<i.length;){const E=i[h];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==d&&(i[h+1]=d));if(l===i[h+1])return void(i[h+2]=d)}h++,null!==l&&h++,null!==d&&h++}-1!==_&&(i.splice(_,0,s),h=_+1),i.splice(h++,0,a),null!==l&&i.splice(h++,0,l),null!==d&&i.splice(h++,0,d)}function Au(i){return-1!==i}function Fa(i){return 32767&i}function _o(i,s){let a=function(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let ys=!0;function La(i){const s=ys;return ys=i,s}let Ih=0;function Ls(i,s){const a=Gt(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,Dh(l.data,i),Dh(s,null),Dh(l.blueprint,null));const d=at(i,s),h=i.injectorIndex;if(Au(d)){const _=Fa(d),E=_o(d,s),C=E[1].data;for(let T=0;T<8;T++)s[h+T]=E[_+T]|C[_+T]}return s[h+8]=d,h}function Dh(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Gt(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function at(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,d=s;for(;null!==d;){const h=d[1],_=h.type;if(l=2===_?h.declTNode:1===_?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Mi(i,s,a){!function(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Qt)&&(l=a[Qt]),null==l&&(l=a[Qt]=Ih++);const d=255&l;s.data[i+(d>>5)]|=1<<d}(i,s,a)}function wi(i,s,a){if(a&Ke.Optional)return i;Qe(s,"NodeInjector")}function Kc(i,s,a,l){if(a&Ke.Optional&&void 0===l&&(l=null),0==(a&(Ke.Self|Ke.Host))){const d=i[9],h=gr(void 0);try{return d?d.get(s,l,a&Ke.Optional):io(s,l,a&Ke.Optional)}finally{gr(h)}}return wi(l,s,a)}function Ji(i,s,a,l=Ke.Default,d){if(null!==i){const h=function(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Qt)?i[Qt]:void 0;return"number"==typeof s?s>=0?255&s:yo:s}(a);if("function"==typeof h){if(!Iu(s,i,l))return l&Ke.Host?wi(d,a,l):Kc(s,a,l,d);try{const _=h(l);if(null!=_||l&Ke.Optional)return _;Qe(a)}finally{$c()}}else if("number"==typeof h){let _=null,E=Gt(i,s),C=-1,T=l&Ke.Host?s[16][6]:null;for((-1===E||l&Ke.SkipSelf)&&(C=-1===E?at(i,s):s[E+8],-1!==C&&Ru(l,!1)?(_=s[1],E=Fa(C),s=_o(C,s)):E=-1);-1!==E;){const R=s[1];if(Xn(h,E,R.data)){const P=Ap(E,s,a,_,l,T);if(P!==zr)return P}C=s[E+8],-1!==C&&Ru(l,s[1].data[E+8]===T)&&Xn(h,E,s)?(_=R,E=Fa(C),s=_o(C,s)):E=-1}}}return Kc(s,a,l,d)}const zr={};function yo(){return new vo(Rn(),De())}function Ap(i,s,a,l,d,h){const _=s[1],E=_.data[i+8],R=El(E,_,a,null==l?ol(E)&&ys:l!=_&&0!=(3&E.type),d&Ke.Host&&h===E);return null!==R?jn(s,_,R,E):zr}function El(i,s,a,l,d){const h=i.providerIndexes,_=s.data,E=1048575&h,C=i.directiveStart,R=h>>20,F=d?E+R:i.directiveEnd;for(let W=l?E:E+R;W<F;W++){const Y=_[W];if(W<C&&a===Y||W>=C&&Y.type===a)return W}if(d){const W=_[C];if(W&&fs(W)&&W.type===a)return C}return null}function jn(i,s,a,l){let d=i[a];const h=s.data;if(function(i){return i instanceof ea}(d)){const _=d;_.resolving&&function(i,s){throw new fe("200",`Circular dependency in DI detected for ${i}`)}(he(h[a]));const E=La(_.canSeeViewProviders);_.resolving=!0;const C=_.injectImpl?gr(_.injectImpl):null;Iu(i,l,Ke.Default);try{d=i[a]=_.factory(void 0,h,i,l),s.firstCreatePass&&a>=l.directiveStart&&function(i,s,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:h}=s.type.prototype;if(l){const _=ps(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),h&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,h),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,h))}(a,h[a],s)}finally{null!==C&&gr(C),La(E),_.resolving=!1,$c()}}return d}function Xn(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Ru(i,s){return!(i&Ke.Self||i&Ke.Host&&s)}class vo{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return Ji(this._tNode,this._lView,s,l,a)}}function bl(i){return Tr(()=>{const s=i.prototype.constructor,a=s[Ut]||Nu(s),l=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==l;){const h=d[Ut]||Nu(d);if(h&&h!==a)return h;d=Object.getPrototypeOf(d)}return h=>new h})}function Nu(i){return te(i)?()=>{const s=Nu(B(i));return s&&s()}:qo(i)}function Cl(i){return function(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const h=a[d];if(Ip(h))break;if(0===h)d+=2;else if("number"==typeof h)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(h===s)return a[d+1];d+=2}}}return null}(Rn(),i)}const Pi="__parameters__";function si(i,s,a){return Tr(()=>{const l=function(i){return function(...a){if(i){const l=i(...a);for(const d in l)this[d]=l[d]}}}(s);function d(...h){if(this instanceof d)return l.apply(this,h),this;const _=new d(...h);return E.annotation=_,E;function E(C,T,R){const P=C.hasOwnProperty(Pi)?C[Pi]:Object.defineProperty(C,Pi,{value:[]})[Pi];for(;P.length<=R;)P.push(null);return(P[R]=P[R]||[]).push(_),C}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class kn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Dt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Yc=new kn("AnalyzeForEntryComponents"),Ua=Function;function ki(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),ki(l,s)):s!==i&&s.push(l)}return s}function Fi(i,s){i.forEach(a=>Array.isArray(a)?Fi(a,s):s(a))}function Es(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function wo(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function $n(i,s,a){let l=Io(i,s);return l>=0?i[1|l]=a:(l=~l,function(i,s,a,l){let d=i.length;if(d==s)i.push(a,l);else if(1===d)i.push(l,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function Kr(i,s){const a=Io(i,s);if(a>=0)return i[1|a]}function Io(i,s){return function(i,s,a){let l=0,d=i.length>>a;for(;d!==l;){const h=l+(d-l>>1),_=i[h<<a];if(s===_)return h<<a;_>s?d=h:l=h+1}return~(d<<a)}(i,s,1)}const zt={},xt="__NG_DI_FLAG__",Sr="ngTempTokenPath",ja=/\n/gm,na="__source",Do=Z({provide:String,useValue:Z});let js;function Ft(i){const s=js;return js=i,s}function Np(i,s=Ke.Default){if(void 0===js)throw new Error("inject() must be called from an injection context");return null===js?io(i,void 0,s):js.get(i,s&Ke.Optional?null:void 0,s)}function Tn(i,s=Ke.Default){return(Jn||Np)(B(i),s)}function Pu(i){const s=[];for(let a=0;a<i.length;a++){const l=B(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Error("Arguments array must have arguments.");let d,h=Ke.Default;for(let _=0;_<l.length;_++){const E=l[_],C=Pp(E);"number"==typeof C?-1===C?d=E.token:h|=C:d=E}s.push(Tn(d,h))}else s.push(Tn(l))}return s}function ed(i,s){return i[xt]=s,i.prototype[xt]=s,i}function Pp(i){return i[xt]}function es(i,s,a,l){const d=i[Sr];throw s[na]&&d.unshift(s[na]),i.message=function(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let d=J(s);if(Array.isArray(s))d=s.map(J).join(" -> ");else if("object"==typeof s){let h=[];for(let _ in s)if(s.hasOwnProperty(_)){let E=s[_];h.push(_+":"+("string"==typeof E?JSON.stringify(E):J(E)))}d=`{${h.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${i.replace(ja,"\n  ")}`}("\n"+i.message,d,a,l),i.ngTokenPath=d,i[Sr]=null,i}const $a=ed(si("Inject",i=>({token:i})),-1),ra=ed(si("Optional"),8),Zr=ed(si("SkipSelf"),4);let nd;function $s(i){var s;return(null===(s=function(){if(void 0===nd&&(nd=null,Et.trustedTypes))try{nd=Et.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return nd}())||void 0===s?void 0:s.createHTML(i))||i}class So{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class lE extends So{getTypeName(){return"HTML"}}class cE extends So{getTypeName(){return"Style"}}class Vh extends So{getTypeName(){return"Script"}}class dE extends So{getTypeName(){return"URL"}}class hE extends So{getTypeName(){return"ResourceURL"}}function ia(i){return i instanceof So?i.changingThisBreaksApplicationSecurity:i}function Dl(i,s){const a=d_(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}function d_(i){return i instanceof So&&i.getTypeName()||null}function Uh(i){return new lE(i)}function Vp(i){return new cE(i)}function Up(i){return new Vh(i)}function sa(i){return new dE(i)}function od(i){return new hE(i)}class jp{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const a=(new window.DOMParser).parseFromString($s(s),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(s):(a.removeChild(a.firstChild),a)}catch(a){return null}}}class fE{constructor(s){if(this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const l=this.inertDocument.createElement("body");a.appendChild(l)}}getInertBodyElement(s){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=$s(s),a;const l=this.inertDocument.createElement("body");return l.innerHTML=$s(s),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(s){const a=s.attributes;for(let d=a.length-1;0<d;d--){const _=a.item(d).name;("xmlns:ns1"===_||0===_.indexOf("ns1:"))&&s.removeAttribute(_)}let l=s.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const h_=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Al=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function xl(i){return(i=String(i)).match(h_)||i.match(Al)?i:"unsafe:"+i}function Hs(i){const s={};for(const a of i.split(","))s[a]=!0;return s}function qa(...i){const s={};for(const a of i)for(const l in a)a.hasOwnProperty(l)&&(s[l]=!0);return s}const Bh=Hs("area,br,col,hr,img,wbr"),jh=Hs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ad=Hs("rp,rt"),$p=qa(Bh,qa(jh,Hs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),qa(ad,Hs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),qa(ad,jh)),Nl=Hs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ml=Hs("srcset"),Hp=qa(Nl,Ml,Hs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Hs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Gp=Hs("script,style,template");class Wp{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let a=s.firstChild,l=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?l=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,l&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let d=this.checkClobberedElement(a,a.nextSibling);if(d){a=d;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(s){const a=s.nodeName.toLowerCase();if(!$p.hasOwnProperty(a))return this.sanitizedSomething=!0,!Gp.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const l=s.attributes;for(let d=0;d<l.length;d++){const h=l.item(d),_=h.name,E=_.toLowerCase();if(!Hp.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let C=h.value;Nl[E]&&(C=xl(C)),Ml[E]&&(i=C,C=(i=String(i)).split(",").map(s=>xl(s.trim())).join(", ")),this.buf.push(" ",_,'="',p_(C),'"')}var i;return this.buf.push(">"),!0}endElement(s){const a=s.nodeName.toLowerCase();$p.hasOwnProperty(a)&&!Bh.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(s){this.buf.push(p_(s))}checkClobberedElement(s,a){if(a&&(s.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return a}}const qp=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,mE=/([^\#-~ |!])/g;function p_(i){return i.replace(/&/g,"&amp;").replace(qp,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(mE,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Vu;function ud(i,s){let a=null;try{Vu=Vu||function(i){const s=new fE(i);return function(){try{return!!(new window.DOMParser).parseFromString($s(""),"text/html")}catch(i){return!1}}()?new jp(s):s}(i);let l=s?String(s):"";a=Vu.getInertBodyElement(l);let d=5,h=l;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,l=h,h=a.innerHTML,a=Vu.getInertBodyElement(l)}while(l!==h);return $s((new Wp).sanitizeChildren(zp(a)||a))}finally{if(a){const l=zp(a)||a;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function zp(i){return"content"in i&&function(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var nr=(()=>((nr=nr||{})[nr.NONE=0]="NONE",nr[nr.HTML=1]="HTML",nr[nr.STYLE=2]="STYLE",nr[nr.SCRIPT=3]="SCRIPT",nr[nr.URL=4]="URL",nr[nr.RESOURCE_URL=5]="RESOURCE_URL",nr))();function Kp(i){const s=function(){const i=De();return i&&i[12]}();return s?s.sanitize(nr.URL,i)||"":Dl(i,"URL")?ia(i):xl(oe(i))}const Ol="__ngContext__";function kr(i,s){i[Ol]=s}function eg(i){const s=function(i){return i[Ol]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Ar(i){return i.ngOriginalError}function w_(i,...s){i.error(...s)}class Vl{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=this._findContext(s),d=(i=s)&&i.ngErrorLogger||w_;var i;d(this._console,"ERROR",s),a&&d(this._console,"ORIGINAL ERROR",a),l&&d(this._console,"ERROR CONTEXT",l)}_findContext(s){return s?s.ngDebugContext||this._findContext(Ar(s)):null}_findOriginalError(s){let a=s&&Ar(s);for(;a&&Ar(a);)a=Ar(a);return a||null}}const Kh=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Et))();function Gs(i){return i instanceof Function?i():i}var xo=(()=>((xo=xo||{})[xo.Important=1]="Important",xo[xo.DashCase=2]="DashCase",xo))();function Yh(i,s){return undefined(i,s)}function g(i){const s=i[3];return mn(s)?s[3]:s}function N(i){return le(i[13])}function q(i){return le(i[4])}function le(i){for(;null!==i&&!mn(i);)i=i[4];return i}function Re(i,s,a,l,d){if(null!=l){let h,_=!1;mn(l)?h=l:Ai(l)&&(_=!0,l=l[0]);const E=an(l);0===i&&null!==a?null==d?pI(s,a,E):Ul(s,a,E,d||null,!0):1===i&&null!==a?Ul(s,a,E,d||null,!0):2===i?function(i,s,a){const l=D_(i,s);l&&function(i,s,a,l){Pn(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,E,_):3===i&&s.destroyNode(E),null!=h&&function(i,s,a,l,d){const h=a[7];h!==an(a)&&Re(s,i,l,h,d);for(let E=10;E<a.length;E++){const C=a[E];_d(C[1],C,i,s,l,h)}}(s,i,h,a,d)}}function vr(i,s,a){return Pn(i)?i.createElement(s,a):null===a?i.createElement(s):i.createElementNS(a,s)}function pd(i,s){const a=i[9],l=a.indexOf(s),d=s[3];1024&s[2]&&(s[2]&=-1025,Eu(d,-1)),a.splice(l,1)}function gd(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const d=l[17];null!==d&&d!==i&&pd(d,l),s>0&&(i[a-1][4]=l[4]);const h=wo(i,10+s);!function(i,s){_d(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const _=h[19];null!==_&&_.detachView(h[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function Jh(i,s){if(!(256&s[2])){const a=s[11];Pn(a)&&a.destroyNode&&_d(i,s,a,3,null,null),function(i){let s=i[13];if(!s)return aa(i[1],i);for(;s;){let a=null;if(Ai(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)Ai(s)&&aa(s[1],s),s=s[3];null===s&&(s=i),Ai(s)&&aa(s[1],s),a=s&&s[4]}s=a}}(s)}}function aa(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const d=s[a[l]];if(!(d instanceof ea)){const h=a[l+1];if(Array.isArray(h))for(let _=0;_<h.length;_+=2){const E=d[h[_]],C=h[_+1];try{C.call(E)}finally{}}else try{h.call(d)}finally{}}}}(i,s),function(i,s){const a=i.cleanup,l=s[7];let d=-1;if(null!==a)for(let h=0;h<a.length-1;h+=2)if("string"==typeof a[h]){const _=a[h+1],E="function"==typeof _?_(s):an(s[_]),C=l[d=a[h+2]],T=a[h+3];"boolean"==typeof T?E.removeEventListener(a[h],C,T):T>=0?l[d=T]():l[d=-T].unsubscribe(),h+=2}else{const _=l[d=a[h+1]];a[h].call(_)}if(null!==l){for(let h=d+1;h<l.length;h++)l[h]();s[7]=null}}(i,s),1===s[1].type&&Pn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&mn(s[3])){a!==s[3]&&pd(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function T_(i,s,a){return function(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const d=i.data[l.directiveStart].encapsulation;if(d===He.None||d===He.Emulated)return null}return fn(l,a)}(i,s.parent,a)}function Ul(i,s,a,l,d){Pn(i)?i.insertBefore(s,a,l,d):s.insertBefore(a,l,d)}function pI(i,s,a){Pn(i)?i.appendChild(s,a):s.appendChild(a)}function gI(i,s,a,l,d){null!==l?Ul(i,s,a,l,d):pI(i,s,a)}function D_(i,s){return Pn(i)?i.parentNode(s):s.parentNode}let md=function(i,s,a){return 40&i.type?fn(i,a):null};function cg(i,s,a,l){const d=T_(i,l,s),h=s[11],E=function(i,s,a){return md(i,s,a)}(l.parent||s[6],l,s);if(null!=d)if(Array.isArray(a))for(let C=0;C<a.length;C++)gI(h,d,a[C],E,!1);else gI(h,d,a,E,!1)}function R_(i,s){if(null!==s){const a=s.type;if(3&a)return fn(s,i);if(4&a)return SE(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return R_(i,l);{const d=i[s.index];return mn(d)?SE(-1,d):an(d)}}if(32&a)return Yh(s,i)()||an(i[s.index]);{const l=DE(i,s);return null!==l?Array.isArray(l)?l[0]:R_(g(i[16]),l):R_(i,s.next)}}return null}function DE(i,s){return null!==s?i[16][6].projection[s.projection]:null}function SE(i,s){const a=10+i+1;if(a<s.length){const l=s[a],d=l[1].firstChild;if(null!==d)return R_(l,d)}return s[7]}function N_(i,s,a,l,d,h,_){for(;null!=a;){const E=l[a.index],C=a.type;if(_&&0===s&&(E&&kr(an(E),l),a.flags|=4),64!=(64&a.flags))if(8&C)N_(i,s,a.child,l,d,h,!1),Re(s,i,d,E,h);else if(32&C){const T=Yh(a,l);let R;for(;R=T();)Re(s,i,d,R,h);Re(s,i,d,E,h)}else 16&C?Bl(i,s,l,a,d,h):Re(s,i,d,E,h);a=_?a.projectionNext:a.next}}function _d(i,s,a,l,d,h){N_(a,l,i.firstChild,s,d,h,!1)}function Bl(i,s,a,l,d,h){const _=a[16],C=_[6].projection[l.projection];if(Array.isArray(C))for(let T=0;T<C.length;T++)Re(s,i,d,C[T],h);else N_(i,s,C,_[3],d,h,!0)}function yI(i,s,a){Pn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function xE(i,s,a){Pn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function RE(i,s,a){let l=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const h=s.length;if(d+h===l||i.charCodeAt(d+h)<=32)return d}a=d+1}}const vI="ng-template";function Nx(i,s,a){let l=0;for(;l<i.length;){let d=i[l++];if(a&&"class"===d){if(d=i[l],-1!==RE(d.toLowerCase(),s,0))return!0}else if(1===d){for(;l<i.length&&"string"==typeof(d=i[l++]);)if(d.toLowerCase()===s)return!0;return!1}}return!1}function NE(i){return 4===i.type&&i.value!==vI}function Mx(i,s,a){return s===(4!==i.type||a?i.value:vI)}function Px(i,s,a){let l=4;const d=i.attrs||[],h=function(i){for(let s=0;s<i.length;s++)if(Ip(i[s]))return s;return i.length}(d);let _=!1;for(let E=0;E<s.length;E++){const C=s[E];if("number"!=typeof C){if(!_)if(4&l){if(l=2|1&l,""!==C&&!Mx(i,C,a)||""===C&&1===s.length){if(ua(l))return!1;_=!0}}else{const T=8&l?C:s[++E];if(8&l&&null!==i.attrs){if(!Nx(i.attrs,T,a)){if(ua(l))return!1;_=!0}continue}const P=ME(8&l?"class":C,d,NE(i),a);if(-1===P){if(ua(l))return!1;_=!0;continue}if(""!==T){let F;F=P>h?"":d[P+1].toLowerCase();const W=8&l?F:null;if(W&&-1!==RE(W,T,0)||2&l&&T!==F){if(ua(l))return!1;_=!0}}}}else{if(!_&&!ua(l)&&!ua(C))return!1;if(_&&ua(C))continue;_=!1,l=C|1&l}}return ua(l)||_}function ua(i){return 0==(1&i)}function ME(i,s,a,l){if(null===s)return-1;let d=0;if(l||!a){let h=!1;for(;d<s.length;){const _=s[d];if(_===i)return d;if(3===_||6===_)h=!0;else{if(1===_||2===_){let E=s[++d];for(;"string"==typeof E;)E=s[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=h?1:2}return-1}return function(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function EI(i,s,a=!1){for(let l=0;l<s.length;l++)if(Px(i,s[l],a))return!0;return!1}function bI(i,s){return i?":not("+s.trim()+")":s}function Fx(i){let s=i[0],a=1,l=2,d="",h=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const E=i[++a];d+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?d+="."+_:4&l&&(d+=" "+_);else""!==d&&!ua(_)&&(s+=bI(h,d),d=""),l=_,h=h||!ua(l);a++}return""!==d&&(s+=bI(h,d)),s}const Lt={};function Xh(i){II(Ht(),De(),qr()+i,Jo())}function II(i,s,a,l){if(!l)if(3==(3&s[2])){const h=i.preOrderCheckHooks;null!==h&&Xo(s,h,a)}else{const h=i.preOrderHooks;null!==h&&Bn(s,h,0,a)}go(a)}function M_(i,s){return i<<17|s<<2}function la(i){return i>>17&32767}function O_(i){return 2|i}function Uu(i){return(131068&i)>>2}function PE(i,s){return-131069&i|s<<2}function OE(i){return 1|i}function UE(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],h=a[l+1];if(-1!==h){const _=i.data[h];Fs(d),_.contentQueries(2,s[h],h)}}}function hg(i,s,a,l,d,h,_,E,C,T){const R=s.blueprint.slice();return R[0]=d,R[2]=140|l,Gr(R),R[3]=R[15]=i,R[8]=a,R[10]=_||i&&i[10],R[11]=E||i&&i[11],R[12]=C||i&&i[12]||null,R[9]=T||i&&i[9]||null,R[6]=h,R[16]=2==s.type?i[16]:R,R}function rf(i,s,a,l,d){let h=i.data[s];if(null===h)h=function(i,s,a,l,d){const h=Ra(),_=Qo(),C=i.data[s]=function(i,s,a,l,d,h){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?h:h&&h.parent,a,s,l,d);return null===i.firstChild&&(i.firstChild=C),null!==h&&(_?null==h.child&&null!==C.parent&&(h.child=C):null===h.next&&(h.next=C)),C}(i,s,a,l,d),bt.lFrame.inI18n&&(h.flags|=64);else if(64&h.type){h.type=a,h.value=l,h.attrs=d;const _=function(){const i=bt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();h.injectorIndex=null===_?-1:_.injectorIndex}return ri(h,!0),h}function sf(i,s,a,l){if(0===a)return-1;const d=s.length;for(let h=0;h<a;h++)s.push(l),i.blueprint.push(l),i.data.push(null);return d}function af(i,s,a){gl(s);try{const l=i.viewQuery;null!==l&&nw(1,l,a);const d=i.template;null!==d&&wd(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&UE(i,s),i.staticViewQueries&&nw(2,i.viewQuery,a);const h=i.components;null!==h&&function(i,s){for(let a=0;a<s.length;a++)Xx(i,s[a])}(s,h)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,Du()}}function jl(i,s,a,l){const d=s[2];if(256==(256&d))return;gl(s);const h=Jo();try{Gr(s),function(i){bt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&wd(i,s,a,2,l);const _=3==(3&d);if(!h)if(_){const T=i.preOrderCheckHooks;null!==T&&Xo(s,T,null)}else{const T=i.preOrderHooks;null!==T&&Bn(s,T,0,null),_l(s,0)}if(function(i){for(let s=N(i);null!==s;s=q(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const d=a[l],h=d[3];0==(1024&d[2])&&Eu(h,1),d[2]|=1024}}}(s),function(i){for(let s=N(i);null!==s;s=q(s))for(let a=10;a<s.length;a++){const l=s[a],d=l[1];vu(l)&&jl(d,l,d.template,l[8])}}(s),null!==i.contentQueries&&UE(i,s),!h)if(_){const T=i.contentCheckHooks;null!==T&&Xo(s,T)}else{const T=i.contentHooks;null!==T&&Bn(s,T,1),_l(s,1)}!function(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)go(~d);else{const h=d,_=a[++l],E=a[++l];fl(_,h),E(2,s[h])}}}finally{go(-1)}}(i,s);const E=i.components;null!==E&&function(i,s){for(let a=0;a<s.length;a++)QE(i,s[a])}(s,E);const C=i.viewQuery;if(null!==C&&nw(2,C,l),!h)if(_){const T=i.viewCheckHooks;null!==T&&Xo(s,T)}else{const T=i.viewHooks;null!==T&&Bn(s,T,2),_l(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),h||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,Eu(s[3],-1))}finally{Du()}}function L_(i,s,a,l){const d=s[10],h=!Jo(),_=yu(s);try{h&&!_&&d.begin&&d.begin(),_&&af(i,s,l),jl(i,s,a,l)}finally{h&&!_&&d.end&&d.end()}}function wd(i,s,a,l,d){const h=qr(),_=2&l;try{go(-1),_&&s.length>20&&II(i,s,20,Jo()),a(l,d)}finally{go(h)}}function bd(i,s,a){!mp()||(function(i,s,a,l){const d=a.directiveStart,h=a.directiveEnd;i.firstCreatePass||Ls(a,s),kr(l,s);const _=a.initialInputs;for(let E=d;E<h;E++){const C=i.data[E],T=fs(C);T&&Qx(s,a,C);const R=jn(s,i,E,a);kr(R,s),null!==_&&qI(0,E-d,R,C,0,_),T&&(Hr(a.index,s)[8]=R)}}(i,s,a,fn(a,s)),128==(128&a.flags)&&function(i,s,a){const l=a.directiveStart,d=a.directiveEnd,_=a.index,E=bt.lFrame.currentDirectiveIndex;try{go(_);for(let C=l;C<d;C++){const T=i.data[C],R=s[C];bu(C),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&jI(T,R)}}finally{go(-1),bu(E)}}(i,s,a))}function jE(i,s,a=fn){const l=s.localNames;if(null!==l){let d=s.index+1;for(let h=0;h<l.length;h+=2){const _=l[h+1],E=-1===_?a(s,i):i[_];i[d++]=E}}}function OI(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=$l(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function $l(i,s,a,l,d,h,_,E,C,T){const R=20+l,P=R+d,F=function(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Lt);return a}(R,P),W="function"==typeof T?T():T;return F[1]={type:i,blueprint:F,template:a,queries:null,viewQuery:E,declTNode:s,data:F.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:C,consts:W,incompleteFirstPass:!1}}function GE(i,s,a,l){const d=rw(s);null===a?d.push(l):(d.push(a),i.firstCreatePass&&iw(i).push(l,d.length-1))}function WE(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const d=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,d):a[l]=[s,d]}return a}function Cs(i,s,a,l,d,h,_,E){const C=fn(s,a);let R,T=s.inputs;!E&&null!=T&&(R=T[l])?(QI(i,a,R,l,d),ol(s)&&function(i,s){const a=Hr(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),d=null!=_?_(d,s.value||"",l):d,Pn(h)?h.setProperty(C,l,d):_s(l)||(C.setProperty?C.setProperty(l,d):C[l]=d))}function fg(i,s,a,l){let d=!1;if(mp()){const h=function(i,s,a){const l=i.directiveRegistry;let d=null;if(l)for(let h=0;h<l.length;h++){const _=l[h];EI(a,_.selectors,!1)&&(d||(d=[]),Mi(Ls(a,s),i,_.type),fs(_)?(ZE(i,a),d.unshift(_)):d.push(_))}return d}(i,s,a),_=null===l?null:{"":-1};if(null!==h){d=!0,GI(a,i.data.length,h.length);for(let R=0;R<h.length;R++){const P=h[R];P.providersResolver&&P.providersResolver(P)}let E=!1,C=!1,T=sf(i,s,h.length,null);for(let R=0;R<h.length;R++){const P=h[R];a.mergedAttrs=zc(a.mergedAttrs,P.hostAttrs),WI(i,a,s,T,P),HI(T,P,_),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const F=P.type.prototype;!E&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!C&&(F.ngOnChanges||F.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),C=!0),T++}!function(i,s){const l=s.directiveEnd,d=i.data,h=s.attrs,_=[];let E=null,C=null;for(let T=s.directiveStart;T<l;T++){const R=d[T],P=R.inputs,F=null===h||NE(s)?null:zI(P,h);_.push(F),E=WE(P,T,E),C=WE(R.outputs,T,C)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=16),E.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=E,s.outputs=C}(i,a)}_&&function(i,s,a){if(s){const l=i.localNames=[];for(let d=0;d<s.length;d+=2){const h=a[s[d+1]];if(null==h)throw new fe("301",`Export of name '${s[d+1]}' not found!`);l.push(s[d],h)}}}(a,l,_)}return a.mergedAttrs=zc(a.mergedAttrs,a.attrs),d}function UI(i,s,a,l,d,h){const _=h.hostBindings;if(_){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const C=~s.index;(function(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(E)!=C&&E.push(C),E.push(l,d,_)}}function jI(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function ZE(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function HI(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;fs(s)&&(a[""]=i)}}function GI(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function WI(i,s,a,l,d){i.data[l]=d;const h=d.factory||(d.factory=qo(d.type)),_=new ea(h,fs(d),null);i.blueprint[l]=_,a[l]=_,UI(i,s,0,l,sf(i,a,d.hostVars,Lt),d)}function Qx(i,s,a){const l=fn(s,i),d=OI(a),h=i[10],_=Hl(i,hg(i,d,null,a.onPush?64:16,l,s,h,h.createRenderer(l,a),null,null));i[s.index]=_}function Ja(i,s,a,l,d,h){const _=fn(i,s);!function(i,s,a,l,d,h,_){if(null==h)Pn(i)?i.removeAttribute(s,d,a):s.removeAttribute(d);else{const E=null==_?oe(h):_(h,l||"",d);Pn(i)?i.setAttribute(s,d,E,a):a?s.setAttributeNS(a,d,E):s.setAttribute(d,E)}}(s[11],_,h,i.value,a,l,d)}function qI(i,s,a,l,d,h){const _=h[s];if(null!==_){const E=l.setInput;for(let C=0;C<_.length;){const T=_[C++],R=_[C++],P=_[C++];null!==E?l.setInput(a,P,T,R):a[R]=P}}}function zI(i,s){let a=null,l=0;for(;l<s.length;){const d=s[l];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],s[l+1])),l+=2}else l+=2;else l+=4}return a}function KI(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function QE(i,s){const a=Hr(s,i);if(vu(a)){const l=a[1];80&a[2]?jl(l,a,l.template,a[8]):a[5]>0&&JE(a)}}function JE(i){for(let l=N(i);null!==l;l=q(l))for(let d=10;d<l.length;d++){const h=l[d];if(1024&h[2]){const _=h[1];jl(_,h,_.template,h[8])}else h[5]>0&&JE(h)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=Hr(a[l],i);vu(d)&&d[5]>0&&JE(d)}}function Xx(i,s){const a=Hr(s,i),l=a[1];(function(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),af(l,a,a[8])}function Hl(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function gg(i){for(;i;){i[2]|=64;const s=g(i);if(xi(i)&&!s)return i;i=s}return null}function ew(i,s,a){const l=s[10];l.begin&&l.begin();try{jl(i,s,i.template,a)}catch(d){throw ow(s,d),d}finally{l.end&&l.end()}}function ZI(i){!function(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=eg(a),d=l[1];L_(d,l,d.template,a)}}(i[8])}function nw(i,s,a){Fs(0),s(i,a)}const nR=(()=>Promise.resolve(null))();function rw(i){return i[7]||(i[7]=[])}function iw(i){return i.cleanup||(i.cleanup=[])}function ow(i,s){const a=i[9],l=a?a.get(Vl,null):null;l&&l.handleError(s)}function QI(i,s,a,l,d){for(let h=0;h<a.length;){const _=a[h++],E=a[h++],C=s[_],T=i.data[_];null!==T.setInput?T.setInput(C,d,l,E):C[E]=d}}function Xa(i,s,a){const l=mu(s,i);!function(i,s,a){Pn(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function mg(i,s,a){let l=a?i.styles:null,d=a?i.classes:null,h=0;if(null!==s)for(let _=0;_<s.length;_++){const E=s[_];"number"==typeof E?h=E:1==h?d=ne(d,E):2==h&&(l=ne(l,E+": "+s[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=d:i.classesWithoutHost=d}const Cd=new kn("INJECTOR",-1);class wn{get(s,a=zt){if(a===zt){const l=new Error(`NullInjectorError: No provider for ${J(s)}!`);throw l.name="NullInjectorError",l}return a}}const nn=new kn("Set Injector scope."),Wt={},Gl={};let Dn;function B_(){return void 0===Dn&&(Dn=new wn),Dn}function lf(i,s=null,a=null,l){return new XI(i,a,s||B_(),l)}class XI{constructor(s,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];a&&Fi(a,E=>this.processProvider(E,s,a)),Fi([s],E=>this.processInjectorType(E,[],h)),this.records.set(Cd,Wl(void 0,this));const _=this.records.get(nn);this.scope=null!=_?_.value:null,this.source=d||("object"==typeof s?null:J(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=zt,l=Ke.Default){this.assertNotDestroyed();const d=Ft(this),h=gr(void 0);try{if(!(l&Ke.SkipSelf)){let E=this.records.get(s);if(void 0===E){const C=("function"==typeof(i=s)||"object"==typeof i&&i instanceof kn)&&sn(s);E=C&&this.injectableDefInScope(C)?Wl(Hn(s),Wt):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(l&Ke.Self?B_():this.parent).get(s,a=l&Ke.Optional&&a===zt?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[Sr]=_[Sr]||[]).unshift(J(s)),d)throw _;return es(_,s,"R3InjectorError",this.source)}throw _}finally{gr(h),Ft(d)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,d)=>s.push(J(d))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(s,a,l){if(!(s=B(s)))return!1;let d=ro(s);const h=null==d&&s.ngModule||void 0,_=void 0===h?s:h,E=-1!==l.indexOf(_);if(void 0!==h&&(d=ro(h)),null==d)return!1;if(null!=d.imports&&!E){let R;l.push(_);try{Fi(d.imports,P=>{this.processInjectorType(P,a,l)&&(void 0===R&&(R=[]),R.push(P))})}finally{}if(void 0!==R)for(let P=0;P<R.length;P++){const{ngModule:F,providers:W}=R[P];Fi(W,Y=>this.processProvider(Y,F,W||kt))}}this.injectorDefTypes.add(_);const C=qo(_)||(()=>new _);this.records.set(_,Wl(C,Wt));const T=d.providers;if(null!=T&&!E){const R=s;Fi(T,P=>this.processProvider(P,R,T))}return void 0!==h&&void 0!==s.providers}processProvider(s,a,l){let d=cf(s=B(s))?s:B(s&&s.provide);const h=Ws(i=s)?Wl(void 0,i.useValue):Wl(eT(i),Wt);var i;if(cf(s)||!0!==s.multi)this.records.get(d);else{let _=this.records.get(d);_||(_=Wl(void 0,Wt,!0),_.factory=()=>Pu(_.multi),this.records.set(d,_)),d=s,_.multi.push(s)}this.records.set(d,h)}hydrate(s,a){return a.value===Wt&&(a.value=Gl,a.value=a.factory()),"object"==typeof a.value&&a.value&&null!==(i=a.value)&&"object"==typeof i&&"function"==typeof i.ngOnDestroy&&this.onDestroy.add(a.value),a.value;var i}injectableDefInScope(s){if(!s.providedIn)return!1;const a=B(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Hn(i){const s=sn(i),a=null!==s?s.factory:qo(i);if(null!==a)return a;if(i instanceof kn)throw new Error(`Token ${J(i)} is missing a \u0275prov definition.`);if(i instanceof Function)return function(i){const s=i.length;if(s>0){const l=function(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?");throw new Error(`Can't resolve all parameters for ${J(i)}: (${l.join(", ")}).`)}const a=function(i){const s=i&&(i[ar]||i[Me]);if(s){const a=function(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Error("unreachable")}function eT(i,s,a){let l;if(cf(i)){const d=B(i);return qo(d)||Hn(d)}if(Ws(i))l=()=>B(i.useValue);else if(function(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...Pu(i.deps||[]));else if(function(i){return!(!i||!i.useExisting)}(i))l=()=>Tn(B(i.useExisting));else{const d=B(i&&(i.useClass||i.provide));if(!function(i){return!!i.deps}(i))return qo(d)||Hn(d);l=()=>new d(...Pu(i.deps))}return l}function Wl(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Ws(i){return null!==i&&"object"==typeof i&&Do in i}function cf(i){return"function"==typeof i}const uw=function(i,s,a){return function(i,s=null,a=null,l){const d=lf(i,s,a,l);return d._resolveInjectorDefTypes(),d}({name:a},s,i,a)};let rr=(()=>{class i{static create(a,l){return Array.isArray(a)?uw(a,l,""):uw(a.providers,a.parent,a.name||"")}}return i.THROW_IF_NOT_FOUND=zt,i.NULL=new wn,i.\u0275prov=Dt({token:i,providedIn:"any",factory:()=>Tn(Cd)}),i.__NG_ELEMENT_ID__=-1,i})();function gw(i,s){ka(eg(i)[1],Rn())}function _w(i){let s=function(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let d;if(fs(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Error("Directives cannot inherit Components");d=s.\u0275dir}if(d){if(a){l.push(d);const _=i;_.inputs=H_(i.inputs),_.declaredInputs=H_(i.declaredInputs),_.outputs=H_(i.outputs);const E=d.hostBindings;E&&Eg(i,E);const C=d.viewQuery,T=d.contentQueries;if(C&&hT(i,C),T&&ff(i,T),me(i.inputs,d.inputs),me(i.declaredInputs,d.declaredInputs),me(i.outputs,d.outputs),fs(d)&&d.data.animation){const R=i.data;R.animation=(R.animation||[]).concat(d.data.animation)}}const h=d.features;if(h)for(let _=0;_<h.length;_++){const E=h[_];E&&E.ngInherit&&E(i),E===_w&&(a=!1)}}s=Object.getPrototypeOf(s)}!function(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const d=i[l];d.hostVars=s+=d.hostVars,d.hostAttrs=zc(d.hostAttrs,a=zc(a,d.hostAttrs))}}(l)}function H_(i){return i===un?{}:i===kt?[]:i}function hT(i,s){const a=i.viewQuery;i.viewQuery=a?(l,d)=>{s(l,d),a(l,d)}:s}function ff(i,s){const a=i.contentQueries;i.contentQueries=a?(l,d,h)=>{s(l,d,h),a(l,d,h)}:s}function Eg(i,s){const a=i.hostBindings;i.hostBindings=a?(l,d)=>{s(l,d),a(l,d)}:s}let zl=null;function pf(){if(!zl){const i=Et.Symbol;if(i&&i.iterator)zl=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(zl=l)}}}return zl}class ga{constructor(s){this.wrapped=s}static wrap(s){return new ga(s)}static unwrap(s){return ga.isWrapped(s)?s.wrapped:s}static isWrapped(s){return s instanceof ga}}function Cg(i){return!!Ew(i)&&(Array.isArray(i)||!(i instanceof Map)&&pf()in i)}function Ew(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Qr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Kl(i,s,a,l){const d=Qr(i,s,a);return Qr(i,s+1,l)||d}function ww(i,s,a,l){const d=De();return Qr(d,Ri(),s)&&(Ht(),Ja(On(),d,i,s,a,l)),ww}function pT(i,s,a,l,d,h,_,E){const C=De(),T=Ht(),R=i+20,P=T.firstCreatePass?function(i,s,a,l,d,h,_,E,C){const T=s.consts,R=rf(s,i,4,_||null,Qi(T,E));fg(s,a,R,Qi(T,C)),ka(s,R);const P=R.tViews=$l(2,R,l,d,h,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,R),P.queries=s.queries.embeddedTView(R)),R}(R,T,C,s,a,l,d,h,_):T.data[R];ri(P,!1);const F=C[11].createComment("");cg(T,C,F,P),kr(F,C),Hl(C,C[R]=KI(F,C,F,P)),du(P)&&bd(T,C,P),null!=_&&jE(C,P,E)}function Rg(i,s=Ke.Default){const a=De();return null===a?Tn(i,s):Ji(Rn(),a,B(i),s)}function ey(i,s,a){const l=De();return Qr(l,Ri(),s)&&Cs(Ht(),On(),l,i,s,l[11],a,!1),ey}function wf(i,s,a,l,d){const _=d?"class":"style";QI(i,a,s.inputs[_],_,l)}function ty(i,s,a,l){const d=De(),h=Ht(),_=20+i,E=d[11],C=d[_]=vr(E,s,bt.lFrame.currentNamespace),T=h.firstCreatePass?function(i,s,a,l,d,h,_){const E=s.consts,T=rf(s,i,2,d,Qi(E,h));return fg(s,a,T,Qi(E,_)),null!==T.attrs&&mg(T,T.attrs,!1),null!==T.mergedAttrs&&mg(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(_,h,d,0,s,a,l):h.data[_];ri(T,!0);const R=T.mergedAttrs;null!==R&&qc(E,C,R);const P=T.classes;null!==P&&xE(E,C,P);const F=T.styles;null!==F&&yI(E,C,F),64!=(64&T.flags)&&cg(h,d,C,T),0===bt.lFrame.elementDepthCount&&kr(C,d),bt.lFrame.elementDepthCount++,du(T)&&(bd(h,d,T),function(i,s,a){if(sl(s)){const d=s.directiveEnd;for(let h=s.directiveStart;h<d;h++){const _=i.data[h];_.contentQueries&&_.contentQueries(1,a[h],h)}}}(h,T,d)),null!==l&&jE(d,T)}function Rw(){let i=Rn();Qo()?bt.lFrame.isParent=!1:(i=i.parent,ri(i,!1));const s=i;bt.lFrame.elementDepthCount--;const a=Ht();a.firstCreatePass&&(ka(a,i),sl(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function(i){return 0!=(16&i.flags)}(s)&&wf(a,s,De(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function(i){return 0!=(32&i.flags)}(s)&&wf(a,s,De(),s.stylesWithoutHost,!1)}function Nw(i,s,a,l){ty(i,s,a,l),Rw()}function xT(){return De()}function Mw(i){return!!i&&"function"==typeof i.then}function RT(i){return!!i&&"function"==typeof i.subscribe}const ny=RT;function Pw(i,s,a,l){const d=De(),h=Ht(),_=Rn();return function(i,s,a,l,d,h,_,E){const C=du(l),R=i.firstCreatePass&&iw(i),P=s[8],F=rw(s);let W=!0;if(3&l.type||E){const ie=fn(l,s),ke=E?E(ie):ie,we=F.length,ct=E?It=>E(an(It[l.index])):l.index;if(Pn(a)){let It=null;if(!E&&C&&(It=function(i,s,a,l){const d=i.cleanup;if(null!=d)for(let h=0;h<d.length-1;h+=2){const _=d[h];if(_===a&&d[h+1]===l){const E=s[7],C=d[h+2];return E.length>C?E[C]:null}"string"==typeof _&&(h+=2)}return null}(i,s,d,l.index)),null!==It)(It.__ngLastListenerFn__||It).__ngNextListenerFn__=h,It.__ngLastListenerFn__=h,W=!1;else{h=bf(l,s,P,h,!1);const yt=a.listen(ke,d,h);F.push(h,yt),R&&R.push(d,ct,we,we+1)}}else h=bf(l,s,P,h,!0),ke.addEventListener(d,h,_),F.push(h),R&&R.push(d,ct,we,_)}else h=bf(l,s,P,h,!1);const Y=l.outputs;let de;if(W&&null!==Y&&(de=Y[d])){const ie=de.length;if(ie)for(let ke=0;ke<ie;ke+=2){const or=s[de[ke]][de[ke+1]].subscribe(h),Xr=F.length;F.push(h,or),R&&R.push(d,l.index,Xr,-(Xr+1))}}}(h,d,d[11],_,i,s,!!a,l),Pw}function kw(i,s,a,l){try{return!1!==a(l)}catch(d){return ow(i,d),!1}}function bf(i,s,a,l,d){return function h(_){if(_===Function)return l;const E=2&i.flags?Hr(i.index,s):s;0==(32&s[2])&&gg(E);let C=kw(s,0,l,_),T=h.__ngNextListenerFn__;for(;T;)C=kw(s,0,T,_)&&C,T=T.__ngNextListenerFn__;return d&&!1===C&&(_.preventDefault(),_.returnValue=!1),C}}function Fw(i=1){return function(i){return(bt.lFrame.contextLView=function(i,s){for(;i>0;)s=s[15],i--;return s}(i,bt.lFrame.contextLView))[8]}(i)}function kT(i,s,a,l,d){const h=i[a+1],_=null===s;let E=l?la(h):Uu(h),C=!1;for(;0!==E&&(!1===C||_);){const R=i[E+1];FT(i[E],s)&&(C=!0,i[E+1]=l?OE(R):O_(R)),E=l?la(R):Uu(R)}C&&(i[a+1]=l?O_(h):OE(h))}function FT(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Io(i,s)>=0}function oy(i,s){return function(i,s,a,l){const d=De(),h=Ht(),_=ii(2);h.firstUpdatePass&&function(i,s,a,l){const d=i.data;if(null===d[a+1]){const h=d[qr()],_=function(i,s){return s>=i.expandoStartIndex}(i,a);(function(i,s){return 0!=(i.flags&(s?16:32))})(h,l)&&null===s&&!_&&(s=!1),s=function(i,s,a,l){const d=function(i){const s=bt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let h=l?s.residualClasses:s.residualStyles;if(null===d)0===(l?s.classBindings:s.styleBindings)&&(a=Tf(a=Ww(null,i,s,a,l),s.attrs,l),h=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==d)if(a=Ww(d,i,s,a,l),null===h){let C=function(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==Uu(l))return i[la(l)]}(i,s,l);void 0!==C&&Array.isArray(C)&&(C=Ww(null,i,s,C[1],l),C=Tf(C,s.attrs,l),function(i,s,a,l){i[la(a?s.classBindings:s.styleBindings)]=l}(i,s,l,C))}else h=function(i,s,a){let l;const d=s.directiveEnd;for(let h=1+s.directiveStylingLast;h<d;h++)l=Tf(l,i[h].hostAttrs,a);return Tf(l,s.attrs,a)}(i,s,l)}return void 0!==h&&(l?s.residualClasses=h:s.residualStyles=h),a}(d,h,s,l),function(i,s,a,l,d,h){let _=h?s.classBindings:s.styleBindings,E=la(_),C=Uu(_);i[l]=a;let R,T=!1;if(Array.isArray(a)){const P=a;R=P[1],(null===R||Io(P,R)>0)&&(T=!0)}else R=a;if(d)if(0!==C){const F=la(i[E+1]);i[l+1]=M_(F,E),0!==F&&(i[F+1]=PE(i[F+1],l)),i[E+1]=function(i,s){return 131071&i|s<<17}(i[E+1],l)}else i[l+1]=M_(E,0),0!==E&&(i[E+1]=PE(i[E+1],l)),E=l;else i[l+1]=M_(C,0),0===E?E=l:i[C+1]=PE(i[C+1],l),C=l;T&&(i[l+1]=O_(i[l+1])),kT(i,R,l,!0),kT(i,R,l,!1),function(i,s,a,l,d){const h=d?i.residualClasses:i.residualStyles;null!=h&&"string"==typeof s&&Io(h,s)>=0&&(a[l+1]=OE(a[l+1]))}(s,R,i,l,h),_=M_(E,C),h?s.classBindings=_:s.styleBindings=_}(d,h,s,a,_,l)}}(h,i,_,l),s!==Lt&&Qr(d,_,s)&&function(i,s,a,l,d,h,_,E){if(!(3&s.type))return;const C=i.data,T=C[E+1];Df(function(i){return 1==(1&i)}(T)?ly(C,s,a,d,Uu(T),_):void 0)||(Df(h)||function(i){return 2==(2&i)}(T)&&(h=ly(C,null,a,d,E,_)),function(i,s,a,l,d){const h=Pn(i);if(s)d?h?i.addClass(a,l):a.classList.add(l):h?i.removeClass(a,l):a.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:xo.DashCase;if(null==d)h?i.removeStyle(a,l,_):a.style.removeProperty(l);else{const E="string"==typeof d&&d.endsWith("!important");E&&(d=d.slice(0,-10),_|=xo.Important),h?i.setStyle(a,l,d,_):a.style.setProperty(l,d,E?"important":"")}}}(l,_,mu(qr(),a),d,h))}(h,h.data[qr()],d,d[11],i,d[_+1]=function(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=J(ia(i)))),i}(s,a),l,_)}(i,s,null,!0),oy}function Ww(i,s,a,l,d){let h=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(h=s[E],l=Tf(l,h.hostAttrs,d),h!==i);)E++;return null!==i&&(a.directiveStylingLast=E),l}function Tf(i,s,a){const l=a?1:2;let d=-1;if(null!==s)for(let h=0;h<s.length;h++){const _=s[h];"number"==typeof _?d=_:d===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),$n(i,_,!!a||s[++h]))}return void 0===i?null:i}function ly(i,s,a,l,d,h){const _=null===s;let E;for(;d>0;){const C=i[d],T=Array.isArray(C),R=T?C[1]:C,P=null===R;let F=a[d+1];F===Lt&&(F=P?kt:void 0);let W=P?Kr(F,l):R===l?F:void 0;if(T&&!Df(W)&&(W=Kr(C,l)),Df(W)&&(E=W,_))return E;const Y=i[d+1];d=_?la(Y):Uu(Y)}if(null!==s){let C=h?s.residualClasses:s.residualStyles;null!=C&&(E=Kr(C,l))}return E}function Df(i){return void 0!==i}function dy(i,s=""){const a=De(),l=Ht(),d=i+20,h=l.firstCreatePass?rf(l,d,1,s,null):l.data[d],_=a[d]=function(i,s){return Pn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);cg(l,a,_,h),ri(h,!1)}function hy(i){return fy("",i,""),hy}function fy(i,s,a){const l=De(),d=function(i,s,a,l){return Qr(i,Ri(),a)?s+oe(a)+l:Lt}(l,i,s,a);return d!==Lt&&Xa(l,qr(),d),fy}function Sf(i,s,a,l,d){const h=De(),_=function(i,s,a,l,d,h){const E=Kl(i,Wr(),a,d);return ii(2),E?s+oe(a)+l+oe(d)+h:Lt}(h,i,s,a,l,d);return _!==Lt&&Xa(h,qr(),_),Sf}function _y(i,s,a){const l=De();return Qr(l,Ri(),s)&&Cs(Ht(),On(),l,i,s,l[11],a,!0),_y}const Md=void 0;var yy=["en",[["a","p"],["AM","PM"],Md],[["AM","PM"],Md,Md],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Md,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Md,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Md,"{1} 'at' {0}",Md],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(i){const s=Math.floor(Math.abs(i)),a=i.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let Rf={};function t0(i){const s=function(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=n0(s);if(a)return a;const l=s.split("-")[0];if(a=n0(l),a)return a;if("en"===l)return yy;throw new Error(`Missing locale data for the locale "${i}".`)}function nD(i){return t0(i)[vt.PluralCase]}function n0(i){return i in Rf||(Rf[i]=Et.ng&&Et.ng.common&&Et.ng.common.locales&&Et.ng.common.locales[i]),Rf[i]}var vt=(()=>((vt=vt||{})[vt.LocaleId=0]="LocaleId",vt[vt.DayPeriodsFormat=1]="DayPeriodsFormat",vt[vt.DayPeriodsStandalone=2]="DayPeriodsStandalone",vt[vt.DaysFormat=3]="DaysFormat",vt[vt.DaysStandalone=4]="DaysStandalone",vt[vt.MonthsFormat=5]="MonthsFormat",vt[vt.MonthsStandalone=6]="MonthsStandalone",vt[vt.Eras=7]="Eras",vt[vt.FirstDayOfWeek=8]="FirstDayOfWeek",vt[vt.WeekendRange=9]="WeekendRange",vt[vt.DateFormat=10]="DateFormat",vt[vt.TimeFormat=11]="TimeFormat",vt[vt.DateTimeFormat=12]="DateTimeFormat",vt[vt.NumberSymbols=13]="NumberSymbols",vt[vt.NumberFormats=14]="NumberFormats",vt[vt.CurrencyCode=15]="CurrencyCode",vt[vt.CurrencySymbol=16]="CurrencySymbol",vt[vt.CurrencyName=17]="CurrencyName",vt[vt.Currencies=18]="Currencies",vt[vt.Directionality=19]="Directionality",vt[vt.PluralCase=20]="PluralCase",vt[vt.ExtraData=21]="ExtraData",vt))();const vy="en-US";let iD=vy;function ic(i){Xt(i,"Expected localeId to be defined"),"string"==typeof i&&(iD=i.toLowerCase().replace(/_/g,"-"))}function b0(i,s,a,l,d){if(i=B(i),Array.isArray(i))for(let h=0;h<i.length;h++)b0(i[h],s,a,l,d);else{const h=Ht(),_=De();let E=cf(i)?i:B(i.provide),C=eT(i);const T=Rn(),R=1048575&T.providerIndexes,P=T.directiveStart,F=T.providerIndexes>>20;if(cf(i)||!i.multi){const W=new ea(C,d,Rg),Y=I0(E,s,d?R:R+F,P);-1===Y?(Mi(Ls(T,_),h,E),C0(h,i,s.length),s.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(W),_.push(W)):(a[Y]=W,_[Y]=W)}else{const W=I0(E,s,R+F,P),Y=I0(E,s,R,R+F),de=W>=0&&a[W],ie=Y>=0&&a[Y];if(d&&!ie||!d&&!de){Mi(Ls(T,_),h,E);const ke=function(i,s,a,l,d){const h=new ea(i,a,Rg);return h.multi=[],h.index=s,h.componentProviders=0,CD(h,d,l&&!a),h}(d?b1:w1,a.length,d,l,C);!d&&ie&&(a[Y].providerFactory=ke),C0(h,i,s.length,0),s.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(ke),_.push(ke)}else C0(h,i,W>-1?W:Y,CD(a[d?Y:W],C,!d&&l));!d&&l&&ie&&a[Y].componentProviders++}}}function C0(i,s,a,l){const d=cf(s);if(d||function(i){return!!i.useClass}(s)){const _=(s.useClass||s).prototype.ngOnDestroy;if(_){const E=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const C=E.indexOf(a);-1===C?E.push(a,[l,_]):E[C+1].push(l,_)}else E.push(a,_)}}}function CD(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function I0(i,s,a,l){for(let d=a;d<l;d++)if(s[d]===i)return d;return-1}function w1(i,s,a,l){return T0(this.multi,[])}function b1(i,s,a,l){const d=this.multi;let h;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=jn(a,a[1],this.providerFactory.index,l);h=E.slice(0,_),T0(d,h);for(let C=_;C<E.length;C++)h.push(E[C])}else h=[],T0(d,h);return h}function T0(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function ID(i,s=[]){return a=>{a.providersResolver=(l,d)=>function(i,s,a){const l=Ht();if(l.firstCreatePass){const d=fs(i);b0(a,l.data,l.blueprint,d,!0),b0(s,l.data,l.blueprint,d,!1)}}(l,d?d(i):i,s)}}class DD{}const AD="ngComponent";class uc{resolveComponentFactory(s){throw function(i){const s=Error(`No component factory found for ${J(i)}. Did you add it to @NgModule.entryComponents?`);return s[AD]=i,s}(s)}}let br=(()=>{class i{}return i.NULL=new uc,i})();function by(...i){}function Of(i,s){return new nu(fn(i,s))}const IN=function(){return Of(Rn(),De())};let nu=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=IN,i})();function xD(i){return i instanceof nu?i.nativeElement:i}class $g{}let TN=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>MD(),i})();const MD=function(){const i=De(),a=Hr(Rn().index,i);return function(i){return i[11]}(Ai(a)?a:i)};let PD=(()=>{class i{}return i.\u0275prov=Dt({token:i,providedIn:"root",factory:()=>null}),i})();class OD{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Hg=new OD("12.2.16");class SN{constructor(){}supports(s){return Cg(s)}create(s){return new AN(s)}}const T1=(i,s)=>s;class AN{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||T1}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,d=0,h=null;for(;a||l;){const _=!l||a&&a.currentIndex<RN(l,d,h)?a:l,E=RN(_,d,h),C=_.currentIndex;if(_===l)d--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)d++;else{h||(h=[]);const T=E-d,R=C-d;if(T!=R){for(let F=0;F<T;F++){const W=F<h.length?h[F]:h[F]=0,Y=W+F;R<=Y&&Y<T&&(h[F]=W+1)}h[_.previousIndex]=R-T}}E!==C&&s(_,E,C)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Cg(s))throw new Error(`Error trying to diff '${J(s)}'. Only arrays and iterables are allowed`);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,h,_,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)h=s[E],_=this._trackByFn(E,h),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,h,_,E)),Object.is(a.item,h)||this._addIdentityChange(a,h)):(a=this._mismatch(a,h,_,E),l=!0),a=a._next}else d=0,function(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[pf()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,E=>{_=this._trackByFn(d,E),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,E,_,d)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,d){let h;return null===s?h=this._itTail:(h=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,h,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,h,d)):s=this._addAfter(new S1(a,l),h,d),s}_verifyReinsertion(s,a,l,d){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==h?s=this._reinsertAfter(h,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,h=s._nextRemoved;return null===d?this._removalsHead=h:d._nextRemoved=h,null===h?this._removalsTail=d:h._prevRemoved=d,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new xN),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new xN),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class S1{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class A1{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class xN{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new A1,this.map.set(a,l)),l.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function RN(i,s,a){const l=i.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+s+d}class NN{constructor(){}supports(s){return s instanceof Map||Ew(s)}create(){return new x1}}class x1{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Ew(s)))throw new Error(`Error trying to diff '${J(s)}'. Only maps and objects are allowed`)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const h=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,h)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const h=d._prev,_=d._next;return h&&(h._next=_),_&&(_._prev=h),d._next=null,d._prev=null,d}const l=new R1(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class R1{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function MN(){return new Gg([new SN])}let Gg=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||MN()),deps:[[i,new Zr,new ra]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Error(`Cannot find a differ supporting object '${a}' of type '${function(i){return i.name||typeof i}(a)}'`)}}return i.\u0275prov=Dt({token:i,providedIn:"root",factory:MN}),i})();function kD(){return new Rr([new NN])}let Rr=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||kD()),deps:[[i,new Zr,new ra]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(l)return l;throw new Error(`Cannot find a differ supporting object '${a}'`)}}return i.\u0275prov=Dt({token:i,providedIn:"root",factory:kD}),i})();function Ts(i,s,a,l,d=!1){for(;null!==a;){const h=s[a.index];if(null!==h&&l.push(an(h)),mn(h))for(let E=10;E<h.length;E++){const C=h[E],T=C[1].firstChild;null!==T&&Ts(C[1],C,T,l)}const _=a.type;if(8&_)Ts(i,s,a.child,l);else if(32&_){const E=Yh(a,s);let C;for(;C=E();)l.push(C)}else if(16&_){const E=DE(s,a);if(Array.isArray(E))l.push(...E);else{const C=g(s[16]);Ts(C[1],C,E,l,!0)}}a=d?a.projectionNext:a.next}return l}class lc{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Ts(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(mn(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(gd(s,l),wo(a,l))}this._attachedToViewContainer=!1}Jh(this._lView[1],this._lView)}onDestroy(s){GE(this._lView[1],this._lView,null,s)}markForCheck(){gg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ew(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(i,s,a){Ma(!0);try{ew(i,s,a)}finally{Ma(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var s;this._appRef=null,_d(this._lView[1],s=this._lView,s[11],2,null,null)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=s}}class D0 extends lc{constructor(s){super(s),this._view=s}detectChanges(){ZI(this._view)}checkNoChanges(){!function(i){Ma(!0);try{ZI(i)}finally{Ma(!1)}}(this._view)}get context(){return null}}const kN=function(i){return function(i,s,a){if(ol(i)&&!a){const l=Hr(i.index,s);return new lc(l,l)}return 47&i.type?new lc(s[16],s):null}(Rn(),De(),16==(16&i))};let FD=(()=>{class i{}return i.__NG_ELEMENT_ID__=kN,i})();const VN=[new NN],ss=new Gg([new SN]),Ty=new Rr(VN),S0=function(){return Dy(Rn(),De())};let cc=(()=>{class i{}return i.__NG_ELEMENT_ID__=S0,i})();const A0=cc,x0=class extends A0{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=hg(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(l[19]=h.createEmbeddedView(a)),af(a,l,s),new lc(l)}};function Dy(i,s){return 4&i.type?new x0(s,i,Of(i,s)):null}class kd{}class VD{}const UD=function(){return N0(Rn(),De())};let Fd=(()=>{class i{}return i.__NG_ELEMENT_ID__=UD,i})();const $N=Fd,jD=class extends $N{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return Of(this._hostTNode,this._hostLView)}get injector(){return new vo(this._hostTNode,this._hostLView)}get parentInjector(){const s=at(this._hostTNode,this._hostLView);if(Au(s)){const a=_o(s,this._hostLView),l=Fa(s);return new vo(a[1].data[l+8],a)}return new vo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=$D(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const d=s.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(s,a,l,d,h){const _=l||this.parentInjector;if(!h&&null==s.ngModule&&_){const C=_.get(kd,null);C&&(h=C)}const E=s.create(_,d,void 0,h);return this.insert(E.hostView,a),E}insert(s,a){const l=s._lView,d=l[1];if(mn(l[3])){const R=this.indexOf(s);if(-1!==R)this.detach(R);else{const P=l[3],F=new jD(P,P[6],P[3]);F.detach(F.indexOf(s))}}const h=this._adjustIndex(a),_=this._lContainer;!function(i,s,a,l){const d=10+l,h=a.length;l>0&&(a[d-1][4]=s),l<h-10?(s[4]=a[d],Es(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=128}(d,l,_,h);const E=SE(h,_),C=l[11],T=D_(C,_[7]);return null!==T&&function(i,s,a,l,d,h){l[0]=d,l[6]=s,_d(i,l,a,1,d,h)}(d,_[6],C,l,T,E),s.attachToViewContainerRef(),Es(R0(_),h,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=$D(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=gd(this._lContainer,a);l&&(wo(R0(this._lContainer),a),Jh(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=gd(this._lContainer,a);return l&&null!=wo(R0(this._lContainer),a)?new lc(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function $D(i){return i[8]}function R0(i){return i[8]||(i[8]=[])}function N0(i,s){let a;const l=s[i.index];if(mn(l))a=l;else{let d;if(8&i.type)d=an(l);else{const h=s[11];d=h.createComment("");const _=fn(i,s);Ul(h,D_(h,_),d,function(i,s){return Pn(i)?i.nextSibling(s):s.nextSibling}(h,_),!1)}s[i.index]=a=KI(l,s,d,i),Hl(s,a)}return new jD(a,i,s)}const Uo={};class nm extends br{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=lt(s);return new hS(a,this.ngModule)}}function Zu(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}const Bi=new kn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Kh});class hS extends DD{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=s.selectors.map(Fx).join(","),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Zu(this.componentDef.inputs)}get outputs(){return Zu(this.componentDef.outputs)}create(s,a,l,d){const h=(d=d||this.ngModule)?function(i,s){return{get:(a,l,d)=>{const h=i.get(a,Uo,d);return h!==Uo||l===Uo?h:s.get(a,l,d)}}}(s,d.injector):s,_=h.get($g,Ko),E=h.get(PD,null),C=_.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",R=l?function(i,s,a){if(Pn(i))return i.selectRootElement(s,a===He.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(C,l,this.componentDef.encapsulation):vr(_.createRenderer(null,this.componentDef),T,function(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(T)),P=this.componentDef.onPush?576:528,F=function(i,s){return{components:[],scheduler:i||Kh,clean:nR,playerHandler:s||null,flags:0}}(),W=$l(0,null,null,1,0,null,null,null,null,null),Y=hg(null,W,F,P,null,null,_,C,E,h);let de,ie;gl(Y);try{const ke=function(i,s,a,l,d,h){const _=a[1];a[20]=i;const C=rf(_,20,2,"#host",null),T=C.mergedAttrs=s.hostAttrs;null!==T&&(mg(C,T,!0),null!==i&&(qc(d,i,T),null!==C.classes&&xE(d,i,C.classes),null!==C.styles&&yI(d,i,C.styles)));const R=l.createRenderer(i,s),P=hg(a,OI(s),null,s.onPush?64:16,a[20],C,l,R,h||null,null);return _.firstCreatePass&&(Mi(Ls(C,a),_,s.type),ZE(_,C),GI(C,a.length,1)),Hl(a,P),a[20]=P}(R,this.componentDef,Y,_,C);if(R)if(l)qc(C,R,["ng-version",Hg.full]);else{const{attrs:we,classes:ct}=function(i){const s=[],a=[];let l=1,d=2;for(;l<i.length;){let h=i[l];if("string"==typeof h)2===d?""!==h&&s.push(h,i[++l]):8===d&&a.push(h);else{if(!ua(d))break;d=h}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);we&&qc(C,R,we),ct&&ct.length>0&&xE(C,R,ct.join(" "))}if(ie=_u(W,20),void 0!==a){const we=ie.projection=[];for(let ct=0;ct<this.ngContentSelectors.length;ct++){const It=a[ct];we.push(null!=It?Array.from(It):null)}}de=function(i,s,a,l,d){const h=a[1],_=function(i,s,a){const l=Rn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),WI(i,l,s,sf(i,s,1,null),a));const d=jn(s,i,l.directiveStart,l);kr(d,s);const h=fn(l,s);return h&&kr(h,s),d}(h,a,s);if(l.components.push(_),i[8]=_,d&&d.forEach(C=>C(_,s)),s.contentQueries){const C=Rn();s.contentQueries(1,_,C.directiveStart)}const E=Rn();return!h.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(go(E.index),UI(a[1],E,0,E.directiveStart,E.directiveEnd,s),jI(s,_)),_}(ke,this.componentDef,Y,F,[gw]),af(W,Y,null)}finally{Du()}return new fS(this.componentType,de,Of(ie,Y),Y,ie)}}class fS extends class{}{constructor(s,a,l,d,h){super(),this.location=l,this._rootLView=d,this._tNode=h,this.instance=a,this.hostView=this.changeDetectorRef=new D0(d),this.componentType=s}get injector(){return new vo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}const Bd=new Map;class mS extends kd{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new nm(this);const l=Pr(s),d=s[mt]||null;d&&ic(d),this._bootstrapComponents=Gs(l.bootstrap),this._r3Injector=lf(s,a,[{provide:kd,useValue:this},{provide:br,useValue:this.componentFactoryResolver}],J(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=rr.THROW_IF_NOT_FOUND,l=Ke.Default){return s===rr||s===kd||s===Cd?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class ky extends VD{constructor(s){super(),this.moduleType=s,null!==Pr(s)&&function(i){const s=new Set;!function a(l){const d=Pr(l,!0),h=d.id;null!==h&&(function(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${J(s)} vs ${J(s.name)}`)}(h,Bd.get(h),l),Bd.set(h,l));const _=Gs(d.imports);for(const E of _)s.has(E)||(s.add(E),a(E))}(i)}(s)}create(s){return new mS(this.moduleType,s)}}function rm(i,s,a,l,d,h,_){const E=s+a;return Kl(i,E,d,h)?function(i,s,a){return i[s]=a}(i,E+2,_?l.call(_,d,h):l(d,h)):function(i,s){const a=i[s];return a===Lt?void 0:a}(i,E+2)}function ji(i,s){const a=Ht();let l;const d=i+20;a.firstCreatePass?(l=function(i,s){if(s)for(let a=s.length-1;a>=0;a--){const l=s[a];if(i===l.name)return l}throw new fe("302",`The pipe '${i}' could not be found!`)}(s,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,l.onDestroy)):l=a.data[d];const h=l.factory||(l.factory=qo(l.type)),_=gr(Rg);try{const E=La(!1),C=h();return La(E),function(i,s,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=l}(a,De(),d,C),C}finally{gr(_)}}function mM(i,s,a,l){const d=i+20,h=De(),_=function(i,s){return i[s]}(h,d);return function(i,s){ga.isWrapped(s)&&(s=ga.unwrap(s),i[Wr()]=Lt);return s}(h,function(i,s){return i[1].data[s].pure}(h,d)?rm(h,function(){const i=bt.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}(),s,_.transform,a,l,_):_.transform(a,l))}function im(i){return s=>{setTimeout(i,void 0,s)}}const ru=class extends m.xQ{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var d,h,_;let E=s,C=a||(()=>null),T=l;if(s&&"object"==typeof s){const P=s;E=null===(d=P.next)||void 0===d?void 0:d.bind(P),C=null===(h=P.error)||void 0===h?void 0:h.bind(P),T=null===(_=P.complete)||void 0===_?void 0:_.bind(P)}this.__isAsync&&(C=im(C),E&&(E=im(E)),T&&(T=im(T)));const R=super.subscribe({next:E,error:C,complete:T});return s instanceof X.w&&s.add(R),R}};function J1(){return this._results[pf()]()}class tb{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=pf(),l=tb.prototype;l[a]||(l[a]=J1)}get changes(){return this._changes||(this._changes=new ru)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const d=ki(s);(this._changesDetected=!function(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let d=i[l],h=s[l];if(a&&(d=a(d),h=a(h)),h!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class DS{constructor(s){this.queryList=s,this.matches=null}clone(){return new DS(this.queryList)}setDirty(){this.queryList.setDirty()}}class nb{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let h=0;h<l;h++){const _=a.getByIndex(h);d.push(this.queries[_.indexInDeclarationView].clone())}return new nb(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==ab(s,a).matches&&this.queries[a].setDirty()}}class sm{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class $d{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,h=this.getByIndex(l).embeddedTView(s,d);h&&(h.indexInDeclarationView=l,null!==a?a.push(h):a=[h])}return null!==a?new $d(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Bf{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Bf(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const h=l[d];this.matchTNodeWithReadOption(s,a,Ly(a,h)),this.matchTNodeWithReadOption(s,a,El(a,s,h,!1,!1))}else l===cc?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,El(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===nu||d===Fd||d===cc&&4&a.type)this.addMatch(a.index,-2);else{const h=El(a,s,d,!1,!1);null!==h&&this.addMatch(a.index,h)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function Ly(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function rb(i,s,a,l){return-1===a?function(i,s){return 11&i.type?Of(i,s):4&i.type?Dy(i,s):null}(s,i):-2===a?function(i,s,a){return a===nu?Of(s,i):a===cc?Dy(s,i):a===Fd?N0(s,i):void 0}(i,s,l):jn(i,i[1],a,s)}function SS(i,s,a,l){const d=s[19].queries[l];if(null===d.matches){const h=i.data,_=a.matches,E=[];for(let C=0;C<_.length;C+=2){const T=_[C];E.push(T<0?null:rb(s,h[T],_[C+1],a.metadata.read))}d.matches=E}return d.matches}function ib(i,s,a,l){const d=i.queries.getByIndex(a),h=d.matches;if(null!==h){const _=SS(i,s,d,a);for(let E=0;E<h.length;E+=2){const C=h[E];if(C>0)l.push(_[E/2]);else{const T=h[E+1],R=s[-C];for(let P=10;P<R.length;P++){const F=R[P];F[17]===F[3]&&ib(F[1],F,T,l)}if(null!==R[9]){const P=R[9];for(let F=0;F<P.length;F++){const W=P[F];ib(W[1],W,T,l)}}}}}return l}function sb(i){const s=De(),a=Ht(),l=wh();Fs(l+1);const d=ab(a,l);if(i.dirty&&yu(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const h=d.crossesNgTemplate?ib(a,s,l,[]):SS(a,s,d,l);i.reset(h,xD),i.notifyOnChanges()}return!0}return!1}function ob(i,s,a,l){const d=Ht();if(d.firstCreatePass){const h=Rn();(function(i,s,a){null===i.queries&&(i.queries=new $d),i.queries.track(new Bf(s,a))})(d,new sm(s,a,l),h.index),function(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function(i,s,a){const l=new tb(4==(4&a));GE(i,s,l,l.destroy),null===s[19]&&(s[19]=new nb),s[19].queries.push(new DS(l))}(d,De(),a)}function AS(){return i=De(),s=wh(),i[19].queries[s].queryList;var i,s}function ab(i,s){return i.queries.getByIndex(s)}const Cb=new kn("Application Initializer");let Hd=(()=>{class i{constructor(a){this.appInits=a,this.resolve=by,this.reject=by,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const h=this.appInits[d]();if(Mw(h))a.push(h);else if(ny(h)){const _=new Promise((E,C)=>{h.subscribe({complete:E,error:C})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Tn(Cb,8))},i.\u0275prov=Dt({token:i,factory:i.\u0275fac}),i})();const BM=new kn("AppId"),mF={provide:BM,useFactory:function(){return`${Yy()}${Yy()}${Yy()}`},deps:[]};function Yy(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ZS=new kn("Platform Initializer"),jM=new kn("Platform ID"),$M=new kn("appBootstrapListener");let HM=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Dt({token:i,factory:i.\u0275fac}),i})();const Qy=new kn("LocaleId"),YS=new kn("DefaultCurrencyCode");class WM{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}const Ib=function(i){return new ky(i)},qM=Ib,Xe=function(i){return Promise.resolve(Ib(i))},Ot=function(i){const s=Ib(i),l=Gs(Pr(i).declarations).reduce((d,h)=>{const _=lt(h);return _&&d.push(new hS(_)),d},[]);return new WM(s,l)},Xy=Ot,zM=function(i){return Promise.resolve(Ot(i))};let Gd=(()=>{class i{constructor(){this.compileModuleSync=qM,this.compileModuleAsync=Xe,this.compileModuleAndAllComponentsSync=Xy,this.compileModuleAndAllComponentsAsync=zM}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Dt({token:i,factory:i.\u0275fac}),i})();const YM=(()=>Promise.resolve(0))();function Jr(i){"undefined"==typeof Zone?YM.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Sn{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ru(!1),this.onMicrotaskEmpty=new ru(!1),this.onStable=new ru(!1),this.onError=new ru(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function(){let i=Et.requestAnimationFrame,s=Et.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function(i){const s=()=>{!function(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Et,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,nv(i),i.isCheckStableRunning=!0,Tb(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),nv(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,h,_,E)=>{try{return tA(i),a.invokeTask(d,h,_,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||i.shouldCoalesceRunChangeDetection)&&s(),Db(i)}},onInvoke:(a,l,d,h,_,E,C)=>{try{return tA(i),a.invoke(d,h,_,E,C)}finally{i.shouldCoalesceRunChangeDetection&&s(),Db(i)}},onHasTask:(a,l,d,h)=>{a.hasTask(d,h),l===d&&("microTask"==h.change?(i._hasPendingMicrotasks=h.microTask,nv(i),Tb(i)):"macroTask"==h.change&&(i.hasPendingMacrotasks=h.macroTask))},onHandleError:(a,l,d,h)=>(a.handleError(d,h),i.runOutsideAngular(()=>i.onError.emit(h)),!1)})}(d)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Sn.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Sn.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,d){const h=this._inner,_=h.scheduleEventTask("NgZoneEvent: "+d,s,_c,by,by);try{return h.runTask(_,a,l)}finally{h.cancelTask(_)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const _c={};function Tb(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function nv(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function tA(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Db(i){i._nesting--,Tb(i)}class Sb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ru,this.onMicrotaskEmpty=new ru,this.onStable=new ru,this.onError=new ru}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,d){return s.apply(a,l)}}let am=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Sn.assertNotInAngularZone(),Jr(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Jr(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let h=-1;l&&l>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==h),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:h,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(Tn(Sn))},i.\u0275prov=Dt({token:i,factory:i.\u0275fac}),i})(),Ab=(()=>{class i{constructor(){this._applications=new Map,Ci.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Ci.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Dt({token:i,factory:i.\u0275fac}),i})();class as{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function xb(i){Ci=i}let Ci=new as,Rb=!0,Nb=!1;function um(){return Nb=!0,Rb}function nA(){if(Nb)throw new Error("Cannot enable prod mode after platform setup.");Rb=!1}let jo;const Pb=new kn("AllowMultipleToken");class rv{constructor(s,a){this.name=s,this.token=a}}function iv(i,s,a=[]){const l=`Platform: ${s}`,d=new kn(l);return(h=[])=>{let _=oA();if(!_||_.injector.get(Pb,!1))if(i)i(a.concat(h).concat({provide:d,useValue:!0}));else{const E=a.concat(h).concat({provide:d,useValue:!0},{provide:nn,useValue:"platform"});!function(i){if(jo&&!jo.destroyed&&!jo.injector.get(Pb,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");jo=i.get(sv);const s=i.get(ZS,null);s&&s.forEach(a=>a())}(rr.create({providers:E,name:l}))}return function(i){const s=oA();if(!s)throw new Error("No platform exists!");if(!s.injector.get(i,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return s}(d)}}function oA(){return jo&&!jo.destroyed?jo:null}let sv=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const E=function(i,s){let a;return a="noop"===i?new Sb:("zone.js"===i?void 0:i)||new Sn({enableLongStackTrace:um(),shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),C=[{provide:Sn,useValue:E}];return E.run(()=>{const T=rr.create({providers:C,parent:this.injector,name:a.moduleType.name}),R=a.create(T),P=R.injector.get(Vl,null);if(!P)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return E.runOutsideAngular(()=>{const F=E.onError.subscribe({next:W=>{P.handleError(W)}});R.onDestroy(()=>{Wd(this._modules,R),F.unsubscribe()})}),function(i,s,a){try{const l=a();return Mw(l)?l.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(P,E,()=>{const F=R.injector.get(Hd);return F.runInitializers(),F.donePromise.then(()=>(ic(R.injector.get(Qy,vy)||vy),this._moduleDoBootstrap(R),R))})})}bootstrapModule(a,l=[]){const d=uA({},l);return function(i,s,a){const l=new ky(a);return Promise.resolve(l)}(0,0,a).then(h=>this.bootstrapModuleFactory(h,d))}_moduleDoBootstrap(a){const l=a.injector.get(Fr);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Error(`The module ${J(a.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Tn(rr))},i.\u0275prov=Dt({token:i,factory:i.\u0275fac}),i})();function uA(i,s){return Array.isArray(s)?s.reduce(uA,i):Object.assign(Object.assign({},i),s)}let Fr=(()=>{class i{constructor(a,l,d,h,_){this._zone=a,this._injector=l,this._exceptionHandler=d,this._componentFactoryResolver=h,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new L.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),C=new L.y(T=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{Sn.assertNotInAngularZone(),Jr(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const P=this._zone.onUnstable.subscribe(()=>{Sn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{R.unsubscribe(),P.unsubscribe()}});this.isStable=(0,ae.T)(E,C.pipe((0,re.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let d;d=a instanceof DD?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(d.componentType);const h=function(i){return i.isBoundToModule}(d)?void 0:this._injector.get(kd),E=d.create(rr.NULL,[],l||d.selector,h),C=E.location.nativeElement,T=E.injector.get(am,null),R=T&&E.injector.get(Ab);return T&&R&&R.registerApplication(C,T),E.onDestroy(()=>{this.detachView(E.hostView),Wd(this.components,E),R&&R.unregisterApplication(C)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Wd(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get($M,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Tn(Sn),Tn(rr),Tn(Vl),Tn(br),Tn(Hd))},i.\u0275prov=Dt({token:i,factory:i.\u0275fac}),i})();function Wd(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}class nP{}class Ub{}const cA={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let dA=(()=>{class i{constructor(a,l){this._compiler=a,this._config=l||cA}load(a){return this.loadAndCompile(a)}loadAndCompile(a){let[l,d]=a.split("#");return void 0===d&&(d="default"),V(8255)(l).then(h=>h[d]).then(h=>hA(h,l,d)).then(h=>this._compiler.compileModuleAsync(h))}loadFactory(a){let[l,d]=a.split("#"),h="NgFactory";return void 0===d&&(d="default",h=""),V(8255)(this._config.factoryPathPrefix+l+this._config.factoryPathSuffix).then(_=>_[d+h]).then(_=>hA(_,l,d))}}return i.\u0275fac=function(a){return new(a||i)(Tn(Gd),Tn(Ub,8))},i.\u0275prov=Dt({token:i,factory:i.\u0275fac}),i})();function hA(i,s,a){if(!i)throw new Error(`Cannot find '${a}' in '${s}'`);return i}const Zb=function(i){return null},fv=iv(null,"core",[{provide:jM,useValue:"unknown"},{provide:sv,deps:[rr]},{provide:Ab,deps:[]},{provide:HM,deps:[]}]),zd=[{provide:Fr,useClass:Fr,deps:[Sn,rr,Vl,br,Hd]},{provide:Bi,deps:[Sn],useFactory:function(i){let s=[];return i.onStable.subscribe(()=>{for(;s.length;)s.pop()()}),function(a){s.push(a)}}},{provide:Hd,useClass:Hd,deps:[[new ra,Cb]]},{provide:Gd,useClass:Gd,deps:[]},mF,{provide:Gg,useFactory:function(){return ss},deps:[]},{provide:Rr,useFactory:function(){return Ty},deps:[]},{provide:Qy,useFactory:function(i){return ic(i=i||"undefined"!=typeof $localize&&$localize.locale||vy),i},deps:[[new $a(Qy),new ra,new Zr]]},{provide:YS,useValue:"USD"}];let pv=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Tn(Fr))},i.\u0275mod=_t({type:i}),i.\u0275inj=gn({providers:zd}),i})()},8939:(nt,Ce,V)=>{"use strict";V.d(Ce,{hO:()=>te,xv:()=>ne,Dh:()=>J,GT:()=>Z,cc:()=>ue,on:()=>U,pX:()=>re});var m=V(7716),X=V(7841),L=V(8971);nt=V.hmd(nt);const ae=["ngOnDestroy"],re=(oe,he,Oe,$e={})=>new Proxy(oe,{get:(ht,Qe)=>Oe.runOutsideAngular(()=>{var wt;if(oe[Qe])return(null===(wt=null==$e?void 0:$e.spy)||void 0===wt?void 0:wt.get)&&$e.spy.get(Qe,oe[Qe]),oe[Qe];if(ae.indexOf(Qe)>-1)return()=>{};const ut=he.toPromise().then(qe=>{const Se=qe&&qe[Qe];return"function"==typeof Se?Se.bind(qe):Se&&Se.then?Se.then(be=>Oe.run(()=>be)):Oe.run(()=>Se)});return new Proxy(()=>{},{get:(qe,Se)=>ut[Se],apply:(qe,Se,be)=>ut.then(Ue=>{var Ie;const Be=Ue&&Ue(...be);return(null===(Ie=null==$e?void 0:$e.spy)||void 0===Ie?void 0:Ie.apply)&&$e.spy.apply(Qe,be,Be),Be})})})}),Z=(oe,he)=>{he.forEach(Oe=>{Object.getOwnPropertyNames(Oe.prototype||Oe).forEach($e=>{Object.defineProperty(oe.prototype,$e,Object.getOwnPropertyDescriptor(Oe.prototype||Oe,$e))})})};class me{constructor(he){return he}}const J=new m.OlP("angularfire2.app.options"),ne=new m.OlP("angularfire2.app.name");function U(oe,he,Oe){const ht="object"==typeof Oe&&Oe||{};ht.name=ht.name||"string"==typeof Oe&&Oe||"[DEFAULT]";const wt=X.Z.apps.filter(ut=>ut&&ut.name===ht.name)[0]||he.runOutsideAngular(()=>X.Z.initializeApp(oe,ht));try{JSON.stringify(oe)!==JSON.stringify(wt.options)&&G("error",`${wt.name} Firebase App already initialized with different options${nt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ut){}return new me(wt)}const G=(oe,...he)=>{(0,m.X6Q)()&&"undefined"!=typeof console&&console[oe](...he)},B={provide:me,useFactory:U,deps:[J,m.R0b,[new m.FiY,ne]]};let te=(()=>{class oe{constructor(Oe){X.Z.registerVersion("angularfire",L.q4.full,"core"),X.Z.registerVersion("angularfire",L.q4.full,"app-compat"),X.Z.registerVersion("angular",m.q4F.full,Oe.toString())}static initializeApp(Oe,$e){return{ngModule:oe,providers:[{provide:J,useValue:Oe},{provide:ne,useValue:$e}]}}}return oe.\u0275fac=function(Oe){return new(Oe||oe)(m.LFG(m.Lbi))},oe.\u0275mod=m.oAB({type:oe}),oe.\u0275inj=m.cJS({providers:[B]}),oe})();function ue(oe,he,Oe,$e,ht){const[,Qe,wt]=globalThis.\u0275AngularfireInstanceCache.find(ut=>ut[0]===oe)||[];if(Qe)return function(oe,he){try{return oe.toString()===he.toString()}catch(Oe){return oe===he}}(ht,wt)||(Le("error",`${he} was already initialized on the ${Oe} Firebase App with different settings.${pe?" You may need to reload as Firebase is not HMR aware.":""}`),Le("warn",{is:ht,was:wt})),Qe;{const ut=$e();return globalThis.\u0275AngularfireInstanceCache.push([oe,ut,ht]),ut}}const pe=!!nt.hot,Le=(oe,...he)=>{(0,m.X6Q)()&&"undefined"!=typeof console&&console[oe](...he)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8971:(nt,Ce,V)=>{"use strict";V.d(Ce,{q4:()=>i_,iC:()=>$n,fc:()=>xp,HU:()=>Mh,vb:()=>Fi,JM:()=>ki});var m=V(7716),X=V(2329),L=V(8239),ae=V(8026),re=V(3854),Z=V(3910),me=V(5422);const J="@firebase/installations",G="w:0.5.8",B="FIS_v2",oe=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function he(I){return I instanceof re.ZR&&I.code.includes("request-failed")}function Oe({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function $e(I){return{token:I.token,requestStatus:2,expiresIn:be(I.expiresIn),creationTime:Date.now()}}function ht(I,A){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,L.Z)(function*(I,A){const j=(yield A.json()).error;return oe.create("request-failed",{requestName:I,serverCode:j.code,serverMessage:j.message,serverStatus:j.status})})).apply(this,arguments)}function wt({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function ut(I,{refreshToken:A}){const M=wt(I);return M.append("Authorization",function(I){return`${B} ${I}`}(A)),M}function qe(I){return Se.apply(this,arguments)}function Se(){return(Se=(0,L.Z)(function*(I){const A=yield I();return A.status>=500&&A.status<600?I():A})).apply(this,arguments)}function be(I){return Number(I.replace("s","000"))}function Ie(I,A){return Be.apply(this,arguments)}function Be(){return(Be=(0,L.Z)(function*({appConfig:I,heartbeatServiceProvider:A},{fid:M}){const j=Oe(I),ee=wt(I),ce=A.getImmediate({optional:!0});if(ce){const Ct=yield ce.getHeartbeatsHeader();Ct&&ee.append("x-firebase-client",Ct)}const ze={method:"POST",headers:ee,body:JSON.stringify({fid:M,authVersion:B,appId:I.appId,sdkVersion:G})},ft=yield qe(()=>fetch(j,ze));if(ft.ok){const Ct=yield ft.json();return{fid:Ct.fid||M,registrationStatus:2,refreshToken:Ct.refreshToken,authToken:$e(Ct.authToken)}}throw yield ht("Create Installation",ft)})).apply(this,arguments)}function Te(I){return new Promise(A=>{setTimeout(A,I)})}const dn=/^[cdef][\w-]{21}$/;function An(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const M=function(I){return function(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return dn.test(M)?M:""}catch(I){return""}}function st(I){return`${I.appName}!${I.appId}`}const Nr=new Map;function mi(I,A){const M=st(I);Ln(M,A),function(I,A){const M=(!sn&&"BroadcastChannel"in self&&(sn=new BroadcastChannel("[Firebase] FID Change"),sn.onmessage=I=>{Ln(I.data.key,I.data.fid)}),sn);M&&M.postMessage({key:I,fid:A}),0===Nr.size&&sn&&(sn.close(),sn=null)}(M,A)}function Ln(I,A){const M=Nr.get(I);if(M)for(const j of M)j(A)}let sn=null;const ar="firebase-installations-store";let Ti=null;function Me(){return Ti||(Ti=(0,re.X3)("firebase-installations-database",1,(I,A)=>{switch(A){case 0:I.createObjectStore(ar)}})),Ti}function ur(I,A){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,L.Z)(function*(I,A){const M=st(I),ee=(yield Me()).transaction(ar,"readwrite"),ce=ee.objectStore(ar),Ne=yield ce.get(M);return yield ce.put(A,M),yield ee.complete,(!Ne||Ne.fid!==A.fid)&&mi(I,A.fid),A})).apply(this,arguments)}function Jn(I){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,L.Z)(function*(I){const A=st(I),j=(yield Me()).transaction(ar,"readwrite");yield j.objectStore(ar).delete(A),yield j.complete})).apply(this,arguments)}function gr(I,A){return io.apply(this,arguments)}function io(){return(io=(0,L.Z)(function*(I,A){const M=st(I),ee=(yield Me()).transaction(ar,"readwrite"),ce=ee.objectStore(ar),Ne=yield ce.get(M),ze=A(Ne);return void 0===ze?yield ce.delete(M):yield ce.put(ze,M),yield ee.complete,ze&&(!Ne||Ne.fid!==ze.fid)&&mi(I,ze.fid),ze})).apply(this,arguments)}function Ir(I){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,L.Z)(function*(I){let A;const M=yield gr(I.appConfig,j=>{const ee=Vn(j),ce=rl(I,ee);return A=ce.registrationPromise,ce.installationEntry});return""===M.fid?{installationEntry:yield A}:{installationEntry:M,registrationPromise:A}})).apply(this,arguments)}function Vn(I){return _i(I||{fid:An(),registrationStatus:0})}function rl(I,A){if(0===A.registrationStatus){if(!navigator.onLine)return{installationEntry:A,registrationPromise:Promise.reject(oe.create("app-offline"))};const M={fid:A.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:M,registrationPromise:function(I,A){return He.apply(this,arguments)}(I,M)}}return 1===A.registrationStatus?{installationEntry:A,registrationPromise:gt(I)}:{installationEntry:A}}function He(){return(He=(0,L.Z)(function*(I,A){try{const M=yield Ie(I,A);return ur(I.appConfig,M)}catch(M){throw he(M)&&409===M.customData.serverCode?yield Jn(I.appConfig):yield ur(I.appConfig,{fid:A.fid,registrationStatus:0}),M}})).apply(this,arguments)}function gt(I){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,L.Z)(function*(I){let A=yield Ns(I.appConfig);for(;1===A.registrationStatus;)yield Te(100),A=yield Ns(I.appConfig);if(0===A.registrationStatus){const{installationEntry:M,registrationPromise:j}=yield Ir(I);return j||M}return A})).apply(this,arguments)}function Ns(I){return gr(I,A=>{if(!A)throw oe.create("installation-not-found");return _i(A)})}function _i(I){return function(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function on(I,A){return so.apply(this,arguments)}function so(){return(so=(0,L.Z)(function*({appConfig:I,heartbeatServiceProvider:A},M){const j=un(I,M),ee=ut(I,M),ce=A.getImmediate({optional:!0});if(ce){const Ct=yield ce.getHeartbeatsHeader();Ct&&ee.append("x-firebase-client",Ct)}const ze={method:"POST",headers:ee,body:JSON.stringify({installation:{sdkVersion:G,appId:I.appId}})},ft=yield qe(()=>fetch(j,ze));if(ft.ok)return $e(yield ft.json());throw yield ht("Generate Auth Token",ft)})).apply(this,arguments)}function un(I,{fid:A}){return`${Oe(I)}/${A}/authTokens:generate`}function kt(I){return St.apply(this,arguments)}function St(){return(St=(0,L.Z)(function*(I,A=!1){let M;const j=yield gr(I.appConfig,ce=>{if(!Qt(ce))throw oe.create("not-registered");const Ne=ce.authToken;if(!A&&z(Ne))return ce;if(1===Ne.requestStatus)return M=Ze(I,A),ce;{if(!navigator.onLine)throw oe.create("app-offline");const ze=Q(ce);return M=mt(I,ze),ze}});return M?yield M:j.authToken})).apply(this,arguments)}function Ze(I,A){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,L.Z)(function*(I,A){let M=yield ot(I.appConfig);for(;1===M.authToken.requestStatus;)yield Te(100),M=yield ot(I.appConfig);const j=M.authToken;return 0===j.requestStatus?kt(I,A):j})).apply(this,arguments)}function ot(I){return gr(I,A=>{if(!Qt(A))throw oe.create("not-registered");return function(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(A.authToken)?Object.assign(Object.assign({},A),{authToken:{requestStatus:0}}):A})}function mt(I,A){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,L.Z)(function*(I,A){try{const M=yield on(I,A),j=Object.assign(Object.assign({},A),{authToken:M});return yield ur(I.appConfig,j),M}catch(M){if(!he(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const j=Object.assign(Object.assign({},A),{authToken:{requestStatus:0}});yield ur(I.appConfig,j)}else yield Jn(I.appConfig);throw M}})).apply(this,arguments)}function Qt(I){return void 0!==I&&2===I.registrationStatus}function z(I){return 2===I.requestStatus&&!function(I){const A=Date.now();return A<I.creationTime||I.creationTime+I.expiresIn<A+36e5}(I)}function Q(I){const A={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:A})}function je(){return(je=(0,L.Z)(function*(I){const A=I,{installationEntry:M,registrationPromise:j}=yield Ir(A);return j?j.catch(console.error):kt(A).catch(console.error),M.fid})).apply(this,arguments)}function tn(){return(tn=(0,L.Z)(function*(I,A=!1){const M=I;return yield Mr(M),(yield kt(M,A)).token})).apply(this,arguments)}function Mr(I){return Un.apply(this,arguments)}function Un(){return(Un=(0,L.Z)(function*(I){const{registrationPromise:A}=yield Ir(I);A&&(yield A)})).apply(this,arguments)}function Bt(I){return oe.create("missing-app-config-values",{valueName:I})}const hn="installations";(0,ae._registerComponent)(new Z.wA(hn,I=>{const A=I.getProvider("app").getImmediate();return{app:A,appConfig:function(I){if(!I||!I.options)throw Bt("App Configuration");if(!I.name)throw Bt("App Name");const A=["projectId","apiKey","appId"];for(const M of A)if(!I.options[M])throw Bt(M);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(A),heartbeatServiceProvider:(0,ae._getProvider)(A,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ae._registerComponent)(new Z.wA("installations-internal",I=>{const A=I.getProvider("app").getImmediate(),M=(0,ae._getProvider)(A,hn).getImmediate();return{getId:()=>function(I){return je.apply(this,arguments)}(M),getToken:ee=>function(I){return tn.apply(this,arguments)}(M,ee)}},"PRIVATE")),(0,ae.registerVersion)(J,"0.5.8"),(0,ae.registerVersion)(J,"0.5.8","esm2017");const En="@firebase/remote-config",Cn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ol{constructor(A,M,j,ee){this.client=A,this.storage=M,this.storageCache=j,this.logger=ee}isCachedDataFresh(A,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const j=Date.now()-M,ee=j<=A;return this.logger.debug(`Config fetch cache check. Cache age millis: ${j}. Cache max age millis (minimumFetchIntervalMillis setting): ${A}. Is cache hit: ${ee}.`),ee}fetch(A){var M=this;return(0,L.Z)(function*(){const[j,ee]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(ee&&M.isCachedDataFresh(A.cacheMaxAgeMillis,j))return ee;A.eTag=ee&&ee.eTag;const ce=yield M.client.fetch(A),Ne=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ce.status&&Ne.push(M.storage.setLastSuccessfulFetchResponse(ce)),yield Promise.all(Ne),ce})()}}function du(I=navigator){return I.languages&&I.languages[0]||I.language}class fs{constructor(A,M,j,ee,ce,Ne){this.firebaseInstallations=A,this.sdkVersion=M,this.namespace=j,this.projectId=ee,this.apiKey=ce,this.appId=Ne}fetch(A){var M=this;return(0,L.Z)(function*(){const[j,ee]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Ne=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":A.eTag||"*"},ft={sdk_version:M.sdkVersion,app_instance_id:j,app_instance_id_token:ee,app_id:M.appId,language_code:du()},Ct={method:"POST",headers:ze,body:JSON.stringify(ft)},zt=fetch(Ne,Ct),xt=new Promise((To,Do)=>{A.signal.addEventListener(()=>{const js=new Error("The operation was aborted.");js.name="AbortError",Do(js)})});let Sr;try{yield Promise.race([zt,xt]),Sr=yield zt}catch(To){let Do="fetch-client-network";throw"AbortError"===To.name&&(Do="fetch-timeout"),Cn.create(Do,{originalErrorMessage:To.message})}let tr=Sr.status;const ja=Sr.headers.get("ETag")||void 0;let Jc,na;if(200===Sr.status){let To;try{To=yield Sr.json()}catch(Do){throw Cn.create("fetch-client-parse",{originalErrorMessage:Do.message})}Jc=To.entries,na=To.state}if("INSTANCE_STATE_UNSPECIFIED"===na?tr=500:"NO_CHANGE"===na?tr=304:("NO_TEMPLATE"===na||"EMPTY_CONFIG"===na)&&(Jc={}),304!==tr&&200!==tr)throw Cn.create("fetch-status",{httpStatus:tr});return{status:tr,eTag:ja,config:Jc}})()}}class Sa{constructor(A,M){this.client=A,this.storage=M}fetch(A){var M=this;return(0,L.Z)(function*(){const j=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(A,j)})()}attemptFetch(A,{throttleEndTimeMillis:M,backoffCount:j}){var ee=this;return(0,L.Z)(function*(){yield function(I,A){return new Promise((M,j)=>{const ee=Math.max(A-Date.now(),0),ce=setTimeout(M,ee);I.addEventListener(()=>{clearTimeout(ce),j(Cn.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}(A.signal,M);try{const ce=yield ee.client.fetch(A);return yield ee.storage.deleteThrottleMetadata(),ce}catch(ce){if(!function(I){if(!(I instanceof re.ZR&&I.customData))return!1;const A=Number(I.customData.httpStatus);return 429===A||500===A||503===A||504===A}(ce))throw ce;const Ne={throttleEndTimeMillis:Date.now()+(0,re.$s)(j),backoffCount:j+1};return yield ee.storage.setThrottleMetadata(Ne),ee.attemptFetch(A,Ne)}})()}}class pp{constructor(A,M,j,ee,ce){this.app=A,this._client=M,this._storageCache=j,this._storage=ee,this._logger=ce,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function hu(I,A){const M=I.target.error||void 0;return Cn.create(A,{originalErrorMessage:M&&M.message})}const Aa="app_namespace_store";class Nc{constructor(A,M,j,ee=function(){return new Promise((I,A)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=j=>{A(hu(j,"storage-open"))},M.onsuccess=j=>{I(j.target.result)},M.onupgradeneeded=j=>{const ee=j.target.result;switch(j.oldVersion){case 0:ee.createObjectStore(Aa,{keyPath:"compositeKey"})}}}catch(M){A(Cn.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=A,this.appName=M,this.namespace=j,this.openDbPromise=ee}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(A){return this.set("last_fetch_status",A)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(A){return this.set("last_successful_fetch_timestamp_millis",A)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(A){return this.set("last_successful_fetch_response",A)}getActiveConfig(){return this.get("active_config")}setActiveConfig(A){return this.set("active_config",A)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(A){return this.set("active_config_etag",A)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(A){return this.set("throttle_metadata",A)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(A){var M=this;return(0,L.Z)(function*(){const j=yield M.openDbPromise;return new Promise((ee,ce)=>{const ze=j.transaction([Aa],"readonly").objectStore(Aa),ft=M.createCompositeKey(A);try{const Ct=ze.get(ft);Ct.onerror=zt=>{ce(hu(zt,"storage-get"))},Ct.onsuccess=zt=>{const xt=zt.target.result;ee(xt?xt.value:void 0)}}catch(Ct){ce(Cn.create("storage-get",{originalErrorMessage:Ct&&Ct.message}))}})})()}set(A,M){var j=this;return(0,L.Z)(function*(){const ee=yield j.openDbPromise;return new Promise((ce,Ne)=>{const ft=ee.transaction([Aa],"readwrite").objectStore(Aa),Ct=j.createCompositeKey(A);try{const zt=ft.put({compositeKey:Ct,value:M});zt.onerror=xt=>{Ne(hu(xt,"storage-set"))},zt.onsuccess=()=>{ce()}}catch(zt){Ne(Cn.create("storage-set",{originalErrorMessage:zt&&zt.message}))}})})()}delete(A){var M=this;return(0,L.Z)(function*(){const j=yield M.openDbPromise;return new Promise((ee,ce)=>{const ze=j.transaction([Aa],"readwrite").objectStore(Aa),ft=M.createCompositeKey(A);try{const Ct=ze.delete(ft);Ct.onerror=zt=>{ce(hu(zt,"storage-delete"))},Ct.onsuccess=()=>{ee()}}catch(Ct){ce(Cn.create("storage-delete",{originalErrorMessage:Ct&&Ct.message}))}})})()}createCompositeKey(A){return[this.appId,this.appName,this.namespace,A].join()}}class fh{constructor(A){this.storage=A}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var A=this;return(0,L.Z)(function*(){const M=A.storage.getLastFetchStatus(),j=A.storage.getLastSuccessfulFetchTimestampMillis(),ee=A.storage.getActiveConfig(),ce=yield M;ce&&(A.lastFetchStatus=ce);const Ne=yield j;Ne&&(A.lastSuccessfulFetchTimestampMillis=Ne);const ze=yield ee;ze&&(A.activeConfig=ze)})()}setLastFetchStatus(A){return this.lastFetchStatus=A,this.storage.setLastFetchStatus(A)}setLastSuccessfulFetchTimestampMillis(A){return this.lastSuccessfulFetchTimestampMillis=A,this.storage.setLastSuccessfulFetchTimestampMillis(A)}setActiveConfig(A){return this.activeConfig=A,this.storage.setActiveConfig(A)}}function gh(){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,L.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(I){return!1}})).apply(this,arguments)}(0,ae._registerComponent)(new Z.wA("remote-config",function(A,{instanceIdentifier:M}){const j=A.getProvider("app").getImmediate(),ee=A.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Cn.create("registration-window");if(!(0,re.hl)())throw Cn.create("indexed-db-unavailable");const{projectId:ce,apiKey:Ne,appId:ze}=j.options;if(!ce)throw Cn.create("registration-project-id");if(!Ne)throw Cn.create("registration-api-key");if(!ze)throw Cn.create("registration-app-id");const ft=new Nc(ze,j.name,M=M||"firebase"),Ct=new fh(ft),zt=new me.Yd(En);zt.logLevel=me.in.ERROR;const xt=new fs(ee,ae.SDK_VERSION,M,ce,Ne,ze),Sr=new Sa(xt,ft),tr=new ol(Sr,ft,Ct,zt),ja=new pp(j,tr,Ct,ft,zt);return function(I){const A=(0,re.m9)(I);A._initializePromise||(A._initializePromise=A._storageCache.loadFromStorage().then(()=>{A._isInitializationComplete=!0}))}(ja),ja},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(En,"0.3.7"),(0,ae.registerVersion)(En,"0.3.7","esm2017");const al="/firebase-messaging-sw.js",Pc="/firebase-cloud-messaging-push-scope",Oc="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",fu="google.c.a.c_id",qo="google.c.a.c_l",kc="google.c.a.ts",zo="google.c.a.e";var uo=(()=>{return(I=uo||(uo={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",uo;var I})();function Os(I){const A=new Uint8Array(I);return btoa(String.fromCharCode(...A)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Zi(I){const M=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),j=atob(M),ee=new Uint8Array(j.length);for(let ce=0;ce<j.length;++ce)ee[ce]=j.charCodeAt(ce);return ee}const Fc="fcm_token_details_db",Lc="fcm_token_object_Store";function _h(I){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,L.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ce=>ce.name).includes(Fc))return null;let A=null;return(yield(0,re.X3)(Fc,5,function(){var j=(0,L.Z)(function*(ee,ce,Ne,ze){var ft;if(ce<2||!ee.objectStoreNames.contains(Lc))return;const Ct=ze.objectStore(Lc),zt=yield Ct.index("fcmSenderId").get(I);if(yield Ct.clear(),zt)if(2===ce){const xt=zt;if(!xt.auth||!xt.p256dh||!xt.endpoint)return;A={token:xt.fcmToken,createTime:null!==(ft=xt.createTime)&&void 0!==ft?ft:Date.now(),subscriptionOptions:{auth:xt.auth,p256dh:xt.p256dh,endpoint:xt.endpoint,swScope:xt.swScope,vapidKey:"string"==typeof xt.vapidKey?xt.vapidKey:Os(xt.vapidKey)}}}else if(3===ce){const xt=zt;A={token:xt.fcmToken,createTime:xt.createTime,subscriptionOptions:{auth:Os(xt.auth),p256dh:Os(xt.p256dh),endpoint:xt.endpoint,swScope:xt.swScope,vapidKey:Os(xt.vapidKey)}}}else if(4===ce){const xt=zt;A={token:xt.fcmToken,createTime:xt.createTime,subscriptionOptions:{auth:Os(xt.auth),p256dh:Os(xt.p256dh),endpoint:xt.endpoint,swScope:xt.swScope,vapidKey:Os(xt.vapidKey)}}}});return function(ee,ce,Ne,ze){return j.apply(this,arguments)}}())).close(),yield(0,re.Lj)(Fc),yield(0,re.Lj)("fcm_vapid_details_db"),yield(0,re.Lj)("undefined"),pu(A)?A:null})).apply(this,arguments)}function pu(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:A}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof A.auth&&A.auth.length>0&&"string"==typeof A.p256dh&&A.p256dh.length>0&&"string"==typeof A.endpoint&&A.endpoint.length>0&&"string"==typeof A.swScope&&A.swScope.length>0&&"string"==typeof A.vapidKey&&A.vapidKey.length>0}const ks="firebase-messaging-store";let gs=null;function vh(){return gs||(gs=(0,re.X3)("firebase-messaging-database",1,(I,A)=>{switch(A){case 0:I.createObjectStore(ks)}})),gs}function Pn(I){return lo.apply(this,arguments)}function lo(){return(lo=(0,L.Z)(function*(I){const A=ho(I),j=yield(yield vh()).transaction(ks).objectStore(ks).get(A);if(j)return j;{const ee=yield _h(I.appConfig.senderId);if(ee)return yield Ko(I,ee),ee}})).apply(this,arguments)}function Ko(I,A){return gu.apply(this,arguments)}function gu(){return(gu=(0,L.Z)(function*(I,A){const M=ho(I),ee=(yield vh()).transaction(ks,"readwrite");return yield ee.objectStore(ks).put(A,M),yield ee.complete,A})).apply(this,arguments)}function an(I){return co.apply(this,arguments)}function co(){return(co=(0,L.Z)(function*(I){const A=ho(I),j=(yield vh()).transaction(ks,"readwrite");yield j.objectStore(ks).delete(A),yield j.complete})).apply(this,arguments)}function ho({appConfig:I}){return I.appId}const fn=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function cl(I,A){return _u.apply(this,arguments)}function _u(){return(_u=(0,L.Z)(function*(I,A){const M=yield Qi(I),j=Eu(A),ee={method:"POST",headers:M,body:JSON.stringify(j)};let ce;try{ce=yield(yield fetch(Zo(I.appConfig),ee)).json()}catch(Ne){throw fn.create("token-subscribe-failed",{errorInfo:Ne})}if(ce.error)throw fn.create("token-subscribe-failed",{errorInfo:ce.error.message});if(!ce.token)throw fn.create("token-subscribe-no-token");return ce.token})).apply(this,arguments)}function Yi(I,A){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,L.Z)(function*(I,A){const M=yield Qi(I),j=Eu(A.subscriptionOptions),ee={method:"PATCH",headers:M,body:JSON.stringify(j)};let ce;try{ce=yield(yield fetch(`${Zo(I.appConfig)}/${A.token}`,ee)).json()}catch(Ne){throw fn.create("token-update-failed",{errorInfo:Ne})}if(ce.error)throw fn.create("token-update-failed",{errorInfo:ce.error.message});if(!ce.token)throw fn.create("token-update-no-token");return ce.token})).apply(this,arguments)}function yu(I,A){return vu.apply(this,arguments)}function vu(){return(vu=(0,L.Z)(function*(I,A){const j={method:"DELETE",headers:yield Qi(I)};try{const ce=yield(yield fetch(`${Zo(I.appConfig)}/${A}`,j)).json();if(ce.error)throw fn.create("token-unsubscribe-failed",{errorInfo:ce.error.message})}catch(ee){throw fn.create("token-unsubscribe-failed",{errorInfo:ee})}})).apply(this,arguments)}function Zo({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function Qi(I){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,L.Z)(function*({appConfig:I,installations:A}){const M=yield A.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Eu({p256dh:I,auth:A,endpoint:M,vapidKey:j}){const ee={web:{endpoint:M,auth:A,p256dh:I}};return j!==Oc&&(ee.web.applicationPubKey=j),ee}const bt=6048e5;function Vc(I){return xa.apply(this,arguments)}function xa(){return(xa=(0,L.Z)(function*(I){const A=yield Ht(I.swRegistration,I.vapidKey),M={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:A.endpoint,auth:Os(A.getKey("auth")),p256dh:Os(A.getKey("p256dh"))},j=yield Pn(I.firebaseDependencies);if(j){if(Rn(j.subscriptionOptions,M))return Date.now()>=j.createTime+bt?mp(I,{token:j.token,createTime:Date.now(),subscriptionOptions:M}):j.token;try{yield yu(I.firebaseDependencies,j.token)}catch(ee){console.warn(ee)}return fo(I.firebaseDependencies,M)}return fo(I.firebaseDependencies,M)})).apply(this,arguments)}function Uc(I){return dl.apply(this,arguments)}function dl(){return(dl=(0,L.Z)(function*(I){const A=yield Pn(I.firebaseDependencies);A&&(yield yu(I.firebaseDependencies,A.token),yield an(I.firebaseDependencies));const M=yield I.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function mp(I,A){return wu.apply(this,arguments)}function wu(){return(wu=(0,L.Z)(function*(I,A){try{const M=yield Yi(I.firebaseDependencies,A),j=Object.assign(Object.assign({},A),{token:M,createTime:Date.now()});return yield Ko(I.firebaseDependencies,j),M}catch(M){throw yield Uc(I),M}})).apply(this,arguments)}function fo(I,A){return De.apply(this,arguments)}function De(){return(De=(0,L.Z)(function*(I,A){const j={token:yield cl(I,A),createTime:Date.now(),subscriptionOptions:A};return yield Ko(I,j),j.token})).apply(this,arguments)}function Ht(I,A){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,L.Z)(function*(I,A){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Zi(A)})})).apply(this,arguments)}function Rn(I,A){return A.vapidKey===I.vapidKey&&A.endpoint===I.endpoint&&A.auth===I.auth&&A.p256dh===I.p256dh}function Ra(I){const A={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function(I,A){if(!A.notification)return;I.notification={};const M=A.notification.title;M&&(I.notification.title=M);const j=A.notification.body;j&&(I.notification.body=j);const ee=A.notification.image;ee&&(I.notification.image=ee)}(A,I),function(I,A){!A.data||(I.data=A.data)}(A,I),function(I,A){if(!A.fcmOptions)return;I.fcmOptions={};const M=A.fcmOptions.link;M&&(I.fcmOptions.link=M);const j=A.fcmOptions.analytics_label;j&&(I.fcmOptions.analyticsLabel=j)}(A,I),A}function Na(I){return"object"==typeof I&&!!I&&fu in I}function Eh(I,A){const M=[];for(let j=0;j<I.length;j++)M.push(I.charAt(j)),j<A.length&&M.push(A.charAt(j));return M.join("")}function Jo(I){return fn.create("missing-app-config-values",{valueName:I})}Eh("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Eh("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ma{constructor(A,M,j){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ee=function(I){if(!I||!I.options)throw Jo("App Configuration Object");if(!I.name)throw Jo("App Name");const A=["projectId","apiKey","appId","messagingSenderId"],{options:M}=I;for(const j of A)if(!M[j])throw Jo(j);return{appName:I.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(A);this.firebaseDependencies={app:A,appConfig:ee,installations:M,analyticsProvider:j}}_delete(){return Promise.resolve()}}function lr(I){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,L.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(al,{scope:Pc}),I.swRegistration.update().catch(()=>{})}catch(A){throw fn.create("failed-service-worker-registration",{browserErrorMessage:A.message})}})).apply(this,arguments)}function _p(I,A){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,L.Z)(function*(I,A){if(!A&&!I.swRegistration&&(yield lr(I)),A||!I.swRegistration){if(!(A instanceof ServiceWorkerRegistration))throw fn.create("invalid-sw-registration");I.swRegistration=A}})).apply(this,arguments)}function ii(I,A){return hl.apply(this,arguments)}function hl(){return(hl=(0,L.Z)(function*(I,A){A?I.vapidKey=A:I.vapidKey||(I.vapidKey=Oc)})).apply(this,arguments)}function fl(){return(fl=(0,L.Z)(function*(I,A){if(!navigator)throw fn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw fn.create("permission-blocked");return yield ii(I,null==A?void 0:A.vapidKey),yield _p(I,null==A?void 0:A.serviceWorkerRegistration),Vc(I)})).apply(this,arguments)}function jc(I,A,M){return bu.apply(this,arguments)}function bu(){return(bu=(0,L.Z)(function*(I,A,M){const j=Cu(A);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(j,{message_id:M[fu],message_name:M[qo],message_time:M[kc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Cu(I){switch(I){case uo.NOTIFICATION_CLICKED:return"notification_open";case uo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Fs(){return(Fs=(0,L.Z)(function*(I,A){const M=A.data;if(!M.isFirebaseMessaging)return;I.onMessageHandler&&M.messageType===uo.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Ra(M)):I.onMessageHandler.next(Ra(M)));const j=M.data;Na(j)&&"1"===j[zo]&&(yield jc(I,M.messageType,j))})).apply(this,arguments)}const pl="@firebase/messaging";function Tu(){return $c.apply(this,arguments)}function $c(){return($c=(0,L.Z)(function*(){try{yield(0,re.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ae._registerComponent)(new Z.wA("messaging",I=>{const A=new Ma(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function(I,A){return Fs.apply(this,arguments)}(A,M)),A},"PUBLIC")),(0,ae._registerComponent)(new Z.wA("messaging-internal",I=>{const A=I.getProvider("messaging").getImmediate();return{getToken:j=>function(I,A){return fl.apply(this,arguments)}(A,j)}},"PRIVATE")),(0,ae.registerVersion)(pl,"0.9.12"),(0,ae.registerVersion)(pl,"0.9.12","esm2017");const Oa="analytics",wp="firebase_id",ka="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Xo="https://www.googletagmanager.com/gtag/js",Bn=new me.Yd("@firebase/analytics");function _l(I){return Promise.all(I.map(A=>A.catch(M=>M)))}function yl(I,A){const M=document.createElement("script");M.src=`${Xo}?l=${I}&id=${A}`,M.async=!0,document.head.appendChild(M)}function mo(I,A,M,j,ee,ce){return ea.apply(this,arguments)}function ea(){return(ea=(0,L.Z)(function*(I,A,M,j,ee,ce){const Ne=j[ee];try{if(Ne)yield A[Ne];else{const ft=(yield _l(M)).find(Ct=>Ct.measurementId===ee);ft&&(yield A[ft.appId])}}catch(ze){Bn.error(ze)}I("config",ee,ce)})).apply(this,arguments)}function bh(I,A,M,j,ee){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,L.Z)(function*(I,A,M,j,ee){try{let ce=[];if(ee&&ee.send_to){let Ne=ee.send_to;Array.isArray(Ne)||(Ne=[Ne]);const ze=yield _l(M);for(const ft of Ne){const Ct=ze.find(xt=>xt.measurementId===ft),zt=Ct&&A[Ct.appId];if(!zt){ce=[];break}ce.push(zt)}}0===ce.length&&(ce=Object.values(A)),yield Promise.all(ce),I("event",j,ee||{})}catch(ce){Bn.error(ce)}})).apply(this,arguments)}function Cp(){const I=window.document.getElementsByTagName("script");for(const A of Object.values(I))if(A.src&&A.src.includes(Xo))return A;return null}const Ni=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),_s=new class{constructor(A={},M=1e3){this.throttleMetadata=A,this.intervalMillis=M}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,M){this.throttleMetadata[A]=M}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}};function zc(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Tp(I){return Au.apply(this,arguments)}function Au(){return(Au=(0,L.Z)(function*(I){var A;const{appId:M,apiKey:j}=I,ee={method:"GET",headers:zc(j)},ce=ka.replace("{app-id}",M),Ne=yield fetch(ce,ee);if(200!==Ne.status&&304!==Ne.status){let ze="";try{const ft=yield Ne.json();(null===(A=ft.error)||void 0===A?void 0:A.message)&&(ze=ft.error.message)}catch(ft){}throw Ni.create("config-fetch-failed",{httpStatus:Ne.status,responseMessage:ze})}return Ne.json()})).apply(this,arguments)}function Fa(I){return Dp.apply(this,arguments)}function Dp(){return(Dp=(0,L.Z)(function*(I,A=_s,M){const{appId:j,apiKey:ee,measurementId:ce}=I.options;if(!j)throw Ni.create("no-app-id");if(!ee){if(ce)return{measurementId:ce,appId:j};throw Ni.create("no-api-key")}const Ne=A.getThrottleMetadata(j)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ze=new Ch;return setTimeout((0,L.Z)(function*(){ze.abort()}),void 0!==M?M:6e4),_o({appId:j,apiKey:ee,measurementId:ce},Ne,ze,A)})).apply(this,arguments)}function _o(I,A,M){return ys.apply(this,arguments)}function ys(){return(ys=(0,L.Z)(function*(I,{throttleEndTimeMillis:A,backoffCount:M},j,ee=_s){const{appId:ce,measurementId:Ne}=I;try{yield La(j,A)}catch(ze){if(Ne)return Bn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ne} provided in the "measurementId" field in the local Firebase config. [${ze.message}]`),{appId:ce,measurementId:Ne};throw ze}try{const ze=yield Tp(I);return ee.deleteThrottleMetadata(ce),ze}catch(ze){if(!oE(ze)){if(ee.deleteThrottleMetadata(ce),Ne)return Bn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ne} provided in the "measurementId" field in the local Firebase config. [${ze.message}]`),{appId:ce,measurementId:Ne};throw ze}const ft=503===Number(ze.customData.httpStatus)?(0,re.$s)(M,ee.intervalMillis,30):(0,re.$s)(M,ee.intervalMillis),Ct={throttleEndTimeMillis:Date.now()+ft,backoffCount:M+1};return ee.setThrottleMetadata(ce,Ct),Bn.debug(`Calling attemptFetch again in ${ft} millis`),_o(I,Ct,j,ee)}})).apply(this,arguments)}function La(I,A){return new Promise((M,j)=>{const ee=Math.max(A-Date.now(),0),ce=setTimeout(M,ee);I.addEventListener(()=>{clearTimeout(ce),j(Ni.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}function oE(I){if(!(I instanceof re.ZR&&I.customData))return!1;const A=Number(I.customData.httpStatus);return 429===A||500===A||503===A||504===A}class Ch{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}function Sp(){return Ih.apply(this,arguments)}function Ih(){return(Ih=(0,L.Z)(function*(){if(!(0,re.hl)())return Bn.warn(Ni.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(I){return Bn.warn(Ni.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function Ls(){return(Ls=(0,L.Z)(function*(I,A,M,j,ee,ce,Ne){var ze;const ft=Fa(I);ft.then(tr=>{M[tr.measurementId]=tr.appId,I.options.measurementId&&tr.measurementId!==I.options.measurementId&&Bn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${tr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(tr=>Bn.error(tr)),A.push(ft);const Ct=Sp().then(tr=>{if(tr)return j.getId()}),[zt,xt]=yield Promise.all([ft,Ct]);Cp()||yl(ce,zt.measurementId),ee("js",new Date);const Sr=null!==(ze=null==Ne?void 0:Ne.config)&&void 0!==ze?ze:{};return Sr.origin="firebase",Sr.update=!0,null!=xt&&(Sr[wp]=xt),ee("config",zt.measurementId,Sr),zt.measurementId})).apply(this,arguments)}class Dh{constructor(A){this.app=A}_delete(){return delete Gt[this.app.options.appId],Promise.resolve()}}let Gt={},at=[];const Mi={};let Kc,Ji,xu="dataLayer",zr=!1;function El(I,A,M){!function(){const I=[];if((0,re.ru)()&&I.push("This is a browser extension environment."),(0,re.zI)()||I.push("Cookies are not available."),I.length>0){const A=I.map((j,ee)=>`(${ee+1}) ${j}`).join(" "),M=Ni.create("invalid-analytics-context",{errorInfo:A});Bn.warn(M.message)}}();const j=I.options.appId;if(!j)throw Ni.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Ni.create("no-api-key");Bn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Gt[j])throw Ni.create("already-exists",{id:j});if(!zr){!function(I){let A=[];Array.isArray(window[I])?A=window[I]:window[I]=A}(xu);const{wrappedGtag:ce,gtagCore:Ne}=function(I,A,M,j,ee){let ce=function(...Ne){window[j].push(arguments)};return window[ee]&&"function"==typeof window[ee]&&(ce=window[ee]),window[ee]=function(I,A,M,j){function ce(){return(ce=(0,L.Z)(function*(Ne,ze,ft){try{"event"===Ne?yield bh(I,A,M,ze,ft):"config"===Ne?yield mo(I,A,M,j,ze,ft):I("set",ze)}catch(Ct){Bn.error(Ct)}})).apply(this,arguments)}return function(Ne,ze,ft){return ce.apply(this,arguments)}}(ce,I,A,M),{gtagCore:ce,wrappedGtag:window[ee]}}(Gt,at,Mi,xu,"gtag");Ji=ce,Kc=Ne,zr=!0}return Gt[j]=function(I,A,M,j,ee,ce,Ne){return Ls.apply(this,arguments)}(I,at,Mi,A,Kc,xu,M),new Dh(I)}function wl(){return(wl=(0,L.Z)(function*(I,A,M,j,ee){if(ee&&ee.global)I("event",M,j);else{const ce=yield A;I("event",M,Object.assign(Object.assign({},j),{send_to:ce}))}})).apply(this,arguments)}function Xi(){return si.apply(this,arguments)}function si(){return(si=(0,L.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(I){return!1}})).apply(this,arguments)}const kn="@firebase/analytics";(0,ae._registerComponent)(new Z.wA(Oa,(A,{options:M})=>El(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ae._registerComponent)(new Z.wA("analytics-internal",function(A){try{const M=A.getProvider(Oa).getImmediate();return{logEvent:(j,ee,ce)=>function(I,A,M,j){I=(0,re.m9)(I),function(I,A,M,j,ee){return wl.apply(this,arguments)}(Ji,Gt[I.app.options.appId],A,M,j).catch(ee=>Bn.error(ee))}(M,j,ee,ce)}}catch(M){throw Ni.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ae.registerVersion)(kn,"0.7.8"),(0,ae.registerVersion)(kn,"0.7.8","esm2017");var Ah=V(7771),r_=V(3637),aE=V(3342),Us=V(309),Va=V(2639);const i_=new m.GfV("7.3.0"),xh="__angularfire_symbol__analyticsIsSupportedValue",Oi="__angularfire_symbol__analyticsIsSupported",Rh="__angularfire_symbol__remoteConfigIsSupportedValue",Eo="__angularfire_symbol__remoteConfigIsSupported",Bs="__angularfire_symbol__messagingIsSupportedValue",qn="__angularfire_symbol__messagingIsSupported";function ki(I,A,M){if(A){if(1===A.length)return A[0];const ce=A.filter(Ne=>Ne.app===M);if(1===ce.length)return ce[0]}return M.container.getProvider(I).getImmediate({optional:!0})}globalThis[Oi]||(globalThis[Oi]=Xi().then(I=>globalThis[xh]=I).catch(()=>globalThis[xh]=!1)),globalThis[qn]||(globalThis[qn]=Tu().then(I=>globalThis[Bs]=I).catch(()=>globalThis[Bs]=!1)),globalThis[Eo]||(globalThis[Eo]=gh().then(I=>globalThis[Rh]=I).catch(()=>globalThis[Rh]=!1));const Fi=(I,A)=>{const M=A?[A]:(0,X.C6)(),j=[];return M.forEach(ee=>{ee.container.getProvider(I).instances.forEach(Ne=>{j.includes(Ne)||j.push(Ne)})}),j};function Es(){}class wo{constructor(A,M=Ah.N){this.zone=A,this.delegate=M}now(){return this.delegate.now()}schedule(A,M,j){const ee=this.zone;return this.delegate.schedule(function(Ne){ee.runGuarded(()=>{A.apply(this,[Ne])})},M,j)}}class bo{constructor(A){this.zone=A,this.task=null}call(A,M){const j=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Es,{},Es,Es)),M.pipe((0,aE.b)({next:j,complete:j,error:j})).subscribe(A).add(j)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Mh=(()=>{class I{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new wo(Zone.current)),this.insideAngular=M.run(()=>new wo(Zone.current,r_.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(M){return new(M||I)(m.LFG(m.R0b))},I.\u0275prov=m.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Co(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function xp(I){return I.pipe((0,Us.QV)(Co().outsideAngular))}function $n(I){return Co(),function(I){return function(M){return(M=M.lift(new bo(I.ngZone))).pipe((0,Va.R)(I.outsideAngular),(0,Us.QV)(I.insideAngular))}}(Co())(I)}},3854:(nt,Ce,V)=>{"use strict";V.d(Ce,{BH:()=>ue,LL:()=>Nt,ZR:()=>Te,gQ:()=>Me,zI:()=>Ue,hu:()=>L,g5:()=>ae,US:()=>me,tV:()=>U,h$:()=>J,L:()=>ne,$s:()=>Et,r3:()=>Ln,Sg:()=>fe,ne:()=>ur,p$:()=>G,vZ:()=>vn,ZB:()=>B,Lj:()=>Ut,gK:()=>Ir,pd:()=>Ti,m9:()=>un,z$:()=>pe,GJ:()=>Dt,jU:()=>he,ru:()=>Oe,d:()=>ht,xb:()=>sn,w1:()=>Qe,hl:()=>Se,uI:()=>Le,UG:()=>oe,Yr:()=>ut,b$:()=>$e,G6:()=>qe,Mn:()=>wt,w9:()=>Gn,cI:()=>An,UI:()=>Qn,X3:()=>mt,xO:()=>ro,zd:()=>ar,DV:()=>gn,ug:()=>He,dS:()=>xn,Pz:()=>Xt,Dv:()=>io,Wj:()=>Vn,lb:()=>rl,eu:()=>be});var m=V(8239);const L=function(z,H){if(!z)throw ae(H)},ae=function(z){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+z)},re=function(z){const H=[];let Q=0;for(let _e=0;_e<z.length;_e++){let se=z.charCodeAt(_e);se<128?H[Q++]=se:se<2048?(H[Q++]=se>>6|192,H[Q++]=63&se|128):55296==(64512&se)&&_e+1<z.length&&56320==(64512&z.charCodeAt(_e+1))?(se=65536+((1023&se)<<10)+(1023&z.charCodeAt(++_e)),H[Q++]=se>>18|240,H[Q++]=se>>12&63|128,H[Q++]=se>>6&63|128,H[Q++]=63&se|128):(H[Q++]=se>>12|224,H[Q++]=se>>6&63|128,H[Q++]=63&se|128)}return H},me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,H){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Q=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,_e=[];for(let se=0;se<z.length;se+=3){const je=z[se],_t=se+1<z.length,tn=_t?z[se+1]:0,Mr=se+2<z.length,Un=Mr?z[se+2]:0;let Mn=(15&tn)<<2|Un>>6,Br=63&Un;Mr||(Br=64,_t||(Mn=64)),_e.push(Q[je>>2],Q[(3&je)<<4|tn>>4],Q[Mn],Q[Br])}return _e.join("")},encodeString(z,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(z):this.encodeByteArray(re(z),H)},decodeString(z,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(z):function(z){const H=[];let Q=0,_e=0;for(;Q<z.length;){const se=z[Q++];if(se<128)H[_e++]=String.fromCharCode(se);else if(se>191&&se<224){const je=z[Q++];H[_e++]=String.fromCharCode((31&se)<<6|63&je)}else if(se>239&&se<365){const Mr=((7&se)<<18|(63&z[Q++])<<12|(63&z[Q++])<<6|63&z[Q++])-65536;H[_e++]=String.fromCharCode(55296+(Mr>>10)),H[_e++]=String.fromCharCode(56320+(1023&Mr))}else{const je=z[Q++],_t=z[Q++];H[_e++]=String.fromCharCode((15&se)<<12|(63&je)<<6|63&_t)}}return H.join("")}(this.decodeStringToByteArray(z,H))},decodeStringToByteArray(z,H){this.init_();const Q=H?this.charToByteMapWebSafe_:this.charToByteMap_,_e=[];for(let se=0;se<z.length;){const je=Q[z.charAt(se++)],tn=se<z.length?Q[z.charAt(se)]:0;++se;const Un=se<z.length?Q[z.charAt(se)]:64;++se;const lt=se<z.length?Q[z.charAt(se)]:64;if(++se,null==je||null==tn||null==Un||null==lt)throw Error();_e.push(je<<2|tn>>4),64!==Un&&(_e.push(tn<<4&240|Un>>2),64!==lt&&_e.push(Un<<6&192|lt))}return _e},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}},J=function(z){const H=re(z);return me.encodeByteArray(H,!0)},ne=function(z){return J(z).replace(/\./g,"")},U=function(z){try{return me.decodeString(z,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function G(z){return B(void 0,z)}function B(z,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return H}for(const Q in H)!H.hasOwnProperty(Q)||!te(Q)||(z[Q]=B(z[Q],H[Q]));return z}function te(z){return"__proto__"!==z}class ue{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,Q)=>{this.resolve=H,this.reject=Q})}wrapCallback(H){return(Q,_e)=>{Q?this.reject(Q):this.resolve(_e),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(Q):H(Q,_e))}}}function fe(z,H){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const _e=H||"demo-project",se=z.iat||0,je=z.sub||z.user_id;if(!je)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const _t=Object.assign({iss:`https://securetoken.google.com/${_e}`,aud:_e,iat:se,exp:se+3600,auth_time:se,sub:je,user_id:je,firebase:{sign_in_provider:"custom",identities:{}}},z);return[ne(JSON.stringify({alg:"none",type:"JWT"})),ne(JSON.stringify(_t)),""].join(".")}function pe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Le(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pe())}function oe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(z){return!1}}function he(){return"object"==typeof self&&self.self===self}function Oe(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function $e(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ht(){return pe().indexOf("Electron/")>=0}function Qe(){const z=pe();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function wt(){return pe().indexOf("MSAppHost/")>=0}function ut(){return!1}function qe(){return!oe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Se(){return"object"==typeof indexedDB}function be(){return new Promise((z,H)=>{try{let Q=!0;const _e="validate-browser-context-for-indexeddb-analytics-module",se=self.indexedDB.open(_e);se.onsuccess=()=>{se.result.close(),Q||self.indexedDB.deleteDatabase(_e),z(!0)},se.onupgradeneeded=()=>{Q=!1},se.onerror=()=>{var je;H((null===(je=se.error)||void 0===je?void 0:je.message)||"")}}catch(Q){H(Q)}})}function Ue(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Te extends Error{constructor(H,Q,_e){super(Q),this.code=H,this.customData=_e,this.name="FirebaseError",Object.setPrototypeOf(this,Te.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nt.prototype.create)}}class Nt{constructor(H,Q,_e){this.service=H,this.serviceName=Q,this.errors=_e}create(H,...Q){const _e=Q[0]||{},se=`${this.service}/${H}`,je=this.errors[H],_t=je?function(z,H){return z.replace($t,(Q,_e)=>{const se=H[_e];return null!=se?String(se):`<${_e}?>`})}(je,_e):"Error";return new Te(se,`${this.serviceName}: ${_t} (${se}).`,_e)}}const $t=/\{\$([^}]+)}/g;function An(z){return JSON.parse(z)}function Xt(z){return JSON.stringify(z)}const st=function(z){let H={},Q={},_e={},se="";try{const je=z.split(".");H=An(U(je[0])||""),Q=An(U(je[1])||""),se=je[2],_e=Q.d||{},delete Q.d}catch(je){}return{header:H,claims:Q,data:_e,signature:se}},Gn=function(z){const Q=st(z).claims;return!!Q&&"object"==typeof Q&&Q.hasOwnProperty("iat")},Dt=function(z){const H=st(z).claims;return"object"==typeof H&&!0===H.admin};function Ln(z,H){return Object.prototype.hasOwnProperty.call(z,H)}function gn(z,H){if(Object.prototype.hasOwnProperty.call(z,H))return z[H]}function sn(z){for(const H in z)if(Object.prototype.hasOwnProperty.call(z,H))return!1;return!0}function Qn(z,H,Q){const _e={};for(const se in z)Object.prototype.hasOwnProperty.call(z,se)&&(_e[se]=H.call(Q,z[se],se,z));return _e}function vn(z,H){if(z===H)return!0;const Q=Object.keys(z),_e=Object.keys(H);for(const se of Q){if(!_e.includes(se))return!1;const je=z[se],_t=H[se];if(In(je)&&In(_t)){if(!vn(je,_t))return!1}else if(je!==_t)return!1}for(const se of _e)if(!Q.includes(se))return!1;return!0}function In(z){return null!==z&&"object"==typeof z}function ro(z){const H=[];for(const[Q,_e]of Object.entries(z))Array.isArray(_e)?_e.forEach(se=>{H.push(encodeURIComponent(Q)+"="+encodeURIComponent(se))}):H.push(encodeURIComponent(Q)+"="+encodeURIComponent(_e));return H.length?"&"+H.join("&"):""}function ar(z){const H={};return z.replace(/^\?/,"").split("&").forEach(_e=>{if(_e){const[se,je]=_e.split("=");H[decodeURIComponent(se)]=decodeURIComponent(je)}}),H}function Ti(z){const H=z.indexOf("?");if(!H)return"";const Q=z.indexOf("#",H);return z.substring(H,Q>0?Q:void 0)}class Me{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let H=1;H<this.blockSize;++H)this.pad_[H]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(H,Q){Q||(Q=0);const _e=this.W_;if("string"==typeof H)for(let lt=0;lt<16;lt++)_e[lt]=H.charCodeAt(Q)<<24|H.charCodeAt(Q+1)<<16|H.charCodeAt(Q+2)<<8|H.charCodeAt(Q+3),Q+=4;else for(let lt=0;lt<16;lt++)_e[lt]=H[Q]<<24|H[Q+1]<<16|H[Q+2]<<8|H[Q+3],Q+=4;for(let lt=16;lt<80;lt++){const Mn=_e[lt-3]^_e[lt-8]^_e[lt-14]^_e[lt-16];_e[lt]=4294967295&(Mn<<1|Mn>>>31)}let Un,zi,se=this.chain_[0],je=this.chain_[1],_t=this.chain_[2],tn=this.chain_[3],Mr=this.chain_[4];for(let lt=0;lt<80;lt++){lt<40?lt<20?(Un=tn^je&(_t^tn),zi=1518500249):(Un=je^_t^tn,zi=1859775393):lt<60?(Un=je&_t|tn&(je|_t),zi=2400959708):(Un=je^_t^tn,zi=3395469782);const Mn=(se<<5|se>>>27)+Un+Mr+zi+_e[lt]&4294967295;Mr=tn,tn=_t,_t=4294967295&(je<<30|je>>>2),je=se,se=Mn}this.chain_[0]=this.chain_[0]+se&4294967295,this.chain_[1]=this.chain_[1]+je&4294967295,this.chain_[2]=this.chain_[2]+_t&4294967295,this.chain_[3]=this.chain_[3]+tn&4294967295,this.chain_[4]=this.chain_[4]+Mr&4294967295}update(H,Q){if(null==H)return;void 0===Q&&(Q=H.length);const _e=Q-this.blockSize;let se=0;const je=this.buf_;let _t=this.inbuf_;for(;se<Q;){if(0===_t)for(;se<=_e;)this.compress_(H,se),se+=this.blockSize;if("string"==typeof H){for(;se<Q;)if(je[_t]=H.charCodeAt(se),++_t,++se,_t===this.blockSize){this.compress_(je),_t=0;break}}else for(;se<Q;)if(je[_t]=H[se],++_t,++se,_t===this.blockSize){this.compress_(je),_t=0;break}}this.inbuf_=_t,this.total_+=Q}digest(){const H=[];let Q=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let se=this.blockSize-1;se>=56;se--)this.buf_[se]=255&Q,Q/=256;this.compress_(this.buf_);let _e=0;for(let se=0;se<5;se++)for(let je=24;je>=0;je-=8)H[_e]=this.chain_[se]>>je&255,++_e;return H}}function ur(z,H){const Q=new Ke(z,H);return Q.subscribe.bind(Q)}class Ke{constructor(H,Q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Q,this.task.then(()=>{H(this)}).catch(_e=>{this.error(_e)})}next(H){this.forEachObserver(Q=>{Q.next(H)})}error(H){this.forEachObserver(Q=>{Q.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,Q,_e){let se;if(void 0===H&&void 0===Q&&void 0===_e)throw new Error("Missing Observer.");se=function(z,H){if("object"!=typeof z||null===z)return!1;for(const Q of["next","error","complete"])if(Q in z&&"function"==typeof z[Q])return!0;return!1}(H)?H:{next:H,error:Q,complete:_e},void 0===se.next&&(se.next=gr),void 0===se.error&&(se.error=gr),void 0===se.complete&&(se.complete=gr);const je=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?se.error(this.finalError):se.complete()}catch(_t){}}),this.observers.push(se),je}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let Q=0;Q<this.observers.length;Q++)this.sendOne(Q,H)}sendOne(H,Q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{Q(this.observers[H])}catch(_e){"undefined"!=typeof console&&console.error&&console.error(_e)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gr(){}const io=function(z,H,Q,_e){let se;if(_e<H?se="at least "+H:_e>Q&&(se=0===Q?"none":"no more than "+Q),se)throw new Error(z+" failed: Was called with "+_e+(1===_e?" argument.":" arguments.")+" Expects "+se+".")};function Ir(z,H){return`${z} failed: ${H} argument `}function Vn(z,H,Q,_e){if((!_e||Q)&&"function"!=typeof Q)throw new Error(Ir(z,H)+"must be a valid function.")}function rl(z,H,Q,_e){if((!_e||Q)&&("object"!=typeof Q||null===Q))throw new Error(Ir(z,H)+"must be a valid context object.")}const xn=function(z){const H=[];let Q=0;for(let _e=0;_e<z.length;_e++){let se=z.charCodeAt(_e);if(se>=55296&&se<=56319){const je=se-55296;_e++,L(_e<z.length,"Surrogate pair missing trail surrogate."),se=65536+(je<<10)+(z.charCodeAt(_e)-56320)}se<128?H[Q++]=se:se<2048?(H[Q++]=se>>6|192,H[Q++]=63&se|128):se<65536?(H[Q++]=se>>12|224,H[Q++]=se>>6&63|128,H[Q++]=63&se|128):(H[Q++]=se>>18|240,H[Q++]=se>>12&63|128,H[Q++]=se>>6&63|128,H[Q++]=63&se|128)}return H},He=function(z){let H=0;for(let Q=0;Q<z.length;Q++){const _e=z.charCodeAt(Q);_e<128?H++:_e<2048?H+=2:_e>=55296&&_e<=56319?(H+=4,Q++):H+=3}return H};function Et(z,H=1e3,Q=2){const _e=H*Math.pow(Q,z),se=Math.round(.5*_e*(Math.random()-.5)*2);return Math.min(144e5,_e+se)}function un(z){return z&&z._delegate?z._delegate:z}function kt(z,H){return new Promise((Q,_e)=>{z.onsuccess=se=>{Q(se.target.result)},z.onerror=se=>{var je;_e(`${H}: ${null===(je=se.target.error)||void 0===je?void 0:je.message}`)}})}class St{constructor(H){this._db=H,this.objectStoreNames=this._db.objectStoreNames}transaction(H,Q="readonly"){return new Ze(this._db.transaction.call(this._db,H,Q))}createObjectStore(H,Q){return new Ae(this._db.createObjectStore(H,Q))}close(){this._db.close()}}class Ze{constructor(H){this._transaction=H,this.complete=new Promise((Q,_e)=>{this._transaction.oncomplete=function(){Q()},this._transaction.onerror=()=>{_e(this._transaction.error)},this._transaction.onabort=()=>{_e(this._transaction.error)}})}objectStore(H){return new Ae(this._transaction.objectStore(H))}}class Ae{constructor(H){this._store=H}index(H){return new ot(this._store.index(H))}createIndex(H,Q,_e){return new ot(this._store.createIndex(H,Q,_e))}get(H){return kt(this._store.get(H),"Error reading from IndexedDB")}put(H,Q){return kt(this._store.put(H,Q),"Error writing to IndexedDB")}delete(H){return kt(this._store.delete(H),"Error deleting from IndexedDB")}clear(){return kt(this._store.clear(),"Error clearing IndexedDB object store")}}class ot{constructor(H){this._index=H}get(H){return kt(this._index.get(H),"Error reading from IndexedDB")}}function mt(z,H,Q){return new Promise((_e,se)=>{try{const je=indexedDB.open(z,H);je.onsuccess=_t=>{_e(new St(_t.target.result))},je.onerror=_t=>{var tn;se(`Error opening indexedDB: ${null===(tn=_t.target.error)||void 0===tn?void 0:tn.message}`)},je.onupgradeneeded=_t=>{Q(new St(je.result),_t.oldVersion,_t.newVersion,new Ze(je.transaction))}}catch(je){se(`Error opening indexedDB: ${je.message}`)}})}function Ut(z){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,m.Z)(function*(z){return new Promise((H,Q)=>{try{const _e=indexedDB.deleteDatabase(z);_e.onsuccess=()=>{H()},_e.onerror=se=>{var je;Q(`Error deleting indexedDB database "${z}": ${null===(je=se.target.error)||void 0===je?void 0:je.message}`)}}catch(_e){Q(`Error deleting indexedDB database "${z}": ${_e.message}`)}})})).apply(this,arguments)}},8873:function(nt){nt.exports=function(){"use strict";var V=6e4,m=36e5,X="millisecond",L="second",ae="minute",re="hour",Z="day",me="week",J="month",ne="quarter",U="year",G="date",B="Invalid Date",te=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,ue=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,fe={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},pe=function(qe,Se,be){var Ue=String(qe);return!Ue||Ue.length>=Se?qe:""+Array(Se+1-Ue.length).join(be)+qe},Le={s:pe,z:function(qe){var Se=-qe.utcOffset(),be=Math.abs(Se),Ue=Math.floor(be/60),Ie=be%60;return(Se<=0?"+":"-")+pe(Ue,2,"0")+":"+pe(Ie,2,"0")},m:function qe(Se,be){if(Se.date()<be.date())return-qe(be,Se);var Ue=12*(be.year()-Se.year())+(be.month()-Se.month()),Ie=Se.clone().add(Ue,J),Be=be-Ie<0,Te=Se.clone().add(Ue+(Be?-1:1),J);return+(-(Ue+(be-Ie)/(Be?Ie-Te:Te-Ie))||0)},a:function(qe){return qe<0?Math.ceil(qe)||0:Math.floor(qe)},p:function(qe){return{M:J,y:U,w:me,d:Z,D:G,h:re,m:ae,s:L,ms:X,Q:ne}[qe]||String(qe||"").toLowerCase().replace(/s$/,"")},u:function(qe){return void 0===qe}},oe="en",he={};he[oe]=fe;var Oe=function(qe){return qe instanceof wt},$e=function qe(Se,be,Ue){var Ie;if(!Se)return oe;if("string"==typeof Se){var Be=Se.toLowerCase();he[Be]&&(Ie=Be),be&&(he[Be]=be,Ie=Be);var Te=Se.split("-");if(!Ie&&Te.length>1)return qe(Te[0])}else{var Nt=Se.name;he[Nt]=Se,Ie=Nt}return!Ue&&Ie&&(oe=Ie),Ie||!Ue&&oe},ht=function(qe,Se){if(Oe(qe))return qe.clone();var be="object"==typeof Se?Se:{};return be.date=qe,be.args=arguments,new wt(be)},Qe=Le;Qe.l=$e,Qe.i=Oe,Qe.w=function(qe,Se){return ht(qe,{locale:Se.$L,utc:Se.$u,x:Se.$x,$offset:Se.$offset})};var wt=function(){function qe(be){this.$L=$e(be.locale,null,!0),this.parse(be)}var Se=qe.prototype;return Se.parse=function(be){this.$d=function(Ue){var Ie=Ue.date,Be=Ue.utc;if(null===Ie)return new Date(NaN);if(Qe.u(Ie))return new Date;if(Ie instanceof Date)return new Date(Ie);if("string"==typeof Ie&&!/Z$/i.test(Ie)){var Te=Ie.match(te);if(Te){var Nt=Te[2]-1||0,dn=(Te[7]||"0").substring(0,3);return Be?new Date(Date.UTC(Te[1],Nt,Te[3]||1,Te[4]||0,Te[5]||0,Te[6]||0,dn)):new Date(Te[1],Nt,Te[3]||1,Te[4]||0,Te[5]||0,Te[6]||0,dn)}}return new Date(Ie)}(be),this.$x=be.x||{},this.init()},Se.init=function(){var be=this.$d;this.$y=be.getFullYear(),this.$M=be.getMonth(),this.$D=be.getDate(),this.$W=be.getDay(),this.$H=be.getHours(),this.$m=be.getMinutes(),this.$s=be.getSeconds(),this.$ms=be.getMilliseconds()},Se.$utils=function(){return Qe},Se.isValid=function(){return this.$d.toString()!==B},Se.isSame=function(be,Ue){var Ie=ht(be);return this.startOf(Ue)<=Ie&&Ie<=this.endOf(Ue)},Se.isAfter=function(be,Ue){return ht(be)<this.startOf(Ue)},Se.isBefore=function(be,Ue){return this.endOf(Ue)<ht(be)},Se.$g=function(be,Ue,Ie){return Qe.u(be)?this[Ue]:this.set(Ie,be)},Se.unix=function(){return Math.floor(this.valueOf()/1e3)},Se.valueOf=function(){return this.$d.getTime()},Se.startOf=function(be,Ue){var Ie=this,Be=!!Qe.u(Ue)||Ue,Te=Qe.p(be),Nt=function(Gn,Dt){var Ln=Qe.w(Ie.$u?Date.UTC(Ie.$y,Dt,Gn):new Date(Ie.$y,Dt,Gn),Ie);return Be?Ln:Ln.endOf(Z)},dn=function(Gn,Dt){return Qe.w(Ie.toDate()[Gn].apply(Ie.toDate("s"),(Be?[0,0,0,0]:[23,59,59,999]).slice(Dt)),Ie)},$t=this.$W,An=this.$M,Xt=this.$D,st="set"+(this.$u?"UTC":"");switch(Te){case U:return Be?Nt(1,0):Nt(31,11);case J:return Be?Nt(1,An):Nt(0,An+1);case me:var Nr=this.$locale().weekStart||0,mi=($t<Nr?$t+7:$t)-Nr;return Nt(Be?Xt-mi:Xt+(6-mi),An);case Z:case G:return dn(st+"Hours",0);case re:return dn(st+"Minutes",1);case ae:return dn(st+"Seconds",2);case L:return dn(st+"Milliseconds",3);default:return this.clone()}},Se.endOf=function(be){return this.startOf(be,!1)},Se.$set=function(be,Ue){var Ie,Be=Qe.p(be),Te="set"+(this.$u?"UTC":""),Nt=(Ie={},Ie[Z]=Te+"Date",Ie[G]=Te+"Date",Ie[J]=Te+"Month",Ie[U]=Te+"FullYear",Ie[re]=Te+"Hours",Ie[ae]=Te+"Minutes",Ie[L]=Te+"Seconds",Ie[X]=Te+"Milliseconds",Ie)[Be],dn=Be===Z?this.$D+(Ue-this.$W):Ue;if(Be===J||Be===U){var $t=this.clone().set(G,1);$t.$d[Nt](dn),$t.init(),this.$d=$t.set(G,Math.min(this.$D,$t.daysInMonth())).$d}else Nt&&this.$d[Nt](dn);return this.init(),this},Se.set=function(be,Ue){return this.clone().$set(be,Ue)},Se.get=function(be){return this[Qe.p(be)]()},Se.add=function(be,Ue){var Ie,Be=this;be=Number(be);var Te=Qe.p(Ue),Nt=function(An){var Xt=ht(Be);return Qe.w(Xt.date(Xt.date()+Math.round(An*be)),Be)};if(Te===J)return this.set(J,this.$M+be);if(Te===U)return this.set(U,this.$y+be);if(Te===Z)return Nt(1);if(Te===me)return Nt(7);var dn=(Ie={},Ie[ae]=V,Ie[re]=m,Ie[L]=1e3,Ie)[Te]||1,$t=this.$d.getTime()+be*dn;return Qe.w($t,this)},Se.subtract=function(be,Ue){return this.add(-1*be,Ue)},Se.format=function(be){var Ue=this,Ie=this.$locale();if(!this.isValid())return Ie.invalidDate||B;var Be=be||"YYYY-MM-DDTHH:mm:ssZ",Te=Qe.z(this),Nt=this.$H,dn=this.$m,$t=this.$M,An=Ie.weekdays,Xt=Ie.months,st=function(Dt,Ln,gn,sn){return Dt&&(Dt[Ln]||Dt(Ue,Be))||gn[Ln].slice(0,sn)},Nr=function(Dt){return Qe.s(Nt%12||12,Dt,"0")},mi=Ie.meridiem||function(Dt,Ln,gn){var sn=Dt<12?"AM":"PM";return gn?sn.toLowerCase():sn},Gn={YY:String(this.$y).slice(-2),YYYY:this.$y,M:$t+1,MM:Qe.s($t+1,2,"0"),MMM:st(Ie.monthsShort,$t,Xt,3),MMMM:st(Xt,$t),D:this.$D,DD:Qe.s(this.$D,2,"0"),d:String(this.$W),dd:st(Ie.weekdaysMin,this.$W,An,2),ddd:st(Ie.weekdaysShort,this.$W,An,3),dddd:An[this.$W],H:String(Nt),HH:Qe.s(Nt,2,"0"),h:Nr(1),hh:Nr(2),a:mi(Nt,dn,!0),A:mi(Nt,dn,!1),m:String(dn),mm:Qe.s(dn,2,"0"),s:String(this.$s),ss:Qe.s(this.$s,2,"0"),SSS:Qe.s(this.$ms,3,"0"),Z:Te};return Be.replace(ue,function(Dt,Ln){return Ln||Gn[Dt]||Te.replace(":","")})},Se.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},Se.diff=function(be,Ue,Ie){var Be,Te=Qe.p(Ue),Nt=ht(be),dn=(Nt.utcOffset()-this.utcOffset())*V,$t=this-Nt,An=Qe.m(this,Nt);return An=(Be={},Be[U]=An/12,Be[J]=An,Be[ne]=An/3,Be[me]=($t-dn)/6048e5,Be[Z]=($t-dn)/864e5,Be[re]=$t/m,Be[ae]=$t/V,Be[L]=$t/1e3,Be)[Te]||$t,Ie?An:Qe.a(An)},Se.daysInMonth=function(){return this.endOf(J).$D},Se.$locale=function(){return he[this.$L]},Se.locale=function(be,Ue){if(!be)return this.$L;var Ie=this.clone(),Be=$e(be,Ue,!0);return Be&&(Ie.$L=Be),Ie},Se.clone=function(){return Qe.w(this.$d,this)},Se.toDate=function(){return new Date(this.valueOf())},Se.toJSON=function(){return this.isValid()?this.toISOString():null},Se.toISOString=function(){return this.$d.toISOString()},Se.toString=function(){return this.$d.toUTCString()},qe}(),ut=wt.prototype;return ht.prototype=ut,[["$ms",X],["$s",L],["$m",ae],["$H",re],["$W",Z],["$M",J],["$y",U],["$D",G]].forEach(function(qe){ut[qe[1]]=function(Se){return this.$g(Se,qe[0],qe[1])}}),ht.extend=function(qe,Se){return qe.$i||(qe(Se,wt,ht),qe.$i=!0),ht},ht.locale=$e,ht.isDayjs=Oe,ht.unix=function(qe){return ht(1e3*qe)},ht.en=he[oe],ht.Ls=he,ht.p={},ht}()},4292:function(nt){nt.exports=function(){"use strict";var Ce={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},V=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,m=/\d\d/,X=/\d\d?/,L=/\d*[^\s\d-_:/()]+/,ae={},re=function(B){return(B=+B)+(B>68?1900:2e3)},Z=function(B){return function(te){this[B]=+te}},me=[/[+-]\d\d:?(\d\d)?|Z/,function(B){(this.zone||(this.zone={})).offset=function(te){if(!te||"Z"===te)return 0;var ue=te.match(/([+-]|\d\d)/g),fe=60*ue[1]+(+ue[2]||0);return 0===fe?0:"+"===ue[0]?-fe:fe}(B)}],J=function(B){var te=ae[B];return te&&(te.indexOf?te:te.s.concat(te.f))},ne=function(B,te){var ue,fe=ae.meridiem;if(fe){for(var pe=1;pe<=24;pe+=1)if(B.indexOf(fe(pe,0,te))>-1){ue=pe>12;break}}else ue=B===(te?"pm":"PM");return ue},U={A:[L,function(B){this.afternoon=ne(B,!1)}],a:[L,function(B){this.afternoon=ne(B,!0)}],S:[/\d/,function(B){this.milliseconds=100*+B}],SS:[m,function(B){this.milliseconds=10*+B}],SSS:[/\d{3}/,function(B){this.milliseconds=+B}],s:[X,Z("seconds")],ss:[X,Z("seconds")],m:[X,Z("minutes")],mm:[X,Z("minutes")],H:[X,Z("hours")],h:[X,Z("hours")],HH:[X,Z("hours")],hh:[X,Z("hours")],D:[X,Z("day")],DD:[m,Z("day")],Do:[L,function(B){var te=ae.ordinal,ue=B.match(/\d+/);if(this.day=ue[0],te)for(var fe=1;fe<=31;fe+=1)te(fe).replace(/\[|\]/g,"")===B&&(this.day=fe)}],M:[X,Z("month")],MM:[m,Z("month")],MMM:[L,function(B){var te=J("months"),ue=(J("monthsShort")||te.map(function(fe){return fe.slice(0,3)})).indexOf(B)+1;if(ue<1)throw new Error;this.month=ue%12||ue}],MMMM:[L,function(B){var te=J("months").indexOf(B)+1;if(te<1)throw new Error;this.month=te%12||te}],Y:[/[+-]?\d+/,Z("year")],YY:[m,function(B){this.year=re(B)}],YYYY:[/\d{4}/,Z("year")],Z:me,ZZ:me};return function(B,te,ue){ue.p.customParseFormat=!0,B&&B.parseTwoDigitYear&&(re=B.parseTwoDigitYear);var fe=te.prototype,pe=fe.parse;fe.parse=function(Le){var oe=Le.date,he=Le.utc,Oe=Le.args;this.$u=he;var $e=Oe[1];if("string"==typeof $e){var ht=!0===Oe[2],Qe=!0===Oe[3],wt=ht||Qe,ut=Oe[2];Qe&&(ut=Oe[2]),ae=this.$locale(),!ht&&ut&&(ae=ue.Ls[ut]),this.$d=function(Ue,Ie,Be){try{if(["x","X"].indexOf(Ie)>-1)return new Date(("X"===Ie?1e3:1)*Ue);var Te=function(B){var ue;ue=ae&&ae.formats;for(var fe=(B=B.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(ht,Qe,wt){var ut=wt&&wt.toUpperCase();return Qe||ue[wt]||Ce[wt]||ue[ut].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(qe,Se,be){return Se||be.slice(1)})})).match(V),pe=fe.length,Le=0;Le<pe;Le+=1){var oe=fe[Le],he=U[oe],$e=he&&he[1];fe[Le]=$e?{regex:he&&he[0],parser:$e}:oe.replace(/^\[|\]$/g,"")}return function(ht){for(var Qe={},wt=0,ut=0;wt<pe;wt+=1){var qe=fe[wt];if("string"==typeof qe)ut+=qe.length;else{var Se=qe.regex,be=qe.parser,Ue=ht.slice(ut),Ie=Se.exec(Ue)[0];be.call(Qe,Ie),ht=ht.replace(Ie,"")}}return function(Be){var Te=Be.afternoon;if(void 0!==Te){var Nt=Be.hours;Te?Nt<12&&(Be.hours+=12):12===Nt&&(Be.hours=0),delete Be.afternoon}}(Qe),Qe}}(Ie)(Ue),Nt=Te.year,dn=Te.month,$t=Te.day,An=Te.hours,Xt=Te.minutes,st=Te.seconds,Nr=Te.milliseconds,mi=Te.zone,Gn=new Date,Dt=$t||(Nt||dn?1:Gn.getDate()),Ln=Nt||Gn.getFullYear(),gn=0;Nt&&!dn||(gn=dn>0?dn-1:Gn.getMonth());var sn=An||0,Qn=Xt||0,vn=st||0,In=Nr||0;return mi?new Date(Date.UTC(Ln,gn,Dt,sn,Qn,vn,In+60*mi.offset*1e3)):Be?new Date(Date.UTC(Ln,gn,Dt,sn,Qn,vn,In)):new Date(Ln,gn,Dt,sn,Qn,vn,In)}catch(ro){return new Date("")}}(oe,$e,he),this.init(),ut&&!0!==ut&&(this.$L=this.locale(ut).$L),wt&&oe!=this.format($e)&&(this.$d=new Date("")),ae={}}else if($e instanceof Array)for(var qe=$e.length,Se=1;Se<=qe;Se+=1){Oe[1]=$e[Se-1];var be=ue.apply(this,Oe);if(be.isValid()){this.$d=be.$d,this.$L=be.$L,this.init();break}Se===qe&&(this.$d=new Date(""))}else pe.call(this,Le)}}}()},2329:(nt,Ce,V)=>{"use strict";V.d(Ce,{Mq:()=>m.getApp,C6:()=>m.getApps});var m=V(8026);(0,m.registerVersion)("firebase","9.6.11","app")},7841:(nt,Ce,V)=>{"use strict";V.d(Ce,{Z:()=>m.Z});var m=V(3394);m.Z.registerVersion("firebase","9.6.11","app-compat")},3259:(nt,Ce,V)=>{"use strict";V.r(Ce);var m=V(8239),X=V(3394),L=V(3854),ae=V(8026);function J(v,f){var g={};for(var w in v)Object.prototype.hasOwnProperty.call(v,w)&&f.indexOf(w)<0&&(g[w]=v[w]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var D=0;for(w=Object.getOwnPropertySymbols(v);D<w.length;D++)f.indexOf(w[D])<0&&Object.prototype.propertyIsEnumerable.call(v,w[D])&&(g[w[D]]=v[w[D]])}return g}var Te=V(5422),Nt=V(3910);const Gn=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Dt=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ln=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),sn=new Te.Yd("@firebase/auth");function Qn(v,...f){sn.logLevel<=Te.in.ERROR&&sn.error(`Auth (${ae.SDK_VERSION}): ${v}`,...f)}function vn(v,...f){throw Ti(v,...f)}function In(v,...f){return Ti(v,...f)}function ro(v,f,g){const w=Object.assign(Object.assign({},Dt()),{[f]:g});return new L.LL("auth","Firebase",w).create(f,{appName:v.name})}function ar(v,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&vn(v,"argument-error"),ro(v,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ti(v,...f){if("string"!=typeof v){const g=f[0],w=[...f.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(g,...w)}return Ln.create(v,...f)}function Me(v,f,...g){if(!v)throw Ti(f,...g)}function ur(v){const f="INTERNAL ASSERTION FAILED: "+v;throw Qn(f),new Error(f)}function Ke(v,f){v||ur(f)}const Jn=new Map;function Wn(v){Ke(v instanceof Function,"Expected a class definition");let f=Jn.get(v);return f?(Ke(f instanceof v,"Instance stored in cache mismatched with class"),f):(f=new v,Jn.set(v,f),f)}function Ir(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Tr(){return"http:"===Vn()||"https:"===Vn()}function Vn(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class He{constructor(f,g){this.shortDelay=f,this.longDelay=g,Ke(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Tr()||(0,L.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function gt(v,f){Ke(v.emulator,"Emulator should always be set here");const{url:g}=v.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class Rs{static initialize(f,g,w){this.fetchImpl=f,g&&(this.headersImpl=g),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ur("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ur("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ur("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ns={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},_i=new He(3e4,6e4);function Et(v,f){return v.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:v.tenantId}):f}function on(v,f,g,w){return so.apply(this,arguments)}function so(){return(so=(0,m.Z)(function*(v,f,g,w,D={}){return un(v,D,(0,m.Z)(function*(){let N={},q={};w&&("GET"===f?q=w:N={body:JSON.stringify(w)});const le=(0,L.xO)(Object.assign({key:v.config.apiKey},q)).slice(1),Ve=yield v._getAdditionalHeaders();return Ve["Content-Type"]="application/json",v.languageCode&&(Ve["X-Firebase-Locale"]=v.languageCode),Rs.fetch()(Ae(v,v.config.apiHost,g,le),Object.assign({method:f,headers:Ve,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function un(v,f,g){return kt.apply(this,arguments)}function kt(){return(kt=(0,m.Z)(function*(v,f,g){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},Ns),f);try{const D=new ot(v),N=yield Promise.race([g(),D.promise]);D.clearNetworkTimeout();const q=yield N.json();if("needConfirmation"in q)throw mt(v,"account-exists-with-different-credential",q);if(N.ok&&!("errorMessage"in q))return q;{const le=N.ok?q.errorMessage:q.error.message,[Ve,Re]=le.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ve)throw mt(v,"credential-already-in-use",q);if("EMAIL_EXISTS"===Ve)throw mt(v,"email-already-in-use",q);const Je=w[Ve]||Ve.toLowerCase().replace(/[_\s]+/g,"-");if(Re)throw ro(v,Je,Re);vn(v,Je)}}catch(D){if(D instanceof L.ZR)throw D;vn(v,"network-request-failed")}})).apply(this,arguments)}function St(v,f,g,w){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,m.Z)(function*(v,f,g,w,D={}){const N=yield on(v,f,g,w,D);return"mfaPendingCredential"in N&&vn(v,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function Ae(v,f,g,w){const D=`${f}${g}?${w}`;return v.config.emulator?gt(v.config,D):`${v.config.apiScheme}://${D}`}class ot{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,w)=>{this.timer=setTimeout(()=>w(In(this.auth,"network-request-failed")),_i.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function mt(v,f,g){const w={appName:v.name};g.email&&(w.email=g.email),g.phoneNumber&&(w.phoneNumber=g.phoneNumber);const D=In(v,f,w);return D.customData._tokenResponse=g,D}function Qt(){return(Qt=(0,m.Z)(function*(v,f){return on(v,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function z(v,f){return H.apply(this,arguments)}function H(){return(H=(0,m.Z)(function*(v,f){return on(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Q(v,f){return _e.apply(this,arguments)}function _e(){return(_e=(0,m.Z)(function*(v,f){return on(v,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function se(v){if(v)try{const f=new Date(Number(v));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function tn(){return(tn=(0,m.Z)(function*(v,f=!1){const g=(0,L.m9)(v),w=yield g.getIdToken(f),D=Un(w);Me(D&&D.exp&&D.auth_time&&D.iat,g.auth,"internal-error");const N="object"==typeof D.firebase?D.firebase:void 0,q=null==N?void 0:N.sign_in_provider;return{claims:D,token:w,authTime:se(Mr(D.auth_time)),issuedAtTime:se(Mr(D.iat)),expirationTime:se(Mr(D.exp)),signInProvider:q||null,signInSecondFactor:(null==N?void 0:N.sign_in_second_factor)||null}})).apply(this,arguments)}function Mr(v){return 1e3*Number(v)}function Un(v){const[f,g,w]=v.split(".");if(void 0===f||void 0===g||void 0===w)return Qn("JWT malformed, contained fewer than 3 sections"),null;try{const D=(0,L.tV)(g);return D?JSON.parse(D):(Qn("Failed to decode base64 JWT payload"),null)}catch(D){return Qn("Caught error parsing JWT payload as JSON",D),null}}function lt(v,f){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,m.Z)(function*(v,f,g=!1){if(g)return f;try{return yield f}catch(w){throw w instanceof L.ZR&&Br(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}function Br({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Pr{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const D=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,D)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const w=this.getInterval(f);this.timerId=setTimeout((0,m.Z)(function*(){yield g.iteration()}),w)}iteration(){var f=this;return(0,m.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&f.schedule(!0))}f.schedule()})()}}class hp{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=se(this.lastLoginAt),this.creationTime=se(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Dr(v){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,m.Z)(function*(v){var f;const g=v.auth,w=yield v.getIdToken(),D=yield lt(v,Q(g,{idToken:w}));Me(null==D?void 0:D.users.length,g,"internal-error");const N=D.users[0];v._notifyReloadListener(N);const q=(null===(f=N.providerUserInfo)||void 0===f?void 0:f.length)?Go(N.providerUserInfo):[],le=yi(v.providerData,q),Je=!!v.isAnonymous&&!(v.email&&N.passwordHash||(null==le?void 0:le.length)),rt={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:le,metadata:new hp(N.createdAt,N.lastLoginAt),isAnonymous:Je};Object.assign(v,rt)})).apply(this,arguments)}function hn(){return(hn=(0,m.Z)(function*(v){const f=(0,L.m9)(v);yield Dr(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function yi(v,f){return[...v.filter(w=>!f.some(D=>D.providerId===w.providerId)),...f]}function Go(v){return v.map(f=>{var{providerId:g}=f,w=J(f,["providerId"]);return{providerId:g,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function Ki(){return(Ki=(0,m.Z)(function*(v,f){const g=yield un(v,{},(0,m.Z)(function*(){const w=(0,L.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:D,apiKey:N}=v.config,q=Ae(v,D,"/v1/token",`key=${N}`),le=yield v._getAdditionalHeaders();return le["Content-Type"]="application/x-www-form-urlencoded",Rs.fetch()(q,{method:"POST",headers:le,body:w})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class En{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){Me(f.idToken,"internal-error"),Me(void 0!==f.idToken,"internal-error"),Me(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function(v){const f=Un(v);return Me(f,"internal-error"),Me(void 0!==f.exp,"internal-error"),Me(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var w=this;return(0,m.Z)(function*(){return Me(!w.accessToken||w.refreshToken,f,"user-token-expired"),g||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(f,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var w=this;return(0,m.Z)(function*(){const{accessToken:D,refreshToken:N,expiresIn:q}=yield function(v,f){return Ki.apply(this,arguments)}(f,g);w.updateTokensAndExpiration(D,N,Number(q))})()}updateTokensAndExpiration(f,g,w){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(f,g){const{refreshToken:w,accessToken:D,expirationTime:N}=g,q=new En;return w&&(Me("string"==typeof w,"internal-error",{appName:f}),q.refreshToken=w),D&&(Me("string"==typeof D,"internal-error",{appName:f}),q.accessToken=D),N&&(Me("number"==typeof N,"internal-error",{appName:f}),q.expirationTime=N),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new En,this.toJSON())}_performRefresh(){return ur("not implemented")}}function vi(v,f){Me("string"==typeof v||void 0===v,"internal-error",{appName:f})}class Di{constructor(f){var{uid:g,auth:w,stsTokenManager:D}=f,N=J(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Pr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=w,this.stsTokenManager=D,this.accessToken=D.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new hp(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,m.Z)(function*(){const w=yield lt(g,g.stsTokenManager.getToken(g.auth,f));return Me(w,g.auth,"internal-error"),g.accessToken!==w&&(g.accessToken=w,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),w})()}getIdTokenResult(f){return function(v){return tn.apply(this,arguments)}(this,f)}reload(){return function(v){return hn.apply(this,arguments)}(this)}_assign(f){this!==f&&(Me(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new Di(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var w=this;return(0,m.Z)(function*(){let D=!1;f.idToken&&f.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(f),D=!0),g&&(yield Dr(w)),yield w.auth._persistUserIfCurrent(w),D&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var f=this;return(0,m.Z)(function*(){const g=yield f.getIdToken();return yield lt(f,function(v,f){return Qt.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var w,D,N,q,le,Ve,Re,Je;const rt=null!==(w=g.displayName)&&void 0!==w?w:void 0,en=null!==(D=g.email)&&void 0!==D?D:void 0,vr=null!==(N=g.phoneNumber)&&void 0!==N?N:void 0,Qa=null!==(q=g.photoURL)&&void 0!==q?q:void 0,Qh=null!==(le=g.tenantId)&&void 0!==le?le:void 0,fd=null!==(Ve=g._redirectEventId)&&void 0!==Ve?Ve:void 0,C_=null!==(Re=g.createdAt)&&void 0!==Re?Re:void 0,I_=null!==(Je=g.lastLoginAt)&&void 0!==Je?Je:void 0,{uid:ug,emailVerified:pd,isAnonymous:gd,providerData:Jh,stsTokenManager:aa}=g;Me(ug&&aa,f,"internal-error");const IE=En.fromJSON(this.name,aa);Me("string"==typeof ug,f,"internal-error"),vi(rt,f.name),vi(en,f.name),Me("boolean"==typeof pd,f,"internal-error"),Me("boolean"==typeof gd,f,"internal-error"),vi(vr,f.name),vi(Qa,f.name),vi(Qh,f.name),vi(fd,f.name),vi(C_,f.name),vi(I_,f.name);const lg=new Di({uid:ug,auth:f,email:en,emailVerified:pd,displayName:rt,isAnonymous:gd,photoURL:Qa,phoneNumber:vr,tenantId:Qh,stsTokenManager:IE,createdAt:C_,lastLoginAt:I_});return Jh&&Array.isArray(Jh)&&(lg.providerData=Jh.map(T_=>Object.assign({},T_))),fd&&(lg._redirectEventId=fd),lg}static _fromIdTokenResponse(f,g,w=!1){return(0,m.Z)(function*(){const D=new En;D.updateFromServerResponse(g);const N=new Di({uid:g.localId,auth:f,stsTokenManager:D,isAnonymous:w});return yield Dr(N),N})()}}const Si=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(g,w){var D=this;return(0,m.Z)(function*(){D.storage[g]=w})()}_get(g){var w=this;return(0,m.Z)(function*(){const D=w.storage[g];return void 0===D?null:D})()}_remove(g){var w=this;return(0,m.Z)(function*(){delete w.storage[g]})()}_addListener(g,w){}_removeListener(g,w){}}return v.type="NONE",v})();function Cn(v,f,g){return`firebase:${v}:${f}:${g}`}class oo{constructor(f,g,w){this.persistence=f,this.auth=g,this.userKey=w;const{config:D,name:N}=this.auth;this.fullUserKey=Cn(this.userKey,D.apiKey,N),this.fullPersistenceKey=Cn("persistence",D.apiKey,N),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,m.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?Di._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,m.Z)(function*(){if(g.persistence===f)return;const w=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,w?g.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,w="authUser"){return(0,m.Z)(function*(){if(!g.length)return new oo(Wn(Si),f,w);const D=(yield Promise.all(g.map(function(){var Re=(0,m.Z)(function*(Je){if(yield Je._isAvailable())return Je});return function(Je){return Re.apply(this,arguments)}}()))).filter(Re=>Re);let N=D[0]||Wn(Si);const q=Cn(w,f.config.apiKey,f.name);let le=null;for(const Re of g)try{const Je=yield Re._get(q);if(Je){const rt=Di._fromJSON(f,Je);Re!==N&&(le=rt),N=Re;break}}catch(Je){}const Ve=D.filter(Re=>Re._shouldAllowMigration);return N._shouldAllowMigration&&Ve.length?(N=Ve[0],le&&(yield N._set(q,le.toJSON())),yield Promise.all(g.map(function(){var Re=(0,m.Z)(function*(Je){if(Je!==N)try{yield Je._remove(q)}catch(rt){}});return function(Je){return Re.apply(this,arguments)}}())),new oo(N,f,w)):new oo(N,f,w)})()}}function Da(v){const f=v.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(ni(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(jr(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Ac(f))return"Blackberry";if(il(f))return"Webos";if(Ms(f))return"Safari";if((f.includes("chrome/")||Wo(f))&&!f.includes("edge/"))return"Chrome";if(ln(f))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function jr(v=(0,L.z$)()){return/firefox\//i.test(v)}function Ms(v=(0,L.z$)()){const f=v.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Wo(v=(0,L.z$)()){return/crios\//i.test(v)}function ni(v=(0,L.z$)()){return/iemobile/i.test(v)}function ln(v=(0,L.z$)()){return/android/i.test(v)}function Ac(v=(0,L.z$)()){return/blackberry/i.test(v)}function il(v=(0,L.z$)()){return/webos/i.test(v)}function hs(v=(0,L.z$)()){return/iphone|ipad|ipod/i.test(v)}function Ps(v=(0,L.z$)()){return hs(v)||ln(v)||il(v)||Ac(v)||/windows phone/i.test(v)||ni(v)}function fp(v,f=[]){let g;switch(v){case"Browser":g=Da((0,L.z$)());break;case"Worker":g=`${Da((0,L.z$)())}-${v}`;break;default:g=v}const w=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${ae.SDK_VERSION}/${w}`}class Ai{constructor(f,g,w){this.app=f,this.heartbeatServiceProvider=g,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sl(this),this.idTokenSubscription=new sl(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ln,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(f,g){var w=this;return g&&(this._popupRedirectResolver=Wn(g)),this._initializationPromise=this.queue((0,m.Z)(function*(){var D,N;if(!w._deleted&&(w.persistenceManager=yield oo.create(w,f),!w._deleted)){if(null===(D=w._popupRedirectResolver)||void 0===D?void 0:D._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(q){}yield w.initializeCurrentUser(g),w.lastNotifiedUid=(null===(N=w.currentUser)||void 0===N?void 0:N.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,m.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g)}})()}initializeCurrentUser(f){var g=this;return(0,m.Z)(function*(){var w;let D=yield g.assertedPersistence.getCurrentUser();if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const N=null===(w=g.redirectUser)||void 0===w?void 0:w._redirectEventId,q=null==D?void 0:D._redirectEventId,le=yield g.tryRedirectSignIn(f);(!N||N===q)&&(null==le?void 0:le.user)&&(D=le.user)}return D?D._redirectEventId?(Me(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===D._redirectEventId?g.directlySetCurrentUser(D):g.reloadAndSetCurrentUserOrClear(D)):g.reloadAndSetCurrentUserOrClear(D):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var g=this;return(0,m.Z)(function*(){let w=null;try{w=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(D){yield g._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,m.Z)(function*(){try{yield Dr(f)}catch(w){if("auth/network-request-failed"!==w.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var f=this;return(0,m.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,m.Z)(function*(){const w=f?(0,L.m9)(f):null;return w&&Me(w.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(w&&w._clone(g))})()}_updateCurrentUser(f){var g=this;return(0,m.Z)(function*(){if(!g._deleted)return f&&Me(g.tenantId===f.tenantId,g,"tenant-id-mismatch"),g.queue((0,m.Z)(function*(){yield g.directlySetCurrentUser(f),g.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,m.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var g=this;return this.queue((0,m.Z)(function*(){yield g.assertedPersistence.setPersistence(Wn(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new L.LL("auth","Firebase",f())}onAuthStateChanged(f,g,w){return this.registerStateListener(this.authStateSubscription,f,g,w)}onIdTokenChanged(f,g,w){return this.registerStateListener(this.idTokenSubscription,f,g,w)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var w=this;return(0,m.Z)(function*(){const D=yield w.getOrInitRedirectPersistenceManager(g);return null===f?D.removeCurrentUser():D.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,m.Z)(function*(){if(!g.redirectPersistenceManager){const w=f&&Wn(f)||g._popupRedirectResolver;Me(w,g,"argument-error"),g.redirectPersistenceManager=yield oo.create(g,[Wn(w._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,m.Z)(function*(){var w,D;return g._isInitialized&&(yield g.queue((0,m.Z)(function*(){}))),(null===(w=g._currentUser)||void 0===w?void 0:w._redirectEventId)===f?g._currentUser:(null===(D=g.redirectUser)||void 0===D?void 0:D._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,m.Z)(function*(){if(f===g.currentUser)return g.queue((0,m.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,w,D){if(this._deleted)return()=>{};const N="function"==typeof g?g:g.next.bind(g),q=this._isInitialized?Promise.resolve():this._initializationPromise;return Me(q,this,"internal-error"),q.then(()=>N(this.currentUser)),"function"==typeof g?f.addObserver(g,w,D):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,m.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=fp(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,m.Z)(function*(){var g;const w={"X-Client-Version":f.clientVersion};f.app.options.appId&&(w["X-Firebase-gmpid"]=f.app.options.appId);const D=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return D&&(w["X-Firebase-Client"]=D),w})()}}function mn(v){return(0,L.m9)(v)}class sl{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,L.ne)(g=>this.observer=g)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function du(v){const f=v.indexOf(":");return f<0?"":v.substr(0,f+1)}function xi(v){if(!v)return null;const f=Number(v);return isNaN(f)?null:f}class Sa{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return ur("not implemented")}_getIdTokenResponse(f){return ur("not implemented")}_linkToIdToken(f,g){return ur("not implemented")}_getReauthenticationResolver(f){return ur("not implemented")}}function ch(v,f){return dh.apply(this,arguments)}function dh(){return(dh=(0,m.Z)(function*(v,f){return on(v,"POST","/v1/accounts:resetPassword",Et(v,f))})).apply(this,arguments)}function pp(v,f){return hu.apply(this,arguments)}function hu(){return(hu=(0,m.Z)(function*(v,f){return on(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Aa(v,f){return hh.apply(this,arguments)}function hh(){return(hh=(0,m.Z)(function*(v,f){return on(v,"POST","/v1/accounts:update",Et(v,f))})).apply(this,arguments)}function Rc(){return(Rc=(0,m.Z)(function*(v,f){return St(v,"POST","/v1/accounts:signInWithPassword",Et(v,f))})).apply(this,arguments)}function Nc(v,f){return fh.apply(this,arguments)}function fh(){return(fh=(0,m.Z)(function*(v,f){return on(v,"POST","/v1/accounts:sendOobCode",Et(v,f))})).apply(this,arguments)}function t_(v,f){return gp.apply(this,arguments)}function gp(){return(gp=(0,m.Z)(function*(v,f){return Nc(v,f)})).apply(this,arguments)}function ph(v,f){return gh.apply(this,arguments)}function gh(){return(gh=(0,m.Z)(function*(v,f){return Nc(v,f)})).apply(this,arguments)}function Mc(v,f){return al.apply(this,arguments)}function al(){return(al=(0,m.Z)(function*(v,f){return Nc(v,f)})).apply(this,arguments)}function Pc(v,f){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,m.Z)(function*(v,f){return Nc(v,f)})).apply(this,arguments)}function fu(){return(fu=(0,m.Z)(function*(v,f){return St(v,"POST","/v1/accounts:signInWithEmailLink",Et(v,f))})).apply(this,arguments)}function kc(){return(kc=(0,m.Z)(function*(v,f){return St(v,"POST","/v1/accounts:signInWithEmailLink",Et(v,f))})).apply(this,arguments)}class zo extends Sa{constructor(f,g,w,D=null){super("password",w),this._email=f,this._password=g,this._tenantId=D}static _fromEmailAndPassword(f,g){return new zo(f,g,"password")}static _fromEmailAndCode(f,g,w=null){return new zo(f,g,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,m.Z)(function*(){switch(g.signInMethod){case"password":return function(v,f){return Rc.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function(v,f){return fu.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:vn(f,"internal-error")}})()}_linkToIdToken(f,g){var w=this;return(0,m.Z)(function*(){switch(w.signInMethod){case"password":return pp(f,{idToken:g,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function(v,f){return kc.apply(this,arguments)}(f,{idToken:g,email:w._email,oobCode:w._password});default:vn(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function ps(v,f){return uo.apply(this,arguments)}function uo(){return(uo=(0,m.Z)(function*(v,f){return St(v,"POST","/v1/accounts:signInWithIdp",Et(v,f))})).apply(this,arguments)}class Zi extends Sa{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new Zi(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):vn("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:D}=g,N=J(g,["providerId","signInMethod"]);if(!w||!D)return null;const q=new Zi(w,D);return q.idToken=N.idToken||void 0,q.accessToken=N.accessToken||void 0,q.secret=N.secret,q.nonce=N.nonce,q.pendingToken=N.pendingToken||null,q}_getIdTokenResponse(f){return ps(f,this.buildRequest())}_linkToIdToken(f,g){const w=this.buildRequest();return w.idToken=g,ps(f,w)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,ps(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,L.xO)(g)}return f}}function Fc(v,f){return ul.apply(this,arguments)}function ul(){return(ul=(0,m.Z)(function*(v,f){return on(v,"POST","/v1/accounts:sendVerificationCode",Et(v,f))})).apply(this,arguments)}function _h(){return(_h=(0,m.Z)(function*(v,f){return St(v,"POST","/v1/accounts:signInWithPhoneNumber",Et(v,f))})).apply(this,arguments)}function pu(){return(pu=(0,m.Z)(function*(v,f){const g=yield St(v,"POST","/v1/accounts:signInWithPhoneNumber",Et(v,f));if(g.temporaryProof)throw mt(v,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const yh={USER_NOT_FOUND:"user-not-found"};function ks(){return(ks=(0,m.Z)(function*(v,f){return St(v,"POST","/v1/accounts:signInWithPhoneNumber",Et(v,Object.assign(Object.assign({},f),{operation:"REAUTH"})),yh)})).apply(this,arguments)}class gs extends Sa{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new gs({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new gs({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function(v,f){return _h.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function(v,f){return pu.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function(v,f){return ks.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:w,verificationCode:D}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:w,code:D}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:w,phoneNumber:D,temporaryProof:N}=f;return w||g||D||N?new gs({verificationId:g,verificationCode:w,phoneNumber:D,temporaryProof:N}):null}}class lo{constructor(f){var g,w,D,N,q,le;const Ve=(0,L.zd)((0,L.pd)(f)),Re=null!==(g=Ve.apiKey)&&void 0!==g?g:null,Je=null!==(w=Ve.oobCode)&&void 0!==w?w:null,rt=function(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(D=Ve.mode)&&void 0!==D?D:null);Me(Re&&Je&&rt,"argument-error"),this.apiKey=Re,this.operation=rt,this.code=Je,this.continueUrl=null!==(N=Ve.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(q=Ve.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(le=Ve.tenantId)&&void 0!==le?le:null}static parseLink(f){const g=function(v){const f=(0,L.zd)((0,L.pd)(v)).link,g=f?(0,L.zd)((0,L.pd)(f)).deep_link_id:null,w=(0,L.zd)((0,L.pd)(v)).deep_link_id;return(w?(0,L.zd)((0,L.pd)(w)).link:null)||w||g||f||v}(f);try{return new lo(g)}catch(w){return null}}}let gu=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(g,w){return zo._fromEmailAndPassword(g,w)}static credentialWithLink(g,w){const D=lo.parseLink(w);return Me(D,"argument-error"),zo._fromEmailAndCode(g,D.code,D.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class an{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class co extends an{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class ho extends co{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return Me("providerId"in g&&"signInMethod"in g,"argument-error"),Zi._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return Me(f.idToken||f.accessToken,"argument-error"),Zi._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return ho.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return ho.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:w,oauthTokenSecret:D,pendingToken:N,nonce:q,providerId:le}=f;if(!w&&!D&&!g&&!N||!le)return null;try{return new ho(le)._credential({idToken:g,accessToken:w,nonce:q,pendingToken:N})}catch(Ve){return null}}}let mu=(()=>{class v extends co{constructor(){super("facebook.com")}static credential(g){return Zi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch(w){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),fn=(()=>{class v extends co{constructor(){super("google.com"),this.addScope("profile")}static credential(g,w){return Zi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:w})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:w,oauthAccessToken:D}=g;if(!w&&!D)return null;try{return v.credential(w,D)}catch(N){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),cl=(()=>{class v extends co{constructor(){super("github.com")}static credential(g){return Zi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch(w){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Yi extends Sa{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return ps(f,this.buildRequest())}_linkToIdToken(f,g){const w=this.buildRequest();return w.idToken=g,ps(f,w)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,ps(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:D,pendingToken:N}=g;return w&&D&&N&&w===D?new Yi(w,N):null}static _create(f,g){return new Yi(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class yu extends an{constructor(f){Me(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return yu.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return yu.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=Yi.fromJSON(f);return Me(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:w}=f;if(!g||!w)return null;try{return Yi._create(w,g)}catch(D){return null}}}let vu=(()=>{class v extends co{constructor(){super("twitter.com")}static credential(g,w){return Zi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:w})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:w,oauthTokenSecret:D}=g;if(!w||!D)return null;try{return v.credential(w,D)}catch(N){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Zo(v,f){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,m.Z)(function*(v,f){return St(v,"POST","/v1/accounts:signUp",Et(v,f))})).apply(this,arguments)}class Gr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,w,D=!1){return(0,m.Z)(function*(){const N=yield Di._fromIdTokenResponse(f,w,D),q=Eu(w);return new Gr({user:N,providerId:q,_tokenResponse:w,operationType:g})})()}static _forOperation(f,g,w){return(0,m.Z)(function*(){yield f._updateTokensIfNecessary(w,!0);const D=Eu(w);return new Gr({user:f,providerId:D,_tokenResponse:w,operationType:g})})()}}function Eu(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Vc(){return(Vc=(0,m.Z)(function*(v){var f;const g=mn(v);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new Gr({user:g.currentUser,providerId:null,operationType:"signIn"});const w=yield Zo(g,{returnSecureToken:!0}),D=yield Gr._fromIdTokenResponse(g,"signIn",w,!0);return yield g._updateCurrentUser(D.user),D})).apply(this,arguments)}class xa extends L.ZR{constructor(f,g,w,D){var N;super(g.code,g.message),this.operationType=w,this.user=D,Object.setPrototypeOf(this,xa.prototype),this.customData={appName:f.name,tenantId:null!==(N=f.tenantId)&&void 0!==N?N:void 0,_serverResponse:g.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(f,g,w,D){return new xa(f,g,w,D)}}function Uc(v,f,g,w){return("reauthenticate"===f?g._getReauthenticationResolver(v):g._getIdTokenResponse(v)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?xa._fromErrorAndOperation(v,N,f,w):N})}function dl(v){return new Set(v.map(({providerId:f})=>f).filter(f=>!!f))}function wu(){return(wu=(0,m.Z)(function*(v,f){const g=(0,L.m9)(v);yield Ht(!0,g,f);const{providerUserInfo:w}=yield z(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),D=dl(w||[]);return g.providerData=g.providerData.filter(N=>D.has(N.providerId)),D.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function fo(v,f){return De.apply(this,arguments)}function De(){return(De=(0,m.Z)(function*(v,f,g=!1){const w=yield lt(v,f._linkToIdToken(v.auth,yield v.getIdToken()),g);return Gr._forOperation(v,"link",w)})).apply(this,arguments)}function Ht(v,f,g){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,m.Z)(function*(v,f,g){yield Dr(f);const D=!1===v?"provider-already-linked":"no-such-provider";Me(dl(f.providerData).has(g)===v,f.auth,D)})).apply(this,arguments)}function Rn(v,f){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,m.Z)(function*(v,f,g=!1){const{auth:w}=v,D="reauthenticate";try{const N=yield lt(v,Uc(w,D,f,v),g);Me(N.idToken,w,"internal-error");const q=Un(N.idToken);Me(q,w,"internal-error");const{sub:le}=q;return Me(v.uid===le,w,"user-mismatch"),Gr._forOperation(v,D,N)}catch(N){throw"auth/user-not-found"===(null==N?void 0:N.code)&&vn(w,"user-mismatch"),N}})).apply(this,arguments)}function po(v,f){return ri.apply(this,arguments)}function ri(){return(ri=(0,m.Z)(function*(v,f,g=!1){const w="signIn",D=yield Uc(v,w,f),N=yield Gr._fromIdTokenResponse(v,w,D);return g||(yield v._updateCurrentUser(N.user)),N})).apply(this,arguments)}function Qo(v,f){return Na.apply(this,arguments)}function Na(){return(Na=(0,m.Z)(function*(v,f){return po(mn(v),f)})).apply(this,arguments)}function Eh(v,f){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,m.Z)(function*(v,f){const g=(0,L.m9)(v);return yield Ht(!1,g,f.providerId),fo(g,f)})).apply(this,arguments)}function Jo(v,f){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,m.Z)(function*(v,f){return Rn((0,L.m9)(v),f)})).apply(this,arguments)}function lr(v,f){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,m.Z)(function*(v,f){return St(v,"POST","/v1/accounts:signInWithCustomToken",Et(v,f))})).apply(this,arguments)}function Ri(){return(Ri=(0,m.Z)(function*(v,f){const g=mn(v),w=yield lr(g,{token:f,returnSecureToken:!0}),D=yield Gr._fromIdTokenResponse(g,"signIn",w);return yield g._updateCurrentUser(D.user),D})).apply(this,arguments)}class ii{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?hl._fromServerResponse(f,g):vn(f,"internal-error")}}class hl extends ii{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new hl(g)}}function Pa(v,f,g){var w;Me((null===(w=g.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),Me(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(Me(g.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(Me(g.android.packageName.length>0,v,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function jc(){return(jc=(0,m.Z)(function*(v,f,g){const w=(0,L.m9)(v),D={requestType:"PASSWORD_RESET",email:f};g&&Pa(w,D,g),yield ph(w,D)})).apply(this,arguments)}function Cu(){return(Cu=(0,m.Z)(function*(v,f,g){yield ch((0,L.m9)(v),{oobCode:f,newPassword:g})})).apply(this,arguments)}function Fs(){return(Fs=(0,m.Z)(function*(v,f){yield Aa((0,L.m9)(v),{oobCode:f})})).apply(this,arguments)}function pl(v,f){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,m.Z)(function*(v,f){const g=(0,L.m9)(v),w=yield ch(g,{oobCode:f}),D=w.requestType;switch(Me(D,g,"internal-error"),D){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Me(w.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Me(w.mfaInfo,g,"internal-error");default:Me(w.email,g,"internal-error")}let N=null;return w.mfaInfo&&(N=ii._fromServerResponse(mn(g),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:N},operation:D}})).apply(this,arguments)}function ml(){return(ml=(0,m.Z)(function*(v,f){const{data:g}=yield pl((0,L.m9)(v),f);return g.email})).apply(this,arguments)}function Tu(){return(Tu=(0,m.Z)(function*(v,f,g){const w=mn(v),D=yield Zo(w,{returnSecureToken:!0,email:f,password:g}),N=yield Gr._fromIdTokenResponse(w,"signIn",D);return yield w._updateCurrentUser(N.user),N})).apply(this,arguments)}function Su(){return(Su=(0,m.Z)(function*(v,f,g){const w=(0,L.m9)(v),D={requestType:"EMAIL_SIGNIN",email:f};Me(g.handleCodeInApp,w,"argument-error"),g&&Pa(w,D,g),yield Mc(w,D)})).apply(this,arguments)}function go(){return(go=(0,m.Z)(function*(v,f,g){const w=(0,L.m9)(v),D=gu.credentialWithLink(f,g||Ir());return Me(D._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Qo(w,D)})).apply(this,arguments)}function On(v,f){return Ep.apply(this,arguments)}function Ep(){return(Ep=(0,m.Z)(function*(v,f){return on(v,"POST","/v1/accounts:createAuthUri",Et(v,f))})).apply(this,arguments)}function Oa(){return(Oa=(0,m.Z)(function*(v,f){const w={identifier:f,continueUri:Tr()?Ir():"http://localhost"},{signinMethods:D}=yield On((0,L.m9)(v),w);return D||[]})).apply(this,arguments)}function Hc(){return(Hc=(0,m.Z)(function*(v,f){const g=(0,L.m9)(v),D={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};f&&Pa(g.auth,D,f);const{email:N}=yield t_(g.auth,D);N!==v.email&&(yield v.reload())})).apply(this,arguments)}function ka(){return(ka=(0,m.Z)(function*(v,f,g){const w=(0,L.m9)(v),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:f};g&&Pa(w.auth,N,g);const{email:q}=yield Pc(w.auth,N);q!==v.email&&(yield v.reload())})).apply(this,arguments)}function Xo(v,f){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,m.Z)(function*(v,f){return on(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function yl(){return(yl=(0,m.Z)(function*(v,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const w=(0,L.m9)(v),N={idToken:yield w.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},q=yield lt(w,Xo(w.auth,N));w.displayName=q.displayName||null,w.photoURL=q.photoUrl||null;const le=w.providerData.find(({providerId:Ve})=>"password"===Ve);le&&(le.displayName=w.displayName,le.photoURL=w.photoURL),yield w._updateTokensIfNecessary(q)})).apply(this,arguments)}function ea(v,f,g){return bh.apply(this,arguments)}function bh(){return(bh=(0,m.Z)(function*(v,f,g){const{auth:w}=v,N={idToken:yield v.getIdToken(),returnSecureToken:!0};f&&(N.email=f),g&&(N.password=g);const q=yield lt(v,pp(w,N));yield v._updateTokensIfNecessary(q,!0)})).apply(this,arguments)}class ms{constructor(f,g,w={}){this.isNewUser=f,this.providerId=g,this.profile=w}}class vl extends ms{constructor(f,g,w,D){super(f,g,w),this.username=D}}class Cp extends ms{constructor(f,g){super(f,"facebook.com",g)}}class n_ extends vl{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class Ni extends ms{constructor(f,g){super(f,"google.com",g)}}class sE extends vl{constructor(f,g,w){super(f,"twitter.com",g,w)}}function qc(v){const{user:f,_tokenResponse:g}=v;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function(v){var f,g;if(!v)return null;const{providerId:w}=v,D=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},N=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&(null==v?void 0:v.idToken)){const q=null===(g=null===(f=Un(v.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(q)return new ms(N,"anonymous"!==q&&"custom"!==q?q:null)}if(!w)return null;switch(w){case"facebook.com":return new Cp(N,D);case"github.com":return new n_(N,D);case"google.com":return new Ni(N,D);case"twitter.com":return new sE(N,D,v.screenName||null);case"custom":case"anonymous":return new ms(N,null);default:return new ms(N,w,D)}}(g)}class ys{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new ys("enroll",f)}static _fromMfaPendingCredential(f){return new ys("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,w;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return ys._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(w=f.multiFactorSession)||void 0===w?void 0:w.idToken)return ys._fromIdtoken(f.multiFactorSession.idToken)}return null}}class La{constructor(f,g,w){this.session=f,this.hints=g,this.signInResolver=w}static _fromError(f,g){const w=mn(f),D=g.customData._serverResponse,N=(D.mfaInfo||[]).map(le=>ii._fromServerResponse(w,le));Me(D.mfaPendingCredential,w,"internal-error");const q=ys._fromMfaPendingCredential(D.mfaPendingCredential);return new La(q,N,function(){var le=(0,m.Z)(function*(Ve){const Re=yield Ve._process(w,q);delete D.mfaInfo,delete D.mfaPendingCredential;const Je=Object.assign(Object.assign({},D),{idToken:Re.idToken,refreshToken:Re.refreshToken});switch(g.operationType){case"signIn":const rt=yield Gr._fromIdTokenResponse(w,g.operationType,Je);return yield w._updateCurrentUser(rt.user),rt;case"reauthenticate":return Me(g.user,w,"internal-error"),Gr._forOperation(g.user,g.operationType,Je);default:vn(w,"internal-error")}});return function(Ve){return le.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,m.Z)(function*(){return g.signInResolver(f)})()}}function Ch(v,f){return on(v,"POST","/v2/accounts/mfaEnrollment:start",Et(v,f))}class Th{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(w=>ii._fromServerResponse(f.auth,w)))})}static _fromUser(f){return new Th(f)}getSession(){var f=this;return(0,m.Z)(function*(){return ys._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var w=this;return(0,m.Z)(function*(){const D=f,N=yield w.getSession(),q=yield lt(w.user,D._process(w.user.auth,N,g));return yield w.user._updateTokensIfNecessary(q),w.user.reload()})()}unenroll(f){var g=this;return(0,m.Z)(function*(){const w="string"==typeof f?f:f.uid,D=yield g.user.getIdToken(),N=yield lt(g.user,function(v,f){return on(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Et(v,f))}(g.user.auth,{idToken:D,mfaEnrollmentId:w}));g.enrolledFactors=g.enrolledFactors.filter(({uid:q})=>q!==w),yield g.user._updateTokensIfNecessary(N);try{yield g.user.reload()}catch(q){if("auth/user-token-expired"!==q.code)throw q}})()}}const Ls=new WeakMap,Gt="__sak";class at{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Gt,"1"),this.storage.removeItem(Gt),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ji=(()=>{class v extends at{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,w)=>this.onStorageEvent(g,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const v=(0,L.z$)();return Ms(v)||hs(v)}()&&function(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=Ps(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const w of Object.keys(this.listeners)){const D=this.storage.getItem(w),N=this.localCache[w];D!==N&&g(w,N,D)}}onStorageEvent(g,w=!1){if(!g.key)return void this.forAllChangedKeys((le,Ve,Re)=>{this.notifyListeners(le,Re)});const D=g.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const le=this.storage.getItem(D);if(g.newValue!==le)null!==g.newValue?this.storage.setItem(D,g.newValue):this.storage.removeItem(D);else if(this.localCache[D]===g.newValue&&!w)return}const N=()=>{const le=this.storage.getItem(D);!w&&this.localCache[D]===le||this.notifyListeners(D,le)},q=this.storage.getItem(D);(0,L.w1)()&&10===document.documentMode&&q!==g.newValue&&g.newValue!==g.oldValue?setTimeout(N,10):N()}notifyListeners(g,w){this.localCache[g]=w;const D=this.listeners[g];if(D)for(const N of Array.from(D))N(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,w,D)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:w,newValue:D}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,w){var D=()=>super._set,N=this;return(0,m.Z)(function*(){yield D().call(N,g,w),N.localCache[g]=JSON.stringify(w)})()}_get(g){var w=()=>super._get,D=this;return(0,m.Z)(function*(){const N=yield w().call(D,g);return D.localCache[g]=JSON.stringify(N),N})()}_remove(g){var w=()=>super._remove,D=this;return(0,m.Z)(function*(){yield w().call(D,g),delete D.localCache[g]})()}}return v.type="LOCAL",v})(),yo=(()=>{class v extends at{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,w){}_removeListener(g,w){}}return v.type="SESSION",v})();let El=(()=>{class v{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const w=this.receivers.find(N=>N.isListeningto(g));if(w)return w;const D=new v(g);return this.receivers.push(D),D}isListeningto(g){return this.eventTarget===g}handleEvent(g){var w=this;return(0,m.Z)(function*(){const D=g,{eventId:N,eventType:q,data:le}=D.data,Ve=w.handlersMap[q];if(!(null==Ve?void 0:Ve.size))return;D.ports[0].postMessage({status:"ack",eventId:N,eventType:q});const Re=Array.from(Ve).map(function(){var rt=(0,m.Z)(function*(en){return en(D.origin,le)});return function(en){return rt.apply(this,arguments)}}()),Je=yield function(v){return Promise.all(v.map(function(){var f=(0,m.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(w){return{fulfilled:!1,reason:w}}});return function(g){return f.apply(this,arguments)}}()))}(Re);D.ports[0].postMessage({status:"done",eventId:N,eventType:q,response:Je})})()}_subscribe(g,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(w)}_unsubscribe(g,w){this.handlersMap[g]&&w&&this.handlersMap[g].delete(w),(!w||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function jn(v="",f=10){let g="";for(let w=0;w<f;w++)g+=Math.floor(10*Math.random());return v+g}class wl{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,w=50){var D=this;return(0,m.Z)(function*(){const N="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let q,le;return new Promise((Ve,Re)=>{const Je=jn("",20);N.port1.start();const rt=setTimeout(()=>{Re(new Error("unsupported_event"))},w);le={messageChannel:N,onMessage(en){const vr=en;if(vr.data.eventId===Je)switch(vr.data.status){case"ack":clearTimeout(rt),q=setTimeout(()=>{Re(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),Ve(vr.data.response);break;default:clearTimeout(rt),clearTimeout(q),Re(new Error("invalid_response"))}}},D.handlers.add(le),N.port1.addEventListener("message",le.onMessage),D.target.postMessage({eventType:f,eventId:Je,data:g},[N.port2])}).finally(()=>{le&&D.removeMessageHandler(le)})})()}}function Xn(){return window}function vo(){return void 0!==Xn().WorkerGlobalScope&&"function"==typeof Xn().importScripts}function Nu(){return(Nu=(0,m.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const Pi="firebaseLocalStorageDb",vs="firebaseLocalStorage",Xi="fbase_key";class si{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Sh(v,f){return v.transaction([vs],f?"readwrite":"readonly").objectStore(vs)}function ta(){const v=indexedDB.open(Pi,1);return new Promise((f,g)=>{v.addEventListener("error",()=>{g(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(vs,{keyPath:Xi})}catch(D){g(D)}}),v.addEventListener("success",(0,m.Z)(function*(){const w=v.result;w.objectStoreNames.contains(vs)?f(w):(w.close(),yield function(){const v=indexedDB.deleteDatabase(Pi);return new si(v).toPromise()}(),f(yield ta()))}))})}function _r(v,f,g){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,m.Z)(function*(v,f,g){const w=Sh(v,!0).put({[Xi]:f,value:g});return new si(w).toPromise()})).apply(this,arguments)}function Yc(){return(Yc=(0,m.Z)(function*(v,f){const g=Sh(v,!1).get(f),w=yield new si(g).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Il(v,f){const g=Sh(v,!0).delete(f);return new si(g).toPromise()}const Us=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,m.Z)(function*(){return g.db||(g.db=yield ta()),g.db})()}_withRetries(g){var w=this;return(0,m.Z)(function*(){let D=0;for(;;)try{const N=yield w._openDb();return yield g(N)}catch(N){if(D++>3)throw N;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,m.Z)(function*(){return vo()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,m.Z)(function*(){g.receiver=El._getInstance(vo()?self:null),g.receiver._subscribe("keyChanged",function(){var w=(0,m.Z)(function*(D,N){return{keyProcessed:(yield g._poll()).includes(N.key)}});return function(D,N){return w.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var w=(0,m.Z)(function*(D,N){return["keyChanged"]});return function(D,N){return w.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,m.Z)(function*(){var w,D;if(g.activeServiceWorker=yield function(){return Nu.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new wl(g.activeServiceWorker);const N=yield g.sender._send("ping",{},800);!N||(null===(w=N[0])||void 0===w?void 0:w.fulfilled)&&(null===(D=N[0])||void 0===D?void 0:D.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var w=this;return(0,m.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:g},w.serviceWorkerReceiverAvailable?800:50)}catch(D){}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const g=yield ta();return yield _r(g,Gt,"1"),yield Il(g,Gt),!0}catch(g){}return!1})()}_withPendingWrite(g){var w=this;return(0,m.Z)(function*(){w.pendingWrites++;try{yield g()}finally{w.pendingWrites--}})()}_set(g,w){var D=this;return(0,m.Z)(function*(){return D._withPendingWrite((0,m.Z)(function*(){return yield D._withRetries(N=>_r(N,g,w)),D.localCache[g]=w,D.notifyServiceWorker(g)}))})()}_get(g){var w=this;return(0,m.Z)(function*(){const D=yield w._withRetries(N=>function(v,f){return Yc.apply(this,arguments)}(N,g));return w.localCache[g]=D,D})()}_remove(g){var w=this;return(0,m.Z)(function*(){return w._withPendingWrite((0,m.Z)(function*(){return yield w._withRetries(D=>Il(D,g)),delete w.localCache[g],w.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,m.Z)(function*(){const w=yield g._withRetries(q=>{const le=Sh(q,!1).getAll();return new si(le).toPromise()});if(!w)return[];if(0!==g.pendingWrites)return[];const D=[],N=new Set;for(const{fbase_key:q,value:le}of w)N.add(q),JSON.stringify(g.localCache[q])!==JSON.stringify(le)&&(g.notifyListeners(q,le),D.push(q));for(const q of Object.keys(g.localCache))g.localCache[q]&&!N.has(q)&&(g.notifyListeners(q,null),D.push(q));return D})()}notifyListeners(g,w){this.localCache[g]=w;const D=this.listeners[g];if(D)for(const N of Array.from(D))N(w)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Va(v,f){return on(v,"POST","/v2/accounts/mfaSignIn:start",Et(v,f))}function Oi(){return(Oi=(0,m.Z)(function*(v){return(yield on(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Eo(v){return new Promise((f,g)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=f,w.onerror=D=>{const N=In("internal-error");N.customData=D,g(N)},w.type="text/javascript",w.charset="UTF-8",function(){var v,f;return null!==(f=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==f?f:document}().appendChild(w)})}function Bs(v){return`__${v}${Math.floor(1e6*Math.random())}`}const er=1e12;class Qc{constructor(f){this.auth=f,this.counter=er,this._widgets=new Map}render(f,g){const w=this.counter;return this._widgets.set(w,new Nh(f,this.auth.name,g||{})),this.counter++,w}reset(f){var g;const w=f||er;null===(g=this._widgets.get(w))||void 0===g||g.delete(),this._widgets.delete(w)}getResponse(f){var g;return(null===(g=this._widgets.get(f||er))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,m.Z)(function*(){var w;return null===(w=g._widgets.get(f||er))||void 0===w||w.execute(),""})()}}class Nh{constructor(f,g,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const D="string"==typeof f?document.getElementById(f):f;Me(D,"argument-error",{appName:g}),this.container=D,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(v){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<50;w++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}();const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Fi=Bs("rcb"),Es=new He(3e4,6e4);class bo{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Xn().grecaptcha}load(f,g=""){return Me((v=g).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(Xn().grecaptcha):new Promise((w,D)=>{const N=Xn().setTimeout(()=>{D(In(f,"network-request-failed"))},Es.get());Xn()[Fi]=()=>{Xn().clearTimeout(N),delete Xn()[Fi];const le=Xn().grecaptcha;if(!le)return void D(In(f,"internal-error"));const Ve=le.render;le.render=(Re,Je)=>{const rt=Ve(Re,Je);return this.counter++,rt},this.hostLanguage=g,w(le)},Eo(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:Fi,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(N),D(In(f,"internal-error"))})});var v}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!Xn().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Co{load(f){return(0,m.Z)(function*(){return new Qc(f)})()}clearedOneInstance(){}}const Ph="recaptcha",Ba={theme:"light",type:"image"};class xp{constructor(f,g=Object.assign({},Ba),w){this.parameters=g,this.type=Ph,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=mn(w),this.isInvisible="invisible"===this.parameters.size,Me("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const D="string"==typeof f?document.getElementById(f):f;Me(D,this.auth,"argument-error"),this.container=D,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Co:new bo,this.validateStartingState()}verify(){var f=this;return(0,m.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),w=f.getAssertedRecaptcha();return w.getResponse(g)||new Promise(N=>{const q=le=>{!le||(f.tokenChangeListeners.delete(q),N(le))};f.tokenChangeListeners.add(q),f.isInvisible&&w.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){Me(!this.parameters.sitekey,this.auth,"argument-error"),Me(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Me("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(w=>w(g)),"function"==typeof f)f(g);else if("string"==typeof f){const w=Xn()[f];"function"==typeof w&&w(g)}}}assertNotDestroyed(){Me(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,m.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const w=document.createElement("div");g.appendChild(w),g=w}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,m.Z)(function*(){Me(Tr()&&!vo(),f.auth,"internal-error"),yield function(){let v=null;return new Promise(f=>{"complete"!==document.readyState?(v=()=>f(),window.addEventListener("load",v)):f()}).catch(f=>{throw v&&window.removeEventListener("load",v),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function(v){return Oi.apply(this,arguments)}(f.auth);Me(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return Me(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class $n{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=gs._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function Io(){return(Io=(0,m.Z)(function*(v,f,g){const w=mn(v),D=yield j(w,f,(0,L.m9)(g));return new $n(D,N=>Qo(w,N))})).apply(this,arguments)}function I(){return(I=(0,m.Z)(function*(v,f,g){const w=(0,L.m9)(v);yield Ht(!1,w,"phone");const D=yield j(w.auth,f,(0,L.m9)(g));return new $n(D,N=>Eh(w,N))})).apply(this,arguments)}function M(){return(M=(0,m.Z)(function*(v,f,g){const w=(0,L.m9)(v),D=yield j(w.auth,f,(0,L.m9)(g));return new $n(D,N=>Jo(w,N))})).apply(this,arguments)}function j(v,f,g){return ee.apply(this,arguments)}function ee(){return(ee=(0,m.Z)(function*(v,f,g){var w;const D=yield g.verify();try{let N;if(Me("string"==typeof D,v,"argument-error"),Me(g.type===Ph,v,"argument-error"),N="string"==typeof f?{phoneNumber:f}:f,"session"in N){const q=N.session;if("phoneNumber"in N)return Me("enroll"===q.type,v,"internal-error"),(yield Ch(v,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:D}})).phoneSessionInfo.sessionInfo;{Me("signin"===q.type,v,"internal-error");const le=(null===(w=N.multiFactorHint)||void 0===w?void 0:w.uid)||N.multiFactorUid;return Me(le,v,"missing-multi-factor-info"),(yield Va(v,{mfaPendingCredential:q.credential,mfaEnrollmentId:le,phoneSignInInfo:{recaptchaToken:D}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield Fc(v,{phoneNumber:N.phoneNumber,recaptchaToken:D});return q}}finally{g._reset()}})).apply(this,arguments)}function Ne(){return(Ne=(0,m.Z)(function*(v,f){yield fo((0,L.m9)(v),f)})).apply(this,arguments)}let ze=(()=>{class v{constructor(g){this.providerId=v.PROVIDER_ID,this.auth=mn(g)}verifyPhoneNumber(g,w){return j(this.auth,g,(0,L.m9)(w))}static credential(g,w){return gs._fromVerification(g,w)}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:w,temporaryProof:D}=g;return w&&D?gs._fromTokenResponse(w,D):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function ft(v,f){return f?Wn(f):(Me(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Ct extends Sa{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return ps(f,this._buildIdpRequest())}_linkToIdToken(f,g){return ps(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return ps(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function zt(v){return po(v.auth,new Ct(v),v.bypassAuthState)}function xt(v){const{auth:f,user:g}=v;return Me(g,f,"internal-error"),Rn(g,new Ct(v),v.bypassAuthState)}function Sr(v){return tr.apply(this,arguments)}function tr(){return(tr=(0,m.Z)(function*(v){const{auth:f,user:g}=v;return Me(g,f,"internal-error"),fo(g,new Ct(v),v.bypassAuthState)})).apply(this,arguments)}class ja{constructor(f,g,w,D,N=!1){this.auth=f,this.resolver=w,this.user=D,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,m.Z)(function*(w,D){f.pendingPromise={resolve:w,reject:D};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(N){f.reject(N)}});return function(w,D){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,m.Z)(function*(){const{urlResponse:w,sessionId:D,postBody:N,tenantId:q,error:le,type:Ve}=f;if(le)return void g.reject(le);const Re={auth:g.auth,requestUri:w,sessionId:D,tenantId:q||void 0,postBody:N||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Ve)(Re))}catch(Je){g.reject(Je)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return zt;case"linkViaPopup":case"linkViaRedirect":return Sr;case"reauthViaPopup":case"reauthViaRedirect":return xt;default:vn(this.auth,"internal-error")}}resolve(f){Ke(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Ke(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Jc=new He(2e3,1e4);function To(){return(To=(0,m.Z)(function*(v,f,g){const w=mn(v);ar(v,f,an);const D=ft(w,g);return new Tn(w,"signInViaPopup",f,D).executeNotNull()})).apply(this,arguments)}function js(){return(js=(0,m.Z)(function*(v,f,g){const w=(0,L.m9)(v);ar(w.auth,f,an);const D=ft(w.auth,g);return new Tn(w.auth,"reauthViaPopup",f,D,w).executeNotNull()})).apply(this,arguments)}function Np(){return(Np=(0,m.Z)(function*(v,f,g){const w=(0,L.m9)(v);ar(w.auth,f,an);const D=ft(w.auth,g);return new Tn(w.auth,"linkViaPopup",f,D,w).executeNotNull()})).apply(this,arguments)}let Tn=(()=>{class v extends ja{constructor(g,w,D,N,q){super(g,w,N,q),this.provider=D,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var g=this;return(0,m.Z)(function*(){const w=yield g.execute();return Me(w,g.auth,"internal-error"),w})()}onExecution(){var g=this;return(0,m.Z)(function*(){Ke(1===g.filter.length,"Popup operations only handle one event");const w=jn();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],w),g.authWindow.associatedEvent=w,g.resolver._originValidation(g.auth).catch(D=>{g.reject(D)}),g.resolver._isIframeWebStorageSupported(g.auth,D=>{D||g.reject(In(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(In(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const g=()=>{var w,D;this.pollId=(null===(D=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===D?void 0:D.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(In(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Jc.get())};g()}}return v.currentPopupAction=null,v})();const Xc=new Map;class Pu extends ja{constructor(f,g,w=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,w),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,m.Z)(function*(){let w=Xc.get(g.auth._key());if(!w){try{const N=(yield function(v,f){return Pp.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;w=()=>Promise.resolve(N)}catch(D){w=()=>Promise.reject(D)}Xc.set(g.auth._key(),w)}return g.bypassAuthState||Xc.set(g.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,w=this;return(0,m.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(w,f);if("unknown"!==f.type){if(f.eventId){const D=yield w.auth._redirectUserForId(f.eventId);if(D)return w.user=D,g().call(w,f);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function Pp(){return(Pp=(0,m.Z)(function*(v,f){const g=ra(f),w=$a(v);if(!(yield w._isAvailable()))return!1;const D="true"===(yield w._get(g));return yield w._remove(g),D})).apply(this,arguments)}function es(v,f){return td.apply(this,arguments)}function td(){return(td=(0,m.Z)(function*(v,f){return $a(v)._set(ra(f),"true")})).apply(this,arguments)}function $a(v){return Wn(v._redirectPersistence)}function ra(v){return Cn("pendingRedirect",v.config.apiKey,v.name)}function Op(){return(Op=(0,m.Z)(function*(v,f,g){const w=mn(v);ar(v,f,an);const D=ft(w,g);return yield es(D,w),D._openRedirect(w,f,"signInViaRedirect")})).apply(this,arguments)}function Ou(){return(Ou=(0,m.Z)(function*(v,f,g){const w=(0,L.m9)(v);ar(w.auth,f,an);const D=ft(w.auth,g);yield es(D,w.auth);const N=yield Kt(w);return D._openRedirect(w.auth,f,"reauthViaRedirect",N)})).apply(this,arguments)}function kp(){return(kp=(0,m.Z)(function*(v,f,g){const w=(0,L.m9)(v);ar(w.auth,f,an);const D=ft(w.auth,g);yield Ht(!1,w,f.providerId),yield es(D,w.auth);const N=yield Kt(w);return D._openRedirect(w.auth,f,"linkViaRedirect",N)})).apply(this,arguments)}function Ha(){return(Ha=(0,m.Z)(function*(v,f){return yield mn(v)._initializationPromise,Fu(v,f,!1)})).apply(this,arguments)}function Fu(v,f){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,m.Z)(function*(v,f,g=!1){const w=mn(v),D=ft(w,f),q=yield new Pu(w,D,g).execute();return q&&!g&&(delete q.user._redirectEventId,yield w._persistUserIfCurrent(q.user),yield w._setRedirectUser(null,f)),q})).apply(this,arguments)}function Kt(v){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,m.Z)(function*(v){const f=jn(`${v.uid}:::`);return v._redirectEventId=f,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),f})).apply(this,arguments)}class Wa{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(f,w)&&(g=!0,this.sendToConsumer(f,w),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kh(v);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var w;if(f.error&&!kh(f)){const D=(null===(w=f.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";g.onError(In(this.auth,D))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const w=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&w}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(l_(f))}saveEventToCache(f){this.cachedEventUids.add(l_(f)),this.lastProcessedEventTime=Date.now()}}function l_(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(f=>f).join("-")}function kh({type:v,error:f}){return"unknown"===v&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Fh(v){return $s.apply(this,arguments)}function $s(){return($s=(0,m.Z)(function*(v,f={}){return on(v,"GET","/v1/projects",f)})).apply(this,arguments)}const rd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,c_=/^https?/;function Tl(){return(Tl=(0,m.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:f}=yield Fh(v);for(const g of f)try{if(id(g))return}catch(w){}vn(v,"unauthorized-domain")})).apply(this,arguments)}function id(v){const f=Ir(),{protocol:g,hostname:w}=new URL(f);if(v.startsWith("chrome-extension://")){const q=new URL(v);return""===q.hostname&&""===w?"chrome-extension:"===g&&v.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&q.hostname===w}if(!c_.test(g))return!1;if(rd.test(v))return w===v;const D=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+D+"|"+D+")$","i").test(w)}const sd=new He(3e4,6e4);function Lh(){const v=Xn().___jsl;if(null==v?void 0:v.H)for(const f of Object.keys(v.H))if(v.H[f].r=v.H[f].r||[],v.H[f].L=v.H[f].L||[],v.H[f].r=[...v.H[f].L],v.CP)for(let g=0;g<v.CP.length;g++)v.CP[g]=null}let So=null;function lE(v){return So=So||function(v){return new Promise((f,g)=>{var w,D,N;function q(){Lh(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Lh(),g(In(v,"network-request-failed"))},timeout:sd.get()})}if(null===(D=null===(w=Xn().gapi)||void 0===w?void 0:w.iframes)||void 0===D?void 0:D.Iframe)f(gapi.iframes.getContext());else{if(!(null===(N=Xn().gapi)||void 0===N?void 0:N.load)){const le=Bs("iframefcb");return Xn()[le]=()=>{gapi.load?q():g(In(v,"network-request-failed"))},Eo(`https://apis.google.com/js/api.js?onload=${le}`).catch(Ve=>g(Ve))}q()}}).catch(f=>{throw So=null,f})}(v),So}const cE=new He(5e3,15e3),hE={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ia=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Dl(v){const f=v.config;Me(f.authDomain,v,"auth-domain-config-required");const g=f.emulator?gt(f,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,w={apiKey:f.apiKey,appName:v.name,v:ae.SDK_VERSION},D=ia.get(v.config.apiHost);D&&(w.eid=D);const N=v._getFrameworks();return N.length&&(w.fw=N.join(",")),`${g}?${(0,L.xO)(w).slice(1)}`}function Uh(){return(Uh=(0,m.Z)(function*(v){const f=yield lE(v),g=Xn().gapi;return Me(g,v,"internal-error"),f.open({where:document.body,url:Dl(v),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hE,dontclear:!0},w=>new Promise(function(){var D=(0,m.Z)(function*(N,q){yield w.restyle({setHideOnLeave:!1});const le=In(v,"network-request-failed"),Ve=Xn().setTimeout(()=>{q(le)},cE.get());function Re(){Xn().clearTimeout(Ve),N(w)}w.ping(Re).then(Re,()=>{q(le)})});return function(N,q){return D.apply(this,arguments)}}()))})).apply(this,arguments)}const Vp={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class jp{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function Al(v,f,g,w,D,N){Me(v.config.authDomain,v,"auth-domain-config-required"),Me(v.config.apiKey,v,"invalid-api-key");const q={apiKey:v.config.apiKey,appName:v.name,authType:g,redirectUrl:w,v:ae.SDK_VERSION,eventId:D};if(f instanceof an){f.setDefaultLanguage(v.languageCode),q.providerId=f.providerId||"",(0,L.xb)(f.getCustomParameters())||(q.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Ve,Re]of Object.entries(N||{}))q[Ve]=Re}if(f instanceof co){const Ve=f.getScopes().filter(Re=>""!==Re);Ve.length>0&&(q.scopes=Ve.join(","))}v.tenantId&&(q.tid=v.tenantId);const le=q;for(const Ve of Object.keys(le))void 0===le[Ve]&&delete le[Ve];return`${function({config:v}){return v.emulator?gt(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,L.xO)(le).slice(1)}`}const Rl="webStorageSupport";class jh extends class{constructor(f){this.factorId=f}_process(f,g,w){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,w);case"signin":return this._finalizeSignIn(f,g.credential);default:return ur("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new jh(f)}_finalizeEnroll(f,g,w){return function(v,f){return on(v,"POST","/v2/accounts/mfaEnrollment:finalize",Et(v,f))}(f,{idToken:g,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function(v,f){return on(v,"POST","/v2/accounts/mfaSignIn:finalize",Et(v,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ad=(()=>{class v{constructor(){}static assertion(g){return jh._fromCredential(g)}}return v.FACTOR_ID="phone",v})();var v,f_="@firebase/auth",pE="0.19.12";class lI{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,m.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(w=>{var D;f((null===(D=w)||void 0===D?void 0:D.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function za(){return window}function Gp(){return(Gp=(0,m.Z)(function*(v,f,g){var w;const{BuildInfo:D}=za();Ke(f.sessionId,"AuthEvent did not contain a session ID");const N=yield zp(f.sessionId),q={};return hs()?q.ibi=D.packageName:ln()?q.apn=D.packageName:vn(v,"operation-not-supported-in-this-environment"),D.displayName&&(q.appDisplayName=D.displayName),q.sessionId=N,Al(v,g,f.type,void 0,null!==(w=f.eventId)&&void 0!==w?w:void 0,q)})).apply(this,arguments)}function qp(){return(qp=(0,m.Z)(function*(v){const{BuildInfo:f}=za(),g={};hs()?g.iosBundleId=f.packageName:ln()?g.androidPackageName=f.packageName:vn(v,"operation-not-supported-in-this-environment"),yield Fh(v,g)})).apply(this,arguments)}function Vu(){return(Vu=(0,m.Z)(function*(v,f,g){const{cordova:w}=za();let D=()=>{};try{yield new Promise((N,q)=>{let le=null;function Ve(){var rt;N();const en=null===(rt=w.plugins.browsertab)||void 0===rt?void 0:rt.close;"function"==typeof en&&en(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Re(){le||(le=window.setTimeout(()=>{q(In(v,"redirect-cancelled-by-user"))},2e3))}function Je(){"visible"===(null==document?void 0:document.visibilityState)&&Re()}f.addPassiveListener(Ve),document.addEventListener("resume",Re,!1),ln()&&document.addEventListener("visibilitychange",Je,!1),D=()=>{f.removePassiveListener(Ve),document.removeEventListener("resume",Re,!1),document.removeEventListener("visibilitychange",Je,!1),le&&window.clearTimeout(le)}})}finally{D()}})).apply(this,arguments)}function zp(v){return ld.apply(this,arguments)}function ld(){return(ld=(0,m.Z)(function*(v){const f=nr(v),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(D=>D.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function nr(v){if(Ke(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(v);const f=new ArrayBuffer(v.length),g=new Uint8Array(f);for(let w=0;w<v.length;w++)g[w]=v.charCodeAt(w);return g}v="Browser",(0,ae._registerComponent)(new Nt.wA("auth",(f,{options:g})=>{const w=f.getProvider("app").getImmediate(),D=f.getProvider("heartbeat"),{apiKey:N,authDomain:q}=w.options;return((le,Ve)=>{Me(N&&!N.includes(":"),"invalid-api-key",{appName:le.name}),Me(!(null==q?void 0:q.includes(":")),"argument-error",{appName:le.name});const Re={apiKey:N,authDomain:q,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fp(v)},Je=new Ai(le,Ve,Re);return function(v,f){const g=(null==f?void 0:f.persistence)||[],w=(Array.isArray(g)?g:[g]).map(Wn);(null==f?void 0:f.errorMap)&&v._updateErrorMap(f.errorMap),v._initializeWithPersistence(w,null==f?void 0:f.popupRedirectResolver)}(Je,g),Je})(w,D)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,w)=>{f.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new Nt.wA("auth-internal",f=>{const g=mn(f.getProvider("auth").getImmediate());return new lI(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(f_,pE,void 0),(0,ae.registerVersion)(f_,pE,"esm2017");class m_ extends Wa{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,m.Z)(function*(){yield f.initPromise})()}}function Zp(v){return Yp.apply(this,arguments)}function Yp(){return(Yp=(0,m.Z)(function*(v){const f=yield Jp()._get(Za(v));return f&&(yield Jp()._remove(Za(v))),f})).apply(this,arguments)}function Ka(){const v=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const w=Math.floor(Math.random()*f.length);v.push(f.charAt(w))}return v.join("")}function Jp(){return Wn(Ji)}function Za(v){return Cn("authEvent",v.config.apiKey,v.name)}function Or(v){if(!(null==v?void 0:v.includes("?")))return{};const[f,...g]=v.split("?");return(0,L.zd)(g.join("?"))}function kr(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:In("no-auth-event")}}function oi(){var v;return(null===(v=null==self?void 0:self.location)||void 0===v?void 0:v.protocol)||null}function $h(v=(0,L.z$)()){return!("file:"!==oi()&&"ionic:"!==oi()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function v_(){try{const v=self.localStorage,f=jn();if(v)return v.setItem(f,"1"),v.removeItem(f),!function(v=(0,L.z$)()){return(0,L.w1)()&&11===(null==document?void 0:document.documentMode)||function(v=(0,L.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,L.hl)()}catch(v){return Gh()&&(0,L.hl)()}return!1}function Gh(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ya(){return("http:"===oi()||"https:"===oi()||(0,L.ru)()||$h())&&!((0,L.b$)()||(0,L.UG)())&&v_()&&!Gh()}function Wh(){return $h()&&"undefined"!=typeof document}function Fl(){return(Fl=(0,m.Z)(function*(){return!!Wh()&&new Promise(v=>{const f=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),v(!0)})})})).apply(this,arguments)}const Ar={LOCAL:"local",NONE:"none",SESSION:"session"},Ll=Me,w_="persistence";function rg(v){return ig.apply(this,arguments)}function ig(){return(ig=(0,m.Z)(function*(v){yield v._initializationPromise;const f=qh(),g=Cn(w_,v.config.apiKey,v.name);f&&f.setItem(g,v._getPersistence())})).apply(this,arguments)}function qh(){var v;try{return(null===(v="undefined"!=typeof window?window:null)||void 0===v?void 0:v.sessionStorage)||null}catch(f){return null}}const wE=Me;class ws{constructor(){this.browserResolver=Wn(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yo,this._completeRedirectFn=Fu}_openPopup(f,g,w,D){var N=this;return(0,m.Z)(function*(){var q;Ke(null===(q=N.eventManagers[f._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const le=Al(f,g,w,Ir(),D);return function(v,f,g,w=500,D=600){const N=Math.max((window.screen.availHeight-D)/2,0).toString(),q=Math.max((window.screen.availWidth-w)/2,0).toString();let le="";const Ve=Object.assign(Object.assign({},Vp),{width:w.toString(),height:D.toString(),top:N,left:q}),Re=(0,L.z$)().toLowerCase();g&&(le=Wo(Re)?"_blank":g),jr(Re)&&(f=f||"http://localhost",Ve.scrollbars="yes");const Je=Object.entries(Ve).reduce((en,[vr,Qa])=>`${en}${vr}=${Qa},`,"");if(function(v=(0,L.z$)()){var f;return hs(v)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Re)&&"_self"!==le)return function(v,f){const g=document.createElement("a");g.href=v,g.target=f;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(w)}(f||"",le),new jp(null);const rt=window.open(f||"",le,Je);Me(rt,v,"popup-blocked");try{rt.focus()}catch(en){}return new jp(rt)}(f,le,jn())})()}_openRedirect(f,g,w,D){var N=this;return(0,m.Z)(function*(){return yield N._originValidation(f),v=Al(f,g,w,Ir(),D),Xn().location.href=v,new Promise(()=>{});var v})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:D,promise:N}=this.eventManagers[g];return D?Promise.resolve(D):(Ke(N,"If manager is not set, promise should be"),N)}const w=this.initAndGetManager(f);return this.eventManagers[g]={promise:w},w.catch(()=>{delete this.eventManagers[g]}),w}initAndGetManager(f){var g=this;return(0,m.Z)(function*(){const w=yield function(v){return Uh.apply(this,arguments)}(f),D=new Wa(f);return w.register("authEvent",N=>(Me(null==N?void 0:N.authEvent,f,"invalid-auth-event"),{status:D.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:D},g.iframes[f._key()]=w,D})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(Rl,{type:Rl},D=>{var N;const q=null===(N=null==D?void 0:D[0])||void 0===N?void 0:N[Rl];void 0!==q&&g(!!q),vn(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function(v){return Tl.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return Ps()||Ms()||hs()}}),this.cordovaResolver=Wn(class{constructor(){this._redirectPersistence=yo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Fu}_initialize(f){var g=this;return(0,m.Z)(function*(){const w=f._key();let D=g.eventManagers.get(w);return D||(D=new m_(f),g.eventManagers.set(w,D),g.attachCallbackListeners(f,D)),D})()}_openPopup(f){vn(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,w,D){var N=this;return(0,m.Z)(function*(){!function(v){var f,g,w,D,N,q,le,Ve,Re,Je;const rt=za();Me("function"==typeof(null===(f=null==rt?void 0:rt.universalLinks)||void 0===f?void 0:f.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Me(void 0!==(null===(g=null==rt?void 0:rt.BuildInfo)||void 0===g?void 0:g.packageName),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Me("function"==typeof(null===(N=null===(D=null===(w=null==rt?void 0:rt.cordova)||void 0===w?void 0:w.plugins)||void 0===D?void 0:D.browsertab)||void 0===N?void 0:N.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Me("function"==typeof(null===(Ve=null===(le=null===(q=null==rt?void 0:rt.cordova)||void 0===q?void 0:q.plugins)||void 0===le?void 0:le.browsertab)||void 0===Ve?void 0:Ve.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Me("function"==typeof(null===(Je=null===(Re=null==rt?void 0:rt.cordova)||void 0===Re?void 0:Re.InAppBrowser)||void 0===Je?void 0:Je.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const q=yield N._initialize(f);yield q.initialized(),q.resetRedirect(),Xc.clear(),yield N._originValidation(f);const le=function(v,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:Ka(),postBody:null,tenantId:v.tenantId,error:In(v,"no-auth-event")}}(f,w,D);yield function(v,f){return Jp()._set(Za(v),f)}(f,le);const Ve=yield function(v,f,g){return Gp.apply(this,arguments)}(f,le,g),Re=yield function(v){const{cordova:f}=za();return new Promise(g=>{f.plugins.browsertab.isAvailable(w=>{let D=null;w?f.plugins.browsertab.openUrl(v):D=f.InAppBrowser.open(v,function(v=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),g(D)})})}(Ve);return function(v,f,g){return Vu.apply(this,arguments)}(f,q,Re)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function(v){return qp.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:w,handleOpenURL:D,BuildInfo:N}=za(),q=setTimeout((0,m.Z)(function*(){yield Zp(f),g.onEvent(kr())}),500),le=function(){var Je=(0,m.Z)(function*(rt){clearTimeout(q);const en=yield Zp(f);let vr=null;en&&(null==rt?void 0:rt.url)&&(vr=function(v,f){var g,w;const D=function(v){const f=Or(v),g=f.link?decodeURIComponent(f.link):void 0,w=Or(g).link,D=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Or(D).link||D||w||g||v}(f);if(D.includes("/__/auth/callback")){const N=Or(D),q=N.firebaseError?function(v){try{return JSON.parse(v)}catch(f){return null}}(decodeURIComponent(N.firebaseError)):null,le=null===(w=null===(g=null==q?void 0:q.code)||void 0===g?void 0:g.split("auth/"))||void 0===w?void 0:w[1],Ve=le?In(le):null;return Ve?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Ve,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:D,postBody:null}}return null}(en,rt.url)),g.onEvent(vr||kr())});return function(en){return Je.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,le);const Ve=D,Re=`${N.packageName.toLowerCase()}://`;za().handleOpenURL=function(){var Je=(0,m.Z)(function*(rt){if(rt.toLowerCase().startsWith(Re)&&le({url:rt}),"function"==typeof Ve)try{Ve(rt)}catch(en){console.error(en)}});return function(rt){return Je.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=yo,this._completeRedirectFn=Fu}_initialize(f){var g=this;return(0,m.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,w,D){var N=this;return(0,m.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(f,g,w,D)})()}_openRedirect(f,g,w,D){var N=this;return(0,m.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(f,g,w,D)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Wh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return wE(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,m.Z)(function*(){if(f.underlyingResolver)return;const g=yield function(){return Fl.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function ai(v){return v.unwrap()}function bE(v){return sg(v)}function sg(v){const{_tokenResponse:f}=v instanceof L.ZR?v.customData:v;if(!f)return null;if(!(v instanceof L.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return ze.credentialFromResult(v);const g=f.providerId;if(!g||"password"===g)return null;let w;switch(g){case"google.com":w=fn;break;case"facebook.com":w=mu;break;case"github.com":w=cl;break;case"twitter.com":w=vu;break;default:const{oauthIdToken:D,oauthAccessToken:N,oauthTokenSecret:q,pendingToken:le,nonce:Ve}=f;return N||q||D||le?le?g.startsWith("saml.")?Yi._create(g,le):Zi._fromParams({providerId:g,signInMethod:g,pendingToken:le,idToken:D,accessToken:N}):new ho(g).credential({idToken:D,accessToken:N,rawNonce:Ve}):null}return v instanceof L.ZR?w.credentialFromError(v):w.credentialFromResult(v)}function Yr(v,f){return f.catch(g=>{throw g instanceof L.ZR&&function(v,f){var g;const w=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new hd(v,function(v,f){var g;const w=(0,L.m9)(v),D=f;return Me(f.customData.operationType,w,"argument-error"),Me(null===(g=D.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,w,"argument-error"),La._fromError(w,D)}(v,f));else if(w){const D=sg(f),N=f;D&&(N.credential=D,N.tenantId=w.tenantId||void 0,N.email=w.email||void 0,N.phoneNumber=w.phoneNumber||void 0)}}(v,g),g}).then(g=>{const D=g.user;return{operationType:g.operationType,credential:bE(g),additionalUserInfo:qc(g),user:oa.getOrCreate(D)}})}function Kh(v,f){return og.apply(this,arguments)}function og(){return(og=(0,m.Z)(function*(v,f){const g=yield f;return{verificationId:g.verificationId,confirm:w=>Yr(v,g.confirm(w))}})).apply(this,arguments)}class hd{constructor(f,g){this.resolver=g,this.auth=function(v){return v.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Yr(ai(this.auth),this.resolver.resolveSignIn(f))}}class oa{constructor(f){this._delegate=f,this.multiFactor=function(v){const f=(0,L.m9)(v);return Ls.has(f)||Ls.set(f,Th._fromUser(f)),Ls.get(f)}(f)}static getOrCreate(f){return oa.USER_MAP.has(f)||oa.USER_MAP.set(f,new oa(f)),oa.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,m.Z)(function*(){return Yr(g.auth,Eh(g._delegate,f))})()}linkWithPhoneNumber(f,g){var w=this;return(0,m.Z)(function*(){return Kh(w.auth,function(v,f,g){return I.apply(this,arguments)}(w._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,m.Z)(function*(){return Yr(g.auth,function(v,f,g){return Np.apply(this,arguments)}(g._delegate,f,ws))})()}linkWithRedirect(f){var g=this;return(0,m.Z)(function*(){return yield rg(mn(g.auth)),function(v,f,g){return function(v,f,g){return kp.apply(this,arguments)}(v,f,g)}(g._delegate,f,ws)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,m.Z)(function*(){return Yr(g.auth,Jo(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return Kh(this.auth,function(v,f,g){return M.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return Yr(this.auth,function(v,f,g){return js.apply(this,arguments)}(this._delegate,f,ws))}reauthenticateWithRedirect(f){var g=this;return(0,m.Z)(function*(){return yield rg(mn(g.auth)),function(v,f,g){return function(v,f,g){return Ou.apply(this,arguments)}(v,f,g)}(g._delegate,f,ws)})()}sendEmailVerification(f){return function(v,f){return Hc.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,m.Z)(function*(){return yield function(v,f){return wu.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function(v,f){return ea((0,L.m9)(v),f,null)}(this._delegate,f)}updatePassword(f){return function(v,f){return ea((0,L.m9)(v),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function(v,f){return Ne.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function(v,f){return yl.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function(v,f,g){return ka.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}oa.USER_MAP=new WeakMap;const Ao=Me;let Gs=(()=>{class v{constructor(g,w){if(this.app=g,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:D}=g.options;Ao(D,"invalid-api-key",{appName:g.name}),Ao(D,"invalid-api-key",{appName:g.name});const N="undefined"!=typeof window?ws:void 0;this._delegate=w.initialize({options:{persistence:dI(D,g.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(Gn),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?oa.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,w){!function(v,f,g){const w=mn(v);Me(w._canInitEmulator,w,"emulator-config-failed"),Me(/^https?:\/\//.test(f),w,"invalid-emulator-scheme");const D=!!(null==g?void 0:g.disableWarnings),N=du(f),{host:q,port:le}=function(v){const f=du(v),g=/(\/\/)?([^?#/]+)/.exec(v.substr(f.length));if(!g)return{host:"",port:null};const w=g[2].split("@").pop()||"",D=/^(\[[^\]]+\])(:|$)/.exec(w);if(D){const N=D[1];return{host:N,port:xi(w.substr(N.length+1))}}{const[N,q]=w.split(":");return{host:N,port:xi(q)}}}(f);w.config.emulator={url:`${N}//${q}${null===le?"":`:${le}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:q,port:le,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:D})}),D||function(){function v(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,g,w)}applyActionCode(g){return function(v,f){return Fs.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return pl(this._delegate,g)}confirmPasswordReset(g,w){return function(v,f,g){return Cu.apply(this,arguments)}(this._delegate,g,w)}createUserWithEmailAndPassword(g,w){var D=this;return(0,m.Z)(function*(){return Yr(D._delegate,function(v,f,g){return Tu.apply(this,arguments)}(D._delegate,g,w))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function(v,f){return Oa.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function(v,f){const g=lo.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,m.Z)(function*(){Ao(Ya(),g._delegate,"operation-not-supported-in-this-environment");const w=yield function(v,f){return Ha.apply(this,arguments)}(g._delegate,ws);return w?Yr(g._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function(v,f){mn(v)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,w,D){const{next:N,error:q,complete:le}=CE(g,w,D);return this._delegate.onAuthStateChanged(N,q,le)}onIdTokenChanged(g,w,D){const{next:N,error:q,complete:le}=CE(g,w,D);return this._delegate.onIdTokenChanged(N,q,le)}sendSignInLinkToEmail(g,w){return function(v,f,g){return Su.apply(this,arguments)}(this._delegate,g,w)}sendPasswordResetEmail(g,w){return function(v,f,g){return jc.apply(this,arguments)}(this._delegate,g,w||void 0)}setPersistence(g){var w=this;return(0,m.Z)(function*(){let D;switch(function(v,f){Ll(Object.values(Ar).includes(f),v,"invalid-persistence-type"),(0,L.b$)()?Ll(f!==Ar.SESSION,v,"unsupported-persistence-type"):(0,L.UG)()?Ll(f===Ar.NONE,v,"unsupported-persistence-type"):Gh()?Ll(f===Ar.NONE||f===Ar.LOCAL&&(0,L.hl)(),v,"unsupported-persistence-type"):Ll(f===Ar.NONE||v_(),v,"unsupported-persistence-type")}(w._delegate,g),g){case Ar.SESSION:D=yo;break;case Ar.LOCAL:D=(yield Wn(Us)._isAvailable())?Us:Ji;break;case Ar.NONE:D=Si;break;default:return vn("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(D)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Yr(this._delegate,function(v){return Vc.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Yr(this._delegate,Qo(this._delegate,g))}signInWithCustomToken(g){return Yr(this._delegate,function(v,f){return Ri.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,w){return Yr(this._delegate,function(v,f,g){return Qo((0,L.m9)(v),gu.credential(f,g))}(this._delegate,g,w))}signInWithEmailLink(g,w){return Yr(this._delegate,function(v,f,g){return go.apply(this,arguments)}(this._delegate,g,w))}signInWithPhoneNumber(g,w){return Kh(this._delegate,function(v,f,g){return Io.apply(this,arguments)}(this._delegate,g,w))}signInWithPopup(g){var w=this;return(0,m.Z)(function*(){return Ao(Ya(),w._delegate,"operation-not-supported-in-this-environment"),Yr(w._delegate,function(v,f,g){return To.apply(this,arguments)}(w._delegate,g,ws))})()}signInWithRedirect(g){var w=this;return(0,m.Z)(function*(){return Ao(Ya(),w._delegate,"operation-not-supported-in-this-environment"),yield rg(w._delegate),function(v,f,g){return function(v,f,g){return Op.apply(this,arguments)}(v,f,g)}(w._delegate,g,ws)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function(v,f){return ml.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Ar,v})();function CE(v,f,g){let w=v;"function"!=typeof v&&({next:w,error:f,complete:g}=v);const D=w;return{next:q=>D(q&&oa.getOrCreate(q)),error:f,complete:g}}function dI(v,f){const g=function(v,f){const g=qh();if(!g)return[];const w=Cn(w_,v,f);switch(g.getItem(w)){case Ar.NONE:return[Si];case Ar.LOCAL:return[Us,yo];case Ar.SESSION:return[yo];default:return[]}}(v,f);if("undefined"!=typeof self&&!g.includes(Us)&&g.push(Us),"undefined"!=typeof window)for(const w of[Ji,yo])g.includes(w)||g.push(w);return g.includes(Si)||g.push(Si),g}class Zh{constructor(){this.providerId="phone",this._delegate=new ze(ai(X.Z.auth()))}static credential(f,g){return ze.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Zh.PHONE_SIGN_IN_METHOD=ze.PHONE_SIGN_IN_METHOD,Zh.PROVIDER_ID=ze.PROVIDER_ID;const hI=Me;class xo{constructor(f,g,w=X.Z.app()){var D;hI(null===(D=w.options)||void 0===D?void 0:D.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new xp(f,g,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(v){v.INTERNAL.registerComponent(new Nt.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),w=f.getProvider("auth");return new Gs(g,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:gu,FacebookAuthProvider:mu,GithubAuthProvider:cl,GoogleAuthProvider:fn,OAuthProvider:ho,SAMLAuthProvider:yu,PhoneAuthProvider:Zh,PhoneMultiFactorGenerator:ad,RecaptchaVerifier:xo,TwitterAuthProvider:vu,Auth:Gs,AuthCredential:Sa,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.12")}(X.Z)},7574:(nt,Ce,V)=>{"use strict";V.d(Ce,{y:()=>G});var m=V(7393),L=V(9181),ae=V(6490),Z=V(6554),me=V(4487);var U=V(2494);let G=(()=>{class te{constructor(fe){this._isScalar=!1,fe&&(this._subscribe=fe)}lift(fe){const pe=new te;return pe.source=this,pe.operator=fe,pe}subscribe(fe,pe,Le){const{operator:oe}=this,he=function(te,ue,fe){if(te){if(te instanceof m.L)return te;if(te[L.b])return te[L.b]()}return te||ue||fe?new m.L(te,ue,fe):new m.L(ae.c)}(fe,pe,Le);if(he.add(oe?oe.call(he,this.source):this.source||U.v.useDeprecatedSynchronousErrorHandling&&!he.syncErrorThrowable?this._subscribe(he):this._trySubscribe(he)),U.v.useDeprecatedSynchronousErrorHandling&&he.syncErrorThrowable&&(he.syncErrorThrowable=!1,he.syncErrorThrown))throw he.syncErrorValue;return he}_trySubscribe(fe){try{return this._subscribe(fe)}catch(pe){U.v.useDeprecatedSynchronousErrorHandling&&(fe.syncErrorThrown=!0,fe.syncErrorValue=pe),function(te){for(;te;){const{closed:ue,destination:fe,isStopped:pe}=te;if(ue||pe)return!1;te=fe&&fe instanceof m.L?fe:null}return!0}(fe)?fe.error(pe):console.warn(pe)}}forEach(fe,pe){return new(pe=B(pe))((Le,oe)=>{let he;he=this.subscribe(Oe=>{try{fe(Oe)}catch($e){oe($e),he&&he.unsubscribe()}},oe,Le)})}_subscribe(fe){const{source:pe}=this;return pe&&pe.subscribe(fe)}[Z.L](){return this}pipe(...fe){return 0===fe.length?this:function(te){return 0===te.length?me.y:1===te.length?te[0]:function(fe){return te.reduce((pe,Le)=>Le(pe),fe)}}(fe)(this)}toPromise(fe){return new(fe=B(fe))((pe,Le)=>{let oe;this.subscribe(he=>oe=he,he=>Le(he),()=>pe(oe))})}}return te.create=ue=>new te(ue),te})();function B(te){if(te||(te=U.v.Promise||Promise),!te)throw new Error("no Promise impl found");return te}},6490:(nt,Ce,V)=>{"use strict";V.d(Ce,{c:()=>L});var m=V(2494),X=V(4449);const L={closed:!0,next(ae){},error(ae){if(m.v.useDeprecatedSynchronousErrorHandling)throw ae;(0,X.z)(ae)},complete(){}}},9765:(nt,Ce,V)=>{"use strict";V.d(Ce,{Yc:()=>me,xQ:()=>J});var m=V(7574),X=V(7393),L=V(5319),ae=V(7971),re=V(8858),Z=V(9181);class me extends X.L{constructor(G){super(G),this.destination=G}}let J=(()=>{class U extends m.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[Z.b](){return new me(this)}lift(B){const te=new ne(this,this);return te.operator=B,te}next(B){if(this.closed)throw new ae.N;if(!this.isStopped){const{observers:te}=this,ue=te.length,fe=te.slice();for(let pe=0;pe<ue;pe++)fe[pe].next(B)}}error(B){if(this.closed)throw new ae.N;this.hasError=!0,this.thrownError=B,this.isStopped=!0;const{observers:te}=this,ue=te.length,fe=te.slice();for(let pe=0;pe<ue;pe++)fe[pe].error(B);this.observers.length=0}complete(){if(this.closed)throw new ae.N;this.isStopped=!0;const{observers:B}=this,te=B.length,ue=B.slice();for(let fe=0;fe<te;fe++)ue[fe].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(B){if(this.closed)throw new ae.N;return super._trySubscribe(B)}_subscribe(B){if(this.closed)throw new ae.N;return this.hasError?(B.error(this.thrownError),L.w.EMPTY):this.isStopped?(B.complete(),L.w.EMPTY):(this.observers.push(B),new re.W(this,B))}asObservable(){const B=new m.y;return B.source=this,B}}return U.create=(G,B)=>new ne(G,B),U})();class ne extends J{constructor(G,B){super(),this.destination=G,this.source=B}next(G){const{destination:B}=this;B&&B.next&&B.next(G)}error(G){const{destination:B}=this;B&&B.error&&this.destination.error(G)}complete(){const{destination:G}=this;G&&G.complete&&this.destination.complete()}_subscribe(G){const{source:B}=this;return B?this.source.subscribe(G):L.w.EMPTY}}},8858:(nt,Ce,V)=>{"use strict";V.d(Ce,{W:()=>X});var m=V(5319);class X extends m.w{constructor(ae,re){super(),this.subject=ae,this.subscriber=re,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ae=this.subject,re=ae.observers;if(this.subject=null,!re||0===re.length||ae.isStopped||ae.closed)return;const Z=re.indexOf(this.subscriber);-1!==Z&&re.splice(Z,1)}}},7393:(nt,Ce,V)=>{"use strict";V.d(Ce,{L:()=>me});var m=V(9105),X=V(6490),L=V(5319),ae=V(9181),re=V(2494),Z=V(4449);class me extends L.w{constructor(U,G,B){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=X.c;break;case 1:if(!U){this.destination=X.c;break}if("object"==typeof U){U instanceof me?(this.syncErrorThrowable=U.syncErrorThrowable,this.destination=U,U.add(this)):(this.syncErrorThrowable=!0,this.destination=new J(this,U));break}default:this.syncErrorThrowable=!0,this.destination=new J(this,U,G,B)}}[ae.b](){return this}static create(U,G,B){const te=new me(U,G,B);return te.syncErrorThrowable=!1,te}next(U){this.isStopped||this._next(U)}error(U){this.isStopped||(this.isStopped=!0,this._error(U))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(U){this.destination.next(U)}_error(U){this.destination.error(U),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:U}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=U,this}}class J extends me{constructor(U,G,B,te){super(),this._parentSubscriber=U;let ue,fe=this;(0,m.m)(G)?ue=G:G&&(ue=G.next,B=G.error,te=G.complete,G!==X.c&&(fe=Object.create(G),(0,m.m)(fe.unsubscribe)&&this.add(fe.unsubscribe.bind(fe)),fe.unsubscribe=this.unsubscribe.bind(this))),this._context=fe,this._next=ue,this._error=B,this._complete=te}next(U){if(!this.isStopped&&this._next){const{_parentSubscriber:G}=this;re.v.useDeprecatedSynchronousErrorHandling&&G.syncErrorThrowable?this.__tryOrSetError(G,this._next,U)&&this.unsubscribe():this.__tryOrUnsub(this._next,U)}}error(U){if(!this.isStopped){const{_parentSubscriber:G}=this,{useDeprecatedSynchronousErrorHandling:B}=re.v;if(this._error)B&&G.syncErrorThrowable?(this.__tryOrSetError(G,this._error,U),this.unsubscribe()):(this.__tryOrUnsub(this._error,U),this.unsubscribe());else if(G.syncErrorThrowable)B?(G.syncErrorValue=U,G.syncErrorThrown=!0):(0,Z.z)(U),this.unsubscribe();else{if(this.unsubscribe(),B)throw U;(0,Z.z)(U)}}}complete(){if(!this.isStopped){const{_parentSubscriber:U}=this;if(this._complete){const G=()=>this._complete.call(this._context);re.v.useDeprecatedSynchronousErrorHandling&&U.syncErrorThrowable?(this.__tryOrSetError(U,G),this.unsubscribe()):(this.__tryOrUnsub(G),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(U,G){try{U.call(this._context,G)}catch(B){if(this.unsubscribe(),re.v.useDeprecatedSynchronousErrorHandling)throw B;(0,Z.z)(B)}}__tryOrSetError(U,G,B){if(!re.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{G.call(this._context,B)}catch(te){return re.v.useDeprecatedSynchronousErrorHandling?(U.syncErrorValue=te,U.syncErrorThrown=!0,!0):((0,Z.z)(te),!0)}return!1}_unsubscribe(){const{_parentSubscriber:U}=this;this._context=null,this._parentSubscriber=null,U.unsubscribe()}}},5319:(nt,Ce,V)=>{"use strict";V.d(Ce,{w:()=>Z});var m=V(9796),X=V(1555),L=V(9105);const re=(()=>{function J(ne){return Error.call(this),this.message=ne?`${ne.length} errors occurred during unsubscription:\n${ne.map((U,G)=>`${G+1}) ${U.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ne,this}return J.prototype=Object.create(Error.prototype),J})();class Z{constructor(ne){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,ne&&(this._ctorUnsubscribe=!0,this._unsubscribe=ne)}unsubscribe(){let ne;if(this.closed)return;let{_parentOrParents:U,_ctorUnsubscribe:G,_unsubscribe:B,_subscriptions:te}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,U instanceof Z)U.remove(this);else if(null!==U)for(let ue=0;ue<U.length;++ue)U[ue].remove(this);if((0,L.m)(B)){G&&(this._unsubscribe=void 0);try{B.call(this)}catch(ue){ne=ue instanceof re?me(ue.errors):[ue]}}if((0,m.k)(te)){let ue=-1,fe=te.length;for(;++ue<fe;){const pe=te[ue];if((0,X.K)(pe))try{pe.unsubscribe()}catch(Le){ne=ne||[],Le instanceof re?ne=ne.concat(me(Le.errors)):ne.push(Le)}}}if(ne)throw new re(ne)}add(ne){let U=ne;if(!ne)return Z.EMPTY;switch(typeof ne){case"function":U=new Z(ne);case"object":if(U===this||U.closed||"function"!=typeof U.unsubscribe)return U;if(this.closed)return U.unsubscribe(),U;if(!(U instanceof Z)){const te=U;U=new Z,U._subscriptions=[te]}break;default:throw new Error("unrecognized teardown "+ne+" added to Subscription.")}let{_parentOrParents:G}=U;if(null===G)U._parentOrParents=this;else if(G instanceof Z){if(G===this)return U;U._parentOrParents=[G,this]}else{if(-1!==G.indexOf(this))return U;G.push(this)}const B=this._subscriptions;return null===B?this._subscriptions=[U]:B.push(U),U}remove(ne){const U=this._subscriptions;if(U){const G=U.indexOf(ne);-1!==G&&U.splice(G,1)}}}var J;function me(J){return J.reduce((ne,U)=>ne.concat(U instanceof re?U.errors:U),[])}Z.EMPTY=((J=new Z).closed=!0,J)},2494:(nt,Ce,V)=>{"use strict";V.d(Ce,{v:()=>X});let m=!1;const X={Promise:void 0,set useDeprecatedSynchronousErrorHandling(L){if(L){const ae=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ae.stack)}else m&&console.log("RxJS: Back to a better error behavior. Thank you. <3");m=L},get useDeprecatedSynchronousErrorHandling(){return m}}},5345:(nt,Ce,V)=>{"use strict";V.d(Ce,{IY:()=>ae,Ds:()=>Z,ft:()=>J});var m=V(7393),X=V(7574),L=V(7444);class ae extends m.L{constructor(U){super(),this.parent=U}_next(U){this.parent.notifyNext(U)}_error(U){this.parent.notifyError(U),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Z extends m.L{notifyNext(U){this.destination.next(U)}notifyError(U){this.destination.error(U)}notifyComplete(){this.destination.complete()}}function J(ne,U){if(U.closed)return;if(ne instanceof X.y)return ne.subscribe(U);let G;try{G=(0,L.s)(ne)(U)}catch(B){U.error(B)}return G}},2441:(nt,Ce,V)=>{"use strict";V.d(Ce,{c:()=>re,N:()=>Z});var m=V(9765),X=V(7574),L=V(5319),ae=V(1307);class re extends X.y{constructor(G,B){super(),this.source=G,this.subjectFactory=B,this._refCount=0,this._isComplete=!1}_subscribe(G){return this.getSubject().subscribe(G)}getSubject(){const G=this._subject;return(!G||G.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let G=this._connection;return G||(this._isComplete=!1,G=this._connection=new L.w,G.add(this.source.subscribe(new me(this.getSubject(),this))),G.closed&&(this._connection=null,G=L.w.EMPTY)),G}refCount(){return(0,ae.x)()(this)}}const Z=(()=>{const U=re.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:U._subscribe},_isComplete:{value:U._isComplete,writable:!0},getSubject:{value:U.getSubject},connect:{value:U.connect},refCount:{value:U.refCount}}})();class me extends m.Yc{constructor(G,B){super(G),this.connectable=B}_error(G){this._unsubscribe(),super._error(G)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const G=this.connectable;if(G){this.connectable=null;const B=G._connection;G._refCount=0,G._subject=null,G._connection=null,B&&B.unsubscribe()}}}},9193:(nt,Ce,V)=>{"use strict";V.d(Ce,{E:()=>X,c:()=>L});var m=V(7574);const X=new m.y(re=>re.complete());function L(re){return re?function(re){return new m.y(Z=>re.schedule(()=>Z.complete()))}(re):X}},4402:(nt,Ce,V)=>{"use strict";V.d(Ce,{D:()=>fe});var m=V(7574),X=V(7444),L=V(5319),ae=V(6554),me=V(4087),J=V(377),G=V(4072),B=V(9489);function fe(pe,Le){return Le?function(pe,Le){if(null!=pe){if(function(pe){return pe&&"function"==typeof pe[ae.L]}(pe))return function(pe,Le){return new m.y(oe=>{const he=new L.w;return he.add(Le.schedule(()=>{const Oe=pe[ae.L]();he.add(Oe.subscribe({next($e){he.add(Le.schedule(()=>oe.next($e)))},error($e){he.add(Le.schedule(()=>oe.error($e)))},complete(){he.add(Le.schedule(()=>oe.complete()))}}))})),he})}(pe,Le);if((0,G.t)(pe))return function(pe,Le){return new m.y(oe=>{const he=new L.w;return he.add(Le.schedule(()=>pe.then(Oe=>{he.add(Le.schedule(()=>{oe.next(Oe),he.add(Le.schedule(()=>oe.complete()))}))},Oe=>{he.add(Le.schedule(()=>oe.error(Oe)))}))),he})}(pe,Le);if((0,B.z)(pe))return(0,me.r)(pe,Le);if(function(pe){return pe&&"function"==typeof pe[J.hZ]}(pe)||"string"==typeof pe)return function(pe,Le){if(!pe)throw new Error("Iterable cannot be null");return new m.y(oe=>{const he=new L.w;let Oe;return he.add(()=>{Oe&&"function"==typeof Oe.return&&Oe.return()}),he.add(Le.schedule(()=>{Oe=pe[J.hZ](),he.add(Le.schedule(function(){if(oe.closed)return;let $e,ht;try{const Qe=Oe.next();$e=Qe.value,ht=Qe.done}catch(Qe){return void oe.error(Qe)}ht?oe.complete():(oe.next($e),this.schedule())}))})),he})}(pe,Le)}throw new TypeError((null!==pe&&typeof pe||pe)+" is not observable")}(pe,Le):pe instanceof m.y?pe:new m.y((0,X.s)(pe))}},6693:(nt,Ce,V)=>{"use strict";V.d(Ce,{n:()=>ae});var m=V(7574),X=V(5015),L=V(4087);function ae(re,Z){return Z?(0,L.r)(re,Z):new m.y((0,X.V)(re))}},6682:(nt,Ce,V)=>{"use strict";V.d(Ce,{T:()=>re});var m=V(7574),X=V(4869),L=V(3282),ae=V(6693);function re(...Z){let me=Number.POSITIVE_INFINITY,J=null,ne=Z[Z.length-1];return(0,X.K)(ne)?(J=Z.pop(),Z.length>1&&"number"==typeof Z[Z.length-1]&&(me=Z.pop())):"number"==typeof ne&&(me=Z.pop()),null===J&&1===Z.length&&Z[0]instanceof m.y?Z[0]:(0,L.J)(me)((0,ae.n)(Z,J))}},5917:(nt,Ce,V)=>{"use strict";V.d(Ce,{of:()=>ae});var m=V(4869),X=V(6693),L=V(4087);function ae(...re){let Z=re[re.length-1];return(0,m.K)(Z)?(re.pop(),(0,L.r)(re,Z)):(0,X.n)(re)}},8002:(nt,Ce,V)=>{"use strict";V.d(Ce,{U:()=>X});var m=V(7393);function X(re,Z){return function(J){if("function"!=typeof re)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return J.lift(new L(re,Z))}}class L{constructor(Z,me){this.project=Z,this.thisArg=me}call(Z,me){return me.subscribe(new ae(Z,this.project,this.thisArg))}}class ae extends m.L{constructor(Z,me,J){super(Z),this.project=me,this.count=0,this.thisArg=J||this}_next(Z){let me;try{me=this.project.call(this.thisArg,Z,this.count++)}catch(J){return void this.destination.error(J)}this.destination.next(me)}}},3282:(nt,Ce,V)=>{"use strict";V.d(Ce,{J:()=>L});var m=V(9773),X=V(4487);function L(ae=Number.POSITIVE_INFINITY){return(0,m.zg)(X.y,ae)}},9773:(nt,Ce,V)=>{"use strict";V.d(Ce,{zg:()=>ae});var m=V(8002),X=V(4402),L=V(5345);function ae(J,ne,U=Number.POSITIVE_INFINITY){return"function"==typeof ne?G=>G.pipe(ae((B,te)=>(0,X.D)(J(B,te)).pipe((0,m.U)((ue,fe)=>ne(B,ue,te,fe))),U)):("number"==typeof ne&&(U=ne),G=>G.lift(new re(J,U)))}class re{constructor(ne,U=Number.POSITIVE_INFINITY){this.project=ne,this.concurrent=U}call(ne,U){return U.subscribe(new Z(ne,this.project,this.concurrent))}}class Z extends L.Ds{constructor(ne,U,G=Number.POSITIVE_INFINITY){super(ne),this.project=U,this.concurrent=G,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(ne){this.active<this.concurrent?this._tryNext(ne):this.buffer.push(ne)}_tryNext(ne){let U;const G=this.index++;try{U=this.project(ne,G)}catch(B){return void this.destination.error(B)}this.active++,this._innerSub(U)}_innerSub(ne){const U=new L.IY(this),G=this.destination;G.add(U);const B=(0,L.ft)(ne,U);B!==U&&G.add(B)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(ne){this.destination.next(ne)}notifyComplete(){const ne=this.buffer;this.active--,ne.length>0?this._next(ne.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(nt,Ce,V)=>{"use strict";V.d(Ce,{ht:()=>G,QV:()=>ne});var m=V(7393),X=V(9193),L=V(5917),ae=V(7574);class J{constructor(ue,fe,pe){this.kind=ue,this.value=fe,this.error=pe,this.hasValue="N"===ue}observe(ue){switch(this.kind){case"N":return ue.next&&ue.next(this.value);case"E":return ue.error&&ue.error(this.error);case"C":return ue.complete&&ue.complete()}}do(ue,fe,pe){switch(this.kind){case"N":return ue&&ue(this.value);case"E":return fe&&fe(this.error);case"C":return pe&&pe()}}accept(ue,fe,pe){return ue&&"function"==typeof ue.next?this.observe(ue):this.do(ue,fe,pe)}toObservable(){switch(this.kind){case"N":return(0,L.of)(this.value);case"E":return te=this.error,new ae.y(fe=>fe.error(te));case"C":return(0,X.c)()}var te;throw new Error("unexpected notification kind value")}static createNext(ue){return void 0!==ue?new J("N",ue):J.undefinedValueNotification}static createError(ue){return new J("E",void 0,ue)}static createComplete(){return J.completeNotification}}function ne(te,ue=0){return function(pe){return pe.lift(new U(te,ue))}}J.completeNotification=new J("C"),J.undefinedValueNotification=new J("N",void 0);class U{constructor(ue,fe=0){this.scheduler=ue,this.delay=fe}call(ue,fe){return fe.subscribe(new G(ue,this.scheduler,this.delay))}}class G extends m.L{constructor(ue,fe,pe=0){super(ue),this.scheduler=fe,this.delay=pe}static dispatch(ue){const{notification:fe,destination:pe}=ue;fe.observe(pe),this.unsubscribe()}scheduleMessage(ue){this.destination.add(this.scheduler.schedule(G.dispatch,this.delay,new B(ue,this.destination)))}_next(ue){this.scheduleMessage(J.createNext(ue))}_error(ue){this.scheduleMessage(J.createError(ue)),this.unsubscribe()}_complete(){this.scheduleMessage(J.createComplete()),this.unsubscribe()}}class B{constructor(ue,fe){this.notification=ue,this.destination=fe}}},1307:(nt,Ce,V)=>{"use strict";V.d(Ce,{x:()=>X});var m=V(7393);function X(){return function(Z){return Z.lift(new L(Z))}}class L{constructor(Z){this.connectable=Z}call(Z,me){const{connectable:J}=this;J._refCount++;const ne=new ae(Z,J),U=me.subscribe(ne);return ne.closed||(ne.connection=J.connect()),U}}class ae extends m.L{constructor(Z,me){super(Z),this.connectable=me}_unsubscribe(){const{connectable:Z}=this;if(!Z)return void(this.connection=null);this.connectable=null;const me=Z._refCount;if(me<=0)return void(this.connection=null);if(Z._refCount=me-1,me>1)return void(this.connection=null);const{connection:J}=this,ne=Z._connection;this.connection=null,ne&&(!J||ne===J)&&ne.unsubscribe()}}},8819:(nt,Ce,V)=>{"use strict";V.d(Ce,{B:()=>me});var m=V(2441);var ae=V(1307),re=V(9765);function Z(){return new re.xQ}function me(){return J=>(0,ae.x)()(function(J,ne){return function(G){let B;B="function"==typeof J?J:function(){return J};const te=Object.create(G,m.N);return te.source=G,te.subjectFactory=B,te}}(Z)(J))}},2639:(nt,Ce,V)=>{"use strict";V.d(Ce,{R:()=>pe});var m=V(7574);let X=1;const L=Promise.resolve(),ae={};function re(oe){return oe in ae&&(delete ae[oe],!0)}const Z={setImmediate(oe){const he=X++;return ae[he]=!0,L.then(()=>re(he)&&oe()),he},clearImmediate(oe){re(oe)}};var J=V(6465),U=V(6102);const te=new class extends U.v{flush(he){this.active=!0,this.scheduled=void 0;const{actions:Oe}=this;let $e,ht=-1,Qe=Oe.length;he=he||Oe.shift();do{if($e=he.execute(he.state,he.delay))break}while(++ht<Qe&&(he=Oe.shift()));if(this.active=!1,$e){for(;++ht<Qe&&(he=Oe.shift());)he.unsubscribe();throw $e}}}(class extends J.o{constructor(he,Oe){super(he,Oe),this.scheduler=he,this.work=Oe}requestAsyncId(he,Oe,$e=0){return null!==$e&&$e>0?super.requestAsyncId(he,Oe,$e):(he.actions.push(this),he.scheduled||(he.scheduled=Z.setImmediate(he.flush.bind(he,null))))}recycleAsyncId(he,Oe,$e=0){if(null!==$e&&$e>0||null===$e&&this.delay>0)return super.recycleAsyncId(he,Oe,$e);0===he.actions.length&&(Z.clearImmediate(Oe),he.scheduled=void 0)}});var ue=V(6561);class fe extends m.y{constructor(he,Oe=0,$e=te){super(),this.source=he,this.delayTime=Oe,this.scheduler=$e,(!(0,ue.k)(Oe)||Oe<0)&&(this.delayTime=0),(!$e||"function"!=typeof $e.schedule)&&(this.scheduler=te)}static create(he,Oe=0,$e=te){return new fe(he,Oe,$e)}static dispatch(he){const{source:Oe,subscriber:$e}=he;return this.add(Oe.subscribe($e))}_subscribe(he){return this.scheduler.schedule(fe.dispatch,this.delayTime,{source:this.source,subscriber:he})}}function pe(oe,he=0){return function($e){return $e.lift(new Le(oe,he))}}class Le{constructor(he,Oe){this.scheduler=he,this.delay=Oe}call(he,Oe){return new fe(Oe,this.delay,this.scheduler).subscribe(he)}}},3342:(nt,Ce,V)=>{"use strict";V.d(Ce,{b:()=>ae});var m=V(7393);function X(){}var L=V(9105);function ae(me,J,ne){return function(G){return G.lift(new re(me,J,ne))}}class re{constructor(J,ne,U){this.nextOrObserver=J,this.error=ne,this.complete=U}call(J,ne){return ne.subscribe(new Z(J,this.nextOrObserver,this.error,this.complete))}}class Z extends m.L{constructor(J,ne,U,G){super(J),this._tapNext=X,this._tapError=X,this._tapComplete=X,this._tapError=U||X,this._tapComplete=G||X,(0,L.m)(ne)?(this._context=this,this._tapNext=ne):ne&&(this._context=ne,this._tapNext=ne.next||X,this._tapError=ne.error||X,this._tapComplete=ne.complete||X)}_next(J){try{this._tapNext.call(this._context,J)}catch(ne){return void this.destination.error(ne)}this.destination.next(J)}_error(J){try{this._tapError.call(this._context,J)}catch(ne){return void this.destination.error(ne)}this.destination.error(J)}_complete(){try{this._tapComplete.call(this._context)}catch(J){return void this.destination.error(J)}return this.destination.complete()}}},4087:(nt,Ce,V)=>{"use strict";V.d(Ce,{r:()=>L});var m=V(7574),X=V(5319);function L(ae,re){return new m.y(Z=>{const me=new X.w;let J=0;return me.add(re.schedule(function(){J!==ae.length?(Z.next(ae[J++]),Z.closed||me.add(this.schedule())):Z.complete()})),me})}},6465:(nt,Ce,V)=>{"use strict";V.d(Ce,{o:()=>L});var m=V(5319);class X extends m.w{constructor(re,Z){super()}schedule(re,Z=0){return this}}class L extends X{constructor(re,Z){super(re,Z),this.scheduler=re,this.work=Z,this.pending=!1}schedule(re,Z=0){if(this.closed)return this;this.state=re;const me=this.id,J=this.scheduler;return null!=me&&(this.id=this.recycleAsyncId(J,me,Z)),this.pending=!0,this.delay=Z,this.id=this.id||this.requestAsyncId(J,this.id,Z),this}requestAsyncId(re,Z,me=0){return setInterval(re.flush.bind(re,this),me)}recycleAsyncId(re,Z,me=0){if(null!==me&&this.delay===me&&!1===this.pending)return Z;clearInterval(Z)}execute(re,Z){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const me=this._execute(re,Z);if(me)return me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(re,Z){let J,me=!1;try{this.work(re)}catch(ne){me=!0,J=!!ne&&ne||new Error(ne)}if(me)return this.unsubscribe(),J}_unsubscribe(){const re=this.id,Z=this.scheduler,me=Z.actions,J=me.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==J&&me.splice(J,1),null!=re&&(this.id=this.recycleAsyncId(Z,re,null)),this.delay=null}}},6102:(nt,Ce,V)=>{"use strict";V.d(Ce,{v:()=>X});let m=(()=>{class L{constructor(re,Z=L.now){this.SchedulerAction=re,this.now=Z}schedule(re,Z=0,me){return new this.SchedulerAction(this,re).schedule(me,Z)}}return L.now=()=>Date.now(),L})();class X extends m{constructor(ae,re=m.now){super(ae,()=>X.delegate&&X.delegate!==this?X.delegate.now():re()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ae,re=0,Z){return X.delegate&&X.delegate!==this?X.delegate.schedule(ae,re,Z):super.schedule(ae,re,Z)}flush(ae){const{actions:re}=this;if(this.active)return void re.push(ae);let Z;this.active=!0;do{if(Z=ae.execute(ae.state,ae.delay))break}while(ae=re.shift());if(this.active=!1,Z){for(;ae=re.shift();)ae.unsubscribe();throw Z}}}},3637:(nt,Ce,V)=>{"use strict";V.d(Ce,{z:()=>L,P:()=>ae});var m=V(6465);const L=new(V(6102).v)(m.o),ae=L},7771:(nt,Ce,V)=>{"use strict";V.d(Ce,{c:()=>Z,N:()=>re});var m=V(6465),L=V(6102);const re=new class extends L.v{}(class extends m.o{constructor(J,ne){super(J,ne),this.scheduler=J,this.work=ne}schedule(J,ne=0){return ne>0?super.schedule(J,ne):(this.delay=ne,this.state=J,this.scheduler.flush(this),this)}execute(J,ne){return ne>0||this.closed?super.execute(J,ne):this._execute(J,ne)}requestAsyncId(J,ne,U=0){return null!==U&&U>0||null===U&&this.delay>0?super.requestAsyncId(J,ne,U):J.flush(this)}}),Z=re},377:(nt,Ce,V)=>{"use strict";V.d(Ce,{hZ:()=>X});const X="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(nt,Ce,V)=>{"use strict";V.d(Ce,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(nt,Ce,V)=>{"use strict";V.d(Ce,{b:()=>m});const m="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(nt,Ce,V)=>{"use strict";V.d(Ce,{N:()=>X});const X=(()=>{function L(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return L.prototype=Object.create(Error.prototype),L})()},4449:(nt,Ce,V)=>{"use strict";function m(X){setTimeout(()=>{throw X},0)}V.d(Ce,{z:()=>m})},4487:(nt,Ce,V)=>{"use strict";function m(X){return X}V.d(Ce,{y:()=>m})},9796:(nt,Ce,V)=>{"use strict";V.d(Ce,{k:()=>m});const m=Array.isArray||(X=>X&&"number"==typeof X.length)},9489:(nt,Ce,V)=>{"use strict";V.d(Ce,{z:()=>m});const m=X=>X&&"number"==typeof X.length&&"function"!=typeof X},9105:(nt,Ce,V)=>{"use strict";function m(X){return"function"==typeof X}V.d(Ce,{m:()=>m})},6561:(nt,Ce,V)=>{"use strict";V.d(Ce,{k:()=>X});var m=V(9796);function X(L){return!(0,m.k)(L)&&L-parseFloat(L)+1>=0}},1555:(nt,Ce,V)=>{"use strict";function m(X){return null!==X&&"object"==typeof X}V.d(Ce,{K:()=>m})},4072:(nt,Ce,V)=>{"use strict";function m(X){return!!X&&"function"!=typeof X.subscribe&&"function"==typeof X.then}V.d(Ce,{t:()=>m})},4869:(nt,Ce,V)=>{"use strict";function m(X){return X&&"function"==typeof X.schedule}V.d(Ce,{K:()=>m})},7444:(nt,Ce,V)=>{"use strict";V.d(Ce,{s:()=>G});var m=V(5015),X=V(4449),ae=V(377),Z=V(6554),J=V(9489),ne=V(4072),U=V(1555);const G=B=>{if(B&&"function"==typeof B[Z.L])return(B=>te=>{const ue=B[Z.L]();if("function"!=typeof ue.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return ue.subscribe(te)})(B);if((0,J.z)(B))return(0,m.V)(B);if((0,ne.t)(B))return(B=>te=>(B.then(ue=>{te.closed||(te.next(ue),te.complete())},ue=>te.error(ue)).then(null,X.z),te))(B);if(B&&"function"==typeof B[ae.hZ])return(B=>te=>{const ue=B[ae.hZ]();for(;;){let fe;try{fe=ue.next()}catch(pe){return te.error(pe),te}if(fe.done){te.complete();break}if(te.next(fe.value),te.closed)break}return"function"==typeof ue.return&&te.add(()=>{ue.return&&ue.return()}),te})(B);{const ue=`You provided ${(0,U.K)(B)?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(ue)}}},5015:(nt,Ce,V)=>{"use strict";V.d(Ce,{V:()=>m});const m=X=>L=>{for(let ae=0,re=X.length;ae<re&&!L.closed;ae++)L.next(X[ae]);L.complete()}},1301:(nt,Ce,V)=>{"use strict";var m=V(7716);let X=null;function L(){return X}const me=new m.OlP("DocumentToken");let J=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,m.Yz7)({factory:ne,token:n,providedIn:"platform"}),n})();function ne(){return(0,m.LFG)(G)}const U=new m.OlP("Location Initialized");let G=(()=>{class n extends J{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){B()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){B()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(me))},n.\u0275prov=(0,m.Yz7)({factory:te,token:n,providedIn:"platform"}),n})();function B(){return!!window.history.pushState}function te(){return new G((0,m.LFG)(me))}function ue(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function fe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function pe(n){return n&&"?"!==n[0]?"?"+n:n}let Le=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,m.Yz7)({factory:oe,token:n,providedIn:"root"}),n})();function oe(n){const e=(0,m.LFG)(me).location;return new Oe((0,m.LFG)(J),e&&e.origin||"")}const he=new m.OlP("appBaseHref");let Oe=(()=>{class n extends Le{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ue(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+pe(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const c=this.prepareExternalUrl(o+pe(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,o,u){const c=this.prepareExternalUrl(o+pe(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(J),m.LFG(he,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),$e=(()=>{class n extends Le{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=ue(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let c=this.prepareExternalUrl(o+pe(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,o,u){let c=this.prepareExternalUrl(o+pe(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(J),m.LFG(he,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),ht=(()=>{class n{constructor(t,r){this._subject=new m.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=fe(ut(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+pe(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ut(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+pe(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+pe(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Le),m.LFG(J))},n.normalizeQueryParams=pe,n.joinWithSlash=ue,n.stripTrailingSlash=fe,n.\u0275prov=(0,m.Yz7)({factory:Qe,token:n,providedIn:"root"}),n})();function Qe(){return new ht((0,m.LFG)(Le),(0,m.LFG)(J))}function ut(n){return n.replace(/\/index.html$/,"")}var be=(()=>((be=be||{})[be.Zero=0]="Zero",be[be.One=1]="One",be[be.Two=2]="Two",be[be.Few=3]="Few",be[be.Many=4]="Many",be[be.Other=5]="Other",be))(),Ue=(()=>((Ue=Ue||{})[Ue.Format=0]="Format",Ue[Ue.Standalone=1]="Standalone",Ue))(),Ie=(()=>((Ie=Ie||{})[Ie.Narrow=0]="Narrow",Ie[Ie.Abbreviated=1]="Abbreviated",Ie[Ie.Wide=2]="Wide",Ie[Ie.Short=3]="Short",Ie))(),Be=(()=>((Be=Be||{})[Be.Short=0]="Short",Be[Be.Medium=1]="Medium",Be[Be.Long=2]="Long",Be[Be.Full=3]="Full",Be))(),Te=(()=>((Te=Te||{})[Te.Decimal=0]="Decimal",Te[Te.Group=1]="Group",Te[Te.List=2]="List",Te[Te.PercentSign=3]="PercentSign",Te[Te.PlusSign=4]="PlusSign",Te[Te.MinusSign=5]="MinusSign",Te[Te.Exponential=6]="Exponential",Te[Te.SuperscriptingExponent=7]="SuperscriptingExponent",Te[Te.PerMille=8]="PerMille",Te[Te.Infinity=9]="Infinity",Te[Te.NaN=10]="NaN",Te[Te.TimeSeparator=11]="TimeSeparator",Te[Te.CurrencyDecimal=12]="CurrencyDecimal",Te[Te.CurrencyGroup=13]="CurrencyGroup",Te))();function Gn(n,e){return Jn((0,m.cg1)(n)[m.wAp.DateFormat],e)}function Dt(n,e){return Jn((0,m.cg1)(n)[m.wAp.TimeFormat],e)}function Ln(n,e){return Jn((0,m.cg1)(n)[m.wAp.DateTimeFormat],e)}function gn(n,e){const t=(0,m.cg1)(n),r=t[m.wAp.NumberSymbols][e];if(void 0===r){if(e===Te.CurrencyDecimal)return t[m.wAp.NumberSymbols][Te.Decimal];if(e===Te.CurrencyGroup)return t[m.wAp.NumberSymbols][Te.Group]}return r}const ar=m.kL8;function Ti(n){if(!n[m.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[m.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Jn(n,e){for(let t=e;t>-1;t--)if(void 0!==n[t])return n[t];throw new Error("Locale data API: locale data undefined")}function Wn(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const Tr=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Vn={},rl=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var xn=(()=>((xn=xn||{})[xn.Short=0]="Short",xn[xn.ShortGMT=1]="ShortGMT",xn[xn.Long=2]="Long",xn[xn.Extended=3]="Extended",xn))(),He=(()=>((He=He||{})[He.FullYear=0]="FullYear",He[He.Month=1]="Month",He[He.Date=2]="Date",He[He.Hours=3]="Hours",He[He.Minutes=4]="Minutes",He[He.Seconds=5]="Seconds",He[He.FractionalSeconds=6]="FractionalSeconds",He[He.Day=7]="Day",He))(),gt=(()=>((gt=gt||{})[gt.DayPeriods=0]="DayPeriods",gt[gt.Days=1]="Days",gt[gt.Months=2]="Months",gt[gt.Eras=3]="Eras",gt))();function Rs(n,e,t,r){let o=function(n){if(Un(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[o,u=1,c=1]=n.split("-").map(p=>+p);return Ns(o,u-1,c)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Tr))return function(n){const e=new Date(0);let t=0,r=0;const o=n[8]?e.setUTCFullYear:e.setFullYear,u=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),o.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const c=Number(n[4]||0)-t,p=Number(n[5]||0)-r,y=Number(n[6]||0),b=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return u.call(e,c,p,y,b),e}(r)}const e=new Date(n);if(!Un(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=_i(t,e)||e;let p,c=[];for(;e;){if(p=rl.exec(e),!p){c.push(e);break}{c=c.concat(p.slice(1));const S=c.pop();if(!S)break;e=S}}let y=o.getTimezoneOffset();r&&(y=se(r,y),o=function(n,e,t){const o=n.getTimezoneOffset();return function(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,-1*(se(e,o)-o))}(o,r));let b="";return c.forEach(S=>{const x=function(n){if(Q[n])return Q[n];let e;switch(n){case"G":case"GG":case"GGG":e=St(gt.Eras,Ie.Abbreviated);break;case"GGGG":e=St(gt.Eras,Ie.Wide);break;case"GGGGG":e=St(gt.Eras,Ie.Narrow);break;case"y":e=un(He.FullYear,1,0,!1,!0);break;case"yy":e=un(He.FullYear,2,0,!0,!0);break;case"yyy":e=un(He.FullYear,3,0,!1,!0);break;case"yyyy":e=un(He.FullYear,4,0,!1,!0);break;case"Y":e=H(1);break;case"YY":e=H(2,!0);break;case"YYY":e=H(3);break;case"YYYY":e=H(4);break;case"M":case"L":e=un(He.Month,1,1);break;case"MM":case"LL":e=un(He.Month,2,1);break;case"MMM":e=St(gt.Months,Ie.Abbreviated);break;case"MMMM":e=St(gt.Months,Ie.Wide);break;case"MMMMM":e=St(gt.Months,Ie.Narrow);break;case"LLL":e=St(gt.Months,Ie.Abbreviated,Ue.Standalone);break;case"LLLL":e=St(gt.Months,Ie.Wide,Ue.Standalone);break;case"LLLLL":e=St(gt.Months,Ie.Narrow,Ue.Standalone);break;case"w":e=z(1);break;case"ww":e=z(2);break;case"W":e=z(1,!0);break;case"d":e=un(He.Date,1);break;case"dd":e=un(He.Date,2);break;case"c":case"cc":e=un(He.Day,1);break;case"ccc":e=St(gt.Days,Ie.Abbreviated,Ue.Standalone);break;case"cccc":e=St(gt.Days,Ie.Wide,Ue.Standalone);break;case"ccccc":e=St(gt.Days,Ie.Narrow,Ue.Standalone);break;case"cccccc":e=St(gt.Days,Ie.Short,Ue.Standalone);break;case"E":case"EE":case"EEE":e=St(gt.Days,Ie.Abbreviated);break;case"EEEE":e=St(gt.Days,Ie.Wide);break;case"EEEEE":e=St(gt.Days,Ie.Narrow);break;case"EEEEEE":e=St(gt.Days,Ie.Short);break;case"a":case"aa":case"aaa":e=St(gt.DayPeriods,Ie.Abbreviated);break;case"aaaa":e=St(gt.DayPeriods,Ie.Wide);break;case"aaaaa":e=St(gt.DayPeriods,Ie.Narrow);break;case"b":case"bb":case"bbb":e=St(gt.DayPeriods,Ie.Abbreviated,Ue.Standalone,!0);break;case"bbbb":e=St(gt.DayPeriods,Ie.Wide,Ue.Standalone,!0);break;case"bbbbb":e=St(gt.DayPeriods,Ie.Narrow,Ue.Standalone,!0);break;case"B":case"BB":case"BBB":e=St(gt.DayPeriods,Ie.Abbreviated,Ue.Format,!0);break;case"BBBB":e=St(gt.DayPeriods,Ie.Wide,Ue.Format,!0);break;case"BBBBB":e=St(gt.DayPeriods,Ie.Narrow,Ue.Format,!0);break;case"h":e=un(He.Hours,1,-12);break;case"hh":e=un(He.Hours,2,-12);break;case"H":e=un(He.Hours,1);break;case"HH":e=un(He.Hours,2);break;case"m":e=un(He.Minutes,1);break;case"mm":e=un(He.Minutes,2);break;case"s":e=un(He.Seconds,1);break;case"ss":e=un(He.Seconds,2);break;case"S":e=un(He.FractionalSeconds,1);break;case"SS":e=un(He.FractionalSeconds,2);break;case"SSS":e=un(He.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Ae(xn.Short);break;case"ZZZZZ":e=Ae(xn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Ae(xn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Ae(xn.Long);break;default:return null}return Q[n]=e,e}(S);b+=x?x(o,t,y):"''"===S?"'":S.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),b}function Ns(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function _i(n,e){const t=function(n){return(0,m.cg1)(n)[m.wAp.LocaleId]}(n);if(Vn[t]=Vn[t]||{},Vn[t][e])return Vn[t][e];let r="";switch(e){case"shortDate":r=Gn(n,Be.Short);break;case"mediumDate":r=Gn(n,Be.Medium);break;case"longDate":r=Gn(n,Be.Long);break;case"fullDate":r=Gn(n,Be.Full);break;case"shortTime":r=Dt(n,Be.Short);break;case"mediumTime":r=Dt(n,Be.Medium);break;case"longTime":r=Dt(n,Be.Long);break;case"fullTime":r=Dt(n,Be.Full);break;case"short":const o=_i(n,"shortTime"),u=_i(n,"shortDate");r=Et(Ln(n,Be.Short),[o,u]);break;case"medium":const c=_i(n,"mediumTime"),p=_i(n,"mediumDate");r=Et(Ln(n,Be.Medium),[c,p]);break;case"long":const y=_i(n,"longTime"),b=_i(n,"longDate");r=Et(Ln(n,Be.Long),[y,b]);break;case"full":const S=_i(n,"fullTime"),x=_i(n,"fullDate");r=Et(Ln(n,Be.Full),[S,x])}return r&&(Vn[t][e]=r),r}function Et(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function on(n,e,t="-",r,o){let u="";(n<0||o&&n<=0)&&(o?n=1-n:(n=-n,u=t));let c=String(n);for(;c.length<e;)c="0"+c;return r&&(c=c.substr(c.length-e)),u+c}function un(n,e,t=0,r=!1,o=!1){return function(u,c){let p=function(n,e){switch(n){case He.FullYear:return e.getFullYear();case He.Month:return e.getMonth();case He.Date:return e.getDate();case He.Hours:return e.getHours();case He.Minutes:return e.getMinutes();case He.Seconds:return e.getSeconds();case He.FractionalSeconds:return e.getMilliseconds();case He.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,u);if((t>0||p>-t)&&(p+=t),n===He.Hours)0===p&&-12===t&&(p=12);else if(n===He.FractionalSeconds)return function(n,e){return on(n,3).substr(0,e)}(p,e);const y=gn(c,Te.MinusSign);return on(p,e,y,r,o)}}function St(n,e,t=Ue.Format,r=!1){return function(o,u){return function(n,e,t,r,o,u){switch(t){case gt.Months:return function(n,e,t){const r=(0,m.cg1)(n),u=Jn([r[m.wAp.MonthsFormat],r[m.wAp.MonthsStandalone]],e);return Jn(u,t)}(e,o,r)[n.getMonth()];case gt.Days:return function(n,e,t){const r=(0,m.cg1)(n),u=Jn([r[m.wAp.DaysFormat],r[m.wAp.DaysStandalone]],e);return Jn(u,t)}(e,o,r)[n.getDay()];case gt.DayPeriods:const c=n.getHours(),p=n.getMinutes();if(u){const b=function(n){const e=(0,m.cg1)(n);return Ti(e),(e[m.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?Wn(r):[Wn(r[0]),Wn(r[1])])}(e),S=function(n,e,t){const r=(0,m.cg1)(n);Ti(r);const u=Jn([r[m.wAp.ExtraData][0],r[m.wAp.ExtraData][1]],e)||[];return Jn(u,t)||[]}(e,o,r),x=b.findIndex(O=>{if(Array.isArray(O)){const[$,K]=O,ye=c>=$.hours&&p>=$.minutes,xe=c<K.hours||c===K.hours&&p<K.minutes;if($.hours<K.hours){if(ye&&xe)return!0}else if(ye||xe)return!0}else if(O.hours===c&&O.minutes===p)return!0;return!1});if(-1!==x)return S[x]}return function(n,e,t){const r=(0,m.cg1)(n),u=Jn([r[m.wAp.DayPeriodsFormat],r[m.wAp.DayPeriodsStandalone]],e);return Jn(u,t)}(e,o,r)[c<12?0:1];case gt.Eras:return function(n,e){return Jn((0,m.cg1)(n)[m.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(o,u,n,e,t,r)}}function Ae(n){return function(e,t,r){const o=-1*r,u=gn(t,Te.MinusSign),c=o>0?Math.floor(o/60):Math.ceil(o/60);switch(n){case xn.Short:return(o>=0?"+":"")+on(c,2,u)+on(Math.abs(o%60),2,u);case xn.ShortGMT:return"GMT"+(o>=0?"+":"")+on(c,1,u);case xn.Long:return"GMT"+(o>=0?"+":"")+on(c,2,u)+":"+on(Math.abs(o%60),2,u);case xn.Extended:return 0===r?"Z":(o>=0?"+":"")+on(c,2,u)+":"+on(Math.abs(o%60),2,u);default:throw new Error(`Unknown zone width "${n}"`)}}}function Qt(n){return Ns(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function z(n,e=!1){return function(t,r){let o;if(e){const u=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,c=t.getDate();o=1+Math.floor((c+u)/7)}else{const u=Qt(t),c=function(n){const e=Ns(n,0,1).getDay();return Ns(n,0,1+(e<=4?4:11)-e)}(u.getFullYear()),p=u.getTime()-c.getTime();o=1+Math.round(p/6048e5)}return on(o,n,gn(r,Te.MinusSign))}}function H(n,e=!1){return function(t,r){return on(Qt(t).getFullYear(),n,gn(r,Te.MinusSign),e)}}const Q={};function se(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Un(n){return n instanceof Date&&!isNaN(n.valueOf())}class Si{}let oo=(()=>{class n extends Si{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(ar(r||this.locale)(t)){case be.Zero:return"zero";case be.One:return"one";case be.Two:return"two";case be.Few:return"few";case be.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.soG))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Ms=(()=>{class n{constructor(t,r,o,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=o,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,m.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,m.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.ZZ4),m.Y36(m.aQg),m.Y36(m.SBq),m.Y36(m.Qsj))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class ni{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ln=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=[];t.forEachOperation((o,u,c)=>{if(null==o.previousIndex){const p=this._viewContainer.createEmbeddedView(this._template,new ni(null,this._ngForOf,-1,-1),null===c?void 0:c),y=new Ac(o,p);r.push(y)}else if(null==c)this._viewContainer.remove(null===u?void 0:u);else if(null!==u){const p=this._viewContainer.get(u);this._viewContainer.move(p,c);const y=new Ac(o,p);r.push(y)}});for(let o=0;o<r.length;o++)this._perViewChange(r[o].view,r[o].record);for(let o=0,u=this._viewContainer.length;o<u;o++){const c=this._viewContainer.get(o);c.context.index=o,c.context.count=u,c.context.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{this._viewContainer.get(o.currentIndex).context.$implicit=o.item})}_perViewChange(t,r){t.context.$implicit=r.item}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(m.ZZ4))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class Ac{constructor(e,t){this.record=e,this.view=t}}let hs=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new xc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ao("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ao("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class xc{constructor(){this.$implicit=null,this.ngIf=null}}function ao(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,m.AaK)(e)}'.`)}let Rc=(()=>{class n{constructor(t){this.locale=t}transform(t,r="mediumDate",o,u){if(null==t||""===t||t!=t)return null;try{return Rs(t,r,u||this.locale,o)}catch(c){throw function(n,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${(0,m.AaK)(n)}'`)}(n,c.message)}}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.soG,16))},n.\u0275pipe=m.Yjl({name:"date",type:n,pure:!0}),n})(),zo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[{provide:Si,useClass:oo}]}),n})();function ul(n){return"server"===n}let pu=(()=>{class n{}return n.\u0275prov=(0,m.Yz7)({token:n,providedIn:"root",factory:()=>new yh((0,m.LFG)(me),window)}),n})();class yh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ll(this.window.history)||ll(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function ll(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class lo extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new lo,X||(X=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(Ko=Ko||document.querySelector("base"),Ko?Ko.getAttribute("href"):null);return null==t?null:function(n){an=an||document.createElement("a"),an.setAttribute("href",n);const e=an.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ko=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let an,Ko=null;const ho=new m.OlP("TRANSITION_ID"),fn=[{provide:m.ip1,useFactory:function(n,e,t){return()=>{t.get(m.CZH).donePromise.then(()=>{const r=L(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[ho,me,m.zs3],multi:!0}];class cl{static init(){(0,m.VLi)(new cl)}addToWindow(e){m.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},m.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(r=>{const o=m.dqk.getAllAngularTestabilities();let u=o.length,c=!1;const p=function(y){c=c||y,u--,0==u&&r(c)};o.forEach(function(y){y.whenStable(p)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let _u=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const fo=new m.OlP("EventManagerPlugins");let De=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const c=o[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(fo),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Ht{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=L().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Yo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Rn=(()=>{class n extends Yo{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,o.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ra),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ra))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(me))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function Ra(n){L().remove(n)}const po={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ri=/%COMP%/g;function lr(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?lr(n,o,t):(o=o.replace(ri,n),t.push(o))}return t}function Wr(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ri=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new ii(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case m.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new jc(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case m.ifc.ShadowDom:return new bu(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=lr(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(De),m.LFG(Rn),m.LFG(m.AFp))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class ii{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(po[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=po[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=po[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(m.JOm.DashCase|m.JOm.Important)?e.style.setProperty(t,r,o&m.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&m.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Wr(r)):this.eventManager.addEventListener(e,t,Wr(r))}}class jc extends ii{constructor(e,t,r,o){super(e),this.component=r;const u=lr(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr="_ngcontent-%COMP%".replace(ri,o+"-"+r.id),this.hostAttr="_nghost-%COMP%".replace(ri,o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class bu extends ii{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=lr(o.id,o.styles,[]);for(let c=0;c<u.length;c++){const p=document.createElement("style");p.textContent=u[c],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Cu=(()=>{class n extends Ht{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(me))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Du=["alt","control","meta","shift"],vp={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Oa={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let wp=(()=>{class n extends Ht{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let c="";if(Du.forEach(y=>{const b=r.indexOf(y);b>-1&&(r.splice(b,1),c+=y+".")}),c+=u,0!=r.length||0===u.length)return null;const p={};return p.domEventName=o,p.fullKey=c,p}static getEventFullKey(t){let r="",o=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&qr.hasOwnProperty(e)&&(e=qr[e]))}return vp[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Du.forEach(u=>{u!=o&&Oa[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(me))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const ms=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:"browser"},{provide:m.g9A,useValue:function(){lo.makeCurrent(),cl.init()},multi:!0},{provide:me,useFactory:function(){return(0,m.RDi)(document),document},deps:[]}]),vl=[[],{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function(){return new m.qLn},deps:[]},{provide:fo,useClass:Cu,multi:!0,deps:[me,m.R0b,m.Lbi]},{provide:fo,useClass:wp,multi:!0,deps:[me]},[],{provide:Ri,useClass:Ri,deps:[De,Rn,m.AFp]},{provide:m.FYo,useExisting:Ri},{provide:Yo,useExisting:Rn},{provide:Rn,useClass:Rn,deps:[me]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b]},{provide:De,useClass:De,deps:[fo,m.R0b]},{provide:class{},useClass:_u,deps:[]},[]];let Cp=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:m.AFp,useValue:t.appId},{provide:ho,useExisting:m.AFp},fn]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(n,12))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:vl,imports:[zo,m.hGG]}),n})();"undefined"!=typeof window&&window;var Gt=V(4402),at=V(5917),Mi=V(9765),xu=V(7971);class wi extends Mi.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new xu.N;return this._value}next(e){super.next(this._value=e)}}var Kc=V(4869),Ji=V(9796),zr=V(7393);class yo extends zr.L{notifyNext(e,t,r,o,u){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class Ap extends zr.L{constructor(e,t,r){super(),this.parent=e,this.outerValue=t,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var El=V(7444),jn=V(7574);function wl(n,e,t,r,o=new Ap(n,t,r)){if(!o.closed)return e instanceof jn.y?e.subscribe(o):(0,El.s)(e)(o)}var Xn=V(6693);const Ru={};class bl{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new Nu(e,this.resultSelector))}}class Nu extends yo{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(Ru),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let r=0;r<t;r++)this.add(wl(this,e[r],void 0,r))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,r){const o=this.values,c=this.toRespond?o[r]===Ru?--this.toRespond:this.toRespond:0;o[r]=t,0===c&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}const Vs=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var Pi=V(3282);function vs(...n){return(0,Pi.J)(1)((0,at.of)(...n))}var Xi=V(9193);function si(n){return new jn.y(e=>{let t;try{t=n()}catch(o){return void e.error(o)}return(t?(0,Gt.D)(t):(0,Xi.c)()).subscribe(e)})}var Sh=V(2441),At=V(8002),ta=V(5345);function _r(n,e){return"function"==typeof e?t=>t.pipe(_r((r,o)=>(0,Gt.D)(n(r,o)).pipe((0,At.U)((u,c)=>e(r,u,o,c))))):t=>t.lift(new Zc(n))}class Zc{constructor(e){this.project=e}call(e,t){return t.subscribe(new kn(e,this.project))}}class kn extends ta.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(o){return void this.destination.error(o)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const r=new ta.IY(this),o=this.destination;o.add(r),this.innerSubscription=(0,ta.ft)(e,r),this.innerSubscription!==r&&o.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const Il=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function Ah(n){return e=>0===n?(0,Xi.c)():e.lift(new r_(n))}class r_{constructor(e){if(this.total=e,this.total<0)throw new Il}call(e,t){return t.subscribe(new aE(e,this.total))}}class aE extends zr.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))}}function Us(...n){const e=n[n.length-1];return(0,Kc.K)(e)?(n.pop(),t=>vs(n,t,e)):t=>vs(n,t)}function Va(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(o){return o.lift(new i_(n,e,t))}}class i_{constructor(e,t,r=!1){this.accumulator=e,this.seed=t,this.hasSeed=r}call(e,t){return t.subscribe(new xh(e,this.accumulator,this.seed,this.hasSeed))}}class xh extends zr.L{constructor(e,t,r,o){super(e),this.accumulator=t,this._seed=r,this.hasSeed=o,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let r;try{r=this.accumulator(this.seed,e,t)}catch(o){this.destination.error(o)}this.seed=r,this.destination.next(r)}}function Oi(n,e){return function(r){return r.lift(new Rh(n,e))}}class Rh{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Eo(e,this.predicate,this.thisArg))}}class Eo extends zr.L{constructor(e,t,r){super(e),this.predicate=t,this.thisArg=r,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}function Bs(n){return function(t){const r=new qn(n),o=t.lift(r);return r.caught=o}}class qn{constructor(e){this.selector=e}call(e,t){return t.subscribe(new Ua(e,this.selector,this.caught))}}class Ua extends ta.Ds{constructor(e,t,r){super(e),this.selector=t,this.caught=r}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(u){return void super.error(u)}this._unsubscribeAndRecycle();const r=new ta.IY(this);this.add(r);const o=(0,ta.ft)(t,r);o!==r&&this.add(o)}}}var er=V(9773);function Qc(n,e){return(0,er.zg)(n,e,1)}function Nh(n){return function(t){return 0===n?(0,Xi.c)():t.lift(new ki(n))}}class ki{constructor(e){if(this.total=e,this.total<0)throw new Il}call(e,t){return t.subscribe(new Fi(e,this.total))}}class Fi extends zr.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,r=this.total,o=this.count++;t.length<r?t.push(e):t[o%r]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const r=this.count>=this.total?this.total:this.count,o=this.ring;for(let u=0;u<r;u++){const c=t++%r;e.next(o[c])}}e.complete()}}function Es(n=Mh){return e=>e.lift(new wo(n))}class wo{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new bo(e,this.errorFactory))}}class bo extends zr.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function Mh(){return new Vs}function Co(n=null){return e=>e.lift(new Ph(n))}class Ph{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new Ba(e,this.defaultValue))}}class Ba extends zr.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var xp=V(4487);function $n(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Oi((o,u)=>n(o,u,r)):xp.y,Ah(1),t?Co(e):Es(()=>new Vs))}var Kr=V(3342),Io=V(1307),s_=V(5319);class A{constructor(e){this.callback=e}call(e,t){return t.subscribe(new M(e,this.callback))}}class M extends zr.L{constructor(e,t){super(e),this.add(new s_.w(t))}}class j{constructor(e,t){this.id=e,this.url=t}}class ee extends j{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ce extends j{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ne extends j{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ze extends j{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ft extends j{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ct extends j{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zt extends j{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class xt extends j{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sr extends j{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tr{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ja{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Jc{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class na{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class To{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Do{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class js{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ft="primary";class Np{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Tn(n){return new Np(n)}const Mp="ngNavigationCancelingError";function Xc(n){const e=Error("NavigationCancelingError: "+n);return e[Mp]=!0,e}function ed(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const c=r[u],p=n[u];if(c.startsWith(":"))o[c.substring(1)]=p;else if(c!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function es(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!td(n[o],e[o]))return!1;return!0}function td(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function uE(n){return Array.prototype.concat.apply([],n)}function $a(n){return n.length>0?n[n.length-1]:null}function yr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Zr(n){return(0,m.CqO)(n)?n:(0,m.QGY)(n)?(0,Gt.D)(Promise.resolve(n)):(0,at.of)(n)}const o_={exact:function u_(n,e,t){if(!Wa(n.segments,e.segments)||!Fu(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!u_(n.children[r],e.children[r],t))return!1;return!0},subset:ku},Oh={exact:function(n,e){return es(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>td(n[t],e[t]))},ignored:()=>!0};function Ou(n,e,t){return o_[t.paths](n.root,e.root,t.matrixParams)&&Oh[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function ku(n,e,t){return Ha(n,e,e.segments,t)}function Ha(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Wa(o,t)||e.hasChildren()||!Fu(o,t,r))}if(n.segments.length===t.length){if(!Wa(n.segments,t)||!Fu(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!ku(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Wa(n.segments,o)&&Fu(n.segments,o,r)&&n.children[Ft])&&Ha(n.children[Ft],e,u,r)}}function Fu(n,e,t){return e.every((r,o)=>Oh[t](n[o].parameters,r.parameters))}class Ga{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Tn(this.queryParams)),this._queryParamMap}toString(){return Fh.serialize(this)}}class Kt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,yr(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $s(this)}}class Lu{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Tn(this.parameters)),this._parameterMap}toString(){return Lp(this)}}function Wa(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class kh{}class nd{parse(e){const t=new d_(e);return new Ga(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var n;return`${`/${rd(e.root,!0)}`}${function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Fp(t)}=${Fp(o)}`).join("&"):`${Fp(t)}=${Fp(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const Fh=new nd;function $s(n){return n.segments.map(e=>Lp(e)).join("/")}function rd(n,e){if(!n.hasChildren())return $s(n);if(e){const t=n.children[Ft]?rd(n.children[Ft],!1):"",r=[];return yr(n.children,(o,u)=>{u!==Ft&&r.push(`${u}:${rd(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return yr(n.children,(r,o)=>{o===Ft&&(t=t.concat(e(r,o)))}),yr(n.children,(r,o)=>{o!==Ft&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Ft?[rd(n.children[Ft],!1)]:[`${o}:${rd(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ft]?`${$s(n)}/${t[0]}`:`${$s(n)}/(${t.join("//")})`}}function c_(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Fp(n){return c_(n).replace(/%3B/gi,";")}function id(n){return c_(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function sd(n){return decodeURIComponent(n)}function Lh(n){return sd(n.replace(/\+/g,"%20"))}function Lp(n){return`${id(n.path)}${function(n){return Object.keys(n).map(e=>`;${id(e)}=${id(n[e])}`).join("")}(n.parameters)}`}const cE=/^[^\/()?;=#]+/;function Vh(n){const e=n.match(cE);return e?e[0]:""}const dE=/^[^=?&#]+/,ia=/^[^?&#]+/;class d_{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Kt([],{}):new Kt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ft]=new Kt(e,t)),r}parseSegment(){const e=Vh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Lu(sd(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Vh(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Vh(this.remaining);o&&(r=o,this.capture(r))}e[sd(t)]=sd(r)}parseQueryParam(e){const t=function(n){const e=n.match(dE);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function(n){const e=n.match(ia);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const o=Lh(t),u=Lh(r);if(e.hasOwnProperty(o)){let c=e[o];Array.isArray(c)||(c=[c],e[o]=c),c.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Vh(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Ft);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[Ft]:new Kt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Uh{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Vp(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Vp(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Up(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Up(e,this._root).map(t=>t.value)}}function Vp(n,e){if(n===e.value)return e;for(const t of e.children){const r=Vp(n,t);if(r)return r}return null}function Up(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Up(n,t);if(r.length)return r.unshift(e),r}return[]}class sa{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function od(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Bp extends Uh{constructor(e,t){super(e),this.snapshot=t,Rl(this,e)}toString(){return this.snapshot.toString()}}function jp(n,e){const t=function(n,e){const c=new Al([],{},{},"",{},Ft,e,null,n.root,-1,{});return new xl("",new sa(c,[]))}(n,e),r=new wi([new Lu("",{})]),o=new wi({}),u=new wi({}),c=new wi({}),p=new wi(""),y=new Sl(r,o,c,p,u,Ft,e,t.root);return y.snapshot=t.root,new Bp(new sa(y,[]),t)}class Sl{constructor(e,t,r,o,u,c,p,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=c,this.component=p,this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,At.U)(e=>Tn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,At.U)(e=>Tn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function h_(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Al{constructor(e,t,r,o,u,c,p,y,b,S,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=c,this.component=p,this.routeConfig=y,this._urlSegment=b,this._lastPathIndex=S,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Tn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Tn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class xl extends Uh{constructor(e,t){super(t),this.url=e,Rl(this,t)}toString(){return Hs(this._root)}}function Rl(n,e){e.value._routerState=n,e.children.forEach(t=>Rl(n,t))}function Hs(n){const e=n.children.length>0?` { ${n.children.map(Hs).join(", ")} } `:"";return`${n.value}${e}`}function qa(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,es(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),es(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!es(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),es(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Bh(n,e){return es(n.params,e.params)&&function(n,e){return Wa(n,e)&&n.every((t,r)=>es(t.parameters,e[r].parameters))}(n.url,e.url)&&!(!n.parent!=!e.parent)&&(!n.parent||Bh(n.parent,e.parent))}function ad(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return ad(n,r,o);return ad(n,r)})}(n,e,t);return new sa(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return f_(e,c),c}}const r=function(n){return new Sl(new wi(n.url),new wi(n.params),new wi(n.queryParams),new wi(n.fragment),new wi(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>ad(n,u));return new sa(r,o)}}function f_(n,e){if(n.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=n.value;for(let t=0;t<n.children.length;++t)f_(n.children[t],e.children[t])}function Nl(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ml(n){return"object"==typeof n&&null!=n&&n.outlets}function za(n,e,t,r,o){let u={};return r&&yr(r,(c,p)=>{u[p]=Array.isArray(c)?c.map(y=>`${y}`):`${c}`}),new Ga(t.root===n?e:gE(t.root,n,e),u,o)}function gE(n,e,t){const r={};return yr(n.children,(o,u)=>{r[u]=o===e?t:gE(o,e,t)}),new Kt(n.segments,r)}class Hp{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Nl(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(Ml);if(o&&o!==$a(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Wp{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Vu(n,e,t){if(n||(n=new Kt([],{})),0===n.segments.length&&n.hasChildren())return ud(n,e,t);const r=function(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const c=n.segments[o],p=t[r];if(Ml(p))break;const y=`${p}`,b=r<t.length-1?t[r+1]:null;if(o>0&&void 0===y)break;if(y&&b&&"object"==typeof b&&void 0===b.outlets){if(!m_(y,b,c))return u;r+=2}else{if(!m_(y,{},c))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Kt(n.segments.slice(0,r.pathIndex),{});return u.children[Ft]=new Kt(n.segments.slice(r.pathIndex),n.children),ud(u,0,o)}return r.match&&0===o.length?new Kt(n.segments,{}):r.match&&!n.hasChildren()?ld(n,e,t):r.match?ud(n,0,o):ld(n,e,t)}function ud(n,e,t){if(0===t.length)return new Kt(n.segments,{});{const r=function(n){return Ml(n[0])?n[0].outlets:{[Ft]:n}}(t),o={};return yr(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[c]=Vu(n.children[c],e,u))}),yr(n.children,(u,c)=>{void 0===r[c]&&(o[c]=u)}),new Kt(n.segments,o)}}function ld(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(Ml(u)){const y=nr(u.outlets);return new Kt(r,y)}if(0===o&&Nl(t[0])){r.push(new Lu(n.segments[e].path,g_(t[0]))),o++;continue}const c=Ml(u)?u.outlets[Ft]:`${u}`,p=o<t.length-1?t[o+1]:null;c&&p&&Nl(p)?(r.push(new Lu(c,g_(p))),o+=2):(r.push(new Lu(c,{})),o++)}return new Kt(r,{})}function nr(n){const e={};return yr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=ld(new Kt([],{}),0,t))}),e}function g_(n){const e={};return yr(n,(t,r)=>e[r]=`${t}`),e}function m_(n,e,t){return n==t.path&&es(e,t.parameters)}class __{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),qa(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=od(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,o[c],r),delete o[c]}),yr(o,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const c=r.getContext(o.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet);if(r&&r.outlet){const o=r.outlet.detach(),u=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:u})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=od(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=od(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new Do(u.value.snapshot))}),e.children.length&&this.forwardEvent(new na(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(qa(o),o===u)if(o.component){const c=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const c=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const p=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),c.children.onOutletReAttached(p.contexts),c.attachRef=p.componentRef,c.route=p.route.value,c.outlet&&c.outlet.attach(p.componentRef,p.route.value),Zp(p.route)}else{const p=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),y=p?p.module.componentFactoryResolver:null;c.attachRef=null,c.route=o,c.resolver=y,c.outlet&&c.outlet.activateWith(o,y),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}function Zp(n){qa(n.value),n.children.forEach(Zp)}class Qp{constructor(e,t){this.routes=e,this.module=t}}function Ka(n){return"function"==typeof n}function Za(n){return n instanceof Ga}const Pl=Symbol("INITIAL_VALUE");function Ol(){return _r(n=>function(...n){let e,t;return(0,Kc.K)(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&(0,Ji.k)(n[0])&&(n=n[0]),(0,Xn.n)(n,t).lift(new bl(e))}(n.map(e=>e.pipe(Ah(1),Us(Pl)))).pipe(Va((e,t)=>{let r=!1;return t.reduce((o,u,c)=>o!==Pl?o:(u===Pl&&(r=!0),r||!1!==u&&c!==t.length-1&&!Za(u)?o:u),e)},Pl),Oi(e=>e!==Pl),(0,At.U)(e=>Za(e)?e:!0===e),Ah(1)))}let kr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},directives:function(){return[cg]},encapsulation:2}),n})();function kl(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];eg(r,_E(e,r))}}function eg(n,e){n.children&&kl(n.children,e)}function _E(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function tg(n){const e=n.children&&n.children.map(tg),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ft&&(t.component=kr),t}function oi(n){return n.outlet||Ft}function y_(n,e){const t=n.filter(r=>oi(r)===e);return t.push(...n.filter(r=>oi(r)!==e)),t}const $h={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Hh(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},$h):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const u=(e.matcher||ed)(t,n,e);if(!u)return Object.assign({},$h);const c={};yr(u.posParams,(y,b)=>{c[b]=y.path});const p=u.consumed.length>0?Object.assign(Object.assign({},c),u.consumed[u.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:u.consumed,lastChild:u.consumed.length,parameters:p,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function dd(n,e,t,r,o="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>Ya(n,e,r)&&oi(r)!==Ft)}(n,t,r)){const c=new Kt(e,function(n,e,t,r){const o={};o[Ft]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&oi(u)!==Ft){const c=new Kt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,o[oi(u)]=c}return o}(n,e,r,new Kt(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>Ya(n,e,r))}(n,t,r)){const c=new Kt(n.segments,function(n,e,t,r,o,u){const c={};for(const p of r)if(Ya(n,t,p)&&!o[oi(p)]){const y=new Kt([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[oi(p)]=y}return Object.assign(Object.assign({},o),c)}(n,e,t,r,n.children,o));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new Kt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Ya(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Wh(n,e,t,r){return!!(oi(n)===r||r!==Ft&&Ya(e,t,n))&&("**"===n.path||Hh(e,n,t).matched)}function E_(n,e,t){return 0===e.length&&!n.children[t]}class Fl{constructor(e){this.segmentGroup=e||null}}class ng{constructor(e){this.urlTree=e}}function Ar(n){return new jn.y(e=>e.error(new Fl(n)))}function Ll(n){return new jn.y(e=>e.error(new ng(n)))}function w_(n){return new jn.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class ig{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(m.h0i)}apply(){const e=dd(this.urlTree.root,[],[],this.config).segmentGroup,t=new Kt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Ft).pipe((0,At.U)(u=>this.createUrlTree(qh(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Bs(u=>{if(u instanceof ng)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Fl?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Ft).pipe((0,At.U)(o=>this.createUrlTree(qh(o),e.queryParams,e.fragment))).pipe(Bs(o=>{throw o instanceof Fl?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new Kt([],{[Ft]:e}):e;return new Ga(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,At.U)(u=>new Kt([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,Gt.D)(o).pipe(Qc(u=>{const c=r.children[u],p=y_(t,u);return this.expandSegmentGroup(e,p,c,u).pipe((0,At.U)(y=>({segment:y,outlet:u})))}),Va((u,c)=>(u[c.outlet]=c.segment,u),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Oi((o,u)=>n(o,u,r)):xp.y,Nh(1),t?Co(e):Es(()=>new Vs))}())}expandSegment(e,t,r,o,u,c){return(0,Gt.D)(r).pipe(Qc(p=>this.expandSegmentAgainstRoute(e,t,r,p,o,u,c).pipe(Bs(b=>{if(b instanceof Fl)return(0,at.of)(null);throw b}))),$n(p=>!!p),Bs((p,y)=>{if(p instanceof Vs||"EmptyError"===p.name){if(E_(t,o,u))return(0,at.of)(new Kt([],{}));throw new Fl(t)}throw p}))}expandSegmentAgainstRoute(e,t,r,o,u,c,p){return Wh(o,t,u,c)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,c):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c):Ar(t):Ar(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Ll(u):this.lineralizeSegments(r,u).pipe((0,er.zg)(c=>{const p=new Kt(c,{});return this.expandSegment(e,p,t,c,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c){const{matched:p,consumedSegments:y,lastChild:b,positionalParamSegments:S}=Hh(t,o,u);if(!p)return Ar(t);const x=this.applyRedirectCommands(y,o.redirectTo,S);return o.redirectTo.startsWith("/")?Ll(x):this.lineralizeSegments(o,x).pipe((0,er.zg)(O=>this.expandSegment(e,t,r,O.concat(u.slice(b)),c,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?(0,at.of)(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,At.U)(O=>(r._loadedConfig=O,new Kt(o,{})))):(0,at.of)(new Kt(o,{}));const{matched:c,consumedSegments:p,lastChild:y}=Hh(t,r,o);if(!c)return Ar(t);const b=o.slice(y);return this.getChildConfig(e,r,o).pipe((0,er.zg)(x=>{const O=x.module,$=x.routes,{segmentGroup:K,slicedSegments:ye}=dd(t,p,b,$),xe=new Kt(K.segments,K.children);if(0===ye.length&&xe.hasChildren())return this.expandChildren(O,$,xe).pipe((0,At.U)(it=>new Kt(p,it)));if(0===$.length&&0===ye.length)return(0,at.of)(new Kt(p,{}));const pt=oi(r)===u;return this.expandSegment(O,xe,$,ye,pt?Ft:u,!0).pipe((0,At.U)(tt=>new Kt(p.concat(tt.segments),tt.children)))}))}getChildConfig(e,t,r){return t.children?(0,at.of)(new Qp(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,at.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,er.zg)(o=>{return o?this.configLoader.load(e.injector,t).pipe((0,At.U)(u=>(t._loadedConfig=u,u))):(n=t,new jn.y(e=>e.error(Xc(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):(0,at.of)(new Qp([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;if(!o||0===o.length)return(0,at.of)(!0);const u=o.map(c=>{const p=e.get(c);let y;if((n=p)&&Ka(n.canLoad))y=p.canLoad(t,r);else{if(!Ka(p))throw new Error("Invalid CanLoad guard");y=p(t,r)}var n;return Zr(y)});return(0,at.of)(u).pipe(Ol(),(0,Kr.b)(c=>{if(!Za(c))return;const p=Xc(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw p.url=c,p}),(0,At.U)(c=>!0===c))}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return(0,at.of)(r);if(o.numberOfChildren>1||!o.children[Ft])return w_(e.redirectTo);o=o.children[Ft]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Ga(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return yr(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const p=o.substring(1);r[u]=t[p]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let c={};return yr(t.children,(p,y)=>{c[y]=this.createSegmentGroup(e,p,r,o)}),new Kt(u,c)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function qh(n){const e={};for(const r of Object.keys(n.children)){const u=qh(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function(n){if(1===n.numberOfChildren&&n.children[Ft]){const e=n.children[Ft];return new Kt(n.segments.concat(e.segments),e.children)}return n}(new Kt(n.segments,e))}class ws{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ai{constructor(e,t){this.component=e,this.route=t}}function b_(n,e,t){const r=n._root;return Yr(r,e?e._root:null,t,[r.value])}function zh(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Yr(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=od(e);return n.children.forEach(c=>{(function(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const y=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Wa(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Wa(n.url,e.url)||!es(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Bh(n,e)||!es(n.queryParams,e.queryParams);case"paramsChange":default:return!Bh(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);y?o.canActivateChecks.push(new ws(r)):(u.data=c.data,u._resolvedData=c._resolvedData),Yr(n,e,u.component?p?p.children:null:t,r,o),y&&p&&p.outlet&&p.outlet.isActivated&&o.canDeactivateChecks.push(new ai(p.outlet.component,c))}else c&&hd(e,p,o),o.canActivateChecks.push(new ws(r)),Yr(n,null,u.component?p?p.children:null:t,r,o)})(c,u[c.value.outlet],t,r.concat([c.value]),o),delete u[c.value.outlet]}),yr(u,(c,p)=>hd(c,t.getContext(p),o)),o}function hd(n,e,t){const r=od(n),o=n.value;yr(r,(u,c)=>{hd(u,o.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new ai(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class ag{}function Yh(n){return new jn.y(e=>e.error(n))}class f{constructor(e,t,r,o,u,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=c}recognize(){const e=dd(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Ft);if(null===t)return null;const r=new Al([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ft,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new sa(r,t),u=new xl(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=h_(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const c=t.children[u],p=y_(e,u),y=this.processSegmentGroup(p,c,u);if(null===y)return null;r.push(...y)}const o=N(r);return o.sort((e,t)=>e.value.outlet===Ft?-1:t.value.outlet===Ft?1:e.value.outlet.localeCompare(t.value.outlet)),o}processSegment(e,t,r,o){for(const u of e){const c=this.processSegmentAgainstRoute(u,t,r,o);if(null!==c)return c}return E_(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!Wh(e,t,r,o))return null;let u,c=[],p=[];if("**"===e.path){const $=r.length>0?$a(r).parameters:{};u=new Al(r,$,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Re(e),oi(e),e.component,e,le(t),Ve(t)+r.length,Je(e))}else{const $=Hh(t,e,r);if(!$.matched)return null;c=$.consumedSegments,p=r.slice($.lastChild),u=new Al(c,$.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Re(e),oi(e),e.component,e,le(t),Ve(t)+c.length,Je(e))}const y=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:b,slicedSegments:S}=dd(t,c,p,y.filter($=>void 0===$.redirectTo),this.relativeLinkResolution);var n;if(0===S.length&&b.hasChildren()){const $=this.processChildren(y,b);return null===$?null:[new sa(u,$)]}if(0===y.length&&0===S.length)return[new sa(u,[])];const x=oi(e)===o,O=this.processSegment(y,b,S,x?Ft:o);return null===O?null:[new sa(u,O)]}}function D(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function N(n){const e=[],t=new Set;for(const r of n){if(!D(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=N(r.children);e.push(new sa(r.value,o))}return e.filter(r=>!t.has(r))}function le(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Ve(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Re(n){return n.data||{}}function Je(n){return n.resolve||{}}function fd(n){return _r(e=>{const t=n(e);return t?(0,Gt.D)(t).pipe((0,At.U)(()=>e)):(0,at.of)(e)})}class ug extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const pd=new m.OlP("ROUTES");class gd{constructor(e,t,r,o){this.loader=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,At.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=u.create(e);return new Qp(uE(c.injector.get(pd,void 0,m.XFs.Self|m.XFs.Optional)).map(tg),c)}),Bs(u=>{throw t._loader$=void 0,u}));return t._loader$=new Sh.c(o,()=>new Mi.xQ).pipe((0,Io.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,Gt.D)(this.loader.load(e)):Zr(e()).pipe((0,er.zg)(t=>t instanceof m.YKP?(0,at.of)(t):(0,Gt.D)(this.compiler.compileModuleAsync(t))))}}class Jh{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new aa,this.attachRef=null}}class aa{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Jh,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class lg{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function T_(n){throw n}function fI(n,e,t){return e.parse("/")}function Ul(n,e){return(0,at.of)(null)}const pI={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},gI={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let bs=(()=>{class n{constructor(t,r,o,u,c,p,y,b){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=b,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Mi.xQ,this.errorHandler=T_,this.malformedUriErrorHandler=fI,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ul,afterPreactivation:Ul},this.urlHandlingStrategy=new lg,this.routeReuseStrategy=new ug,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(m.h0i),this.console=c.get(m.c2e);const O=c.get(m.R0b);this.isNgZoneEnabled=O instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(b),this.currentUrlTree=new Ga(new Kt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new gd(p,y,$=>this.triggerEvent(new tr($)),$=>this.triggerEvent(new ja($))),this.routerState=jp(this.currentUrlTree,this.rootComponentType),this.transitions=new wi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Oi(o=>0!==o.id),(0,At.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),_r(o=>{let u=!1,c=!1;return(0,at.of)(o).pipe((0,Kr.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),_r(p=>{const y=this.browserUrlTree.toString(),b=!this.navigated||p.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return S_(p.source)&&(this.browserUrlTree=p.extractedUrl),(0,at.of)(p).pipe(_r(x=>{const O=this.transitions.getValue();return r.next(new ee(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),O!==this.transitions.getValue()?Xi.E:Promise.resolve(x)}),function(n,e,t,r){return _r(o=>function(n,e,t,r,o){return new ig(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,At.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Kr.b)(x=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:x.urlAfterRedirects})}),function(n,e,t,r,o){return(0,er.zg)(u=>function(n,e,t,r,o="emptyOnly",u="legacy"){try{const c=new f(n,e,t,r,o,u).recognize();return null===c?Yh(new ag):(0,at.of)(c)}catch(c){return Yh(c)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,At.U)(c=>Object.assign(Object.assign({},u),{targetSnapshot:c}))))}(this.rootComponentType,this.config,x=>this.serializeUrl(x),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Kr.b)(x=>{"eager"===this.urlUpdateStrategy&&(x.extras.skipLocationChange||this.setBrowserUrl(x.urlAfterRedirects,x),this.browserUrlTree=x.urlAfterRedirects);const O=new ft(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);r.next(O)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:O,extractedUrl:$,source:K,restoredState:ye,extras:xe}=p,pt=new ee(O,this.serializeUrl($),K,ye);r.next(pt);const dt=jp($,this.rootComponentType).snapshot;return(0,at.of)(Object.assign(Object.assign({},p),{targetSnapshot:dt,urlAfterRedirects:$,extras:Object.assign(Object.assign({},xe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,this.browserUrlTree=p.urlAfterRedirects,p.resolve(null),Xi.E}),fd(p=>{const{targetSnapshot:y,id:b,extractedUrl:S,rawUrl:x,extras:{skipLocationChange:O,replaceUrl:$}}=p;return this.hooks.beforePreactivation(y,{navigationId:b,appliedUrlTree:S,rawUrlTree:x,skipLocationChange:!!O,replaceUrl:!!$})}),(0,Kr.b)(p=>{const y=new Ct(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),(0,At.U)(p=>Object.assign(Object.assign({},p),{guards:b_(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function(n,e){return(0,er.zg)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?(0,at.of)(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,e,t,r){return(0,Gt.D)(n).pipe((0,er.zg)(o=>function(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!u||0===u.length)return(0,at.of)(!0);const c=u.map(p=>{const y=zh(p,e,o);let b;if(function(n){return n&&Ka(n.canDeactivate)}(y))b=Zr(y.canDeactivate(n,e,t,r));else{if(!Ka(y))throw new Error("Invalid CanDeactivate guard");b=Zr(y(n,e,t,r))}return b.pipe($n())});return(0,at.of)(c).pipe(Ol())}(o.component,o.route,t,e,r)),$n(o=>!0!==o,!0))}(c,r,o,n).pipe((0,er.zg)(p=>p&&function(n){return"boolean"==typeof n}(p)?function(n,e,t,r){return(0,Gt.D)(e).pipe(Qc(o=>vs(function(n,e){return null!==n&&e&&e(new Jc(n)),(0,at.of)(!0)}(o.route.parent,r),function(n,e){return null!==n&&e&&e(new To(n)),(0,at.of)(!0)}(o.route,r),function(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>si(()=>{const p=c.guards.map(y=>{const b=zh(y,c.node,t);let S;if(function(n){return n&&Ka(n.canActivateChild)}(b))S=Zr(b.canActivateChild(r,n));else{if(!Ka(b))throw new Error("Invalid CanActivateChild guard");S=Zr(b(r,n))}return S.pipe($n())});return(0,at.of)(p).pipe(Ol())}));return(0,at.of)(u).pipe(Ol())}(n,o.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,at.of)(!0);const o=r.map(u=>si(()=>{const c=zh(u,e,t);let p;if(function(n){return n&&Ka(n.canActivate)}(c))p=Zr(c.canActivate(e,n));else{if(!Ka(c))throw new Error("Invalid CanActivate guard");p=Zr(c(e,n))}return p.pipe($n())}));return(0,at.of)(o).pipe(Ol())}(n,o.route,t))),$n(o=>!0!==o,!0))}(r,u,n,e):(0,at.of)(p)),(0,At.U)(p=>Object.assign(Object.assign({},t),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,Kr.b)(p=>{if(Za(p.guardsResult)){const b=Xc(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw b.url=p.guardsResult,b}const y=new zt(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(y)}),Oi(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),fd(p=>{if(p.guards.canActivateChecks.length)return(0,at.of)(p).pipe((0,Kr.b)(y=>{const b=new xt(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(b)}),_r(y=>{let b=!1;return(0,at.of)(y).pipe(function(n,e){return(0,er.zg)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return(0,at.of)(t);let u=0;return(0,Gt.D)(o).pipe(Qc(c=>function(n,e,t,r){return function(n,e,t,r){const o=Object.keys(n);if(0===o.length)return(0,at.of)({});const u={};return(0,Gt.D)(o).pipe((0,er.zg)(c=>function(n,e,t,r){const o=zh(n,e,r);return Zr(o.resolve?o.resolve(e,t):o(e,t))}(n[c],e,t,r).pipe((0,Kr.b)(p=>{u[c]=p}))),Nh(1),(0,er.zg)(()=>Object.keys(u).length===o.length?(0,at.of)(u):Xi.E))}(n._resolve,n,e,r).pipe((0,At.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),h_(n,t).resolve),null)))}(c.route,r,n,e)),(0,Kr.b)(()=>u++),Nh(1),(0,er.zg)(c=>u===o.length?(0,at.of)(t):Xi.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Kr.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(y),this.cancelNavigationTransition(y,"At least one route resolver didn't emit any value."))}}))}),(0,Kr.b)(y=>{const b=new Sr(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(b)}))}),fd(p=>{const{targetSnapshot:y,id:b,extractedUrl:S,rawUrl:x,extras:{skipLocationChange:O,replaceUrl:$}}=p;return this.hooks.afterPreactivation(y,{navigationId:b,appliedUrlTree:S,rawUrlTree:x,skipLocationChange:!!O,replaceUrl:!!$})}),(0,At.U)(p=>{const y=function(n,e,t){const r=ad(n,e._root,t?t._root:void 0);return new Bp(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Object.assign(Object.assign({},p),{targetRouterState:y})}),(0,Kr.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,At.U)(r=>(new __(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,Kr.b)({next(){u=!0},complete(){u=!0}}),function(n){return e=>e.lift(new A(n))}(()=>{var p;if(!u&&!c){const y=`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(o),this.cancelNavigationTransition(o,y)):this.cancelNavigationTransition(o,y)}(null===(p=this.currentNavigation)||void 0===p?void 0:p.id)===o.id&&(this.currentNavigation=null)}),Bs(p=>{if(c=!0,function(n){return n&&n[Mp]}(p)){const y=Za(p.url);y||(this.navigated=!0,this.restoreHistory(o,!0));const b=new Ne(o.id,this.serializeUrl(o.extractedUrl),p.message);r.next(b),y?setTimeout(()=>{const S=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),x={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||S_(o.source)};this.scheduleNavigation(S,"imperative",null,x,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const y=new ze(o.id,this.serializeUrl(o.extractedUrl),p);r.next(y);try{o.resolve(this.errorHandler(p))}catch(b){o.reject(b)}}return Xi.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:o,state:u,urlTree:c}=r,p={replaceUrl:!0};if(u){const y=Object.assign({},u);delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(p.state=y)}this.scheduleNavigation(c,o,u,p)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(t){var r;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,r){if(!t)return!0;const o=r.urlTree.toString()===t.urlTree.toString();return r.transitionId!==t.transitionId||!o||!("hashchange"===r.source&&"popstate"===t.source||"popstate"===r.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){kl(t),this.config=t.map(tg),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:c,queryParamsHandling:p,preserveFragment:y}=r,b=o||this.routerState.root,S=y?this.currentUrlTree.fragment:c;let x=null;switch(p){case"merge":x=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=u||null}return null!==x&&(x=this.removeEmptyProps(x)),function(n,e,t,r,o){if(0===t.length)return za(e.root,e.root,e,r,o);const u=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Hp(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const p={};return yr(u.outlets,(y,b)=>{p[b]="string"==typeof y?y.split("/"):y}),[...o,{outlets:p}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===c?(u.split("/").forEach((p,y)=>{0==y&&"."===p||(0==y&&""===p?t=!0:".."===p?e++:""!=p&&o.push(p))}),o):[...o,u]},[]);return new Hp(t,e,r)}(t);if(u.toRoot())return za(e.root,new Kt([],{}),e,r,o);const c=function(n,e,t){if(n.isAbsolute)return new Wp(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new Wp(u,u===e.root,0)}const r=Nl(n.commands[0])?0:1;return function(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new Wp(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),p=c.processChildren?ud(c.segmentGroup,c.index,u.commands):Vu(c.segmentGroup,c.index,u.commands);return za(c.segmentGroup,p,e,r,o)}(b,this.currentUrlTree,t,x,null!=S?S:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Za(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},pI):!1===r?Object.assign({},gI):r,Za(t))return Ou(this.currentUrlTree,t,o);const u=this.parseUrl(t);return Ou(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ce(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,c){var p,y;if(this.disposed)return Promise.resolve(!1);const b=this.getTransition(),S=S_(r)&&b&&!S_(b.source),$=(this.lastSuccessfulId===b.id||this.currentNavigation?b.rawUrl:b.urlAfterRedirects).toString()===t.toString();if(S&&$)return Promise.resolve(!0);let K,ye,xe;c?(K=c.resolve,ye=c.reject,xe=c.promise):xe=new Promise((tt,it)=>{K=tt,ye=it});const pt=++this.navigationId;let dt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),dt=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(p=this.browserPageId)&&void 0!==p?p:0:(null!==(y=this.browserPageId)&&void 0!==y?y:0)+1):dt=0,this.setTransition({id:pt,targetPageId:dt,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:K,reject:ye,promise:xe,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),xe.catch(tt=>Promise.reject(tt))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===c?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new Ne(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.DyG),m.LFG(kh),m.LFG(aa),m.LFG(ht),m.LFG(m.zs3),m.LFG(m.v3s),m.LFG(m.Sil),m.LFG(void 0))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function S_(n){return"imperative"!==n}let cg=(()=>{class n{constructor(t,r,o,u,c){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.name=u||Ft,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,y=new R_(t,p,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,y),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(aa),m.Y36(m.s_b),m.Y36(m._Vd),m.$8M("name"),m.Y36(m.sBO))},n.\u0275dir=m.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class R_{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Sl?this.route:e===aa?this.childContexts:this.parent.get(e,t)}}class DE{}class AE{preload(e,t){return(0,at.of)(null)}}let N_=(()=>{class n{constructor(t,r,o,u,c){this.router=t,this.injector=u,this.preloadingStrategy=c,this.loader=new gd(r,o,b=>t.triggerEvent(new tr(b)),b=>t.triggerEvent(new ja(b)))}setUpPreloading(){this.subscription=this.router.events.pipe(Oi(t=>t instanceof ce),Qc(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(m.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const c=u._loadedConfig;o.push(this.processRoutes(c.module,c.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,Gt.D)(o).pipe((0,Pi.J)(),(0,At.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?(0,at.of)(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,er.zg)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(bs),m.LFG(m.v3s),m.LFG(m.Sil),m.LFG(m.zs3),m.LFG(DE))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),_d=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ee?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ce&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof js&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new js(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(bs),m.LFG(pu),m.LFG(void 0))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Bl=new m.OlP("ROUTER_CONFIGURATION"),_I=new m.OlP("ROUTER_FORROOT_GUARD"),yI=[ht,{provide:kh,useClass:nd},{provide:bs,useFactory:function(n,e,t,r,o,u,c,p={},y,b){const S=new bs(null,n,e,t,r,o,u,uE(c));return y&&(S.urlHandlingStrategy=y),b&&(S.routeReuseStrategy=b),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy)}(p,S),p.enableTracing&&S.events.subscribe(x=>{var O,$;null===(O=console.group)||void 0===O||O.call(console,`Router Event: ${x.constructor.name}`),console.log(x.toString()),console.log(x),null===($=console.groupEnd)||void 0===$||$.call(console)}),S},deps:[kh,aa,ht,m.zs3,m.v3s,m.Sil,pd,Bl,[class{},new m.FiY],[class{},new m.FiY]]},aa,{provide:Sl,useFactory:function(n){return n.routerState.root},deps:[bs]},{provide:m.v3s,useClass:m.EAV},N_,AE,class{preload(e,t){return t().pipe(Bs(()=>(0,at.of)(null)))}},{provide:Bl,useValue:{enableTracing:!1}}];function xE(){return new m.PXZ("Router",bs)}let RE=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[yI,NE(t),{provide:_I,useFactory:Nx,deps:[[bs,new m.FiY,new m.tp0]]},{provide:Bl,useValue:r||{}},{provide:Le,useFactory:vI,deps:[J,[new m.tBr(he),new m.FiY],Bl]},{provide:_d,useFactory:Jk,deps:[bs,pu,Bl]},{provide:DE,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:AE},{provide:m.PXZ,multi:!0,useFactory:xE},[ME,{provide:m.ip1,multi:!0,useFactory:EI,deps:[ME]},{provide:wI,useFactory:Ox,deps:[ME]},{provide:m.tb,multi:!0,useExisting:wI}]]}}static forChild(t){return{ngModule:n,providers:[NE(t)]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(_I,8),m.LFG(bs,8))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function Jk(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new _d(n,e,t)}function vI(n,e,t={}){return t.useHash?new $e(n,e):new Oe(n,e)}function Nx(n){return"guarded"}function NE(n){return[{provide:m.deG,multi:!0,useValue:n},{provide:pd,multi:!0,useValue:n}]}let ME=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Mi.xQ}appInitializer(){return this.injector.get(U,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(p=>r=p),u=this.injector.get(bs),c=this.injector.get(Bl);return"disabled"===c.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?(0,at.of)(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(Bl),o=this.injector.get(N_),u=this.injector.get(_d),c=this.injector.get(bs),p=this.injector.get(m.z2F);t===p.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),o.setUpPreloading(),u.init(),c.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.zs3))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function EI(n){return n.appInitializer.bind(n)}function Ox(n){return n.bootstrapListener.bind(n)}const wI=new m.OlP("Router Initializer"),bI=[];let Fx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[[RE.forRoot(bI)],RE]}),n})();var Ee=V(8239),CI=V(8873),Lt=V(4292),Xh=V(3637),II=V(6561);function la(n){const{subscriber:e,counter:t,period:r}=n;e.next(t),this.schedule({subscriber:e,counter:t+1,period:r},r)}var P_=V(6682),Lx=V(8819);function O_(n,e){return t=>t.lift(new Uu(n,e))}class Uu{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new PE(e,this.compare,this.keySelector))}}class PE extends zr.L{constructor(e,t,r){super(e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:o}=this;t=o?o(e):e}catch(o){return this.destination.error(o)}let r=!1;if(this.hasKey)try{const{compare:o}=this;r=o(this.key,t)}catch(o){return this.destination.error(o)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}class OE{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new e1(e,this.observables,this.project))}}class e1 extends yo{constructor(e,t,r){super(e),this.observables=t,this.project=r,this.toRespond=[];const o=t.length;this.values=new Array(o);for(let u=0;u<o;u++)this.toRespond.push(u);for(let u=0;u<o;u++)this.add(wl(this,t[u],void 0,u))}notifyNext(e,t,r){this.values[r]=t;const o=this.toRespond;if(o.length>0){const u=o.indexOf(r);-1!==u&&o.splice(u,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}class t1{constructor(e){this.predicate=e}call(e,t){return t.subscribe(new Bu(e,this.predicate))}}class Bu extends zr.L{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(t){this.destination.error(t)}}}var cn=V(8971),Er=V(8939),AI=(V(3259),V(3394)),ca=V(3910),Li=V(8026),k=V(3854),da=V(5422);const Vx="@firebase/database";let k_="";function xI(n){k_=n}class FE{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class n1{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Ux=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new FE(e)}}catch(e){}return new n1},ef=Ux("localStorage"),RI=Ux("sessionStorage"),dg=new da.Yd("@firebase/database"),Bx=function(){let n=1;return function(){return n++}}(),jx=function(n){const e=(0,k.dS)(n),t=new k.gQ;t.update(e);const r=t.digest();return k.US.encodeByteArray(r)},F_=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=F_.apply(null,r):e+="object"==typeof r?(0,k.Pz)(r):r,e+=" "}return e};let tf=null,$x=!0;const Hx=function(n,e){(0,k.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(dg.logLevel=da.in.VERBOSE,tf=dg.log.bind(dg),e&&RI.set("logging_enabled",!0)):"function"==typeof n?tf=n:(tf=null,RI.remove("logging_enabled"))},zn=function(...n){if(!0===$x&&($x=!1,null===tf&&!0===RI.get("logging_enabled")&&Hx(!0)),tf){const e=F_.apply(null,n);tf(e)}},yd=function(n){return function(...e){zn(n,...e)}},LE=function(...n){const e="FIREBASE INTERNAL ERROR: "+F_(...n);dg.error(e)},ha=function(...n){const e=`FIREBASE FATAL ERROR: ${F_(...n)}`;throw dg.error(e),new Error(e)},bi=function(...n){const e="FIREBASE WARNING: "+F_(...n);dg.warn(e)},nf=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Vi="[MIN_NAME]",fa="[MAX_NAME]",vd=function(n,e){if(n===e)return 0;if(n===Vi||e===fa)return-1;if(e===Vi||n===fa)return 1;{const t=L_(n),r=L_(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},r1=function(n,e){return n===e?0:n<e?-1:1},Ed=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.Pz)(e))},VE=function(n){if("object"!=typeof n||null===n)return(0,k.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,k.Pz)(e[r]),t+=":",t+=VE(n[e[r]]);return t+="}",t},UE=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let o=0;o<t;o+=e)r.push(n.substring(o,o+e>t?t:o+e));return r};function ui(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const MI=function(n){(0,k.hu)(!nf(n),"Invalid JSON number");const r=1023;let o,u,c,p,y;0===n?(u=0,c=0,o=1/n==-1/0?1:0):(o=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(p=Math.min(Math.floor(Math.log(n)/Math.LN2),r),u=p+r,c=Math.round(n*Math.pow(2,52-p)-Math.pow(2,52))):(u=0,c=Math.round(n/Math.pow(2,-1074))));const b=[];for(y=52;y;y-=1)b.push(c%2?1:0),c=Math.floor(c/2);for(y=11;y;y-=1)b.push(u%2?1:0),u=Math.floor(u/2);b.push(o?1:0),b.reverse();const S=b.join("");let x="";for(y=0;y<64;y+=8){let O=parseInt(S.substr(y,8),2).toString(16);1===O.length&&(O="0"+O),x+=O}return x.toLowerCase()},sf=new RegExp("^-?(0*)\\d{1,10}$"),af=-2147483648,jl=2147483647,L_=function(n){if(sf.test(n)){const e=Number(n);if(e>=af&&e<=jl)return e}return null},wd=function(n){try{n()}catch(e){setTimeout(()=>{throw bi("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},bd=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class jE{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){bi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class OI{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(zn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',bi(e)}}let $l=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const kI=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Cs="websocket",FI="long_polling";class zE{constructor(e,t,r,o,u=!1,c="",p=!1){this.secure=t,this.namespace=r,this.webSocketOnly=o,this.nodeAdmin=u,this.persistenceKey=c,this.includeNamespaceInQueryParams=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ef.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ef.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function zx(n,e,t){let r;if((0,k.hu)("string"==typeof e,"typeof type must == string"),(0,k.hu)("object"==typeof t,"typeof params must == object"),e===Cs)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==FI)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const o=[];return ui(t,(u,c)=>{o.push(u+"="+c)}),r+o.join("&")}class LI{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.p$)(this.counters_)}}const VI={},KE={};function fg(n){const e=n.toString();return VI[e]||(VI[e]=new LI),VI[e]}class Kx{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<r.length;++o)r[o]&&wd(()=>{this.onMessage_(r[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class uf{constructor(e,t,r,o,u,c,p){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=o,this.authToken=u,this.transportSessionId=c,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=yd(e),this.stats_=fg(t),this.urlFn=y=>(this.appCheckToken&&(y.ac=this.appCheckToken),zx(t,FI,y))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Kx(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new QE((...u)=>{const[c,p,y,b,S]=u;if(this.incrementIncomingBytes_(u),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=p,this.password=y;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_()}},(...u)=>{const[c,p]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(c,p)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&kI.test(location.hostname)&&(r.r="f");const o=this.urlFn(r);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){uf.forceAllow_=!0}static forceDisallow(){uf.forceDisallow_=!0}static isAvailable(){return!((0,k.Yr)()||!uf.forceAllow_&&(uf.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,k.h$)(t),o=UE(r,1840);for(let u=0;u<o.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[u]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class QE{constructor(e,t,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Bx(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=QE.createIFrame_();let u="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(u='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(p){zn("frame writing exception"),p.stack&&zn(p.stack),zn(p)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||zn("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+o+"="+c.seg+"&ts"+o+"="+c.ts+"&d"+o+"="+c.d,o++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},o=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(o),r()})}addTag(e,t){(0,k.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const o=r.readyState;(!o||"loaded"===o||"complete"===o)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{zn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let pg=null;"undefined"!=typeof MozWebSocket?pg=MozWebSocket:"undefined"!=typeof WebSocket&&(pg=WebSocket);let Hl=(()=>{class n{constructor(t,r,o,u,c,p,y){this.connId=t,this.applicationId=o,this.appCheckToken=u,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=yd(this.connId),this.stats_=fg(r),this.connURL=n.connectionURL_(r,p,y,u),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,o,u){const c={v:"5"};return!(0,k.Yr)()&&"undefined"!=typeof location&&location.hostname&&kI.test(location.hostname)&&(c.r="f"),r&&(c.s=r),o&&(c.ls=o),u&&(c.ac=u),zx(t,Cs,c)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ef.set("previous_websocket_failure",!0);try{if((0,k.Yr)()){const u={headers:{"User-Agent":`Firebase/5/${k_}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(u.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(u.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,p=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;p&&(u.proxy={origin:p}),this.mySock=new pg(this.connURL,[],u)}else this.mySock=new pg(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(o){this.log_("Error instantiating WebSocket.");const u=o.message||o.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const u=o.message||o.data;u&&this.log_(u),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const o=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);o&&o.length>1&&parseFloat(o[1])<4.4&&(t=!0)}return!t&&null!==pg&&!n.forceDisallow_}static previouslyFailed(){return ef.isInMemoryStorage||!0===ef.get("previous_websocket_failure")}markConnectionHealthy(){ef.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const o=(0,k.cI)(r);this.onMessage(o)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const o=this.extractFrameCount_(r);null!==o&&this.appendFrame_(o)}}send(t){this.resetKeepAlive();const r=(0,k.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const o=UE(r,16384);o.length>1&&this.sendString_(String(o.length));for(let u=0;u<o.length;u++)this.sendString_(o[u])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class gg{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[uf,Hl]}initTransports_(e){const t=Hl&&Hl.isAvailable();let r=t&&!Hl.previouslyFailed();if(e.webSocketOnly&&(t||bi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Hl];else{const o=this.transports_=[];for(const u of gg.ALL_TRANSPORTS)u&&u.isAvailable()&&o.push(u)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class Xa{constructor(e,t,r,o,u,c,p,y,b,S){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=o,this.authToken_=u,this.onMessage_=c,this.onReady_=p,this.onDisconnect_=y,this.onKill_=b,this.lastSessionId=S,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=yd("c:"+this.id+":"),this.transportManager_=new gg(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=bd(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Ed("t",e),r=Ed("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Ed("t",e),r=Ed("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Ed("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?LE("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):LE("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&bi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),bd(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):bd(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ef.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class mg{put(e,t,r,o){}merge(e,t,r,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class JI{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let o=0;o<r.length;o++)r[o].callback.apply(r[o].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const o=this.getInitialEvent(e);o&&t.apply(r,o)}off(e,t,r){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let u=0;u<o.length;u++)if(o[u].callback===t&&(!r||r===o[u].context))return void o.splice(u,1)}validateEventType_(e){(0,k.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class U_ extends JI{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,k.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new U_}getInitialEvent(e){return(0,k.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class wn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[r]=this.pieces_[o],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function nn(){return new wn("")}function Wt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Gl(n){return n.pieces_.length-n.pieceNum_}function Dn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new wn(n.pieces_,e)}function B_(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function lf(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function XI(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new wn(e,0)}function Hn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof wn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let o=0;o<r.length;o++)r[o].length>0&&t.push(r[o])}return new wn(t,0)}function Jt(n){return n.pieceNum_>=n.pieces_.length}function ts(n,e){const t=Wt(n),r=Wt(e);if(null===t)return e;if(t===r)return ts(Dn(n),Dn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function eT(n,e){const t=lf(n,0),r=lf(e,0);for(let o=0;o<t.length&&o<r.length;o++){const u=vd(t[o],r[o]);if(0!==u)return u}return t.length===r.length?0:t.length<r.length?-1:1}function Wl(n,e){if(Gl(n)!==Gl(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Ws(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Gl(n)>Gl(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class sR{constructor(e,t){this.errorPrefix_=t,this.parts_=lf(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,k.ug)(this.parts_[r]);tT(this)}}function tT(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Id(n))}function Id(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class aw extends JI{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new aw}getInitialEvent(e){return(0,k.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const _g=1e3;let j_,ju=(()=>{class n extends mg{constructor(t,r,o,u,c,p,y,b){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=o,this.onConnectStatus_=u,this.onServerInfoUpdate_=c,this.authTokenProvider_=p,this.appCheckTokenProvider_=y,this.authOverride_=b,this.id=n.nextPersistentConnectionId_++,this.log_=yd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=_g,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,b&&!(0,k.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");aw.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&U_.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,o){const u=++this.requestNumber_,c={r:u,a:t,b:r};this.log_((0,k.Pz)(c)),(0,k.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),o&&(this.requestCBHash_[u]=o)}get(t){this.initConnection_();const r=new k.BH,o={p:t._path.toString(),q:t._queryObject},u={action:"g",request:o,onComplete:p=>{const y=p.d;"ok"===p.s?(this.onDataUpdate_(o.p,y,!1,null),r.resolve(y)):r.reject(y)}};this.outstandingGets_.push(u),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const p=this.outstandingGets_[c];void 0===p||u!==p||(delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+c+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(c),r.promise}listen(t,r,o,u){this.initConnection_();const c=t._queryIdentifier,p=t._path.toString();this.log_("Listen called for "+p+" "+c),this.listens.has(p)||this.listens.set(p,new Map),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.hu)(!this.listens.get(p).has(c),"listen() called twice for same path/queryId.");const y={onComplete:u,hashFn:r,query:t,tag:o};this.listens.get(p).set(c,y),this.connected_&&this.sendListen_(y)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,o=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(o)})}sendListen_(t){const r=t.query,o=r._path.toString(),u=r._queryIdentifier;this.log_("Listen on "+o+" for "+u);const c={p:o};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,y=>{const b=y.d,S=y.s;n.warnOnListenWarnings_(b,r),(this.listens.get(o)&&this.listens.get(o).get(u))===t&&(this.log_("listen response",y),"ok"!==S&&this.removeListen_(o,u),t.onComplete&&t.onComplete(S,b))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,k.r3)(t,"w")){const o=(0,k.DV)(t,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const u='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();bi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${u} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,k.w9)(t)?"auth":"gauth",o={cred:t};null===this.authOverride_?o.noauth=!0:"object"==typeof this.authOverride_&&(o.authvar=this.authOverride_),this.sendRequest(r,o,u=>{const c=u.s,p=u.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,p))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,o=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,o)})}unlisten(t,r){const o=t._path.toString(),u=t._queryIdentifier;this.log_("Unlisten called for "+o+" "+u),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,u)&&this.connected_&&this.sendUnlisten_(o,u,t._queryObject,r)}sendUnlisten_(t,r,o,u){this.log_("Unlisten on "+t+" for "+r);const c={p:t};u&&(c.q=o,c.t=u),this.sendRequest("n",c)}onDisconnectPut(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:o})}onDisconnectMerge(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:o})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,o,u){const c={p:r,d:o};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,p=>{u&&setTimeout(()=>{u(p.s,p.d)},Math.floor(0))})}put(t,r,o,u){this.putInternal("p",t,r,o,u)}merge(t,r,o,u){this.putInternal("m",t,r,o,u)}putInternal(t,r,o,u,c){this.initConnection_();const p={p:r,d:o};void 0!==c&&(p.h=c),this.outstandingPuts_.push({action:t,request:p,onComplete:u}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,o=this.outstandingPuts_[t].request,u=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,o,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),u&&u(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,o=>{"ok"!==o.s&&this.log_("reportStats","Error sending stats: "+o.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.Pz)(t));const r=t.r,o=this.requestCBHash_[r];o&&(delete this.requestCBHash_[r],o(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):LE("Unrecognized action received from server: "+(0,k.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=_g,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=_g,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=_g),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ee.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),o=t.onReady_.bind(t),u=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,p=t.lastSessionId;let y=!1,b=null;const S=function(){b?b.close():(y=!0,u())};t.realtime_={close:S,sendRequest:function($){(0,k.hu)(b,"sendRequest call when we're not connected not allowed."),b.sendRequest($)}};const O=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[$,K]=yield Promise.all([t.authTokenProvider_.getToken(O),t.appCheckTokenProvider_.getToken(O)]);y?zn("getToken() completed but was canceled"):(zn("getToken() completed. Creating connection."),t.authToken_=$&&$.accessToken,t.appCheckToken_=K&&K.token,b=new Xa(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,o,u,ye=>{bi(ye+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},p))}catch($){t.log_("Failed to get token: "+$),y||(t.repoInfo_.nodeAdmin&&bi($),S())}}})()}interrupt(t){zn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){zn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.xb)(this.interruptReasons_)&&(this.reconnectDelay_=_g,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let o;o=r?r.map(c=>VE(c)).join("$"):"default";const u=this.removeListen_(t,o);u&&u.onComplete&&u.onComplete("permission_denied")}removeListen_(t,r){const o=new wn(t).toString();let u;if(this.listens.has(o)){const c=this.listens.get(o);u=c.get(r),c.delete(r),0===c.size&&this.listens.delete(o)}else u=void 0;return u}onAuthRevoked_(t,r){zn("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){zn("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,k.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+k_.replace(/\./g,"-")]=1,(0,k.uI)()?t["framework.cordova"]=1:(0,k.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=U_.getInstance().currentlyOnline();return(0,k.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Zt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Zt(e,t)}}class cw{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Zt(Vi,e),o=new Zt(Vi,t);return 0!==this.compare(r,o)}minPost(){return Zt.MIN}}class nT extends cw{static get __EMPTY_NODE(){return j_}static set __EMPTY_NODE(e){j_=e}compare(e,t){return vd(e.name,t.name)}isDefinedOn(e){throw(0,k.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Zt.MIN}maxPost(){return new Zt(fa,j_)}makePost(e,t){return(0,k.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Zt(e,j_)}toString(){return".key"}}const pa=new nT;class yg{constructor(e,t,r,o,u=null){this.isReverse_=o,this.resultGenerator_=u,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?r(e.key,t):1,o&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let vg,Ro=(()=>{class n{constructor(t,r,o,u,c){this.key=t,this.value=r,this.color=null!=o?o:n.RED,this.left=null!=u?u:Is.EMPTY_NODE,this.right=null!=c?c:Is.EMPTY_NODE}copy(t,r,o,u,c){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=o?o:this.color,null!=u?u:this.left,null!=c?c:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,o){let u=this;const c=o(t,u.key);return u=c<0?u.copy(null,null,null,u.left.insert(t,r,o),null):0===c?u.copy(null,r,null,null,null):u.copy(null,null,null,null,u.right.insert(t,r,o)),u.fixUp_()}removeMin_(){if(this.left.isEmpty())return Is.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let o,u;if(o=this,r(t,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(t,r),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),0===r(t,o.key)){if(o.right.isEmpty())return Is.EMPTY_NODE;u=o.right.min_(),o=o.copy(u.key,u.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(t,r))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Is{constructor(e,t=Is.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Is(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ro.BLACK,null,null))}remove(e){return new Is(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ro.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,o=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(o=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new yg(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new yg(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new yg(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new yg(this.root_,null,this.comparator_,!0,e)}}function uR(n,e){return vd(n.name,e.name)}function Td(n,e){return vd(n,e)}Is.EMPTY_NODE=new class{copy(e,t,r,o,u){return this}insert(e,t,r){return new Ro(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const dw=function(n){return"number"==typeof n?"number:"+MI(n):"string:"+n},hw=function(n){if(n.isLeafNode()){const e=n.val();(0,k.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.r3)(e,".sv"),"Priority must be a string or number.")}else(0,k.hu)(n===vg||n.isEmpty(),"priority of unexpected type.");(0,k.hu)(n===vg||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let fw,sT,oT,df=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,k.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),hw(this.priorityNode_)}static set __childrenNodeConstructor(t){fw=t}static get __childrenNodeConstructor(){return fw}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Jt(t)?this:".priority"===Wt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const o=Wt(t);return null===o?r:r.isEmpty()&&".priority"!==o?this:((0,k.hu)(".priority"!==o||1===Gl(t),".priority must be the last token in a path"),this.updateImmediateChild(o,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Dn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+dw(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?MI(this.value_):this.value_,this.lazyHash_=jx(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,o=typeof this.value_,u=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(o);return(0,k.hu)(u>=0,"Unknown leaf type: "+r),(0,k.hu)(c>=0,"Unknown leaf type: "+o),u===c?"object"===o?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-u}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Fn=new class extends cw{compare(e,t){const r=e.node.getPriority(),o=t.node.getPriority(),u=r.compareTo(o);return 0===u?vd(e.name,t.name):u}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Zt.MIN}maxPost(){return new Zt(fa,new df("[PRIORITY-POST]",oT))}makePost(e,t){const r=sT(e);return new Zt(t,new df("[PRIORITY-POST]",r))}toString(){return".priority"}},cR=Math.log(2);class dR{constructor(e){this.count=parseInt(Math.log(e+1)/cR,10),this.current_=this.count-1;const o=(u=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const pw=function(n,e,t,r){n.sort(e);const o=function(y,b){const S=b-y;let x,O;if(0===S)return null;if(1===S)return x=n[y],O=t?t(x):x,new Ro(O,x.node,Ro.BLACK,null,null);{const $=parseInt(S/2,10)+y,K=o(y,$),ye=o($+1,b);return x=n[$],O=t?t(x):x,new Ro(O,x.node,Ro.BLACK,K,ye)}},p=function(y){let b=null,S=null,x=n.length;const O=function(K,ye){const xe=x-K,pt=x;x-=K;const dt=o(xe+1,pt),tt=n[xe],it=t?t(tt):tt;$(new Ro(it,tt.node,ye,null,dt))},$=function(K){b?(b.left=K,b=K):(S=K,b=K)};for(let K=0;K<y.count;++K){const ye=y.nextBitIsOne(),xe=Math.pow(2,y.count-(K+1));ye?O(xe,Ro.BLACK):(O(xe,Ro.BLACK),O(xe,Ro.RED))}return S}(new dR(n.length));return new Is(r||e,p)};let uT;const ql={};class $u{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.hu)(ql&&Fn,"ChildrenNode.ts has not been loaded"),uT=uT||new $u({".priority":ql},{".priority":Fn}),uT}get(e){const t=(0,k.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Is?t:null}hasIndex(e){return(0,k.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.hu)(e!==pa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let o=!1;const u=t.getIterator(Zt.Wrap);let p,c=u.getNext();for(;c;)o=o||e.isDefinedOn(c.node),r.push(c),c=u.getNext();p=o?pw(r,e.getCompare()):ql;const y=e.toString(),b=Object.assign({},this.indexSet_);b[y]=e;const S=Object.assign({},this.indexes_);return S[y]=p,new $u(S,b)}addToIndexes(e,t){const r=(0,k.UI)(this.indexes_,(o,u)=>{const c=(0,k.DV)(this.indexSet_,u);if((0,k.hu)(c,"Missing index implementation for "+u),o===ql){if(c.isDefinedOn(e.node)){const p=[],y=t.getIterator(Zt.Wrap);let b=y.getNext();for(;b;)b.name!==e.name&&p.push(b),b=y.getNext();return p.push(e),pw(p,c.getCompare())}return ql}{const p=t.get(e.name);let y=o;return p&&(y=y.remove(new Zt(e.name,p))),y.insert(e,e.node)}});return new $u(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,k.UI)(this.indexes_,o=>{if(o===ql)return o;{const u=t.get(e.name);return u?o.remove(new Zt(e.name,u)):o}});return new $u(r,this.indexSet_)}}let hf,jt=(()=>{class n{constructor(t,r,o){this.children_=t,this.priorityNode_=r,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&hw(this.priorityNode_),this.children_.isEmpty()&&(0,k.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return hf||(hf=new n(new Is(Td),null,$u.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||hf}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?hf:r}}getChild(t){const r=Wt(t);return null===r?this:this.getImmediateChild(r).getChild(Dn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,k.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const o=new Zt(t,r);let u,c;r.isEmpty()?(u=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(o,this.children_)):(u=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(o,this.children_));const p=u.isEmpty()?hf:this.priorityNode_;return new n(u,p,c)}}updateChild(t,r){const o=Wt(t);if(null===o)return r;{(0,k.hu)(".priority"!==Wt(t)||1===Gl(t),".priority must be the last token in a path");const u=this.getImmediateChild(o).updateChild(Dn(t),r);return this.updateImmediateChild(o,u)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let o=0,u=0,c=!0;if(this.forEachChild(Fn,(p,y)=>{r[p]=y.val(t),o++,c&&n.INTEGER_REGEXP_.test(p)?u=Math.max(u,Number(p)):c=!1}),!t&&c&&u<2*o){const p=[];for(const y in r)p[y]=r[y];return p}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+dw(this.getPriority().val())+":"),this.forEachChild(Fn,(r,o)=>{const u=o.hash();""!==u&&(t+=":"+r+":"+u)}),this.lazyHash_=""===t?"":jx(t)}return this.lazyHash_}getPredecessorChildName(t,r,o){const u=this.resolveIndex_(o);if(u){const c=u.getPredecessorKey(new Zt(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.minKey();return o&&o.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Zt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.maxKey();return o&&o.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Zt(r,this.children_.get(r)):null}forEachChild(t,r){const o=this.resolveIndex_(t);return o?o.inorderTraversal(u=>r(u.name,u.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getIteratorFrom(t,u=>u);{const u=this.children_.getIteratorFrom(t.name,Zt.Wrap);let c=u.peek();for(;null!=c&&r.compare(c,t)<0;)u.getNext(),c=u.peek();return u}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getReverseIteratorFrom(t,u=>u);{const u=this.children_.getReverseIteratorFrom(t.name,Zt.Wrap);let c=u.peek();for(;null!=c&&r.compare(c,t)>0;)u.getNext(),c=u.peek();return u}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ns?-1:0}withIndex(t){if(t===pa||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===pa||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const o=this.getIterator(Fn),u=r.getIterator(Fn);let c=o.getNext(),p=u.getNext();for(;c&&p;){if(c.name!==p.name||!c.node.equals(p.node))return!1;c=o.getNext(),p=u.getNext()}return null===c&&null===p}return!1}return!1}}resolveIndex_(t){return t===pa?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const ns=new class extends jt{constructor(){super(new Is(Td),jt.EMPTY_NODE,$u.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return jt.EMPTY_NODE}isEmpty(){return!1}};function wr(n,e=null){if(null===n)return jt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new df(n,wr(e));if(n instanceof Array){let t=jt.EMPTY_NODE;return ui(n,(r,o)=>{if((0,k.r3)(n,r)&&"."!==r.substring(0,1)){const u=wr(o);(u.isLeafNode()||!u.isEmpty())&&(t=t.updateImmediateChild(r,u))}}),t.updatePriority(wr(e))}{const t=[];let r=!1;if(ui(n,(c,p)=>{if("."!==c.substring(0,1)){const y=wr(p);y.isEmpty()||(r=r||!y.getPriority().isEmpty(),t.push(new Zt(c,y)))}}),0===t.length)return jt.EMPTY_NODE;const u=pw(t,uR,c=>c.name,Td);if(r){const c=pw(t,Fn.getCompare());return new jt(u,wr(e),new $u({".priority":c},{".priority":Fn}))}return new jt(u,wr(e),$u.Default)}}Object.defineProperties(Zt,{MIN:{value:new Zt(Vi,jt.EMPTY_NODE)},MAX:{value:new Zt(fa,ns)}}),nT.__EMPTY_NODE=jt.EMPTY_NODE,df.__childrenNodeConstructor=jt,vg=ns,oT=ns,function(n){sT=n}(wr);class lT extends cw{constructor(e){super(),this.indexPath_=e,(0,k.hu)(!Jt(e)&&".priority"!==Wt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),o=this.extractChild(t.node),u=r.compareTo(o);return 0===u?vd(e.name,t.name):u}makePost(e,t){const r=wr(e),o=jt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Zt(t,o)}maxPost(){const e=jt.EMPTY_NODE.updateChild(this.indexPath_,ns);return new Zt(fa,e)}toString(){return lf(this.indexPath_,0).join("/")}}const $_=new class extends cw{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?vd(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Zt.MIN}maxPost(){return Zt.MAX}makePost(e,t){const r=wr(e);return new Zt(t,r)}toString(){return".value"}},Dd="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",_w=function(){let n=0;const e=[];return function(t){const r=t===n;let o;n=t;const u=new Array(8);for(o=7;o>=0;o--)u[o]=Dd.charAt(t%64),t=Math.floor(t/64);(0,k.hu)(0===t,"Cannot push at time == 0");let c=u.join("");if(r){for(o=11;o>=0&&63===e[o];o--)e[o]=0;e[o]++}else for(o=0;o<12;o++)e[o]=Math.floor(64*Math.random());for(o=0;o<12;o++)c+=Dd.charAt(e[o]);return(0,k.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),dT=function(n){if(n===""+jl)return"-";const e=L_(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let c=0;c<t.length;c++)t[c]=n.charAt(c);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return fa;const u=Dd.charAt(Dd.indexOf(t[r])+1);return t[r]=u,t.slice(0,r+1).join("")},H_=function(n){if(n===""+af)return Vi;const e=L_(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+jl:(delete t[t.length-1],t.join("")):(t[t.length-1]=Dd.charAt(Dd.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function hT(n){return{type:"value",snapshotNode:n}}function ff(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Eg(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function wg(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class yw{constructor(e){this.index_=e}updateChild(e,t,r,o,u,c){(0,k.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=e.getImmediateChild(t);return p.getChild(o).equals(r.getChild(o))&&p.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(Eg(t,p)):(0,k.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?c.trackChildChange(ff(t,r)):c.trackChildChange(wg(t,r,p))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Fn,(o,u)=>{t.hasChild(o)||r.trackChildChange(Eg(o,u))}),t.isLeafNode()||t.forEachChild(Fn,(o,u)=>{if(e.hasChild(o)){const c=e.getImmediateChild(o);c.equals(u)||r.trackChildChange(wg(o,u,c))}else r.trackChildChange(ff(o,u))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?jt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class zl{constructor(e){this.indexedFilter_=new yw(e.getIndex()),this.index_=e.getIndex(),this.startPost_=zl.getStartPost_(e),this.endPost_=zl.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,o,u,c){return this.matches(new Zt(t,r))||(r=jt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,o,u,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=jt.EMPTY_NODE);let o=t.withIndex(this.index_);o=o.updatePriority(jt.EMPTY_NODE);const u=this;return t.forEachChild(Fn,(c,p)=>{u.matches(new Zt(c,p))||(o=o.updateImmediateChild(c,jt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class pf{constructor(e){this.rangedFilter_=new zl(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,o,u,c){return this.rangedFilter_.matches(new Zt(t,r))||(r=jt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,o,u,c):this.fullLimitUpdateChild_(e,t,r,u,c)}updateFullNode(e,t,r){let o;if(t.isLeafNode()||t.isEmpty())o=jt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let u;o=jt.EMPTY_NODE.withIndex(this.index_),u=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;u.hasNext()&&c<this.limit_;){const p=u.getNext();let y;if(y=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),p)<=0:this.index_.compare(p,this.rangedFilter_.getEndPost())<=0,!y)break;o=o.updateImmediateChild(p.name,p.node),c++}}else{let u,c,p,y;if(o=t.withIndex(this.index_),o=o.updatePriority(jt.EMPTY_NODE),this.reverse_){y=o.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const x=this.index_.getCompare();p=(O,$)=>x($,O)}else y=o.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),p=this.index_.getCompare();let b=0,S=!1;for(;y.hasNext();){const x=y.getNext();!S&&p(u,x)<=0&&(S=!0),S&&b<this.limit_&&p(x,c)<=0?b++:o=o.updateImmediateChild(x.name,jt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,o,u){let c;if(this.reverse_){const x=this.index_.getCompare();c=(O,$)=>x($,O)}else c=this.index_.getCompare();const p=e;(0,k.hu)(p.numChildren()===this.limit_,"");const y=new Zt(t,r),b=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),S=this.rangedFilter_.matches(y);if(p.hasChild(t)){const x=p.getImmediateChild(t);let O=o.getChildAfterChild(this.index_,b,this.reverse_);for(;null!=O&&(O.name===t||p.hasChild(O.name));)O=o.getChildAfterChild(this.index_,O,this.reverse_);const $=null==O?1:c(O,y);if(S&&!r.isEmpty()&&$>=0)return null!=u&&u.trackChildChange(wg(t,r,x)),p.updateImmediateChild(t,r);{null!=u&&u.trackChildChange(Eg(t,x));const ye=p.updateImmediateChild(t,jt.EMPTY_NODE);return null!=O&&this.rangedFilter_.matches(O)?(null!=u&&u.trackChildChange(ff(O.name,O.node)),ye.updateImmediateChild(O.name,O.node)):ye}}return r.isEmpty()?e:S&&c(b,y)>=0?(null!=u&&(u.trackChildChange(Eg(b.name,b.node)),u.trackChildChange(ff(t,r))),p.updateImmediateChild(t,r).updateImmediateChild(b.name,jt.EMPTY_NODE)):e}}class bg{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Fn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Vi}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:fa}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Fn}copy(){const e=new bg;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function vw(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function No(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function Qr(n,e){const t=n.copy();return t.index_=e,t}function Kl(n){const e={};if(n.isDefault())return e;let t;return n.index_===Fn?t="$priority":n.index_===$_?t="$value":n.index_===pa?t="$key":((0,k.hu)(n.index_ instanceof lT,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.Pz)(t),n.startSet_&&(e.startAt=(0,k.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,k.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,k.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,k.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Tg(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Fn&&(e.i=n.index_.toString()),e}class rs extends mg{constructor(e,t,r,o){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=o,this.log_=yd("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,o){const u=e._path.toString();this.log_("Listen called for "+u+" "+e._queryIdentifier);const c=rs.getListenId_(e,r),p={};this.listens_[c]=p;const y=Kl(e._queryParams);this.restRequest_(u+".json",y,(b,S)=>{let x=S;if(404===b&&(x=null,b=null),null===b&&this.onDataUpdate_(u,x,!1,r),(0,k.DV)(this.listens_,c)===p){let O;O=b?401===b?"permission_denied":"rest_error:"+b:"ok",o(O,null)}})}unlisten(e,t){const r=rs.getListenId_(e,t);delete this.listens_[r]}get(e){const t=Kl(e._queryParams),r=e._path.toString(),o=new k.BH;return this.restRequest_(r+".json",t,(u,c)=>{let p=c;404===u&&(p=null,u=null),null===u?(this.onDataUpdate_(r,p,!1,null),o.resolve(p)):o.reject(new Error(p))}),o.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,u])=>{o&&o.accessToken&&(t.auth=o.accessToken),u&&u.token&&(t.ac=u.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.xO)(t);this.log_("Sending REST request for "+c);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(r&&4===p.readyState){this.log_("REST Response for "+c+" received. status:",p.status,"response:",p.responseText);let y=null;if(p.status>=200&&p.status<300){try{y=(0,k.cI)(p.responseText)}catch(b){bi("Failed to parse JSON response for "+c+": "+p.responseText)}r(null,y)}else 401!==p.status&&404!==p.status&&bi("Got unsuccessful REST response for "+c+" Status: "+p.status),r(p.status);r=null}},p.open("GET",c,!0),p.send()})}}class ww{constructor(){this.rootNode_=jt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Hu(){return{value:null,children:new Map}}function ma(n,e,t){if(Jt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Wt(e);n.children.has(r)||n.children.set(r,Hu()),ma(n.children.get(r),e=Dn(e),t)}}function Zl(n,e){if(Jt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Fn,(r,o)=>{ma(n,new wn(r),o)}),Zl(n,e)}}if(n.children.size>0){const t=Wt(e);return e=Dn(e),n.children.has(t)&&Zl(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Yl(n,e,t){null!==n.value?t(e,n.value):function(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,o)=>{Yl(o,new wn(e.toString()+"/"+r),t)})}class mf{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ui(this.last_,(r,o)=>{t[r]=t[r]-o}),this.last_=e,t}}class fT{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new mf(e);const r=1e4+2e4*Math.random();bd(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;ui(e,(o,u)=>{u>0&&(0,k.r3)(this.statsToReport_,o)&&(t[o]=u,r=!0)}),r&&this.server_.reportStats(t),bd(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var qs=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(qs||(qs={})),qs))();function q_(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Dg{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=qs.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Jt(this.path)){if(null!=this.affectedTree.value)return(0,k.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new wn(e));return new Dg(nn(),t,this.revert)}}return(0,k.hu)(Wt(this.path)===e,"operationForChild called for unrelated child."),new Dg(Dn(this.path),this.affectedTree,this.revert)}}class vf{constructor(e,t){this.source=e,this.path=t,this.type=qs.LISTEN_COMPLETE}operationForChild(e){return Jt(this.path)?new vf(this.source,nn()):new vf(this.source,Dn(this.path))}}class Ql{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=qs.OVERWRITE}operationForChild(e){return Jt(this.path)?new Ql(this.source,nn(),this.snap.getImmediateChild(e)):new Ql(this.source,Dn(this.path),this.snap)}}class Ad{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=qs.MERGE}operationForChild(e){if(Jt(this.path)){const t=this.children.subtree(new wn(e));return t.isEmpty()?null:t.value?new Ql(this.source,nn(),t.value):new Ad(this.source,nn(),t)}return(0,k.hu)(Wt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ad(this.source,Dn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Jl{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Jt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Wt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class pT{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Sg(n,e,t,r,o,u){const c=r.filter(p=>p.type===t);c.sort((p,y)=>function(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.g5)("Should only compare child_ events.");const r=new Zt(e.childName,e.snapshotNode),o=new Zt(t.childName,t.snapshotNode);return n.index_.compare(r,o)}(n,p,y)),c.forEach(p=>{const y=function(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,p,u);o.forEach(b=>{b.respondsTo(p.type)&&e.push(b.createEvent(y,n.query_))})})}function bw(n,e){return{eventCache:n,serverCache:e}}function Ag(n,e,t,r){return bw(new Jl(e,t,r),n.serverCache)}function Cw(n,e,t,r){return bw(n.eventCache,new Jl(e,t,r))}function z_(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Xl(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Iw;class Kn{constructor(e,t=(()=>(Iw||(Iw=new Is(r1)),Iw))()){this.value=e,this.children=t}static fromObject(e){let t=new Kn(null);return ui(e,(r,o)=>{t=t.set(new wn(r),o)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:nn(),value:this.value};if(Jt(e))return null;{const r=Wt(e),o=this.children.get(r);if(null!==o){const u=o.findRootMostMatchingPathAndValue(Dn(e),t);return null!=u?{path:Hn(new wn(r),u.path),value:u.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Jt(e))return this;{const t=Wt(e),r=this.children.get(t);return null!==r?r.subtree(Dn(e)):new Kn(null)}}set(e,t){if(Jt(e))return new Kn(t,this.children);{const r=Wt(e),u=(this.children.get(r)||new Kn(null)).set(Dn(e),t),c=this.children.insert(r,u);return new Kn(this.value,c)}}remove(e){if(Jt(e))return this.children.isEmpty()?new Kn(null):new Kn(null,this.children);{const t=Wt(e),r=this.children.get(t);if(r){const o=r.remove(Dn(e));let u;return u=o.isEmpty()?this.children.remove(t):this.children.insert(t,o),null===this.value&&u.isEmpty()?new Kn(null):new Kn(this.value,u)}return this}}get(e){if(Jt(e))return this.value;{const t=Wt(e),r=this.children.get(t);return r?r.get(Dn(e)):null}}setTree(e,t){if(Jt(e))return t;{const r=Wt(e),u=(this.children.get(r)||new Kn(null)).setTree(Dn(e),t);let c;return c=u.isEmpty()?this.children.remove(r):this.children.insert(r,u),new Kn(this.value,c)}}fold(e){return this.fold_(nn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((o,u)=>{r[o]=u.fold_(Hn(e,o),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,nn(),t)}findOnPath_(e,t,r){const o=!!this.value&&r(t,this.value);if(o)return o;if(Jt(e))return null;{const u=Wt(e),c=this.children.get(u);return c?c.findOnPath_(Dn(e),Hn(t,u),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,nn(),t)}foreachOnPath_(e,t,r){if(Jt(e))return this;{this.value&&r(t,this.value);const o=Wt(e),u=this.children.get(o);return u?u.foreachOnPath_(Dn(e),Hn(t,o),r):new Kn(null)}}foreach(e){this.foreach_(nn(),e)}foreach_(e,t){this.children.inorderTraversal((r,o)=>{o.foreach_(Hn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class _a{constructor(e){this.writeTree_=e}static empty(){return new _a(new Kn(null))}}function Ef(n,e,t){if(Jt(e))return new _a(new Kn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const o=r.path;let u=r.value;const c=ts(o,e);return u=u.updateChild(c,t),new _a(n.writeTree_.set(o,u))}{const o=new Kn(t),u=n.writeTree_.setTree(e,o);return new _a(u)}}}function mT(n,e,t){let r=n;return ui(t,(o,u)=>{r=Ef(r,Hn(e,o),u)}),r}function yR(n,e){if(Jt(e))return _a.empty();{const t=n.writeTree_.setTree(e,new Kn(null));return new _a(t)}}function _T(n,e){return null!=xd(n,e)}function xd(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(ts(t.path,e)):null}function vR(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Fn,(r,o)=>{e.push(new Zt(r,o))}):n.writeTree_.children.inorderTraversal((r,o)=>{null!=o.value&&e.push(new Zt(r,o.value))}),e}function ec(n,e){if(Jt(e))return n;{const t=xd(n,e);return new _a(null!=t?new Kn(t):n.writeTree_.subtree(e))}}function Tw(n){return n.writeTree_.isEmpty()}function tc(n,e){return K_(nn(),n.writeTree_,e)}function K_(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((o,u)=>{".priority"===o?((0,k.hu)(null!==u.value,"Priority writes must always be leaf nodes"),r=u.value):t=K_(Hn(n,o),u,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Hn(n,".priority"),r)),t}}function Z_(n,e){return Sw(e,n)}function yT(n,e){if(n.snap)return Ws(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ws(Hn(n.path,t),e))return!0;return!1}function wR(n){return n.visible}function Rd(n,e,t){let r=_a.empty();for(let o=0;o<n.length;++o){const u=n[o];if(e(u)){const c=u.path;let p;if(u.snap)Ws(t,c)?(p=ts(t,c),r=Ef(r,p,u.snap)):Ws(c,t)&&(p=ts(c,t),r=Ef(r,nn(),u.snap.getChild(p)));else{if(!u.children)throw(0,k.g5)("WriteRecord should have .snap or .children");if(Ws(t,c))p=ts(t,c),r=mT(r,p,u.children);else if(Ws(c,t))if(p=ts(c,t),Jt(p))r=mT(r,nn(),u.children);else{const y=(0,k.DV)(u.children,Wt(p));if(y){const b=y.getChild(Dn(p));r=Ef(r,nn(),b)}}}}}return r}function vT(n,e,t,r,o){if(r||o){const u=ec(n.visibleWrites,e);return!o&&Tw(u)?t:o||null!=t||_T(u,nn())?tc(Rd(n.allWrites,function(b){return(b.visible||o)&&(!r||!~r.indexOf(b.writeId))&&(Ws(b.path,e)||Ws(e,b.path))},e),t||jt.EMPTY_NODE):null}{const u=xd(n.visibleWrites,e);if(null!=u)return u;{const c=ec(n.visibleWrites,e);return Tw(c)?t:null!=t||_T(c,nn())?tc(c,t||jt.EMPTY_NODE):null}}}function Q_(n,e,t,r){return vT(n.writeTree,n.treePath,e,t,r)}function Dw(n,e){return function(n,e,t){let r=jt.EMPTY_NODE;const o=xd(n.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(Fn,(u,c)=>{r=r.updateImmediateChild(u,c)}),r;if(t){const u=ec(n.visibleWrites,e);return t.forEachChild(Fn,(c,p)=>{const y=tc(ec(u,new wn(c)),p);r=r.updateImmediateChild(c,y)}),vR(u).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return vR(ec(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function CT(n,e,t,r){return function(n,e,t,r,o){(0,k.hu)(r||o,"Either existingEventSnap or existingServerSnap must exist");const u=Hn(e,t);if(_T(n.visibleWrites,u))return null;{const c=ec(n.visibleWrites,u);return Tw(c)?o.getChild(t):tc(c,o.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function J_(n,e){return function(n,e){return xd(n.visibleWrites,e)}(n.writeTree,Hn(n.treePath,e))}function X_(n,e,t){return function(n,e,t,r){const o=Hn(e,t),u=xd(n.visibleWrites,o);return null!=u?u:r.isCompleteForChild(t)?tc(ec(n.visibleWrites,o),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function IT(n,e){return Sw(Hn(n.treePath,e),n.writeTree)}function Sw(n,e){return{treePath:n,writeTree:e}}class TT{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,k.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const o=this.changeMap.get(r);if(o){const u=o.type;if("child_added"===t&&"child_removed"===u)this.changeMap.set(r,wg(r,e.snapshotNode,o.snapshotNode));else if("child_removed"===t&&"child_added"===u)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===u)this.changeMap.set(r,Eg(r,o.oldSnap));else if("child_changed"===t&&"child_added"===u)this.changeMap.set(r,ff(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==u)throw(0,k.g5)("Illegal combination of changes: "+e+" occurred after "+o);this.changeMap.set(r,wg(r,e.snapshotNode,o.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const TR=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class xg{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Jl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return X_(this.writes_,e,r)}}getChildAfterChild(e,t,r){const o=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Xl(this.viewCache_),u=function(n,e,t,r,o,u){return function(n,e,t,r,o,u,c){let p;const y=ec(n.visibleWrites,e),b=xd(y,nn());if(null!=b)p=b;else{if(null==t)return[];p=tc(y,t)}if(p=p.withIndex(c),p.isEmpty()||p.isLeafNode())return[];{const S=[],x=c.getCompare(),O=u?p.getReverseIteratorFrom(r,c):p.getIteratorFrom(r,c);let $=O.getNext();for(;$&&S.length<o;)0!==x($,r)&&S.push($),$=O.getNext();return S}}(n.writeTree,n.treePath,e,t,r,o,u)}(this.writes_,o,t,1,r,e);return 0===u.length?null:u[0]}}function ey(n,e,t,r,o,u){const c=e.eventCache;if(null!=J_(r,t))return e;{let p,y;if(Jt(t))if((0,k.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const b=Xl(e),x=Dw(r,b instanceof jt?b:jt.EMPTY_NODE);p=n.filter.updateFullNode(e.eventCache.getNode(),x,u)}else{const b=Q_(r,Xl(e));p=n.filter.updateFullNode(e.eventCache.getNode(),b,u)}else{const b=Wt(t);if(".priority"===b){(0,k.hu)(1===Gl(t),"Can't have a priority with additional path components");const S=c.getNode();y=e.serverCache.getNode();const x=CT(r,t,S,y);p=null!=x?n.filter.updatePriority(S,x):c.getNode()}else{const S=Dn(t);let x;if(c.isCompleteForChild(b)){y=e.serverCache.getNode();const O=CT(r,t,c.getNode(),y);x=null!=O?c.getNode().getImmediateChild(b).updateChild(S,O):c.getNode().getImmediateChild(b)}else x=X_(r,b,e.serverCache);p=null!=x?n.filter.updateChild(c.getNode(),b,x,S,o,u):c.getNode()}}return Ag(e,p,c.isFullyInitialized()||Jt(t),n.filter.filtersNodes())}}function wf(n,e,t,r,o,u,c,p){const y=e.serverCache;let b;const S=c?n.filter:n.filter.getIndexedFilter();if(Jt(t))b=S.updateFullNode(y.getNode(),r,null);else if(S.filtersNodes()&&!y.isFiltered()){const $=y.getNode().updateChild(t,r);b=S.updateFullNode(y.getNode(),$,null)}else{const $=Wt(t);if(!y.isCompleteForPath(t)&&Gl(t)>1)return e;const K=Dn(t),xe=y.getNode().getImmediateChild($).updateChild(K,r);b=".priority"===$?S.updatePriority(y.getNode(),xe):S.updateChild(y.getNode(),$,xe,K,TR,null)}const x=Cw(e,b,y.isFullyInitialized()||Jt(t),S.filtersNodes());return ey(n,x,t,o,new xg(o,x,u),p)}function xw(n,e,t,r,o,u,c){const p=e.eventCache;let y,b;const S=new xg(o,e,u);if(Jt(t))b=n.filter.updateFullNode(e.eventCache.getNode(),r,c),y=Ag(e,b,!0,n.filter.filtersNodes());else{const x=Wt(t);if(".priority"===x)b=n.filter.updatePriority(e.eventCache.getNode(),r),y=Ag(e,b,p.isFullyInitialized(),p.isFiltered());else{const O=Dn(t),$=p.getNode().getImmediateChild(x);let K;if(Jt(O))K=r;else{const ye=S.getCompleteChild(x);K=null!=ye?".priority"===B_(O)&&ye.getChild(XI(O)).isEmpty()?ye:ye.updateChild(O,r):jt.EMPTY_NODE}y=$.equals(K)?e:Ag(e,n.filter.updateChild(p.getNode(),x,K,O,S,c),p.isFullyInitialized(),n.filter.filtersNodes())}}return y}function ty(n,e){return n.eventCache.isCompleteForChild(e)}function Nw(n,e,t){return t.foreach((r,o)=>{e=e.updateChild(r,o)}),e}function DT(n,e,t,r,o,u,c,p){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let b,y=e;b=Jt(t)?r:new Kn(null).setTree(t,r);const S=e.serverCache.getNode();return b.children.inorderTraversal((x,O)=>{if(S.hasChild(x)){const K=Nw(0,e.serverCache.getNode().getImmediateChild(x),O);y=wf(n,y,new wn(x),K,o,u,c,p)}}),b.children.inorderTraversal((x,O)=>{const $=!e.serverCache.isCompleteForChild(x)&&void 0===O.value;if(!S.hasChild(x)&&!$){const ye=Nw(0,e.serverCache.getNode().getImmediateChild(x),O);y=wf(n,y,new wn(x),ye,o,u,c,p)}}),y}class xR{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,o=new yw(r.getIndex()),u=function(n){return n.loadsAllData()?new yw(n.getIndex()):n.hasLimit()?new pf(n):new zl(n)}(r);this.processor_=function(n){return{filter:n}}(u);const c=t.serverCache,p=t.eventCache,y=o.updateFullNode(jt.EMPTY_NODE,c.getNode(),null),b=u.updateFullNode(jt.EMPTY_NODE,p.getNode(),null),S=new Jl(y,c.isFullyInitialized(),o.filtersNodes()),x=new Jl(b,p.isFullyInitialized(),u.filtersNodes());this.viewCache_=bw(x,S),this.eventGenerator_=new pT(this.query_)}get query(){return this.query_}}function RT(n,e){const t=Xl(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Jt(e)&&!t.getImmediateChild(Wt(e)).isEmpty())?t.getChild(e):null}function ny(n){return 0===n.eventRegistrations_.length}function Ow(n,e,t){const r=[];if(t){(0,k.hu)(null==e,"A cancel should cancel all event registrations.");const o=n.query._path;n.eventRegistrations_.forEach(u=>{const c=u.createCancelEvent(t,o);c&&r.push(c)})}if(e){let o=[];for(let u=0;u<n.eventRegistrations_.length;++u){const c=n.eventRegistrations_[u];if(c.matches(e)){if(e.hasAnyCallback()){o=o.concat(n.eventRegistrations_.slice(u+1));break}}else o.push(c)}n.eventRegistrations_=o}else n.eventRegistrations_=[];return r}function NT(n,e,t,r){e.type===qs.MERGE&&null!==e.source.queryId&&((0,k.hu)(Xl(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.hu)(z_(n.viewCache_),"Missing event cache, even though we have a server cache"));const o=n.viewCache_,u=function(n,e,t,r,o){const u=new TT;let c,p;if(t.type===qs.OVERWRITE){const b=t;b.source.fromUser?c=xw(n,e,b.path,b.snap,r,o,u):((0,k.hu)(b.source.fromServer,"Unknown source."),p=b.source.tagged||e.serverCache.isFiltered()&&!Jt(b.path),c=wf(n,e,b.path,b.snap,r,o,p,u))}else if(t.type===qs.MERGE){const b=t;b.source.fromUser?c=function(n,e,t,r,o,u,c){let p=e;return r.foreach((y,b)=>{const S=Hn(t,y);ty(e,Wt(S))&&(p=xw(n,p,S,b,o,u,c))}),r.foreach((y,b)=>{const S=Hn(t,y);ty(e,Wt(S))||(p=xw(n,p,S,b,o,u,c))}),p}(n,e,b.path,b.children,r,o,u):((0,k.hu)(b.source.fromServer,"Unknown source."),p=b.source.tagged||e.serverCache.isFiltered(),c=DT(n,e,b.path,b.children,r,o,p,u))}else if(t.type===qs.ACK_USER_WRITE){const b=t;c=b.revert?function(n,e,t,r,o,u){let c;if(null!=J_(r,t))return e;{const p=new xg(r,e,o),y=e.eventCache.getNode();let b;if(Jt(t)||".priority"===Wt(t)){let S;if(e.serverCache.isFullyInitialized())S=Q_(r,Xl(e));else{const x=e.serverCache.getNode();(0,k.hu)(x instanceof jt,"serverChildren would be complete if leaf node"),S=Dw(r,x)}S=S,b=n.filter.updateFullNode(y,S,u)}else{const S=Wt(t);let x=X_(r,S,e.serverCache);null==x&&e.serverCache.isCompleteForChild(S)&&(x=y.getImmediateChild(S)),b=null!=x?n.filter.updateChild(y,S,x,Dn(t),p,u):e.eventCache.getNode().hasChild(S)?n.filter.updateChild(y,S,jt.EMPTY_NODE,Dn(t),p,u):y,b.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=Q_(r,Xl(e)),c.isLeafNode()&&(b=n.filter.updateFullNode(b,c,u)))}return c=e.serverCache.isFullyInitialized()||null!=J_(r,nn()),Ag(e,b,c,n.filter.filtersNodes())}}(n,e,b.path,r,o,u):function(n,e,t,r,o,u,c){if(null!=J_(o,t))return e;const p=e.serverCache.isFiltered(),y=e.serverCache;if(null!=r.value){if(Jt(t)&&y.isFullyInitialized()||y.isCompleteForPath(t))return wf(n,e,t,y.getNode().getChild(t),o,u,p,c);if(Jt(t)){let b=new Kn(null);return y.getNode().forEachChild(pa,(S,x)=>{b=b.set(new wn(S),x)}),DT(n,e,t,b,o,u,p,c)}return e}{let b=new Kn(null);return r.foreach((S,x)=>{const O=Hn(t,S);y.isCompleteForPath(O)&&(b=b.set(S,y.getNode().getChild(O)))}),DT(n,e,t,b,o,u,p,c)}}(n,e,b.path,b.affectedTree,r,o,u)}else{if(t.type!==qs.LISTEN_COMPLETE)throw(0,k.g5)("Unknown operation type: "+t.type);c=function(n,e,t,r,o){const u=e.serverCache;return ey(n,Cw(e,u.getNode(),u.isFullyInitialized()||Jt(t),u.isFiltered()),t,r,TR,o)}(n,e,t.path,r,u)}const y=u.getChanges();return function(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const o=r.getNode().isLeafNode()||r.getNode().isEmpty(),u=z_(n);(t.length>0||!n.eventCache.isFullyInitialized()||o&&!r.getNode().equals(u)||!r.getNode().getPriority().equals(u.getPriority()))&&t.push(hT(z_(e)))}}(e,c,y),{viewCache:c,changes:y}}(n.processor_,o,e,t,r);return function(n,e){(0,k.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,u.viewCache),(0,k.hu)(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=u.viewCache,kw(n,u.changes,u.viewCache.eventCache.getNode(),null)}function kw(n,e,t,r){return function(n,e,t,r){const o=[],u=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&u.push(function(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),Sg(n,o,"child_removed",e,r,t),Sg(n,o,"child_added",e,r,t),Sg(n,o,"child_moved",u,r,t),Sg(n,o,"child_changed",e,r,t),Sg(n,o,"value",e,r,t),o}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let bf,Bw;class Fw{constructor(){this.views=new Map}}function ry(n,e,t,r){const o=e.source.queryId;if(null!==o){const u=n.views.get(o);return(0,k.hu)(null!=u,"SyncTree gave us an op for an invalid query."),NT(u,e,t,r)}{let u=[];for(const c of n.views.values())u=u.concat(NT(c,e,t,r));return u}}function iy(n,e,t,r,o){const c=n.views.get(e._queryIdentifier);if(!c){let p=Q_(t,o?r:null),y=!1;p?y=!0:r instanceof jt?(p=Dw(t,r),y=!1):(p=jt.EMPTY_NODE,y=!1);const b=bw(new Jl(p,y,!1),new Jl(r,o,!1));return new xR(e,b)}return c}function Lw(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Gu(n,e){let t=null;for(const r of n.views.values())t=t||RT(r,e);return t}function Vw(n,e){return e._queryParams.loadsAllData()?Ng(n):n.views.get(e._queryIdentifier)}function Uw(n,e){return null!=Vw(n,e)}function Wu(n){return null!=Ng(n)}function Ng(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let kT=1;class FT{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Kn(null),this.pendingWriteTree_={visibleWrites:_a.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function xr(n,e,t,r,o){return function(n,e,t,r,o){(0,k.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:o}),o&&(n.visibleWrites=Ef(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,o),o?Nd(n,new Ql({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function nc(n,e,t=!1){const r=function(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function(n,e){const t=n.allWrites.findIndex(p=>p.writeId===e);(0,k.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let o=r.visible,u=!1,c=n.allWrites.length-1;for(;o&&c>=0;){const p=n.allWrites[c];p.visible&&(c>=t&&yT(p,r.path)?o=!1:Ws(r.path,p.path)&&(u=!0)),c--}return!!o&&(u?(function(n){n.visibleWrites=Rd(n.allWrites,wR,nn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=yR(n.visibleWrites,r.path):ui(r.children,y=>{n.visibleWrites=yR(n.visibleWrites,Hn(r.path,y))}),!0))}(n.pendingWriteTree_,e)){let u=new Kn(null);return null!=r.snap?u=u.set(nn(),!0):ui(r.children,c=>{u=u.set(new wn(c),!0)}),Nd(n,new Dg(r.path,u,t))}return[]}function Mg(n,e,t){return Nd(n,new Ql({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function sy(n,e,t,r){const o=e._path,u=n.syncPointTree_.get(o);let c=[];if(u&&("default"===e._queryIdentifier||Uw(u,e))){const p=function(n,e,t,r){const o=e._queryIdentifier,u=[];let c=[];const p=Wu(n);if("default"===o)for(const[y,b]of n.views.entries())c=c.concat(Ow(b,t,r)),ny(b)&&(n.views.delete(y),b.query._queryParams.loadsAllData()||u.push(b.query));else{const y=n.views.get(o);y&&(c=c.concat(Ow(y,t,r)),ny(y)&&(n.views.delete(o),y.query._queryParams.loadsAllData()||u.push(y.query)))}return p&&!Wu(n)&&u.push(new((0,k.hu)(bf,"Reference.ts has not been loaded"),bf)(e._repo,e._path)),{removed:u,events:c}}(u,e,t,r);(function(n){return 0===n.views.size})(u)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const y=p.removed;c=p.events;const b=-1!==y.findIndex(x=>x._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(o,(x,O)=>Wu(O));if(b&&!S){const x=n.syncPointTree_.subtree(o);if(!x.isEmpty()){const O=function(n){return n.fold((e,t,r)=>{if(t&&Wu(t))return[Ng(t)];{let o=[];return t&&(o=Lw(t)),ui(r,(u,c)=>{o=o.concat(c)}),o}})}(x);for(let $=0;$<O.length;++$){const K=O[$],ye=K.query,xe=oy(n,K);n.listenProvider_.startListening(If(ye),zs(n,ye),xe.hashFn,xe.onComplete)}}}if(!S&&y.length>0&&!r)if(b){const x=null;n.listenProvider_.stopListening(If(e),x)}else y.forEach(x=>{const O=n.queryToTagMap.get(ay(x));n.listenProvider_.stopListening(If(x),O)});!function(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const o=ay(r),u=n.queryToTagMap.get(o);n.queryToTagMap.delete(o),n.tagToQueryMap.delete(u)}}}(n,y)}return c}function BT(n,e,t){const r=e._path;let o=null,u=!1;n.syncPointTree_.foreachOnPath(r,(x,O)=>{const $=ts(x,r);o=o||Gu(O,$),u=u||Wu(O)});let p,c=n.syncPointTree_.get(r);c?(u=u||Wu(c),o=o||Gu(c,nn())):(c=new Fw,n.syncPointTree_=n.syncPointTree_.set(r,c)),null!=o?p=!0:(p=!1,o=jt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((O,$)=>{const K=Gu($,nn());K&&(o=o.updateImmediateChild(O,K))}));const y=Uw(c,e);if(!y&&!e._queryParams.loadsAllData()){const x=ay(e);(0,k.hu)(!n.queryToTagMap.has(x),"View does not exist, but we have a tag");const O=kT++;n.queryToTagMap.set(x,O),n.tagToQueryMap.set(O,x)}let S=function(n,e,t,r,o,u){const c=iy(n,e,r,o,u);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function(n,e){n.eventRegistrations_.push(e)}(c,t),function(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Fn,(u,c)=>{r.push(ff(u,c))}),t.isFullyInitialized()&&r.push(hT(t.getNode())),kw(n,r,t.getNode(),e)}(c,t)}(c,e,t,Z_(n.pendingWriteTree_,r),o,p);if(!y&&!u){const x=Vw(c,e);S=S.concat(function(n,e,t){const r=e._path,o=zs(n,e),u=oy(n,t),c=n.listenProvider_.startListening(If(e),o,u.hashFn,u.onComplete),p=n.syncPointTree_.subtree(r);if(o)(0,k.hu)(!Wu(p.value),"If we're adding a query, it shouldn't be shadowed");else{const y=p.fold((b,S,x)=>{if(!Jt(b)&&S&&Wu(S))return[Ng(S).query];{let O=[];return S&&(O=O.concat(Lw(S).map($=>$.query))),ui(x,($,K)=>{O=O.concat(K)}),O}});for(let b=0;b<y.length;++b){const S=y[b];n.listenProvider_.stopListening(If(S),zs(n,S))}}return c}(n,e,x))}return S}function Pg(n,e,t){const o=n.pendingWriteTree_,u=n.syncPointTree_.findOnPath(e,(c,p)=>{const b=Gu(p,ts(c,e));if(b)return b});return vT(o,e,u,t,!0)}function Nd(n,e){return VR(e,n.syncPointTree_,null,Z_(n.pendingWriteTree_,nn()))}function VR(n,e,t,r){if(Jt(n.path))return jw(n,e,t,r);{const o=e.get(nn());null==t&&null!=o&&(t=Gu(o,nn()));let u=[];const c=Wt(n.path),p=n.operationForChild(c),y=e.children.get(c);if(y&&p){const b=t?t.getImmediateChild(c):null,S=IT(r,c);u=u.concat(VR(p,y,b,S))}return o&&(u=u.concat(ry(o,n,r,t))),u}}function jw(n,e,t,r){const o=e.get(nn());null==t&&null!=o&&(t=Gu(o,nn()));let u=[];return e.children.inorderTraversal((c,p)=>{const y=t?t.getImmediateChild(c):null,b=IT(r,c),S=n.operationForChild(c);S&&(u=u.concat(jw(S,p,y,b)))}),o&&(u=u.concat(ry(o,n,r,t))),u}function oy(n,e){const t=e.query,r=zs(n,t);return{hashFn:()=>(function(n){return n.viewCache_.serverCache.getNode()}(e)||jt.EMPTY_NODE).hash(),onComplete:o=>{if("ok"===o)return r?function(n,e,t){const r=$w(n,t);if(r){const o=Mo(r),u=o.path,c=o.queryId,p=ts(u,e);return Ks(n,u,new vf(q_(c),p))}return[]}(n,t._path,r):function(n,e){return Nd(n,new vf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const u=function(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(o,t);return sy(n,t,null,u)}}}}function zs(n,e){const t=ay(e);return n.queryToTagMap.get(t)}function ay(n){return n._path.toString()+"$"+n._queryIdentifier}function $w(n,e){return n.tagToQueryMap.get(e)}function Mo(n){const e=n.indexOf("$");return(0,k.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new wn(n.substr(0,e))}}function Ks(n,e,t){const r=n.syncPointTree_.get(e);return(0,k.hu)(r,"Missing sync point for query tag that we're tracking"),ry(r,t,Z_(n.pendingWriteTree_,e),null)}function If(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new((0,k.hu)(Bw,"Reference.ts has not been loaded"),Bw)(n._repo,n._path):n}class Hw{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Hw(t)}node(){return this.node_}}class Gw{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Hn(this.path_,e);return new Gw(this.syncTree_,t)}node(){return Pg(this.syncTree_,this.path_)}}const Tf=function(n,e,t){return n&&"object"==typeof n?((0,k.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?jR(n[".sv"],e,t):"object"==typeof n[".sv"]?$T(n[".sv"],e):void(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},jR=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:(0,k.hu)(!1,"Unexpected server value: "+n)}},$T=function(n,e,t){n.hasOwnProperty("increment")||(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,k.hu)(!1,"Unexpected increment value: "+r);const o=e.node();if((0,k.hu)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;const c=o.getValue();return"number"!=typeof c?r:c+r},HT=function(n,e,t,r){return ly(e,new Gw(t,n),r)},uy=function(n,e,t){return ly(n,new Hw(e),t)};function ly(n,e,t){const r=n.getPriority().val(),o=Tf(r,e.getImmediateChild(".priority"),t);let u;if(n.isLeafNode()){const c=n,p=Tf(c.getValue(),e,t);return p!==c.getValue()||o!==c.getPriority().val()?new df(p,wr(o)):n}{const c=n;return u=c,o!==c.getPriority().val()&&(u=u.updatePriority(new df(o))),c.forEachChild(Fn,(p,y)=>{const b=ly(y,e.getImmediateChild(p),t);b!==y&&(u=u.updateImmediateChild(p,b))}),u}}class Df{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function cy(n,e){let t=e instanceof wn?e:new wn(e),r=n,o=Wt(t);for(;null!==o;){const u=(0,k.DV)(r.node.children,o)||{children:{},childCount:0};r=new Df(o,r,u),t=Dn(t),o=Wt(t)}return r}function rc(n){return n.node.value}function dy(n,e){n.node.value=e,py(n)}function hy(n){return n.node.childCount>0}function Sf(n,e){ui(n.node.children,(t,r)=>{e(new Df(t,n,r))})}function qw(n,e,t,r){t&&!r&&e(n),Sf(n,o=>{qw(o,e,!0,r)}),t&&r&&e(n)}function Af(n){return new wn(null===n.parent?n.name:Af(n.parent)+"/"+n.name)}function py(n){null!==n.parent&&function(n,e,t){const r=function(n){return void 0===rc(n)&&!hy(n)}(t),o=(0,k.r3)(n.node.children,e);r&&o?(delete n.node.children[e],n.node.childCount--,py(n)):!r&&!o&&(n.node.children[e]=t.node,n.node.childCount++,py(n))}(n.parent,n.name,n)}const qT=/[\[\].#$\/\u0000-\u001F\u007F]/,zT=/[\[\].#$\u0000-\u001F\u007F]/,zw=10485760,gy=function(n){return"string"==typeof n&&0!==n.length&&!qT.test(n)},KT=function(n){return"string"==typeof n&&0!==n.length&&!zT.test(n)},Og=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!nf(n)||n&&"object"==typeof n&&(0,k.r3)(n,".sv")},tu=function(n,e,t,r){r&&void 0===e||kg((0,k.gK)(n,"value"),e,t)},kg=function(n,e,t){const r=t instanceof wn?new sR(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Id(r));if("function"==typeof e)throw new Error(n+"contains a function "+Id(r)+" with contents = "+e.toString());if(nf(e))throw new Error(n+"contains "+e.toString()+" "+Id(r));if("string"==typeof e&&e.length>zw/3&&(0,k.ug)(e)>zw)throw new Error(n+"contains a string greater than "+zw+" utf8 bytes "+Id(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let o=!1,u=!1;if(ui(e,(c,p)=>{if(".value"===c)o=!0;else if(".priority"!==c&&".sv"!==c&&(u=!0,!gy(c)))throw new Error(n+" contains an invalid key ("+c+") "+Id(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.ug)(e),tT(n)})(r,c),kg(n,p,r),function(n){const e=n.parts_.pop();n.byteLength_-=(0,k.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),o&&u)throw new Error(n+' contains ".value" child '+Id(r)+" in addition to actual children.")}},ZT=function(n,e,t,r){if(r&&void 0===e)return;const o=(0,k.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");const u=[];ui(e,(c,p)=>{const y=new wn(c);if(kg(o,p,Hn(t,y)),".priority"===B_(y)&&!Og(p))throw new Error(o+"contains an invalid value for '"+y.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");u.push(y)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const u=lf(r);for(let c=0;c<u.length;c++)if((".priority"!==u[c]||c!==u.length-1)&&!gy(u[c]))throw new Error(n+"contains an invalid key ("+u[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(eT);let o=null;for(t=0;t<e.length;t++){if(r=e[t],null!==o&&Ws(o,r))throw new Error(n+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(o,u)},Kw=function(n,e,t){if(!t||void 0!==e){if(nf(e))throw new Error((0,k.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Og(e))throw new Error((0,k.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Fg=function(n,e,t,r){if(!(r&&void 0===t||gy(t)))throw new Error((0,k.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Lg=function(n,e,t,r){if(!(r&&void 0===t||KT(t)))throw new Error((0,k.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Po=function(n,e){if(".info"===Wt(e))throw new Error(n+" failed = Can't modify data under /.info/")},YT=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!gy(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),KT(n)}(t))throw new Error((0,k.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class WR{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function my(n,e){let t=null;for(let r=0;r<e.length;r++){const o=e[r],u=o.getPath();null!==t&&!Wl(u,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:u}),t.events.push(o)}t&&n.eventLists_.push(t)}function Zw(n,e,t){my(n,t),Yw(n,r=>Wl(r,e))}function Zs(n,e,t){my(n,t),Yw(n,r=>Ws(r,e)||Ws(e,r))}function Yw(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const o=n.eventLists_[r];o&&(e(o.path)?(QT(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function QT(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();tf&&zn("event: "+t.toString()),wd(r)}}}const Qw="repo_interrupt";class XT{constructor(e,t,r,o){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new WR,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Hu(),this.transactionQueueTree_=new Df,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Jw(n){const t=n.infoData_.getNode(new wn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function xf(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:Jw(n)})}function _y(n,e,t,r,o){n.dataUpdateCount++;const u=new wn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(o)if(r){const y=(0,k.UI)(t,b=>wr(b));c=function(n,e,t,r){const o=$w(n,r);if(o){const u=Mo(o),c=u.path,p=u.queryId,y=ts(c,e),b=Kn.fromObject(t);return Ks(n,c,new Ad(q_(p),y,b))}return[]}(n.serverSyncTree_,u,y,o)}else{const y=wr(t);c=function(n,e,t,r){const o=$w(n,r);if(null!=o){const u=Mo(o),c=u.path,p=u.queryId,y=ts(c,e);return Ks(n,c,new Ql(q_(p),y,t))}return[]}(n.serverSyncTree_,u,y,o)}else if(r){const y=(0,k.UI)(t,b=>wr(b));c=function(n,e,t){const r=Kn.fromObject(t);return Nd(n,new Ad({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,u,y)}else{const y=wr(t);c=Mg(n.serverSyncTree_,u,y)}let p=u;c.length>0&&(p=ic(n,u)),Zs(n.eventQueue_,p,c)}function Xw(n,e){e0(n,"connected",e),!1===e&&function(n){Nf(n,"onDisconnectEvents");const e=xf(n),t=Hu();Yl(n.onDisconnect_,nn(),(o,u)=>{const c=HT(o,u,n.serverSyncTree_,e);ma(t,o,c)});let r=[];Yl(t,nn(),(o,u)=>{r=r.concat(Mg(n.serverSyncTree_,o,u));const c=l0(n,o);ic(n,c)}),n.onDisconnect_=Hu(),Zs(n.eventQueue_,nn(),r)}(n)}function e0(n,e,t){const r=new wn("/.info/"+e),o=wr(t);n.infoData_.updateSnapshot(r,o);const u=Mg(n.infoSyncTree_,r,o);Zs(n.eventQueue_,r,u)}function yy(n){return n.nextWriteId_++}function tD(n,e,t,r,o){Nf(n,"set",{path:e.toString(),value:t,priority:r});const u=xf(n),c=wr(t,r),p=Pg(n.serverSyncTree_,e),y=uy(c,p,u),b=yy(n),S=xr(n.serverSyncTree_,e,y,b,!0);my(n.eventQueue_,S),n.server_.put(e.toString(),c.val(!0),(O,$)=>{const K="ok"===O;K||bi("set at "+e+" failed: "+O);const ye=nc(n.serverSyncTree_,b,!K);Zs(n.eventQueue_,e,ye),va(0,o,O,$)});const x=l0(n,e);ic(n,x),Zs(n.eventQueue_,x,[])}function nD(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,o)=>{"ok"===r&&Zl(n.onDisconnect_,e),va(0,t,r,o)})}function n0(n,e,t,r){const o=wr(t);n.server_.onDisconnectPut(e.toString(),o.val(!0),(u,c)=>{"ok"===u&&ma(n.onDisconnect_,e,o),va(0,r,u,c)})}function r0(n,e,t){let r;r=".info"===Wt(e._path)?sy(n.infoSyncTree_,e,t):sy(n.serverSyncTree_,e,t),Zw(n.eventQueue_,e._path,r)}function rD(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Qw)}function Nf(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),zn(t,...e)}function va(n,e,t,r){e&&wd(()=>{if("ok"===t)e(null);else{const o=(t||"error").toUpperCase();let u=o;r&&(u+=": "+r);const c=new Error(u);c.code=o,e(c)}})}function ir(n,e,t){return Pg(n.serverSyncTree_,e,t)||jt.EMPTY_NODE}function s0(n,e=n.transactionQueueTree_){if(e||Vg(n,e),rc(e)){const t=a0(n,e);(0,k.hu)(t.length>0,"Sending zero length transaction queue"),t.every(o=>0===o.status)&&function(n,e,t){const r=t.map(b=>b.currentWriteId),o=ir(n,e,r);let u=o;const c=o.hash();for(let b=0;b<t.length;b++){const S=t[b];(0,k.hu)(0===S.status,"tryToSendTransactionQueue_: items in queue should all be run."),S.status=1,S.retryCount++;const x=ts(e,S.path);u=u.updateChild(x,S.currentOutputSnapshotRaw)}const p=u.val(!0),y=e;n.server_.put(y.toString(),p,b=>{Nf(n,"transaction put response",{path:y.toString(),status:b});let S=[];if("ok"===b){const x=[];for(let O=0;O<t.length;O++)t[O].status=2,S=S.concat(nc(n.serverSyncTree_,t[O].currentWriteId)),t[O].onComplete&&x.push(()=>t[O].onComplete(null,!0,t[O].currentOutputSnapshotResolved)),t[O].unwatcher();Vg(n,cy(n.transactionQueueTree_,e)),s0(n,n.transactionQueueTree_),Zs(n.eventQueue_,e,S);for(let O=0;O<x.length;O++)wd(x[O])}else{if("datastale"===b)for(let x=0;x<t.length;x++)t[x].status=3===t[x].status?4:0;else{bi("transaction at "+y.toString()+" failed: "+b);for(let x=0;x<t.length;x++)t[x].status=4,t[x].abortReason=b}ic(n,e)}},c)}(n,Af(e),t)}else hy(e)&&Sf(e,t=>{s0(n,t)})}function ic(n,e){const t=o0(n,e),r=Af(t);return function(n,e,t){if(0===e.length)return;const r=[];let o=[];const c=e.filter(p=>0===p.status).map(p=>p.currentWriteId);for(let p=0;p<e.length;p++){const y=e[p],b=ts(t,y.path);let x,S=!1;if((0,k.hu)(null!==b,"rerunTransactionsUnderNode_: relativePath should not be null."),4===y.status)S=!0,x=y.abortReason,o=o.concat(nc(n.serverSyncTree_,y.currentWriteId,!0));else if(0===y.status)if(y.retryCount>=25)S=!0,x="maxretry",o=o.concat(nc(n.serverSyncTree_,y.currentWriteId,!0));else{const O=ir(n,y.path,c);y.currentInputSnapshot=O;const $=e[p].update(O.val());if(void 0!==$){kg("transaction failed: Data returned ",$,y.path);let K=wr($);"object"==typeof $&&null!=$&&(0,k.r3)($,".priority")||(K=K.updatePriority(O.getPriority()));const xe=y.currentWriteId,pt=xf(n),dt=uy(K,O,pt);y.currentOutputSnapshotRaw=K,y.currentOutputSnapshotResolved=dt,y.currentWriteId=yy(n),c.splice(c.indexOf(xe),1),o=o.concat(xr(n.serverSyncTree_,y.path,dt,y.currentWriteId,y.applyLocally)),o=o.concat(nc(n.serverSyncTree_,xe,!0))}else S=!0,x="nodata",o=o.concat(nc(n.serverSyncTree_,y.currentWriteId,!0))}Zs(n.eventQueue_,t,o),o=[],S&&(e[p].status=2,setTimeout(e[p].unwatcher,Math.floor(0)),e[p].onComplete&&r.push("nodata"===x?()=>e[p].onComplete(null,!1,e[p].currentInputSnapshot):()=>e[p].onComplete(new Error(x),!1,null)))}Vg(n,n.transactionQueueTree_);for(let p=0;p<r.length;p++)wd(r[p]);s0(n,n.transactionQueueTree_)}(n,a0(n,t),r),r}function o0(n,e){let t,r=n.transactionQueueTree_;for(t=Wt(e);null!==t&&void 0===rc(r);)r=cy(r,t),t=Wt(e=Dn(e));return r}function a0(n,e){const t=[];return u0(n,e,t),t.sort((r,o)=>r.order-o.order),t}function u0(n,e,t){const r=rc(e);if(r)for(let o=0;o<r.length;o++)t.push(r[o]);Sf(e,o=>{u0(n,o,t)})}function Vg(n,e){const t=rc(e);if(t){let r=0;for(let o=0;o<t.length;o++)2!==t[o].status&&(t[r]=t[o],r++);t.length=r,dy(e,t.length>0?t:void 0)}Sf(e,r=>{Vg(n,r)})}function l0(n,e){const t=Af(o0(n,e)),r=cy(n.transactionQueueTree_,e);return function(n,e,t){let r=n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,o=>{c0(n,o)}),c0(n,r),qw(r,o=>{c0(n,o)}),t}function c0(n,e){const t=rc(e);if(t){const r=[];let o=[],u=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,k.hu)(u===c-1,"All SENT items should be at beginning of queue."),u=c,t[c].status=3,t[c].abortReason="set"):((0,k.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),o=o.concat(nc(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===u?dy(e,void 0):t.length=u+1,Zs(n.eventQueue_,Af(e),o);for(let c=0;c<r.length;c++)wd(r[c])}}const d0=function(n,e){const t=ZR(n),r=t.namespace;return"firebase.com"===t.domain&&ha(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&ha("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&bi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new zE(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new wn(t.pathString)}},ZR=function(n){let e="",t="",r="",o="",u="",c=!0,p="https",y=443;if("string"==typeof n){let b=n.indexOf("//");b>=0&&(p=n.substring(0,b-1),n=n.substring(b+2));let S=n.indexOf("/");-1===S&&(S=n.length);let x=n.indexOf("?");-1===x&&(x=n.length),e=n.substring(0,Math.min(S,x)),S<x&&(o=function(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let o=t[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch(u){}e+="/"+o}return e}(n.substring(S,x)));const O=function(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):bi(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,x)));b=e.indexOf(":"),b>=0?(c="https"===p||"wss"===p,y=parseInt(e.substring(b+1),10)):b=e.length;const $=e.slice(0,b);if("localhost"===$.toLowerCase())t="localhost";else if($.split(".").length<=2)t=$;else{const K=e.indexOf(".");r=e.substring(0,K).toLowerCase(),t=e.substring(K+1),u=r}"ns"in O&&(u=O.ns)}return{host:e,port:y,domain:t,subdomain:r,secure:c,scheme:p,pathString:o,namespace:u}};class sD{constructor(e,t,r,o){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=o}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.Pz)(this.snapshot.exportVal())}}class Bg{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class h0{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class f0{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new k.BH;return nD(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Po("OnDisconnect.remove",this._path);const e=new k.BH;return n0(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Po("OnDisconnect.set",this._path),tu("OnDisconnect.set",e,this._path,!1);const t=new k.BH;return n0(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Po("OnDisconnect.setWithPriority",this._path),tu("OnDisconnect.setWithPriority",e,this._path,!1),Kw("OnDisconnect.setWithPriority",t,!1);const r=new k.BH;return function(n,e,t,r,o){const u=wr(t,r);n.server_.onDisconnectPut(e.toString(),u.val(!0),(c,p)=>{"ok"===c&&ma(n.onDisconnect_,e,u),va(0,o,c,p)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Po("OnDisconnect.update",this._path),ZT("OnDisconnect.update",e,this._path,!1);const t=new k.BH;return function(n,e,t,r){if((0,k.xb)(t))return zn("onDisconnect().update() called with empty data.  Don't do anything."),void va(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(o,u)=>{"ok"===o&&ui(t,(c,p)=>{const y=wr(p);ma(n.onDisconnect_,Hn(e,c),y)}),va(0,r,o,u)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class is{constructor(e,t,r,o){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=o}get key(){return Jt(this._path)?null:B_(this._path)}get ref(){return new ko(this._repo,this._path)}get _queryIdentifier(){const e=Tg(this._queryParams),t=VE(e);return"{}"===t?"default":t}get _queryObject(){return Tg(this._queryParams)}isEqual(e){if(!((e=(0,k.m9)(e))instanceof is))return!1;const t=this._repo===e._repo,r=Wl(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function wy(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Oo(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===pa){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Vi)throw new Error(r);if("string"!=typeof e)throw new Error(o)}if(n.hasEnd()){if(n.getIndexEndName()!==fa)throw new Error(r);if("string"!=typeof t)throw new Error(o)}}else if(n.getIndex()===Fn){if(null!=e&&!Og(e)||null!=t&&!Og(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,k.hu)(n.getIndex()instanceof lT||n.getIndex()===$_,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function sc(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ko extends is{constructor(e,t){super(e,t,new bg,!1)}get parent(){const e=XI(this._path);return null===e?null:new ko(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Pd{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new wn(e),r=oc(this.ref,e);return new Pd(this._node.getChild(t),r,Fn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,o)=>e(new Pd(o,oc(this.ref,r),Fn)))}hasChild(e){const t=new wn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function oD(n,e){return(n=(0,k.m9)(n))._checkNotDeleted("ref"),void 0!==e?oc(n._root,e):n._root}function p0(n,e){(n=(0,k.m9)(n))._checkNotDeleted("refFromURL");const t=d0(e,n._repo.repoInfo_.nodeAdmin);YT("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&ha("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),oD(n,t.path.toString())}function oc(n,e){return null===Wt((n=(0,k.m9)(n))._path)?((t=e)&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Lg("child","path",t,!1)):Lg("child","path",e,!1),new ko(n._repo,Hn(n._path,e));var t}function g0(n,e){n=(0,k.m9)(n),Po("set",n._path),tu("set",e,n._path,!1);const t=new k.BH;return tD(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function v1(n,e){ZT("update",e,n._path,!1);const t=new k.BH;return function(n,e,t,r){Nf(n,"update",{path:e.toString(),value:t});let o=!0;const u=xf(n),c={};if(ui(t,(p,y)=>{o=!1,c[p]=HT(Hn(e,p),wr(y),n.serverSyncTree_,u)}),o)zn("update() called with empty data.  Don't do anything."),va(0,r,"ok",void 0);else{const p=yy(n),y=function(n,e,t,r){!function(n,e,t,r){(0,k.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=mT(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const o=Kn.fromObject(t);return Nd(n,new Ad({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,o))}(n.serverSyncTree_,e,c,p);my(n.eventQueue_,y),n.server_.merge(e.toString(),t,(b,S)=>{const x="ok"===b;x||bi("update at "+e+" failed: "+b);const O=nc(n.serverSyncTree_,p,!x),$=O.length>0?ic(n,e):e;Zs(n.eventQueue_,$,O),va(0,r,b,S)}),ui(t,b=>{const S=l0(n,Hn(e,b));ic(n,S)}),Zs(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function E1(n){return function(n,e){const t=function(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(b,S)=>{const x=ts(b,t);r=r||Gu(S,x)});let o=n.syncPointTree_.get(t);o?r=r||Gu(o,nn()):(o=new Fw,n.syncPointTree_=n.syncPointTree_.set(t,o));const u=null!=r,c=u?new Jl(r,!0,!1):null;return function(n){return z_(n.viewCache_)}(iy(o,e,Z_(n.pendingWriteTree_,e._path),u?c.getNode():jt.EMPTY_NODE,u))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const o=wr(r).withIndex(e._queryParams.getIndex()),u=Mg(n.serverSyncTree_,e._path,o);return Zw(n.eventQueue_,e._path,u),Promise.resolve(o)},r=>(Nf(n,"get for query "+(0,k.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,k.m9)(n))._repo,n).then(e=>new Pd(e,new ko(n._repo,n._path),n._queryParams.getIndex()))}class m0{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new sD("value",this,new Pd(e.snapshotNode,new ko(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Bg(this,e,t):null}matches(e){return e instanceof m0&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class jg{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Bg(this,e,t):null}createEvent(e,t){(0,k.hu)(null!=e.childName,"Child events should have a childName.");const r=oc(new ko(t._repo,t._path),e.childName),o=t._queryParams.getIndex();return new sD(e.type,this,new Pd(e.snapshotNode,r,o),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof jg&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function ac(n,e,t,r,o){let u;if("object"==typeof r&&(u=void 0,o=r),"function"==typeof r&&(u=r),o&&o.onlyOnce){const y=t,b=(S,x)=>{r0(n._repo,n,p),y(S,x)};b.userCallback=t.userCallback,b.context=t.context,t=b}const c=new h0(t,u||void 0),p="value"===e?new m0(c):new jg(e,c);return function(n,e,t){let r;r=".info"===Wt(e._path)?BT(n.infoSyncTree_,e,t):BT(n.serverSyncTree_,e,t),Zw(n.eventQueue_,e._path,r)}(n._repo,n,p),()=>r0(n._repo,n,p)}function _0(n,e,t,r){return ac(n,"value",e,t,r)}function uD(n,e,t,r){return ac(n,"child_added",e,t,r)}function y0(n,e,t,r){return ac(n,"child_changed",e,t,r)}function Mf(n,e,t,r){return ac(n,"child_moved",e,t,r)}function lD(n,e,t,r){return ac(n,"child_removed",e,t,r)}function cD(n,e,t){let r=null;const o=t?new h0(t):null;"value"===e?r=new m0(o):e&&(r=new jg(e,o)),r0(n._repo,n,r)}class Ea{}class dD extends Ea{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){tu("endAt",this._value,e._path,!0);const t=No(e._queryParams,this._value,this._key);if(sc(t),Oo(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new is(e._repo,e._path,t,e._orderByCalled)}}class hD extends Ea{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){tu("endBefore",this._value,e._path,!1);const t=function(n,e,t){let r,o;return n.index_===pa?("string"==typeof e&&(e=H_(e)),o=No(n,e,t)):(r=null==t?Vi:H_(t),o=No(n,e,r)),o.endBeforeSet_=!0,o}(e._queryParams,this._value,this._key);if(sc(t),Oo(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new is(e._repo,e._path,t,e._orderByCalled)}}class fD extends Ea{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){tu("startAt",this._value,e._path,!0);const t=vw(e._queryParams,this._value,this._key);if(sc(t),Oo(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new is(e._repo,e._path,t,e._orderByCalled)}}class tN extends Ea{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){tu("startAfter",this._value,e._path,!1);const t=function(n,e,t){let r;if(n.index_===pa)"string"==typeof e&&(e=dT(e)),r=vw(n,e,t);else{let o;o=null==t?fa:dT(t),r=vw(n,e,o)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(sc(t),Oo(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new is(e._repo,e._path,t,e._orderByCalled)}}class nN extends Ea{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new is(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class rN extends Ea{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new is(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class iN extends Ea{constructor(e){super(),this._path=e}_apply(e){wy(e,"orderByChild");const t=new wn(this._path);if(Jt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new lT(t),o=Qr(e._queryParams,r);return Oo(o),new is(e._repo,e._path,o,!0)}}class sN extends Ea{_apply(e){wy(e,"orderByKey");const t=Qr(e._queryParams,pa);return Oo(t),new is(e._repo,e._path,t,!0)}}class yD extends Ea{_apply(e){wy(e,"orderByPriority");const t=Qr(e._queryParams,Fn);return Oo(t),new is(e._repo,e._path,t,!0)}}class aN extends Ea{_apply(e){wy(e,"orderByValue");const t=Qr(e._queryParams,$_);return Oo(t),new is(e._repo,e._path,t,!0)}}class E0 extends Ea{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(tu("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new dD(this._value,this._key)._apply(new fD(this._value,this._key)._apply(e))}}function Fo(n,...e){let t=(0,k.m9)(n);for(const r of e)t=r._apply(t);return t}(function(n){(0,k.hu)(!bf,"__referenceConstructor has already been defined"),bf=n})(ko),function(n){(0,k.hu)(!Bw,"__referenceConstructor has already been defined"),Bw=n}(ko);const w0={};function ED(n,e,t,r,o){let u=r||n.options.databaseURL;void 0===u&&(n.options.projectId||ha("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),zn("Using default host for project ",n.options.projectId),u=`${n.options.projectId}-default-rtdb.firebaseio.com`);let y,b,c=d0(u,o),p=c.repoInfo;"undefined"!=typeof process&&process.env&&(b=process.env.FIREBASE_DATABASE_EMULATOR_HOST),b?(y=!0,u=`http://${b}?ns=${p.namespace}`,c=d0(u,o),p=c.repoInfo):y=!c.repoInfo.secure;const S=o&&y?new $l($l.OWNER):new OI(n.name,n.options,e);YT("Invalid Firebase Database URL",c),Jt(c.path)||ha("Database URL must point to the root of a Firebase Database (not including a child path).");const x=function(n,e,t,r){let o=w0[e.name];o||(o={},w0[e.name]=o);let u=o[n.toURLString()];return u&&ha("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new XT(n,false,t,r),o[n.toURLString()]=u,u}(p,n,S,new jE(n.name,t));return new wD(x,n)}class wD{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,e,t){if(n.stats_=fg(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new rs(n.repoInfo_,(r,o,u,c)=>{_y(n,r,o,u,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Xw(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new ju(n.repoInfo_,e,(r,o,u,c)=>{_y(n,r,o,u,c)},r=>{Xw(n,r)},r=>{!function(n,e){ui(e,(t,r)=>{e0(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function(n,e){const t=n.toString();return KE[t]||(KE[t]=e()),KE[t]}(n.repoInfo_,()=>new fT(n.stats_,n.server_)),n.infoData_=new ww,n.infoSyncTree_=new FT({startListening:(r,o,u,c)=>{let p=[];const y=n.infoData_.getNode(r._path);return y.isEmpty()||(p=Mg(n.infoSyncTree_,r._path,y),setTimeout(()=>{c("ok")},0)),p},stopListening:()=>{}}),e0(n,"connected",!1),n.serverSyncTree_=new FT({startListening:(r,o,u,c)=>(n.server_.listen(r,u,o,(p,y)=>{const b=c(p,y);Zs(n.eventQueue_,r._path,b)}),[]),stopListening:(r,o)=>{n.server_.unlisten(r,o)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ko(this._repo,nn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,e){const t=w0[e];(!t||t[n.key]!==n)&&ha(`Database ${e}(${n.repoInfo_}) has already been deleted.`),rD(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ha("Cannot call "+e+" on a deleted database.")}}function yN(n,e){Hx(n,e)}class CD{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}ju.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},ju.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},xI(Li.SDK_VERSION),(0,Li._registerComponent)(new ca.wA("database",(e,{instanceIdentifier:t})=>ED(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Li.registerVersion)(Vx,"0.12.8",void 0),(0,Li.registerVersion)(Vx,"0.12.8","esm2017");const ID=new da.Yd("@firebase/database-compat"),TD=function(n){ID.warn("FIREBASE WARNING: "+n)};class AD{constructor(e){this._delegate=e}cancel(e){(0,k.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,k.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,k.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,k.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,k.Dv)("OnDisconnect.set",1,2,arguments.length),(0,k.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),o=>t(o)),r}setWithPriority(e,t,r){(0,k.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,k.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const o=this._delegate.setWithPriority(e,t);return r&&o.then(()=>r(null),u=>r(u)),o}update(e,t){if((0,k.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const o={};for(let u=0;u<e.length;++u)o[""+u]=e[u];e=o,TD("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,k.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),o=>t(o)),r}}class C1{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,k.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class uc{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,k.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,k.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,k.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,k.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,k.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Lg("DataSnapshot.child","path",e,!1),new uc(this._database,this._delegate.child(e))}hasChild(e){return(0,k.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Lg("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,k.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,k.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,k.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new uc(this._database,t)))}hasChildren(){return(0,k.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,k.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,k.Dv)("DataSnapshot.ref",0,0,arguments.length),new Lo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class br{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,o){var u;(0,k.Dv)("Query.on",2,4,arguments.length),(0,k.Wj)("Query.on","callback",t,!1);const c=br.getCancelAndContextArgs_("Query.on",r,o),p=(b,S)=>{t.call(c.context,new uc(this.database,b),S)};p.userCallback=t,p.context=c.context;const y=null===(u=c.cancel)||void 0===u?void 0:u.bind(c.context);switch(e){case"value":return _0(this._delegate,p,y),t;case"child_added":return uD(this._delegate,p,y),t;case"child_removed":return lD(this._delegate,p,y),t;case"child_changed":return y0(this._delegate,p,y),t;case"child_moved":return Mf(this._delegate,p,y),t;default:throw new Error((0,k.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,k.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,k.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,k.Wj)("Query.off","callback",t,!0),(0,k.lb)("Query.off","context",r,!0),t){const o=()=>{};o.userCallback=t,o.context=r,cD(this._delegate,e,o)}else cD(this._delegate,e)}get(){return E1(this._delegate).then(e=>new uc(this.database,e))}once(e,t,r,o){(0,k.Dv)("Query.once",1,4,arguments.length),(0,k.Wj)("Query.once","callback",t,!0);const u=br.getCancelAndContextArgs_("Query.once",r,o),c=new k.BH,p=(b,S)=>{const x=new uc(this.database,b);t&&t.call(u.context,x,S),c.resolve(x)};p.userCallback=t,p.context=u.context;const y=b=>{u.cancel&&u.cancel.call(u.context,b),c.reject(b)};switch(e){case"value":_0(this._delegate,p,y,{onlyOnce:!0});break;case"child_added":uD(this._delegate,p,y,{onlyOnce:!0});break;case"child_removed":lD(this._delegate,p,y,{onlyOnce:!0});break;case"child_changed":y0(this._delegate,p,y,{onlyOnce:!0});break;case"child_moved":Mf(this._delegate,p,y,{onlyOnce:!0});break;default:throw new Error((0,k.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,k.Dv)("Query.limitToFirst",1,1,arguments.length),new br(this.database,Fo(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new nN(n)}(e)))}limitToLast(e){return(0,k.Dv)("Query.limitToLast",1,1,arguments.length),new br(this.database,Fo(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new rN(n)}(e)))}orderByChild(e){return(0,k.Dv)("Query.orderByChild",1,1,arguments.length),new br(this.database,Fo(this._delegate,function(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Lg("orderByChild","path",n,!1),new iN(n)}(e)))}orderByKey(){return(0,k.Dv)("Query.orderByKey",0,0,arguments.length),new br(this.database,Fo(this._delegate,new sN))}orderByPriority(){return(0,k.Dv)("Query.orderByPriority",0,0,arguments.length),new br(this.database,Fo(this._delegate,new yD))}orderByValue(){return(0,k.Dv)("Query.orderByValue",0,0,arguments.length),new br(this.database,Fo(this._delegate,new aN))}startAt(e=null,t){return(0,k.Dv)("Query.startAt",0,2,arguments.length),new br(this.database,Fo(this._delegate,function(n=null,e){return Fg("startAt","key",e,!0),new fD(n,e)}(e,t)))}startAfter(e=null,t){return(0,k.Dv)("Query.startAfter",0,2,arguments.length),new br(this.database,Fo(this._delegate,function(n,e){return Fg("startAfter","key",e,!0),new tN(n,e)}(e,t)))}endAt(e=null,t){return(0,k.Dv)("Query.endAt",0,2,arguments.length),new br(this.database,Fo(this._delegate,function(n,e){return Fg("endAt","key",e,!0),new dD(n,e)}(e,t)))}endBefore(e=null,t){return(0,k.Dv)("Query.endBefore",0,2,arguments.length),new br(this.database,Fo(this._delegate,function(n,e){return Fg("endBefore","key",e,!0),new hD(n,e)}(e,t)))}equalTo(e,t){return(0,k.Dv)("Query.equalTo",1,2,arguments.length),new br(this.database,Fo(this._delegate,function(n,e){return Fg("equalTo","key",e,!0),new E0(n,e)}(e,t)))}toString(){return(0,k.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,k.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,k.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof br))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const o={cancel:void 0,context:void 0};if(t&&r)o.cancel=t,(0,k.Wj)(e,"cancel",o.cancel,!0),o.context=r,(0,k.lb)(e,"context",o.context,!0);else if(t)if("object"==typeof t&&null!==t)o.context=t;else{if("function"!=typeof t)throw new Error((0,k.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");o.cancel=t}return o}get ref(){return new Lo(this.database,new ko(this._delegate._repo,this._delegate._path))}}class Lo extends br{constructor(e,t){super(e,new is(t._repo,t._path,new bg,!1)),this.database=e,this._delegate=t}getKey(){return(0,k.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,k.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Lo(this.database,oc(this._delegate,e))}getParent(){(0,k.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Lo(this.database,e):null}getRoot(){return(0,k.Dv)("Reference.root",0,0,arguments.length),new Lo(this.database,this._delegate.root)}set(e,t){(0,k.Dv)("Reference.set",1,2,arguments.length),(0,k.Wj)("Reference.set","onComplete",t,!0);const r=g0(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}update(e,t){if((0,k.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const o={};for(let u=0;u<e.length;++u)o[""+u]=e[u];e=o,TD("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Po("Reference.update",this._delegate._path),(0,k.Wj)("Reference.update","onComplete",t,!0);const r=v1(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}setWithPriority(e,t,r){(0,k.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,k.Wj)("Reference.setWithPriority","onComplete",r,!0);const o=function(n,e,t){if(Po("setWithPriority",n._path),tu("setWithPriority",e,n._path,!1),Kw("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new k.BH;return tD(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&o.then(()=>r(null),u=>r(u)),o}remove(e){(0,k.Dv)("Reference.remove",0,1,arguments.length),(0,k.Wj)("Reference.remove","onComplete",e,!0);const t=function(n){return Po("remove",n._path),g0(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,k.Dv)("Reference.transaction",1,3,arguments.length),(0,k.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,k.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,k.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const o=function(n,e,t){var r;if(n=(0,k.m9)(n),Po("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const o=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,u=new k.BH,p=_0(n,()=>{});return function(n,e,t,r,o,u){Nf(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:Bx(),applyLocally:u,retryCount:0,unwatcher:o,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},p=ir(n,e,void 0);c.currentInputSnapshot=p;const y=c.update(p.val());if(void 0===y)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{kg("transaction failed: Data returned ",y,c.path),c.status=0;const b=cy(n.transactionQueueTree_,e),S=rc(b)||[];let x;S.push(c),dy(b,S),"object"==typeof y&&null!==y&&(0,k.r3)(y,".priority")?(x=(0,k.DV)(y,".priority"),(0,k.hu)(Og(x),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):x=(Pg(n.serverSyncTree_,e)||jt.EMPTY_NODE).getPriority().val();const O=xf(n),$=wr(y,x),K=uy($,p,O);c.currentOutputSnapshotRaw=$,c.currentOutputSnapshotResolved=K,c.currentWriteId=yy(n);const ye=xr(n.serverSyncTree_,e,K,c.currentWriteId,c.applyLocally);Zs(n.eventQueue_,e,ye),s0(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(y,b,S)=>{let x=null;y?u.reject(y):(x=new Pd(S,new ko(n._repo,n._path),Fn),u.resolve(new CD(b,x)))},p,o),u.promise}(this._delegate,e,{applyLocally:r}).then(u=>new C1(u.committed,new uc(this.database,u.snapshot)));return t&&o.then(u=>t(null,u.committed,u.snapshot),u=>t(u,!1,null)),o}setPriority(e,t){(0,k.Dv)("Reference.setPriority",1,2,arguments.length),(0,k.Wj)("Reference.setPriority","onComplete",t,!0);const r=function(n,e){n=(0,k.m9)(n),Po("setPriority",n._path),Kw("setPriority",e,!1);const t=new k.BH;return tD(n._repo,Hn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}push(e,t){(0,k.Dv)("Reference.push",0,2,arguments.length),(0,k.Wj)("Reference.push","onComplete",t,!0);const r=function(n,e){n=(0,k.m9)(n),Po("push",n._path),tu("push",e,n._path,!0);const t=Jw(n._repo),r=_w(t),o=oc(n,r),u=oc(n,r);let c;return c=null!=e?g0(u,e).then(()=>u):Promise.resolve(u),o.then=c.then.bind(c),o.catch=c.then.bind(c,void 0),o}(this._delegate,e),o=r.then(c=>new Lo(this.database,c));t&&o.then(()=>t(null),c=>t(c));const u=new Lo(this.database,r);return u.then=o.then.bind(o),u.catch=o.catch.bind(o,void 0),u}onDisconnect(){return Po("Reference.onDisconnect",this._delegate._path),new AD(new f0(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Od{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function(n,e,t,r={}){(n=(0,k.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&ha("Cannot call useEmulator() after instance has already been initialized.");const o=n._repoInternal;let u;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&ha('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new $l($l.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,k.Sg)(r.mockUserToken,n.app.options.projectId);u=new $l(c)}!function(n,e,t,r){n.repoInfo_=new zE(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(o,e,t,u)}(this._delegate,e,t,r)}ref(e){if((0,k.Dv)("database.ref",0,1,arguments.length),e instanceof Lo){const t=p0(this._delegate,e.toString());return new Lo(this,t)}{const t=oD(this._delegate,e);return new Lo(this,t)}}refFromURL(e){(0,k.Dv)("database.refFromURL",1,1,arguments.length);const r=p0(this._delegate,e);return new Lo(this,r)}goOffline(){return(0,k.Dv)("database.goOffline",0,0,arguments.length),function(n){(n=(0,k.m9)(n))._checkNotDeleted("goOffline"),rD(n._repo)}(this._delegate)}goOnline(){return(0,k.Dv)("database.goOnline",0,0,arguments.length),function(n){(n=(0,k.m9)(n))._checkNotDeleted("goOnline"),function(n){n.persistentConnection_&&n.persistentConnection_.resume(Qw)}(n._repo)}(this._delegate)}}Od.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:n=>function(n){return{".sv":{increment:n}}}(n)};var bN=Object.freeze({__proto__:null,initStandalone:function({app:n,url:e,version:t,customAuthImpl:r,namespace:o,nodeAdmin:u=!1}){xI(t);const c=new ca.zt("auth-internal",new ca.H0("database-standalone"));return c.setComponent(new ca.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Od(ED(n,c,void 0,e,u),n),namespace:o}}});const Of=Od.ServerValue;!function(n){n.INTERNAL.registerComponent(new ca.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),o=e.getProvider("database").getImmediate({identifier:t});return new Od(o,r)},"PUBLIC").setServiceProps({Reference:Lo,Query:br,Database:Od,DataSnapshot:uc,enableLogging:yN,INTERNAL:bN,ServerValue:Of}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.8")}(AI.Z);var Cy=V(309),IN=V(7771),nu=V(8858);class xD extends Mi.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new I1(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,r=t?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,u=r.length;let c;if(this.closed)throw new xu.N;if(this.isStopped||this.hasError?c=s_.w.EMPTY:(this.observers.push(e),c=new nu.W(this,e)),o&&e.add(e=new Cy.ht(e,o)),t)for(let p=0;p<u&&!e.closed;p++)e.next(r[p]);else for(let p=0;p<u&&!e.closed;p++)e.next(r[p].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),c}_getNow(){return(this.scheduler||IN.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,r=this._windowTime,o=this._events,u=o.length;let c=0;for(;c<u&&!(e-o[c].time<r);)c++;return u>t&&(c=Math.max(c,u-t)),c>0&&o.splice(0,c),o}}class I1{constructor(e,t){this.time=e,this.value=t}}function $g(n,e,t){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},o=>o.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:r}){let o,c,u=0,p=!1,y=!1;return function(S){let x;u++,!o||p?(p=!1,o=new xD(n,e,r),x=o.subscribe(this),c=S.subscribe({next(O){o.next(O)},error(O){p=!0,o.error(O)},complete(){y=!0,c=void 0,o.complete()}}),y&&(c=void 0)):x=o.subscribe(this),this.add(()=>{u--,x.unsubscribe(),x=void 0,c&&!y&&t&&0===u&&(c.unsubscribe(),c=void 0,o=void 0)})}}(r))}function RD(n,e){return e?_r(()=>n,e):_r(()=>n)}var ND=V(2639);V(2329);const Gg=new Map,PN={activated:!1,tokenObservers:[]},kD={initialized:!1,enabled:!1};function Rr(n){return Gg.get(n)||PN}function Ts(n,e){Gg.set(n,e)}function lc(){return kD}class LN{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ee.Z)(function*(){t.stop();try{t.pending=new k.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new k.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ss=new k.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function LD(n){if(!Rr(n).activated)throw ss.create("use-before-activation",{appName:n.name})}function A0(n,e){return x0.apply(this,arguments)}function x0(){return(x0=(0,Ee.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const x=yield o.getHeartbeatsHeader();x&&(r["X-Firebase-Client"]=x)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,p;try{c=yield fetch(n,u)}catch(x){throw ss.create("fetch-network-error",{originalErrorMessage:x.message})}if(200!==c.status)throw ss.create("fetch-status-error",{httpStatus:c.status});try{p=yield c.json()}catch(x){throw ss.create("fetch-parse-error",{originalErrorMessage:x.message})}const y=p.ttl.match(/^([\d.]+)(s)$/);if(!y||!y[2]||isNaN(Number(y[1])))throw ss.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const b=1e3*Number(y[1]),S=Date.now();return{token:p.attestationToken,expireTimeMillis:S+b,issuedAtTimeMillis:S}})).apply(this,arguments)}function kd(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const Sy="firebase-app-check-store";let Fd=null;function BD(){return Fd||(Fd=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(ss.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{const o=r.target.result;switch(r.oldVersion){case 0:o.createObjectStore(Sy,{keyPath:"compositeKey"})}}}catch(t){e(ss.create("storage-open",{originalErrorMessage:t.message}))}}),Fd)}function Ay(){return(Ay=(0,Ee.Z)(function*(n,e){const r=(yield BD()).transaction(Sy,"readwrite"),u=r.objectStore(Sy).put({compositeKey:n,value:e});return new Promise((c,p)=>{u.onsuccess=y=>{c()},r.onerror=y=>{var b;p(ss.create("storage-set",{originalErrorMessage:null===(b=y.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const Wg=new da.Yd("@firebase/app-check");function qg(n,e){return(0,k.hl)()?function(n,e){return function(n,e){return Ay.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Wg.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function bn(){return lc().enabled}function qu(){return dc.apply(this,arguments)}function dc(){return(dc=(0,Ee.Z)(function*(){const n=lc();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const O1={error:"UNKNOWN_ERROR"};function Vt(n){return k.US.encodeString(JSON.stringify(n),!1)}function os(n){return Kg.apply(this,arguments)}function Kg(){return(Kg=(0,Ee.Z)(function*(n,e=!1){const t=n.app;LD(t);const r=Rr(t);let u,o=r.token;if(!o){const y=yield r.cachedTokenPromise;y&&xy(y)&&(o=y)}if(!e&&o&&xy(o))return{token:o.token};let p,c=!1;if(bn()){r.exchangeTokenPromise||(r.exchangeTokenPromise=A0(kd(t,yield qu()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),c=!0);const y=yield r.exchangeTokenPromise;return yield qg(t,y),Ts(t,Object.assign(Object.assign({},r),{token:y})),{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(y=>(r.exchangeTokenPromise=void 0,y)),c=!0),o=yield r.exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?Wg.warn(y.message):Wg.error(y),u=y}return o?(p={token:o.token},Ts(t,Object.assign(Object.assign({},r),{token:o})),yield qg(t,o)):p=GN(u),c&&HN(t,p),p})).apply(this,arguments)}function WD(n,e){const t=Rr(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ts(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function O0(n){const{app:e}=n,t=Rr(e);let r=t.tokenRefresher;r||(r=function(n){const{app:e}=n;return new LN((0,Ee.Z)(function*(){let r;if(r=Rr(e).token?yield os(n,!0):yield os(n),r.error)throw r.error}),()=>!0,()=>{const t=Rr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ts(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function HN(n,e){const t=Rr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function xy(n){return n.expireTimeMillis-Date.now()>0}function GN(n){return{token:Vt(O1),error:n}}class Vo{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Rr(this.app);for(const t of e)WD(this.app,t.next);return Promise.resolve()}}const zN="app-check-internal";(0,Li._registerComponent)(new ca.wA("app-check",n=>function(n,e){return new Vo(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(zN).initialize()})),(0,Li._registerComponent)(new ca.wA(zN,n=>function(n){return{getToken:e=>os(n,e),addTokenListener:e=>function(n,e,t,r){const{app:o}=n,u=Rr(o),c={next:t,error:r,type:e};if(Ts(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&xy(u.token)){const p=u.token;Promise.resolve().then(()=>{t({token:p.token}),O0(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>O0(n))}(n,"INTERNAL",e),removeTokenListener:e=>WD(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Li.registerVersion)("@firebase/app-check","0.5.6");class Xg{constructor(){return(0,cn.vb)("app-check")}}"undefined"!=typeof window&&window;var em=V(7841);const $0=new m.OlP("angularfire2.auth.use-emulator"),My=new m.OlP("angularfire2.auth.settings"),tm=new m.OlP("angularfire2.auth.tenant-id"),H0=new m.OlP("angularfire2.auth.langugage-code"),eS=new m.OlP("angularfire2.auth.use-device-language"),G0=new m.OlP("angularfire.auth.persistence"),W0=(n,e,t,r,o,u,c,p)=>(0,Er.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=o,u&&y.useDeviceLanguage(),c)for(const[b,S]of Object.entries(c))y.settings[b]=S;return p&&y.setPersistence(p),y},[t,r,o,u,c,p]);let Py=(()=>{class n{constructor(t,r,o,u,c,p,y,b,S,x,O,$){const K=new Mi.xQ,ye=(0,at.of)(void 0).pipe((0,Cy.QV)(c.outsideAngular),_r(()=>u.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,3259)))),(0,At.U)(()=>(0,Er.on)(t,u,r)),(0,At.U)(xe=>W0(xe,u,p,b,S,x,y,O)),$g({bufferSize:1,refCount:!1}));if(ul(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,at.of)(null);else{ye.pipe($n()).subscribe();const pt=ye.pipe(_r(it=>it.getRedirectResult().then(qt=>qt,()=>null)),cn.iC,$g({bufferSize:1,refCount:!1})),dt=ye.pipe(_r(it=>new jn.y(qt=>({unsubscribe:u.runOutsideAngular(()=>it.onAuthStateChanged(rn=>qt.next(rn),rn=>qt.error(rn),()=>qt.complete()))})))),tt=ye.pipe(_r(it=>new jn.y(qt=>({unsubscribe:u.runOutsideAngular(()=>it.onIdTokenChanged(rn=>qt.next(rn),rn=>qt.error(rn),()=>qt.complete()))}))));this.authState=pt.pipe(RD(dt),(0,ND.R)(c.outsideAngular),(0,Cy.QV)(c.insideAngular)),this.user=pt.pipe(RD(tt),(0,ND.R)(c.outsideAngular),(0,Cy.QV)(c.insideAngular)),this.idToken=this.user.pipe(_r(it=>it?(0,Gt.D)(it.getIdToken()):(0,at.of)(null))),this.idTokenResult=this.user.pipe(_r(it=>it?(0,Gt.D)(it.getIdTokenResult()):(0,at.of)(null))),this.credential=(0,P_.T)(pt,K,this.authState.pipe(Oi(it=>!it))).pipe((0,At.U)(it=>(null==it?void 0:it.user)?it:null),(0,ND.R)(c.outsideAngular),(0,Cy.QV)(c.insideAngular))}return(0,Er.pX)(this,ye,u,{spy:{apply:(xe,pt,dt)=>{(xe.startsWith("signIn")||xe.startsWith("createUser"))&&dt.then(tt=>K.next(tt))}}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Er.Dh),m.LFG(Er.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(cn.HU),m.LFG($0,8),m.LFG(My,8),m.LFG(tm,8),m.LFG(H0,8),m.LFG(eS,8),m.LFG(G0,8),m.LFG(Xg,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),JN=(()=>{class n{constructor(){em.Z.registerVersion("angularfire",cn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[Py]}),n})();function Lf(n){return null==n}function tS(n){return"function"==typeof n.set}function nS(n,e){return tS(e)?e:n.ref(e)}function q0(n,e){if(function(n){return"string"==typeof n}(n))return e.stringCase();if(tS(n))return e.firebaseCase();if(function(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Ku(n,e,t="on",r=Xh.z){return new jn.y(o=>{let u=null;return u=n[t](e,(c,p)=>{r.schedule(()=>{o.next({snapshot:c,prevKey:p})}),"once"===t&&r.schedule(()=>o.complete())},c=>{r.schedule(()=>o.error(c))}),"on"===t?{unsubscribe(){null!=u&&n.off(e,u)}}:{unsubscribe(){}}}).pipe((0,At.U)(o=>{const{snapshot:u,prevKey:c}=o;let p=null;return u.exists()&&(p=u.key),{type:e,payload:u,prevKey:c,key:p}}),(0,Lx.B)())}function z0(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function nM(n,e){const{payload:t,prevKey:r,key:o}=e,u=z0(n,o),c=function(n,e){if(Lf(e))return 0;{const t=z0(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let p=null;e.payload.forEach(y=>{const b={payload:y,type:"value",prevKey:p,key:y.key};return p=y.key,n=[...n,b],!1})}return n;case"child_added":if(u>-1){const p=n[u-1];(p&&p.key||null)!==r&&(n=n.filter(y=>y.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(p=>p.payload.key!==t.key);case"child_changed":return n.map(p=>p.payload.key===o?e:p);case"child_moved":if(u>-1){const p=n.splice(u,1)[0];return(n=n.slice()).splice(c,0,p),n}return n;default:return n}}function rS(n){return(Lf(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function iS(n,e,t){return function(n,e,t){return Ku(n,"value","once",t).pipe(_r(r=>{const o=[(0,at.of)(r)];return e.forEach(u=>o.push(Ku(n,u,"on",t))),(0,P_.T)(...o).pipe(Va(nM,[]))}),O_())}(n,e=rS(e),t)}function sS(n,e,t){const r=(e=rS(e)).map(o=>Ku(n,o,"on",t));return(0,P_.T)(...r)}function sM(n,e){return function(r,o){return q0(r,{stringCase:()=>n.child(r)[e](o),firebaseCase:()=>r[e](o),snapshotCase:()=>r.ref[e](o)})}}function z1(n){return function(t){return t?q0(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function Oy(n,e){return function(){return Ku(n,"value","on",e)}}const aM=new m.OlP("angularfire2.realtimeDatabaseURL"),uM=new m.OlP("angularfire2.database.use-emulator");let lM=(()=>{class n{constructor(t,r,o,u,c,p,y,b,S,x,O,$,K,ye,xe){this.schedulers=p;const pt=y,dt=(0,Er.on)(t,c,r);b&&W0(dt,c,S,O,$,K,x,ye),this.database=(0,Er.cc)(`${dt.name}.database.${o}`,"AngularFireDatabase",dt.name,()=>{const tt=c.runOutsideAngular(()=>dt.database(o||void 0));return pt&&tt.useEmulator(...pt),tt},[pt])}list(t,r){const o=this.schedulers.ngZone.runOutsideAngular(()=>nS(this.database,t));let u=o;return r&&(u=r(o)),function(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:sM(r,"update"),set:sM(r,"set"),push:o=>r.push(o),remove:z1(r),snapshotChanges:o=>iS(n,o,t).pipe(cn.iC),stateChanges:o=>sS(n,o,t).pipe(cn.iC),auditTrail:o=>function(n,e,t){return function(n,e,t){return function(n,e){return Ku(n,"value","on",e).pipe((0,At.U)(t=>{let r;return t.payload.forEach(o=>(r=o.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function(...n){return e=>{let t;return"function"==typeof n[n.length-1]&&(t=n.pop()),e.lift(new OE(n,t))}}(e),(0,At.U)(([o,u])=>{const c=o.lastKeyToLoad,p=u.map(y=>y.key);return{actions:u,lastKeyToLoad:c,loadedKeys:p}}),function(n){return e=>e.lift(new t1(n))}(o=>-1===o.loadedKeys.indexOf(o.lastKeyToLoad)),(0,At.U)(o=>o.actions))}(n,sS(n,e).pipe(Va((o,u)=>[...o,u],[])),t)}(n,o,t).pipe(cn.iC),valueChanges:(o,u)=>iS(n,o,t).pipe((0,At.U)(p=>p.map(y=>u&&u.idField?Object.assign(Object.assign({},y.payload.val()),{[u.idField]:y.key}):y.payload.val())),cn.iC)}}(u,this)}object(t){return function(n,e){return{query:n,snapshotChanges:()=>Oy(n,e.schedulers.outsideAngular)().pipe(cn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Oy(n,e.schedulers.outsideAngular)().pipe(cn.iC,(0,At.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>nS(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Er.Dh),m.LFG(Er.xv,8),m.LFG(aM,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(cn.HU),m.LFG(uM,8),m.LFG(Py,8),m.LFG($0,8),m.LFG(My,8),m.LFG(tm,8),m.LFG(H0,8),m.LFG(eS,8),m.LFG(G0,8),m.LFG(Xg,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var cM=V(1555);function Vf(n,e){return new jn.y(t=>{const r=n.length;if(0===r)return void t.complete();const o=new Array(r);let u=0,c=0;for(let p=0;p<r;p++){const y=(0,Gt.D)(n[p]);let b=!1;t.add(y.subscribe({next:S=>{b||(b=!0,c++),o[p]=S},error:S=>t.error(S),complete:()=>{u++,(u===r||!b)&&(c===r&&t.next(e?e.reduce((S,x,O)=>(S[x]=o[O],S),{}):o),t.complete())}}))}})}let uS=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.Qsj),m.Y36(m.SBq))},n.\u0275dir=m.lG2({type:n}),n})(),Uo=(()=>{class n extends uS{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=m.n5z(n)))(r||n)}}(),n.\u0275dir=m.lG2({type:n,features:[m.qOj]}),n})();const Zn=new m.OlP("NgValueAccessor"),K0={provide:Zn,useExisting:(0,m.Gpc)(()=>nm),multi:!0},cS=new m.OlP("CompositionEventMode");let nm=(()=>{class n extends uS{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=L()?L().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(cS,8))},n.\u0275dir=m.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&m.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[m._Bn([K0]),m.qOj]}),n})();const Bi=new m.OlP("NgValidators"),fc=new m.OlP("NgAsyncValidators");function mS(n){return null!=n}function ky(n){const e=(0,m.QGY)(n)?(0,Gt.D)(n):n;return(0,m.CqO)(e),e}function _S(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function yS(n,e){return e.map(t=>t(n))}function vS(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function Y0(n){return null!=n?function(n){if(!n)return null;const e=n.filter(mS);return 0==e.length?null:function(t){return _S(yS(t,e))}}(vS(n)):null}function Q0(n){return null!=n?function(n){if(!n)return null;const e=n.filter(mS);return 0==e.length?null:function(t){return function(...n){if(1===n.length){const e=n[0];if((0,Ji.k)(e))return Vf(e,null);if((0,cM.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Vf(t.map(r=>e[r]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return Vf(n=1===n.length&&(0,Ji.k)(n[0])?n[0]:n,null).pipe((0,At.U)(t=>e(...t)))}return Vf(n,null)}(yS(t,e).map(ky)).pipe((0,At.U)(_S))}}(vS(n)):null}function bS(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Fy(n){return n?Array.isArray(n)?n:[n]:[]}function rm(n,e){return Array.isArray(n)?n.includes(e):n===e}function J0(n,e){const t=Fy(e);return Fy(n).forEach(o=>{rm(t,o)||t.push(o)}),t}function X0(n,e){return Fy(e).filter(t=>!rm(n,t))}let eb=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Y0(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Q0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,r){return!!this.control&&this.control.hasError(t,r)}getError(t,r){return this.control?this.control.getError(t,r):null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=m.lG2({type:n}),n})(),ji=(()=>{class n extends eb{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=m.n5z(n)))(r||n)}}(),n.\u0275dir=m.lG2({type:n,features:[m.qOj]}),n})();class pc extends eb{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let TS=(()=>{class n extends class{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(pc,2))},n.\u0275dir=m.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&m.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[m.qOj]}),n})();function $d(n,e){(function(n,e){const t=function(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(bS(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(bS(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();Ly(e._rawValidators,o),Ly(e._rawAsyncValidators,o)})(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&sb(n,e)})}(n,e),function(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&sb(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Ly(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function sb(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function lb(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const iu="VALID",By="INVALID",jf="PENDING",jy="DISABLED";function cb(n){return(fb(n)?n.validators:n)||null}function $y(n){return Array.isArray(n)?Y0(n):n||null}function db(n,e){return(fb(e)?e.asyncValidators:n)||null}function hb(n){return Array.isArray(n)?Q0(n):n||null}function fb(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class pb{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=$y(this._rawValidators),this._composedAsyncValidatorFn=hb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===iu}get invalid(){return this.status===By}get pending(){return this.status==jf}get disabled(){return this.status===jy}get enabled(){return this.status!==jy}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=$y(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=hb(e)}addValidators(e){this.setValidators(J0(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(J0(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(X0(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(X0(e,this._rawAsyncValidators))}hasValidator(e){return rm(this._rawValidators,e)}hasAsyncValidator(e){return rm(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=jf,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=jy,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=iu,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===iu||this.status===jf)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?jy:iu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=jf,this._hasOwnPendingAsyncValidator=!0;const t=ky(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=r instanceof Hy?r.controls.hasOwnProperty(o)?r.controls[o]:null:r instanceof RS&&r.at(o)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new m.vpe,this.statusChanges=new m.vpe}_calculateStatus(){return this._allControlsDisabled()?jy:this.errors?By:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(jf)?jf:this._anyControlsHaveStatus(By)?By:iu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){fb(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class $f extends pb{constructor(e=null,t,r){super(cb(t),db(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){lb(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){lb(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Hy extends pb{constructor(e,t,r){super(cb(t),db(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof $f?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class RS extends pb{constructor(e,t,r){super(cb(t),db(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,o)=>{this._throwIfControlMissing(o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof $f?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const IM={provide:pc,useExisting:(0,m.Gpc)(()=>Ky)},_b=(()=>Promise.resolve(null))();let Ky=(()=>{class n extends pc{constructor(t,r,o,u){super(),this.control=new $f,this._registered=!1,this.update=new m.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===nm?t=u:function(n){return Object.getPrototypeOf(n.constructor)===Uo}(u)?r=u:o=u}),o||r||t||null}(0,u)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(n,e){return[...e.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){$d(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){_b.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=""===r||r&&"false"!==r;_b.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(ji,9),m.Y36(Bi,10),m.Y36(fc,10),m.Y36(Zn,10))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[m._Bn([IM]),m.qOj,m.TTD]}),n})(),kS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();const aF={provide:Zn,useExisting:(0,m.Gpc)(()=>wb),multi:!0};function xM(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let wb=(()=>{class n extends Uo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const r=this._getOptionId(t);null==r&&this.setProperty("selectedIndex",-1);const o=xM(r,t);this.setProperty("value",o)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=m.n5z(n)))(r||n)}}(),n.\u0275dir=m.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&m.NdJ("change",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[m._Bn([aF]),m.qOj]}),n})(),RM=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(xM(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.SBq),m.Y36(m.Qsj),m.Y36(wb,9))},n.\u0275dir=m.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const lF={provide:Zn,useExisting:(0,m.Gpc)(()=>GS),multi:!0};function NM(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let GS=(()=>{class n extends Uo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const o=t.map(u=>this._getOptionId(u));r=(u,c)=>{u._setSelected(o.indexOf(c.toString())>-1)}}else r=(o,u)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const o=[];if(void 0!==r.selectedOptions){const u=r.selectedOptions;for(let c=0;c<u.length;c++){const p=u.item(c),y=this._getOptionValue(p.value);o.push(y)}}else{const u=r.options;for(let c=0;c<u.length;c++){const p=u.item(c);if(p.selected){const y=this._getOptionValue(p.value);o.push(y)}}}this.value=o,t(o)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=m.n5z(n)))(r||n)}}(),n.\u0275dir=m.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&m.NdJ("change",function(u){return r.onChange(u.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[m._Bn([lF]),m.qOj]}),n})(),MM=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(NM(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(NM(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.SBq),m.Y36(m.Qsj),m.Y36(GS,9))},n.\u0275dir=m.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),Yy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[[kS]]}),n})(),ZS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[Yy]}),n})();function Qy(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div",18),m.TgZ(1,"div",19),m.TgZ(2,"input",20),m.NdJ("ngModelChange",function(o){return m.CHM(t).$implicit.valor=o}),m.qZA(),m.qZA(),m.TgZ(3,"div",19),m.TgZ(4,"input",21),m.NdJ("ngModelChange",function(o){return m.CHM(t).$implicit.descricao=o}),m.qZA(),m.qZA(),m.qZA()}if(2&n){const t=e.$implicit;m.xp6(2),m.Q6J("ngModel",t.valor),m.xp6(2),m.Q6J("ngModel",t.descricao)}}function YS(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div",7),m.TgZ(1,"div",8),m.TgZ(2,"label",9),m._uU(3,"Data"),m.qZA(),m.TgZ(4,"input",10),m.NdJ("ngModelChange",function(o){return m.CHM(t),m.oxw().sinalModel.data=o}),m.qZA(),m.qZA(),m.TgZ(5,"div",8),m.TgZ(6,"label",9),m._uU(7,"Moeda"),m.qZA(),m.TgZ(8,"input",11),m.NdJ("ngModelChange",function(o){return m.CHM(t),m.oxw().sinalModel.moeda=o}),m.qZA(),m.qZA(),m.TgZ(9,"div",8),m.TgZ(10,"label",9),m._uU(11,"Tipo"),m.qZA(),m.TgZ(12,"select",12),m.NdJ("ngModelChange",function(o){return m.CHM(t),m.oxw().sinalModel.tipo=o}),m.TgZ(13,"option",13),m._uU(14,"LONG"),m.qZA(),m.TgZ(15,"option",14),m._uU(16,"SHORT"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(17,"div",8),m.TgZ(18,"label",9),m._uU(19,"Entradas"),m.qZA(),m.YNc(20,Qy,5,2,"div",15),m.qZA(),m.TgZ(21,"div",8),m.TgZ(22,"button",16),m.NdJ("click",function(){return m.CHM(t),m.oxw().salvarEntrada()}),m._uU(23,"Salvar"),m.qZA(),m.TgZ(24,"button",17),m.NdJ("click",function(){return m.CHM(t),m.oxw().showFormNovoSinal=!1}),m._uU(25,"Cancelar"),m.qZA(),m.qZA(),m.qZA()}if(2&n){const t=m.oxw();m.xp6(4),m.Q6J("ngModel",t.sinalModel.data),m.xp6(4),m.Q6J("ngModel",t.sinalModel.moeda),m.xp6(4),m.Q6J("ngModel",t.sinalModel.tipo),m.xp6(8),m.Q6J("ngForOf",t.sinalModel.entradas)}}function _F(n,e){if(1&n&&(m.TgZ(0,"span"),m._uU(1),m.qZA()),2&n){const t=m.oxw().$implicit,r=m.oxw(2);m.xp6(1),m.hij("$: ",null==r.PriceCoinMap[t.moeda]?null:r.PriceCoinMap[t.moeda].price,"")}}function yF(n,e){if(1&n&&(m.TgZ(0,"div",36),m._uU(1),m.qZA()),2&n){const t=m.oxw().$implicit;m.xp6(1),m.hij(" Sugest\xe3o entrada ",t.sugestao," ")}}function vF(n,e){if(1&n&&(m.TgZ(0,"div",39),m._UZ(1,"i",40),m.TgZ(2,"small"),m._uU(3),m.qZA(),m.qZA()),2&n){const t=m.oxw(2).$implicit,r=m.oxw(2);m.xp6(3),m.Oqu(null==r.PriceCoinMap[t.moeda]?null:r.PriceCoinMap[t.moeda].price)}}function GM(n,e){if(1&n&&(m.TgZ(0,"div",39),m._UZ(1,"i",40),m.TgZ(2,"small"),m._uU(3),m.qZA(),m.qZA()),2&n){const t=m.oxw(2).$implicit,r=m.oxw(2);m.xp6(3),m.Oqu(null==r.PriceCoinMap[t.moeda]?null:r.PriceCoinMap[t.moeda].price)}}function EF(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"li"),m.YNc(1,vF,4,1,"div",37),m.TgZ(2,"div"),m.TgZ(3,"i",38),m.NdJ("click",function(){const u=m.CHM(t).$implicit;return m.oxw(3).toggleAlcancado(u)}),m.qZA(),m._uU(4),m.qZA(),m.YNc(5,GM,4,1,"div",37),m._UZ(6,"div"),m.qZA()}if(2&n){const t=e.$implicit,r=e.index,o=m.oxw().$implicit,u=m.oxw(2);m.xp6(1),m.Q6J("ngIf",u.PriceCoinMap[o.moeda]&&o.indexPricePosition===r),m.xp6(2),m.Q6J("ngClass",t.alcancado?"fa-flag text-success":"fa-caret-right"),m.xp6(1),m.AsE(" ",t.valor," - ",t.descricao," "),m.xp6(1),m.Q6J("ngIf",u.PriceCoinMap[o.moeda]&&r==o.entradas.length-1&&("LONG"===o.tipo&&u.castPrice(null==u.PriceCoinMap[o.moeda]?null:u.PriceCoinMap[o.moeda].price)>u.castPrice(t.valor)||"SHORT"===o.tipo&&u.castPrice(null==u.PriceCoinMap[o.moeda]?null:u.PriceCoinMap[o.moeda].price)<u.castPrice(t.valor)))}}function Jy(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div",23),m.TgZ(1,"div",24),m.TgZ(2,"h5",25),m.TgZ(3,"strong"),m._uU(4),m.qZA(),m.qZA(),m.TgZ(5,"h5"),m.YNc(6,_F,2,1,"span",26),m.qZA(),m.TgZ(7,"h6",27),m._uU(8),m.ALo(9,"date"),m.qZA(),m.YNc(10,yF,2,1,"div",28),m.TgZ(11,"div"),m.TgZ(12,"ul",29),m.YNc(13,EF,7,5,"li",30),m.qZA(),m.qZA(),m.TgZ(14,"div"),m.TgZ(15,"span",31),m.TgZ(16,"button",32),m.NdJ("click",function(){const o=m.CHM(t),u=o.$implicit,c=o.index;return m.oxw(2).editarSinal(u,c)}),m._UZ(17,"i",33),m.qZA(),m.TgZ(18,"button",34),m.NdJ("click",function(){const o=m.CHM(t),u=o.$implicit,c=o.index;return m.oxw(2).excluirSinal(u,c)}),m._UZ(19,"i",35),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&n){const t=e.$implicit,r=m.oxw(2);m.Q6J("ngClass","LONG"===t.tipo?"border-long":"border-short"),m.xp6(4),m.Oqu(t.moeda),m.xp6(2),m.Q6J("ngIf",r.PriceCoinMap[t.moeda]),m.xp6(1),m.Q6J("ngClass","LONG"===t.tipo?"text-success":"text-danger"),m.xp6(1),m.AsE(" ",t.tipo," - ",m.xi3(9,8,t.data,"dd/MM/yyyy")," "),m.xp6(2),m.Q6J("ngIf",t.sugestao),m.xp6(3),m.Q6J("ngForOf",t.entradas)}}function WM(n,e){if(1&n&&(m.TgZ(0,"div",2),m.TgZ(1,"div",18),m.YNc(2,Jy,20,11,"div",22),m.qZA(),m.qZA()),2&n){const t=m.oxw();m.xp6(2),m.Q6J("ngForOf",t.watchersList)}}CI.extend(Lt);let wF=(()=>{class n{constructor(t){this.db=t,this.title="binance-future-watcher-githubio",this.loading=!1,this.showFormNovoSinal=!1,this.BINANCE_FUTURE_ENDPOINT="https://fapi.binance.com/fapi/v1",this.PriceCoinMap={},this.PriceCoinList=[],this.storage=window.localStorage,this.watchersList=[],this.myHeaders=new Headers,this.myInit=null,this.sinalModel={data:null,moeda:null,tipo:null,entradas:[],alert:!1,indexPricePosition:-1},this.entradaModel={valor:0,descricao:null,alcancado:!1,dataAlcancado:null},this.editandoSinalIdx=-1,this.myHeaders.append("content-type","application/json"),this.myInit={method:"GET",headers:this.myHeaders}}ngOnInit(){this.startPriceWatcher(),this.loadWatcherList()}startPriceWatcher(){const r=function(n=0,e=Xh.P){return(!(0,II.k)(n)||n<0)&&(n=0),(!e||"function"!=typeof e.schedule)&&(e=Xh.P),new jn.y(t=>(t.add(e.schedule(la,n,{subscriber:t,counter:0,period:n})),t))}(5e3);this.populatePriceCoinMap(),r.subscribe(o=>this.populatePriceCoinMap())}populatePriceCoinMap(){this.BINANCE_FUTURE_ENDPOINT&&fetch(`${this.BINANCE_FUTURE_ENDPOINT}/ticker/price`,this.myInit).then(r=>{if(r.ok)return r.json()}).then(r=>{this.PriceCoinList=[];let o=[];r.forEach(c=>{this.PriceCoinMap[c.symbol]={price:c.price},o.push(c.symbol)});let u=this;o.sort(),o.forEach(c=>{u.PriceCoinList.push({symbol:c,price:this.PriceCoinMap[c].price})}),this.setOrderSinais()})}setOrderSinais(){this.watchersList&&this.watchersList.length>0&&(this.watchersList.forEach((t,r)=>{let o=0;try{o=parseFloat(this.PriceCoinMap[t.moeda].price)}catch(u){}if(o){let u=-1;for(let c=0;c<t.entradas.length;c++){let y=parseFloat(t.entradas[c].valor);if("LONG"===t.tipo){if(0==c||c===t.entradas.length-1){if(o<=y){u=c,0==c&&(t.alert=!0);break}continue}if(o>=parseFloat(t.entradas[c-1].valor)&&o<=y){u=c,t.alert&&(this.playAlert(),t.alert=!1);break}}else if("SHORT"===t.tipo){if(0==c||c===t.entradas.length-1){if(o>=y){u=c,0==c&&(t.alert=!0);break}continue}if(o<=parseFloat(t.entradas[c-1].valor)&&o>=y){u=c,t.alert&&(this.playAlert(),t.alert=!1);break}}}this.watchersList[r].indexPricePosition=u}}),console.log(this.watchersList),this.watchersList.sort((t,r)=>t.indexPricePosition>r.indexPricePosition?-1:1))}castPrice(t){return parseFloat(t)}novoSinal(){let t=CI().format("YYYY-MM-DD");console.log(t),this.editandoSinalIdx=-1,this.sinalModel={data:t,tipo:null,entradas:[]};let r=["Entrada","40%","60%","80%","100%"];for(let o=0;o<5;o++){let u=Object.assign({},this.entradaModel);u.descricao=r[o],this.sinalModel.entradas.push(u)}this.showFormNovoSinal=!0}loadWatcherList(){this.watchersObservable=this.db.list("/sinais").valueChanges(),this.watchersObservable.subscribe(t=>{console.log(t),this.watchersList=t,this.watchersList&&this.watchersList.length>0&&this.watchersList.forEach(r=>{if(r.entradas&&r.entradas.length>0){let o=parseFloat(r.entradas[0].valor),u=parseFloat(r.entradas[1].valor);r.sugestao="LONG"===r.tipo?o+(u-o)/4:o-(o-u)/4}}),this.setOrderSinais()})}salvarEntrada(){console.log(this.sinalModel);let t=Object.assign({},this.sinalModel);t.entradas.length>0&&t.entradas.forEach(o=>{o.valor=o.valor.trim()});let r=t.id?t.id:"_"+Math.random().toString().replace(".","");this.editandoSinalIdx>-1||(t.id=r,t.moeda=t.moeda.toUpperCase()),this.db.object("/sinais/"+r).set(t).then(()=>{this.showFormNovoSinal=!1})}editarSinal(t,r){this.editandoSinalIdx=r,this.sinalModel=Object.assign({},t),this.showFormNovoSinal=!0}excluirSinal(t,r){var o=this;return(0,Ee.Z)(function*(){window.confirm("Realmente deseja excluir o sinal?")&&(yield o.db.object("/sinais/"+t.id).remove())})()}playAlert(){notificationAudio.play()}toggleAlcancado(t){t.alcancado=!t.alcancado||!t.alcancado}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(lM))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-root"]],decls:8,vars:2,consts:[["role","main"],[1,""],[1,"container"],[1,"text-center"],[1,"btn","btn-success","my-2",3,"click"],["class","col-md-6",4,"ngIf"],["class","container",4,"ngIf"],[1,"col-md-6"],[1,"mb-3"],["for","",1,"form-label","text-white"],["type","date","placeholder","First name","aria-label","First name",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","","aria-label","First name",1,"form-control","text-uppercase",3,"ngModel","ngModelChange"],["aria-label","Default select example",1,"form-control","form-select",3,"ngModel","ngModelChange"],["value","LONG"],["value","SHORT"],["class","row",4,"ngFor","ngForOf"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"row"],[1,"col"],["type","text","placeholder","Valor","aria-label","Valor",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Descri\xe7\xe3o","aria-label","descri\xe7\xe3o",1,"form-control",3,"ngModel","ngModelChange"],["class","card m-1 col-md-4 col-lg-3 col-xl-3",3,"ngClass",4,"ngFor","ngForOf"],[1,"card","m-1","col-md-4","col-lg-3","col-xl-3",3,"ngClass"],[1,"card-body"],[1,"card-title"],[4,"ngIf"],[1,"card-subtitle","mb-2",3,"ngClass"],["class","alert alert-primary",4,"ngIf"],[1,"price-list"],["style"," ",4,"ngFor","ngForOf"],[1,"float-right"],[1,"btn","btn-link",3,"click"],[1,"fa","fa-pencil"],[1,"btn","btn-link","text-danger",3,"click"],[1,"fa","fa-trash"],[1,"alert","alert-primary"],["class","ml-4",4,"ngIf"],[1,"clickable","fa",3,"ngClass","click"],[1,"ml-4"],[1,"fa","fa-caret-right","text-success"]],template:function(t,r){1&t&&(m.TgZ(0,"main",0),m.TgZ(1,"section",1),m.TgZ(2,"div",2),m.TgZ(3,"p",3),m.TgZ(4,"button",4),m.NdJ("click",function(){return r.novoSinal()}),m._uU(5,"Novo sinal"),m.qZA(),m.qZA(),m.YNc(6,YS,26,4,"div",5),m.qZA(),m.YNc(7,WM,3,1,"div",6),m.qZA(),m.qZA()),2&t&&(m.xp6(6),m.Q6J("ngIf",r.showFormNovoSinal),m.xp6(1),m.Q6J("ngIf",r.watchersList&&r.watchersList.length>0))},directives:[hs,nm,TS,Ky,wb,RM,MM,ln,Ms],pipes:[Rc],styles:[".text-white[_ngcontent-%COMP%]{color:#fff}.text-red[_ngcontent-%COMP%]{color:#fff}.border-long[_ngcontent-%COMP%]{border-color:#28a745!important;border-width:10px}.clickable[_ngcontent-%COMP%]{cursor:pointer}.border-short[_ngcontent-%COMP%]{border-color:red;border-width:10px}.price-list[_ngcontent-%COMP%]{list-style:none;padding-left:10px}.slidecontainer[_ngcontent-%COMP%]{width:100%}.slider[_ngcontent-%COMP%]{-webkit-appearance:none;appearance:none;width:100%;height:25px;background:#d3d3d3;outline:none;opacity:.7;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:25px;height:25px;background:#04AA6D;cursor:pointer}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:25px;height:25px;background:#04AA6D;cursor:pointer}.slider-square[_ngcontent-%COMP%]{-webkit-appearance:none;width:100%;height:24px;background:#d3d3d3;outline:none;opacity:.7;transition:opacity .15s ease-in-out}"]}),n})();function QS(){return n=>n.lift(new Ib)}class Ib{call(e,t){return t.subscribe(new qM(e))}}class qM extends zr.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}var Xe,bF="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},mc={},JS=JS||{},Ot=bF||self;function Xy(){}function XS(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function ev(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Gd="closure_uid_"+(1e9*Math.random()>>>0),KM=0;function ZM(n,e,t){return n.call.apply(n.bind,arguments)}function YM(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Jr(n,e,t){return(Jr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ZM:YM).apply(null,arguments)}function tv(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Sn(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var c=Array(arguments.length-2),p=2;p<arguments.length;p++)c[p-2]=arguments[p];return e.prototype[o].apply(r,c)}}function _c(){this.s=this.s,this.o=this.o}var QM={};_c.prototype.s=!1,_c.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,Gd)&&n[Gd]||(n[Gd]=++KM)}(this);delete QM[n]}},_c.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const eA=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},nv=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function Db(n){return Array.prototype.concat.apply([],arguments)}function Sb(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function am(n){return/^[\s\xa0]*$/.test(n)}var Ci,Ab=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function as(n,e){return-1!=n.indexOf(e)}function xb(n,e){return n<e?-1:n>e?1:0}e:{var Rb=Ot.navigator;if(Rb){var Nb=Rb.userAgent;if(Nb){Ci=Nb;break e}}Ci=""}function um(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function nA(n){const e={};for(const t in n)e[t]=n[t];return e}var jo="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rA(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<jo.length;u++)t=jo[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function iA(n){return iA[" "](n),n}iA[" "]=Xy;var rv,CF=as(Ci,"Opera"),Hf=as(Ci,"Trident")||as(Ci,"MSIE"),sA=as(Ci,"Edge"),Mb=sA||Hf,XM=as(Ci,"Gecko")&&!(as(Ci.toLowerCase(),"webkit")&&!as(Ci,"Edge"))&&!(as(Ci,"Trident")||as(Ci,"MSIE"))&&!as(Ci,"Edge"),eP=as(Ci.toLowerCase(),"webkit")&&!as(Ci,"Edge");function Pb(){var n=Ot.document;return n?n.documentMode:void 0}e:{var Ob="",iv=function(){var n=Ci;return XM?/rv:([^\);]+)(\)|;)/.exec(n):sA?/Edge\/([\d\.]+)/.exec(n):Hf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):eP?/WebKit\/(\S+)/.exec(n):CF?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(iv&&(Ob=iv?iv[1]:""),Hf){var kb=Pb();if(null!=kb&&kb>parseFloat(Ob)){rv=String(kb);break e}}rv=Ob}var IF={};function oA(){return e=IF,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=Ab(String(rv)).split("."),t=Ab("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var o=e[c]||"",u=t[c]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=xb(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||xb(0==o[2].length,0==u[2].length)||xb(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n}();var e}var tP=Ot.document&&Hf&&(Pb()||parseInt(rv,10))||void 0,uA=function(){if(!Ot.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ot.addEventListener("test",Xy,e),Ot.removeEventListener("test",Xy,e)}catch(t){}return n}();function Fr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Wd(n,e){if(Fr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(XM){e:{try{iA(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:lA[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Wd.Z.h.call(this)}}Fr.prototype.h=function(){this.defaultPrevented=!0},Sn(Wd,Fr);var lA={2:"touch",3:"pen",4:"mouse"};Wd.prototype.h=function(){Wd.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var lm="closure_listenable_"+(1e6*Math.random()|0),nP=0;function TF(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++nP,this.ca=this.fa=!1}function Fb(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Lb(n){this.src=n,this.g={},this.h=0}function ov(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=eA(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Fb(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function av(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}Lb.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=av(n,e,r,o);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new TF(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var Vb="closure_lm_"+(1e6*Math.random()|0),Ub={};function cA(n,e,t,r,o){if(r&&r.once)return rP(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)cA(n,e[u],t,r,o);return null}return t=cv(t),n&&n[lm]?n.N(e,t,ev(r)?!!r.capture:!!r,o):dA(n,e,t,!1,r,o)}function dA(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var c=ev(o)?!!o.capture:!!o,p=fA(n);if(p||(n[Vb]=p=new Lb(n)),(t=p.add(e,t,r,c,u)).proxy)return t;if(r=function(){var e=li;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)uA||(o=c),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(uv(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function rP(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)rP(n,e[u],t,r,o);return null}return t=cv(t),n&&n[lm]?n.O(e,t,ev(r)?!!r.capture:!!r,o):dA(n,e,t,!0,r,o)}function iP(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)iP(n,e[u],t,r,o);else r=ev(r)?!!r.capture:!!r,t=cv(t),n&&n[lm]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=av(u=n.g[e],t,r,o))&&(Fb(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=fA(n))&&(e=n.g[e.toString()],n=-1,e&&(n=av(e,t,r,o)),(t=-1<n?e[n]:null)&&Bb(t))}function Bb(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[lm])ov(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(uv(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=fA(e))?(ov(t,n),0==t.h&&(t.src=null,e[Vb]=null)):Fb(n)}}}function uv(n){return n in Ub?Ub[n]:Ub[n]="on"+n}function li(n,e){if(n.ca)n=!0;else{e=new Wd(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Bb(n),n=t.call(r,e)}return n}function fA(n){return(n=n[Vb])instanceof Lb?n:null}var lv="__closure_events_fn_"+(1e9*Math.random()>>>0);function cv(n){return"function"==typeof n?n:(n[lv]||(n[lv]=function(e){return n.handleEvent(e)}),n[lv])}function ci(){_c.call(this),this.i=new Lb(this),this.P=this,this.I=null}function Lr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Fr(e,n);else if(e instanceof Fr)e.target=e.target||n;else{var o=e;rA(e=new Fr(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];o=dv(c,r,!0,e)&&o}if(o=dv(c=e.g=n,r,!0,e)&&o,o=dv(c,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=dv(c=e.g=t[u],r,!1,e)&&o}function dv(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var p=c.listener,y=c.ia||c.src;c.fa&&ov(n.i,c),o=!1!==p.call(y,r)&&o}}return o&&!r.defaultPrevented}Sn(ci,_c),ci.prototype[lm]=!0,ci.prototype.removeEventListener=function(n,e,t,r){iP(this,n,e,t,r)},ci.prototype.M=function(){if(ci.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Fb(t[r]);delete n.g[e],n.h--}}this.I=null},ci.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ci.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var jb=Ot.JSON.stringify;function pA(){var n=qb;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Gf,$b=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Hb,n=>n.reset());class Hb{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Gb(n){Ot.setTimeout(()=>{throw n},0)}function Wb(n,e){Gf||function(){var n=Ot.Promise.resolve(void 0);Gf=function(){n.then(di)}}(),cm||(Gf(),cm=!0),qb.add(n,e)}var cm=!1,qb=new class{constructor(){this.h=this.g=null}add(e,t){const r=$b.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function di(){for(var n;n=pA();){try{n.h.call(n.g)}catch(t){Gb(t)}var e=$b;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}cm=!1}function zb(n,e){ci.call(this),this.h=n||1,this.g=e||Ot,this.j=Jr(this.kb,this),this.l=Date.now()}function Kb(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Zb(n,e,t){if("function"==typeof n)t&&(n=Jr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Jr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ot.setTimeout(n,e||0)}function oP(n){n.g=Zb(()=>{n.g=null,n.i&&(n.i=!1,oP(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Sn(zb,ci),(Xe=zb.prototype).da=!1,Xe.S=null,Xe.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Lr(this,"tick"),this.da&&(Kb(this),this.start()))}},Xe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Xe.M=function(){zb.Z.M.call(this),Kb(this),delete this.g};class hv extends _c{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:oP(this)}M(){super.M(),this.g&&(Ot.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dm(n){_c.call(this),this.h=n,this.g={}}Sn(dm,_c);var aP=[];function uP(n,e,t,r){Array.isArray(t)||(t&&(aP[0]=t.toString()),t=aP);for(var o=0;o<t.length;o++){var u=cA(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function lP(n){um(n.g,function(e,t){this.g.hasOwnProperty(t)&&Bb(e)},n),n.g={}}function fv(){this.g=!0}function Wf(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<o.length;c++)o[c]=""}}}return jb(t)}catch(p){return e}}(n,t)+(r?" "+r:"")})}dm.prototype.M=function(){dm.Z.M.call(this),lP(this)},dm.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},fv.prototype.Aa=function(){this.g=!1},fv.prototype.info=function(){};var zd={},gA=null;function pv(){return gA=gA||new ci}function fP(n){Fr.call(this,zd.Ma,n)}function gv(n){const e=pv();Lr(e,new fP(e,n))}function mA(n,e){Fr.call(this,zd.STAT_EVENT,n),this.stat=e}function us(n){const e=pv();Lr(e,new mA(e,n))}function _A(n,e){Fr.call(this,zd.Na,n),this.size=e}function hm(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ot.setTimeout(function(){n()},e)}zd.Ma="serverreachability",Sn(fP,Fr),zd.STAT_EVENT="statevent",Sn(mA,Fr),zd.Na="timingevent",Sn(_A,Fr);var mv={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},$o={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Yb(){}function vA(){}Yb.prototype.h=null;var Jb,fm={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function EA(){Fr.call(this,"d")}function Qb(){Fr.call(this,"c")}function _v(){}function Qu(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new dm(this),this.P=SF,this.W=new zb(n=Mb?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Xb}function Xb(){this.i=null,this.g="",this.h=!1}Sn(EA,Fr),Sn(Qb,Fr),Sn(_v,Yb),_v.prototype.g=function(){return new XMLHttpRequest},_v.prototype.i=function(){return{}},Jb=new _v;var SF=45e3,eC={},tC={};function wA(n,e,t){n.K=1,n.v=bv(ba(e)),n.s=t,n.U=!0,pP(n,null)}function pP(n,e){n.F=Date.now(),pm(n),n.A=ba(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),DA(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Xb,n.g=d(n.l,t?e:null,!n.s),0<n.O&&(n.L=new hv(Jr(n.Ia,n,n.g),n.O)),uP(n.V,n.g,"readystatechange",n.gb),e=n.H?nA(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),gv(1),function(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var c="",p=u.split("&"),y=0;y<p.length;y++){var b=p[y].split("=");if(1<b.length){var S=b[0];b=b[1];var x=S.split("_");c=2<=x.length&&"type"==x[1]?c+(S+"=")+b+"&":c+(S+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function yv(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function bA(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=gP(n,t),o==tC){4==e&&(n.o=4,us(14),r=!1),Wf(n.j,n.m,null,"[Incomplete Response]");break}if(o==eC){n.o=4,us(15),Wf(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Wf(n.j,n.m,o,null),Ys(n,o)}yv(n)&&o!=tC&&o!=eC&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,us(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),FA(e),e.L=!0,us(11))):(Wf(n.j,n.m,t,"[Invalid Chunked Response]"),Kd(n),gm(n))}function gP(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?tC:(t=Number(e.substring(t,r)),isNaN(t)?eC:(r+=1)+t>e.length?tC:(e=e.substr(r,t),n.C=r+t,e))}function pm(n){n.Y=Date.now()+n.P,mP(n,n.P)}function mP(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=hm(Jr(n.eb,n),e)}function vv(n){n.B&&(Ot.clearTimeout(n.B),n.B=null)}function gm(n){0==n.l.G||n.I||MP(n.l,n)}function Kd(n){vv(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Kb(n.W),lP(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Ys(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||ou(t.i,n)))if(t.I=n.N,!n.J&&ou(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=hm(Jr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;_C(t),gC(t)}mC(t),us(18)}if(1>=AA(t.i)&&t.ka){try{t.ka()}catch(b){}t.ka=void 0}}else s(t,11)}else if((n.J||t.g==n)&&_C(t),!am(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let b=o[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const S=b[3];null!=S&&(t.ma=S,t.h.info("VER="+t.ma));const x=b[4];null!=x&&(t.za=x,t.h.info("SVER="+t.za));const O=b[5];null!=O&&"number"==typeof O&&0<O&&(t.K=r=1.5*O,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const $=n.g;if($){const K=$.g?$.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(K){var u=r.i;!u.g&&(as(K,"spdy")||as(K,"quic")||as(K,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Qd(u,u.h),u.h=null))}if(r.D){const ye=$.g?$.g.getResponseHeader("X-HTTP-Session-Id"):null;ye&&(r.sa=ye,sr(r.F,r.D,ye))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=l(r,r.H?r.la:null,r.W),c.J){Iv(r.i,c);var p=c,y=r.K;y&&p.setTimeout(y),p.B&&(vv(p),pm(p)),r.g=c}else RP(r);0<t.l.length&&Dv(t)}else"stop"!=b[0]&&"close"!=b[0]||s(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?s(t,7):OA(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}gv(4)}catch(b){}}function Ev(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(XS(n)||"string"==typeof n)nv(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(XS(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;o=(r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(XS(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n)).length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function qf(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof qf)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function wv(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];yc(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)yc(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function yc(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Xe=Qu.prototype).setTimeout=function(n){this.P=n},Xe.gb=function(n){n=n.target;const e=this.L;e&&3==el(n)?e.l():this.Ia(n)},Xe.Ia=function(n){try{if(n==this.g)e:{const S=el(this.g);var e=this.g.Da();const x=this.g.ba();if(!(3>S)&&(3!=S||Mb||this.g&&(this.h.h||this.g.ga()||pC(this.g)))){this.I||4!=S||7==e||gv(8==e||0>=x?3:2),vv(this);var t=this.g.ba();this.N=t;t:if(yv(this)){var r=pC(this.g);n="";var o=r.length,u=4==el(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Kd(this),gm(this);var c="";break t}this.h.i=new Ot.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function(n,e,t,r,o,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,S,t),this.i){if(this.$&&!this.J){t:{if(this.g){var p,y=this.g;if((p=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!am(p)){var b=p;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,us(12),Kd(this),gm(this);break e}Wf(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ys(this,t)}this.U?(bA(this,S,c),Mb&&this.i&&3==S&&(uP(this.V,this.W,"tick",this.fb),this.W.start())):(Wf(this.j,this.m,c,null),Ys(this,c)),4==S&&Kd(this),this.i&&!this.I&&(4==S?MP(this.l,this):(this.i=!1,pm(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,us(12)):(this.o=0,us(13)),Kd(this),gm(this)}}}catch(S){}},Xe.fb=function(){if(this.g){var n=el(this.g),e=this.g.ga();this.C<e.length&&(vv(this),bA(this,n,e),this.i&&4!=n&&pm(this))}},Xe.cancel=function(){this.I=!0,Kd(this)},Xe.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(gv(3),us(17)),Kd(this),this.o=2,gm(this)):mP(this,this.Y-n)},(Xe=qf.prototype).R=function(){wv(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Xe.T=function(){return wv(this),this.g.concat()},Xe.get=function(n,e){return yc(this.h,n)?this.h[n]:e},Xe.set=function(n,e){yc(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Xe.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var nC=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ju(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Ju){this.g=void 0!==e?e:n.g,Zd(this,n.j),this.s=n.s,Yd(this,n.i),mm(this,n.m),this.l=n.l,e=n.h;var t=new vc;t.i=e.i,e.g&&(t.g=new qf(e.g),t.h=e.h),iC(this,t),this.o=n.o}else n&&(t=String(n).match(nC))?(this.g=!!e,Zd(this,t[1]||"",!0),this.s=_m(t[2]||""),Yd(this,t[3]||"",!0),mm(this,t[4]),this.l=_m(t[5]||"",!0),iC(this,t[6]||"",!0),this.o=_m(t[7]||"")):(this.g=!!e,this.h=new vc(null,this.g))}function ba(n){return new Ju(n)}function Zd(n,e,t){n.j=t?_m(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Yd(n,e,t){n.i=t?_m(e,!0):e}function mm(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function iC(n,e,t){e instanceof vc?(n.h=e,function(n,e){e&&!n.j&&(su(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(oC(this,r),DA(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=ym(e,Cv)),n.h=new vc(e,n.g))}function sr(n,e,t){n.h.set(e,t)}function bv(n){return sr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function _m(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ym(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,sC),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function sC(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ju.prototype.toString=function(){var n=[],e=this.j;e&&n.push(ym(e,IA,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(ym(e,IA,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(ym(t,"/"==t.charAt(0)?vm:ls,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",ym(t,TA)),n.join("")};var IA=/[#\/\?@]/g,ls=/[#\?:]/g,vm=/[#\?]/g,Cv=/[#\?@]/g,TA=/#/g;function vc(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function su(n){n.g||(n.g=new qf,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function oC(n,e){su(n),e=zf(n,e),yc(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,yc((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&wv(n)))}function Em(n,e){return su(n),e=zf(n,e),yc(n.g.h,e)}function DA(n,e,t){oC(n,e),0<t.length&&(n.i=null,n.g.set(zf(n,e),Sb(t)),n.h+=t.length)}function zf(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function aC(n){this.l=n||EP,n=Ot.PerformanceNavigationTiming?0<(n=Ot.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ot.g&&Ot.g.Ea&&Ot.g.Ea()&&Ot.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Xe=vc.prototype).add=function(n,e){su(this),this.i=null,n=zf(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Xe.forEach=function(n,e){su(this),this.g.forEach(function(t,r){nv(t,function(o){n.call(e,o,r,this)},this)},this)},Xe.T=function(){su(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},Xe.R=function(n){su(this);var e=[];if("string"==typeof n)Em(this,n)&&(e=Db(e,this.g.get(zf(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Db(e,n[t])}return e},Xe.set=function(n,e){return su(this),this.i=null,Em(this,n=zf(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Xe.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Xe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=o;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var EP=10;function SA(n){return!!n.h||!!n.g&&n.g.size>=n.j}function AA(n){return n.h?1:n.g?n.g.size:0}function ou(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Qd(n,e){n.g?n.g.add(e):n.h=e}function Iv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function xA(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Sb(n.i)}function uC(){}function wP(){this.g=new uC}function lC(n,e,t){const r=t||"";try{Ev(n,function(o,u){let c=o;ev(o)&&(c=jb(o)),e.push(r+u+"="+encodeURIComponent(c))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function wm(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function Kf(n){this.l=n.$b||null,this.j=n.ib||!1}function Tv(n,e){ci.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=cC,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}aC.prototype.cancel=function(){if(this.i=xA(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},uC.prototype.stringify=function(n){return Ot.JSON.stringify(n,void 0)},uC.prototype.parse=function(n){return Ot.JSON.parse(n,void 0)},Sn(Kf,Yb),Kf.prototype.g=function(){return new Tv(this.l,this.j)},Kf.prototype.i=function(n){return function(){return n}}({}),Sn(Tv,ci);var cC=0;function RA(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Qs(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Xu(n)}function Xu(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Xe=Tv.prototype).open=function(n,e){if(this.readyState!=cC)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Xu(this)},Xe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ot).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Xe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Qs(this)),this.readyState=cC},Xe.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Xu(this)),this.g&&(this.readyState=3,Xu(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ot.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;RA(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Xe.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Qs(this):Xu(this),3==this.readyState&&RA(this)}},Xe.Ua=function(n){this.g&&(this.response=this.responseText=n,Qs(this))},Xe.Ta=function(n){this.g&&(this.response=n,Qs(this))},Xe.ha=function(){this.g&&Qs(this)},Xe.setRequestHeader=function(n,e){this.v.append(n,e)},Xe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Xe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Tv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Zf=Ot.JSON.parse;function dr(n){ci.call(this),this.headers=new qf,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Jd,this.K=this.L=!1}Sn(dr,ci);var Jd="",CP=/^https?$/i,IP=["POST","PUT"];function NA(n){return"content-type"==n.toLowerCase()}function dC(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,hC(n),Yf(n)}function hC(n){n.D||(n.D=!0,Lr(n,"complete"),Lr(n,"error"))}function fC(n){if(n.h&&void 0!==JS&&(!n.C[1]||4!=el(n)||2!=n.ba()))if(n.v&&4==el(n))Zb(n.Fa,0,n);else if(Lr(n,"readystatechange"),4==el(n)){n.h=!1;try{const p=n.ba();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var o=String(n.H).match(nC)[1]||null;if(!o&&Ot.self&&Ot.self.location){var u=Ot.self.location.protocol;o=u.substr(0,u.length-1)}r=!CP.test(o?o.toLowerCase():"")}t=r}if(t)Lr(n,"complete"),Lr(n,"success");else{n.m=6;try{var c=2<el(n)?n.g.statusText:""}catch(y){c=""}n.j=c+" ["+n.ba()+"]",hC(n)}}finally{Yf(n)}}}function Yf(n,e){if(n.g){MA(n);const t=n.g,r=n.C[0]?Xy:null;n.g=null,n.C=null,e||Lr(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function MA(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ot.clearTimeout(n.A),n.A=null)}function el(n){return n.g?n.g.readyState:0}function pC(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Jd:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function bm(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function(n){let e="";return um(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):sr(n,e,t))}function Cm(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function PA(n){this.za=0,this.l=[],this.h=new fv,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Cm("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Cm("baseRetryDelayMs",5e3,n),this.$a=Cm("retryDelaySeedMs",1e4,n),this.Ya=Cm("forwardChannelMaxRetries",2,n),this.ra=Cm("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new aC(n&&n.concurrentRequestLimit),this.Ca=new wP,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function OA(n){if(DP(n),3==n.G){var e=n.V++,t=ba(n.F);sr(t,"SID",n.J),sr(t,"RID",e),sr(t,"TYPE","terminate"),Sv(n,t),(e=new Qu(n,n.h,e,void 0)).K=2,e.v=bv(ba(t)),t=!1,Ot.navigator&&Ot.navigator.sendBeacon&&(t=Ot.navigator.sendBeacon(e.v.toString(),"")),!t&&Ot.Image&&((new Image).src=e.v,t=!0),t||(e.g=d(e.l,null),e.g.ea(e.v)),e.F=Date.now(),pm(e)}a(n)}function gC(n){n.g&&(FA(n),n.g.cancel(),n.g=null)}function DP(n){gC(n),n.u&&(Ot.clearTimeout(n.u),n.u=null),_C(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ot.clearTimeout(n.m),n.m=null)}function kA(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Dv(n)}function Dv(n){SA(n.i)||n.m||(n.m=!0,Wb(n.Ha,n),n.C=0)}function AP(n,e){var t;t=e?e.m:n.V++;const r=ba(n.F);sr(r,"SID",n.J),sr(r,"RID",t),sr(r,"AID",n.U),Sv(n,r),n.o&&n.s&&bm(r,n.o,n.s),t=new Qu(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=xP(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Qd(n.i,t),wA(t,r,e)}function Sv(n,e){n.j&&Ev({},function(t,r){sr(e,r,t)})}function xP(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Jr(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=o[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let p=!0;for(let y=0;y<t;y++){let b=o[y].h;const S=o[y].g;if(b-=u,0>b)u=Math.max(0,o[y].h-100),p=!1;else try{lC(S,c,"req"+b+"_")}catch(x){r&&r(S)}}if(p){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function RP(n){n.g||n.u||(n.Y=1,Wb(n.Ga,n),n.A=0)}function mC(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=hm(Jr(n.Ga,n),i(n,n.A)),n.A++,0))}function FA(n){null!=n.B&&(Ot.clearTimeout(n.B),n.B=null)}function NP(n){n.g=new Qu(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=ba(n.oa);sr(e,"RID","rpc"),sr(e,"SID",n.J),sr(e,"CI",n.N?"0":"1"),sr(e,"AID",n.U),Sv(n,e),sr(e,"TYPE","xmlhttp"),n.o&&n.s&&bm(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=bv(ba(e)),t.s=null,t.U=!0,pP(t,n)}function _C(n){null!=n.v&&(Ot.clearTimeout(n.v),n.v=null)}function MP(n,e){var t=null;if(n.g==e){_C(n),FA(n),n.g=null;var r=2}else{if(!ou(n.i,e))return;t=e.D,Iv(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Lr(r=pv(),new _A(r,t,e,o)),Dv(n)}else RP(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function(n,e){return!(AA(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=hm(Jr(n.Ha,n,e),i(n,n.C)),n.C++,0)))}(n,e)||2==r&&mC(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:s(n,5);break;case 4:s(n,10);break;case 3:s(n,6);break;default:s(n,2)}}function i(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function s(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Jr(n.jb,n);t||(t=new Ju("//www.google.com/images/cleardot.gif"),Ot.location&&"http"==Ot.location.protocol||Zd(t,"https"),bv(t)),function(n,e){const t=new fv;if(Ot.Image){const r=new Image;r.onload=tv(wm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=tv(wm,t,r,"TestLoadImage: error",!1,e),r.onabort=tv(wm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=tv(wm,t,r,"TestLoadImage: timeout",!1,e),Ot.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else us(2);n.G=0,n.j&&n.j.va(e),a(n),DP(n)}function a(n){n.G=0,n.I=-1,n.j&&((0!=xA(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Sb(n.l),n.l.length=0),n.j.ua())}function l(n,e,t){let r=function(n){return n instanceof Ju?ba(n):new Ju(n,void 0)}(t);if(""!=r.i)e&&Yd(r,e+"."+r.i),mm(r,r.m);else{const o=Ot.location;r=function(n,e,t,r){var o=new Ju(null,void 0);return n&&Zd(o,n),e&&Yd(o,e),t&&mm(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&um(n.aa,function(o,u){sr(r,u,o)}),t=n.sa,(e=n.D)&&t&&sr(r,e,t),sr(r,"VER",n.ma),Sv(n,r),r}function d(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new dr(t&&n.Ba&&!n.qa?new Kf({ib:!0}):n.qa)).L=n.H,e}function h(){}function _(){if(Hf&&!(10<=Number(tP)))throw Error("Environmental error: no available transport.")}function E(n,e){ci.call(this),this.g=new PA(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!am(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!am(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new R(this)}function C(n){EA.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function T(){Qb.call(this),this.status=1}function R(n){this.g=n}(Xe=dr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Jb.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:Jb),this.g.onreadystatechange=Jr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void dC(this,u)}n=t||"";const o=new qf(this.headers);r&&Ev(r,function(u,c){o.set(c,u)}),r=function(n){e:{var e=NA;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=Ot.FormData&&n instanceof Ot.FormData,!(0<=eA(IP,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{MA(this),0<this.B&&((this.K=function(n){return Hf&&oA()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Jr(this.pa,this)):this.A=Zb(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){dC(this,u)}},Xe.pa=function(){void 0!==JS&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Lr(this,"timeout"),this.abort(8))},Xe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Lr(this,"complete"),Lr(this,"abort"),Yf(this))},Xe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Yf(this,!0)),dr.Z.M.call(this)},Xe.Fa=function(){this.s||(this.F||this.v||this.l?fC(this):this.cb())},Xe.cb=function(){fC(this)},Xe.ba=function(){try{return 2<el(this)?this.g.status:-1}catch(n){return-1}},Xe.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Xe.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Zf(e)}},Xe.Da=function(){return this.m},Xe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Xe=PA.prototype).ma=8,Xe.G=1,Xe.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Xe.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new Qu(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=nA(u),rA(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=xP(this,o,e),sr(t=ba(this.F),"RID",n),sr(t,"CVER",22),this.D&&sr(t,"X-HTTP-Session-Id",this.D),Sv(this,t),this.o&&u&&bm(t,this.o,u),Qd(this.i,o),this.Ra&&sr(t,"TYPE","init"),this.ja?(sr(t,"$req",e),sr(t,"SID","null"),o.$=!0,wA(o,t,null)):wA(o,t,e),this.G=2}}else 3==this.G&&(n?AP(this,n):0==this.l.length||SA(this.i)||AP(this))},Xe.Ga=function(){if(this.u=null,NP(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=hm(Jr(this.bb,this),n)}},Xe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,us(10),gC(this),NP(this))},Xe.ab=function(){null!=this.v&&(this.v=null,gC(this),mC(this),us(19))},Xe.jb=function(n){n?(this.h.info("Successfully pinged google.com"),us(2)):(this.h.info("Failed to ping google.com"),us(1))},(Xe=h.prototype).xa=function(){},Xe.wa=function(){},Xe.va=function(){},Xe.ua=function(){},Xe.Oa=function(){},_.prototype.g=function(n,e){return new E(n,e)},Sn(E,ci),E.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Wb(Jr(n.hb,n,e))),us(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=l(n,null,n.W),Dv(n)},E.prototype.close=function(){OA(this.g)},E.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,kA(this.g,e)}else this.v?((e={}).__data__=jb(n),kA(this.g,e)):kA(this.g,n)},E.prototype.M=function(){this.g.j=null,delete this.j,OA(this.g),delete this.g,E.Z.M.call(this)},Sn(C,EA),Sn(T,Qb),Sn(R,h),R.prototype.xa=function(){Lr(this.g,"a")},R.prototype.wa=function(n){Lr(this.g,new C(n))},R.prototype.va=function(n){Lr(this.g,new T(n))},R.prototype.ua=function(){Lr(this.g,"b")},_.prototype.createWebChannel=_.prototype.g,E.prototype.send=E.prototype.u,E.prototype.open=E.prototype.m,E.prototype.close=E.prototype.close,mv.NO_ERROR=0,mv.TIMEOUT=8,mv.HTTP_ERROR=6,$o.COMPLETE="complete",vA.EventType=fm,fm.OPEN="a",fm.CLOSE="b",fm.ERROR="c",fm.MESSAGE="d",ci.prototype.listen=ci.prototype.N,dr.prototype.listenOnce=dr.prototype.O,dr.prototype.getLastError=dr.prototype.La,dr.prototype.getLastErrorCode=dr.prototype.Da,dr.prototype.getStatus=dr.prototype.ba,dr.prototype.getResponseJson=dr.prototype.Qa,dr.prototype.getResponseText=dr.prototype.ga,dr.prototype.send=dr.prototype.ea;var P=mc.createWebChannelTransport=function(){return new _},F=mc.getStatEventTarget=function(){return pv()},W=mc.ErrorCode=mv,Y=mc.EventType=$o,de=mc.Event=zd,ie=mc.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},ke=mc.FetchXmlHttpFactory=Kf,we=mc.WebChannel=vA,ct=mc.XhrIo=dr;const It="@firebase/firestore";class yt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");let or="9.6.11";const Xr=new da.Yd("@firebase/firestore");function eh(){return Xr.logLevel}function Fe(n,...e){if(Xr.logLevel<=da.in.DEBUG){const t=e.map(Im);Xr.debug(`Firestore (${or}): ${n}`,...t)}}function Yn(n,...e){if(Xr.logLevel<=da.in.ERROR){const t=e.map(Im);Xr.error(`Firestore (${or}): ${n}`,...t)}}function th(n,...e){if(Xr.logLevel<=da.in.WARN){const t=e.map(Im);Xr.warn(`Firestore (${or}): ${n}`,...t)}}function Im(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function et(n="Unexpected state"){const e=`FIRESTORE (${or}) INTERNAL ASSERTION FAILED: `+n;throw Yn(e),new Error(e)}function Tt(n,e){n||et()}function Ye(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends k.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class $i{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class xF{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class M2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yt.UNAUTHENTICATED))}shutdown(){}}class P2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class O2{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=b=>this.i!==o?(o=this.i,t(b)):Promise.resolve();let c=new $i;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new $i,e.enqueueRetryable(()=>u(this.currentUser))};const p=()=>{const b=c;e.enqueueRetryable((0,Ee.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},y=b=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(b=>y(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?y(b):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new $i)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Tt("string"==typeof r.accessToken),new xF(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Tt(null===e||"string"==typeof e),new yt(e)}}class k2{constructor(e,t,r){this.type="FirstParty",this.user=yt.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class F2{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new k2(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class RF{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class L2{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.p;return this.p=u.token,Fe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Tt("string"==typeof t.token),this.p=t.token,new RF(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Ca{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function V2(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Ca.A=-1;class NF{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=V2(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Yt(n,e){return n<e?-1:n>e?1:0}function Av(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function MF(n){return n+"\0"}class ei{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pe(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ei.fromMillis(Date.now())}static fromDate(e){return ei.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ei(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Yt(this.nanoseconds,e.nanoseconds):Yt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Rt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Rt(e)}static min(){return new Rt(new ei(0,0))}static max(){return new Rt(new ei(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function PF(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Tm(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function OF(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class vC{constructor(e,t,r){void 0===t?t=0:t>e.length&&et(),void 0===r?r=e.length-t:r>e.length-t&&et(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===vC.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof vC?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),c=t.get(o);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class _n extends vC{construct(e,t,r){return new _n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new _n(t)}static emptyPath(){return new _n([])}}const U2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hi extends vC{construct(e,t,r){return new Hi(e,t,r)}static isValidIdentifier(e){return U2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Hi(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Pe(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const p=e[o];if("\\"===p){if(o+1===e.length)throw new Pe(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new Pe(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,o+=2}else"`"===p?(c=!c,o++):"."!==p||c?(r+=p,o++):(u(),o++)}if(u(),c)throw new Pe(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Hi(t)}static emptyPath(){return new Hi([])}}class xv{constructor(e){this.fields=e,e.sort(Hi.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Av(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ii{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ii(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Ii(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Yt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ii.EMPTY_BYTE_STRING=new Ii("");const j2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jf(n){if(Tt(!!n),"string"==typeof n){let e=0;const t=j2.exec(n);if(Tt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Vr(n.seconds),nanos:Vr(n.nanos)}}function Vr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Dm(n){return"string"==typeof n?Ii.fromBase64String(n):Ii.fromUint8Array(n)}function PP(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function kF(n){const e=n.mapValue.fields.__previous_value__;return PP(e)?kF(e):e}function EC(n){const e=Jf(n.mapValue.fields.__local_write_time__.timestampValue);return new ei(e.seconds,e.nanos)}class $2{constructor(e,t,r,o,u,c,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.useFetchStreams=y}}class nh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new nh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof nh&&e.projectId===this.projectId&&e.database===this.database}}function Sm(n){return null==n}function wC(n){return 0===n&&1/n==-1/0}function FF(n){return"number"==typeof n&&Number.isInteger(n)&&!wC(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class We{constructor(e){this.path=e}static fromPath(e){return new We(_n.fromString(e))}static fromName(e){return new We(_n.fromString(e).popFirst(5))}static empty(){return new We(_n.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===_n.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return _n.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new We(new _n(e.slice()))}}const LF={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},VF={nullValue:"NULL_VALUE"};function Am(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?PP(n)?4:$F(n)?9:10:et()}function Ec(n,e){if(n===e)return!0;const t=Am(n);if(t!==Am(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return EC(n).isEqual(EC(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Jf(r.timestampValue),c=Jf(o.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Dm(n.bytesValue).isEqual(Dm(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Vr(r.geoPointValue.latitude)===Vr(o.geoPointValue.latitude)&&Vr(r.geoPointValue.longitude)===Vr(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Vr(r.integerValue)===Vr(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Vr(r.doubleValue),c=Vr(o.doubleValue);return u===c?wC(u)===wC(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return Av(n.arrayValue.values||[],e.arrayValue.values||[],Ec);case 10:return function(r,o){const u=r.mapValue.fields||{},c=o.mapValue.fields||{};if(PF(u)!==PF(c))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(void 0===c[p]||!Ec(u[p],c[p])))return!1;return!0}(n,e);default:return et()}var o}function bC(n,e){return void 0!==(n.values||[]).find(t=>Ec(t,e))}function Xf(n,e){if(n===e)return 0;const t=Am(n),r=Am(e);if(t!==r)return Yt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Yt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const c=Vr(o.integerValue||o.doubleValue),p=Vr(u.integerValue||u.doubleValue);return c<p?-1:c>p?1:c===p?0:isNaN(c)?isNaN(p)?0:-1:1}(n,e);case 3:return UF(n.timestampValue,e.timestampValue);case 4:return UF(EC(n),EC(e));case 5:return Yt(n.stringValue,e.stringValue);case 6:return function(o,u){const c=Dm(o),p=Dm(u);return c.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const c=o.split("/"),p=u.split("/");for(let y=0;y<c.length&&y<p.length;y++){const b=Yt(c[y],p[y]);if(0!==b)return b}return Yt(c.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const c=Yt(Vr(o.latitude),Vr(u.latitude));return 0!==c?c:Yt(Vr(o.longitude),Vr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const c=o.values||[],p=u.values||[];for(let y=0;y<c.length&&y<p.length;++y){const b=Xf(c[y],p[y]);if(b)return b}return Yt(c.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){const c=o.fields||{},p=Object.keys(c),y=u.fields||{},b=Object.keys(y);p.sort(),b.sort();for(let S=0;S<p.length&&S<b.length;++S){const x=Yt(p[S],b[S]);if(0!==x)return x;const O=Xf(c[p[S]],y[b[S]]);if(0!==O)return O}return Yt(p.length,b.length)}(n.mapValue,e.mapValue);default:throw et()}}function UF(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Yt(n,e);const t=Jf(n),r=Jf(e),o=Yt(t.seconds,r.seconds);return 0!==o?o:Yt(t.nanos,r.nanos)}function Rv(n){return OP(n)}function OP(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Jf(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Dm(n.bytesValue).toBase64():"referenceValue"in n?We.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const c of r.values||[])u?u=!1:o+=",",o+=OP(c);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const p of o)c?c=!1:u+=",",u+=`${p}:${OP(r.fields[p])}`;return u+"}"}(n.mapValue):et();var e}function xm(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function kP(n){return!!n&&"integerValue"in n}function CC(n){return!!n&&"arrayValue"in n}function BF(n){return!!n&&"nullValue"in n}function jF(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function LA(n){return!!n&&"mapValue"in n}function IC(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Tm(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=IC(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=IC(n.arrayValue.values[t]);return e}return Object.assign({},n)}function $F(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function H2(n){return"nullValue"in n?VF:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?xm(nh.empty(),We.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:et()}function G2(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?xm(nh.empty(),We.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?LF:et()}function HF(n,e){return void 0===n?e:void 0===e||Xf(n,e)>0?n:e}function GF(n,e){return void 0===n?e:void 0===e||Xf(n,e)<0?n:e}class Ss{constructor(e){this.value=e}static empty(){return new Ss({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!LA(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=IC(t)}setAll(e){let t=Hi.emptyPath(),r={},o=[];e.forEach((c,p)=>{if(!t.isImmediateParentOf(p)){const y=this.getFieldsMap(t);this.applyChanges(y,r,o),r={},o=[],t=p.popLast()}c?r[p.lastSegment()]=IC(c):o.push(p.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());LA(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ec(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];LA(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Tm(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Ss(IC(this.value))}}function WF(n){const e=[];return Tm(n.fields,(t,r)=>{const o=new Hi([t]);if(LA(r)){const u=WF(r.mapValue).fields;if(0===u.length)e.push(o);else for(const c of u)e.push(o.child(c))}else e.push(o)}),new xv(e)}class hr{constructor(e,t,r,o,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=c}static newInvalidDocument(e){return new hr(e,0,Rt.min(),Rt.min(),Ss.empty(),0)}static newFoundDocument(e,t,r){return new hr(e,1,t,Rt.min(),r,0)}static newNoDocument(e,t){return new hr(e,2,t,Rt.min(),Ss.empty(),0)}static newUnknownDocument(e,t){return new hr(e,3,t,Rt.min(),Ss.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ss.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ss.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof hr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class VA{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function FP(n){return n.fields.find(e=>2===e.kind)}function Rm(n){return n.fields.filter(e=>2!==e.kind)}VA.UNKNOWN_ID=-1;class UA{constructor(e,t){this.fieldPath=e,this.kind=t}}class TC{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new TC(0,rh.min())}}function qF(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Rt.fromTimestamp(1e9===r?new ei(t+1,0):new ei(t,r));return new rh(o,We.empty(),e)}function W2(n){return new rh(n.readTime,n.key,-1)}class rh{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new rh(Rt.min(),We.empty(),-1)}static max(){return new rh(Rt.max(),We.empty(),-1)}}function q2(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=We.comparator(n.documentKey,e.documentKey),0!==t?t:Yt(n.largestBatchId,e.largestBatchId))}class z2{constructor(e,t=null,r=[],o=[],u=null,c=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=c,this.endAt=p,this.P=null}}function zF(n,e=null,t=[],r=[],o=null,u=null,c=null){return new z2(n,e,t,r,o,u,c)}function Nm(n){const e=Ye(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Rv(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Sm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Rv(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Rv(r)).join(",")),e.P=t}return e.P}function DC(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!nB(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Ec(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!JF(n.startAt,e.startAt)&&JF(n.endAt,e.endAt)}function BA(n){return We.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function jA(n,e){return n.filters.filter(t=>t instanceof cs&&t.field.isEqual(e))}function KF(n,e,t){let r,o=!0;for(const u of jA(n,e)){let c,p=!0;switch(u.op){case"<":case"<=":c=H2(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,p=!1;break;case"!=":case"not-in":c=VF}HF(r,c)===c&&(r=c,o=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];HF(r,c)===c&&(r=c,o=t.inclusive);break}return{value:r,inclusive:o}}function ZF(n,e,t){let r,o=!0;for(const u of jA(n,e)){let c,p=!0;switch(u.op){case">=":case">":c=G2(u.value),p=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,p=!1;break;case"!=":case"not-in":c=LF}GF(r,c)===c&&(r=c,o=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];GF(r,c)===c&&(r=c,o=t.inclusive);break}return{value:r,inclusive:o}}class cs extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Z2(e,t,r):"array-contains"===t?new J2(e,r):"in"===t?new X2(e,r):"not-in"===t?new eB(e,r):"array-contains-any"===t?new tB(e,r):new cs(e,t,r)}static V(e,t,r){return"in"===t?new Y2(e,r):new Q2(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Xf(t,this.value)):null!==t&&Am(this.value)===Am(t)&&this.v(Xf(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return et()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Z2 extends cs{constructor(e,t,r){super(e,t,r),this.key=We.fromName(r.referenceValue)}matches(e){const t=We.comparator(e.key,this.key);return this.v(t)}}class Y2 extends cs{constructor(e,t){super(e,"in",t),this.keys=YF(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Q2 extends cs{constructor(e,t){super(e,"not-in",t),this.keys=YF(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function YF(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>We.fromName(r.referenceValue))}class J2 extends cs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return CC(t)&&bC(t.arrayValue,this.value)}}class X2 extends cs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&bC(this.value.arrayValue,t)}}class eB extends cs{constructor(e,t){super(e,"not-in",t)}matches(e){if(bC(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!bC(this.value.arrayValue,t)}}class tB extends cs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!CC(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>bC(this.value.arrayValue,r))}}class ep{constructor(e,t){this.position=e,this.inclusive=t}}class Nv{constructor(e,t="asc"){this.field=e,this.dir=t}}function nB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function QF(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],c=n.position[o];if(r=u.field.isKeyField()?We.comparator(We.fromName(c.referenceValue),t.key):Xf(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function JF(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ec(n.position[t],e.position[t]))return!1;return!0}class ih{constructor(e,t=null,r=[],o=[],u=null,c="F",p=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=c,this.startAt=p,this.endAt=y,this.D=null,this.C=null}}function XF(n,e,t,r,o,u,c,p){return new ih(n,e,t,r,o,u,c,p)}function Mv(n){return new ih(n)}function $A(n){return!Sm(n.limit)&&"F"===n.limitType}function HA(n){return!Sm(n.limit)&&"L"===n.limitType}function LP(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function VP(n){for(const e of n.filters)if(e.S())return e.field;return null}function UP(n){return null!==n.collectionGroup}function Pv(n){const e=Ye(n);if(null===e.D){e.D=[];const t=VP(e),r=LP(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Nv(t)),e.D.push(new Nv(Hi.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Nv(Hi.keyField(),u))}}}return e.D}function au(n){const e=Ye(n);if(!e.C)if("F"===e.limitType)e.C=zF(e.path,e.collectionGroup,Pv(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Pv(e))t.push(new Nv(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new ep(e.endAt.position,!e.endAt.inclusive):null,o=e.startAt?new ep(e.startAt.position,!e.startAt.inclusive):null;e.C=zF(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function eL(n,e,t){return new ih(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function SC(n,e){return DC(au(n),au(e))&&n.limitType===e.limitType}function tL(n){return`${Nm(au(n))}|lt:${n.limitType}`}function BP(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Rv(r.value)}`;var r}).join(", ")}]`),Sm(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Rv(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Rv(t)).join(",")),`Target(${e})`}(au(n))}; limitType=${n.limitType})`}function jP(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):We.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,c){const p=QF(o,u,c);return o.inclusive?p<=0:p<0}(t.startAt,Pv(t),r)||t.endAt&&!function(o,u,c){const p=QF(o,u,c);return o.inclusive?p>=0:p>0}(t.endAt,Pv(t),r)));var t,r}function nL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function rL(n){return(e,t)=>{let r=!1;for(const o of Pv(n)){const u=rB(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function rB(n,e,t){const r=n.field.isKeyField()?We.comparator(e.key,t.key):function(o,u,c){const p=u.data.field(o),y=c.data.field(o);return null!==p&&null!==y?Xf(p,y):et()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return et()}}function iL(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wC(e)?"-0":e}}function sL(n){return{integerValue:""+n}}function oL(n,e){return FF(e)?sL(e):iL(n,e)}class GA{constructor(){this._=void 0}}function iB(n,e,t){return n instanceof Ov?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Mm?uL(n,e):n instanceof Pm?lL(n,e):function(r,o){const u=aL(r,o),c=cL(u)+cL(r.k);return kP(u)&&kP(r.k)?sL(c):iL(r.M,c)}(n,e)}function sB(n,e,t){return n instanceof Mm?uL(n,e):n instanceof Pm?lL(n,e):t}function aL(n,e){return n instanceof kv?kP(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Ov extends GA{}class Mm extends GA{constructor(e){super(),this.elements=e}}function uL(n,e){const t=dL(e);for(const r of n.elements)t.some(o=>Ec(o,r))||t.push(r);return{arrayValue:{values:t}}}class Pm extends GA{constructor(e){super(),this.elements=e}}function lL(n,e){let t=dL(e);for(const r of n.elements)t=t.filter(o=>!Ec(o,r));return{arrayValue:{values:t}}}class kv extends GA{constructor(e,t){super(),this.M=e,this.k=t}}function cL(n){return Vr(n.integerValue||n.doubleValue)}function dL(n){return CC(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class AC{constructor(e,t){this.field=e,this.transform=t}}class aB{constructor(e,t){this.version=e,this.transformResults=t}}class hi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new hi}static exists(e){return new hi(void 0,e)}static updateTime(e){return new hi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function WA(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class qA{}function uB(n,e,t){n instanceof xC?function(r,o,u){const c=r.value.clone(),p=gL(r.fieldTransforms,o,u.transformResults);c.setAll(p),o.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Om?function(r,o,u){if(!WA(r.precondition,o))return void o.convertToUnknownDocument(u.version);const c=gL(r.fieldTransforms,o,u.transformResults),p=o.data;p.setAll(pL(r)),p.setAll(c),o.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function $P(n,e,t){var o;n instanceof xC?function(r,o,u){if(!WA(r.precondition,o))return;const c=r.value.clone(),p=mL(r.fieldTransforms,u,o);c.setAll(p),o.convertToFoundDocument(fL(o),c).setHasLocalMutations()}(n,e,t):n instanceof Om?function(r,o,u){if(!WA(r.precondition,o))return;const c=mL(r.fieldTransforms,u,o),p=o.data;p.setAll(pL(r)),p.setAll(c),o.convertToFoundDocument(fL(o),p).setHasLocalMutations()}(n,e,t):WA(n.precondition,o=e)&&o.convertToNoDocument(Rt.min())}function lB(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=aL(r.transform,o||null);null!=u&&(null==t&&(t=Ss.empty()),t.set(r.field,u))}return t||null}function hL(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Av(t,r,(o,u)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Mm&&r instanceof Mm||t instanceof Pm&&r instanceof Pm?Av(t.elements,r.elements,Ec):t instanceof kv&&r instanceof kv?Ec(t.k,r.k):t instanceof Ov&&r instanceof Ov);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function fL(n){return n.isFoundDocument()?n.version:Rt.min()}class xC extends qA{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class Om extends qA{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function pL(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function gL(n,e,t){const r=new Map;Tt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],c=u.transform,p=e.data.field(u.field);r.set(u.field,sB(c,p,t[o]))}return r}function mL(n,e,t){const r=new Map;for(const o of n){const u=o.transform,c=t.data.field(o.field);r.set(o.field,iB(u,c,e))}return r}class RC extends qA{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class HP extends qA{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class cB{constructor(e){this.count=e}}var fi,yn;function _L(n){switch(n){default:return et();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function yL(n){if(void 0===n)return Yn("GRPC error has no .code"),ge.UNKNOWN;switch(n){case fi.OK:return ge.OK;case fi.CANCELLED:return ge.CANCELLED;case fi.UNKNOWN:return ge.UNKNOWN;case fi.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case fi.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case fi.INTERNAL:return ge.INTERNAL;case fi.UNAVAILABLE:return ge.UNAVAILABLE;case fi.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case fi.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case fi.NOT_FOUND:return ge.NOT_FOUND;case fi.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case fi.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case fi.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case fi.ABORTED:return ge.ABORTED;case fi.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case fi.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case fi.DATA_LOSS:return ge.DATA_LOSS;default:return et()}}(yn=fi||(fi={}))[yn.OK=0]="OK",yn[yn.CANCELLED=1]="CANCELLED",yn[yn.UNKNOWN=2]="UNKNOWN",yn[yn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yn[yn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yn[yn.NOT_FOUND=5]="NOT_FOUND",yn[yn.ALREADY_EXISTS=6]="ALREADY_EXISTS",yn[yn.PERMISSION_DENIED=7]="PERMISSION_DENIED",yn[yn.UNAUTHENTICATED=16]="UNAUTHENTICATED",yn[yn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yn[yn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yn[yn.ABORTED=10]="ABORTED",yn[yn.OUT_OF_RANGE=11]="OUT_OF_RANGE",yn[yn.UNIMPLEMENTED=12]="UNIMPLEMENTED",yn[yn.INTERNAL=13]="INTERNAL",yn[yn.UNAVAILABLE=14]="UNAVAILABLE",yn[yn.DATA_LOSS=15]="DATA_LOSS";class tp{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Tm(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return OF(this.inner)}size(){return this.innerSize}}class ti{constructor(e,t){this.comparator=e,this.root=t||ds.EMPTY}insert(e,t){return new ti(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ds.BLACK,null,null))}remove(e){return new ti(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ds.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zA(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zA(this.root,e,this.comparator,!1)}getReverseIterator(){return new zA(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zA(this.root,e,this.comparator,!0)}}class zA{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ds{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:ds.RED,this.left=null!=o?o:ds.EMPTY,this.right=null!=u?u:ds.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new ds(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return ds.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return ds.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ds.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ds.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw et();const e=this.left.check();if(e!==this.right.check())throw et();return e+(this.isRed()?0:1)}}ds.EMPTY=null,ds.RED=!0,ds.BLACK=!1,ds.EMPTY=new class{constructor(){this.size=0}get key(){throw et()}get value(){throw et()}get color(){throw et()}get left(){throw et()}get right(){throw et()}copy(n,e,t,r,o){return this}insert(n,e,t){return new ds(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class fr{constructor(e){this.comparator=e,this.data=new ti(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new vL(this.data.getIterator())}getIteratorFrom(e){return new vL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof fr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new fr(this.comparator);return t.data=e,t}}class vL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Fv(n){return n.hasNext()?n.getNext():void 0}const dB=new ti(We.comparator);function uu(){return dB}const hB=new ti(We.comparator);function GP(){return hB}function NC(){return new tp(n=>n.toString(),(n,e)=>n.isEqual(e))}const fB=new ti(We.comparator),pB=new fr(We.comparator);function Nn(...n){let e=pB;for(const t of n)e=e.add(t);return e}const gB=new fr(Yt);function KA(){return gB}class MC{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,PC.createSynthesizedTargetChangeForCurrentChange(e,t)),new MC(Rt.min(),r,KA(),uu(),Nn())}}class PC{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new PC(Ii.EMPTY_BYTE_STRING,t,Nn(),Nn(),Nn())}}class ZA{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class EL{constructor(e,t){this.targetId=e,this.$=t}}class wL{constructor(e,t,r=Ii.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class bL{constructor(){this.B=0,this.L=IL(),this.U=Ii.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Nn(),t=Nn(),r=Nn();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:et()}}),new PC(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=IL()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class mB{constructor(e){this.nt=e,this.st=new Map,this.it=uu(),this.rt=CL(),this.ot=new fr(Yt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:et()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const u=o.target;if(BA(u))if(0===r){const c=new We(u.path);this.ct(t,c,hr.newNoDocument(c,Rt.min()))}else Tt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,c)=>{const p=this.wt(c);if(p){if(u.current&&BA(p.target)){const y=new We(p.target.path);null!==this.it.get(y)||this.It(c,y)||this.ct(c,y,hr.newNoDocument(y,e))}u.j&&(t.set(c,u.H()),u.J())}});let r=Nn();this.rt.forEach((u,c)=>{let p=!0;c.forEachWhile(y=>{const b=this.wt(y);return!b||2===b.purpose||(p=!1,!1)}),p&&(r=r.add(u))}),this.it.forEach((u,c)=>c.setReadTime(e));const o=new MC(e,t,this.ot,this.it,r);return this.it=uu(),this.rt=CL(),this.ot=new fr(Yt),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new bL,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new fr(Yt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Fe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new bL),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function CL(){return new ti(We.comparator)}function IL(){return new ti(We.comparator)}const _B={asc:"ASCENDING",desc:"DESCENDING"},yB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class vB{constructor(e,t){this.databaseId=e,this.N=t}}function OC(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TL(n,e){return n.N?e.toBase64():e.toUint8Array()}function EB(n,e){return OC(n,e.toTimestamp())}function Gi(n){return Tt(!!n),Rt.fromTimestamp(function(e){const t=Jf(e);return new ei(t.seconds,t.nanos)}(n))}function WP(n,e){return(t=n,new _n(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function DL(n){const e=_n.fromString(n);return Tt(kL(e)),e}function kC(n,e){return WP(n.databaseId,e.path)}function wc(n,e){const t=DL(e);if(t.get(1)!==n.databaseId.projectId)throw new Pe(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Pe(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new We(AL(t))}function qP(n,e){return WP(n.databaseId,e)}function SL(n){const e=DL(n);return 4===e.length?_n.emptyPath():AL(e)}function FC(n){return new _n(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function AL(n){return Tt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function xL(n,e,t){return{name:kC(n,e),fields:t.value.mapValue.fields}}function RL(n,e,t){const r=wc(n,e.name),o=Gi(e.updateTime),u=new Ss({mapValue:{fields:e.fields}}),c=hr.newFoundDocument(r,o,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function LC(n,e){let t;if(e instanceof xC)t={update:xL(n,e.key,e.value)};else if(e instanceof RC)t={delete:kC(n,e.key)};else if(e instanceof Om)t={update:xL(n,e.key,e.data),updateMask:xB(e.fieldMask)};else{if(!(e instanceof HP))return et();t={verify:kC(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const c=u.transform;if(c instanceof Ov)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Mm)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Pm)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof kv)return{fieldPath:u.field.canonicalString(),increment:c.k};throw et()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:EB(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:et()),t;var o}function zP(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?hi.updateTime(Gi(o.updateTime)):void 0!==o.exists?hi.exists(o.exists):hi.none():hi.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,c){let p=null;"setToServerValue"in c?(Tt("REQUEST_TIME"===c.setToServerValue),p=new Ov):"appendMissingElements"in c?p=new Mm(c.appendMissingElements.values||[]):"removeAllFromArray"in c?p=new Pm(c.removeAllFromArray.values||[]):"increment"in c?p=new kv(u,c.increment):et();const y=Hi.fromServerFormat(c.fieldPath);return new AC(y,p)}(n,o)):[];var o;if(e.update){const o=wc(n,e.update.name),u=new Ss({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new xv((e.updateMask.fieldPaths||[]).map(b=>Hi.fromServerFormat(b)));return new Om(o,u,c,t,r)}return new xC(o,u,t,r)}if(e.delete){const o=wc(n,e.delete);return new RC(o,t)}if(e.verify){const o=wc(n,e.verify);return new HP(o,t)}return et()}function NL(n,e){return{documents:[qP(n,e.path)]}}function ML(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=qP(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=qP(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(y){if(0===y.length)return;const b=y.map(S=>function(x){if("=="===x.op){if(jF(x.value))return{unaryFilter:{field:Lv(x.field),op:"IS_NAN"}};if(BF(x.value))return{unaryFilter:{field:Lv(x.field),op:"IS_NULL"}}}else if("!="===x.op){if(jF(x.value))return{unaryFilter:{field:Lv(x.field),op:"IS_NOT_NAN"}};if(BF(x.value))return{unaryFilter:{field:Lv(x.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lv(x.field),op:DB(x.op),value:x.value}}}(S));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(y){if(0!==y.length)return y.map(b=>{return{field:Lv((S=b).field),direction:TB(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(b=e.limit,n.N||Sm(b)?b:{value:b});var b,p,y;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function PL(n){let e=SL(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Tt(1===r);const S=t.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=OL(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(S=>{return new Nv(Vv((x=S).field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let p=null;t.limit&&(p=function(S){let x;return x="object"==typeof S?S.value:S,Sm(x)?null:x}(t.limit));let y=null;var S;t.startAt&&(y=new ep((S=t.startAt).values||[],!!S.before));let b=null;return t.endAt&&(b=function(S){return new ep(S.values||[],!S.before)}(t.endAt)),XF(e,o,c,u,p,"F",y,b)}function OL(n){return n?void 0!==n.unaryFilter?[AB(n)]:void 0!==n.fieldFilter?[SB(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>OL(e)).reduce((e,t)=>e.concat(t)):et():[]}function TB(n){return _B[n]}function DB(n){return yB[n]}function Lv(n){return{fieldPath:n.canonicalString()}}function Vv(n){return Hi.fromServerFormat(n.fieldPath)}function SB(n){return cs.create(Vv(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return et()}}(n.fieldFilter.op),n.fieldFilter.value)}function AB(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Vv(n.unaryFilter.field);return cs.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Vv(n.unaryFilter.field);return cs.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Vv(n.unaryFilter.field);return cs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Vv(n.unaryFilter.field);return cs.create(o,"!=",{nullValue:"NULL_VALUE"});default:return et()}}function xB(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function kL(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Js(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=FL(e)),e=RB(n.get(t),e);return FL(e)}function RB(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function FL(n){return n+"\x01\x01"}function bc(n){const e=n.length;if(Tt(e>=2),2===e)return Tt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),_n.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&et(),n.charAt(c+1)){case"\x01":const p=n.substring(u,c);let y;0===o.length?y=p:(o+=p,y=o,o=""),r.push(y);break;case"\x10":o+=n.substring(u,c),o+="\0";break;case"\x11":o+=n.substring(u,c+1);break;default:et()}u=c+2}return new _n(r)}const LL=["userId","batchId"];function YA(n,e){return[n,Js(e)]}function VL(n,e,t){return[n,Js(e),t]}const NB={},MB=["prefixPath","collectionGroup","readTime","documentId"],PB=["prefixPath","collectionGroup","documentId"],OB=["collectionGroup","readTime","prefixPath","documentId"],kB=["canonicalId","targetId"],FB=["targetId","path"],LB=["path","targetId"],VB=["collectionId","parent"],UB=["indexId","uid"],BB=["uid","sequenceNumber"],jB=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],$B=["indexId","uid","orderedDocumentKey"],HB=["userId","collectionPath","documentId"],GB=["userId","collectionPath","largestBatchId"],WB=["userId","collectionGroup","largestBatchId"],UL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],qB=[...UL,"documentOverlays"],BL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],zB=[...BL,"indexConfiguration","indexState","indexEntries"],jL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $L{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ve{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ve((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ve?t:ve.resolve(t)}catch(t){return ve.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ve.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ve.reject(t)}static resolve(e){return new ve((t,r)=>{t(e)})}static reject(e){return new ve((t,r)=>{r(e)})}static waitFor(e){return new ve((t,r)=>{let o=0,u=0,c=!1;e.forEach(p=>{++o,p.next(()=>{++u,c&&u===o&&t()},y=>r(y))}),c=!0,u===o&&t()})}static or(e){let t=ve.resolve(!1);for(const r of e)t=t.next(o=>o?ve.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class QA{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new $i,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new VC(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=KP(r.target.error);this.At.reject(new VC(e,o))}}static open(e,t,r,o){try{return new QA(t,e.transaction(o,r))}catch(u){throw new VC(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ZB(t)}}class tl{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===tl.Vt((0,k.z$)())&&Yn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Fe("SimpleDb","Removing database:",e),Fm(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,k.hl)())return!1;if(tl.St())return!0;const e=(0,k.z$)(),t=tl.Vt(e),r=0<t&&t<10,o=tl.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,Ee.Z)(function*(){return t.db||(Fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{o(new VC(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const p=c.target.error;o("VersionError"===p.name?new Pe(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Pe(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new VC(e,p))},u.onupgradeneeded=c=>{Fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.bt.kt(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,Ee.Z)(function*(){const c="readonly"===t;let p=0;for(;;){++p;try{u.db=yield u.Nt(e);const y=QA.open(u.db,e,c?"readonly":"readwrite",r),b=o(y).next(S=>(y.Pt(),S)).catch(S=>(y.abort(S),ve.reject(S))).toPromise();return b.catch(()=>{}),yield y.Rt,b}catch(y){const b="FirebaseError"!==y.name&&p<3;if(Fe("SimpleDb","Transaction failed with error:",y.message,"Retrying:",b),u.close(),!b)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class KB{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Fm(this.Ft.delete())}}class VC extends Pe{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function km(n){return"IndexedDbTransactionError"===n.name}class ZB{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Fe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Fm(r)}add(e){return Fe("SimpleDb","ADD",this.store.name,e,e),Fm(this.store.add(e))}get(e){return Fm(this.store.get(e)).next(t=>(void 0===t&&(t=null),Fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Fe("SimpleDb","DELETE",this.store.name,e),Fm(this.store.delete(e))}count(){return Fe("SimpleDb","COUNT",this.store.name),Fm(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Kt(o,(c,p)=>{u.push(p)}).next(()=>u)}{const o=this.store.getAll(r.range);return new ve((u,c)=>{o.onerror=p=>{c(p.target.error)},o.onsuccess=p=>{u(p.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ve((o,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{o(c.target.result)}})}Qt(e,t){Fe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(u,c,p)=>p.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}zt(e){const t=this.cursor({});return new ve((r,o)=>{t.onerror=u=>{const c=KP(u.target.error);o(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(p=>{p?c.continue():r()}):r()}})}Kt(e,t){const r=[];return new ve((o,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const p=c.target.result;if(!p)return void o();const y=new KB(p),b=t(p.primaryKey,p.value,y);if(b instanceof ve){const S=b.catch(x=>(y.done(),ve.reject(x)));r.push(S)}y.isDone?o():null===y.Lt?p.continue():p.continue(y.Lt)}}).next(()=>ve.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Fm(n){return new ve((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=KP(r.target.error);t(o)}})}let HL=!1;function KP(n){const e=tl.Vt((0,k.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return HL||(HL=!0,setTimeout(()=>{throw r},0)),r}}return n}class GL extends $L{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Wi(n,e){const t=Ye(n);return tl.xt(t.Ht,e)}class ZP{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&uB(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&$P(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&$P(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(Rt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Nn())}isEqual(e){return this.batchId===e.batchId&&Av(this.mutations,e.mutations,(t,r)=>hL(t,r))&&Av(this.baseMutations,e.baseMutations,(t,r)=>hL(t,r))}}class YP{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Tt(e.mutations.length===r.length);let o=fB;const u=e.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,r[c].version);return new YP(e,t,r,o)}}class QP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class np{constructor(e,t,r,o,u=Rt.min(),c=Rt.min(),p=Ii.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p}withSequenceNumber(e){return new np(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new np(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new np(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class WL{constructor(e){this.Jt=e}}function qL(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:JA(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:kC(o=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:OC(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Lm(e.version)};else{if(!e.isUnknownDocument())return et();r.unknownDocument={path:t.path.toArray(),version:Lm(e.version)}}var o,u;return r}function JA(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Lm(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Vm(n){const e=new ei(n.seconds,n.nanoseconds);return Rt.fromTimestamp(e)}function Uv(n,e){const t=(e.baseMutations||[]).map(u=>zP(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>zP(n.Jt,u)),o=ei.fromMillis(e.localWriteTimeMs);return new ZP(e.batchId,o,t,r)}function UC(n){const e=Vm(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Vm(n.lastLimboFreeSnapshotVersion):Rt.min();let r;var o;return void 0!==n.query.documents?(Tt(1===(o=n.query).documents.length),r=au(Mv(SL(o.documents[0])))):r=au(PL(n.query)),new np(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Ii.fromBase64String(n.resumeToken))}function zL(n,e){const t=Lm(e.snapshotVersion),r=Lm(e.lastLimboFreeSnapshotVersion);let o;o=BA(e.target)?NL(n.Jt,e.target):ML(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Nm(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function JP(n){const e=PL({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?eL(e,e.limit,"L"):e}function XP(n,e){return new QP(e.largestBatchId,zP(n.Jt,e.overlayMutation))}function KL(n,e){const t=e.path.lastSegment();return[n,Js(e.path.popLast()),t]}class QB{getBundleMetadata(e,t){return ZL(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Vm(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return ZL(e).put({bundleId:(r=t).id,createTime:Lm(Gi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return YL(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:JP(o.bundledQuery),readTime:Vm(o.readTime)};var o})}saveNamedQuery(e,t){return YL(e).put({name:(r=t).name,readTime:Lm(Gi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function ZL(n){return Wi(n,"bundles")}function YL(n){return Wi(n,"namedQueries")}class eO{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new eO(e,t.uid||"")}getOverlay(e,t){return BC(e).get(KL(this.userId,t)).next(r=>r?XP(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((u,c)=>{const p=new QP(t,c);o.push(this.Xt(e,p))}),ve.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(c=>o.add(Js(c.getCollectionPath())));const u=[];return o.forEach(c=>{const p=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(BC(e).Qt("collectionPathOverlayIndex",p))}),ve.waitFor(u)}getOverlaysForCollection(e,t,r){const o=NC(),u=Js(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return BC(e).qt("collectionPathOverlayIndex",c).next(p=>{for(const y of p){const b=XP(this.M,y);o.set(b.getKey(),b)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=NC();let c;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return BC(e).Wt({index:"collectionGroupOverlayIndex",range:p},(y,b,S)=>{const x=XP(this.M,b);u.size()<o||x.largestBatchId===c?(u.set(x.getKey(),x),c=x.largestBatchId):S.done()}).next(()=>u)}Xt(e,t){return BC(e).put(function(r,o,u){const[c,p,y]=KL(o,u.mutation.key);return{userId:o,collectionPath:p,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:LC(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function BC(n){return Wi(n,"documentOverlays")}class Um{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Vr(e.integerValue));else if("doubleValue"in e){const r=Vr(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),wC(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Dm(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?$F(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):et()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),We.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function JB(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function QL(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=JB(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Um.fe=new Um;class XB{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=QL(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=QL(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class ej{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class tj{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class jC{constructor(){this.De=new XB,this.Ce=new ej(this.De),this.xe=new tj(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class rp{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new rp(this.indexId,this.documentKey,this.arrayValue,r)}}function Bm(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=JL(n.arrayValue,e.arrayValue),0!==t?t:(t=JL(n.directionalValue,e.directionalValue),0!==t?t:We.comparator(n.documentKey,e.documentKey)))}function JL(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class nj{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=FP(e);if(void 0!==t&&!this.Be(t))return!1;const r=Rm(e);let o=0,u=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const c=r[o];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[u++],c))return!1;++o}for(;o<r.length;++o){const c=r[o];if(u>=this.Me.length||!this.Ue(this.Me[u++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class rj{constructor(){this.qe=new tO}addToCollectionParentIndex(e,t){return this.qe.add(t),ve.resolve()}getCollectionParents(e,t){return ve.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return ve.resolve()}deleteFieldIndex(e,t){return ve.resolve()}getDocumentsMatchingTarget(e,t){return ve.resolve(null)}getFieldIndex(e,t){return ve.resolve(null)}getFieldIndexes(e,t){return ve.resolve([])}getNextCollectionGroupToUpdate(e){return ve.resolve(null)}updateCollectionGroup(e,t,r){return ve.resolve()}updateIndexEntries(e,t){return ve.resolve()}}class tO{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new fr(_n.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new fr(_n.comparator)).toArray()}}const Bv=new Uint8Array(0);class ij{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new tO,this.Ge=new tp(r=>Nm(r),(r,o)=>DC(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:Js(o)};return XL(e).put(u)}return ve.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[MF(t),""],!1,!0);return XL(e).qt(o).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(bc(c.parent))}return r})}addFieldIndex(e,t){const r=XA(e),o={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=XA(e),o=ex(e),u=$C(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=$C(e);let o=!0;const u=new Map;return ve.forEach(this.Qe(t),c=>this.getFieldIndex(e,c).next(p=>{o&&(o=!!p),u.set(c,p)})).next(()=>{if(o){let c=Nn();const p=[];return ve.forEach(u,(y,b)=>{var S;Fe("IndexedDbIndexManager",`Using index ${S=y,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(tt=>`${tt.fieldPath}:${tt.kind}`).join(",")}`} to execute ${Nm(t)}`);const x=function(tt,it){const qt=FP(it);if(void 0===qt)return null;for(const rn of jA(tt,qt.fieldPath))switch(rn.op){case"array-contains-any":return rn.value.arrayValue.values||[];case"array-contains":return[rn.value]}return null}(b,y),O=function(tt,it){const qt=new Map;for(const rn of Rm(it))for(const gi of jA(tt,rn.fieldPath))switch(gi.op){case"==":case"in":qt.set(rn.fieldPath.canonicalString(),gi.value);break;case"not-in":case"!=":return qt.set(rn.fieldPath.canonicalString(),gi.value),Array.from(qt.values())}return null}(b,y),$=function(tt,it){const qt=[];let rn=!0;for(const gi of Rm(it)){const Ta=0===gi.kind?KF(tt,gi.fieldPath,tt.startAt):ZF(tt,gi.fieldPath,tt.startAt);if(!Ta.value)return null;qt.push(Ta.value),rn&&(rn=Ta.inclusive)}return new ep(qt,rn)}(b,y),K=function(tt,it){const qt=[];let rn=!0;for(const gi of Rm(it)){const Ta=0===gi.kind?ZF(tt,gi.fieldPath,tt.endAt):KF(tt,gi.fieldPath,tt.endAt);if(!Ta.value)return null;qt.push(Ta.value),rn&&(rn=Ta.inclusive)}return new ep(qt,rn)}(b,y),ye=this.je(y,b,$),xe=this.je(y,b,K),pt=this.We(y,b,O),dt=this.ze(y.indexId,x,ye,!!$&&$.inclusive,xe,!!K&&K.inclusive,pt);return ve.forEach(dt,tt=>r.Gt(tt,t.limit).next(it=>{it.forEach(qt=>{const rn=We.fromSegments(qt.documentKey);c.has(rn)||(c=c.add(rn),p.push(rn))})}))}).next(()=>p)}return ve.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,r,o,u,c,p){const y=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=u?u.length:1),b=y/(null!=t?t.length:1),S=[];for(let x=0;x<y;++x){const O=t?this.He(t[x/b]):Bv,$=r?this.Je(e,O,r[x%b],o):this.Ye(e),K=u?this.Xe(e,O,u[x%b],c):this.Ye(e+1);S.push(...this.createRange($,K,p.map(ye=>this.Je(e,O,ye,!0))))}return S}Je(e,t,r,o){const u=new rp(e,We.empty(),t,r);return o?u:u.ke()}Xe(e,t,r,o){const u=new rp(e,We.empty(),t,r);return o?u.ke():u}Ye(e){return new rp(e,We.empty(),Bv,Bv)}getFieldIndex(e,t){const r=new nj(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{const c=u.filter(p=>r.$e(p));return c.sort((p,y)=>y.fields.length-p.fields.length),c.length>0?c[0]:null})}Ze(e,t){const r=new jC;for(const o of Rm(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const c=r.Ne(o.kind);Um.fe.Zt(u,c)}return r.Se()}He(e){const t=new jC;return Um.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new jC;return Um.fe.Zt(xm(this.databaseId,t),r.Ne(function(o){const u=Rm(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}We(e,t,r){if(null===r)return[];let o=[];o.push(new jC);let u=0;for(const c of Rm(e)){const p=r[u++];for(const y of o)if(this.en(t,c.fieldPath)&&CC(p))o=this.nn(o,c,p);else{const b=y.Ne(c.kind);Um.fe.Zt(p,b)}}return this.sn(o)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const o=[...e],u=[];for(const c of r.arrayValue.values||[])for(const p of o){const y=new jC;y.seed(p.Se()),Um.fe.Zt(c,y.Ne(t.kind)),u.push(y)}return u}en(e,t){return!!e.filters.find(r=>r instanceof cs&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=XA(e),o=ex(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const c=[];return ve.forEach(u,p=>o.get([p.indexId,this.uid]).next(y=>{c.push(function(b,S){const x=S?new TC(S.sequenceNumber,new rh(Vm(S.readTime),new We(bc(S.documentKey)),S.largestBatchId)):TC.empty(),O=b.fields.map(([$,K])=>new UA(Hi.fromServerFormat($),K));return new VA(b.indexId,b.collectionGroup,O,x)}(p,y))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Yt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=XA(e),u=ex(e);return this.rn(e).next(c=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>ve.forEach(p,y=>{return u.put({indexId:y.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:Lm((O=r).readTime),documentKey:Js(O.documentKey.path),largestBatchId:O.largestBatchId});var O})))}updateIndexEntries(e,t){const r=new Map;return ve.forEach(t,(o,u)=>{const c=r.get(o.collectionGroup);return(c?ve.resolve(c):this.getFieldIndexes(e,o.collectionGroup)).next(p=>(r.set(o.collectionGroup,p),ve.forEach(p,y=>this.on(e,o,y).next(b=>{const S=this.un(u,y);return b.isEqual(S)?ve.resolve():this.an(e,u,y,b,S)}))))})}cn(e,t,r,o){return $C(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,o){return $C(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const o=$C(e);let u=new fr(Bm);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(c,p)=>{u=u.add(new rp(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>u)}un(e,t){let r=new fr(Bm);const o=this.Ze(t,e);if(null==o)return r;const u=FP(t);if(null!=u){const c=e.data.field(u.fieldPath);if(CC(c))for(const p of c.arrayValue.values||[])r=r.add(new rp(t.indexId,e.key,this.He(p),o))}else r=r.add(new rp(t.indexId,e.key,Bv,o));return r}an(e,t,r,o,u){Fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(p,y,b,S,x){const O=p.getIterator(),$=y.getIterator();let K=Fv(O),ye=Fv($);for(;K||ye;){let xe=!1,pt=!1;if(K&&ye){const dt=b(K,ye);dt<0?pt=!0:dt>0&&(xe=!0)}else null!=K?pt=!0:xe=!0;xe?(S(ye),ye=Fv($)):pt?(x(K),K=Fv(O)):(K=Fv(O),ye=Fv($))}}(o,u,Bm,p=>{c.push(this.cn(e,t,r,p))},p=>{c.push(this.hn(e,t,r,p))}),ve.waitFor(c)}rn(e){let t=1;return ex(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,p)=>Bm(c,p)).filter((c,p,y)=>!p||0!==Bm(c,y[p-1]));const o=[];o.push(e);for(const c of r){const p=Bm(c,e),y=Bm(c,t);if(0===p)o[0]=e.ke();else if(p>0&&y<0)o.push(c),o.push(c.ke());else if(y>0)break}o.push(t);const u=[];for(let c=0;c<o.length;c+=2)u.push(IDBKeyRange.bound([o[c].indexId,this.uid,o[c].arrayValue,o[c].directionalValue,Bv,[]],[o[c+1].indexId,this.uid,o[c+1].arrayValue,o[c+1].directionalValue,Bv,[]]));return u}}function XL(n){return Wi(n,"collectionParents")}function $C(n){return Wi(n,"indexEntries")}function XA(n){return Wi(n,"indexConfiguration")}function ex(n){return Wi(n,"indexState")}const eV={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ho{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ho(e,Ho.DEFAULT_COLLECTION_PERCENTILE,Ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function tV(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let p=0;const y=r.Wt({range:c},(S,x,O)=>(p++,O.delete()));u.push(y.next(()=>{Tt(1===p)}));const b=[];for(const S of t.mutations){const x=VL(e,S.key.path,t.batchId);u.push(o.delete(x)),b.push(S.key)}return ve.waitFor(u).next(()=>b)}function tx(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw et();e=n.noDocument}return JSON.stringify(e).length}Ho.DEFAULT_COLLECTION_PERCENTILE=10,Ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ho.DEFAULT=new Ho(41943040,Ho.DEFAULT_COLLECTION_PERCENTILE,Ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ho.DISABLED=new Ho(-1,0,0);class nO{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.ln={}}static Yt(e,t,r,o){Tt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new nO(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ip(e).Wt({index:"userMutationsIndex",range:r},(o,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=jv(e),c=ip(e);return c.add({}).next(p=>{Tt("number"==typeof p);const y=new ZP(p,t,r,o),b=function(O,$,K){const ye=K.baseMutations.map(pt=>LC(O.Jt,pt)),xe=K.mutations.map(pt=>LC(O.Jt,pt));return{userId:$,batchId:K.batchId,localWriteTimeMs:K.localWriteTime.toMillis(),baseMutations:ye,mutations:xe}}(this.M,this.userId,y),S=[];let x=new fr((O,$)=>Yt(O.canonicalString(),$.canonicalString()));for(const O of o){const $=VL(this.userId,O.key.path,p);x=x.add(O.key.path.popLast()),S.push(c.put(b)),S.push(u.put($,NB))}return x.forEach(O=>{S.push(this.indexManager.addToCollectionParentIndex(e,O))}),e.addOnCommittedListener(()=>{this.ln[p]=y.keys()}),ve.waitFor(S).next(()=>y)})}lookupMutationBatch(e,t){return ip(e).get(t).next(r=>r?(Tt(r.userId===this.userId),Uv(this.M,r)):null)}fn(e,t){return this.ln[t]?ve.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.ln[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return ip(e).Wt({index:"userMutationsIndex",range:o},(c,p,y)=>{p.userId===this.userId&&(Tt(p.batchId>=r),u=Uv(this.M,p)),y.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ip(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ip(e).qt("userMutationsIndex",t).next(r=>r.map(o=>Uv(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=YA(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return jv(e).Wt({range:o},(c,p,y)=>{const[b,S,x]=c,O=bc(S);if(b===this.userId&&t.path.isEqual(O))return ip(e).get(x).next($=>{if(!$)throw et();Tt($.userId===this.userId),u.push(Uv(this.M,$))});y.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new fr(Yt);const o=[];return t.forEach(u=>{const c=YA(this.userId,u.path),p=IDBKeyRange.lowerBound(c),y=jv(e).Wt({range:p},(b,S,x)=>{const[O,$,K]=b,ye=bc($);O===this.userId&&u.path.isEqual(ye)?r=r.add(K):x.done()});o.push(y)}),ve.waitFor(o).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=YA(this.userId,r),c=IDBKeyRange.lowerBound(u);let p=new fr(Yt);return jv(e).Wt({range:c},(y,b,S)=>{const[x,O,$]=y,K=bc(O);x===this.userId&&r.isPrefixOf(K)?K.length===o&&(p=p.add($)):S.done()}).next(()=>this.dn(e,p))}dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(ip(e).get(u).next(c=>{if(null===c)throw et();Tt(c.userId===this.userId),r.push(Uv(this.M,c))}))}),ve.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return tV(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),ve.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ve.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return jv(e).Wt({range:r},(u,c,p)=>{if(u[0]===this.userId){const y=bc(u[1]);o.push(y)}else p.done()}).next(()=>{Tt(0===o.length)})})}containsKey(e,t){return nV(e,this.userId,t)}wn(e){return rV(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function nV(n,e,t){const r=YA(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return jv(n).Wt({range:u,jt:!0},(p,y,b)=>{const[S,x,O]=p;S===e&&x===o&&(c=!0),b.done()}).next(()=>c)}function ip(n){return Wi(n,"mutations")}function jv(n){return Wi(n,"documentMutations")}function rV(n){return Wi(n,"mutationQueues")}class jm{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new jm(0)}static yn(){return new jm(-1)}}class sj{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new jm(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>Rt.fromTimestamp(new ei(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.In(e,o)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>$v(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(Tt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return $v(e).Wt((c,p)=>{const y=UC(p);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(o++,u.push(this.removeTargetData(e,y)))}).next(()=>ve.waitFor(u)).next(()=>o)}forEachTarget(e,t){return $v(e).Wt((r,o)=>{const u=UC(o);t(u)})}pn(e){return iV(e).get("targetGlobalKey").next(t=>(Tt(null!==t),t))}In(e,t){return iV(e).put("targetGlobalKey",t)}Tn(e,t){return $v(e).put(zL(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Nm(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return $v(e).Wt({range:o,index:"queryTargetsIndex"},(c,p,y)=>{const b=UC(p);DC(t,b.target)&&(u=b,y.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=sp(e);return t.forEach(c=>{const p=Js(c.path);o.push(u.put({targetId:r,path:p})),o.push(this.referenceDelegate.addReference(e,r,c))}),ve.waitFor(o)}removeMatchingKeys(e,t,r){const o=sp(e);return ve.forEach(t,u=>{const c=Js(u.path);return ve.waitFor([o.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=sp(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=sp(e);let u=Nn();return o.Wt({range:r,jt:!0},(c,p,y)=>{const b=bc(c[1]),S=new We(b);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=Js(t.path),o=IDBKeyRange.bound([r],[MF(r)],!1,!0);let u=0;return sp(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([c,p],y,b)=>{0!==c&&(u++,b.done())}).next(()=>u>0)}Et(e,t){return $v(e).get(t).next(r=>r?UC(r):null)}}function $v(n){return Wi(n,"targets")}function iV(n){return Wi(n,"targetGlobal")}function sp(n){return Wi(n,"targetDocuments")}function $m(n){return rO.apply(this,arguments)}function rO(){return(rO=(0,Ee.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==jL)throw n;Fe("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function sV([n,e],[t,r]){const o=Yt(n,t);return 0===o?Yt(e,r):o}class oj{constructor(e){this.An=e,this.buffer=new fr(sV),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();sV(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class aj{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Fe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,Ee.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){km(o)?Fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield $m(o)}yield t.Sn(e)}))}}class uj{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ve.resolve(Ca.A);const r=new oj(t);return this.Dn.forEachTarget(e,o=>r.bn(o.sequenceNumber)).next(()=>this.Dn.xn(e,o=>r.bn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),ve.resolve(eV)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eV):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,o,u,c,p,y,b;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),o=this.params.maximumSequenceNumbersToCollect):o=x,c=Date.now(),this.nthSequenceNumber(e,o))).next(x=>(r=x,p=Date.now(),this.removeTargets(e,r,t))).next(x=>(u=x,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(b=Date.now(),eh()<=da.in.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-S}ms\n\tDetermined least recently used ${o} in `+(p-c)+`ms\n\tRemoved ${u} targets in `+(y-p)+`ms\n\tRemoved ${x} documents in `+(b-y)+`ms\nTotal Duration: ${b-S}ms`),ve.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:x})))}}class lj{constructor(e,t){this.db=e,this.garbageCollector=new uj(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,o)=>t(o))}addReference(e,t,r){return nx(e,r)}removeReference(e,t,r){return nx(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return nx(e,t)}On(e,t){return function(r,o){let u=!1;return rV(r).zt(c=>nV(r,c,o).next(p=>(p&&(u=!0),ve.resolve(!p)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Mn(e,(c,p)=>{if(p<=t){const y=this.On(e,c).next(b=>{if(!b)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Rt.min()),sp(e).delete([0,Js(c.path)])))});o.push(y)}}).next(()=>ve.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return nx(e,t)}Mn(e,t){const r=sp(e);let o,u=Ca.A;return r.Wt({index:"documentTargetsIndex"},([c,p],{path:y,sequenceNumber:b})=>{0===c?(u!==Ca.A&&t(new We(bc(o)),u),u=b,o=y):u=Ca.A}).next(()=>{u!==Ca.A&&t(new We(bc(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function nx(n,e){return sp(n).put((r=n.currentSequenceNumber,{targetId:0,path:Js(e.path),sequenceNumber:r}));var r}class oV{constructor(){this.changes=new tp(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ve.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class cj{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Hm(e).put(r)}removeEntry(e,t,r){return Hm(e).delete(function(o,u){const c=o.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],JA(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=hr.newInvalidDocument(t);return Hm(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(HC(t))},(o,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:hr.newInvalidDocument(t)};return Hm(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(HC(t))},(o,u)=>{r={document:this.$n(t,u),size:tx(u)}}).next(()=>r)}getEntries(e,t){let r=uu();return this.Ln(e,t,(o,u)=>{const c=this.$n(o,u);r=r.insert(o,c)}).next(()=>r)}Un(e,t){let r=uu(),o=new ti(We.comparator);return this.Ln(e,t,(u,c)=>{const p=this.$n(u,c);r=r.insert(u,p),o=o.insert(u,tx(c))}).next(()=>({documents:r,qn:o}))}Ln(e,t,r){if(t.isEmpty())return ve.resolve();let o=new fr(lV);t.forEach(y=>o=o.add(y));const u=IDBKeyRange.bound(HC(o.first()),HC(o.last())),c=o.getIterator();let p=c.getNext();return Hm(e).Wt({index:"documentKeyIndex",range:u},(y,b,S)=>{const x=We.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;p&&lV(p,x)<0;)r(p,null),p=c.getNext();p&&p.isEqual(x)&&(r(p,b),p=c.hasNext()?c.getNext():null),p?S.Ut(HC(p)):S.done()}).next(()=>{for(;p;)r(p,null),p=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),JA(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Hm(e).qt(IDBKeyRange.bound(o,u,!0)).next(c=>{let p=uu();for(const y of c){const b=this.$n(We.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);p=p.insert(b.key,b)}return p})}getAllFromCollectionGroup(e,t,r,o){let u=uu();const c=uV(t,r),p=uV(t,rh.max());return Hm(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,p,!0)},(y,b,S)=>{const x=this.$n(We.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(x.key,x),u.size===o&&S.done()}).next(()=>u)}newChangeBuffer(e){return new dj(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return aV(e).get("remoteDocumentGlobalKey").next(t=>(Tt(!!t),t))}Fn(e,t){return aV(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function(n,e){let t;if(e.document)t=RL(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=We.fromSegments(e.noDocument.path),o=Vm(e.noDocument.readTime);t=hr.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return et();{const r=We.fromSegments(e.unknownDocument.path),o=Vm(e.unknownDocument.version);t=hr.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new ei(r[0],r[1]);return Rt.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Rt.min()))return r}return hr.newInvalidDocument(e)}}class dj extends oV{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new tp(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new fr((u,c)=>Yt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const p=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,p.readTime)),c.isValidDocument()){const y=qL(this.Kn.M,c);o=o.add(u.path.popLast()),r+=tx(y)-p.size,t.push(this.Kn.addEntry(e,u,y))}else if(r-=p.size,this.trackRemovals){const y=qL(this.Kn.M,c.convertToNoDocument(Rt.min()));t.push(this.Kn.addEntry(e,u,y))}}),o.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),ve.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:o})=>(o.forEach((u,c)=>{this.Gn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function aV(n){return Wi(n,"remoteDocumentGlobal")}function Hm(n){return Wi(n,"remoteDocumentsV14")}function HC(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function uV(n,e){const t=e.documentKey.path.toArray();return[n,JA(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function lV(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Yt(t[u],r[u]),o)return o;return o=Yt(t.length,r.length),o||(o=Yt(t[t.length-2],r[r.length-2]),o||Yt(t[t.length-1],r[r.length-1]))}class hj{constructor(e){this.M=e}kt(e,t,r,o){const u=new QA("createOrUpgrade",t);var p;r<1&&o>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",LL,{unique:!0}),p.createObjectStore("documentMutations"),cV(e),function(p){p.createObjectStore("remoteDocuments")}(e));let c=ve.resolve();return r<3&&o>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),cV(e)),c=c.next(()=>function(p){const y=p.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Rt.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",b)}(u))),r<4&&o>=4&&(0!==r&&(c=c.next(()=>function(p,y){return y.store("mutations").qt().next(b=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",LL,{unique:!0});const S=y.store("mutations"),x=b.map(O=>S.put(O));return ve.waitFor(x)})}(e,u))),c=c.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(c=c.next(()=>this.Qn(u))),r<6&&o>=6&&(c=c.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&o>=7&&(c=c.next(()=>this.Wn(u))),r<8&&o>=8&&(c=c.next(()=>this.zn(e,u))),r<9&&o>=9&&(c=c.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(c=c.next(()=>this.Hn(u))),r<11&&o>=11&&(c=c.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(c=c.next(()=>{!function(p){const y=p.createObjectStore("documentOverlays",{keyPath:HB});y.createIndex("collectionPathOverlayIndex",GB,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",WB,{unique:!1})}(e)})),r<13&&o>=13&&(c=c.next(()=>function(p){const y=p.createObjectStore("remoteDocumentsV14",{keyPath:MB});y.createIndex("documentKeyIndex",PB),y.createIndex("collectionGroupIndex",OB)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(c=c.next(()=>{!function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:UB}).createIndex("sequenceNumberIndex",BB,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:jB}).createIndex("documentKeyIndex",$B,{unique:!1})}(e)})),c}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=tx(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>ve.forEach(o,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(p=>ve.forEach(p,y=>{Tt(y.userId===u.userId);const b=Uv(this.M,y);return tV(e,u.userId,b).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Wt((c,p)=>{const y=new _n(c),b=[0,Js(y)];u.push(t.get(b).next(S=>S?ve.resolve():t.put({targetId:0,path:Js(y),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>ve.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:VB});const r=t.store("collectionParents"),o=new tO,u=c=>{if(o.add(c)){const p=c.lastSegment(),y=c.popLast();return r.put({collectionId:p,parent:Js(y)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,p)=>{const y=new _n(c);return u(y.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,p,y],b)=>{const S=bc(p);return u(S.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,o)=>{const u=UC(o),c=zL(this.M,u);return t.put(c)})}Jn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((u,c)=>{const p=t.store("remoteDocumentsV14"),y=(b=c,b.document?new We(_n.fromString(b.document.name).popFirst(5)):b.noDocument?We.fromSegments(b.noDocument.path):b.unknownDocument?We.fromSegments(b.unknownDocument.path):et()).path.toArray();var b;const S={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(p.put(S))}).next(()=>ve.waitFor(o))}}function cV(n){n.createObjectStore("targetDocuments",{keyPath:FB}).createIndex("documentTargetsIndex",LB,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",kB,{unique:!0}),n.createObjectStore("targetGlobal")}const iO="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class sO{constructor(e,t,r,o,u,c,p,y,b,S,x=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=c,this.document=p,this.Xn=b,this.Zn=S,this.ts=x,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=O=>Promise.resolve(),!sO.vt())throw new Pe(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lj(this,o),this.hs=t+"main",this.M=new WL(y),this.ls=new tl(this.hs,this.ts,new hj(this.M)),this.fs=new sj(this.referenceDelegate,this.M),this.ds=new cj(this.M),this._s=new QB,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===S&&Yn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(ge.FAILED_PRECONDITION,iO);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Ca(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,Ee.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,Ee.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,Ee.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>rx(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if(km(e))return Fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return GC(e).get("owner").next(t=>ve.resolve(this.bs(t)))}Vs(e){return rx(e).delete(this.clientId)}vs(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Wi(r,"clientMetadata");return o.qt().next(u=>{const c=e.Ds(u,18e5),p=u.filter(y=>-1===c.indexOf(y));return ve.forEach(p,y=>o.delete(y.clientId)).next(()=>p)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?ve.resolve(!0):GC(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Pe(ge.FAILED_PRECONDITION,iO);return!1}}return!(!this.networkEnabled||!this.inForeground)||rx(e).qt().next(r=>void 0===this.Ds(r,5e3).find(o=>{if(this.clientId!==o.clientId){const c=!this.inForeground&&o.inForeground,p=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||c&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new GL(t,Ca.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>rx(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return nO.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new ij(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return eO.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Fe("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=14===(c=this.ts)?zB:13===c?BL:12===c?qB:11===c?UL:void et();var c;let p;return this.ls.runTransaction(e,o,u,y=>(p=new GL(y,this.es?this.es.next():Ca.A),"readwrite-primary"===t?this.Es(p).next(b=>!!b||this.As(p)).next(b=>{if(!b)throw Yn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Pe(ge.FAILED_PRECONDITION,jL);return r(p)}).next(b=>this.Ps(p).next(()=>b)):this.$s(p).next(()=>r(p)))).then(y=>(p.raiseOnCommittedEvent(),y))}$s(e){return GC(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Pe(ge.FAILED_PRECONDITION,iO)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return GC(e).put("owner",t)}static vt(){return tl.vt()}Rs(e){const t=GC(e);return t.get("owner").next(r=>this.bs(r)?(Fe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ve.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(Yn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,k.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Fe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Yn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Yn("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function GC(n){return Wi(n,"owner")}function rx(n){return Wi(n,"clientMetadata")}function oO(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class fj{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}qs(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return We.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.js(e,t.path):UP(t)?this.Ws(e,t,r):this.zs(e,t,r);var o}js(e,t){return this.Ls(e,new We(t)).next(r=>{let o=GP();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ws(e,t,r){const o=t.collectionGroup;let u=GP();return this.indexManager.getCollectionParents(e,o).next(c=>ve.forEach(c,p=>{const y=(b=t,S=p.child(o),new ih(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,S;return this.zs(e,y,r).next(b=>{b.forEach((S,x)=>{u=u.insert(S,x)})})}).next(()=>u))}zs(e,t,r){let o;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const c of u)for(const p of c.mutations){const y=p.key;let b=o.get(y);null==b&&(b=hr.newInvalidDocument(y),o=o.insert(y,b)),$P(p,b,c.localWriteTime),b.isFoundDocument()||(o=o.remove(y))}}).next(()=>(o.forEach((u,c)=>{jP(t,c)||(o=o.remove(u))}),o))}}class aO{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=o}static Ys(e,t){let r=Nn(),o=Nn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new aO(e,t.fromCache,r,o)}}class dV{Xs(e){this.Zs=e}Qs(e,t,r,o){return 0===(u=t).filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())||r.isEqual(Rt.min())?this.ti(e,t):this.Zs.Ks(e,o).next(u=>{const c=this.ei(t,u);return($A(t)||HA(t))&&this.ni(t.limitType,c,o,r)?this.ti(e,t):(eh()<=da.in.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),BP(t)),this.Zs.Qs(e,t,qF(r,-1)).next(p=>(c.forEach(y=>{p=p.insert(y.key,y)}),p)))});var u}ei(e,t){let r=new fr(rL(e));return t.forEach((o,u)=>{jP(e,u)&&(r=r.add(u))}),r}ni(e,t,r,o){if(r.size!==t.size)return!0;const u="F"===e?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ti(e,t){return eh()<=da.in.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",BP(t)),this.Zs.Qs(e,t,rh.min())}}class pj{constructor(e,t,r,o){this.persistence=e,this.si=t,this.M=o,this.ii=new ti(Yt),this.ri=new tp(u=>Nm(u),DC),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(r)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new fj(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function hV(n,e,t,r){return new pj(n,e,t,r)}function fV(n,e){return uO.apply(this,arguments)}function uO(){return(uO=(0,Ee.Z)(function*(n,e){const t=Ye(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.Bs.getAllMutationBatches(r).next(u=>(o=u,t.ai(e),t.Bs.getAllMutationBatches(r))).next(u=>{const c=[],p=[];let y=Nn();for(const b of o){c.push(b.batchId);for(const S of b.mutations)y=y.add(S.key)}for(const b of u){p.push(b.batchId);for(const S of b.mutations)y=y.add(S.key)}return t.ci.Ks(r,y).next(b=>({hi:b,removedBatchIds:c,addedBatchIds:p}))})})})).apply(this,arguments)}function gj(n,e){const t=Ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.ui.newChangeBuffer({trackRemovals:!0});return function(c,p,y,b){const S=y.batch,x=S.keys();let O=ve.resolve();return x.forEach($=>{O=O.next(()=>b.getEntry(p,$)).next(K=>{const ye=y.docVersions.get($);Tt(null!==ye),K.version.compareTo(ye)<0&&(S.applyToRemoteDocument(K,y),K.isValidDocument()&&(K.setReadTime(y.commitVersion),b.addEntry(K)))})}),O.next(()=>c.Bs.removeMutationBatch(p,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.ci.Ks(r,o))})}function pV(n){const e=Ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function mj(n,e){const t=Ye(n),r=e.snapshotVersion;let o=t.ii;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.ui.newChangeBuffer({trackRemovals:!0});o=t.ii;const p=[];e.targetChanges.forEach((b,S)=>{const x=o.get(S);if(!x)return;p.push(t.fs.removeMatchingKeys(u,b.removedDocuments,S).next(()=>t.fs.addMatchingKeys(u,b.addedDocuments,S)));let O=x.withSequenceNumber(u.currentSequenceNumber);var $,K,ye;e.targetMismatches.has(S)?O=O.withResumeToken(Ii.EMPTY_BYTE_STRING,Rt.min()).withLastLimboFreeSnapshotVersion(Rt.min()):b.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(b.resumeToken,r)),o=o.insert(S,O),K=O,ye=b,(0===($=x).resumeToken.approximateByteSize()||K.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=3e8||ye.addedDocuments.size+ye.modifiedDocuments.size+ye.removedDocuments.size>0)&&p.push(t.fs.updateTargetData(u,O))});let y=uu();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))}),p.push(gV(u,c,e.documentUpdates).next(b=>{y=b})),!r.isEqual(Rt.min())){const b=t.fs.getLastRemoteSnapshotVersion(u).next(S=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));p.push(b)}return ve.waitFor(p).next(()=>c.apply(u)).next(()=>t.ci.Gs(u,y)).next(()=>y)}).then(u=>(t.ii=o,u))}function gV(n,e,t){let r=Nn();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=uu();return t.forEach((c,p)=>{const y=o.get(c);p.isNoDocument()&&p.version.isEqual(Rt.min())?(e.removeEntry(c,p.readTime),u=u.insert(c,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||0===p.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(p),u=u.insert(c,p)):Fe("LocalStore","Ignoring outdated watch update for ",c,". Current version:",y.version," Watch version:",p.version)}),u})}function _j(n,e){const t=Ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function Hv(n,e){const t=Ye(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.fs.getTargetData(r,e).next(u=>u?(o=u,ve.resolve(o)):t.fs.allocateTargetId(r).next(c=>(o=new np(e,c,0,r.currentSequenceNumber),t.fs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.ii.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.ii=t.ii.insert(r.targetId,r),t.ri.set(e,r.targetId)),r})}function Gv(n,e,t){return lO.apply(this,arguments)}function lO(){return(lO=(0,Ee.Z)(function*(n,e,t){const r=Ye(n),o=r.ii.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!km(c))throw c;Fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.ii=r.ii.remove(e),r.ri.delete(o.target)})).apply(this,arguments)}function ix(n,e,t){const r=Ye(n);let o=Rt.min(),u=Nn();return r.persistence.runTransaction("Execute query","readonly",c=>function(p,y,b){const S=Ye(p),x=S.ri.get(b);return void 0!==x?ve.resolve(S.ii.get(x)):S.fs.getTargetData(y,b)}(r,c,au(e)).next(p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(c,p.targetId).next(y=>{u=y})}).next(()=>r.si.Qs(c,e,t?o:Rt.min(),t?u:Nn())).next(p=>(yV(r,nL(e),p),{documents:p,li:u})))}function mV(n,e){const t=Ye(n),r=Ye(t.fs),o=t.ii.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(c=>c?c.target:null))}function _V(n,e){const t=Ye(n),r=t.oi.get(e)||Rt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.ui.getAllFromCollectionGroup(o,e,qF(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(yV(t,e,o),o))}function yV(n,e,t){let r=Rt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.oi.set(e,r)}function cO(){return(cO=(0,Ee.Z)(function*(n,e,t,r){const o=Ye(n);let u=Nn(),c=uu();for(const b of t){const S=e.fi(b.metadata.name);b.document&&(u=u.add(S));const x=e.di(b);x.setReadTime(e._i(b.metadata.readTime)),c=c.insert(S,x)}const p=o.ui.newChangeBuffer({trackRemovals:!0}),y=yield Hv(o,(b=r,au(Mv(_n.fromString(`__bundle__/docs/${b}`)))));var b;return o.persistence.runTransaction("Apply bundle documents","readwrite",b=>gV(b,p,c).next(S=>(p.apply(b),S)).next(S=>o.fs.removeMatchingKeysForTargetId(b,y.targetId).next(()=>o.fs.addMatchingKeys(b,u,y.targetId)).next(()=>o.ci.Gs(b,S)).next(()=>S)))})).apply(this,arguments)}function vj(n,e){return dO.apply(this,arguments)}function dO(){return(dO=(0,Ee.Z)(function*(n,e,t=Nn()){const r=yield Hv(n,au(JP(e.bundledQuery))),o=Ye(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const c=Gi(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return o._s.saveNamedQuery(u,e);const p=r.withResumeToken(Ii.EMPTY_BYTE_STRING,c);return o.ii=o.ii.insert(p.targetId,p),o.fs.updateTargetData(u,p).next(()=>o.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.fs.addMatchingKeys(u,t,r.targetId)).next(()=>o._s.saveNamedQuery(u,e))})})).apply(this,arguments)}class Ej{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return ve.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var r;return this.wi.set(t.id,{id:(r=t).id,version:r.version,createTime:Gi(r.createTime)}),ve.resolve()}getNamedQuery(e,t){return ve.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,{name:(r=t).name,query:JP(r.bundledQuery),readTime:Gi(r.readTime)}),ve.resolve();var r}}class wj{constructor(){this.overlays=new ti(We.comparator),this.gi=new Map}getOverlay(e,t){return ve.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.Xt(e,t,u)}),ve.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.gi.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.gi.delete(r)),ve.resolve()}getOverlaysForCollection(e,t,r){const o=NC(),u=t.length+1,c=new We(t.child("")),p=this.overlays.getIteratorFrom(c);for(;p.hasNext();){const y=p.getNext().value,b=y.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&y.largestBatchId>r&&o.set(y.getKey(),y)}return ve.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new ti((b,S)=>b-S);const c=this.overlays.getIterator();for(;c.hasNext();){const b=c.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let S=u.get(b.largestBatchId);null===S&&(S=NC(),u=u.insert(b.largestBatchId,S)),S.set(b.getKey(),b)}}const p=NC(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((b,S)=>p.set(b,S)),!(p.size()>=o)););return ve.resolve(p)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const c=this.gi.get(o.largestBatchId).delete(r.key);this.gi.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new QP(t,r));let u=this.gi.get(t);void 0===u&&(u=Nn(),this.gi.set(t,u)),this.gi.set(t,u.add(r.key))}}class hO{constructor(){this.yi=new fr(qi.pi),this.Ii=new fr(qi.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const r=new qi(e,t);this.yi=this.yi.add(r),this.Ii=this.Ii.add(r)}Ei(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ai(new qi(e,t))}Ri(e,t){e.forEach(r=>this.removeReference(r,t))}Pi(e){const t=new We(new _n([])),r=new qi(t,e),o=new qi(t,e+1),u=[];return this.Ii.forEachInRange([r,o],c=>{this.Ai(c),u.push(c.key)}),u}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new We(new _n([])),r=new qi(t,e),o=new qi(t,e+1);let u=Nn();return this.Ii.forEachInRange([r,o],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new qi(e,0),r=this.yi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class qi{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return We.comparator(e.key,t.key)||Yt(e.vi,t.vi)}static Ti(e,t){return Yt(e.vi,t.vi)||We.comparator(e.key,t.key)}}class bj{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new fr(qi.pi)}checkEmpty(e){return ve.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,o){const u=this.Si;this.Si++;const c=new ZP(u,t,r,o);this.Bs.push(c);for(const p of o)this.Di=this.Di.add(new qi(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ve.resolve(c)}lookupMutationBatch(e,t){return ve.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.xi(t+1),u=o<0?0:o;return ve.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return ve.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return ve.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new qi(t,0),o=new qi(t,Number.POSITIVE_INFINITY),u=[];return this.Di.forEachInRange([r,o],c=>{const p=this.Ci(c.vi);u.push(p)}),ve.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new fr(Yt);return t.forEach(o=>{const u=new qi(o,0),c=new qi(o,Number.POSITIVE_INFINITY);this.Di.forEachInRange([u,c],p=>{r=r.add(p.vi)})}),ve.resolve(this.Ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;We.isDocumentKey(u)||(u=u.child(""));const c=new qi(new We(u),0);let p=new fr(Yt);return this.Di.forEachWhile(y=>{const b=y.key.path;return!!r.isPrefixOf(b)&&(b.length===o&&(p=p.add(y.vi)),!0)},c),ve.resolve(this.Ni(p))}Ni(e){const t=[];return e.forEach(r=>{const o=this.Ci(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){Tt(0===this.ki(t.batchId,"removed")),this.Bs.shift();let r=this.Di;return ve.forEach(t.mutations,o=>{const u=new qi(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Di=r})}_n(e){}containsKey(e,t){const r=new qi(t,0),o=this.Di.firstAfterOrEqual(r);return ve.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return ve.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class Cj{constructor(e){this.Mi=e,this.docs=new ti(We.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,c=this.Mi(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ve.resolve(r?r.document.mutableCopy():hr.newInvalidDocument(t))}getEntries(e,t){let r=uu();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():hr.newInvalidDocument(o))}),ve.resolve(r)}getAllFromCollection(e,t,r){let o=uu();const u=new We(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:p,value:{document:y}}=c.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||q2(W2(y),r)<=0||(o=o.insert(y.key,y.mutableCopy()))}return ve.resolve(o)}getAllFromCollectionGroup(e,t,r,o){et()}Oi(e,t){return ve.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Ij(this)}getSize(e){return ve.resolve(this.size)}}class Ij extends oV{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Kn.addEntry(e,o)):this.Kn.removeEntry(r)}),ve.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class Tj{constructor(e){this.persistence=e,this.Fi=new tp(t=>Nm(t),DC),this.lastRemoteSnapshotVersion=Rt.min(),this.highestTargetId=0,this.$i=0,this.Bi=new hO,this.targetCount=0,this.Li=jm.gn()}forEachTarget(e,t){return this.Fi.forEach((r,o)=>t(o)),ve.resolve()}getLastRemoteSnapshotVersion(e){return ve.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ve.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),ve.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$i&&(this.$i=t),ve.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new jm(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,ve.resolve()}updateTargetData(e,t){return this.Tn(t),ve.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,ve.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Fi.forEach((c,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Fi.delete(c),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)}),ve.waitFor(u).next(()=>o)}getTargetCount(e){return ve.resolve(this.targetCount)}getTargetData(e,t){const r=this.Fi.get(t)||null;return ve.resolve(r)}addMatchingKeys(e,t,r){return this.Bi.Ei(t,r),ve.resolve()}removeMatchingKeys(e,t,r){this.Bi.Ri(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(c=>{u.push(o.markPotentiallyOrphaned(e,c))}),ve.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),ve.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Bi.Vi(t);return ve.resolve(r)}containsKey(e,t){return ve.resolve(this.Bi.containsKey(t))}}class Dj{constructor(e,t){this.Ui={},this.overlays={},this.es=new Ca(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new Tj(this),this.indexManager=new rj,this.ds=new Cj(r=>this.referenceDelegate.qi(r)),this.M=new WL(t),this._s=new Ej(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wj,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ui[e.toKey()];return r||(r=new bj(t,this.referenceDelegate),this.Ui[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Fe("MemoryPersistence","Starting transaction:",e);const o=new Sj(this.es.next());return this.referenceDelegate.Ki(),r(o).next(u=>this.referenceDelegate.Gi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Qi(e,t){return ve.or(Object.values(this.Ui).map(r=>()=>r.containsKey(e,t)))}}class Sj extends $L{constructor(e){super(),this.currentSequenceNumber=e}}class fO{constructor(e){this.persistence=e,this.ji=new hO,this.Wi=null}static zi(e){return new fO(e)}get Hi(){if(this.Wi)return this.Wi;throw et()}addReference(e,t,r){return this.ji.addReference(r,t),this.Hi.delete(r.toString()),ve.resolve()}removeReference(e,t,r){return this.ji.removeReference(r,t),this.Hi.add(r.toString()),ve.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),ve.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(o=>this.Hi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Hi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ve.forEach(this.Hi,r=>{const o=We.fromPath(r);return this.Ji(e,o).next(u=>{u||t.removeEntry(o,Rt.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(r=>{r?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return ve.or([()=>ve.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function vV(n,e){return`firestore_clients_${n}_${e}`}function EV(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function pO(n,e){return`firestore_targets_${n}_${e}`}class sx{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Yi(e,t,r){const o=JSON.parse(r);let u,c="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return c&&o.error&&(c="string"==typeof o.error.message&&"string"==typeof o.error.code,c&&(u=new Pe(o.error.code,o.error.message))),c?new sx(e,t,o.state,u):(Yn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class WC{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Yi(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Pe(r.error.code,r.error.message))),u?new WC(e,r.state,o):(Yn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ox{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=KA();for(let c=0;o&&c<r.activeTargetIds.length;++c)o=FF(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return o?new ox(e,u):(Yn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class gO{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new gO(t.clientId,t.onlineState):(Yn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class mO{constructor(){this.activeTargetIds=KA()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _O{constructor(e,t,r,o,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.er=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new ti(Yt),this.started=!1,this.rr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ur=vV(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new mO),this.cr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.syncEngine.Fs();for(const o of t){if(o===e.er)continue;const u=e.getItem(vV(e.persistenceKey,o));if(u){const c=ox.Yi(o,u);c&&(e.ir=e.ir.insert(c.clientId,c))}}e.wr();const r=e.storage.getItem(e.dr);if(r){const o=e.mr(r);o&&e.gr(o)}for(const o of e.rr)e.sr(o);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,r){this.pr(e,t,r),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(pO(this.persistenceKey,e));if(r){const o=WC.Yi(e,r);o&&(t=o.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(pO(this.persistenceKey,e))}updateQueryState(e,t,r){this.Er(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ir(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fe("SharedClientState","READ",e,t),t}setItem(e,t){Fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Fe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ur)return void Yn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Ee.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const o=t.Pr(r.key);return t.br(o,null)}{const o=t.Vr(r.key,r.newValue);if(o)return t.br(o.clientId,o)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const o=t.vr(r.key,r.newValue);if(o)return t.Sr(o)}}else if(t.lr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(r.key===t.dr){if(null!==r.newValue){const o=t.mr(r.newValue);if(o)return t.gr(o)}}else if(r.key===t.ar){const o=function(u){let c=Ca.A;if(null!=u)try{const p=JSON.parse(u);Tt("number"==typeof p),c=p}catch(p){Yn("SharedClientState","Failed to read sequence number from WebStorage",p)}return c}(r.newValue);o!==Ca.A&&t.sequenceNumberHandler(o)}else if(r.key===t._r){const o=t.Nr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.kr(u)))}}else t.rr.push(r)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,r){const o=new sx(this.currentUser,e,t,r),u=EV(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Xi())}Ir(e){const t=EV(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,r){const o=pO(this.persistenceKey,e),u=new WC(e,t,r);this.setItem(o,u.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const r=this.Pr(e);return ox.Yi(r,t)}vr(e,t){const r=this.hr.exec(e),o=Number(r[1]);return sx.Yi(new yt(void 0!==r[2]?r[2]:null),o,t)}Dr(e,t){const r=this.lr.exec(e),o=Number(r[1]);return WC.Yi(o,t)}mr(e){return gO.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,Ee.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);Fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.ir.insert(e,t):this.ir.remove(e),o=this.yr(this.ir),u=this.yr(r),c=[],p=[];return u.forEach(y=>{o.has(y)||c.push(y)}),o.forEach(y=>{u.has(y)||p.push(y)}),this.syncEngine.Fr(c,p).then(()=>{this.ir=r})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=KA();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class wV{constructor(){this.$r=new mO,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,r){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new mO,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Aj{Lr(e){}shutdown(){}}class bV{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){Fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){Fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const xj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Rj{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class Nj extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,r,o,u){const c=this.uo(e,t);Fe("RestConnection","Sending: ",c,r);const p={};return this.ao(p,o,u),this.co(e,c,p,r).then(y=>(Fe("RestConnection","Received: ",y),y),y=>{throw th("RestConnection",`${e} failed with error: `,y,"url: ",c,"request:",r),y})}ho(e,t,r,o,u){return this.oo(e,t,r,o,u)}ao(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+or,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}uo(e,t){return`${this.io}/v1/${t}:${xj[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,o){return new Promise((u,c)=>{const p=new ct;p.listenOnce(Y.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case W.NO_ERROR:const b=p.getResponseJson();Fe("Connection","XHR received:",JSON.stringify(b)),u(b);break;case W.TIMEOUT:Fe("Connection",'RPC "'+e+'" timed out'),c(new Pe(ge.DEADLINE_EXCEEDED,"Request time out"));break;case W.HTTP_ERROR:const S=p.getStatus();if(Fe("Connection",'RPC "'+e+'" failed with status:',S,"response text:",p.getResponseText()),S>0){const x=p.getResponseJson().error;if(x&&x.status&&x.message){const O=function($){const K=$.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(K)>=0?K:ge.UNKNOWN}(x.status);c(new Pe(O,x.message))}else c(new Pe(ge.UNKNOWN,"Server responded with status "+p.getStatus()))}else c(new Pe(ge.UNAVAILABLE,"Connection failed."));break;default:et()}}finally{Fe("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(o);p.send(t,"POST",y,r,15)})}lo(e,t,r){const o=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=P(),c=F(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new ke({})),this.ao(p.initMessageHeaders,t,r),(0,k.uI)()||(0,k.b$)()||(0,k.d)()||(0,k.w1)()||(0,k.Mn)()||(0,k.ru)()||(p.httpHeadersOverwriteParam="$httpHeaders");const y=o.join("");Fe("Connection","Creating WebChannel: "+y,p);const b=u.createWebChannel(y,p);let S=!1,x=!1;const O=new Rj({Wr:K=>{x?Fe("Connection","Not sending because WebChannel is closed:",K):(S||(Fe("Connection","Opening WebChannel transport."),b.open(),S=!0),Fe("Connection","WebChannel sending:",K),b.send(K))},zr:()=>b.close()}),$=(K,ye,xe)=>{K.listen(ye,pt=>{try{xe(pt)}catch(dt){setTimeout(()=>{throw dt},0)}})};return $(b,we.EventType.OPEN,()=>{x||Fe("Connection","WebChannel transport opened.")}),$(b,we.EventType.CLOSE,()=>{x||(x=!0,Fe("Connection","WebChannel transport closed"),O.no())}),$(b,we.EventType.ERROR,K=>{x||(x=!0,th("Connection","WebChannel transport errored:",K),O.no(new Pe(ge.UNAVAILABLE,"The operation could not be completed")))}),$(b,we.EventType.MESSAGE,K=>{var ye;if(!x){const xe=K.data[0];Tt(!!xe);const pt=xe,dt=pt.error||(null===(ye=pt[0])||void 0===ye?void 0:ye.error);if(dt){Fe("Connection","WebChannel received error:",dt);const tt=dt.status;let it=function(rn){const gi=fi[rn];if(void 0!==gi)return yL(gi)}(tt),qt=dt.message;void 0===it&&(it=ge.INTERNAL,qt="Unknown error status: "+tt+" with message "+dt.message),x=!0,O.no(new Pe(it,qt)),b.close()}else Fe("Connection","WebChannel received:",xe),O.so(xe)}}),$(c,de.STAT_EVENT,K=>{K.stat===ie.PROXY?Fe("Connection","Detected buffering proxy"):K.stat===ie.NOPROXY&&Fe("Connection","Detected no buffering proxy")}),setTimeout(()=>{O.eo()},0),O}}function CV(){return"undefined"!=typeof window?window:null}function ax(){return"undefined"!=typeof document?document:null}function qC(n){return new vB(n,!0)}class yO{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Yn=e,this.timerId=t,this.fo=r,this._o=o,this.wo=u,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),o=Math.max(0,t-r);o>0&&Fe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,o,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class IV{constructor(e,t,r,o,u,c,p,y){this.Yn=e,this.Ro=r,this.Po=o,this.bo=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new yO(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,Ee.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,Ee.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var r=this;return(0,Ee.Z)(function*(){r.$o(),r.Bo(),r.Do.cancel(),r.Vo++,4!==e?r.Do.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(Yn(t.toString()),Yn("Using maximum backoff delay to prevent overloading the backend."),r.Do.Io()):t&&t.code===ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Lo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Vo===t&&this.qo(r,o)},r=>{e(()=>{const o=new Pe(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ko(o)})})}qo(e,t){const r=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{r(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(o=>{r(()=>this.Ko(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}No(){var e=this;this.state=5,this.Do.To((0,Ee.Z)(function*(){e.state=0,e.start()}))}Ko(e){return Fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():(Fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Mj extends IV{constructor(e,t,r,o,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.M=u}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:et(),o=e.targetChange.targetIds||[],u=function(y,b){return y.N?(Tt(void 0===b||"string"==typeof b),Ii.fromBase64String(b||"")):(Tt(void 0===b||b instanceof Uint8Array),Ii.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,p=c&&function(y){const b=void 0===y.code?ge.UNKNOWN:yL(y.code);return new Pe(b,y.message||"")}(c);t=new wL(r,o,u,p||null)}else if("documentChange"in e){const r=e.documentChange,o=wc(n,r.document.name),u=Gi(r.document.updateTime),c=new Ss({mapValue:{fields:r.document.fields}}),p=hr.newFoundDocument(o,u,c);t=new ZA(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,o=wc(n,r.document),u=r.readTime?Gi(r.readTime):Rt.min(),c=hr.newNoDocument(o,u);t=new ZA([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,o=wc(n,r.document);t=new ZA([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return et();{const r=e.filter,u=new cB(r.count||0);t=new EL(r.targetId,u)}}var y;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return Rt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Rt.min():u.readTime?Gi(u.readTime):Rt.min()}(e);return this.listener.Qo(t,r)}jo(e){const t={};t.database=FC(this.M),t.addTarget=function(o,u){let c;const p=u.target;return c=BA(p)?{documents:NL(o,p)}:{query:ML(o,p)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=TL(o,u.resumeToken):u.snapshotVersion.compareTo(Rt.min())>0&&(c.readTime=OC(o,u.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return et()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Fo(t)}Wo(e){const t={};t.database=FC(this.M),t.removeTarget=e,this.Fo(t)}}class Pj extends IV{constructor(e,t,r,o,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.M=u,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(Tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function(n,e){return n&&n.length>0?(Tt(void 0!==e),n.map(t=>function(r,o){let u=Gi(r.updateTime?r.updateTime:o);return u.isEqual(Rt.min())&&(u=Gi(o)),new aB(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Gi(e.commitTime);return this.listener.Yo(r,t)}return Tt(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=FC(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>LC(this.M,r))};this.Fo(t)}}class Oj extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=o,this.tu=!1}eu(){if(this.tu)throw new Pe(ge.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.oo(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Pe(ge.UNKNOWN,o.toString())})}ho(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.ho(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Pe(ge.UNKNOWN,o.toString())})}terminate(){this.tu=!0}}class kj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(Yn(t),this.iu=!1):Fe("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class Fj{constructor(e,t,r,o,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=u,this._u.Lr(p=>{r.enqueueAndForget((0,Ee.Z)(function*(){var y;op(c)&&(Fe("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,Ee.Z)(function*(b){const S=Ye(b);S.fu.add(4),yield Wv(S),S.wu.set("Unknown"),S.fu.delete(4),yield zC(S)}),function(b){return y.apply(this,arguments)})(c))}))}),this.wu=new kj(r,o)}}function zC(n){return vO.apply(this,arguments)}function vO(){return(vO=(0,Ee.Z)(function*(n){if(op(n))for(const e of n.du)yield e(!0)})).apply(this,arguments)}function Wv(n){return EO.apply(this,arguments)}function EO(){return(EO=(0,Ee.Z)(function*(n){for(const e of n.du)yield e(!1)})).apply(this,arguments)}function ux(n,e){const t=Ye(n);t.lu.has(e.targetId)||(t.lu.set(e.targetId,e),CO(t)?bO(t):zv(t).xo()&&wO(t,e))}function KC(n,e){const t=Ye(n),r=zv(t);t.lu.delete(e),r.xo()&&TV(t,e),0===t.lu.size&&(r.xo()?r.Mo():op(t)&&t.wu.set("Unknown"))}function wO(n,e){n.mu.Z(e.targetId),zv(n).jo(e)}function TV(n,e){n.mu.Z(e),zv(n).Wo(e)}function bO(n){n.mu=new mB({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.lu.get(e)||null}),zv(n).start(),n.wu.ru()}function CO(n){return op(n)&&!zv(n).Co()&&n.lu.size>0}function op(n){return 0===Ye(n).fu.size}function DV(n){n.mu=void 0}function Lj(n){return IO.apply(this,arguments)}function IO(){return(IO=(0,Ee.Z)(function*(n){n.lu.forEach((e,t)=>{wO(n,e)})})).apply(this,arguments)}function Vj(n,e){return TO.apply(this,arguments)}function TO(){return(TO=(0,Ee.Z)(function*(n,e){DV(n),CO(n)?(n.wu.au(e),bO(n)):n.wu.set("Unknown")})).apply(this,arguments)}function Uj(n,e,t){return DO.apply(this,arguments)}function DO(){return(DO=(0,Ee.Z)(function*(n,e,t){if(n.wu.set("Online"),e instanceof wL&&2===e.state&&e.cause)try{yield(r=(0,Ee.Z)(function*(o,u){const c=u.cause;for(const p of u.targetIds)o.lu.has(p)&&(yield o.remoteSyncer.rejectListen(p,c),o.lu.delete(p),o.mu.removeTarget(p))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield lx(n,r)}else if(e instanceof ZA?n.mu.ut(e):e instanceof EL?n.mu._t(e):n.mu.ht(e),!t.isEqual(Rt.min()))try{const r=yield pV(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const c=o.mu.yt(u);return c.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const b=o.lu.get(y);b&&o.lu.set(y,b.withResumeToken(p.resumeToken,u))}}),c.targetMismatches.forEach(p=>{const y=o.lu.get(p);if(!y)return;o.lu.set(p,y.withResumeToken(Ii.EMPTY_BYTE_STRING,y.snapshotVersion)),TV(o,p);const b=new np(y.target,p,1,y.sequenceNumber);wO(o,b)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Fe("RemoteStore","Failed to raise snapshot:",r),yield lx(n,r)}var r})).apply(this,arguments)}function lx(n,e,t){return SO.apply(this,arguments)}function SO(){return(SO=(0,Ee.Z)(function*(n,e,t){if(!km(e))throw e;n.fu.add(1),yield Wv(n),n.wu.set("Offline"),t||(t=()=>pV(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){Fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.fu.delete(1),yield zC(n)}))})).apply(this,arguments)}function SV(n,e){return e().catch(t=>lx(n,t,e))}function qv(n){return AO.apply(this,arguments)}function AO(){return(AO=(0,Ee.Z)(function*(n){const e=Ye(n),t=ap(e);let r=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;Bj(e);)try{const o=yield _j(e.localStore,r);if(null===o){0===e.hu.length&&t.Mo();break}r=o.batchId,jj(e,o)}catch(o){yield lx(e,o)}AV(e)&&xV(e)})).apply(this,arguments)}function Bj(n){return op(n)&&n.hu.length<10}function jj(n,e){n.hu.push(e);const t=ap(n);t.xo()&&t.Ho&&t.Jo(e.mutations)}function AV(n){return op(n)&&!ap(n).Co()&&n.hu.length>0}function xV(n){ap(n).start()}function $j(n){return xO.apply(this,arguments)}function xO(){return(xO=(0,Ee.Z)(function*(n){ap(n).Zo()})).apply(this,arguments)}function Hj(n){return RO.apply(this,arguments)}function RO(){return(RO=(0,Ee.Z)(function*(n){const e=ap(n);for(const t of n.hu)e.Jo(t.mutations)})).apply(this,arguments)}function Gj(n,e,t){return NO.apply(this,arguments)}function NO(){return(NO=(0,Ee.Z)(function*(n,e,t){const r=n.hu.shift(),o=YP.from(r,e,t);yield SV(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield qv(n)})).apply(this,arguments)}function Wj(n,e){return MO.apply(this,arguments)}function MO(){return(MO=(0,Ee.Z)(function*(n,e){var t;e&&ap(n).Ho&&(yield(t=(0,Ee.Z)(function*(r,o){if(_L(u=o.code)&&u!==ge.ABORTED){const c=r.hu.shift();ap(r).ko(),yield SV(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o)),yield qv(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),AV(n)&&xV(n)})).apply(this,arguments)}function RV(n,e){return PO.apply(this,arguments)}function PO(){return(PO=(0,Ee.Z)(function*(n,e){const t=Ye(n);t.asyncQueue.verifyOperationInProgress(),Fe("RemoteStore","RemoteStore received new credentials");const r=op(t);t.fu.add(3),yield Wv(t),r&&t.wu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.fu.delete(3),yield zC(t)})).apply(this,arguments)}function OO(n,e){return kO.apply(this,arguments)}function kO(){return(kO=(0,Ee.Z)(function*(n,e){const t=Ye(n);e?(t.fu.delete(2),yield zC(t)):e||(t.fu.add(2),yield Wv(t),t.wu.set("Unknown"))})).apply(this,arguments)}function zv(n){return n.gu||(n.gu=function(e,t,r){const o=Ye(e);return o.eu(),new Mj(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Hr:Lj.bind(null,n),Yr:Vj.bind(null,n),Qo:Uj.bind(null,n)}),n.du.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.gu.ko(),CO(n)?bO(n):n.wu.set("Unknown")):(yield n.gu.stop(),DV(n))});return function(t){return e.apply(this,arguments)}}())),n.gu}function ap(n){return n.yu||(n.yu=function(e,t,r){const o=Ye(e);return o.eu(),new Pj(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Hr:$j.bind(null,n),Yr:Wj.bind(null,n),Xo:Hj.bind(null,n),Yo:Gj.bind(null,n)}),n.du.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.yu.ko(),yield qv(n)):(yield n.yu.stop(),n.hu.length>0&&(Fe("RemoteStore",`Stopping write stream with ${n.hu.length} pending writes`),n.hu=[]))});return function(t){return e.apply(this,arguments)}}())),n.yu}class FO{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new $i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,o,u){const c=Date.now()+r,p=new FO(e,t,c,o,u);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kv(n,e){if(Yn("AsyncQueue",`${e}: ${n}`),km(n))return new Pe(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class Zv{constructor(e){this.comparator=e?(t,r)=>e(t,r)||We.comparator(t.key,r.key):(t,r)=>We.comparator(t.key,r.key),this.keyedMap=GP(),this.sortedSet=new ti(this.comparator)}static emptySet(e){return new Zv(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zv)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Zv;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class NV{constructor(){this.pu=new ti(We.comparator)}track(e){const t=e.doc.key,r=this.pu.get(t);r?0!==e.type&&3===r.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==r.type?this.pu=this.pu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.pu=this.pu.remove(t):1===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):et():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Yv{constructor(e,t,r,o,u,c,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=y}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new Yv(e,t,Zv.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&SC(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class qj{constructor(){this.Tu=void 0,this.listeners=[]}}class zj{constructor(){this.queries=new tp(e=>tL(e),SC),this.onlineState="Unknown",this.Eu=new Set}}function LO(n,e){return VO.apply(this,arguments)}function VO(){return(VO=(0,Ee.Z)(function*(n,e){const t=Ye(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new qj),o)try{u.Tu=yield t.onListen(r)}catch(c){const p=Kv(c,`Initialization of query '${BP(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,u),u.listeners.push(e),e.Au(t.onlineState),u.Tu&&e.Ru(u.Tu)&&jO(t)})).apply(this,arguments)}function UO(n,e){return BO.apply(this,arguments)}function BO(){return(BO=(0,Ee.Z)(function*(n,e){const t=Ye(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)})).apply(this,arguments)}function Kj(n,e){const t=Ye(n);let r=!1;for(const o of e){const c=t.queries.get(o.query);if(c){for(const p of c.listeners)p.Ru(o)&&(r=!0);c.Tu=o}}r&&jO(t)}function Zj(n,e,t){const r=Ye(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function jO(n){n.Eu.forEach(e=>{e.next()})}class $O{constructor(e,t,r){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}Ru(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Yv(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=Yv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class Yj{constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class MV{constructor(e){this.M=e}fi(e){return wc(this.M,e)}di(e){return e.metadata.exists?RL(this.M,e.document,!1):hr.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return Gi(e)}}class Qj{constructor(e,t,r){this.Nu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=PV(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=_n.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,r=new MV(this.M);for(const o of e)if(o.metadata.queries){const u=r.fi(o.metadata.name);for(const c of o.metadata.queries){const p=(t.get(c)||Nn()).add(u);t.set(c,p)}}return t}complete(){var e=this;return(0,Ee.Z)(function*(){const t=yield function(n,e,t,r){return cO.apply(this,arguments)}(e.localStore,new MV(e.M),e.documents,e.Nu.id),r=e.Mu(e.documents);for(const o of e.queries)yield vj(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function PV(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class OV{constructor(e){this.key=e}}class kV{constructor(e){this.key=e}}class FV{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=Nn(),this.mutatedKeys=Nn(),this.Uu=rL(e),this.qu=new Zv(this.Uu)}get Ku(){return this.$u}Gu(e,t){const r=t?t.Qu:new NV,o=t?t.qu:this.qu;let u=t?t.mutatedKeys:this.mutatedKeys,c=o,p=!1;const y=$A(this.query)&&o.size===this.query.limit?o.last():null,b=HA(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((S,x)=>{const O=o.get(S),$=jP(this.query,x)?x:null,K=!!O&&this.mutatedKeys.has(O.key),ye=!!$&&($.hasLocalMutations||this.mutatedKeys.has($.key)&&$.hasCommittedMutations);let xe=!1;O&&$?O.data.isEqual($.data)?K!==ye&&(r.track({type:3,doc:$}),xe=!0):this.ju(O,$)||(r.track({type:2,doc:$}),xe=!0,(y&&this.Uu($,y)>0||b&&this.Uu($,b)<0)&&(p=!0)):!O&&$?(r.track({type:0,doc:$}),xe=!0):O&&!$&&(r.track({type:1,doc:O}),xe=!0,(y||b)&&(p=!0)),xe&&($?(c=c.add($),u=ye?u.add(S):u.delete(S)):(c=c.delete(S),u=u.delete(S)))}),$A(this.query)||HA(this.query))for(;c.size>this.query.limit;){const S=$A(this.query)?c.last():c.first();c=c.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{qu:c,Qu:r,ni:p,mutatedKeys:u}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const u=e.Qu.Iu();u.sort((b,S)=>function(x,O){const $=K=>{switch(K){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et()}};return $(x)-$(O)}(b.type,S.type)||this.Uu(b.doc,S.doc)),this.Wu(r);const c=t?this.zu():[],p=0===this.Lu.size&&this.current?1:0,y=p!==this.Bu;return this.Bu=p,0!==u.length||y?{snapshot:new Yv(this.query,e.qu,o,u,e.mutatedKeys,0===p,y,!1),Hu:c}:{Hu:c}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new NV,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=Nn(),this.qu.forEach(r=>{this.Ju(r.key)&&(this.Lu=this.Lu.add(r.key))});const t=[];return e.forEach(r=>{this.Lu.has(r)||t.push(new kV(r))}),this.Lu.forEach(r=>{e.has(r)||t.push(new OV(r))}),t}Yu(e){this.$u=e.li,this.Lu=Nn();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return Yv.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class Jj{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Xj{constructor(e){this.key=e,this.Zu=!1}}class e${constructor(e,t,r,o,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.ta={},this.ea=new tp(p=>tL(p),SC),this.na=new Map,this.sa=new Set,this.ia=new ti(We.comparator),this.ra=new Map,this.oa=new hO,this.ua={},this.aa=new Map,this.ca=jm.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function t$(n,e){return HO.apply(this,arguments)}function HO(){return(HO=(0,Ee.Z)(function*(n,e){const t=hk(n);let r,o;const u=t.ea.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.Xu();else{const c=yield Hv(t.localStore,au(e));t.isPrimaryClient&&ux(t.remoteStore,c);const p=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,o=yield GO(t,e,r,"current"===p)}return o})).apply(this,arguments)}function GO(n,e,t,r){return WO.apply(this,arguments)}function WO(){return(WO=(0,Ee.Z)(function*(n,e,t,r){n.la=(S,x,O)=>{return($=(0,Ee.Z)(function*(K,ye,xe,pt){let dt=ye.view.Gu(xe);dt.ni&&(dt=yield ix(K.localStore,ye.query,!1).then(({documents:qt})=>ye.view.Gu(qt,dt)));const tt=pt&&pt.targetChanges.get(ye.targetId),it=ye.view.applyChanges(dt,K.isPrimaryClient,tt);return tk(K,ye.targetId,it.Hu),it.snapshot}),function(K,ye,xe,pt){return $.apply(this,arguments)})(n,S,x,O);var $};const o=yield ix(n.localStore,e,!0),u=new FV(e,o.li),c=u.Gu(o.documents),p=PC.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),y=u.applyChanges(c,n.isPrimaryClient,p);tk(n,t,y.Hu);const b=new Jj(e,t,u);return n.ea.set(e,b),n.na.has(t)?n.na.get(t).push(e):n.na.set(t,[e]),y.snapshot})).apply(this,arguments)}function n$(n,e){return qO.apply(this,arguments)}function qO(){return(qO=(0,Ee.Z)(function*(n,e){const t=Ye(n),r=t.ea.get(e),o=t.na.get(r.targetId);if(o.length>1)return t.na.set(r.targetId,o.filter(u=>!SC(u,e))),void t.ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Gv(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),KC(t.remoteStore,r.targetId),Qv(t,r.targetId)}).catch($m))):(Qv(t,r.targetId),yield Gv(t.localStore,r.targetId,!0))})).apply(this,arguments)}function zO(){return(zO=(0,Ee.Z)(function*(n,e,t){const r=fk(n);try{const o=yield function(u,c){const p=Ye(u),y=ei.now(),b=c.reduce((x,O)=>x.add(O.key),Nn());let S;return p.persistence.runTransaction("Locally write mutations","readwrite",x=>p.ci.Ks(x,b).next(O=>{S=O;const $=[];for(const K of c){const ye=lB(K,S.get(K.key));null!=ye&&$.push(new Om(K.key,ye,WF(ye.value.mapValue),hi.exists(!0)))}return p.Bs.addMutationBatch(x,y,$,c)})).then(x=>(x.applyToLocalDocumentSet(S),{batchId:x.batchId,changes:S}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,c,p){let y=u.ua[u.currentUser.toKey()];y||(y=new ti(Yt)),y=y.insert(c,p),u.ua[u.currentUser.toKey()]=y}(r,o.batchId,t),yield sh(r,o.changes),yield qv(r.remoteStore)}catch(o){const u=Kv(o,"Failed to persist write");t.reject(u)}})).apply(this,arguments)}function LV(n,e){return KO.apply(this,arguments)}function KO(){return(KO=(0,Ee.Z)(function*(n,e){const t=Ye(n);try{const r=yield mj(t.localStore,e);e.targetChanges.forEach((o,u)=>{const c=t.ra.get(u);c&&(Tt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?c.Zu=!0:o.modifiedDocuments.size>0?Tt(c.Zu):o.removedDocuments.size>0&&(Tt(c.Zu),c.Zu=!1))}),yield sh(t,r,e)}catch(r){yield $m(r)}})).apply(this,arguments)}function VV(n,e,t){const r=Ye(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ea.forEach((u,c)=>{const p=c.view.Au(e);p.snapshot&&o.push(p.snapshot)}),function(u,c){const p=Ye(u);p.onlineState=c;let y=!1;p.queries.forEach((b,S)=>{for(const x of S.listeners)x.Au(c)&&(y=!0)}),y&&jO(p)}(r.eventManager,e),o.length&&r.ta.Qo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function i$(n,e,t){return ZO.apply(this,arguments)}function ZO(){return(ZO=(0,Ee.Z)(function*(n,e,t){const r=Ye(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.ra.get(e),u=o&&o.key;if(u){let c=new ti(We.comparator);c=c.insert(u,hr.newNoDocument(u,Rt.min()));const p=Nn().add(u),y=new MC(Rt.min(),new Map,new fr(Yt),c,p);yield LV(r,y),r.ia=r.ia.remove(u),r.ra.delete(e),nk(r)}else yield Gv(r.localStore,e,!1).then(()=>Qv(r,e,t)).catch($m)})).apply(this,arguments)}function s$(n,e){return YO.apply(this,arguments)}function YO(){return(YO=(0,Ee.Z)(function*(n,e){const t=Ye(n),r=e.batch.batchId;try{const o=yield gj(t.localStore,e);ek(t,r,null),XO(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield sh(t,o)}catch(o){yield $m(o)}})).apply(this,arguments)}function o$(n,e,t){return QO.apply(this,arguments)}function QO(){return(QO=(0,Ee.Z)(function*(n,e,t){const r=Ye(n);try{const o=yield function(u,c){const p=Ye(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let b;return p.Bs.lookupMutationBatch(y,c).next(S=>(Tt(null!==S),b=S.keys(),p.Bs.removeMutationBatch(y,S))).next(()=>p.Bs.performConsistencyCheck(y)).next(()=>p.ci.Ks(y,b))})}(r.localStore,e);ek(r,e,t),XO(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield sh(r,o)}catch(o){yield $m(o)}})).apply(this,arguments)}function JO(){return(JO=(0,Ee.Z)(function*(n,e){const t=Ye(n);op(t.remoteStore)||Fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=Ye(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>c.Bs.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const o=t.aa.get(r)||[];o.push(e),t.aa.set(r,o)}catch(r){const o=Kv(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}})).apply(this,arguments)}function XO(n,e){(n.aa.get(e)||[]).forEach(t=>{t.resolve()}),n.aa.delete(e)}function ek(n,e,t){const r=Ye(n);let o=r.ua[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ua[r.currentUser.toKey()]=o}}function Qv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.na.get(e))n.ea.delete(r),t&&n.ta.fa(r,t);n.na.delete(e),n.isPrimaryClient&&n.oa.Pi(e).forEach(r=>{n.oa.containsKey(r)||UV(n,r)})}function UV(n,e){n.sa.delete(e.path.canonicalString());const t=n.ia.get(e);null!==t&&(KC(n.remoteStore,t),n.ia=n.ia.remove(e),n.ra.delete(t),nk(n))}function tk(n,e,t){for(const r of t)r instanceof OV?(n.oa.addReference(r.key,e),u$(n,r)):r instanceof kV?(Fe("SyncEngine","Document no longer in limbo: "+r.key),n.oa.removeReference(r.key,e),n.oa.containsKey(r.key)||UV(n,r.key)):et()}function u$(n,e){const t=e.key,r=t.path.canonicalString();n.ia.get(t)||n.sa.has(r)||(Fe("SyncEngine","New document in limbo: "+t),n.sa.add(r),nk(n))}function nk(n){for(;n.sa.size>0&&n.ia.size<n.maxConcurrentLimboResolutions;){const e=n.sa.values().next().value;n.sa.delete(e);const t=new We(_n.fromString(e)),r=n.ca.next();n.ra.set(r,new Xj(t)),n.ia=n.ia.insert(t,r),ux(n.remoteStore,new np(au(Mv(t.path)),r,2,Ca.A))}}function sh(n,e,t){return rk.apply(this,arguments)}function rk(){return(rk=(0,Ee.Z)(function*(n,e,t){const r=Ye(n),o=[],u=[],c=[];var p;r.ea.isEmpty()||(r.ea.forEach((p,y)=>{c.push(r.la(y,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,b.fromCache?"not-current":"current"),o.push(b);const S=aO.Ys(y.targetId,b);u.push(S)}}))}),yield Promise.all(c),r.ta.Qo(o),yield(p=(0,Ee.Z)(function*(y,b){const S=Ye(y);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>ve.forEach(b,O=>ve.forEach(O.Hs,$=>S.persistence.referenceDelegate.addReference(x,O.targetId,$)).next(()=>ve.forEach(O.Js,$=>S.persistence.referenceDelegate.removeReference(x,O.targetId,$)))))}catch(x){if(!km(x))throw x;Fe("LocalStore","Failed to update sequence numbers: "+x)}for(const x of b){const O=x.targetId;if(!x.fromCache){const $=S.ii.get(O),ye=$.withLastLimboFreeSnapshotVersion($.snapshotVersion);S.ii=S.ii.insert(O,ye)}}}),function(y,b){return p.apply(this,arguments)})(r.localStore,u))})).apply(this,arguments)}function l$(n,e){return ik.apply(this,arguments)}function ik(){return(ik=(0,Ee.Z)(function*(n,e){const t=Ye(n);if(!t.currentUser.isEqual(e)){Fe("SyncEngine","User change. New user:",e.toKey());const r=yield fV(t.localStore,e);t.currentUser=e,(o=t).aa.forEach(c=>{c.forEach(p=>{p.reject(new Pe(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.aa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield sh(t,r.hi)}var o})).apply(this,arguments)}function c$(n,e){const t=Ye(n),r=t.ra.get(e);if(r&&r.Zu)return Nn().add(r.key);{let o=Nn();const u=t.na.get(e);if(!u)return o;for(const c of u){const p=t.ea.get(c);o=o.unionWith(p.view.Ku)}return o}}function d$(n,e){return sk.apply(this,arguments)}function sk(){return(sk=(0,Ee.Z)(function*(n,e){const t=Ye(n),r=yield ix(t.localStore,e.query,!0),o=e.view.Yu(r);return t.isPrimaryClient&&tk(t,e.targetId,o.Hu),o})).apply(this,arguments)}function h$(n,e){return ok.apply(this,arguments)}function ok(){return(ok=(0,Ee.Z)(function*(n,e){const t=Ye(n);return _V(t.localStore,e).then(r=>sh(t,r))})).apply(this,arguments)}function f$(n,e,t,r){return ak.apply(this,arguments)}function ak(){return(ak=(0,Ee.Z)(function*(n,e,t,r){const o=Ye(n),u=yield function(c,p){const y=Ye(c),b=Ye(y.Bs);return y.persistence.runTransaction("Lookup mutation documents","readonly",S=>b.fn(S,p).next(x=>x?y.ci.Ks(S,x):ve.resolve(null)))}(o.localStore,e);var p;null!==u?("pending"===t?yield qv(o.remoteStore):"acknowledged"===t||"rejected"===t?(ek(o,e,r||null),XO(o,e),p=e,Ye(Ye(o.localStore).Bs)._n(p)):et(),yield sh(o,u)):Fe("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function uk(){return(uk=(0,Ee.Z)(function*(n,e){const t=Ye(n);if(hk(t),fk(t),!0===e&&!0!==t.ha){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield BV(t,r.toArray());t.ha=!0,yield OO(t.remoteStore,!0);for(const u of o)ux(t.remoteStore,u)}else if(!1===e&&!1!==t.ha){const r=[];let o=Promise.resolve();t.na.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):o=o.then(()=>(Qv(t,c),Gv(t.localStore,c,!0))),KC(t.remoteStore,c)}),yield o,yield BV(t,r),function(u){const c=Ye(u);c.ra.forEach((p,y)=>{KC(c.remoteStore,y)}),c.oa.bi(),c.ra=new Map,c.ia=new ti(We.comparator)}(t),t.ha=!1,yield OO(t.remoteStore,!1)}})).apply(this,arguments)}function BV(n,e,t){return lk.apply(this,arguments)}function lk(){return(lk=(0,Ee.Z)(function*(n,e,t){const r=Ye(n),o=[],u=[];for(const c of e){let p;const y=r.na.get(c);if(y&&0!==y.length){p=yield Hv(r.localStore,au(y[0]));for(const b of y){const S=r.ea.get(b),x=yield d$(r,S);x.snapshot&&u.push(x.snapshot)}}else{const b=yield mV(r.localStore,c);p=yield Hv(r.localStore,b),yield GO(r,jV(b),c,!1)}o.push(p)}return r.ta.Qo(u),o})).apply(this,arguments)}function jV(n){return XF(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function g$(n){const e=Ye(n);return Ye(Ye(e.localStore).persistence).Fs()}function m$(n,e,t,r){return ck.apply(this,arguments)}function ck(){return(ck=(0,Ee.Z)(function*(n,e,t,r){const o=Ye(n);if(o.ha)return void Fe("SyncEngine","Ignoring unexpected query state notification.");const u=o.na.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield _V(o.localStore,nL(u[0])),p=MC.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield sh(o,c,p);break}case"rejected":yield Gv(o.localStore,e,!0),Qv(o,e,r);break;default:et()}})).apply(this,arguments)}function _$(n,e,t){return dk.apply(this,arguments)}function dk(){return(dk=(0,Ee.Z)(function*(n,e,t){const r=hk(n);if(r.ha){for(const o of e){if(r.na.has(o)){Fe("SyncEngine","Adding an already active target "+o);continue}const u=yield mV(r.localStore,o),c=yield Hv(r.localStore,u);yield GO(r,jV(u),c.targetId,!1),ux(r.remoteStore,c)}for(const o of t)r.na.has(o)&&(yield Gv(r.localStore,o,!1).then(()=>{KC(r.remoteStore,o),Qv(r,o)}).catch($m))}})).apply(this,arguments)}function hk(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=LV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=c$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=i$.bind(null,e),e.ta.Qo=Kj.bind(null,e.eventManager),e.ta.fa=Zj.bind(null,e.eventManager),e}function fk(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=s$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=o$.bind(null,e),e}class $V{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ee.Z)(function*(){t.M=qC(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return hV(this.persistence,new dV,e.initialUser,this.M)}wa(e){return new Dj(fO.zi,this.M)}_a(e){return new wV}terminate(){var e=this;return(0,Ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class HV extends $V{constructor(e,t,r){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e),yield r.ya.initialize(r,e),yield fk(r.ya.syncEngine),yield qv(r.ya.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ga(e){return hV(this.persistence,new dV,e.initialUser,this.M)}ma(e){return new aj(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=oO(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ho.withCacheSize(this.cacheSizeBytes):Ho.DEFAULT;return new sO(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,CV(),ax(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new wV}}class v$ extends HV{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e);const o=r.ya.syncEngine;r.sharedClientState instanceof _O&&(r.sharedClientState.syncEngine={Mr:f$.bind(null,o),Or:m$.bind(null,o),Fr:_$.bind(null,o),Fs:g$.bind(null,o),kr:h$.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,Ee.Z)(function*(c){yield function(n,e){return uk.apply(this,arguments)}(r.ya.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}_a(e){const t=CV();if(!_O.vt(t))throw new Pe(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=oO(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new _O(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class pk{initialize(e,t){var r=this;return(0,Ee.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>VV(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=l$.bind(null,r.syncEngine),yield OO(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new zj}createDatastore(e){const t=qC(e.databaseInfo.databaseId),r=new Nj(e.databaseInfo);return new Oj(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=p=>VV(this.syncEngine,p,0),c=bV.vt()?new bV:new Aj,new Fj(t,r,o,u,c);var t,r,o,u,c}createSyncEngine(e,t){return function(r,o,u,c,p,y,b){const S=new e$(r,o,u,c,p,y);return b&&(S.ha=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ee.Z)(function*(t){const r=Ye(t);Fe("RemoteStore","RemoteStore shutting down."),r.fu.add(5),yield Wv(r),r._u.shutdown(),r.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function GV(n,e=10240){let t=0;return{read:()=>(0,Ee.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class cx{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class E${constructor(e,t){this.Ta=e,this.M=t,this.metadata=new $i,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(r=>{r&&r.xu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const r=e.Ea.decode(t),o=Number(r);isNaN(o)&&e.Pa(`length string (${r}) is not valid number`);const u=yield e.ba(o);return new Yj(JSON.parse(u),t.length+o)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,Ee.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,Ee.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const r=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class w${constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Pe(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,Ee.Z)(function*(u,c){const p=Ye(u),y=FC(p.M)+"/documents",b={documents:c.map($=>kC(p.M,$))},S=yield p.ho("BatchGetDocuments",y,b),x=new Map;S.forEach($=>{const K=function(n,e){return"found"in e?function(t,r){Tt(!!r.found);const o=wc(t,r.found.name),u=Gi(r.found.updateTime),c=new Ss({mapValue:{fields:r.found.fields}});return hr.newFoundDocument(o,u,c)}(n,e):"missing"in e?function(t,r){Tt(!!r.missing),Tt(!!r.readTime);const o=wc(t,r.missing),u=Gi(r.readTime);return hr.newNoDocument(o,u)}(n,e):et()}(p.M,$);x.set(K.key.toString(),K)});const O=[];return c.forEach($=>{const K=x.get($.toString());Tt(!!K),O.push(K)}),O}),function(u,c){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new RC(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=We.fromPath(o);e.mutations.push(new HP(u,e.precondition(u)))}),yield(r=(0,Ee.Z)(function*(o,u){const c=Ye(o),p=FC(c.M)+"/documents",y={writes:u.map(b=>LC(c.M,b))};yield c.oo("Commit",p,y)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw et();t=Rt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Pe(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?hi.updateTime(t):hi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Rt.min()))throw new Pe(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return hi.updateTime(t)}return hi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class b${constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.Sa=5,this.Do=new yO(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,Ee.Z)(function*(){const t=new w$(e.datastore),r=e.Ca(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.xa(u)}))}).catch(o=>{e.xa(o)})}))}Ca(e){try{const t=this.updateFunction(e);return!Sm(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!_L(t)}return!1}}class C${constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=yt.UNAUTHENTICATED,this.clientId=NF.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,Ee.Z)(function*(p){Fe("FirestoreClient","Received user=",p.uid),yield u.authCredentialListener(p),u.user=p});return function(p){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Fe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,Ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new $i;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Kv(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function WV(n,e){return gk.apply(this,arguments)}function gk(){return(gk=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,Ee.Z)(function*(u){r.isEqual(u)||(yield fV(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e})).apply(this,arguments)}function qV(n,e){return mk.apply(this,arguments)}function mk(){return(mk=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield _k(n);Fe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>RV(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>RV(e.remoteStore,u)),n.onlineComponents=e})).apply(this,arguments)}function _k(n){return yk.apply(this,arguments)}function yk(){return(yk=(0,Ee.Z)(function*(n){return n.offlineComponents||(Fe("FirestoreClient","Using default OfflineComponentProvider"),yield WV(n,new $V)),n.offlineComponents})).apply(this,arguments)}function dx(n){return vk.apply(this,arguments)}function vk(){return(vk=(0,Ee.Z)(function*(n){return n.onlineComponents||(Fe("FirestoreClient","Using default OnlineComponentProvider"),yield qV(n,new pk)),n.onlineComponents})).apply(this,arguments)}function zV(n){return _k(n).then(e=>e.persistence)}function Ek(n){return _k(n).then(e=>e.localStore)}function KV(n){return dx(n).then(e=>e.remoteStore)}function wk(n){return dx(n).then(e=>e.syncEngine)}function Jv(n){return bk.apply(this,arguments)}function bk(){return(bk=(0,Ee.Z)(function*(n){const e=yield dx(n),t=e.eventManager;return t.onListen=t$.bind(null,e.syncEngine),t.onUnlisten=n$.bind(null,e.syncEngine),t})).apply(this,arguments)}function ZV(n,e,t={}){const r=new $i;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(o,u,c,p,y){const b=new cx({next:x=>{u.enqueueAndForget(()=>UO(o,S));const O=x.docs.has(c);!O&&x.fromCache?y.reject(new Pe(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&x.fromCache&&p&&"server"===p.source?y.reject(new Pe(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(x)},error:x=>y.reject(x)}),S=new $O(Mv(c.path),b,{includeMetadataChanges:!0,Cu:!0});return LO(o,S)}(yield Jv(n),n.asyncQueue,e,t,r)})),r.promise}function YV(n,e,t={}){const r=new $i;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(o,u,c,p,y){const b=new cx({next:x=>{u.enqueueAndForget(()=>UO(o,S)),x.fromCache&&"server"===p.source?y.reject(new Pe(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(x)},error:x=>y.reject(x)}),S=new $O(c,b,{includeMetadataChanges:!0,Cu:!0});return LO(o,S)}(yield Jv(n),n.asyncQueue,e,t,r)})),r.promise}const QV=new Map;function Ck(n,e,t){if(!t)throw new Pe(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function JV(n,e,t,r){if(!0===e&&!0===r)throw new Pe(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function XV(n){if(!We.isDocumentKey(n))throw new Pe(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function eU(n){if(We.isDocumentKey(n))throw new Pe(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function hx(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":et()}function pn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Pe(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=hx(n);throw new Pe(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function tU(n,e){if(e<=0)throw new Pe(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class nU{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Pe(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pe(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,JV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ZC{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nU({}),this._settingsFrozen=!1,e instanceof nh?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Pe(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nh(o.options.projectId)}(e))}get app(){if(!this._app)throw new Pe(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pe(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nU(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new M2;switch(t.type){case"gapi":const r=t.client;return Tt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new F2(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Pe(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=QV.get(e);t&&(Fe("ComponentProvider","Removing Datastore"),QV.delete(e),t.terminate())}(this),Promise.resolve()}}class pr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pr(this.firestore,e,this._key)}}class As{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new As(this.firestore,e,this._query)}}class Cc extends As{constructor(e,t,r){super(e,t,Mv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pr(this.firestore,null,new We(e))}withConverter(e){return new Cc(this.firestore,e,this._path)}}function rU(n,e,...t){if(n=(0,k.m9)(n),Ck("collection","path",e),n instanceof ZC){const r=_n.fromString(e,...t);return eU(r),new Cc(n,null,r)}{if(!(n instanceof pr||n instanceof Cc))throw new Pe(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(_n.fromString(e,...t));return eU(r),new Cc(n.firestore,null,r)}}function fx(n,e,...t){if(n=(0,k.m9)(n),1===arguments.length&&(e=NF.R()),Ck("doc","path",e),n instanceof ZC){const r=_n.fromString(e,...t);return XV(r),new pr(n,null,new We(r))}{if(!(n instanceof pr||n instanceof Cc))throw new Pe(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(_n.fromString(e,...t));return XV(r),new pr(n.firestore,n instanceof Cc?n.converter:null,new We(r))}}function iU(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),(n instanceof pr||n instanceof Cc)&&(e instanceof pr||e instanceof Cc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function sU(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),n instanceof As&&e instanceof As&&n.firestore===e.firestore&&SC(n._query,e._query)&&n.converter===e.converter}class O${constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new yO(this,"async_queue_retry"),this.qa=()=>{const t=ax();t&&Fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const e=ax();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=ax();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new $i;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(t){if(!km(t))throw t;Fe("AsyncQueue","Operation failed with retryable error: "+t)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(r=>{throw this.$a=r,this.Ba=!1,Yn("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.Ba=!1,r))));return this.ka=t,t}enqueueAfterDelay(e,t,r){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const o=FO.createAndSchedule(this,e,t,r,u=>this.ja(u));return this.Fa.push(o),o}Ka(){this.$a&&et()}verifyOperationInProgress(){}Wa(){var e=this;return(0,Ee.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function Ik(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class k${constructor(){this._progressObserver={},this._taskCompletionResolver=new $i,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Cr extends ZC{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new O$,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||oU(this),this._firestoreClient.terminate()}}function pi(n){return n._firestoreClient||oU(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function oU(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new $2(n._databaseId,u,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var u,p;n._firestoreClient=new C$(n._authCredentials,n._appCheckCredentials,n._queue,r)}function aU(n,e,t){const r=new $i;return n.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield WV(n,t),yield qV(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===ge.FAILED_PRECONDITION||u.code===ge.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function uU(n){if(n._initialized||n._terminated)throw new Pe(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class oh{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pe(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ic{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ic(Ii.fromBase64String(e))}catch(t){throw new Pe(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ic(Ii.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Gm{constructor(e){this._methodName=e}}class px{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Yt(this._lat,e._lat)||Yt(this._long,e._long)}}const W$=/^__.*__$/;class q${constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Om(e,this.data,this.fieldMask,t,this.fieldTransforms):new xC(e,this.data,t,this.fieldTransforms)}}class lU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Om(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function cU(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et()}}class gx{constructor(e,t,r,o,u,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===u&&this.Ya(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new gx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Za({path:r,ec:!1});return o.nc(e),o}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Za({path:r,ec:!1});return o.Ya(),o}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return yx(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(cU(this.Xa)&&W$.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class z${constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||qC(e)}ac(e,t,r,o=!1){return new gx({Xa:e,methodName:t,uc:r,path:Hi.emptyPath(),ec:!1,oc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Wm(n){const e=n._freezeSettings(),t=qC(n._databaseId);return new z$(n._databaseId,!!e.ignoreUndefinedProperties,t)}function mx(n,e,t,r,o,u={}){const c=n.ac(u.merge||u.mergeFields?2:0,e,t,o);Ak("Data must be an object, but it was:",c,r);const p=fU(r,c);let y,b;if(u.merge)y=new xv(c.fieldMask),b=c.fieldTransforms;else if(u.mergeFields){const S=[];for(const x of u.mergeFields){const O=xk(e,x,t);if(!c.contains(O))throw new Pe(ge.INVALID_ARGUMENT,`Field '${O}' is specified in your field mask but missing from your input data.`);gU(S,O)||S.push(O)}y=new xv(S),b=c.fieldTransforms.filter(x=>y.covers(x.field))}else y=null,b=c.fieldTransforms;return new q$(new Ss(p),y,b)}class YC extends Gm{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof YC}}function dU(n,e,t){return new gx({Xa:3,uc:e.settings.uc,methodName:n._methodName,ec:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class Tk extends Gm{_toFieldTransform(e){return new AC(e.path,new Ov)}isEqual(e){return e instanceof Tk}}class K$ extends Gm{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=dU(this,e,!0),r=this.cc.map(u=>qm(u,t)),o=new Mm(r);return new AC(e.path,o)}isEqual(e){return this===e}}class Z$ extends Gm{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=dU(this,e,!0),r=this.cc.map(u=>qm(u,t)),o=new Pm(r);return new AC(e.path,o)}isEqual(e){return this===e}}class Y$ extends Gm{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new kv(e.M,oL(e.M,this.hc));return new AC(e.path,t)}isEqual(e){return this===e}}function Dk(n,e,t,r){const o=n.ac(1,e,t);Ak("Data must be an object, but it was:",o,r);const u=[],c=Ss.empty();Tm(r,(y,b)=>{const S=_x(e,y,t);b=(0,k.m9)(b);const x=o.sc(S);if(b instanceof YC)u.push(S);else{const O=qm(b,x);null!=O&&(u.push(S),c.set(S,O))}});const p=new xv(u);return new lU(c,p,o.fieldTransforms)}function Sk(n,e,t,r,o,u){const c=n.ac(1,e,t),p=[xk(e,r,t)],y=[o];if(u.length%2!=0)throw new Pe(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let O=0;O<u.length;O+=2)p.push(xk(e,u[O])),y.push(u[O+1]);const b=[],S=Ss.empty();for(let O=p.length-1;O>=0;--O)if(!gU(b,p[O])){const $=p[O];let K=y[O];K=(0,k.m9)(K);const ye=c.sc($);if(K instanceof YC)b.push($);else{const xe=qm(K,ye);null!=xe&&(b.push($),S.set($,xe))}}const x=new xv(b);return new lU(S,x,c.fieldTransforms)}function hU(n,e,t,r=!1){return qm(t,n.ac(r?4:3,e))}function qm(n,e){if(pU(n=(0,k.m9)(n)))return Ak("Unsupported field value:",e,n),fU(n,e);if(n instanceof Gm)return function(t,r){if(!cU(r.Xa))throw r.rc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.rc(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const c of t){let p=qm(c,r.ic(u));null==p&&(p={nullValue:"NULL_VALUE"}),o.push(p),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,k.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return oL(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=ei.fromDate(t);return{timestampValue:OC(r.M,o)}}if(t instanceof ei){const o=new ei(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:OC(r.M,o)}}if(t instanceof px)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ic)return{bytesValue:TL(r.M,t._byteString)};if(t instanceof pr){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.rc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:WP(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.rc(`Unsupported field value: ${hx(t)}`)}(n,e)}function fU(n,e){const t={};return OF(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Tm(n,(r,o)=>{const u=qm(o,e.tc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function pU(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ei||n instanceof px||n instanceof Ic||n instanceof pr||n instanceof Gm)}function Ak(n,e,t){if(!pU(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=hx(t);throw e.rc("an object"===r?n+" a custom object":n+" "+r)}var r}function xk(n,e,t){if((e=(0,k.m9)(e))instanceof oh)return e._internalPath;if("string"==typeof e)return _x(n,e);throw yx("Field path arguments must be of type string or ",n,!1,void 0,t)}const Q$=new RegExp("[~\\*/\\[\\]]");function _x(n,e,t){if(e.search(Q$)>=0)throw yx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new oh(...e.split("."))._internalPath}catch(r){throw yx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function yx(n,e,t,r,o){const u=r&&!r.isEmpty(),c=void 0!==o;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(u||c)&&(y+=" (found",u&&(y+=` in field ${r}`),c&&(y+=` in document ${o}`),y+=")"),new Pe(ge.INVALID_ARGUMENT,p+n+y)}function gU(n,e){return n.some(t=>t.isEqual(e))}class QC{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new pr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new J$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(vx("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class J$ extends QC{data(){return super.data()}}function vx(n,e){return"string"==typeof e?_x(n,e):e instanceof oh?e._internalPath:e._delegate._internalPath}class zm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ah extends QC{constructor(e,t,r,o,u,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new JC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(vx("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class JC extends ah{data(e={}){return super.data(e)}}class up{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new zm(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new JC(this._firestore,this._userDataWriter,r.key,r,new zm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new JC(r._firestore,r._userDataWriter,c.doc.key,c.doc,new zm(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>o||3!==c.type).map(c=>{const p=new JC(r._firestore,r._userDataWriter,c.doc.key,c.doc,new zm(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,b=-1;return 0!==c.type&&(y=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),b=u.indexOf(c.doc.key)),{type:X$(c.type),doc:p,oldIndex:y,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function X$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et()}}function mU(n,e){return n instanceof ah&&e instanceof ah?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof up&&e instanceof up&&n._firestore===e._firestore&&sU(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function _U(n){if(HA(n)&&0===n.explicitOrderBy.length)throw new Pe(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class XC{}function lp(n,...e){for(const t of e)n=t._apply(n);return n}class eH extends XC{constructor(e,t,r){super(),this.lc=e,this.fc=t,this.dc=r,this.type="where"}_apply(e){const t=Wm(e.firestore),r=function(o,u,c,p,y,b,S){let x;if(y.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Pe(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){CU(S,b);const $=[];for(const K of S)$.push(bU(p,o,K));x={arrayValue:{values:$}}}else x=bU(p,o,S)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||CU(S,b),x=hU(c,"where",S,"in"===b||"not-in"===b);const O=cs.create(y,b,x);return function($,K){if(K.S()){const xe=VP($);if(null!==xe&&!xe.isEqual(K.field))throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${xe.toString()}' and '${K.field.toString()}'`);const pt=LP($);null!==pt&&IU(0,K.field,pt)}const ye=function(xe,pt){for(const dt of xe.filters)if(pt.indexOf(dt.op)>=0)return dt.op;return null}($,function(xe){switch(xe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(K.op));if(null!==ye)throw new Pe(ge.INVALID_ARGUMENT,ye===K.op?`Invalid query. You cannot use more than one '${K.op.toString()}' filter.`:`Invalid query. You cannot use '${K.op.toString()}' filters with '${ye.toString()}' filters.`)}(o,O),O}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new As(e.firestore,e.converter,function(o,u){const c=o.filters.concat([u]);return new ih(o.path,o.collectionGroup,o.explicitOrderBy.slice(),c,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class nH extends XC{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Pe(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Pe(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Nv(o,u);return function(p,y){if(null===LP(p)){const b=VP(p);null!==b&&IU(0,b,y.field)}}(r,c),c}(e._query,this.lc,this._c);return new As(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new ih(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class yU extends XC{constructor(e,t,r){super(),this.type=e,this.wc=t,this.mc=r}_apply(e){return new As(e.firestore,e.converter,eL(e._query,this.wc,this.mc))}}class vU extends XC{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=wU(e,this.type,this.gc,this.yc);return new As(e.firestore,e.converter,(o=t,new ih((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class EU extends XC{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=wU(e,this.type,this.gc,this.yc);return new As(e.firestore,e.converter,(o=t,new ih((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function wU(n,e,t,r){if(t[0]=(0,k.m9)(t[0]),t[0]instanceof QC)return function(o,u,c,p,y){if(!p)throw new Pe(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const b=[];for(const S of Pv(o))if(S.field.isKeyField())b.push(xm(u,p.key));else{const x=p.data.field(S.field);if(PP(x))throw new Pe(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const O=S.field.canonicalString();throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${O}' (used as the orderBy) does not exist.`)}b.push(x)}return new ep(b,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Wm(n.firestore);return function(u,c,p,y,b,S){const x=u.explicitOrderBy;if(b.length>x.length)throw new Pe(ge.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const O=[];for(let $=0;$<b.length;$++){const K=b[$];if(x[$].field.isKeyField()){if("string"!=typeof K)throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof K}`);if(!UP(u)&&-1!==K.indexOf("/"))throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${K}' contains a slash.`);const ye=u.path.child(_n.fromString(K));if(!We.isDocumentKey(ye))throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${ye}' is not because it contains an odd number of segments.`);const xe=new We(ye);O.push(xm(c,xe))}else{const ye=hU(p,y,K);O.push(ye)}}return new ep(O,S)}(n._query,n.firestore._databaseId,o,e,t,r)}}function bU(n,e,t){if("string"==typeof(t=(0,k.m9)(t))){if(""===t)throw new Pe(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!UP(e)&&-1!==t.indexOf("/"))throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(_n.fromString(t));if(!We.isDocumentKey(r))throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xm(n,new We(r))}if(t instanceof pr)return xm(n,t._key);throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hx(t)}.`)}function CU(n,e){if(!Array.isArray(n)||0===n.length)throw new Pe(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Pe(ge.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function IU(n,e,t){if(!t.isEqual(e))throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Rk{convertValue(e,t="none"){switch(Am(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Dm(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw et()}}convertObject(e,t){const r={};return Tm(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new px(Vr(e.latitude),Vr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=kF(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(EC(e));default:return null}}convertTimestamp(e){const t=Jf(e);return new ei(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=_n.fromString(e);Tt(kL(r));const o=new nh(r.get(1),r.get(3)),u=new We(r.popFirst(5));return o.isEqual(t)||Yn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function Ex(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class cH extends Rk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ic(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pr(this.firestore,null,t)}}class TU{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Wm(e)}set(e,t,r){this._verifyNotCommitted();const o=cp(e,this._firestore),u=Ex(o.converter,t,r),c=mx(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(c.toMutation(o._key,hi.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=cp(e,this._firestore);let c;return c="string"==typeof(t=(0,k.m9)(t))||t instanceof oh?Sk(this._dataReader,"WriteBatch.update",u._key,t,r,o):Dk(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,hi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=cp(e,this._firestore);return this._mutations=this._mutations.concat(new RC(t._key,hi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function cp(n,e){if((n=(0,k.m9)(n)).firestore!==e)throw new Pe(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Km extends Rk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ic(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pr(this.firestore,null,t)}}function DU(n,e,t){n=pn(n,pr);const r=pn(n.firestore,Cr),o=Ex(n.converter,e,t);return Xv(r,[mx(Wm(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,hi.none())])}function SU(n,e,t,...r){n=pn(n,pr);const o=pn(n.firestore,Cr),u=Wm(o);let c;return c="string"==typeof(e=(0,k.m9)(e))||e instanceof oh?Sk(u,"updateDoc",n._key,e,t,r):Dk(u,"updateDoc",n._key,e),Xv(o,[c.toMutation(n._key,hi.exists(!0))])}function AU(n,...e){var t,r,o;n=(0,k.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||Ik(e[c])||(u=e[c],c++);const p={includeMetadataChanges:u.includeMetadataChanges};if(Ik(e[c])){const x=e[c];e[c]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[c+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[c+2]=null===(o=x.complete)||void 0===o?void 0:o.bind(x)}let y,b,S;if(n instanceof pr)b=pn(n.firestore,Cr),S=Mv(n._key.path),y={next:x=>{e[c]&&e[c](Nk(b,n,x))},error:e[c+1],complete:e[c+2]};else{const x=pn(n,As);b=pn(x.firestore,Cr),S=x._query;const O=new Km(b);y={next:$=>{e[c]&&e[c](new up(b,O,x,$))},error:e[c+1],complete:e[c+2]},_U(n._query)}return function(x,O,$,K){const ye=new cx(K),xe=new $O(O,ye,$);return x.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return LO(yield Jv(x),xe)})),()=>{ye.Ia(),x.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return UO(yield Jv(x),xe)}))}}(pi(b),S,p,y)}function Xv(n,e){return function(t,r){const o=new $i;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(n,e,t){return zO.apply(this,arguments)}(yield wk(t),r,o)})),o.promise}(pi(n),e)}function Nk(n,e,t){const r=t.docs.get(e._key),o=new Km(n);return new ah(n,o,e._key,r,new zm(t.hasPendingWrites,t.fromCache),e.converter)}class EH extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Wm(e)}get(e){const t=cp(e,this._firestore),r=new cH(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return et();const u=o[0];if(u.isFoundDocument())return new QC(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new QC(this._firestore,r,t._key,null,t.converter);throw et()})}set(e,t,r){const o=cp(e,this._firestore),u=Ex(o.converter,t,r),c=mx(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,c),this}update(e,t,r,...o){const u=cp(e,this._firestore);let c;return c="string"==typeof(t=(0,k.m9)(t))||t instanceof oh?Sk(this._dataReader,"Transaction.update",u._key,t,r,o):Dk(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=cp(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=cp(e,this._firestore),r=new Km(this._firestore);return super.get(e).then(o=>new ah(this._firestore,r,t._key,o._document,new zm(!1,!1),t.converter))}}function Mk(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function RU(){if("undefined"==typeof Uint8Array)throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function NU(){if("undefined"==typeof atob)throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){or=Li.SDK_VERSION,(0,Li._registerComponent)(new ca.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new Cr(o,new O2(t.getProvider("auth-internal")),new L2(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,Li.registerVersion)(It,"3.4.8",n),(0,Li.registerVersion)(It,"3.4.8","esm2017")}();class eI{constructor(e){this._delegate=e}static fromBase64String(e){return NU(),new eI(Ic.fromBase64String(e))}static fromUint8Array(e){return RU(),new eI(Ic.fromUint8Array(e))}toBase64(){return NU(),this._delegate.toBase64()}toUint8Array(){return RU(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Pk(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class RH{enableIndexedDbPersistence(e,t){return function(n,e){uU(n=pn(n,Cr));const t=pi(n),r=n._freezeSettings(),o=new pk;return aU(t,o,new HV(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){uU(n=pn(n,Cr));const e=pi(n),t=n._freezeSettings(),r=new pk;return aU(e,r,new v$(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new Pe(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new $i;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(t=(0,Ee.Z)(function*(r){if(!tl.vt())return Promise.resolve();const o=r+"main";yield tl.delete(o)}),function(r){return t.apply(this,arguments)})(oO(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class MU{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof nh||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&th("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var o;const u=(n=pn(n,ZC))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&th("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,p;if("string"==typeof r.mockUserToken)c=r.mockUserToken,p=yt.MOCK_USER;else{c=(0,k.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Pe(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new yt(y)}n._authCredentials=new P2(new xF(c,p))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield zV(n),t=yield KV(n);return e.setNetworkEnabled(!0),function(r){const o=Ye(r);return o.fu.delete(0),zC(o)}(t)}))}(pi(n=pn(n,Cr)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield zV(n),t=yield KV(n);return e.setNetworkEnabled(!1),(r=(0,Ee.Z)(function*(o){const u=Ye(o);u.fu.add(0),yield Wv(u),u.wu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(pi(n=pn(n,Cr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,JV("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new $i;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(n,e){return JO.apply(this,arguments)}(yield wk(e),t)})),t.promise}(pi(n=pn(n,Cr)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new cx(e);return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield Jv(n),o=t,Ye(r).Eu.add(o),void o.next();var r,o})),()=>{t.Ia(),n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield Jv(n),o=t,void Ye(r).Eu.delete(o);var r,o}))}}(pi(n=pn(n,Cr)),Ik(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new eE(this,rU(this._delegate,e))}catch(t){throw Xs(t,"collection()","Firestore.collection()")}}doc(e){try{return new lu(this,fx(this._delegate,e))}catch(t){throw Xs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new eo(this,function(n,e){if(n=pn(n,ZC),Ck("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Pe(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new As(n,null,(t=e,new ih(_n.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Xs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e){return function(n,e){const t=new $i;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const r=yield(o=n,dx(o).then(u=>u.datastore));var o;new b$(n.asyncQueue,r,e,t).run()})),t.promise}(pi(n=pn(n,Cr)),t=>e(new EH(n,t)))}(this._delegate,t=>e(new PU(this,t)))}batch(){return pi(this._delegate),new OU(new TU(this._delegate,e=>Xv(this._delegate,e)))}loadBundle(e){return function(n,e){const t=pi(n=pn(n,Cr)),r=new k$;return function(n,e,t,r){const o=function(u,c){let p;return p="string"==typeof u?(new TextEncoder).encode(u):u,y=function(y,b){if(y instanceof Uint8Array)return GV(y,b);if(y instanceof ArrayBuffer)return GV(new Uint8Array(y),b);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new E$(y,c);var y}(t,qC(e));n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function(n,e,t){const r=Ye(n);var o;(o=(0,Ee.Z)(function*(u,c,p){try{const y=yield c.getMetadata();if(yield function(O,$){const K=Ye(O),ye=Gi($.createTime);return K.persistence.runTransaction("hasNewerBundle","readonly",xe=>K._s.getBundleMetadata(xe,$.id)).then(xe=>!!xe&&xe.createTime.compareTo(ye)>=0)}(u.localStore,y))return yield c.close(),p._completeWith({taskState:"Success",documentsLoaded:(O=y).totalDocuments,bytesLoaded:O.totalBytes,totalDocuments:O.totalDocuments,totalBytes:O.totalBytes}),Promise.resolve(new Set);p._updateProgress(PV(y));const b=new Qj(y,u.localStore,c.M);let S=yield c.da();for(;S;){const O=yield b.ku(S);O&&p._updateProgress(O),S=yield c.da()}const x=yield b.complete();return yield sh(u,x.Fu,void 0),yield function(O,$){const K=Ye(O);return K.persistence.runTransaction("Save bundle","readwrite",ye=>K._s.saveBundleMetadata(ye,$))}(u.localStore,y),p._completeWith(x.progress),Promise.resolve(x.Ou)}catch(y){return th("SyncEngine",`Loading bundle failed with ${y}`),p._failWith(y),Promise.resolve(new Set)}var O}),function(u,c,p){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield wk(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(t,r){const o=Ye(t);return o.persistence.runTransaction("Get named query","readonly",u=>o._s.getNamedQuery(u,r))}(yield Ek(n),e)}))}(pi(n=pn(n,Cr)),e).then(t=>t?new As(n,null,t.query):null)}(this._delegate,e).then(t=>t?new eo(this,t):null)}}class wx extends Rk{constructor(e){super(),this.firestore=e}convertBytes(e){return new eI(new Ic(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return lu.forKey(t,this.firestore,null)}}class PU{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new wx(e)}get(e){const t=Ym(e);return this._delegate.get(t).then(r=>new tI(this._firestore,new ah(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Ym(e);return r?(Mk("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Ym(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Ym(e);return this._delegate.delete(t),this}}class OU{constructor(e){this._delegate=e}set(e,t,r){const o=Ym(e);return r?(Mk("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Ym(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Ym(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Zm{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new JC(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new nI(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Zm.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Zm(e,new wx(e),t),o.set(t,u)),u}}Zm.INSTANCES=new WeakMap;class lu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new wx(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new lu(t,new pr(t._delegate,r,new We(e)))}static forKey(e,t,r){return new lu(t,new pr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new eE(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new eE(this.firestore,rU(this._delegate,e))}catch(t){throw Xs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,k.m9)(e))instanceof pr&&iU(this._delegate,e)}set(e,t){t=Mk("DocumentReference.set",t);try{return t?DU(this._delegate,e,t):DU(this._delegate,e)}catch(r){throw Xs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?SU(this._delegate,e):SU(this._delegate,e,t,...r)}catch(o){throw Xs(o,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return Xv(pn(n.firestore,Cr),[new RC(n._key,hi.none())])}(this._delegate)}onSnapshot(...e){const t=kU(e),r=FU(e,o=>new tI(this.firestore,new ah(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return AU(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=pn(n,pr);const e=pn(n.firestore,Cr),t=pi(e),r=new Km(e);return function(n,e){const t=new $i;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(o,u,c){try{const p=yield function(y,b){const S=Ye(y);return S.persistence.runTransaction("read document","readonly",x=>S.ci.Ls(x,b))}(o,u);p.isFoundDocument()?c.resolve(p):p.isNoDocument()?c.resolve(null):c.reject(new Pe(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const y=Kv(p,`Failed to get document '${u} from cache`);c.reject(y)}}),function(o,u,c){return r.apply(this,arguments)})(yield Ek(n),e,t);var r})),t.promise}(t,n._key).then(o=>new ah(e,r,n._key,o,new zm(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=pn(n,pr);const e=pn(n.firestore,Cr);return ZV(pi(e),n._key,{source:"server"}).then(t=>Nk(e,n,t))}(this._delegate):function(n){n=pn(n,pr);const e=pn(n.firestore,Cr);return ZV(pi(e),n._key).then(t=>Nk(e,n,t))}(this._delegate),t.then(r=>new tI(this.firestore,new ah(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new lu(this.firestore,this._delegate.withConverter(e?Zm.getInstance(this.firestore,e):null))}}function Xs(n,e,t){return n.message=n.message.replace(e,t),n}function kU(n){for(const e of n)if("object"==typeof e&&!Pk(e))return e;return{}}function FU(n,e){var t,r;let o;return o=Pk(n[0])?n[0]:Pk(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class tI{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new lu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return mU(this._delegate,e._delegate)}}class nI extends tI{data(e){const t=this._delegate.data(e);return function(n,e){n||et()}(void 0!==t),t}}class eo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new wx(e)}where(e,t,r){try{return new eo(this.firestore,lp(this._delegate,function(n,e,t){const r=e,o=vx("where",n);return new eH(o,r,t)}(e,t,r)))}catch(o){throw Xs(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new eo(this.firestore,lp(this._delegate,function(n,e="asc"){const t=e,r=vx("orderBy",n);return new nH(r,t)}(e,t)))}catch(r){throw Xs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new eo(this.firestore,lp(this._delegate,function(n){return tU("limit",n),new yU("limit",n,"F")}(e)))}catch(t){throw Xs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new eo(this.firestore,lp(this._delegate,function(n){return tU("limitToLast",n),new yU("limitToLast",n,"L")}(e)))}catch(t){throw Xs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new eo(this.firestore,lp(this._delegate,function(...n){return new vU("startAt",n,!0)}(...e)))}catch(t){throw Xs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new eo(this.firestore,lp(this._delegate,function(...n){return new vU("startAfter",n,!1)}(...e)))}catch(t){throw Xs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new eo(this.firestore,lp(this._delegate,function(...n){return new EU("endBefore",n,!1)}(...e)))}catch(t){throw Xs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new eo(this.firestore,lp(this._delegate,function(...n){return new EU("endAt",n,!0)}(...e)))}catch(t){throw Xs(t,"endAt()","Query.endAt()")}}isEqual(e){return sU(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=pn(n,As);const e=pn(n.firestore,Cr),t=pi(e),r=new Km(e);return function(n,e){const t=new $i;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(o,u,c){try{const p=yield ix(o,u,!0),y=new FV(u,p.li),b=y.Gu(p.documents),S=y.applyChanges(b,!1);c.resolve(S.snapshot)}catch(p){const y=Kv(p,`Failed to execute query '${u} against cache`);c.reject(y)}}),function(o,u,c){return r.apply(this,arguments)})(yield Ek(n),e,t);var r})),t.promise}(t,n._query).then(o=>new up(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=pn(n,As);const e=pn(n.firestore,Cr),t=pi(e),r=new Km(e);return YV(t,n._query,{source:"server"}).then(o=>new up(e,r,n,o))}(this._delegate):function(n){n=pn(n,As);const e=pn(n.firestore,Cr),t=pi(e),r=new Km(e);return _U(n._query),YV(t,n._query).then(o=>new up(e,r,n,o))}(this._delegate),t.then(r=>new Ok(this.firestore,new up(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=kU(e),r=FU(e,o=>new Ok(this.firestore,new up(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return AU(this._delegate,t,r)}withConverter(e){return new eo(this.firestore,this._delegate.withConverter(e?Zm.getInstance(this.firestore,e):null))}}class MH{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new nI(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ok{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new eo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new nI(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new MH(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new nI(this._firestore,r))})}isEqual(e){return mU(this._delegate,e._delegate)}}class eE extends eo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new lu(this.firestore,e):null}doc(e){try{return new lu(this.firestore,void 0===e?fx(this._delegate):fx(this._delegate,e))}catch(t){throw Xs(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=pn(n.firestore,Cr),r=fx(n),o=Ex(n.converter,e);return Xv(t,[mx(Wm(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,hi.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new lu(this.firestore,t))}isEqual(e){return iU(this._delegate,e._delegate)}withConverter(e){return new eE(this.firestore,this._delegate.withConverter(e?Zm.getInstance(this.firestore,e):null))}}function Ym(n){return pn(n,pr)}class kk{constructor(...e){this._delegate=new oh(...e)}static documentId(){return new kk(Hi.keyField().canonicalString())}isEqual(e){return(e=(0,k.m9)(e))instanceof oh&&this._delegate._internalPath.isEqual(e._internalPath)}}class Qm{constructor(e){this._delegate=e}static serverTimestamp(){const e=new Tk("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Qm(e)}static delete(){const e=new YC("deleteField");return e._methodName="FieldValue.delete",new Qm(e)}static arrayUnion(...e){const t=function(...n){return new K$("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Qm(t)}static arrayRemove(...e){const t=function(...n){return new Z$("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Qm(t)}static increment(e){const t=function(n){return new Y$("increment",n)}(e);return t._methodName="FieldValue.increment",new Qm(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const PH={Firestore:MU,GeoPoint:px,Timestamp:ei,Blob:eI,Transaction:PU,WriteBatch:OU,DocumentReference:lu,DocumentSnapshot:tI,Query:eo,QueryDocumentSnapshot:nI,QuerySnapshot:Ok,CollectionReference:eE,FieldPath:kk,FieldValue:Qm,setLogLevel:function(n){!function(n){Xr.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function LU(n,e){return function(n,e=Xh.z){return new jn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function Fk(n,e){return LU(n,e).pipe((0,At.U)(t=>({payload:t,type:"query"})))}function bx(n,e){return Fk(n,e).pipe(Us(void 0),QS(),(0,At.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,p)=>{const y=o.find(S=>S.doc.ref.isEqual(c.ref)),b=null==t?void 0:t.payload.docs.find(S=>S.ref.isEqual(c.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(c.metadata)||!y&&b&&JSON.stringify(b.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:c}})}),u}))}function VU(n,e,t){return bx(n,t).pipe(Va((r,o)=>function(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Lk(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Lk(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Lk(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),O_(),(0,At.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function Lk(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function UU(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function(n){(function(n,e){n.INTERNAL.registerComponent(new ca.wA("firestore-compat",t=>((e,t)=>new MU(e,t,new RH))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},PH)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.17")}(AI.Z);class BU{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=bx(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,At.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Us(void 0),QS(),Oi(([r,o])=>o.length>0||!r),(0,At.U)(([r,o])=>o),cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Va((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=UU(e);return VU(this.query,t,this.afs.schedulers.outsideAngular).pipe(cn.iC)}valueChanges(e={}){return Fk(this.query,this.afs.schedulers.outsideAngular).pipe((0,At.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),cn.iC)}get(e){return(0,Gt.D)(this.query.get(e)).pipe(cn.iC)}add(e){return this.ref.add(e)}doc(e){return new jU(this.ref.doc(e),this.afs)}}class jU{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=GU(r,t);return new BU(o,u,this.afs)}snapshotChanges(){return function(n,e){return LU(n,e).pipe(Us(void 0),QS(),(0,At.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(cn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,At.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Gt.D)(this.ref.get(e)).pipe(cn.iC)}}class BH{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?bx(this.query,this.afs.schedulers.outsideAngular).pipe((0,At.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Oi(t=>t.length>0),cn.iC):bx(this.query,this.afs.schedulers.outsideAngular).pipe(cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Va((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=UU(e);return VU(this.query,t,this.afs.schedulers.outsideAngular).pipe(cn.iC)}valueChanges(e={}){return Fk(this.query,this.afs.schedulers.outsideAngular).pipe((0,At.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),cn.iC)}get(e){return(0,Gt.D)(this.query.get(e)).pipe(cn.iC)}}const $U=new m.OlP("angularfire2.enableFirestorePersistence"),HU=new m.OlP("angularfire2.firestore.persistenceSettings"),jH=new m.OlP("angularfire2.firestore.settings"),$H=new m.OlP("angularfire2.firestore.use-emulator");function GU(n,e=(t=>t)){return{query:e(n),ref:n}}let HH=(()=>{class n{constructor(t,r,o,u,c,p,y,b,S,x,O,$,K,ye,xe,pt,dt){this.schedulers=y;const tt=(0,Er.on)(t,p,r),it=S;x&&W0(tt,p,O,K,ye,xe,$,pt),[this.firestore,this.persistenceEnabled$]=(0,Er.cc)(`${tt.name}.firestore`,"AngularFirestore",tt.name,()=>{const qt=p.runOutsideAngular(()=>tt.firestore());if(u&&qt.settings(u),it&&qt.useEmulator(...it),o&&!ul(c)){const rn=()=>{try{return(0,Gt.D)(qt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(gi){return"undefined"!=typeof console&&console.warn(gi),(0,at.of)(!1)}};return[qt,p.runOutsideAngular(rn)]}return[qt,(0,at.of)(!1)]},[u,it,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=GU(o,r),p=this.schedulers.ngZone.run(()=>u);return new BU(p,c,this)}collectionGroup(t,r){const o=r||(c=>c),u=this.firestore.collectionGroup(t);return new BH(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new jU(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Er.Dh),m.LFG(Er.xv,8),m.LFG($U,8),m.LFG(jH,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(cn.HU),m.LFG(HU,8),m.LFG($H,8),m.LFG(Py,8),m.LFG($0,8),m.LFG(My,8),m.LFG(tm,8),m.LFG(H0,8),m.LFG(eS,8),m.LFG(G0,8),m.LFG(Xg,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),GH=(()=>{class n{constructor(){em.Z.registerVersion("angularfire",cn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:$U,useValue:!0},{provide:HU,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[HH]}),n})();class qH{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new zH(e,this.dueTime,this.scheduler))}}class zH extends zr.L{constructor(e,t,r){super(e),this.dueTime=t,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(KH,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function KH(n){n.debouncedNext()}const WU="firebasestorage.googleapis.com",qU="storageBucket";class Ur extends k.ZR{constructor(e,t){super(Vk(e),`Firebase Storage: ${t} (${Vk(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ur.prototype)}_codeEquals(e){return Vk(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Vk(n){return"storage/"+n}function Uk(){return new Ur("unknown","An unknown error occurred, please check the error payload for server response.")}function zU(){return new Ur("canceled","User canceled the upload/download.")}function KU(){return new Ur("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function tE(n){return new Ur("invalid-argument",n)}function ZU(){return new Ur("app-deleted","The Firebase app was deleted.")}function YU(n){return new Ur("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function rI(n,e){return new Ur("invalid-format","String does not match format '"+n+"': "+e)}function iI(n){throw new Ur("internal-error","Internal error: "+n)}class xs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=xs.makeFromUrl(e,t)}catch(o){return new xs(e,"")}if(""===r.path)return r;throw function(n){return new Ur("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const o="([A-Za-z0-9.\\-_]+)",p=new RegExp("^gs://"+o+"(/(.*))?$","i");function b(it){it.path_=decodeURIComponent(it.path)}const x=t.replace(/[.]/g,"\\."),tt=[{regex:p,indices:{bucket:1,path:3},postModify:function(it){"/"===it.path.charAt(it.path.length-1)&&(it.path_=it.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${x}/v[A-Za-z0-9_]+/b/${o}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:b},{regex:new RegExp(`^https?://${t===WU?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${o}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:b}];for(let it=0;it<tt.length;it++){const qt=tt[it],rn=qt.regex.exec(e);if(rn){let Ta=rn[qt.indices.path];Ta||(Ta=""),r=new xs(rn[qt.indices.bucket],Ta),qt.postModify(r);break}}if(null==r)throw function(n){return new Ur("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class u3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Cx(n){return"string"==typeof n||n instanceof String}function QU(n){return Bk()&&n instanceof Blob}function Bk(){return"undefined"!=typeof Blob}function jk(n,e,t,r){if(r<e)throw tE(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw tE(`Invalid value for '${n}'. Expected ${t} or less.`)}function uh(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function JU(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var dp=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(dp||(dp={})),dp))();class p3{constructor(e,t,r,o,u,c,p,y,b,S,x){this.url_=e,this.method_=t,this.headers_=r,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=c,this.callback_=p,this.errorCallback_=y,this.timeout_=b,this.progressCallback_=S,this.connectionFactory_=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((O,$)=>{this.resolve_=O,this.reject_=$,this.start_()})}start_(){const t=(r,o)=>{const u=this.resolve_,c=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const y=this.callback_(p,p.getResponse());!function(n){return void 0!==n}(y)?u():u(y)}catch(y){c(y)}else if(null!==p){const y=Uk();y.serverResponse=p.getErrorText(),c(this.errorCallback_?this.errorCallback_(p,y):y)}else c(o.canceled?this.appDelete_?ZU():zU():new Ur("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?t(0,new Ix(!1,null,!0)):this.backoffId_=function(n,e,t){let r=1,o=null,u=null,c=!1,p=0;function y(){return 2===p}let b=!1;function S(...xe){b||(b=!0,e.apply(null,xe))}function x(xe){o=setTimeout(()=>{o=null,n($,y())},xe)}function O(){u&&clearTimeout(u)}function $(xe,...pt){if(b)return void O();if(xe)return O(),void S.call(null,xe,...pt);if(y()||c)return O(),void S.call(null,xe,...pt);let tt;r<64&&(r*=2),1===p?(p=2,tt=0):tt=1e3*(r+Math.random()),x(tt)}let K=!1;function ye(xe){K||(K=!0,O(),!b&&(null!==o?(xe||(p=2),clearTimeout(o),x(0)):xe||(p=1)))}return x(0),u=setTimeout(()=>{c=!0,ye(!0)},t),ye}((r,o)=>{if(o)return void r(!1,new Ix(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const c=p=>{null!==this.progressCallback_&&this.progressCallback_(p.loaded,p.lengthComputable?p.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(c),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(c),this.pendingConnection_=null;const p=u.getErrorCode()===dp.NO_ERROR,y=u.getStatus();if(!p||this.isRetryStatusCode_(y)){const S=u.getErrorCode()===dp.ABORT;return void r(!1,new Ix(!1,null,S))}const b=-1!==this.successCodes_.indexOf(y);r(!0,new Ix(b,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,o=-1!==[408,429].indexOf(e),u=-1!==this.additionalRetryCodes_.indexOf(e);return t||o||u}}class Ix{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function w3(...n){const e="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(Bk())return new Blob(n);throw new Ur("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Ia={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class $k{constructor(e,t){this.data=e,this.contentType=t||null}}function Hk(n,e){switch(n){case Ia.RAW:return new $k(XU(e));case Ia.BASE64:case Ia.BASE64URL:return new $k(e2(n,e));case Ia.DATA_URL:return new $k(function(n){const e=new t2(n);return e.base64?e2(Ia.BASE64,e.rest):function(n){let e;try{e=decodeURIComponent(n)}catch(t){throw rI(Ia.DATA_URL,"Malformed data URL.")}return XU(e)}(e.rest)}(e),function(n){return new t2(n).contentType}(e))}throw Uk()}function XU(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function e2(n,e){switch(n){case Ia.BASE64:{const o=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(o||u)throw rI(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Ia.BASE64URL:{const o=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(o||u)throw rI(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function(n){return atob(n)}(e)}catch(o){throw rI(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}class t2{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw rI(Ia.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=e.substring(e.indexOf(",")+1)}}class Tc{constructor(e,t){let r=0,o="";QU(e)?(this.data_=e,r=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(QU(this.data_)){const o=function(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===o?null:new Tc(o)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Tc(r,!0)}}static getBlob(...e){if(Bk()){const t=e.map(r=>r instanceof Tc?r.data_:r);return new Tc(w3.apply(null,t))}{const t=e.map(c=>Cx(c)?Hk(Ia.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const o=new Uint8Array(r);let u=0;return t.forEach(c=>{for(let p=0;p<c.length;p++)o[u++]=c[p]}),new Tc(o,!0)}}uploadData(){return this.data_}}function Gk(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function n2(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function R3(n,e){return e}class to{constructor(e,t,r,o){this.server=e,this.local=t||e,this.writable=!!r,this.xform=o||R3}}let Tx=null;function sI(){if(Tx)return Tx;const n=[];n.push(new to("bucket")),n.push(new to("generation")),n.push(new to("metageneration")),n.push(new to("name","fullPath",!0));const t=new to("name");t.xform=function(u,c){return function(n){return!Cx(n)||n.length<2?n:n2(n)}(c)},n.push(t);const o=new to("size");return o.xform=function(u,c){return void 0!==c?Number(c):c},n.push(o),n.push(new to("timeCreated")),n.push(new to("updated")),n.push(new to("md5Hash",null,!0)),n.push(new to("cacheControl",null,!0)),n.push(new to("contentDisposition",null,!0)),n.push(new to("contentEncoding",null,!0)),n.push(new to("contentLanguage",null,!0)),n.push(new to("contentType",null,!0)),n.push(new to("metadata","customMetadata",!0)),Tx=n,Tx}function r2(n,e,t){const r=Gk(e);return null===r?null:function(n,e,t){const r={type:"file"},o=t.length;for(let u=0;u<o;u++){const c=t[u];r[c.local]=c.xform(r,e[c.server])}return function(n,e){Object.defineProperty(n,"ref",{get:function(){const u=new xs(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function Wk(n,e){const t={},r=e.length;for(let o=0;o<r;o++){const u=e[o];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const i2="prefixes";class Dc{constructor(e,t,r,o){this.url=e,this.method=t,this.handler=r,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Sc(n){if(!n)throw Uk()}function Dx(n,e){return function(r,o){const u=r2(n,o,e);return Sc(null!==u),u}}function nE(n){return function(t,r){let o;return o=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?new Ur("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Ur("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?function(n){return new Ur("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function(n){return new Ur("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,o.serverResponse=r.serverResponse,o}}function oI(n){const e=nE(n);return function(r,o){let u=e(r,o);return 404===r.getStatus()&&(u=function(n){return new Ur("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=o.serverResponse,u}}function o2(n,e,t){const o=uh(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,p=new Dc(o,"GET",Dx(n,t),c);return p.errorHandler=oI(e),p}function U3(n,e,t,r,o){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),o&&(u.maxResults=o);const p=uh(e.bucketOnlyServerUrl(),n.host,n._protocol),b=n.maxOperationRetryTime,S=new Dc(p,"GET",function(n,e){return function(r,o){const u=function(n,e,t){const r=Gk(t);return null===r?null:function(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[i2])for(const o of t[i2]){const u=o.replace(/\/$/,""),c=n._makeStorageReference(new xs(e,u));r.prefixes.push(c)}if(t.items)for(const o of t.items){const u=n._makeStorageReference(new xs(e,o.name));r.items.push(u)}return r}(n,e,r)}(n,e,o);return Sc(null!==u),u}}(n,e.bucket),b);return S.urlParams=u,S.errorHandler=nE(e),S}function u2(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function(n,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}class Sx{constructor(e,t,r,o){this.current=e,this.total=t,this.finalized=!!r,this.metadata=o||null}}function qk(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(o){Sc(!1)}return Sc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const z3={STATE_CHANGED:"state_changed"},no={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function zk(n){switch(n){case"running":case"pausing":case"canceling":return no.RUNNING;case"paused":return no.PAUSED;case"success":return no.SUCCESS;case"canceled":return no.CANCELED;case"error":default:return no.ERROR}}class K3{constructor(e,t,r){if(function(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function rE(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class Y3 extends class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=dp.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=dp.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=dp.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,o){if(this.sent_)throw iI("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==o)for(const u in o)o.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,o[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw iI("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw iI("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw iI("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw iI("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function nl(){return new Y3}class h2{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=sI(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=o=>{this._request=void 0,this._chunkMultiplier=1,o._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=o,this._transition("error"))},this._metadataErrorHandler=o=>{this._request=void 0,o._codeEquals("canceled")?this.completeTransitions_():(this._error=o,this._transition("error"))},this._promise=new Promise((o,u)=>{this._resolve=o,this._reject=u,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function(n,e,t,r,o){const u=e.bucketOnlyServerUrl(),c=u2(e,r,o),p={name:c.fullPath},y=uh(u,n.host,n._protocol),S={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},x=Wk(c,t),K=new Dc(y,"POST",function(ye){let xe;qk(ye);try{xe=ye.getResponseHeader("X-Goog-Upload-URL")}catch(pt){Sc(!1)}return Sc(Cx(xe)),xe},n.maxUploadRetryTime);return K.urlParams=p,K.headers=S,K.body=x,K.errorHandler=nE(e),K}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,nl,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const o=function(n,e,t,r){const y=new Dc(t,"POST",function(b){const S=qk(b,["active","final"]);let x=null;try{x=b.getResponseHeader("X-Goog-Upload-Size-Received")}catch($){Sc(!1)}x||Sc(!1);const O=Number(x);return Sc(!isNaN(O)),new Sx(O,r.size(),"final"===S)},n.maxUploadRetryTime);return y.headers={"X-Goog-Upload-Command":"query"},y.errorHandler=nE(e),y}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(o,nl,t,r);this._request=u,u.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Sx(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((o,u)=>{let c;try{c=function(n,e,t,r,o,u,c,p){const y=new Sx(0,0);if(c?(y.current=c.current,y.total=c.total):(y.current=0,y.total=r.size()),r.size()!==y.total)throw new Ur("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const b=y.total-y.current;let S=b;o>0&&(S=Math.min(S,o));const x=y.current,K={"X-Goog-Upload-Command":S===b?"upload, finalize":"upload","X-Goog-Upload-Offset":`${y.current}`},ye=r.slice(x,x+S);if(null===ye)throw KU();const tt=new Dc(t,"POST",function(it,qt){const rn=qk(it,["active","final"]),gi=y.current+S,Ta=r.size();let Yk;return Yk="final"===rn?Dx(e,u)(it,qt):null,new Sx(gi,Ta,"final"===rn,Yk)},e.maxUploadRetryTime);return tt.headers=K,tt.body=ye.uploadData(),tt.progressCallback=p||null,tt.errorHandler=nE(n),tt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(y){return this._error=y,void this._transition("error")}const p=this._ref.storage._makeRequest(c,nl,o,u);this._request=p,p.getPromise().then(y=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(y.current),y.finalized?(this._metadata=y.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=o2(this._ref.storage,this._ref._location,this._mappings),o=this._ref.storage._makeRequest(r,nl,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function(n,e,t,r,o){const u=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},y=function(){let tt="";for(let it=0;it<2;it++)tt+=Math.random().toString().slice(2);return tt}();c["Content-Type"]="multipart/related; boundary="+y;const b=u2(e,r,o),S=Wk(b,t),$=Tc.getBlob("--"+y+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+S+"\r\n--"+y+"\r\nContent-Type: "+b.contentType+"\r\n\r\n",r,"\r\n--"+y+"--");if(null===$)throw KU();const K={name:b.fullPath},ye=uh(u,n.host,n._protocol),pt=n.maxUploadRetryTime,dt=new Dc(ye,"POST",Dx(n,t),pt);return dt.urlParams=K,dt.headers=c,dt.body=$.uploadData(),dt.errorHandler=nE(e),dt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,nl,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=zU(),this._state=e,this._notifyObservers();break;case"error":case"success":this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=zk(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,o){const u=new K3(t||void 0,r||void 0,o||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(zk(this._state)){case no.SUCCESS:rE(this._resolve.bind(null,this.snapshot))();break;case no.CANCELED:case no.ERROR:rE(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(zk(this._state)){case no.RUNNING:case no.PAUSED:e.next&&rE(e.next.bind(e,this.snapshot))();break;case no.SUCCESS:e.complete&&rE(e.complete.bind(e))();break;case no.CANCELED:case no.ERROR:e.error&&rE(e.error.bind(e,this._error))();break;default:e.error&&rE(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Jm{constructor(e,t){this._service=e,this._location=t instanceof xs?t:xs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Jm(e,t)}get root(){const e=new xs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return n2(this._location.path)}get storage(){return this._service}get parent(){const e=function(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new xs(this._location.bucket,e);return new Jm(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw YU(e)}}function p2(n,e,t){return Kk.apply(this,arguments)}function Kk(){return(Kk=(0,Ee.Z)(function*(n,e,t){const o=yield g2(n,{pageToken:t});e.prefixes.push(...o.prefixes),e.items.push(...o.items),null!=o.nextPageToken&&(yield p2(n,e,o.nextPageToken))})).apply(this,arguments)}function g2(n,e){null!=e&&"number"==typeof e.maxResults&&jk("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=U3(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,nl)}function uG(n){n._throwIfRoot("getDownloadURL");const e=function(n,e,t){const o=uh(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,p=new Dc(o,"GET",function(n,e){return function(r,o){const u=r2(n,o,e);return Sc(null!==u),function(n,e,t,r){const o=Gk(e);if(null===o||!Cx(o.downloadTokens))return null;const u=o.downloadTokens;if(0===u.length)return null;const c=encodeURIComponent;return u.split(",").map(b=>{const x=n.fullPath;return uh("/b/"+c(n.bucket)+"/o/"+c(x),t,r)+JU({alt:"media",token:b})})[0]}(u,o,n.host,n._protocol)}}(n,t),c);return p.errorHandler=oI(e),p}(n.storage,n._location,sI());return n.storage.makeRequestWithTokens(e,nl).then(t=>{if(null===t)throw new Ur("no-download-url","The given file does not have any download URLs.");return t})}function m2(n,e){const t=function(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new xs(n._location.bucket,t);return new Jm(n.storage,r)}function _2(n,e){if(n instanceof Zk){const t=n;if(null==t._bucket)throw new Ur("no-default-bucket","No default bucket found. Did you set the '"+qU+"' property when initializing the app?");const r=new Jm(t,t._bucket);return null!=e?_2(r,e):r}return void 0!==e?m2(n,e):n}function hG(n,e){if(e&&function(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof Zk)return function(n,e){return new Jm(n,e)}(n,e);throw tE("To use ref(service, url), the first argument must be a Storage instance.")}return _2(n,e)}function y2(n,e){const t=null==e?void 0:e[qU];return null==t?null:xs.makeFromBucketSpec(t,n)}class Zk{constructor(e,t,r,o,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=o,this._firebaseVersion=u,this._bucket=null,this._host=WU,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=o?xs.makeFromBucketSpec(o,this._host):y2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?xs.makeFromBucketSpec(this._url,e):y2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){jk("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){jk("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ee.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ee.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Jm(this,e)}_makeRequest(e,t,r,o){if(this._deleted)return new u3(ZU());{const u=function(n,e,t,r,o,u){const c=JU(n.urlParams),p=n.url+c,y=Object.assign({},n.headers);return function(n,e){e&&(n["X-Firebase-GMPID"]=e)}(y,e),function(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(y,t),function(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(y,u),function(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(y,r),new p3(p,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o)}(e,this._appId,r,o,t,this._firebaseVersion);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,Ee.Z)(function*(){const[o,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,o,u).getPromise()})()}}const v2="@firebase/storage";function b2(n,e){return hG(n=(0,k.m9)(n),e)}(0,Li._registerComponent)(new ca.wA("storage",function(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new Zk(t,r,o,e,Li.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,Li.registerVersion)(v2,"0.9.5",""),(0,Li.registerVersion)(v2,"0.9.5","esm2017");class Ax{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class C2{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Ax(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new Ax(r,this,this._ref))},t)}on(e,t,r,o){let u;return t&&(u="function"==typeof t?c=>t(new Ax(c,this,this._ref)):{next:t.next?c=>t.next(new Ax(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,o||void 0)}}class I2{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new lh(e,this._service))}get items(){return this._delegate.items.map(e=>new lh(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class lh{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(n,e){return m2(n,e)}(this._delegate,e);return new lh(t,this.storage)}get root(){return new lh(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new lh(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new C2(function(n,e,t){return function(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new h2(n,new Tc(e),t)}(n=(0,k.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Ia.RAW,r){this._throwIfRoot("putString");const o=Hk(t,e),u=Object.assign({},r);return null==u.contentType&&null!=o.contentType&&(u.contentType=o.contentType),new C2(new h2(this._delegate,new Tc(o.data,!0),u),this)}listAll(){return function(n){return function(n){const e={prefixes:[],items:[]};return p2(n,e).then(()=>e)}(n=(0,k.m9)(n))}(this._delegate).then(e=>new I2(e,this.storage))}list(e){return function(n,e){return g2(n=(0,k.m9)(n),e)}(this._delegate,e||void 0).then(t=>new I2(t,this.storage))}getMetadata(){return function(n){return function(n){n._throwIfRoot("getMetadata");const e=o2(n.storage,n._location,sI());return n.storage.makeRequestWithTokens(e,nl)}(n=(0,k.m9)(n))}(this._delegate)}updateMetadata(e){return function(n,e){return function(n,e){n._throwIfRoot("updateMetadata");const t=function(n,e,t,r){const u=uh(e.fullServerUrl(),n.host,n._protocol),p=Wk(t,r),b=n.maxOperationRetryTime,S=new Dc(u,"PATCH",Dx(n,r),b);return S.headers={"Content-Type":"application/json; charset=utf-8"},S.body=p,S.errorHandler=oI(e),S}(n.storage,n._location,e,sI());return n.storage.makeRequestWithTokens(t,nl)}(n=(0,k.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function(n){return uG(n=(0,k.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(n){return function(n){n._throwIfRoot("deleteObject");const e=function(n,e){const r=uh(e.fullServerUrl(),n.host,n._protocol),p=new Dc(r,"DELETE",function(y,b){},n.maxOperationRetryTime);return p.successCodes=[200,204],p.errorHandler=oI(e),p}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,nl)}(n=(0,k.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw YU(e)}}class T2{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(D2(e))throw tE("ref() expected a child path but got a URL, use refFromURL instead.");return new lh(b2(this._delegate,e),this)}refFromURL(e){if(!D2(e))throw tE("refFromURL() expected a full URL but got a child path, use ref() instead.");try{xs.makeFromUrl(e,this._delegate.host)}catch(t){throw tE("refFromUrl() expected a valid full URL but got an invalid one.")}return new lh(b2(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function(n,e,t,r={}){!function(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken="string"==typeof o?o:(0,k.Sg)(o,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function D2(n){return/^[A-Za-z]+:\/\//.test(n)}function AG(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new T2(t,r)}function S2(n){const e=function(n){return new jn.y(e=>{const t=c=>e.next(c);t(n.snapshot);const u=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){u()}}).pipe(function(n,e=Xh.P){return t=>t.lift(new qH(n,e))}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,At.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function xx(n){return{getDownloadURL:()=>(0,at.of)(void 0).pipe(cn.fc,_r(()=>n.getDownloadURL()),cn.iC),getMetadata:()=>(0,at.of)(void 0).pipe(cn.fc,_r(()=>n.getMetadata()),cn.iC),delete:()=>(0,Gt.D)(n.delete()),child:e=>xx(n.child(e)),updateMetadata:e=>(0,Gt.D)(n.updateMetadata(e)),put:(e,t)=>S2(n.put(e,t)),putString:(e,t,r)=>S2(n.putString(e,t,r)),list:e=>(0,Gt.D)(n.list(e)),listAll:()=>(0,Gt.D)(n.listAll())}}!function(n){const e={TaskState:no,TaskEvent:z3,StringFormat:Ia,Storage:T2,Reference:lh};n.INTERNAL.registerComponent(new ca.wA("storage-compat",AG,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.13")}(AI.Z);const NG=new m.OlP("angularfire2.storageBucket"),MG=new m.OlP("angularfire2.storage.maxUploadRetryTime"),PG=new m.OlP("angularfire2.storage.maxOperationRetryTime"),OG=new m.OlP("angularfire2.storage.use-emulator");let kG=(()=>{class n{constructor(t,r,o,u,c,p,y,b,S,x){const O=(0,Er.on)(t,c,r);this.storage=(0,Er.cc)(`${O.name}.storage.${o}`,"AngularFireStorage",O.name,()=>{const $=c.runOutsideAngular(()=>O.storage(o||void 0)),K=S;return K&&$.useEmulator(...K),y&&$.setMaxUploadRetryTime(y),b&&$.setMaxOperationRetryTime(b),$},[y,b])}ref(t){return xx(this.storage.ref(t))}refFromURL(t){return xx(this.storage.refFromURL(t))}upload(t,r,o){return xx(this.storage.ref(t)).put(r,o)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Er.Dh),m.LFG(Er.xv,8),m.LFG(NG,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(cn.HU),m.LFG(MG,8),m.LFG(PG,8),m.LFG(OG,8),m.LFG(Xg,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),FG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})(),LG=(()=>{class n{constructor(){em.Z.registerVersion("angularfire",cn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[kG],imports:[FG]}),n})();const VG={apiKey:"AIzaSyBtM7cE86rnFziMJRWOgI6Btf2WbOFj5vE",authDomain:"binance-watcher-4ca0e.firebaseapp.com",databaseURl:"https://binance-watcher-4ca0e-default-rtdb.firebaseio.com/",projectId:"binance-watcher-4ca0e",storageBucket:"binance-watcher-4ca0e.appspot.com",messagingSenderId:"585627053132",appId:"1:585627053132:web:273c98cb792fe3e2d818e9"};let UG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n,bootstrap:[wF]}),n.\u0275inj=m.cJS({providers:[],imports:[[Cp,Fx,ZS,Er.hO.initializeApp(VG),GH,JN,LG]]}),n})();(0,m.G48)(),ms().bootstrapModule(UG).catch(n=>console.error(n))},3394:(nt,Ce,V)=>{"use strict";V.d(Ce,{Z:()=>fe});var m=V(3854),X=V(3910),L=V(8026),ae=V(5422);class re{constructor(Le,oe){this._delegate=Le,this.firebase=oe,(0,L._addComponent)(Le,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=Le.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Le){this._delegate.automaticDataCollectionEnabled=Le}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Le=>{this._delegate.checkDestroyed(),Le()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(Le,oe=L._DEFAULT_ENTRY_NAME){var he;this._delegate.checkDestroyed();const Oe=this._delegate.container.getProvider(Le);return!Oe.isInitialized()&&"EXPLICIT"===(null===(he=Oe.getComponent())||void 0===he?void 0:he.instantiationMode)&&Oe.initialize(),Oe.getImmediate({identifier:oe})}_removeServiceInstance(Le,oe=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Le).clearInstance(oe)}_addComponent(Le){(0,L._addComponent)(this._delegate,Le)}_addOrOverwriteComponent(Le){(0,L._addOrOverwriteComponent)(this._delegate,Le)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const me=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function ne(){const pe=function(pe){const Le={},oe={__esModule:!0,initializeApp:function(ut,qe={}){const Se=L.initializeApp(ut,qe);if((0,m.r3)(Le,Se.name))return Le[Se.name];const be=new pe(Se,oe);return Le[Se.name]=be,be},app:Oe,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function(ut){const qe=ut.name,Se=qe.replace("-compat","");if(L._registerComponent(ut)&&"PUBLIC"===ut.type){const be=(Ue=Oe())=>{if("function"!=typeof Ue[Se])throw me.create("invalid-app-argument",{appName:qe});return Ue[Se]()};void 0!==ut.serviceProps&&(0,m.ZB)(be,ut.serviceProps),oe[Se]=be,pe.prototype[Se]=function(...Ue){return this._getService.bind(this,qe).apply(this,ut.multipleInstances?Ue:[])}}return"PUBLIC"===ut.type?oe[Se]:null},removeApp:function(ut){delete Le[ut]},useAsService:function(ut,qe){return"serverAuth"===qe?null:qe},modularAPIs:L}};function Oe(ut){if(!(0,m.r3)(Le,ut=ut||L._DEFAULT_ENTRY_NAME))throw me.create("no-app",{appName:ut});return Le[ut]}return oe.default=oe,Object.defineProperty(oe,"apps",{get:function(){return Object.keys(Le).map(ut=>Le[ut])}}),Oe.App=pe,oe}(re);return pe.INTERNAL=Object.assign(Object.assign({},pe.INTERNAL),{createFirebaseNamespace:ne,extendNamespace:function(oe){(0,m.ZB)(pe,oe)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),pe}(),G=new ae.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const pe=self.firebase.SDK_VERSION;pe&&pe.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const fe=U;(0,L.registerVersion)("@firebase/app-compat","0.1.22",undefined)},8026:(nt,Ce,V)=>{"use strict";V.r(Ce),V.d(Ce,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>In,_DEFAULT_ENTRY_NAME:()=>$t,_addComponent:()=>Nr,_addOrOverwriteComponent:()=>mi,_apps:()=>Xt,_clearComponents:()=>gn,_components:()=>st,_getProvider:()=>Dt,_registerComponent:()=>Gn,_removeServiceInstance:()=>Ln,deleteApp:()=>Me,getApp:()=>ar,getApps:()=>Ti,initializeApp:()=>ro,onLog:()=>Jn,registerVersion:()=>Ke,setLogLevel:()=>Wn});var m=V(8239),X=V(3910),L=V(5422),ae=V(3854);class re{constructor(Ae){this.container=Ae}getPlatformInfoString(){return this.container.getProviders().map(ot=>{if(function(Ze){const Ae=Ze.getComponent();return"VERSION"===(null==Ae?void 0:Ae.type)}(ot)){const mt=ot.getImmediate();return`${mt.library}/${mt.version}`}return null}).filter(ot=>ot).join(" ")}}const me="@firebase/app",J="0.7.21",ne=new L.Yd("@firebase/app"),$t="[DEFAULT]",An={[me]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Xt=new Map,st=new Map;function Nr(Ze,Ae){try{Ze.container.addComponent(Ae)}catch(ot){ne.debug(`Component ${Ae.name} failed to register with FirebaseApp ${Ze.name}`,ot)}}function mi(Ze,Ae){Ze.container.addOrOverwriteComponent(Ae)}function Gn(Ze){const Ae=Ze.name;if(st.has(Ae))return ne.debug(`There were multiple attempts to register component ${Ae}.`),!1;st.set(Ae,Ze);for(const ot of Xt.values())Nr(ot,Ze);return!0}function Dt(Ze,Ae){const ot=Ze.container.getProvider("heartbeat").getImmediate({optional:!0});return ot&&ot.triggerHeartbeat(),Ze.container.getProvider(Ae)}function Ln(Ze,Ae,ot=$t){Dt(Ze,Ae).clearInstance(ot)}function gn(){st.clear()}const Qn=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class vn{constructor(Ae,ot,mt){this._isDeleted=!1,this._options=Object.assign({},Ae),this._config=Object.assign({},ot),this._name=ot.name,this._automaticDataCollectionEnabled=ot.automaticDataCollectionEnabled,this._container=mt,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ae){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ae}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ae){this._isDeleted=Ae}checkDestroyed(){if(this.isDeleted)throw Qn.create("app-deleted",{appName:this._name})}}const In="9.6.11";function ro(Ze,Ae={}){"object"!=typeof Ae&&(Ae={name:Ae});const ot=Object.assign({name:$t,automaticDataCollectionEnabled:!1},Ae),mt=ot.name;if("string"!=typeof mt||!mt)throw Qn.create("bad-app-name",{appName:String(mt)});const Ut=Xt.get(mt);if(Ut){if((0,ae.vZ)(Ze,Ut.options)&&(0,ae.vZ)(ot,Ut.config))return Ut;throw Qn.create("duplicate-app",{appName:mt})}const Qt=new X.H0(mt);for(const H of st.values())Qt.addComponent(H);const z=new vn(Ze,ot,Qt);return Xt.set(mt,z),z}function ar(Ze=$t){const Ae=Xt.get(Ze);if(!Ae)throw Qn.create("no-app",{appName:Ze});return Ae}function Ti(){return Array.from(Xt.values())}function Me(Ze){return ur.apply(this,arguments)}function ur(){return(ur=(0,m.Z)(function*(Ze){const Ae=Ze.name;Xt.has(Ae)&&(Xt.delete(Ae),yield Promise.all(Ze.container.getProviders().map(ot=>ot.delete())),Ze.isDeleted=!0)})).apply(this,arguments)}function Ke(Ze,Ae,ot){var mt;let Ut=null!==(mt=An[Ze])&&void 0!==mt?mt:Ze;ot&&(Ut+=`-${ot}`);const Qt=Ut.match(/\s|\//),z=Ae.match(/\s|\//);if(Qt||z){const H=[`Unable to register library "${Ut}" with version "${Ae}":`];return Qt&&H.push(`library name "${Ut}" contains illegal characters (whitespace or "/")`),Qt&&z&&H.push("and"),z&&H.push(`version name "${Ae}" contains illegal characters (whitespace or "/")`),void ne.warn(H.join(" "))}Gn(new X.wA(`${Ut}-version`,()=>({library:Ut,version:Ae}),"VERSION"))}function Jn(Ze,Ae){if(null!==Ze&&"function"!=typeof Ze)throw Qn.create("invalid-log-argument");(0,L.Am)(Ze,Ae)}function Wn(Ze){(0,L.Ub)(Ze)}const Ir="firebase-heartbeat-store";let Tr=null;function Vn(){return Tr||(Tr=(0,ae.X3)("firebase-heartbeat-database",1,(Ze,Ae)=>{switch(Ae){case 0:Ze.createObjectStore(Ir)}}).catch(Ze=>{throw Qn.create("storage-open",{originalErrorMessage:Ze.message})})),Tr}function xn(){return(xn=(0,m.Z)(function*(Ze){try{return(yield Vn()).transaction(Ir).objectStore(Ir).get(Rs(Ze))}catch(Ae){throw Qn.create("storage-get",{originalErrorMessage:Ae.message})}})).apply(this,arguments)}function He(Ze,Ae){return gt.apply(this,arguments)}function gt(){return(gt=(0,m.Z)(function*(Ze,Ae){try{const mt=(yield Vn()).transaction(Ir,"readwrite");return yield mt.objectStore(Ir).put(Ae,Rs(Ze)),mt.complete}catch(ot){throw Qn.create("storage-set",{originalErrorMessage:ot.message})}})).apply(this,arguments)}function Rs(Ze){return`${Ze.name}!${Ze.options.appId}`}class Et{constructor(Ae){this.container=Ae,this._heartbeatsCache=null;const ot=this.container.getProvider("app").getImmediate();this._storage=new un(ot),this._heartbeatsCachePromise=this._storage.read().then(mt=>(this._heartbeatsCache=mt,mt))}triggerHeartbeat(){var Ae=this;return(0,m.Z)(function*(){const mt=Ae.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ut=on();if(null===Ae._heartbeatsCache&&(Ae._heartbeatsCache=yield Ae._heartbeatsCachePromise),Ae._heartbeatsCache.lastSentHeartbeatDate!==Ut&&!Ae._heartbeatsCache.heartbeats.some(Qt=>Qt.date===Ut))return Ae._heartbeatsCache.heartbeats.push({date:Ut,agent:mt}),Ae._heartbeatsCache.heartbeats=Ae._heartbeatsCache.heartbeats.filter(Qt=>{const z=new Date(Qt.date).valueOf();return Date.now()-z<=2592e6}),Ae._storage.overwrite(Ae._heartbeatsCache)})()}getHeartbeatsHeader(){var Ae=this;return(0,m.Z)(function*(){if(null===Ae._heartbeatsCache&&(yield Ae._heartbeatsCachePromise),null===Ae._heartbeatsCache||0===Ae._heartbeatsCache.heartbeats.length)return"";const ot=on(),{heartbeatsToSend:mt,unsentEntries:Ut}=function(Ze,Ae=1024){const ot=[];let mt=Ze.slice();for(const Ut of Ze){const Qt=ot.find(z=>z.agent===Ut.agent);if(Qt){if(Qt.dates.push(Ut.date),kt(ot)>Ae){Qt.dates.pop();break}}else if(ot.push({agent:Ut.agent,dates:[Ut.date]}),kt(ot)>Ae){ot.pop();break}mt=mt.slice(1)}return{heartbeatsToSend:ot,unsentEntries:mt}}(Ae._heartbeatsCache.heartbeats),Qt=(0,ae.L)(JSON.stringify({version:2,heartbeats:mt}));return Ae._heartbeatsCache.lastSentHeartbeatDate=ot,Ut.length>0?(Ae._heartbeatsCache.heartbeats=Ut,yield Ae._storage.overwrite(Ae._heartbeatsCache)):(Ae._heartbeatsCache.heartbeats=[],Ae._storage.overwrite(Ae._heartbeatsCache)),Qt})()}}function on(){return(new Date).toISOString().substring(0,10)}class un{constructor(Ae){this.app=Ae,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ae=this;return(0,m.Z)(function*(){return(yield Ae._canUseIndexedDBPromise)&&(yield function(Ze){return xn.apply(this,arguments)}(Ae.app))||{heartbeats:[]}})()}overwrite(Ae){var ot=this;return(0,m.Z)(function*(){var mt;if(yield ot._canUseIndexedDBPromise){const Qt=yield ot.read();return He(ot.app,{lastSentHeartbeatDate:null!==(mt=Ae.lastSentHeartbeatDate)&&void 0!==mt?mt:Qt.lastSentHeartbeatDate,heartbeats:Ae.heartbeats})}})()}add(Ae){var ot=this;return(0,m.Z)(function*(){var mt;if(yield ot._canUseIndexedDBPromise){const Qt=yield ot.read();return He(ot.app,{lastSentHeartbeatDate:null!==(mt=Ae.lastSentHeartbeatDate)&&void 0!==mt?mt:Qt.lastSentHeartbeatDate,heartbeats:[...Qt.heartbeats,...Ae.heartbeats]})}})()}}function kt(Ze){return(0,ae.L)(JSON.stringify({version:2,heartbeats:Ze})).length}Gn(new X.wA("platform-logger",Ae=>new re(Ae),"PRIVATE")),Gn(new X.wA("heartbeat",Ae=>new Et(Ae),"PRIVATE")),Ke(me,J,""),Ke(me,J,"esm2017"),Ke("fire-js","")},3910:(nt,Ce,V)=>{"use strict";V.d(Ce,{wA:()=>L,H0:()=>J,zt:()=>re});var m=V(8239),X=V(3854);class L{constructor(U,G,B){this.name=U,this.instanceFactory=G,this.type=B,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const ae="[DEFAULT]";class re{constructor(U,G){this.name=U,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const G=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(G)){const B=new X.BH;if(this.instancesDeferred.set(G,B),this.isInitialized(G)||this.shouldAutoInitialize())try{const te=this.getOrInitializeService({instanceIdentifier:G});te&&B.resolve(te)}catch(te){}}return this.instancesDeferred.get(G).promise}getImmediate(U){var G;const B=this.normalizeInstanceIdentifier(null==U?void 0:U.identifier),te=null!==(G=null==U?void 0:U.optional)&&void 0!==G&&G;if(!this.isInitialized(B)&&!this.shouldAutoInitialize()){if(te)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:B})}catch(ue){if(te)return null;throw ue}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if("EAGER"===U.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ae})}catch(G){}for(const[G,B]of this.instancesDeferred.entries()){const te=this.normalizeInstanceIdentifier(G);try{const ue=this.getOrInitializeService({instanceIdentifier:te});B.resolve(ue)}catch(ue){}}}}clearInstance(U=ae){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,m.Z)(function*(){const G=Array.from(U.instances.values());yield Promise.all([...G.filter(B=>"INTERNAL"in B).map(B=>B.INTERNAL.delete()),...G.filter(B=>"_delete"in B).map(B=>B._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=ae){return this.instances.has(U)}getOptions(U=ae){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:G={}}=U,B=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(B))throw Error(`${this.name}(${B}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const te=this.getOrInitializeService({instanceIdentifier:B,options:G});for(const[ue,fe]of this.instancesDeferred.entries())B===this.normalizeInstanceIdentifier(ue)&&fe.resolve(te);return te}onInit(U,G){var B;const te=this.normalizeInstanceIdentifier(G),ue=null!==(B=this.onInitCallbacks.get(te))&&void 0!==B?B:new Set;ue.add(U),this.onInitCallbacks.set(te,ue);const fe=this.instances.get(te);return fe&&U(fe,te),()=>{ue.delete(U)}}invokeOnInitCallbacks(U,G){const B=this.onInitCallbacks.get(G);if(B)for(const te of B)try{te(U,G)}catch(ue){}}getOrInitializeService({instanceIdentifier:U,options:G={}}){let B=this.instances.get(U);if(!B&&this.component&&(B=this.component.instanceFactory(this.container,{instanceIdentifier:(ne=U,ne===ae?void 0:ne),options:G}),this.instances.set(U,B),this.instancesOptions.set(U,G),this.invokeOnInitCallbacks(B,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,B)}catch(te){}var ne;return B||null}normalizeInstanceIdentifier(U=ae){return this.component?this.component.multipleInstances?U:ae:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class J{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const G=this.getProvider(U.name);if(G.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);G.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const G=new re(U,this);return this.providers.set(U,G),G}getProviders(){return Array.from(this.providers.values())}}},5422:(nt,Ce,V)=>{"use strict";V.d(Ce,{in:()=>X,Yd:()=>me,Ub:()=>J,Am:()=>ne});const m=[];var X=(()=>{return(U=X||(X={}))[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",X;var U})();const L={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},ae=X.INFO,re={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},Z=(U,G,...B)=>{if(G<U.logLevel)return;const te=(new Date).toISOString(),ue=re[G];if(!ue)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[ue](`[${te}]  ${U.name}:`,...B)};class me{constructor(G){this.name=G,this._logLevel=ae,this._logHandler=Z,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in X))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?L[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...G),this._logHandler(this,X.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...G),this._logHandler(this,X.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,X.INFO,...G),this._logHandler(this,X.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,X.WARN,...G),this._logHandler(this,X.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...G),this._logHandler(this,X.ERROR,...G)}}function J(U){m.forEach(G=>{G.setLogLevel(U)})}function ne(U,G){for(const B of m){let te=null;G&&G.level&&(te=L[G.level]),B.userLogHandler=null===U?null:(ue,fe,...pe)=>{const Le=pe.map(oe=>{if(null==oe)return null;if("string"==typeof oe)return oe;if("number"==typeof oe||"boolean"==typeof oe)return oe.toString();if(oe instanceof Error)return oe.message;try{return JSON.stringify(oe)}catch(he){return null}}).filter(oe=>oe).join(" ");fe>=(null!=te?te:ue.logLevel)&&U({level:X[fe].toLowerCase(),message:Le,args:pe,type:ue.name})}}}},8239:(nt,Ce,V)=>{"use strict";function m(L,ae,re,Z,me,J,ne){try{var U=L[J](ne),G=U.value}catch(B){return void re(B)}U.done?ae(G):Promise.resolve(G).then(Z,me)}function X(L){return function(){var ae=this,re=arguments;return new Promise(function(Z,me){var J=L.apply(ae,re);function ne(G){m(J,Z,me,ne,U,"next",G)}function U(G){m(J,Z,me,ne,U,"throw",G)}ne(void 0)})}}V.d(Ce,{Z:()=>X})}},nt=>{nt(nt.s=1301)}]);